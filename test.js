!function (a, b) {
	"object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function (a) {
		if (!a.document)
			throw new Error("jQuery requires a window with a document");
		return b(a)
	}
	 : b(a)
}
("undefined" != typeof window ? window : this, function (a, b) {
	function c(a) {
		var b = a.length,
		c = ea.type(a);
		return "function" !== c && !ea.isWindow(a) && (!(1 !== a.nodeType || !b) || ("array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a))
	}
	function d(a, b, c) {
		if (ea.isFunction(b))
			return ea.grep(a, function (a, d) {
				return !!b.call(a, d, a) !== c
			});
		if (b.nodeType)
			return ea.grep(a, function (a) {
				return a === b !== c
			});
		if ("string" == typeof b) {
			if (ma.test(b))
				return ea.filter(b, a, c);
			b = ea.filter(b, a)
		}
		return ea.grep(a, function (a) {
			return ea.inArray(a, b) >= 0 !== c
		})
	}
	function e(a, b) {
		do
			a = a[b];
		while (a && 1 !== a.nodeType);
		return a
	}
	function f(a) {
		var b = ua[a] = {};
		return ea.each(a.match(ta) || [], function (a, c) {
			b[c] = !0
		}),
		b
	}
	function g() {
		oa.addEventListener ? (oa.removeEventListener("DOMContentLoaded", h, !1), a.removeEventListener("load", h, !1)) : (oa.detachEvent("onreadystatechange", h), a.detachEvent("onload", h))
	}
	function h() {
		(oa.addEventListener || "load" === event.type || "complete" === oa.readyState) && (g(), ea.ready())
	}
	function i(a, b, c) {
		if (void 0 === c && 1 === a.nodeType) {
			var d = "data-" + b.replace(za, "-$1").toLowerCase();
			if (c = a.getAttribute(d), "string" == typeof c) {
				try {
					c = "true" === c || "false" !== c && ("null" === c ? null : +c + "" === c ? +c : ya.test(c) ? ea.parseJSON(c) : c)
				} catch (a) {}
				ea.data(a, b, c)
			} else
				c = void 0
		}
		return c
	}
	function j(a) {
		var b;
		for (b in a)
			if (("data" !== b || !ea.isEmptyObject(a[b])) && "toJSON" !== b)
				return !1;
		return !0
	}
	function k(a, b, c, d) {
		if (ea.acceptData(a)) {
			var e,
			f,
			g = ea.expando,
			h = a.nodeType,
			i = h ? ea.cache : a,
			j = h ? a[g] : a[g] && g;
			if (j && i[j] && (d || i[j].data) || void 0 !== c || "string" != typeof b)
				return j || (j = h ? a[g] = W.pop() || ea.guid++ : g), i[j] || (i[j] = h ? {}
					 : {
					toJSON: ea.noop
				}), "object" != typeof b && "function" != typeof b || (d ? i[j] = ea.extend(i[j], b) : i[j].data = ea.extend(i[j].data, b)), f = i[j], d || (f.data || (f.data = {}), f = f.data), void 0 !== c && (f[ea.camelCase(b)] = c), "string" == typeof b ? (e = f[b], null == e && (e = f[ea.camelCase(b)])) : e = f, e
		}
	}
	function l(a, b, c) {
		if (ea.acceptData(a)) {
			var d,
			e,
			f = a.nodeType,
			g = f ? ea.cache : a,
			h = f ? a[ea.expando] : ea.expando;
			if (g[h]) {
				if (b && (d = c ? g[h] : g[h].data)) {
					ea.isArray(b) ? b = b.concat(ea.map(b, ea.camelCase)) : b in d ? b = [b] : (b = ea.camelCase(b), b = b in d ? [b] : b.split(" ")),
					e = b.length;
					for (; e--; )
						delete d[b[e]];
					if (c ? !j(d) : !ea.isEmptyObject(d))
						return
				}
				(c || (delete g[h].data, j(g[h]))) && (f ? ea.cleanData([a], !0) : ca.deleteExpando || g != g.window ? delete g[h] : g[h] = null)
			}
		}
	}
	function m() {
		return !0
	}
	function n() {
		return !1
	}
	function o() {
		try {
			return oa.activeElement
		} catch (a) {}
	}
	function p(a) {
		var b = Ka.split("|"),
		c = a.createDocumentFragment();
		if (c.createElement)
			for (; b.length; )
				c.createElement(b.pop());
		return c
	}
	function q(a, b) {
		var c,
		d,
		e = 0,
		f = typeof a.getElementsByTagName !== xa ? a.getElementsByTagName(b || "*") : typeof a.querySelectorAll !== xa ? a.querySelectorAll(b || "*") : void 0;
		if (!f)
			for (f = [], c = a.childNodes || a; null != (d = c[e]); e++)
				!b || ea.nodeName(d, b) ? f.push(d) : ea.merge(f, q(d, b));
		return void 0 === b || b && ea.nodeName(a, b) ? ea.merge([a], f) : f
	}
	function r(a) {
		Ea.test(a.type) && (a.defaultChecked = a.checked)
	}
	function s(a, b) {
		return ea.nodeName(a, "table") && ea.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
	}
	function t(a) {
		return a.type = (null !== ea.find.attr(a, "type")) + "/" + a.type,
		a
	}
	function u(a) {
		var b = Va.exec(a.type);
		return b ? a.type = b[1] : a.removeAttribute("type"),
		a
	}
	function v(a, b) {
		for (var c, d = 0; null != (c = a[d]); d++)
			ea._data(c, "globalEval", !b || ea._data(b[d], "globalEval"))
	}
	function w(a, b) {
		if (1 === b.nodeType && ea.hasData(a)) {
			var c,
			d,
			e,
			f = ea._data(a),
			g = ea._data(b, f),
			h = f.events;
			if (h) {
				delete g.handle,
				g.events = {};
				for (c in h)
					for (d = 0, e = h[c].length; d < e; d++)
						ea.event.add(b, c, h[c][d])
			}
			g.data && (g.data = ea.extend({}, g.data))
		}
	}
	function x(a, b) {
		var c,
		d,
		e;
		if (1 === b.nodeType) {
			if (c = b.nodeName.toLowerCase(), !ca.noCloneEvent && b[ea.expando]) {
				e = ea._data(b);
				for (d in e.events)
					ea.removeEvent(b, d, e.handle);
				b.removeAttribute(ea.expando)
			}
			"script" === c && b.text !== a.text ? (t(b).text = a.text, u(b)) : "object" === c ? (b.parentNode && (b.outerHTML = a.outerHTML), ca.html5Clone && a.innerHTML && !ea.trim(b.innerHTML) && (b.innerHTML = a.innerHTML)) : "input" === c && Ea.test(a.type) ? (b.defaultChecked = b.checked = a.checked, b.value !== a.value && (b.value = a.value)) : "option" === c ? b.defaultSelected = b.selected = a.defaultSelected : "input" !== c && "textarea" !== c || (b.defaultValue = a.defaultValue)
		}
	}
	function y(b, c) {
		var d,
		e = ea(c.createElement(b)).appendTo(c.body),
		f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display : ea.css(e[0], "display");
		return e.detach(),
		f
	}
	function z(a) {
		var b = oa,
		c = _a[a];
		return c || (c = y(a, b), "none" !== c && c || ($a = ($a || ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = ($a[0].contentWindow || $a[0].contentDocument).document, b.write(), b.close(), c = y(a, b), $a.detach()), _a[a] = c),
		c
	}
	function A(a, b) {
		return {
			get: function () {
				var c = a();
				if (null != c)
					return c ? void delete this.get : (this.get = b).apply(this, arguments)
			}
		}
	}
	function B(a, b) {
		if (b in a)
			return b;
		for (var c = b.charAt(0).toUpperCase() + b.slice(1), d = b, e = mb.length; e--; )
			if (b = mb[e] + c, b in a)
				return b;
		return d
	}
	function C(a, b) {
		for (var c, d, e, f = [], g = 0, h = a.length; g < h; g++)
			d = a[g], d.style && (f[g] = ea._data(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && Ca(d) && (f[g] = ea._data(d, "olddisplay", z(d.nodeName)))) : (e = Ca(d), (c && "none" !== c || !e) && ea._data(d, "olddisplay", e ? c : ea.css(d, "display"))));
		for (g = 0; g < h; g++)
			d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
		return a
	}
	function D(a, b, c) {
		var d = ib.exec(b);
		return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
	}
	function E(a, b, c, d, e) {
		for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; f < 4; f += 2)
			"margin" === c && (g += ea.css(a, c + Ba[f], !0, e)), d ? ("content" === c && (g -= ea.css(a, "padding" + Ba[f], !0, e)), "margin" !== c && (g -= ea.css(a, "border" + Ba[f] + "Width", !0, e))) : (g += ea.css(a, "padding" + Ba[f], !0, e), "padding" !== c && (g += ea.css(a, "border" + Ba[f] + "Width", !0, e)));
		return g
	}
	function F(a, b, c) {
		var d = !0,
		e = "width" === b ? a.offsetWidth : a.offsetHeight,
		f = ab(a),
		g = ca.boxSizing && "border-box" === ea.css(a, "boxSizing", !1, f);
		if (e <= 0 || null == e) {
			if (e = bb(a, b, f), (e < 0 || null == e) && (e = a.style[b]), db.test(e))
				return e;
			d = g && (ca.boxSizingReliable() || e === a.style[b]),
			e = parseFloat(e) || 0
		}
		return e + E(a, b, c || (g ? "border" : "content"), d, f) + "px"
	}
	function G(a, b, c, d, e) {
		return new G.prototype.init(a, b, c, d, e)
	}
	function H() {
		return setTimeout(function () {
			nb = void 0
		}),
		nb = ea.now()
	}
	function I(a, b) {
		var c,
		d = {
			height: a
		},
		e = 0;
		for (b = b ? 1 : 0; e < 4; e += 2 - b)
			c = Ba[e], d["margin" + c] = d["padding" + c] = a;
		return b && (d.opacity = d.width = a),
		d
	}
	function J(a, b, c) {
		for (var d, e = (tb[b] || []).concat(tb["*"]), f = 0, g = e.length; f < g; f++)
			if (d = e[f].call(c, b, a))
				return d
	}
	function K(a, b, c) {
		var d,
		e,
		f,
		g,
		h,
		i,
		j,
		k,
		l = this,
		m = {},
		n = a.style,
		o = a.nodeType && Ca(a),
		p = ea._data(a, "fxshow");
		c.queue || (h = ea._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function () {
				h.unqueued || i()
			}), h.unqueued++, l.always(function () {
				l.always(function () {
					h.unqueued--,
					ea.queue(a, "fx").length || h.empty.fire()
				})
			})),
		1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [n.overflow, n.overflowX, n.overflowY], j = ea.css(a, "display"), k = "none" === j ? ea._data(a, "olddisplay") || z(a.nodeName) : j, "inline" === k && "none" === ea.css(a, "float") && (ca.inlineBlockNeedsLayout && "inline" !== z(a.nodeName) ? n.zoom = 1 : n.display = "inline-block")),
		c.overflow && (n.overflow = "hidden", ca.shrinkWrapBlocks() || l.always(function () {
				n.overflow = c.overflow[0],
				n.overflowX = c.overflow[1],
				n.overflowY = c.overflow[2]
			}));
		for (d in b)
			if (e = b[d], pb.exec(e)) {
				if (delete b[d], f = f || "toggle" === e, e === (o ? "hide" : "show")) {
					if ("show" !== e || !p || void 0 === p[d])
						continue;
					o = !0
				}
				m[d] = p && p[d] || ea.style(a, d)
			} else
				j = void 0;
		if (ea.isEmptyObject(m))
			"inline" === ("none" === j ? z(a.nodeName) : j) && (n.display = j);
		else {
			p ? "hidden" in p && (o = p.hidden) : p = ea._data(a, "fxshow", {}),
			f && (p.hidden = !o),
			o ? ea(a).show() : l.done(function () {
				ea(a).hide()
			}),
			l.done(function () {
				var b;
				ea._removeData(a, "fxshow");
				for (b in m)
					ea.style(a, b, m[b])
			});
			for (d in m)
				g = J(o ? p[d] : 0, d, l), d in p || (p[d] = g.start, o && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
		}
	}
	function L(a, b) {
		var c,
		d,
		e,
		f,
		g;
		for (c in a)
			if (d = ea.camelCase(c), e = b[d], f = a[c], ea.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = ea.cssHooks[d], g && "expand" in g) {
				f = g.expand(f),
				delete a[d];
				for (c in f)
					c in a || (a[c] = f[c], b[c] = e)
			} else
				b[d] = e
	}
	function M(a, b, c) {
		var d,
		e,
		f = 0,
		g = sb.length,
		h = ea.Deferred().always(function () {
				delete i.elem
			}),
		i = function () {
			if (e)
				return !1;
			for (var b = nb || H(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; g < i; g++)
				j.tweens[g].run(f);
			return h.notifyWith(a, [j, f, c]),
			f < 1 && i ? c : (h.resolveWith(a, [j]), !1)
		},
		j = h.promise({
				elem: a,
				props: ea.extend({}, b),
				opts: ea.extend(!0, {
					specialEasing: {}
				}, c),
				originalProperties: b,
				originalOptions: c,
				startTime: nb || H(),
				duration: c.duration,
				tweens: [],
				createTween: function (b, c) {
					var d = ea.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
					return j.tweens.push(d),
					d
				},
				stop: function (b) {
					var c = 0,
					d = b ? j.tweens.length : 0;
					if (e)
						return this;
					for (e = !0; c < d; c++)
						j.tweens[c].run(1);
					return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]),
					this
				}
			}),
		k = j.props;
		for (L(k, j.opts.specialEasing); f < g; f++)
			if (d = sb[f].call(j, a, k, j.opts))
				return d;
		return ea.map(k, J, j),
		ea.isFunction(j.opts.start) && j.opts.start.call(a, j),
		ea.fx.timer(ea.extend(i, {
				elem: a,
				anim: j,
				queue: j.opts.queue
			})),
		j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
	}
	function N(a) {
		return function (b, c) {
			"string" != typeof b && (c = b, b = "*");
			var d,
			e = 0,
			f = b.toLowerCase().match(ta) || [];
			if (ea.isFunction(c))
				for (; d = f[e++]; )
					"+" === d.charAt(0) ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
		}
	}
	function O(a, b, c, d) {
		function e(h) {
			var i;
			return f[h] = !0,
			ea.each(a[h] || [], function (a, h) {
				var j = h(b, c, d);
				return "string" != typeof j || g || f[j] ? g ? !(i = j) : void 0 : (b.dataTypes.unshift(j), e(j), !1)
			}),
			i
		}
		var f = {},
		g = a === Rb;
		return e(b.dataTypes[0]) || !f["*"] && e("*")
	}
	function P(a, b) {
		var c,
		d,
		e = ea.ajaxSettings.flatOptions || {};
		for (d in b)
			void 0 !== b[d] && ((e[d] ? a : c || (c = {}))[d] = b[d]);
		return c && ea.extend(!0, a, c),
		a
	}
	function Q(a, b, c) {
		for (var d, e, f, g, h = a.contents, i = a.dataTypes; "*" === i[0]; )
			i.shift(), void 0 === e && (e = a.mimeType || b.getResponseHeader("Content-Type"));
		if (e)
			for (g in h)
				if (h[g] && h[g].test(e)) {
					i.unshift(g);
					break
				}
		if (i[0]in c)
			f = i[0];
		else {
			for (g in c) {
				if (!i[0] || a.converters[g + " " + i[0]]) {
					f = g;
					break
				}
				d || (d = g)
			}
			f = f || d
		}
		if (f)
			return f !== i[0] && i.unshift(f), c[f]
	}
	function R(a, b, c, d) {
		var e,
		f,
		g,
		h,
		i,
		j = {},
		k = a.dataTypes.slice();
		if (k[1])
			for (g in a.converters)
				j[g.toLowerCase()] = a.converters[g];
		for (f = k.shift(); f; )
			if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift())
				if ("*" === f)
					f = i;
				else if ("*" !== i && i !== f) {
					if (g = j[i + " " + f] || j["* " + f], !g)
						for (e in j)
							if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
								g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
								break
							}
					if (g !== !0)
						if (g && a.throws)
							b = g(b);
						else
							try {
								b = g(b)
							} catch (a) {
								return {
									state: "parsererror",
									error: g ? a : "No conversion from " + i + " to " + f
								}
							}
				}
		return {
			state: "success",
			data: b
		}
	}
	function S(a, b, c, d) {
		var e;
		if (ea.isArray(b))
			ea.each(b, function (b, e) {
				c || Ub.test(a) ? d(a, e) : S(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
			});
		else if (c || "object" !== ea.type(b))
			d(a, b);
		else
			for (e in b)
				S(a + "[" + e + "]", b[e], c, d)
	}
	function T() {
		try {
			return new a.XMLHttpRequest
		} catch (a) {}
	}
	function U() {
		try {
			return new a.ActiveXObject("Microsoft.XMLHTTP")
		} catch (a) {}
	}
	function V(a) {
		return ea.isWindow(a) ? a : 9 === a.nodeType && (a.defaultView || a.parentWindow)
	}
	var W = [],
	X = W.slice,
	Y = W.concat,
	Z = W.push,
	$ = W.indexOf,
	_ = {},
	aa = _.toString,
	ba = _.hasOwnProperty,
	ca = {},
	da = "1.11.1",
	ea = function (a, b) {
		return new ea.fn.init(a, b)
	},
	fa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
	ga = /^-ms-/,
	ha = /-([\da-z])/gi,
	ia = function (a, b) {
		return b.toUpperCase()
	};
	ea.fn = ea.prototype = {
		jquery: da,
		constructor: ea,
		selector: "",
		length: 0,
		toArray: function () {
			return X.call(this)
		},
		get: function (a) {
			return null != a ? a < 0 ? this[a + this.length] : this[a] : X.call(this)
		},
		pushStack: function (a) {
			var b = ea.merge(this.constructor(), a);
			return b.prevObject = this,
			b.context = this.context,
			b
		},
		each: function (a, b) {
			return ea.each(this, a, b)
		},
		map: function (a) {
			return this.pushStack(ea.map(this, function (b, c) {
					return a.call(b, c, b)
				}))
		},
		slice: function () {
			return this.pushStack(X.apply(this, arguments))
		},
		first: function () {
			return this.eq(0)
		},
		last: function () {
			return this.eq(-1)
		},
		eq: function (a) {
			var b = this.length,
			c = +a + (a < 0 ? b : 0);
			return this.pushStack(c >= 0 && c < b ? [this[c]] : [])
		},
		end: function () {
			return this.prevObject || this.constructor(null)
		},
		push: Z,
		sort: W.sort,
		splice: W.splice
	},
	ea.extend = ea.fn.extend = function () {
		var a,
		b,
		c,
		d,
		e,
		f,
		g = arguments[0] || {},
		h = 1,
		i = arguments.length,
		j = !1;
		for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || ea.isFunction(g) || (g = {}), h === i && (g = this, h--); h < i; h++)
			if (null != (e = arguments[h]))
				for (d in e)
					a = g[d], c = e[d], g !== c && (j && c && (ea.isPlainObject(c) || (b = ea.isArray(c))) ? (b ? (b = !1, f = a && ea.isArray(a) ? a : []) : f = a && ea.isPlainObject(a) ? a : {}, g[d] = ea.extend(j, f, c)) : void 0 !== c && (g[d] = c));
		return g
	},
	ea.extend({
		expando: "jQuery" + (da + Math.random()).replace(/\D/g, ""),
		isReady: !0,
		error: function (a) {
			throw new Error(a)
		},
		noop: function () {},
		isFunction: function (a) {
			return "function" === ea.type(a)
		},
		isArray: Array.isArray || function (a) {
			return "array" === ea.type(a)
		},
		isWindow: function (a) {
			return null != a && a == a.window
		},
		isNumeric: function (a) {
			return !ea.isArray(a) && a - parseFloat(a) >= 0
		},
		isEmptyObject: function (a) {
			var b;
			for (b in a)
				return !1;
			return !0
		},
		isPlainObject: function (a) {
			var b;
			if (!a || "object" !== ea.type(a) || a.nodeType || ea.isWindow(a))
				return !1;
			try {
				if (a.constructor && !ba.call(a, "constructor") && !ba.call(a.constructor.prototype, "isPrototypeOf"))
					return !1
			} catch (a) {
				return !1
			}
			if (ca.ownLast)
				for (b in a)
					return ba.call(a, b);
			for (b in a);
			return void 0 === b || ba.call(a, b)
		},
		type: function (a) {
			return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? _[aa.call(a)] || "object" : typeof a
		},
		globalEval: function (b) {
			b && ea.trim(b) && (a.execScript || function (b) {
				a.eval.call(a, b)
			})(b)
		},
		camelCase: function (a) {
			return a.replace(ga, "ms-").replace(ha, ia)
		},
		nodeName: function (a, b) {
			return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
		},
		each: function (a, b, d) {
			var e,
			f = 0,
			g = a.length,
			h = c(a);
			if (d) {
				if (h)
					for (; f < g && (e = b.apply(a[f], d), e !== !1); f++);
				else
					for (f in a)
						if (e = b.apply(a[f], d), e === !1)
							break
			} else if (h)
				for (; f < g && (e = b.call(a[f], f, a[f]), e !== !1); f++);
			else
				for (f in a)
					if (e = b.call(a[f], f, a[f]), e === !1)
						break;
			return a
		},
		trim: function (a) {
			return null == a ? "" : (a + "").replace(fa, "")
		},
		makeArray: function (a, b) {
			var d = b || [];
			return null != a && (c(Object(a)) ? ea.merge(d, "string" == typeof a ? [a] : a) : Z.call(d, a)),
			d
		},
		inArray: function (a, b, c) {
			var d;
			if (b) {
				if ($)
					return $.call(b, a, c);
				for (d = b.length, c = c ? c < 0 ? Math.max(0, d + c) : c : 0; c < d; c++)
					if (c in b && b[c] === a)
						return c
			}
			return -1
		},
		merge: function (a, b) {
			for (var c = +b.length, d = 0, e = a.length; d < c; )
				a[e++] = b[d++];
			if (c !== c)
				for (; void 0 !== b[d]; )
					a[e++] = b[d++];
			return a.length = e,
			a
		},
		grep: function (a, b, c) {
			for (var d, e = [], f = 0, g = a.length, h = !c; f < g; f++)
				d = !b(a[f], f), d !== h && e.push(a[f]);
			return e
		},
		map: function (a, b, d) {
			var e,
			f = 0,
			g = a.length,
			h = c(a),
			i = [];
			if (h)
				for (; f < g; f++)
					e = b(a[f], f, d), null != e && i.push(e);
			else
				for (f in a)
					e = b(a[f], f, d), null != e && i.push(e);
			return Y.apply([], i)
		},
		guid: 1,
		proxy: function (a, b) {
			var c,
			d,
			e;
			if ("string" == typeof b && (e = a[b], b = a, a = e), ea.isFunction(a))
				return c = X.call(arguments, 2), d = function () {
					return a.apply(b || this, c.concat(X.call(arguments)))
				},
			d.guid = a.guid = a.guid || ea.guid++,
			d
		},
		now: function () {
			return +new Date
		},
		support: ca
	}),
	ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (a, b) {
		_["[object " + b + "]"] = b.toLowerCase()
	});
	var ja = function (a) {
		function b(a, b, c, d) {
			var e,
			f,
			g,
			h,
			i,
			j,
			l,
			n,
			o,
			p;
			if ((b ? b.ownerDocument || b : O) !== G && F(b), b = b || G, c = c || [], !a || "string" != typeof a)
				return c;
			if (1 !== (h = b.nodeType) && 9 !== h)
				return [];
			if (I && !d) {
				if (e = sa.exec(a))
					if (g = e[1]) {
						if (9 === h) {
							if (f = b.getElementById(g), !f || !f.parentNode)
								return c;
							if (f.id === g)
								return c.push(f), c
						} else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g)
							return c.push(f), c
					} else {
						if (e[2])
							return _.apply(c, b.getElementsByTagName(a)), c;
						if ((g = e[3]) && v.getElementsByClassName && b.getElementsByClassName)
							return _.apply(c, b.getElementsByClassName(g)), c
					}
				if (v.qsa && (!J || !J.test(a))) {
					if (n = l = N, o = b, p = 9 === h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
						for (j = z(a), (l = b.getAttribute("id")) ? n = l.replace(ua, "\\$&") : b.setAttribute("id", n), n = "[id='" + n + "'] ", i = j.length; i--; )
							j[i] = n + m(j[i]);
						o = ta.test(a) && k(b.parentNode) || b,
						p = j.join(",")
					}
					if (p)
						try {
							return _.apply(c, o.querySelectorAll(p)),
							c
						} catch (a) {}
					finally {
						l || b.removeAttribute("id")
					}
				}
			}
			return B(a.replace(ia, "$1"), b, c, d)
		}
		function c() {
			function a(c, d) {
				return b.push(c + " ") > w.cacheLength && delete a[b.shift()],
				a[c + " "] = d
			}
			var b = [];
			return a
		}
		function d(a) {
			return a[N] = !0,
			a
		}
		function e(a) {
			var b = G.createElement("div");
			try {
				return !!a(b)
			} catch (a) {
				return !1
			}
			finally {
				b.parentNode && b.parentNode.removeChild(b),
				b = null
			}
		}
		function f(a, b) {
			for (var c = a.split("|"), d = a.length; d--; )
				w.attrHandle[c[d]] = b
		}
		function g(a, b) {
			var c = b && a,
			d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || W) - (~a.sourceIndex || W);
			if (d)
				return d;
			if (c)
				for (; c = c.nextSibling; )
					if (c === b)
						return -1;
			return a ? 1 : -1
		}
		function h(a) {
			return function (b) {
				var c = b.nodeName.toLowerCase();
				return "input" === c && b.type === a
			}
		}
		function i(a) {
			return function (b) {
				var c = b.nodeName.toLowerCase();
				return ("input" === c || "button" === c) && b.type === a
			}
		}
		function j(a) {
			return d(function (b) {
				return b = +b,
				d(function (c, d) {
					for (var e, f = a([], c.length, b), g = f.length; g--; )
						c[e = f[g]] && (c[e] = !(d[e] = c[e]))
				})
			})
		}
		function k(a) {
			return a && typeof a.getElementsByTagName !== V && a
		}
		function l() {}
		function m(a) {
			for (var b = 0, c = a.length, d = ""; b < c; b++)
				d += a[b].value;
			return d
		}
		function n(a, b, c) {
			var d = b.dir,
			e = c && "parentNode" === d,
			f = Q++;
			return b.first ? function (b, c, f) {
				for (; b = b[d]; )
					if (1 === b.nodeType || e)
						return a(b, c, f)
			}
			 : function (b, c, g) {
				var h,
				i,
				j = [P, f];
				if (g) {
					for (; b = b[d]; )
						if ((1 === b.nodeType || e) && a(b, c, g))
							return !0
				} else
					for (; b = b[d]; )
						if (1 === b.nodeType || e) {
							if (i = b[N] || (b[N] = {}), (h = i[d]) && h[0] === P && h[1] === f)
								return j[2] = h[2];
							if (i[d] = j, j[2] = a(b, c, g))
								return !0
						}
			}
		}
		function o(a) {
			return a.length > 1 ? function (b, c, d) {
				for (var e = a.length; e--; )
					if (!a[e](b, c, d))
						return !1;
				return !0
			}
			 : a[0]
		}
		function p(a, c, d) {
			for (var e = 0, f = c.length; e < f; e++)
				b(a, c[e], d);
			return d
		}
		function q(a, b, c, d, e) {
			for (var f, g = [], h = 0, i = a.length, j = null != b; h < i; h++)
				(f = a[h]) && (c && !c(f, d, e) || (g.push(f), j && b.push(h)));
			return g
		}
		function r(a, b, c, e, f, g) {
			return e && !e[N] && (e = r(e)),
			f && !f[N] && (f = r(f, g)),
			d(function (d, g, h, i) {
				var j,
				k,
				l,
				m = [],
				n = [],
				o = g.length,
				r = d || p(b || "*", h.nodeType ? [h] : h, []),
				s = !a || !d && b ? r : q(r, m, a, h, i),
				t = c ? f || (d ? a : o || e) ? [] : g : s;
				if (c && c(s, t, h, i), e)
					for (j = q(t, n), e(j, [], h, i), k = j.length; k--; )
						(l = j[k]) && (t[n[k]] = !(s[n[k]] = l));
				if (d) {
					if (f || a) {
						if (f) {
							for (j = [], k = t.length; k--; )
								(l = t[k]) && j.push(s[k] = l);
							f(null, t = [], j, i)
						}
						for (k = t.length; k--; )
							(l = t[k]) && (j = f ? ba.call(d, l) : m[k]) > -1 && (d[j] = !(g[j] = l))
					}
				} else
					t = q(t === g ? t.splice(o, t.length) : t), f ? f(null, g, t, i) : _.apply(g, t)
			})
		}
		function s(a) {
			for (var b, c, d, e = a.length, f = w.relative[a[0].type], g = f || w.relative[" "], h = f ? 1 : 0, i = n(function (a) {
						return a === b
					}, g, !0), j = n(function (a) {
						return ba.call(b, a) > -1
					}, g, !0), k = [function (a, c, d) {
						return !f && (d || c !== C) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d))
					}
				]; h < e; h++)
				if (c = w.relative[a[h].type])
					k = [n(o(k), c)];
				else {
					if (c = w.filter[a[h].type].apply(null, a[h].matches), c[N]) {
						for (d = ++h; d < e && !w.relative[a[d].type]; d++);
						return r(h > 1 && o(k), h > 1 && m(a.slice(0, h - 1).concat({
									value: " " === a[h - 2].type ? "*" : ""
								})).replace(ia, "$1"), c, h < d && s(a.slice(h, d)), d < e && s(a = a.slice(d)), d < e && m(a))
					}
					k.push(c)
				}
			return o(k)
		}
		function t(a, c) {
			var e = c.length > 0,
			f = a.length > 0,
			g = function (d, g, h, i, j) {
				var k,
				l,
				m,
				n = 0,
				o = "0",
				p = d && [],
				r = [],
				s = C,
				t = d || f && w.find.TAG("*", j),
				u = P += null == s ? 1 : Math.random() || .1,
				v = t.length;
				for (j && (C = g !== G && g); o !== v && null != (k = t[o]); o++) {
					if (f && k) {
						for (l = 0; m = a[l++]; )
							if (m(k, g, h)) {
								i.push(k);
								break
							}
						j && (P = u)
					}
					e && ((k = !m && k) && n--, d && p.push(k))
				}
				if (n += o, e && o !== n) {
					for (l = 0; m = c[l++]; )
						m(p, r, g, h);
					if (d) {
						if (n > 0)
							for (; o--; )
								p[o] || r[o] || (r[o] = Z.call(i));
						r = q(r)
					}
					_.apply(i, r),
					j && !d && r.length > 0 && n + c.length > 1 && b.uniqueSort(i)
				}
				return j && (P = u, C = s),
				p
			};
			return e ? d(g) : g
		}
		var u,
		v,
		w,
		x,
		y,
		z,
		A,
		B,
		C,
		D,
		E,
		F,
		G,
		H,
		I,
		J,
		K,
		L,
		M,
		N = "sizzle" + -new Date,
		O = a.document,
		P = 0,
		Q = 0,
		R = c(),
		S = c(),
		T = c(),
		U = function (a, b) {
			return a === b && (E = !0),
			0
		},
		V = "undefined",
		W = 1 << 31,
		X = {}
		.hasOwnProperty,
		Y = [],
		Z = Y.pop,
		$ = Y.push,
		_ = Y.push,
		aa = Y.slice,
		ba = Y.indexOf || function (a) {
			for (var b = 0, c = this.length; b < c; b++)
				if (this[b] === a)
					return b;
			return -1
		},
		ca = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
		da = "[\\x20\\t\\r\\n\\f]",
		ea = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
		fa = ea.replace("w", "w#"),
		ga = "\\[" + da + "*(" + ea + ")(?:" + da + "*([*^$|!~]?=)" + da + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + fa + "))|)" + da + "*\\]",
		ha = ":(" + ea + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ga + ")*)|.*)\\)|)",
		ia = new RegExp("^" + da + "+|((?:^|[^\\\\])(?:\\\\.)*)" + da + "+$", "g"),
		ja = new RegExp("^" + da + "*," + da + "*"),
		ka = new RegExp("^" + da + "*([>+~]|" + da + ")" + da + "*"),
		la = new RegExp("=" + da + "*([^\\]'\"]*?)" + da + "*\\]", "g"),
		ma = new RegExp(ha),
		na = new RegExp("^" + fa + "$"),
		oa = {
			ID: new RegExp("^#(" + ea + ")"),
			CLASS: new RegExp("^\\.(" + ea + ")"),
			TAG: new RegExp("^(" + ea.replace("w", "w*") + ")"),
			ATTR: new RegExp("^" + ga),
			PSEUDO: new RegExp("^" + ha),
			CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + da + "*(even|odd|(([+-]|)(\\d*)n|)" + da + "*(?:([+-]|)" + da + "*(\\d+)|))" + da + "*\\)|)", "i"),
			bool: new RegExp("^(?:" + ca + ")$", "i"),
			needsContext: new RegExp("^" + da + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + da + "*((?:-\\d)?\\d*)" + da + "*\\)|)(?=[^-]|$)", "i")
		},
		pa = /^(?:input|select|textarea|button)$/i,
		qa = /^h\d$/i,
		ra = /^[^{]+\{\s*\[native \w/,
		sa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
		ta = /[+~]/,
		ua = /'|\\/g,
		va = new RegExp("\\\\([\\da-f]{1,6}" + da + "?|(" + da + ")|.)", "ig"),
		wa = function (a, b, c) {
			var d = "0x" + b - 65536;
			return d !== d || c ? b : d < 0 ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
		};
		try {
			_.apply(Y = aa.call(O.childNodes), O.childNodes),
			Y[O.childNodes.length].nodeType
		} catch (a) {
			_ = {
				apply: Y.length ? function (a, b) {
					$.apply(a, aa.call(b))
				}
				 : function (a, b) {
					for (var c = a.length, d = 0; a[c++] = b[d++]; );
					a.length = c - 1
				}
			}
		}
		v = b.support = {},
		y = b.isXML = function (a) {
			var b = a && (a.ownerDocument || a).documentElement;
			return !!b && "HTML" !== b.nodeName
		},
		F = b.setDocument = function (a) {
			var b,
			c = a ? a.ownerDocument || a : O,
			d = c.defaultView;
			return c !== G && 9 === c.nodeType && c.documentElement ? (G = c, H = c.documentElement, I = !y(c), d && d !== d.top && (d.addEventListener ? d.addEventListener("unload", function () {
						F()
					}, !1) : d.attachEvent && d.attachEvent("onunload", function () {
						F()
					})), v.attributes = e(function (a) {
						return a.className = "i",
						!a.getAttribute("className")
					}), v.getElementsByTagName = e(function (a) {
						return a.appendChild(c.createComment("")),
						!a.getElementsByTagName("*").length
					}), v.getElementsByClassName = ra.test(c.getElementsByClassName) && e(function (a) {
						return a.innerHTML = "<div class='a'></div><div class='a i'></div>",
						a.firstChild.className = "i",
						2 === a.getElementsByClassName("i").length
					}), v.getById = e(function (a) {
						return H.appendChild(a).id = N,
						!c.getElementsByName || !c.getElementsByName(N).length
					}), v.getById ? (w.find.ID = function (a, b) {
					if (typeof b.getElementById !== V && I) {
						var c = b.getElementById(a);
						return c && c.parentNode ? [c] : []
					}
				}, w.filter.ID = function (a) {
					var b = a.replace(va, wa);
					return function (a) {
						return a.getAttribute("id") === b
					}
				}) : (delete w.find.ID, w.filter.ID = function (a) {
					var b = a.replace(va, wa);
					return function (a) {
						var c = typeof a.getAttributeNode !== V && a.getAttributeNode("id");
						return c && c.value === b
					}
				}), w.find.TAG = v.getElementsByTagName ? function (a, b) {
				if (typeof b.getElementsByTagName !== V)
					return b.getElementsByTagName(a)
			}
				 : function (a, b) {
				var c,
				d = [],
				e = 0,
				f = b.getElementsByTagName(a);
				if ("*" === a) {
					for (; c = f[e++]; )
						1 === c.nodeType && d.push(c);
					return d
				}
				return f
			}, w.find.CLASS = v.getElementsByClassName && function (a, b) {
				if (typeof b.getElementsByClassName !== V && I)
					return b.getElementsByClassName(a)
			}, K = [], J = [], (v.qsa = ra.test(c.querySelectorAll)) && (e(function (a) {
						a.innerHTML = "<select msallowclip=''><option selected=''></option></select>",
						a.querySelectorAll("[msallowclip^='']").length && J.push("[*^$]=" + da + "*(?:''|\"\")"),
						a.querySelectorAll("[selected]").length || J.push("\\[" + da + "*(?:value|" + ca + ")"),
						a.querySelectorAll(":checked").length || J.push(":checked")
					}), e(function (a) {
						var b = c.createElement("input");
						b.setAttribute("type", "hidden"),
						a.appendChild(b).setAttribute("name", "D"),
						a.querySelectorAll("[name=d]").length && J.push("name" + da + "*[*^$|!~]?="),
						a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"),
						a.querySelectorAll("*,:x"),
						J.push(",.*:")
					})), (v.matchesSelector = ra.test(L = H.matches || H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && e(function (a) {
					v.disconnectedMatch = L.call(a, "div"),
					L.call(a, "[s!='']:x"),
					K.push("!=", ha)
				}), J = J.length && new RegExp(J.join("|")), K = K.length && new RegExp(K.join("|")), b = ra.test(H.compareDocumentPosition), M = b || ra.test(H.contains) ? function (a, b) {
				var c = 9 === a.nodeType ? a.documentElement : a,
				d = b && b.parentNode;
				return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
			}
				 : function (a, b) {
				if (b)
					for (; b = b.parentNode; )
						if (b === a)
							return !0;
				return !1
			}, U = b ? function (a, b) {
				if (a === b)
					return E = !0, 0;
				var d = !a.compareDocumentPosition - !b.compareDocumentPosition;
				return d ? d : (d = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & d || !v.sortDetached && b.compareDocumentPosition(a) === d ? a === c || a.ownerDocument === O && M(O, a) ? -1 : b === c || b.ownerDocument === O && M(O, b) ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0 : 4 & d ? -1 : 1)
			}
				 : function (a, b) {
				if (a === b)
					return E = !0, 0;
				var d,
				e = 0,
				f = a.parentNode,
				h = b.parentNode,
				i = [a],
				j = [b];
				if (!f || !h)
					return a === c ? -1 : b === c ? 1 : f ? -1 : h ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0;
				if (f === h)
					return g(a, b);
				for (d = a; d = d.parentNode; )
					i.unshift(d);
				for (d = b; d = d.parentNode; )
					j.unshift(d);
				for (; i[e] === j[e]; )
					e++;
				return e ? g(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0
			}, c) : G
		},
		b.matches = function (a, c) {
			return b(a, null, null, c)
		},
		b.matchesSelector = function (a, c) {
			if ((a.ownerDocument || a) !== G && F(a), c = c.replace(la, "='$1']"), v.matchesSelector && I && (!K || !K.test(c)) && (!J || !J.test(c)))
				try {
					var d = L.call(a, c);
					if (d || v.disconnectedMatch || a.document && 11 !== a.document.nodeType)
						return d
				} catch (a) {}
			return b(c, G, null, [a]).length > 0
		},
		b.contains = function (a, b) {
			return (a.ownerDocument || a) !== G && F(a),
			M(a, b)
		},
		b.attr = function (a, b) {
			(a.ownerDocument || a) !== G && F(a);
			var c = w.attrHandle[b.toLowerCase()],
			d = c && X.call(w.attrHandle, b.toLowerCase()) ? c(a, b, !I) : void 0;
			return void 0 !== d ? d : v.attributes || !I ? a.getAttribute(b) : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
		},
		b.error = function (a) {
			throw new Error("Syntax error, unrecognized expression: " + a)
		},
		b.uniqueSort = function (a) {
			var b,
			c = [],
			d = 0,
			e = 0;
			if (E = !v.detectDuplicates, D = !v.sortStable && a.slice(0), a.sort(U), E) {
				for (; b = a[e++]; )
					b === a[e] && (d = c.push(e));
				for (; d--; )
					a.splice(c[d], 1)
			}
			return D = null,
			a
		},
		x = b.getText = function (a) {
			var b,
			c = "",
			d = 0,
			e = a.nodeType;
			if (e) {
				if (1 === e || 9 === e || 11 === e) {
					if ("string" == typeof a.textContent)
						return a.textContent;
					for (a = a.firstChild; a; a = a.nextSibling)
						c += x(a)
				} else if (3 === e || 4 === e)
					return a.nodeValue
			} else
				for (; b = a[d++]; )
					c += x(b);
			return c
		},
		w = b.selectors = {
			cacheLength: 50,
			createPseudo: d,
			match: oa,
			attrHandle: {},
			find: {},
			relative: {
				">": {
					dir: "parentNode",
					first: !0
				},
				" ": {
					dir: "parentNode"
				},
				"+": {
					dir: "previousSibling",
					first: !0
				},
				"~": {
					dir: "previousSibling"
				}
			},
			preFilter: {
				ATTR: function (a) {
					return a[1] = a[1].replace(va, wa),
					a[3] = (a[3] || a[4] || a[5] || "").replace(va, wa),
					"~=" === a[2] && (a[3] = " " + a[3] + " "),
					a.slice(0, 4)
				},
				CHILD: function (a) {
					return a[1] = a[1].toLowerCase(),
					"nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), a[4] =  + (a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] =  + (a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]),
					a
				},
				PSEUDO: function (a) {
					var b,
					c = !a[6] && a[2];
					return oa.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && ma.test(c) && (b = z(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
				}
			},
			filter: {
				TAG: function (a) {
					var b = a.replace(va, wa).toLowerCase();
					return "*" === a ? function () {
						return !0
					}
					 : function (a) {
						return a.nodeName && a.nodeName.toLowerCase() === b
					}
				},
				CLASS: function (a) {
					var b = R[a + " "];
					return b || (b = new RegExp("(^|" + da + ")" + a + "(" + da + "|$)")) && R(a, function (a) {
						return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== V && a.getAttribute("class") || "")
					})
				},
				ATTR: function (a, c, d) {
					return function (e) {
						var f = b.attr(e, a);
						return null == f ? "!=" === c : !c || (f += "", "=" === c ? f === d : "!=" === c ? f !== d : "^=" === c ? d && 0 === f.indexOf(d) : "*=" === c ? d && f.indexOf(d) > -1 : "$=" === c ? d && f.slice(-d.length) === d : "~=" === c ? (" " + f + " ").indexOf(d) > -1 : "|=" === c && (f === d || f.slice(0, d.length + 1) === d + "-"))
					}
				},
				CHILD: function (a, b, c, d, e) {
					var f = "nth" !== a.slice(0, 3),
					g = "last" !== a.slice(-4),
					h = "of-type" === b;
					return 1 === d && 0 === e ? function (a) {
						return !!a.parentNode
					}
					 : function (b, c, i) {
						var j,
						k,
						l,
						m,
						n,
						o,
						p = f !== g ? "nextSibling" : "previousSibling",
						q = b.parentNode,
						r = h && b.nodeName.toLowerCase(),
						s = !i && !h;
						if (q) {
							if (f) {
								for (; p; ) {
									for (l = b; l = l[p]; )
										if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType)
											return !1;
									o = p = "only" === a && !o && "nextSibling"
								}
								return !0
							}
							if (o = [g ? q.firstChild : q.lastChild], g && s) {
								for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop(); )
									if (1 === l.nodeType && ++m && l === b) {
										k[a] = [P, n, m];
										break
									}
							} else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P)
								m = j[1];
							else
								for (; (l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r : 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [P, m]), l !== b)); );
							return m -= e,
							m === d || m % d === 0 && m / d >= 0
						}
					}
				},
				PSEUDO: function (a, c) {
					var e,
					f = w.pseudos[a] || w.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
					return f[N] ? f(c) : f.length > 1 ? (e = [a, a, "", c], w.setFilters.hasOwnProperty(a.toLowerCase()) ? d(function (a, b) {
							for (var d, e = f(a, c), g = e.length; g--; )
								d = ba.call(a, e[g]), a[d] = !(b[d] = e[g])
						}) : function (a) {
						return f(a, 0, e)
					}) : f
				}
			},
			pseudos: {
				not: d(function (a) {
					var b = [],
					c = [],
					e = A(a.replace(ia, "$1"));
					return e[N] ? d(function (a, b, c, d) {
						for (var f, g = e(a, null, d, []), h = a.length; h--; )
							(f = g[h]) && (a[h] = !(b[h] = f))
					}) : function (a, d, f) {
						return b[0] = a,
						e(b, null, f, c),
						!c.pop()
					}
				}),
				has: d(function (a) {
					return function (c) {
						return b(a, c).length > 0
					}
				}),
				contains: d(function (a) {
					return function (b) {
						return (b.textContent || b.innerText || x(b)).indexOf(a) > -1
					}
				}),
				lang: d(function (a) {
					return na.test(a || "") || b.error("unsupported lang: " + a),
					a = a.replace(va, wa).toLowerCase(),
					function (b) {
						var c;
						do
							if (c = I ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang"))
								return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-");
						while ((b = b.parentNode) && 1 === b.nodeType);
						return !1
					}
				}),
				target: function (b) {
					var c = a.location && a.location.hash;
					return c && c.slice(1) === b.id
				},
				root: function (a) {
					return a === H
				},
				focus: function (a) {
					return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
				},
				enabled: function (a) {
					return a.disabled === !1
				},
				disabled: function (a) {
					return a.disabled === !0
				},
				checked: function (a) {
					var b = a.nodeName.toLowerCase();
					return "input" === b && !!a.checked || "option" === b && !!a.selected
				},
				selected: function (a) {
					return a.parentNode && a.parentNode.selectedIndex,
					a.selected === !0
				},
				empty: function (a) {
					for (a = a.firstChild; a; a = a.nextSibling)
						if (a.nodeType < 6)
							return !1;
					return !0
				},
				parent: function (a) {
					return !w.pseudos.empty(a)
				},
				header: function (a) {
					return qa.test(a.nodeName)
				},
				input: function (a) {
					return pa.test(a.nodeName)
				},
				button: function (a) {
					var b = a.nodeName.toLowerCase();
					return "input" === b && "button" === a.type || "button" === b
				},
				text: function (a) {
					var b;
					return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
				},
				first: j(function () {
					return [0]
				}),
				last: j(function (a, b) {
					return [b - 1]
				}),
				eq: j(function (a, b, c) {
					return [c < 0 ? c + b : c]
				}),
				even: j(function (a, b) {
					for (var c = 0; c < b; c += 2)
						a.push(c);
					return a
				}),
				odd: j(function (a, b) {
					for (var c = 1; c < b; c += 2)
						a.push(c);
					return a
				}),
				lt: j(function (a, b, c) {
					for (var d = c < 0 ? c + b : c; --d >= 0; )
						a.push(d);
					return a
				}),
				gt: j(function (a, b, c) {
					for (var d = c < 0 ? c + b : c; ++d < b; )
						a.push(d);
					return a
				})
			}
		},
		w.pseudos.nth = w.pseudos.eq;
		for (u in {
			radio: !0,
			checkbox: !0,
			file: !0,
			password: !0,
			image: !0
		})
			w.pseudos[u] = h(u);
		for (u in {
			submit: !0,
			reset: !0
		})
			w.pseudos[u] = i(u);
		return l.prototype = w.filters = w.pseudos,
		w.setFilters = new l,
		z = b.tokenize = function (a, c) {
			var d,
			e,
			f,
			g,
			h,
			i,
			j,
			k = S[a + " "];
			if (k)
				return c ? 0 : k.slice(0);
			for (h = a, i = [], j = w.preFilter; h; ) {
				d && !(e = ja.exec(h)) || (e && (h = h.slice(e[0].length) || h), i.push(f = [])),
				d = !1,
				(e = ka.exec(h)) && (d = e.shift(), f.push({
						value: d,
						type: e[0].replace(ia, " ")
					}), h = h.slice(d.length));
				for (g in w.filter)
					!(e = oa[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), f.push({
							value: d,
							type: g,
							matches: e
						}), h = h.slice(d.length));
				if (!d)
					break
			}
			return c ? h.length : h ? b.error(a) : S(a, i).slice(0)
		},
		A = b.compile = function (a, b) {
			var c,
			d = [],
			e = [],
			f = T[a + " "];
			if (!f) {
				for (b || (b = z(a)), c = b.length; c--; )
					f = s(b[c]), f[N] ? d.push(f) : e.push(f);
				f = T(a, t(e, d)),
				f.selector = a
			}
			return f
		},
		B = b.select = function (a, b, c, d) {
			var e,
			f,
			g,
			h,
			i,
			j = "function" == typeof a && a,
			l = !d && z(a = j.selector || a);
			if (c = c || [], 1 === l.length) {
				if (f = l[0] = l[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && v.getById && 9 === b.nodeType && I && w.relative[f[1].type]) {
					if (b = (w.find.ID(g.matches[0].replace(va, wa), b) || [])[0], !b)
						return c;
					j && (b = b.parentNode),
					a = a.slice(f.shift().value.length)
				}
				for (e = oa.needsContext.test(a) ? 0 : f.length; e-- && (g = f[e], !w.relative[h = g.type]); )
					if ((i = w.find[h]) && (d = i(g.matches[0].replace(va, wa), ta.test(f[0].type) && k(b.parentNode) || b))) {
						if (f.splice(e, 1), a = d.length && m(f), !a)
							return _.apply(c, d), c;
						break
					}
			}
			return (j || A(a, l))(d, b, !I, c, ta.test(a) && k(b.parentNode) || b),
			c
		},
		v.sortStable = N.split("").sort(U).join("") === N,
		v.detectDuplicates = !!E,
		F(),
		v.sortDetached = e(function (a) {
				return 1 & a.compareDocumentPosition(G.createElement("div"))
			}),
		e(function (a) {
			return a.innerHTML = "<a href='#'></a>",
			"#" === a.firstChild.getAttribute("href")
		}) || f("type|href|height|width", function (a, b, c) {
			if (!c)
				return a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
		}),
		v.attributes && e(function (a) {
			return a.innerHTML = "<input/>",
			a.firstChild.setAttribute("value", ""),
			"" === a.firstChild.getAttribute("value")
		}) || f("value", function (a, b, c) {
			if (!c && "input" === a.nodeName.toLowerCase())
				return a.defaultValue
		}),
		e(function (a) {
			return null == a.getAttribute("disabled")
		}) || f(ca, function (a, b, c) {
			var d;
			if (!c)
				return a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
		}),
		b
	}
	(a);
	ea.find = ja,
	ea.expr = ja.selectors,
	ea.expr[":"] = ea.expr.pseudos,
	ea.unique = ja.uniqueSort,
	ea.text = ja.getText,
	ea.isXMLDoc = ja.isXML,
	ea.contains = ja.contains;
	var ka = ea.expr.match.needsContext,
	la = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
	ma = /^.[^:#\[\.,]*$/;
	ea.filter = function (a, b, c) {
		var d = b[0];
		return c && (a = ":not(" + a + ")"),
		1 === b.length && 1 === d.nodeType ? ea.find.matchesSelector(d, a) ? [d] : [] : ea.find.matches(a, ea.grep(b, function (a) {
				return 1 === a.nodeType
			}))
	},
	ea.fn.extend({
		find: function (a) {
			var b,
			c = [],
			d = this,
			e = d.length;
			if ("string" != typeof a)
				return this.pushStack(ea(a).filter(function () {
						for (b = 0; b < e; b++)
							if (ea.contains(d[b], this))
								return !0
					}));
			for (b = 0; b < e; b++)
				ea.find(a, d[b], c);
			return c = this.pushStack(e > 1 ? ea.unique(c) : c),
			c.selector = this.selector ? this.selector + " " + a : a,
			c
		},
		filter: function (a) {
			return this.pushStack(d(this, a || [], !1))
		},
		not: function (a) {
			return this.pushStack(d(this, a || [], !0))
		},
		is: function (a) {
			return !!d(this, "string" == typeof a && ka.test(a) ? ea(a) : a || [], !1).length
		}
	});
	var na,
	oa = a.document,
	pa = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
	qa = ea.fn.init = function (a, b) {
		var c,
		d;
		if (!a)
			return this;
		if ("string" == typeof a) {
			if (c = "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && a.length >= 3 ? [null, a, null] : pa.exec(a), !c || !c[1] && b)
				return !b || b.jquery ? (b || na).find(a) : this.constructor(b).find(a);
			if (c[1]) {
				if (b = b instanceof ea ? b[0] : b, ea.merge(this, ea.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : oa, !0)), la.test(c[1]) && ea.isPlainObject(b))
					for (c in b)
						ea.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
				return this
			}
			if (d = oa.getElementById(c[2]), d && d.parentNode) {
				if (d.id !== c[2])
					return na.find(a);
				this.length = 1,
				this[0] = d
			}
			return this.context = oa,
			this.selector = a,
			this
		}
		return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : ea.isFunction(a) ? "undefined" != typeof na.ready ? na.ready(a) : a(ea) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), ea.makeArray(a, this))
	};
	qa.prototype = ea.fn,
	na = ea(oa);
	var ra = /^(?:parents|prev(?:Until|All))/,
	sa = {
		children: !0,
		contents: !0,
		next: !0,
		prev: !0
	};
	ea.extend({
		dir: function (a, b, c) {
			for (var d = [], e = a[b]; e && 9 !== e.nodeType && (void 0 === c || 1 !== e.nodeType || !ea(e).is(c)); )
				1 === e.nodeType && d.push(e), e = e[b];
			return d
		},
		sibling: function (a, b) {
			for (var c = []; a; a = a.nextSibling)
				1 === a.nodeType && a !== b && c.push(a);
			return c
		}
	}),
	ea.fn.extend({
		has: function (a) {
			var b,
			c = ea(a, this),
			d = c.length;
			return this.filter(function () {
				for (b = 0; b < d; b++)
					if (ea.contains(this, c[b]))
						return !0
			})
		},
		closest: function (a, b) {
			for (var c, d = 0, e = this.length, f = [], g = ka.test(a) || "string" != typeof a ? ea(a, b || this.context) : 0; d < e; d++)
				for (c = this[d]; c && c !== b; c = c.parentNode)
					if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && ea.find.matchesSelector(c, a))) {
						f.push(c);
						break
					}
			return this.pushStack(f.length > 1 ? ea.unique(f) : f)
		},
		index: function (a) {
			return a ? "string" == typeof a ? ea.inArray(this[0], ea(a)) : ea.inArray(a.jquery ? a[0] : a, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
		},
		add: function (a, b) {
			return this.pushStack(ea.unique(ea.merge(this.get(), ea(a, b))))
		},
		addBack: function (a) {
			return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
		}
	}),
	ea.each({
		parent: function (a) {
			var b = a.parentNode;
			return b && 11 !== b.nodeType ? b : null
		},
		parents: function (a) {
			return ea.dir(a, "parentNode")
		},
		parentsUntil: function (a, b, c) {
			return ea.dir(a, "parentNode", c)
		},
		next: function (a) {
			return e(a, "nextSibling")
		},
		prev: function (a) {
			return e(a, "previousSibling")
		},
		nextAll: function (a) {
			return ea.dir(a, "nextSibling")
		},
		prevAll: function (a) {
			return ea.dir(a, "previousSibling")
		},
		nextUntil: function (a, b, c) {
			return ea.dir(a, "nextSibling", c)
		},
		prevUntil: function (a, b, c) {
			return ea.dir(a, "previousSibling", c)
		},
		siblings: function (a) {
			return ea.sibling((a.parentNode || {}).firstChild, a)
		},
		children: function (a) {
			return ea.sibling(a.firstChild)
		},
		contents: function (a) {
			return ea.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : ea.merge([], a.childNodes)
		}
	}, function (a, b) {
		ea.fn[a] = function (c, d) {
			var e = ea.map(this, b, c);
			return "Until" !== a.slice(-5) && (d = c),
			d && "string" == typeof d && (e = ea.filter(d, e)),
			this.length > 1 && (sa[a] || (e = ea.unique(e)), ra.test(a) && (e = e.reverse())),
			this.pushStack(e)
		}
	});
	var ta = /\S+/g,
	ua = {};
	ea.Callbacks = function (a) {
		a = "string" == typeof a ? ua[a] || f(a) : ea.extend({}, a);
		var b,
		c,
		d,
		e,
		g,
		h,
		i = [],
		j = !a.once && [],
		k = function (f) {
			for (c = a.memory && f, d = !0, g = h || 0, h = 0, e = i.length, b = !0; i && g < e; g++)
				if (i[g].apply(f[0], f[1]) === !1 && a.stopOnFalse) {
					c = !1;
					break
				}
			b = !1,
			i && (j ? j.length && k(j.shift()) : c ? i = [] : l.disable())
		},
		l = {
			add: function () {
				if (i) {
					var d = i.length;
					!function b(c) {
						ea.each(c, function (c, d) {
							var e = ea.type(d);
							"function" === e ? a.unique && l.has(d) || i.push(d) : d && d.length && "string" !== e && b(d)
						})
					}
					(arguments),
					b ? e = i.length : c && (h = d, k(c))
				}
				return this
			},
			remove: function () {
				return i && ea.each(arguments, function (a, c) {
					for (var d; (d = ea.inArray(c, i, d)) > -1; )
						i.splice(d, 1), b && (d <= e && e--, d <= g && g--)
				}),
				this
			},
			has: function (a) {
				return a ? ea.inArray(a, i) > -1 : !(!i || !i.length)
			},
			empty: function () {
				return i = [],
				e = 0,
				this
			},
			disable: function () {
				return i = j = c = void 0,
				this
			},
			disabled: function () {
				return !i
			},
			lock: function () {
				return j = void 0,
				c || l.disable(),
				this
			},
			locked: function () {
				return !j
			},
			fireWith: function (a, c) {
				return !i || d && !j || (c = c || [], c = [a, c.slice ? c.slice() : c], b ? j.push(c) : k(c)),
				this
			},
			fire: function () {
				return l.fireWith(this, arguments),
				this
			},
			fired: function () {
				return !!d
			}
		};
		return l
	},
	ea.extend({
		Deferred: function (a) {
			var b = [["resolve", "done", ea.Callbacks("once memory"), "resolved"], ["reject", "fail", ea.Callbacks("once memory"), "rejected"], ["notify", "progress", ea.Callbacks("memory")]],
			c = "pending",
			d = {
				state: function () {
					return c
				},
				always: function () {
					return e.done(arguments).fail(arguments),
					this
				},
				then: function () {
					var a = arguments;
					return ea.Deferred(function (c) {
						ea.each(b, function (b, f) {
							var g = ea.isFunction(a[b]) && a[b];
							e[f[1]](function () {
								var a = g && g.apply(this, arguments);
								a && ea.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
							})
						}),
						a = null
					}).promise()
				},
				promise: function (a) {
					return null != a ? ea.extend(a, d) : d
				}
			},
			e = {};
			return d.pipe = d.then,
			ea.each(b, function (a, f) {
				var g = f[2],
				h = f[3];
				d[f[1]] = g.add,
				h && g.add(function () {
					c = h
				}, b[1 ^ a][2].disable, b[2][2].lock),
				e[f[0]] = function () {
					return e[f[0] + "With"](this === e ? d : this, arguments),
					this
				},
				e[f[0] + "With"] = g.fireWith
			}),
			d.promise(e),
			a && a.call(e, e),
			e
		},
		when: function (a) {
			var b,
			c,
			d,
			e = 0,
			f = X.call(arguments),
			g = f.length,
			h = 1 !== g || a && ea.isFunction(a.promise) ? g : 0,
			i = 1 === h ? a : ea.Deferred(),
			j = function (a, c, d) {
				return function (e) {
					c[a] = this,
					d[a] = arguments.length > 1 ? X.call(arguments) : e,
					d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d)
				}
			};
			if (g > 1)
				for (b = new Array(g), c = new Array(g), d = new Array(g); e < g; e++)
					f[e] && ea.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
			return h || i.resolveWith(d, f),
			i.promise()
		}
	});
	var va;
	ea.fn.ready = function (a) {
		return ea.ready.promise().done(a),
		this
	},
	ea.extend({
		isReady: !1,
		readyWait: 1,
		holdReady: function (a) {
			a ? ea.readyWait++ : ea.ready(!0)
		},
		ready: function (a) {
			if (a === !0 ? !--ea.readyWait : !ea.isReady) {
				if (!oa.body)
					return setTimeout(ea.ready);
				ea.isReady = !0,
				a !== !0 && --ea.readyWait > 0 || (va.resolveWith(oa, [ea]), ea.fn.triggerHandler && (ea(oa).triggerHandler("ready"), ea(oa).off("ready")))
			}
		}
	}),
	ea.ready.promise = function (b) {
		if (!va)
			if (va = ea.Deferred(), "complete" === oa.readyState)
				setTimeout(ea.ready);
			else if (oa.addEventListener)
				oa.addEventListener("DOMContentLoaded", h, !1), a.addEventListener("load", h, !1);
			else {
				oa.attachEvent("onreadystatechange", h),
				a.attachEvent("onload", h);
				var c = !1;
				try {
					c = null == a.frameElement && oa.documentElement
				} catch (a) {}
				c && c.doScroll && !function a() {
					if (!ea.isReady) {
						try {
							c.doScroll("left")
						} catch (b) {
							return setTimeout(a, 50)
						}
						g(),
						ea.ready()
					}
				}
				()
			}
		return va.promise(b)
	};
	var wa,
	xa = "undefined";
	for (wa in ea(ca))
		break;
	ca.ownLast = "0" !== wa,
	ca.inlineBlockNeedsLayout = !1,
	ea(function () {
		var a,
		b,
		c,
		d;
		c = oa.getElementsByTagName("body")[0],
		c && c.style && (b = oa.createElement("div"), d = oa.createElement("div"), d.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", c.appendChild(d).appendChild(b), typeof b.style.zoom !== xa && (b.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1", ca.inlineBlockNeedsLayout = a = 3 === b.offsetWidth, a && (c.style.zoom = 1)), c.removeChild(d))
	}),
	function () {
		var a = oa.createElement("div");
		if (null == ca.deleteExpando) {
			ca.deleteExpando = !0;
			try {
				delete a.test
			} catch (a) {
				ca.deleteExpando = !1
			}
		}
		a = null
	}
	(),
	ea.acceptData = function (a) {
		var b = ea.noData[(a.nodeName + " ").toLowerCase()],
		c = +a.nodeType || 1;
		return (1 === c || 9 === c) && (!b || b !== !0 && a.getAttribute("classid") === b)
	};
	var ya = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	za = /([A-Z])/g;
	ea.extend({
		cache: {},
		noData: {
			"applet ": !0,
			"embed ": !0,
			"object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
		},
		hasData: function (a) {
			return a = a.nodeType ? ea.cache[a[ea.expando]] : a[ea.expando],
			!!a && !j(a)
		},
		data: function (a, b, c) {
			return k(a, b, c)
		},
		removeData: function (a, b) {
			return l(a, b)
		},
		_data: function (a, b, c) {
			return k(a, b, c, !0)
		},
		_removeData: function (a, b) {
			return l(a, b, !0)
		}
	}),
	ea.fn.extend({
		data: function (a, b) {
			var c,
			d,
			e,
			f = this[0],
			g = f && f.attributes;
			if (void 0 === a) {
				if (this.length && (e = ea.data(f), 1 === f.nodeType && !ea._data(f, "parsedAttrs"))) {
					for (c = g.length; c--; )
						g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = ea.camelCase(d.slice(5)), i(f, d, e[d])));
					ea._data(f, "parsedAttrs", !0)
				}
				return e
			}
			return "object" == typeof a ? this.each(function () {
				ea.data(this, a)
			}) : arguments.length > 1 ? this.each(function () {
				ea.data(this, a, b)
			}) : f ? i(f, a, ea.data(f, a)) : void 0
		},
		removeData: function (a) {
			return this.each(function () {
				ea.removeData(this, a)
			})
		}
	}),
	ea.extend({
		queue: function (a, b, c) {
			var d;
			if (a)
				return b = (b || "fx") + "queue", d = ea._data(a, b), c && (!d || ea.isArray(c) ? d = ea._data(a, b, ea.makeArray(c)) : d.push(c)), d || []
		},
		dequeue: function (a, b) {
			b = b || "fx";
			var c = ea.queue(a, b),
			d = c.length,
			e = c.shift(),
			f = ea._queueHooks(a, b),
			g = function () {
				ea.dequeue(a, b)
			};
			"inprogress" === e && (e = c.shift(), d--),
			e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)),
			!d && f && f.empty.fire()
		},
		_queueHooks: function (a, b) {
			var c = b + "queueHooks";
			return ea._data(a, c) || ea._data(a, c, {
				empty: ea.Callbacks("once memory").add(function () {
					ea._removeData(a, b + "queue"),
					ea._removeData(a, c)
				})
			})
		}
	}),
	ea.fn.extend({
		queue: function (a, b) {
			var c = 2;
			return "string" != typeof a && (b = a, a = "fx", c--),
			arguments.length < c ? ea.queue(this[0], a) : void 0 === b ? this : this.each(function () {
				var c = ea.queue(this, a, b);
				ea._queueHooks(this, a),
				"fx" === a && "inprogress" !== c[0] && ea.dequeue(this, a)
			})
		},
		dequeue: function (a) {
			return this.each(function () {
				ea.dequeue(this, a)
			})
		},
		clearQueue: function (a) {
			return this.queue(a || "fx", [])
		},
		promise: function (a, b) {
			var c,
			d = 1,
			e = ea.Deferred(),
			f = this,
			g = this.length,
			h = function () {
				--d || e.resolveWith(f, [f])
			};
			for ("string" != typeof a && (b = a, a = void 0), a = a || "fx"; g--; )
				c = ea._data(f[g], a + "queueHooks"), c && c.empty && (d++, c.empty.add(h));
			return h(),
			e.promise(b)
		}
	});
	var Aa = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
	Ba = ["Top", "Right", "Bottom", "Left"],
	Ca = function (a, b) {
		return a = b || a,
		"none" === ea.css(a, "display") || !ea.contains(a.ownerDocument, a)
	},
	Da = ea.access = function (a, b, c, d, e, f, g) {
		var h = 0,
		i = a.length,
		j = null == c;
		if ("object" === ea.type(c)) {
			e = !0;
			for (h in c)
				ea.access(a, b, h, c[h], !0, f, g)
		} else if (void 0 !== d && (e = !0, ea.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function (a, b, c) {
						return j.call(ea(a), c)
					})), b))
			for (; h < i; h++)
				b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
		return e ? a : j ? b.call(a) : i ? b(a[0], c) : f
	},
	Ea = /^(?:checkbox|radio)$/i;
	!function () {
		var a = oa.createElement("input"),
		b = oa.createElement("div"),
		c = oa.createDocumentFragment();
		if (b.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", ca.leadingWhitespace = 3 === b.firstChild.nodeType, ca.tbody = !b.getElementsByTagName("tbody").length, ca.htmlSerialize = !!b.getElementsByTagName("link").length, ca.html5Clone = "<:nav></:nav>" !== oa.createElement("nav").cloneNode(!0).outerHTML, a.type = "checkbox", a.checked = !0, c.appendChild(a), ca.appendChecked = a.checked, b.innerHTML = "<textarea>x</textarea>", ca.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue, c.appendChild(b), b.innerHTML = "<input type='radio' checked='checked' name='t'/>", ca.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, ca.noCloneEvent = !0, b.attachEvent && (b.attachEvent("onclick", function () {
					ca.noCloneEvent = !1
				}), b.cloneNode(!0).click()), null == ca.deleteExpando) {
			ca.deleteExpando = !0;
			try {
				delete b.test
			} catch (a) {
				ca.deleteExpando = !1
			}
		}
	}
	(),
	function () {
		var b,
		c,
		d = oa.createElement("div");
		for (b in {
			submit: !0,
			change: !0,
			focusin: !0
		})
			c = "on" + b, (ca[b + "Bubbles"] = c in a) || (d.setAttribute(c, "t"), ca[b + "Bubbles"] = d.attributes[c].expando === !1);
		d = null
	}
	();
	var Fa = /^(?:input|select|textarea)$/i,
	Ga = /^key/,
	Ha = /^(?:mouse|pointer|contextmenu)|click/,
	Ia = /^(?:focusinfocus|focusoutblur)$/,
	Ja = /^([^.]*)(?:\.(.+)|)$/;
	ea.event = {
		global: {},
		add: function (a, b, c, d, e) {
			var f,
			g,
			h,
			i,
			j,
			k,
			l,
			m,
			n,
			o,
			p,
			q = ea._data(a);
			if (q) {
				for (c.handler && (i = c, c = i.handler, e = i.selector), c.guid || (c.guid = ea.guid++), (g = q.events) || (g = q.events = {}), (k = q.handle) || (k = q.handle = function (a) {
						return typeof ea === xa || a && ea.event.triggered === a.type ? void 0 : ea.event.dispatch.apply(k.elem, arguments)
					}, k.elem = a), b = (b || "").match(ta) || [""], h = b.length; h--; )
					f = Ja.exec(b[h]) || [], n = p = f[1], o = (f[2] || "").split(".").sort(), n && (j = ea.event.special[n] || {}, n = (e ? j.delegateType : j.bindType) || n, j = ea.event.special[n] || {}, l = ea.extend({
								type: n,
								origType: p,
								data: d,
								handler: c,
								guid: c.guid,
								selector: e,
								needsContext: e && ea.expr.match.needsContext.test(e),
								namespace: o.join(".")
							}, i), (m = g[n]) || (m = g[n] = [], m.delegateCount = 0, j.setup && j.setup.call(a, d, o, k) !== !1 || (a.addEventListener ? a.addEventListener(n, k, !1) : a.attachEvent && a.attachEvent("on" + n, k))), j.add && (j.add.call(a, l), l.handler.guid || (l.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, l) : m.push(l), ea.event.global[n] = !0);
				a = null
			}
		},
		remove: function (a, b, c, d, e) {
			var f,
			g,
			h,
			i,
			j,
			k,
			l,
			m,
			n,
			o,
			p,
			q = ea.hasData(a) && ea._data(a);
			if (q && (k = q.events)) {
				for (b = (b || "").match(ta) || [""], j = b.length; j--; )
					if (h = Ja.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
						for (l = ea.event.special[n] || {}, n = (d ? l.delegateType : l.bindType) || n, m = k[n] || [], h = h[2] && new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), i = f = m.length; f--; )
							g = m[f], !e && p !== g.origType || c && c.guid !== g.guid || h && !h.test(g.namespace) || d && d !== g.selector && ("**" !== d || !g.selector) || (m.splice(f, 1), g.selector && m.delegateCount--, l.remove && l.remove.call(a, g));
						i && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || ea.removeEvent(a, n, q.handle), delete k[n])
					} else
						for (n in k)
							ea.event.remove(a, n + b[j], c, d, !0);
				ea.isEmptyObject(k) && (delete q.handle, ea._removeData(a, "events"))
			}
		},
		trigger: function (b, c, d, e) {
			var f,
			g,
			h,
			i,
			j,
			k,
			l,
			m = [d || oa],
			n = ba.call(b, "type") ? b.type : b,
			o = ba.call(b, "namespace") ? b.namespace.split(".") : [];
			if (h = k = d = d || oa, 3 !== d.nodeType && 8 !== d.nodeType && !Ia.test(n + ea.event.triggered) && (n.indexOf(".") >= 0 && (o = n.split("."), n = o.shift(), o.sort()), g = n.indexOf(":") < 0 && "on" + n, b = b[ea.expando] ? b : new ea.Event(n, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = o.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : ea.makeArray(c, [b]), j = ea.event.special[n] || {}, e || !j.trigger || j.trigger.apply(d, c) !== !1)) {
				if (!e && !j.noBubble && !ea.isWindow(d)) {
					for (i = j.delegateType || n, Ia.test(i + n) || (h = h.parentNode); h; h = h.parentNode)
						m.push(h), k = h;
					k === (d.ownerDocument || oa) && m.push(k.defaultView || k.parentWindow || a)
				}
				for (l = 0; (h = m[l++]) && !b.isPropagationStopped(); )
					b.type = l > 1 ? i : j.bindType || n, f = (ea._data(h, "events") || {})[b.type] && ea._data(h, "handle"), f && f.apply(h, c), f = g && h[g], f && f.apply && ea.acceptData(h) && (b.result = f.apply(h, c), b.result === !1 && b.preventDefault());
				if (b.type = n, !e && !b.isDefaultPrevented() && (!j._default || j._default.apply(m.pop(), c) === !1) && ea.acceptData(d) && g && d[n] && !ea.isWindow(d)) {
					k = d[g],
					k && (d[g] = null),
					ea.event.triggered = n;
					try {
						d[n]()
					} catch (a) {}
					ea.event.triggered = void 0,
					k && (d[g] = k)
				}
				return b.result
			}
		},
		dispatch: function (a) {
			a = ea.event.fix(a);
			var b,
			c,
			d,
			e,
			f,
			g = [],
			h = X.call(arguments),
			i = (ea._data(this, "events") || {})[a.type] || [],
			j = ea.event.special[a.type] || {};
			if (h[0] = a, a.delegateTarget = this, !j.preDispatch || j.preDispatch.call(this, a) !== !1) {
				for (g = ea.event.handlers.call(this, a, i), b = 0; (e = g[b++]) && !a.isPropagationStopped(); )
					for (a.currentTarget = e.elem, f = 0; (d = e.handlers[f++]) && !a.isImmediatePropagationStopped(); )
						a.namespace_re && !a.namespace_re.test(d.namespace) || (a.handleObj = d, a.data = d.data, c = ((ea.event.special[d.origType] || {}).handle || d.handler).apply(e.elem, h), void 0 !== c && (a.result = c) === !1 && (a.preventDefault(), a.stopPropagation()));
				return j.postDispatch && j.postDispatch.call(this, a),
				a.result
			}
		},
		handlers: function (a, b) {
			var c,
			d,
			e,
			f,
			g = [],
			h = b.delegateCount,
			i = a.target;
			if (h && i.nodeType && (!a.button || "click" !== a.type))
				for (; i != this; i = i.parentNode || this)
					if (1 === i.nodeType && (i.disabled !== !0 || "click" !== a.type)) {
						for (e = [], f = 0; f < h; f++)
							d = b[f], c = d.selector + " ", void 0 === e[c] && (e[c] = d.needsContext ? ea(c, this).index(i) >= 0 : ea.find(c, this, null, [i]).length), e[c] && e.push(d);
						e.length && g.push({
							elem: i,
							handlers: e
						})
					}
			return h < b.length && g.push({
				elem: this,
				handlers: b.slice(h)
			}),
			g
		},
		fix: function (a) {
			if (a[ea.expando])
				return a;
			var b,
			c,
			d,
			e = a.type,
			f = a,
			g = this.fixHooks[e];
			for (g || (this.fixHooks[e] = g = Ha.test(e) ? this.mouseHooks : Ga.test(e) ? this.keyHooks : {}), d = g.props ? this.props.concat(g.props) : this.props, a = new ea.Event(f), b = d.length; b--; )
				c = d[b], a[c] = f[c];
			return a.target || (a.target = f.srcElement || oa),
			3 === a.target.nodeType && (a.target = a.target.parentNode),
			a.metaKey = !!a.metaKey,
			g.filter ? g.filter(a, f) : a
		},
		props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
		fixHooks: {},
		keyHooks: {
			props: "char charCode key keyCode".split(" "),
			filter: function (a, b) {
				return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode),
				a
			}
		},
		mouseHooks: {
			props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
			filter: function (a, b) {
				var c,
				d,
				e,
				f = b.button,
				g = b.fromElement;
				return null == a.pageX && null != b.clientX && (d = a.target.ownerDocument || oa, e = d.documentElement, c = d.body, a.pageX = b.clientX + (e && e.scrollLeft || c && c.scrollLeft || 0) - (e && e.clientLeft || c && c.clientLeft || 0), a.pageY = b.clientY + (e && e.scrollTop || c && c.scrollTop || 0) - (e && e.clientTop || c && c.clientTop || 0)),
				!a.relatedTarget && g && (a.relatedTarget = g === a.target ? b.toElement : g),
				a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0),
				a
			}
		},
		special: {
			load: {
				noBubble: !0
			},
			focus: {
				trigger: function () {
					if (this !== o() && this.focus)
						try {
							return this.focus(),
							!1
						} catch (a) {}
				},
				delegateType: "focusin"
			},
			blur: {
				trigger: function () {
					if (this === o() && this.blur)
						return this.blur(), !1
				},
				delegateType: "focusout"
			},
			click: {
				trigger: function () {
					if (ea.nodeName(this, "input") && "checkbox" === this.type && this.click)
						return this.click(), !1
				},
				_default: function (a) {
					return ea.nodeName(a.target, "a")
				}
			},
			beforeunload: {
				postDispatch: function (a) {
					void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
				}
			}
		},
		simulate: function (a, b, c, d) {
			var e = ea.extend(new ea.Event, c, {
					type: a,
					isSimulated: !0,
					originalEvent: {}
				});
			d ? ea.event.trigger(e, null, b) : ea.event.dispatch.call(b, e),
			e.isDefaultPrevented() && c.preventDefault()
		}
	},
	ea.removeEvent = oa.removeEventListener ? function (a, b, c) {
		a.removeEventListener && a.removeEventListener(b, c, !1)
	}
	 : function (a, b, c) {
		var d = "on" + b;
		a.detachEvent && (typeof a[d] === xa && (a[d] = null), a.detachEvent(d, c))
	},
	ea.Event = function (a, b) {
		return this instanceof ea.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? m : n) : this.type = a, b && ea.extend(this, b), this.timeStamp = a && a.timeStamp || ea.now(), void(this[ea.expando] = !0)) : new ea.Event(a, b)
	},
	ea.Event.prototype = {
		isDefaultPrevented: n,
		isPropagationStopped: n,
		isImmediatePropagationStopped: n,
		preventDefault: function () {
			var a = this.originalEvent;
			this.isDefaultPrevented = m,
			a && (a.preventDefault ? a.preventDefault() : a.returnValue = !1)
		},
		stopPropagation: function () {
			var a = this.originalEvent;
			this.isPropagationStopped = m,
			a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0)
		},
		stopImmediatePropagation: function () {
			var a = this.originalEvent;
			this.isImmediatePropagationStopped = m,
			a && a.stopImmediatePropagation && a.stopImmediatePropagation(),
			this.stopPropagation()
		}
	},
	ea.each({
		mouseenter: "mouseover",
		mouseleave: "mouseout",
		pointerenter: "pointerover",
		pointerleave: "pointerout"
	}, function (a, b) {
		ea.event.special[a] = {
			delegateType: b,
			bindType: b,
			handle: function (a) {
				var c,
				d = this,
				e = a.relatedTarget,
				f = a.handleObj;
				return e && (e === d || ea.contains(d, e)) || (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b),
				c
			}
		}
	}),
	ca.submitBubbles || (ea.event.special.submit = {
			setup: function () {
				return !ea.nodeName(this, "form") && void ea.event.add(this, "click._submit keypress._submit", function (a) {
					var b = a.target,
					c = ea.nodeName(b, "input") || ea.nodeName(b, "button") ? b.form : void 0;
					c && !ea._data(c, "submitBubbles") && (ea.event.add(c, "submit._submit", function (a) {
							a._submit_bubble = !0
						}), ea._data(c, "submitBubbles", !0))
				})
			},
			postDispatch: function (a) {
				a._submit_bubble && (delete a._submit_bubble, this.parentNode && !a.isTrigger && ea.event.simulate("submit", this.parentNode, a, !0))
			},
			teardown: function () {
				return !ea.nodeName(this, "form") && void ea.event.remove(this, "._submit")
			}
		}),
	ca.changeBubbles || (ea.event.special.change = {
			setup: function () {
				return Fa.test(this.nodeName) ? ("checkbox" !== this.type && "radio" !== this.type || (ea.event.add(this, "propertychange._change", function (a) {
							"checked" === a.originalEvent.propertyName && (this._just_changed = !0)
						}), ea.event.add(this, "click._change", function (a) {
							this._just_changed && !a.isTrigger && (this._just_changed = !1),
							ea.event.simulate("change", this, a, !0)
						})), !1) : void ea.event.add(this, "beforeactivate._change", function (a) {
					var b = a.target;
					Fa.test(b.nodeName) && !ea._data(b, "changeBubbles") && (ea.event.add(b, "change._change", function (a) {
							!this.parentNode || a.isSimulated || a.isTrigger || ea.event.simulate("change", this.parentNode, a, !0)
						}), ea._data(b, "changeBubbles", !0))
				})
			},
			handle: function (a) {
				var b = a.target;
				if (this !== b || a.isSimulated || a.isTrigger || "radio" !== b.type && "checkbox" !== b.type)
					return a.handleObj.handler.apply(this, arguments)
			},
			teardown: function () {
				return ea.event.remove(this, "._change"),
				!Fa.test(this.nodeName)
			}
		}),
	ca.focusinBubbles || ea.each({
		focus: "focusin",
		blur: "focusout"
	}, function (a, b) {
		var c = function (a) {
			ea.event.simulate(b, a.target, ea.event.fix(a), !0)
		};
		ea.event.special[b] = {
			setup: function () {
				var d = this.ownerDocument || this,
				e = ea._data(d, b);
				e || d.addEventListener(a, c, !0),
				ea._data(d, b, (e || 0) + 1)
			},
			teardown: function () {
				var d = this.ownerDocument || this,
				e = ea._data(d, b) - 1;
				e ? ea._data(d, b, e) : (d.removeEventListener(a, c, !0), ea._removeData(d, b))
			}
		}
	}),
	ea.fn.extend({
		on: function (a, b, c, d, e) {
			var f,
			g;
			if ("object" == typeof a) {
				"string" != typeof b && (c = c || b, b = void 0);
				for (f in a)
					this.on(f, b, c, a[f], e);
				return this
			}
			if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1)
				d = n;
			else if (!d)
				return this;
			return 1 === e && (g = d, d = function (a) {
				return ea().off(a),
				g.apply(this, arguments)
			}, d.guid = g.guid || (g.guid = ea.guid++)),
			this.each(function () {
				ea.event.add(this, a, d, c, b)
			})
		},
		one: function (a, b, c, d) {
			return this.on(a, b, c, d, 1)
		},
		off: function (a, b, c) {
			var d,
			e;
			if (a && a.preventDefault && a.handleObj)
				return d = a.handleObj, ea(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), this;
			if ("object" == typeof a) {
				for (e in a)
					this.off(e, b, a[e]);
				return this
			}
			return b !== !1 && "function" != typeof b || (c = b, b = void 0),
			c === !1 && (c = n),
			this.each(function () {
				ea.event.remove(this, a, c, b)
			})
		},
		trigger: function (a, b) {
			return this.each(function () {
				ea.event.trigger(a, b, this)
			})
		},
		triggerHandler: function (a, b) {
			var c = this[0];
			if (c)
				return ea.event.trigger(a, b, c, !0)
		}
	});
	var Ka = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
	La = / jQuery\d+="(?:null|\d+)"/g,
	Ma = new RegExp("<(?:" + Ka + ")[\\s/>]", "i"),
	Na = /^\s+/,
	Oa = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	Pa = /<([\w:]+)/,
	Qa = /<tbody/i,
	Ra = /<|&#?\w+;/,
	Sa = /<(?:script|style|link)/i,
	Ta = /checked\s*(?:[^=]|=\s*.checked.)/i,
	Ua = /^$|\/(?:java|ecma)script/i,
	Va = /^true\/(.*)/,
	Wa = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
	Xa = {
		option: [1, "<select multiple='multiple'>", "</select>"],
		legend: [1, "<fieldset>", "</fieldset>"],
		area: [1, "<map>", "</map>"],
		param: [1, "<object>", "</object>"],
		thead: [1, "<table>", "</table>"],
		tr: [2, "<table><tbody>", "</tbody></table>"],
		col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
		td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
		_default: ca.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
	},
	Ya = p(oa),
	Za = Ya.appendChild(oa.createElement("div"));
	Xa.optgroup = Xa.option,
	Xa.tbody = Xa.tfoot = Xa.colgroup = Xa.caption = Xa.thead,
	Xa.th = Xa.td,
	ea.extend({
		clone: function (a, b, c) {
			var d,
			e,
			f,
			g,
			h,
			i = ea.contains(a.ownerDocument, a);
			if (ca.html5Clone || ea.isXMLDoc(a) || !Ma.test("<" + a.nodeName + ">") ? f = a.cloneNode(!0) : (Za.innerHTML = a.outerHTML, Za.removeChild(f = Za.firstChild)), !(ca.noCloneEvent && ca.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || ea.isXMLDoc(a)))
				for (d = q(f), h = q(a), g = 0; null != (e = h[g]); ++g)
					d[g] && x(e, d[g]);
			if (b)
				if (c)
					for (h = h || q(a), d = d || q(f), g = 0; null != (e = h[g]); g++)
						w(e, d[g]);
				else
					w(a, f);
			return d = q(f, "script"),
			d.length > 0 && v(d, !i && q(a, "script")),
			d = h = e = null,
			f
		},
		buildFragment: function (a, b, c, d) {
			for (var e, f, g, h, i, j, k, l = a.length, m = p(b), n = [], o = 0; o < l; o++)
				if (f = a[o], f || 0 === f)
					if ("object" === ea.type(f))
						ea.merge(n, f.nodeType ? [f] : f);
					else if (Ra.test(f)) {
						for (h = h || m.appendChild(b.createElement("div")), i = (Pa.exec(f) || ["", ""])[1].toLowerCase(), k = Xa[i] || Xa._default, h.innerHTML = k[1] + f.replace(Oa, "<$1></$2>") + k[2], e = k[0]; e--; )
							h = h.lastChild;
						if (!ca.leadingWhitespace && Na.test(f) && n.push(b.createTextNode(Na.exec(f)[0])), !ca.tbody)
							for (f = "table" !== i || Qa.test(f) ? "<table>" !== k[1] || Qa.test(f) ? 0 : h : h.firstChild, e = f && f.childNodes.length; e--; )
								ea.nodeName(j = f.childNodes[e], "tbody") && !j.childNodes.length && f.removeChild(j);
						for (ea.merge(n, h.childNodes), h.textContent = ""; h.firstChild; )
							h.removeChild(h.firstChild);
						h = m.lastChild
					} else
						n.push(b.createTextNode(f));
			for (h && m.removeChild(h), ca.appendChecked || ea.grep(q(n, "input"), r), o = 0; f = n[o++]; )
				if ((!d || ea.inArray(f, d) === -1) && (g = ea.contains(f.ownerDocument, f), h = q(m.appendChild(f), "script"), g && v(h), c))
					for (e = 0; f = h[e++]; )
						Ua.test(f.type || "") && c.push(f);
			return h = null,
			m
		},
		cleanData: function (a, b) {
			for (var c, d, e, f, g = 0, h = ea.expando, i = ea.cache, j = ca.deleteExpando, k = ea.event.special; null != (c = a[g]); g++)
				if ((b || ea.acceptData(c)) && (e = c[h], f = e && i[e])) {
					if (f.events)
						for (d in f.events)
							k[d] ? ea.event.remove(c, d) : ea.removeEvent(c, d, f.handle);
					i[e] && (delete i[e], j ? delete c[h] : typeof c.removeAttribute !== xa ? c.removeAttribute(h) : c[h] = null, W.push(e))
				}
		}
	}),
	ea.fn.extend({
		text: function (a) {
			return Da(this, function (a) {
				return void 0 === a ? ea.text(this) : this.empty().append((this[0] && this[0].ownerDocument || oa).createTextNode(a))
			}, null, a, arguments.length)
		},
		append: function () {
			return this.domManip(arguments, function (a) {
				if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
					var b = s(this, a);
					b.appendChild(a)
				}
			})
		},
		prepend: function () {
			return this.domManip(arguments, function (a) {
				if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
					var b = s(this, a);
					b.insertBefore(a, b.firstChild)
				}
			})
		},
		before: function () {
			return this.domManip(arguments, function (a) {
				this.parentNode && this.parentNode.insertBefore(a, this)
			})
		},
		after: function () {
			return this.domManip(arguments, function (a) {
				this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
			})
		},
		remove: function (a, b) {
			for (var c, d = a ? ea.filter(a, this) : this, e = 0; null != (c = d[e]); e++)
				b || 1 !== c.nodeType || ea.cleanData(q(c)), c.parentNode && (b && ea.contains(c.ownerDocument, c) && v(q(c, "script")), c.parentNode.removeChild(c));
			return this
		},
		empty: function () {
			for (var a, b = 0; null != (a = this[b]); b++) {
				for (1 === a.nodeType && ea.cleanData(q(a, !1)); a.firstChild; )
					a.removeChild(a.firstChild);
				a.options && ea.nodeName(a, "select") && (a.options.length = 0)
			}
			return this
		},
		clone: function (a, b) {
			return a = null != a && a,
			b = null == b ? a : b,
			this.map(function () {
				return ea.clone(this, a, b)
			})
		},
		html: function (a) {
			return Da(this, function (a) {
				var b = this[0] || {},
				c = 0,
				d = this.length;
				if (void 0 === a)
					return 1 === b.nodeType ? b.innerHTML.replace(La, "") : void 0;
				if ("string" == typeof a && !Sa.test(a) && (ca.htmlSerialize || !Ma.test(a)) && (ca.leadingWhitespace || !Na.test(a)) && !Xa[(Pa.exec(a) || ["", ""])[1].toLowerCase()]) {
					a = a.replace(Oa, "<$1></$2>");
					try {
						for (; c < d; c++)
							b = this[c] || {},
						1 === b.nodeType && (ea.cleanData(q(b, !1)), b.innerHTML = a);
						b = 0
					} catch (a) {}
				}
				b && this.empty().append(a)
			}, null, a, arguments.length)
		},
		replaceWith: function () {
			var a = arguments[0];
			return this.domManip(arguments, function (b) {
				a = this.parentNode,
				ea.cleanData(q(this)),
				a && a.replaceChild(b, this)
			}),
			a && (a.length || a.nodeType) ? this : this.remove()
		},
		detach: function (a) {
			return this.remove(a, !0)
		},
		domManip: function (a, b) {
			a = Y.apply([], a);
			var c,
			d,
			e,
			f,
			g,
			h,
			i = 0,
			j = this.length,
			k = this,
			l = j - 1,
			m = a[0],
			n = ea.isFunction(m);
			if (n || j > 1 && "string" == typeof m && !ca.checkClone && Ta.test(m))
				return this.each(function (c) {
					var d = k.eq(c);
					n && (a[0] = m.call(this, c, d.html())),
					d.domManip(a, b)
				});
			if (j && (h = ea.buildFragment(a, this[0].ownerDocument, !1, this), c = h.firstChild, 1 === h.childNodes.length && (h = c), c)) {
				for (f = ea.map(q(h, "script"), t), e = f.length; i < j; i++)
					d = h, i !== l && (d = ea.clone(d, !0, !0), e && ea.merge(f, q(d, "script"))), b.call(this[i], d, i);
				if (e)
					for (g = f[f.length - 1].ownerDocument, ea.map(f, u), i = 0; i < e; i++)
						d = f[i], Ua.test(d.type || "") && !ea._data(d, "globalEval") && ea.contains(g, d) && (d.src ? ea._evalUrl && ea._evalUrl(d.src) : ea.globalEval((d.text || d.textContent || d.innerHTML || "").replace(Wa, "")));
				h = c = null
			}
			return this
		}
	}),
	ea.each({
		appendTo: "append",
		prependTo: "prepend",
		insertBefore: "before",
		insertAfter: "after",
		replaceAll: "replaceWith"
	}, function (a, b) {
		ea.fn[a] = function (a) {
			for (var c, d = 0, e = [], f = ea(a), g = f.length - 1; d <= g; d++)
				c = d === g ? this : this.clone(!0), ea(f[d])[b](c), Z.apply(e, c.get());
			return this.pushStack(e)
		}
	});
	var $a,
	_a = {};
	!function () {
		var a;
		ca.shrinkWrapBlocks = function () {
			if (null != a)
				return a;
			a = !1;
			var b,
			c,
			d;
			return c = oa.getElementsByTagName("body")[0],
			c && c.style ? (b = oa.createElement("div"), d = oa.createElement("div"), d.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", c.appendChild(d).appendChild(b), typeof b.style.zoom !== xa && (b.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1", b.appendChild(oa.createElement("div")).style.width = "5px", a = 3 !== b.offsetWidth), c.removeChild(d), a) : void 0
		}
	}
	();
	var ab,
	bb,
	cb = /^margin/,
	db = new RegExp("^(" + Aa + ")(?!px)[a-z%]+$", "i"),
	eb = /^(top|right|bottom|left)$/;
	a.getComputedStyle ? (ab = function (a) {
		return a.ownerDocument.defaultView.getComputedStyle(a, null)
	}, bb = function (a, b, c) {
		var d,
		e,
		f,
		g,
		h = a.style;
		return c = c || ab(a),
		g = c ? c.getPropertyValue(b) || c[b] : void 0,
		c && ("" !== g || ea.contains(a.ownerDocument, a) || (g = ea.style(a, b)), db.test(g) && cb.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)),
		void 0 === g ? g : g + ""
	}) : oa.documentElement.currentStyle && (ab = function (a) {
		return a.currentStyle
	}, bb = function (a, b, c) {
		var d,
		e,
		f,
		g,
		h = a.style;
		return c = c || ab(a),
		g = c ? c[b] : void 0,
		null == g && h && h[b] && (g = h[b]),
		db.test(g) && !eb.test(b) && (d = h.left, e = a.runtimeStyle, f = e && e.left, f && (e.left = a.currentStyle.left), h.left = "fontSize" === b ? "1em" : g, g = h.pixelLeft + "px", h.left = d, f && (e.left = f)),
		void 0 === g ? g : g + "" || "auto"
	}),
	function () {
		function b() {
			var b,
			c,
			d,
			e;
			c = oa.getElementsByTagName("body")[0],
			c && c.style && (b = oa.createElement("div"), d = oa.createElement("div"), d.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", c.appendChild(d).appendChild(b), b.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", f = g = !1, i = !0, a.getComputedStyle && (f = "1%" !== (a.getComputedStyle(b, null) || {}).top, g = "4px" === (a.getComputedStyle(b, null) || {
							width: "4px"
						}).width, e = b.appendChild(oa.createElement("div")), e.style.cssText = b.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", e.style.marginRight = e.style.width = "0", b.style.width = "1px", i = !parseFloat((a.getComputedStyle(e, null) || {}).marginRight)), b.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", e = b.getElementsByTagName("td"), e[0].style.cssText = "margin:0;border:0;padding:0;display:none", h = 0 === e[0].offsetHeight, h && (e[0].style.display = "", e[1].style.display = "none", h = 0 === e[0].offsetHeight), c.removeChild(d))
		}
		var c,
		d,
		e,
		f,
		g,
		h,
		i;
		c = oa.createElement("div"),
		c.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
		e = c.getElementsByTagName("a")[0],
		d = e && e.style,
		d && (d.cssText = "float:left;opacity:.5", ca.opacity = "0.5" === d.opacity, ca.cssFloat = !!d.cssFloat, c.style.backgroundClip = "content-box", c.cloneNode(!0).style.backgroundClip = "", ca.clearCloneStyle = "content-box" === c.style.backgroundClip, ca.boxSizing = "" === d.boxSizing || "" === d.MozBoxSizing || "" === d.WebkitBoxSizing, ea.extend(ca, {
				reliableHiddenOffsets: function () {
					return null == h && b(),
					h
				},
				boxSizingReliable: function () {
					return null == g && b(),
					g
				},
				pixelPosition: function () {
					return null == f && b(),
					f
				},
				reliableMarginRight: function () {
					return null == i && b(),
					i
				}
			}))
	}
	(),
	ea.swap = function (a, b, c, d) {
		var e,
		f,
		g = {};
		for (f in b)
			g[f] = a.style[f], a.style[f] = b[f];
		e = c.apply(a, d || []);
		for (f in b)
			a.style[f] = g[f];
		return e
	};
	var fb = /alpha\([^)]*\)/i,
	gb = /opacity\s*=\s*([^)]*)/,
	hb = /^(none|table(?!-c[ea]).+)/,
	ib = new RegExp("^(" + Aa + ")(.*)$", "i"),
	jb = new RegExp("^([+-])=(" + Aa + ")", "i"),
	kb = {
		position: "absolute",
		visibility: "hidden",
		display: "block"
	},
	lb = {
		letterSpacing: "0",
		fontWeight: "400"
	},
	mb = ["Webkit", "O", "Moz", "ms"];
	ea.extend({
		cssHooks: {
			opacity: {
				get: function (a, b) {
					if (b) {
						var c = bb(a, "opacity");
						return "" === c ? "1" : c
					}
				}
			}
		},
		cssNumber: {
			columnCount: !0,
			fillOpacity: !0,
			flexGrow: !0,
			flexShrink: !0,
			fontWeight: !0,
			lineHeight: !0,
			opacity: !0,
			order: !0,
			orphans: !0,
			widows: !0,
			zIndex: !0,
			zoom: !0
		},
		cssProps: {
			float: ca.cssFloat ? "cssFloat" : "styleFloat"
		},
		style: function (a, b, c, d) {
			if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
				var e,
				f,
				g,
				h = ea.camelCase(b),
				i = a.style;
				if (b = ea.cssProps[h] || (ea.cssProps[h] = B(i, h)), g = ea.cssHooks[b] || ea.cssHooks[h], void 0 === c)
					return g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b];
				if (f = typeof c, "string" === f && (e = jb.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(ea.css(a, b)), f = "number"), null != c && c === c && ("number" !== f || ea.cssNumber[h] || (c += "px"), ca.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), !(g && "set" in g && void 0 === (c = g.set(a, c, d)))))
					try {
						i[b] = c
					} catch (a) {}
			}
		},
		css: function (a, b, c, d) {
			var e,
			f,
			g,
			h = ea.camelCase(b);
			return b = ea.cssProps[h] || (ea.cssProps[h] = B(a.style, h)),
			g = ea.cssHooks[b] || ea.cssHooks[h],
			g && "get" in g && (f = g.get(a, !0, c)),
			void 0 === f && (f = bb(a, b, d)),
			"normal" === f && b in lb && (f = lb[b]),
			"" === c || c ? (e = parseFloat(f), c === !0 || ea.isNumeric(e) ? e || 0 : f) : f
		}
	}),
	ea.each(["height", "width"], function (a, b) {
		ea.cssHooks[b] = {
			get: function (a, c, d) {
				if (c)
					return hb.test(ea.css(a, "display")) && 0 === a.offsetWidth ? ea.swap(a, kb, function () {
						return F(a, b, d)
					}) : F(a, b, d)
			},
			set: function (a, c, d) {
				var e = d && ab(a);
				return D(a, c, d ? E(a, b, d, ca.boxSizing && "border-box" === ea.css(a, "boxSizing", !1, e), e) : 0)
			}
		}
	}),
	ca.opacity || (ea.cssHooks.opacity = {
			get: function (a, b) {
				return gb.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : b ? "1" : ""
			},
			set: function (a, b) {
				var c = a.style,
				d = a.currentStyle,
				e = ea.isNumeric(b) ? "alpha(opacity=" + 100 * b + ")" : "",
				f = d && d.filter || c.filter || "";
				c.zoom = 1,
				(b >= 1 || "" === b) && "" === ea.trim(f.replace(fb, "")) && c.removeAttribute && (c.removeAttribute("filter"), "" === b || d && !d.filter) || (c.filter = fb.test(f) ? f.replace(fb, e) : f + " " + e)
			}
		}),
	ea.cssHooks.marginRight = A(ca.reliableMarginRight, function (a, b) {
			if (b)
				return ea.swap(a, {
					display: "inline-block"
				}, bb, [a, "marginRight"])
		}),
	ea.each({
		margin: "",
		padding: "",
		border: "Width"
	}, function (a, b) {
		ea.cssHooks[a + b] = {
			expand: function (c) {
				for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c]; d < 4; d++)
					e[a + Ba[d] + b] = f[d] || f[d - 2] || f[0];
				return e
			}
		},
		cb.test(a) || (ea.cssHooks[a + b].set = D)
	}),
	ea.fn.extend({
		css: function (a, b) {
			return Da(this, function (a, b, c) {
				var d,
				e,
				f = {},
				g = 0;
				if (ea.isArray(b)) {
					for (d = ab(a), e = b.length; g < e; g++)
						f[b[g]] = ea.css(a, b[g], !1, d);
					return f
				}
				return void 0 !== c ? ea.style(a, b, c) : ea.css(a, b)
			}, a, b, arguments.length > 1)
		},
		show: function () {
			return C(this, !0)
		},
		hide: function () {
			return C(this)
		},
		toggle: function (a) {
			return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function () {
				Ca(this) ? ea(this).show() : ea(this).hide()
			})
		}
	}),
	ea.Tween = G,
	G.prototype = {
		constructor: G,
		init: function (a, b, c, d, e, f) {
			this.elem = a,
			this.prop = c,
			this.easing = e || "swing",
			this.options = b,
			this.start = this.now = this.cur(),
			this.end = d,
			this.unit = f || (ea.cssNumber[c] ? "" : "px")
		},
		cur: function () {
			var a = G.propHooks[this.prop];
			return a && a.get ? a.get(this) : G.propHooks._default.get(this)
		},
		run: function (a) {
			var b,
			c = G.propHooks[this.prop];
			return this.options.duration ? this.pos = b = ea.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : this.pos = b = a,
			this.now = (this.end - this.start) * b + this.start,
			this.options.step && this.options.step.call(this.elem, this.now, this),
			c && c.set ? c.set(this) : G.propHooks._default.set(this),
			this
		}
	},
	G.prototype.init.prototype = G.prototype,
	G.propHooks = {
		_default: {
			get: function (a) {
				var b;
				return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = ea.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
			},
			set: function (a) {
				ea.fx.step[a.prop] ? ea.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[ea.cssProps[a.prop]] || ea.cssHooks[a.prop]) ? ea.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
			}
		}
	},
	G.propHooks.scrollTop = G.propHooks.scrollLeft = {
		set: function (a) {
			a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
		}
	},
	ea.easing = {
		linear: function (a) {
			return a
		},
		swing: function (a) {
			return .5 - Math.cos(a * Math.PI) / 2
		}
	},
	ea.fx = G.prototype.init,
	ea.fx.step = {};
	var nb,
	ob,
	pb = /^(?:toggle|show|hide)$/,
	qb = new RegExp("^(?:([+-])=|)(" + Aa + ")([a-z%]*)$", "i"),
	rb = /queueHooks$/,
	sb = [K],
	tb = {
		"*": [function (a, b) {
				var c = this.createTween(a, b),
				d = c.cur(),
				e = qb.exec(b),
				f = e && e[3] || (ea.cssNumber[a] ? "" : "px"),
				g = (ea.cssNumber[a] || "px" !== f && +d) && qb.exec(ea.css(c.elem, a)),
				h = 1,
				i = 20;
				if (g && g[3] !== f) {
					f = f || g[3],
					e = e || [],
					g = +d || 1;
					do
						h = h || ".5", g /= h, ea.style(c.elem, a, g + f);
					while (h !== (h = c.cur() / d) && 1 !== h && --i)
				}
				return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]),
				c
			}
		]
	};
	ea.Animation = ea.extend(M, {
			tweener: function (a, b) {
				ea.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
				for (var c, d = 0, e = a.length; d < e; d++)
					c = a[d], tb[c] = tb[c] || [], tb[c].unshift(b)
			},
			prefilter: function (a, b) {
				b ? sb.unshift(a) : sb.push(a)
			}
		}),
	ea.speed = function (a, b, c) {
		var d = a && "object" == typeof a ? ea.extend({}, a) : {
			complete: c || !c && b || ea.isFunction(a) && a,
			duration: a,
			easing: c && b || b && !ea.isFunction(b) && b
		};
		return d.duration = ea.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in ea.fx.speeds ? ea.fx.speeds[d.duration] : ea.fx.speeds._default,
		null != d.queue && d.queue !== !0 || (d.queue = "fx"),
		d.old = d.complete,
		d.complete = function () {
			ea.isFunction(d.old) && d.old.call(this),
			d.queue && ea.dequeue(this, d.queue)
		},
		d
	},
	ea.fn.extend({
		fadeTo: function (a, b, c, d) {
			return this.filter(Ca).css("opacity", 0).show().end().animate({
				opacity: b
			}, a, c, d)
		},
		animate: function (a, b, c, d) {
			var e = ea.isEmptyObject(a),
			f = ea.speed(b, c, d),
			g = function () {
				var b = M(this, ea.extend({}, a), f);
				(e || ea._data(this, "finish")) && b.stop(!0)
			};
			return g.finish = g,
			e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
		},
		stop: function (a, b, c) {
			var d = function (a) {
				var b = a.stop;
				delete a.stop,
				b(c)
			};
			return "string" != typeof a && (c = b, b = a, a = void 0),
			b && a !== !1 && this.queue(a || "fx", []),
			this.each(function () {
				var b = !0,
				e = null != a && a + "queueHooks",
				f = ea.timers,
				g = ea._data(this);
				if (e)
					g[e] && g[e].stop && d(g[e]);
				else
					for (e in g)
						g[e] && g[e].stop && rb.test(e) && d(g[e]);
				for (e = f.length; e--; )
					f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1));
				!b && c || ea.dequeue(this, a)
			})
		},
		finish: function (a) {
			return a !== !1 && (a = a || "fx"),
			this.each(function () {
				var b,
				c = ea._data(this),
				d = c[a + "queue"],
				e = c[a + "queueHooks"],
				f = ea.timers,
				g = d ? d.length : 0;
				for (c.finish = !0, ea.queue(this, a, []), e && e.stop && e.stop.call(this, !0), b = f.length; b--; )
					f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
				for (b = 0; b < g; b++)
					d[b] && d[b].finish && d[b].finish.call(this);
				delete c.finish
			})
		}
	}),
	ea.each(["toggle", "show", "hide"], function (a, b) {
		var c = ea.fn[b];
		ea.fn[b] = function (a, d, e) {
			return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(I(b, !0), a, d, e)
		}
	}),
	ea.each({
		slideDown: I("show"),
		slideUp: I("hide"),
		slideToggle: I("toggle"),
		fadeIn: {
			opacity: "show"
		},
		fadeOut: {
			opacity: "hide"
		},
		fadeToggle: {
			opacity: "toggle"
		}
	}, function (a, b) {
		ea.fn[a] = function (a, c, d) {
			return this.animate(b, a, c, d)
		}
	}),
	ea.timers = [],
	ea.fx.tick = function () {
		var a,
		b = ea.timers,
		c = 0;
		for (nb = ea.now(); c < b.length; c++)
			a = b[c], a() || b[c] !== a || b.splice(c--, 1);
		b.length || ea.fx.stop(),
		nb = void 0
	},
	ea.fx.timer = function (a) {
		ea.timers.push(a),
		a() ? ea.fx.start() : ea.timers.pop()
	},
	ea.fx.interval = 13,
	ea.fx.start = function () {
		ob || (ob = setInterval(ea.fx.tick, ea.fx.interval))
	},
	ea.fx.stop = function () {
		clearInterval(ob),
		ob = null
	},
	ea.fx.speeds = {
		slow: 600,
		fast: 200,
		_default: 400
	},
	ea.fn.delay = function (a, b) {
		return a = ea.fx ? ea.fx.speeds[a] || a : a,
		b = b || "fx",
		this.queue(b, function (b, c) {
			var d = setTimeout(b, a);
			c.stop = function () {
				clearTimeout(d)
			}
		})
	},
	function () {
		var a,
		b,
		c,
		d,
		e;
		b = oa.createElement("div"),
		b.setAttribute("className", "t"),
		b.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
		d = b.getElementsByTagName("a")[0],
		c = oa.createElement("select"),
		e = c.appendChild(oa.createElement("option")),
		a = b.getElementsByTagName("input")[0],
		d.style.cssText = "top:1px",
		ca.getSetAttribute = "t" !== b.className,
		ca.style = /top/.test(d.getAttribute("style")),
		ca.hrefNormalized = "/a" === d.getAttribute("href"),
		ca.checkOn = !!a.value,
		ca.optSelected = e.selected,
		ca.enctype = !!oa.createElement("form").enctype,
		c.disabled = !0,
		ca.optDisabled = !e.disabled,
		a = oa.createElement("input"),
		a.setAttribute("value", ""),
		ca.input = "" === a.getAttribute("value"),
		a.value = "t",
		a.setAttribute("type", "radio"),
		ca.radioValue = "t" === a.value
	}
	();
	var ub = /\r/g;
	ea.fn.extend({
		val: function (a) {
			var b,
			c,
			d,
			e = this[0]; {
				if (arguments.length)
					return d = ea.isFunction(a), this.each(function (c) {
						var e;
						1 === this.nodeType && (e = d ? a.call(this, c, ea(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : ea.isArray(e) && (e = ea.map(e, function (a) {
											return null == a ? "" : a + ""
										})), b = ea.valHooks[this.type] || ea.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
					});
				if (e)
					return b = ea.valHooks[e.type] || ea.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, "string" == typeof c ? c.replace(ub, "") : null == c ? "" : c)
			}
		}
	}),
	ea.extend({
		valHooks: {
			option: {
				get: function (a) {
					var b = ea.find.attr(a, "value");
					return null != b ? b : ea.trim(ea.text(a))
				}
			},
			select: {
				get: function (a) {
					for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || e < 0, g = f ? null : [], h = f ? e + 1 : d.length, i = e < 0 ? h : f ? e : 0; i < h; i++)
						if (c = d[i], (c.selected || i === e) && (ca.optDisabled ? !c.disabled : null === c.getAttribute("disabled")) && (!c.parentNode.disabled || !ea.nodeName(c.parentNode, "optgroup"))) {
							if (b = ea(c).val(), f)
								return b;
							g.push(b)
						}
					return g
				},
				set: function (a, b) {
					for (var c, d, e = a.options, f = ea.makeArray(b), g = e.length; g--; )
						if (d = e[g], ea.inArray(ea.valHooks.option.get(d), f) >= 0)
							try {
								d.selected = c = !0
							} catch (a) {
								d.scrollHeight
							}
						else
							d.selected = !1;
					return c || (a.selectedIndex = -1),
					e
				}
			}
		}
	}),
	ea.each(["radio", "checkbox"], function () {
		ea.valHooks[this] = {
			set: function (a, b) {
				if (ea.isArray(b))
					return a.checked = ea.inArray(ea(a).val(), b) >= 0
			}
		},
		ca.checkOn || (ea.valHooks[this].get = function (a) {
			return null === a.getAttribute("value") ? "on" : a.value
		})
	});
	var vb,
	wb,
	xb = ea.expr.attrHandle,
	yb = /^(?:checked|selected)$/i,
	zb = ca.getSetAttribute,
	Ab = ca.input;
	ea.fn.extend({
		attr: function (a, b) {
			return Da(this, ea.attr, a, b, arguments.length > 1)
		},
		removeAttr: function (a) {
			return this.each(function () {
				ea.removeAttr(this, a)
			})
		}
	}),
	ea.extend({
		attr: function (a, b, c) {
			var d,
			e,
			f = a.nodeType;
			if (a && 3 !== f && 8 !== f && 2 !== f)
				return typeof a.getAttribute === xa ? ea.prop(a, b, c) : (1 === f && ea.isXMLDoc(a) || (b = b.toLowerCase(), d = ea.attrHooks[b] || (ea.expr.match.bool.test(b) ? wb : vb)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = ea.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : void ea.removeAttr(a, b))
		},
		removeAttr: function (a, b) {
			var c,
			d,
			e = 0,
			f = b && b.match(ta);
			if (f && 1 === a.nodeType)
				for (; c = f[e++]; )
					d = ea.propFix[c] || c, ea.expr.match.bool.test(c) ? Ab && zb || !yb.test(c) ? a[d] = !1 : a[ea.camelCase("default-" + c)] = a[d] = !1 : ea.attr(a, c, ""), a.removeAttribute(zb ? c : d)
		},
		attrHooks: {
			type: {
				set: function (a, b) {
					if (!ca.radioValue && "radio" === b && ea.nodeName(a, "input")) {
						var c = a.value;
						return a.setAttribute("type", b),
						c && (a.value = c),
						b
					}
				}
			}
		}
	}),
	wb = {
		set: function (a, b, c) {
			return b === !1 ? ea.removeAttr(a, c) : Ab && zb || !yb.test(c) ? a.setAttribute(!zb && ea.propFix[c] || c, c) : a[ea.camelCase("default-" + c)] = a[c] = !0,
			c
		}
	},
	ea.each(ea.expr.match.bool.source.match(/\w+/g), function (a, b) {
		var c = xb[b] || ea.find.attr;
		xb[b] = Ab && zb || !yb.test(b) ? function (a, b, d) {
			var e,
			f;
			return d || (f = xb[b], xb[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, xb[b] = f),
			e
		}
		 : function (a, b, c) {
			if (!c)
				return a[ea.camelCase("default-" + b)] ? b.toLowerCase() : null
		}
	}),
	Ab && zb || (ea.attrHooks.value = {
			set: function (a, b, c) {
				return ea.nodeName(a, "input") ? void(a.defaultValue = b) : vb && vb.set(a, b, c)
			}
		}),
	zb || (vb = {
			set: function (a, b, c) {
				var d = a.getAttributeNode(c);
				if (d || a.setAttributeNode(d = a.ownerDocument.createAttribute(c)), d.value = b += "", "value" === c || b === a.getAttribute(c))
					return b
			}
		}, xb.id = xb.name = xb.coords = function (a, b, c) {
		var d;
		if (!c)
			return (d = a.getAttributeNode(b)) && "" !== d.value ? d.value : null
	}, ea.valHooks.button = {
			get: function (a, b) {
				var c = a.getAttributeNode(b);
				if (c && c.specified)
					return c.value
			},
			set: vb.set
		}, ea.attrHooks.contenteditable = {
			set: function (a, b, c) {
				vb.set(a, "" !== b && b, c)
			}
		}, ea.each(["width", "height"], function (a, b) {
			ea.attrHooks[b] = {
				set: function (a, c) {
					if ("" === c)
						return a.setAttribute(b, "auto"), c
				}
			}
		})),
	ca.style || (ea.attrHooks.style = {
			get: function (a) {
				return a.style.cssText || void 0
			},
			set: function (a, b) {
				return a.style.cssText = b + ""
			}
		});
	var Bb = /^(?:input|select|textarea|button|object)$/i,
	Cb = /^(?:a|area)$/i;
	ea.fn.extend({
		prop: function (a, b) {
			return Da(this, ea.prop, a, b, arguments.length > 1)
		},
		removeProp: function (a) {
			return a = ea.propFix[a] || a,
			this.each(function () {
				try {
					this[a] = void 0,
					delete this[a]
				} catch (a) {}
			})
		}
	}),
	ea.extend({
		propFix: {
			for : "htmlFor", class: "className"
	},
	prop: function (a, b, c) {
		var d,
		e,
		f,
		g = a.nodeType;
		if (a && 3 !== g && 8 !== g && 2 !== g)
			return f = 1 !== g || !ea.isXMLDoc(a), f && (b = ea.propFix[b] || b, e = ea.propHooks[b]) , void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]
		},
		propHooks: {
			tabIndex: {
				get: function (a) {
					var b = ea.find.attr(a, "tabindex");
					return b ? parseInt(b, 10) : Bb.test(a.nodeName) || Cb.test(a.nodeName) && a.href ? 0 : -1
				}
			}
		}
	}),
	ca.hrefNormalized || ea.each(["href", "src"], function (a, b) {
		ea.propHooks[b] = {
			get: function (a) {
				return a.getAttribute(b, 4)
			}
		}
	}),
	ca.optSelected || (ea.propHooks.selected = {
			get: function (a) {
				var b = a.parentNode;
				return b && (b.selectedIndex, b.parentNode && b.parentNode.selectedIndex),
				null
			}
		}),
	ea.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
		ea.propFix[this.toLowerCase()] = this
	}),
	ca.enctype || (ea.propFix.enctype = "encoding");
	var Db = /[\t\r\n\f]/g;
	ea.fn.extend({
		addClass: function (a) {
			var b,
			c,
			d,
			e,
			f,
			g,
			h = 0,
			i = this.length,
			j = "string" == typeof a && a;
			if (ea.isFunction(a))
				return this.each(function (b) {
					ea(this).addClass(a.call(this, b, this.className))
				});
			if (j)
				for (b = (a || "").match(ta) || []; h < i; h++)
					if (c = this[h], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(Db, " ") : " ")) {
						for (f = 0; e = b[f++]; )
							d.indexOf(" " + e + " ") < 0 && (d += e + " ");
						g = ea.trim(d),
						c.className !== g && (c.className = g)
					}
			return this
		},
		removeClass: function (a) {
			var b,
			c,
			d,
			e,
			f,
			g,
			h = 0,
			i = this.length,
			j = 0 === arguments.length || "string" == typeof a && a;
			if (ea.isFunction(a))
				return this.each(function (b) {
					ea(this).removeClass(a.call(this, b, this.className))
				});
			if (j)
				for (b = (a || "").match(ta) || []; h < i; h++)
					if (c = this[h], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(Db, " ") : "")) {
						for (f = 0; e = b[f++]; )
							for (; d.indexOf(" " + e + " ") >= 0; )
								d = d.replace(" " + e + " ", " ");
						g = a ? ea.trim(d) : "",
						c.className !== g && (c.className = g)
					}
			return this
		},
		toggleClass: function (a, b) {
			var c = typeof a;
			return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : ea.isFunction(a) ? this.each(function (c) {
				ea(this).toggleClass(a.call(this, c, this.className, b), b)
			}) : this.each(function () {
				if ("string" === c)
					for (var b, d = 0, e = ea(this), f = a.match(ta) || []; b = f[d++]; )
						e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
				else
					c !== xa && "boolean" !== c || (this.className && ea._data(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : ea._data(this, "__className__") || "")
			})
		},
		hasClass: function (a) {
			for (var b = " " + a + " ", c = 0, d = this.length; c < d; c++)
				if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(Db, " ").indexOf(b) >= 0)
					return !0;
			return !1
		}
	}),
	ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (a, b) {
		ea.fn[b] = function (a, c) {
			return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
		}
	}),
	ea.fn.extend({
		hover: function (a, b) {
			return this.mouseenter(a).mouseleave(b || a)
		},
		bind: function (a, b, c) {
			return this.on(a, null, b, c)
		},
		unbind: function (a, b) {
			return this.off(a, null, b)
		},
		delegate: function (a, b, c, d) {
			return this.on(b, a, c, d)
		},
		undelegate: function (a, b, c) {
			return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
		}
	});
	var Eb = ea.now(),
	Fb = /\?/,
	Gb = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
	ea.parseJSON = function (b) {
		if (a.JSON && a.JSON.parse)
			return a.JSON.parse(b + "");
		var c,
		d = null,
		e = ea.trim(b + "");
		return e && !ea.trim(e.replace(Gb, function (a, b, e, f) {
				return c && b && (d = 0),
				0 === d ? a : (c = e || b, d += !f - !e, "")
			})) ? Function("return " + e)() : ea.error("Invalid JSON: " + b)
	},
	ea.parseXML = function (b) {
		var c,
		d;
		if (!b || "string" != typeof b)
			return null;
		try {
			a.DOMParser ? (d = new DOMParser, c = d.parseFromString(b, "text/xml")) : (c = new ActiveXObject("Microsoft.XMLDOM"), c.async = "false", c.loadXML(b))
		} catch (a) {
			c = void 0
		}
		return c && c.documentElement && !c.getElementsByTagName("parsererror").length || ea.error("Invalid XML: " + b),
		c
	};
	var Hb,
	Ib,
	Jb = /#.*$/,
	Kb = /([?&])_=[^&]*/,
	Lb = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
	Mb = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	Nb = /^(?:GET|HEAD)$/,
	Ob = /^\/\//,
	Pb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
	Qb = {},
	Rb = {},
	Sb = "*/".concat("*");
	try {
		Ib = location.href
	} catch (a) {
		Ib = oa.createElement("a"),
		Ib.href = "",
		Ib = Ib.href
	}
	Hb = Pb.exec(Ib.toLowerCase()) || [],
	ea.extend({
		active: 0,
		lastModified: {},
		etag: {},
		ajaxSettings: {
			url: Ib,
			type: "GET",
			isLocal: Mb.test(Hb[1]),
			global: !0,
			processData: !0,
			async: !0,
			contentType: "application/x-www-form-urlencoded; charset=UTF-8",
			accepts: {
				"*": Sb,
				text: "text/plain",
				html: "text/html",
				xml: "application/xml, text/xml",
				json: "application/json, text/javascript"
			},
			contents: {
				xml: /xml/,
				html: /html/,
				json: /json/
			},
			responseFields: {
				xml: "responseXML",
				text: "responseText",
				json: "responseJSON"
			},
			converters: {
				"* text": String,
				"text html": !0,
				"text json": ea.parseJSON,
				"text xml": ea.parseXML
			},
			flatOptions: {
				url: !0,
				context: !0
			}
		},
		ajaxSetup: function (a, b) {
			return b ? P(P(a, ea.ajaxSettings), b) : P(ea.ajaxSettings, a)
		},
		ajaxPrefilter: N(Qb),
		ajaxTransport: N(Rb),
		ajax: function (a, b) {
			function c(a, b, c, d) {
				var e,
				k,
				r,
				s,
				u,
				w = b;
				2 !== t && (t = 2, h && clearTimeout(h), j = void 0, g = d || "", v.readyState = a > 0 ? 4 : 0, e = a >= 200 && a < 300 || 304 === a, c && (s = Q(l, v, c)), s = R(l, s, v, e), e ? (l.ifModified && (u = v.getResponseHeader("Last-Modified"), u && (ea.lastModified[f] = u), u = v.getResponseHeader("etag"), u && (ea.etag[f] = u)), 204 === a || "HEAD" === l.type ? w = "nocontent" : 304 === a ? w = "notmodified" : (w = s.state, k = s.data, r = s.error, e = !r)) : (r = w, !a && w || (w = "error", a < 0 && (a = 0))), v.status = a, v.statusText = (b || w) + "", e ? o.resolveWith(m, [k, w, v]) : o.rejectWith(m, [v, w, r]), v.statusCode(q), q = void 0, i && n.trigger(e ? "ajaxSuccess" : "ajaxError", [v, l, e ? k : r]), p.fireWith(m, [v, w]), i && (n.trigger("ajaxComplete", [v, l]), --ea.active || ea.event.trigger("ajaxStop")))
			}
			"object" == typeof a && (b = a, a = void 0),
			b = b || {};
			var d,
			e,
			f,
			g,
			h,
			i,
			j,
			k,
			l = ea.ajaxSetup({}, b),
			m = l.context || l,
			n = l.context && (m.nodeType || m.jquery) ? ea(m) : ea.event,
			o = ea.Deferred(),
			p = ea.Callbacks("once memory"),
			q = l.statusCode || {},
			r = {},
			s = {},
			t = 0,
			u = "canceled",
			v = {
				readyState: 0,
				getResponseHeader: function (a) {
					var b;
					if (2 === t) {
						if (!k)
							for (k = {}; b = Lb.exec(g); )
								k[b[1].toLowerCase()] = b[2];
						b = k[a.toLowerCase()]
					}
					return null == b ? null : b
				},
				getAllResponseHeaders: function () {
					return 2 === t ? g : null
				},
				setRequestHeader: function (a, b) {
					var c = a.toLowerCase();
					return t || (a = s[c] = s[c] || a, r[a] = b),
					this
				},
				overrideMimeType: function (a) {
					return t || (l.mimeType = a),
					this
				},
				statusCode: function (a) {
					var b;
					if (a)
						if (t < 2)
							for (b in a)
								q[b] = [q[b], a[b]];
						else
							v.always(a[v.status]);
					return this
				},
				abort: function (a) {
					var b = a || u;
					return j && j.abort(b),
					c(0, b),
					this
				}
			};
			if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, l.url = ((a || l.url || Ib) + "").replace(Jb, "").replace(Ob, Hb[1] + "//"), l.type = b.method || b.type || l.method || l.type, l.dataTypes = ea.trim(l.dataType || "*").toLowerCase().match(ta) || [""], null == l.crossDomain && (d = Pb.exec(l.url.toLowerCase()), l.crossDomain = !(!d || d[1] === Hb[1] && d[2] === Hb[2] && (d[3] || ("http:" === d[1] ? "80" : "443")) === (Hb[3] || ("http:" === Hb[1] ? "80" : "443")))), l.data && l.processData && "string" != typeof l.data && (l.data = ea.param(l.data, l.traditional)), O(Qb, l, b, v), 2 === t)
				return v;
			i = l.global,
			i && 0 === ea.active++ && ea.event.trigger("ajaxStart"),
			l.type = l.type.toUpperCase(),
			l.hasContent = !Nb.test(l.type),
			f = l.url,
			l.hasContent || (l.data && (f = l.url += (Fb.test(f) ? "&" : "?") + l.data, delete l.data), l.cache === !1 && (l.url = Kb.test(f) ? f.replace(Kb, "$1_=" + Eb++) : f + (Fb.test(f) ? "&" : "?") + "_=" + Eb++)),
			l.ifModified && (ea.lastModified[f] && v.setRequestHeader("If-Modified-Since", ea.lastModified[f]), ea.etag[f] && v.setRequestHeader("If-None-Match", ea.etag[f])),
			(l.data && l.hasContent && l.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", l.contentType),
			v.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + ("*" !== l.dataTypes[0] ? ", " + Sb + "; q=0.01" : "") : l.accepts["*"]);
			for (e in l.headers)
				v.setRequestHeader(e, l.headers[e]);
			if (l.beforeSend && (l.beforeSend.call(m, v, l) === !1 || 2 === t))
				return v.abort();
			u = "abort";
			for (e in {
				success: 1,
				error: 1,
				complete: 1
			})
				v[e](l[e]);
			if (j = O(Rb, l, b, v)) {
				v.readyState = 1,
				i && n.trigger("ajaxSend", [v, l]),
				l.async && l.timeout > 0 && (h = setTimeout(function () {
							v.abort("timeout")
						}, l.timeout));
				try {
					t = 1,
					j.send(r, c)
				} catch (a) {
					if (!(t < 2))
						throw a;
					c(-1, a)
				}
			} else
				c(-1, "No Transport");
			return v
		},
		getJSON: function (a, b, c) {
			return ea.get(a, b, c, "json")
		},
		getScript: function (a, b) {
			return ea.get(a, void 0, b, "script")
		}
	}),
	ea.each(["get", "post"], function (a, b) {
		ea[b] = function (a, c, d, e) {
			return ea.isFunction(c) && (e = e || d, d = c, c = void 0),
			ea.ajax({
				url: a,
				type: b,
				dataType: e,
				data: c,
				success: d
			})
		}
	}),
	ea.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (a, b) {
		ea.fn[b] = function (a) {
			return this.on(b, a)
		}
	}),
	ea._evalUrl = function (a) {
		return ea.ajax({
			url: a,
			type: "GET",
			dataType: "script",
			async: !1,
			global: !1,
			throws: !0
		})
	},
	ea.fn.extend({
		wrapAll: function (a) {
			if (ea.isFunction(a))
				return this.each(function (b) {
					ea(this).wrapAll(a.call(this, b))
				});
			if (this[0]) {
				var b = ea(a, this[0].ownerDocument).eq(0).clone(!0);
				this[0].parentNode && b.insertBefore(this[0]),
				b.map(function () {
					for (var a = this; a.firstChild && 1 === a.firstChild.nodeType; )
						a = a.firstChild;
					return a
				}).append(this)
			}
			return this
		},
		wrapInner: function (a) {
			return ea.isFunction(a) ? this.each(function (b) {
				ea(this).wrapInner(a.call(this, b))
			}) : this.each(function () {
				var b = ea(this),
				c = b.contents();
				c.length ? c.wrapAll(a) : b.append(a)
			})
		},
		wrap: function (a) {
			var b = ea.isFunction(a);
			return this.each(function (c) {
				ea(this).wrapAll(b ? a.call(this, c) : a)
			})
		},
		unwrap: function () {
			return this.parent().each(function () {
				ea.nodeName(this, "body") || ea(this).replaceWith(this.childNodes)
			}).end()
		}
	}),
	ea.expr.filters.hidden = function (a) {
		return a.offsetWidth <= 0 && a.offsetHeight <= 0 || !ca.reliableHiddenOffsets() && "none" === (a.style && a.style.display || ea.css(a, "display"))
	},
	ea.expr.filters.visible = function (a) {
		return !ea.expr.filters.hidden(a)
	};
	var Tb = /%20/g,
	Ub = /\[\]$/,
	Vb = /\r?\n/g,
	Wb = /^(?:submit|button|image|reset|file)$/i,
	Xb = /^(?:input|select|textarea|keygen)/i;
	ea.param = function (a, b) {
		var c,
		d = [],
		e = function (a, b) {
			b = ea.isFunction(b) ? b() : null == b ? "" : b,
			d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
		};
		if (void 0 === b && (b = ea.ajaxSettings && ea.ajaxSettings.traditional), ea.isArray(a) || a.jquery && !ea.isPlainObject(a))
			ea.each(a, function () {
				e(this.name, this.value)
			});
		else
			for (c in a)
				S(c, a[c], b, e);
		return d.join("&").replace(Tb, "+")
	},
	ea.fn.extend({
		serialize: function () {
			return ea.param(this.serializeArray())
		},
		serializeArray: function () {
			return this.map(function () {
				var a = ea.prop(this, "elements");
				return a ? ea.makeArray(a) : this
			}).filter(function () {
				var a = this.type;
				return this.name && !ea(this).is(":disabled") && Xb.test(this.nodeName) && !Wb.test(a) && (this.checked || !Ea.test(a))
			}).map(function (a, b) {
				var c = ea(this).val();
				return null == c ? null : ea.isArray(c) ? ea.map(c, function (a) {
					return {
						name: b.name,
						value: a.replace(Vb, "\r\n")
					}
				}) : {
					name: b.name,
					value: c.replace(Vb, "\r\n")
				}
			}).get()
		}
	}),
	ea.ajaxSettings.xhr = void 0 !== a.ActiveXObject ? function () {
		return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && T() || U()
	}
	 : T;
	var Yb = 0,
	Zb = {},
	$b = ea.ajaxSettings.xhr();
	a.ActiveXObject && ea(a).on("unload", function () {
		for (var a in Zb)
			Zb[a](void 0, !0)
	}),
	ca.cors = !!$b && "withCredentials" in $b,
	$b = ca.ajax = !!$b,
	$b && ea.ajaxTransport(function (a) {
		if (!a.crossDomain || ca.cors) {
			var b;
			return {
				send: function (c, d) {
					var e,
					f = a.xhr(),
					g = ++Yb;
					if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
						for (e in a.xhrFields)
							f[e] = a.xhrFields[e];
					a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType),
					a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
					for (e in c)
						void 0 !== c[e] && f.setRequestHeader(e, c[e] + "");
					f.send(a.hasContent && a.data || null),
					b = function (c, e) {
						var h,
						i,
						j;
						if (b && (e || 4 === f.readyState))
							if (delete Zb[g], b = void 0, f.onreadystatechange = ea.noop, e)
								4 !== f.readyState && f.abort();
							else {
								j = {},
								h = f.status,
								"string" == typeof f.responseText && (j.text = f.responseText);
								try {
									i = f.statusText
								} catch (a) {
									i = ""
								}
								h || !a.isLocal || a.crossDomain ? 1223 === h && (h = 204) : h = j.text ? 200 : 404
							}
						j && d(h, i, j, f.getAllResponseHeaders())
					},
					a.async ? 4 === f.readyState ? setTimeout(b) : f.onreadystatechange = Zb[g] = b : b()
				},
				abort: function () {
					b && b(void 0, !0)
				}
			}
		}
	}),
	ea.ajaxSetup({
		accepts: {
			script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
		},
		contents: {
			script: /(?:java|ecma)script/
		},
		converters: {
			"text script": function (a) {
				return ea.globalEval(a),
				a
			}
		}
	}),
	ea.ajaxPrefilter("script", function (a) {
		void 0 === a.cache && (a.cache = !1),
		a.crossDomain && (a.type = "GET", a.global = !1)
	}),
	ea.ajaxTransport("script", function (a) {
		if (a.crossDomain) {
			var b,
			c = oa.head || ea("head")[0] || oa.documentElement;
			return {
				send: function (d, e) {
					b = oa.createElement("script"),
					b.async = !0,
					a.scriptCharset && (b.charset = a.scriptCharset),
					b.src = a.url,
					b.onload = b.onreadystatechange = function (a, c) {
						(c || !b.readyState || /loaded|complete/.test(b.readyState)) && (b.onload = b.onreadystatechange = null, b.parentNode && b.parentNode.removeChild(b), b = null, c || e(200, "success"))
					},
					c.insertBefore(b, c.firstChild)
				},
				abort: function () {
					b && b.onload(void 0, !0)
				}
			}
		}
	});
	var _b = [],
	ac = /(=)\?(?=&|$)|\?\?/;
	ea.ajaxSetup({
		jsonp: "callback",
		jsonpCallback: function () {
			var a = _b.pop() || ea.expando + "_" + Eb++;
			return this[a] = !0,
			a
		}
	}),
	ea.ajaxPrefilter("json jsonp", function (b, c, d) {
		var e,
		f,
		g,
		h = b.jsonp !== !1 && (ac.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && ac.test(b.data) && "data");
		if (h || "jsonp" === b.dataTypes[0])
			return e = b.jsonpCallback = ea.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(ac, "$1" + e) : b.jsonp !== !1 && (b.url += (Fb.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), b.converters["script json"] = function () {
				return g || ea.error(e + " was not called"),
				g[0]
			},
		b.dataTypes[0] = "json",
		f = a[e],
		a[e] = function () {
			g = arguments
		},
		d.always(function () {
			a[e] = f,
			b[e] && (b.jsonpCallback = c.jsonpCallback, _b.push(e)),
			g && ea.isFunction(f) && f(g[0]),
			g = f = void 0
		}),
		"script"
	}),
	ea.parseHTML = function (a, b, c) {
		if (!a || "string" != typeof a)
			return null;
		"boolean" == typeof b && (c = b, b = !1),
		b = b || oa;
		var d = la.exec(a),
		e = !c && [];
		return d ? [b.createElement(d[1])] : (d = ea.buildFragment([a], b, e), e && e.length && ea(e).remove(), ea.merge([], d.childNodes))
	};
	var bc = ea.fn.load;
	ea.fn.load = function (a, b, c) {
		if ("string" != typeof a && bc)
			return bc.apply(this, arguments);
		var d,
		e,
		f,
		g = this,
		h = a.indexOf(" ");
		return h >= 0 && (d = ea.trim(a.slice(h, a.length)), a = a.slice(0, h)),
		ea.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (f = "POST"),
		g.length > 0 && ea.ajax({
			url: a,
			type: f,
			dataType: "html",
			data: b
		}).done(function (a) {
			e = arguments,
			g.html(d ? ea("<div>").append(ea.parseHTML(a)).find(d) : a)
		}).complete(c && function (a, b) {
			g.each(c, e || [a.responseText, b, a])
		}),
		this
	},
	ea.expr.filters.animated = function (a) {
		return ea.grep(ea.timers, function (b) {
			return a === b.elem
		}).length
	};
	var cc = a.document.documentElement;
	ea.offset = {
		setOffset: function (a, b, c) {
			var d,
			e,
			f,
			g,
			h,
			i,
			j,
			k = ea.css(a, "position"),
			l = ea(a),
			m = {};
			"static" === k && (a.style.position = "relative"),
			h = l.offset(),
			f = ea.css(a, "top"),
			i = ea.css(a, "left"),
			j = ("absolute" === k || "fixed" === k) && ea.inArray("auto", [f, i]) > -1,
			j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0),
			ea.isFunction(b) && (b = b.call(a, c, h)),
			null != b.top && (m.top = b.top - h.top + g),
			null != b.left && (m.left = b.left - h.left + e),
			"using" in b ? b.using.call(a, m) : l.css(m)
		}
	},
	ea.fn.extend({
		offset: function (a) {
			if (arguments.length)
				return void 0 === a ? this : this.each(function (b) {
					ea.offset.setOffset(this, a, b)
				});
			var b,
			c,
			d = {
				top: 0,
				left: 0
			},
			e = this[0],
			f = e && e.ownerDocument;
			if (f)
				return b = f.documentElement, ea.contains(b, e) ? (typeof e.getBoundingClientRect !== xa && (d = e.getBoundingClientRect()), c = V(f), {
					top: d.top + (c.pageYOffset || b.scrollTop) - (b.clientTop || 0),
					left: d.left + (c.pageXOffset || b.scrollLeft) - (b.clientLeft || 0)
				}) : d
		},
		position: function () {
			if (this[0]) {
				var a,
				b,
				c = {
					top: 0,
					left: 0
				},
				d = this[0];
				return "fixed" === ea.css(d, "position") ? b = d.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), ea.nodeName(a[0], "html") || (c = a.offset()), c.top += ea.css(a[0], "borderTopWidth", !0), c.left += ea.css(a[0], "borderLeftWidth", !0)), {
					top: b.top - c.top - ea.css(d, "marginTop", !0),
					left: b.left - c.left - ea.css(d, "marginLeft", !0)
				}
			}
		},
		offsetParent: function () {
			return this.map(function () {
				for (var a = this.offsetParent || cc; a && !ea.nodeName(a, "html") && "static" === ea.css(a, "position"); )
					a = a.offsetParent;
				return a || cc
			})
		}
	}),
	ea.each({
		scrollLeft: "pageXOffset",
		scrollTop: "pageYOffset"
	}, function (a, b) {
		var c = /Y/.test(b);
		ea.fn[a] = function (d) {
			return Da(this, function (a, d, e) {
				var f = V(a);
				return void 0 === e ? f ? b in f ? f[b] : f.document.documentElement[d] : a[d] : void(f ? f.scrollTo(c ? ea(f).scrollLeft() : e, c ? e : ea(f).scrollTop()) : a[d] = e)
			}, a, d, arguments.length, null)
		}
	}),
	ea.each(["top", "left"], function (a, b) {
		ea.cssHooks[b] = A(ca.pixelPosition, function (a, c) {
				if (c)
					return c = bb(a, b), db.test(c) ? ea(a).position()[b] + "px" : c
			})
	}),
	ea.each({
		Height: "height",
		Width: "width"
	}, function (a, b) {
		ea.each({
			padding: "inner" + a,
			content: b,
			"": "outer" + a
		}, function (c, d) {
			ea.fn[d] = function (d, e) {
				var f = arguments.length && (c || "boolean" != typeof d),
				g = c || (d === !0 || e === !0 ? "margin" : "border");
				return Da(this, function (b, c, d) {
					var e;
					return ea.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? ea.css(b, c, g) : ea.style(b, c, d, g);
				}, b, f ? d : void 0, f, null)
			}
		})
	}),
	ea.fn.size = function () {
		return this.length
	},
	ea.fn.andSelf = ea.fn.addBack,
	"function" == typeof define && define.amd && define("jquery", [], function () {
		return ea
	});
	var dc = a.jQuery,
	ec = a.$;
	return ea.noConflict = function (b) {
		return a.$ === ea && (a.$ = ec),
		b && a.jQuery === ea && (a.jQuery = dc),
		ea
	},
	typeof b === xa && (a.jQuery = a.$ = ea),
	ea
}), function (a) {
	function b(a, b) {
		var c = Math.max(0, a[0] - b[0], b[0] - a[1]),
		d = Math.max(0, a[2] - b[1], b[1] - a[3]);
		return c + d
	}
	function c(b, c, d, e) {
		var f = b.length,
		g = e ? "offset" : "position";
		for (d = d || 0; f--; ) {
			var h = b[f].el ? b[f].el : a(b[f]),
			i = h[g]();
			i.left += parseInt(h.css("margin-left"), 10),
			i.top += parseInt(h.css("margin-top"), 10),
			c[f] = [i.left - d, i.left + h.outerWidth() + d, i.top - d, i.top + h.outerHeight() + d]
		}
	}
	function d(a, b) {
		var c = b.offset();
		return {
			left: a.left - c.left,
			top: a.top - c.top
		}
	}
	function e(a, c, d) {
		c = [c.left, c.top],
		d = d && [d.left, d.top];
		for (var e, f = a.length, g = []; f--; )
			e = a[f], g[f] = [f, b(e, c), d && b(e, d)];
		return g = g.sort(function (a, b) {
				return b[1] - a[1] || b[2] - a[2] || b[0] - a[0]
			})
	}
	function f(b) {
		this.options = a.extend({}, k, b),
		this.containers = [],
		this.options.parentContainer || (this.scrollProxy = a.proxy(this.scroll, this), this.dragProxy = a.proxy(this.drag, this), this.dropProxy = a.proxy(this.drop, this), this.placeholder = a(this.options.placeholder), b.isValidTarget || (this.options.isValidTarget = void 0))
	}
	function g(b, c) {
		this.el = b,
		this.options = a.extend({}, j, c),
		this.group = f.get(this.options),
		this.rootGroup = this.options.rootGroup || this.group,
		this.parentContainer = this.options.parentContainer,
		this.handle = this.rootGroup.options.handle || this.rootGroup.options.itemSelector;
		var d = this.rootGroup.options.itemPath,
		e = d ? this.el.find(d) : this.el;
		e.on(h.start, this.handle, a.proxy(this.dragInit, this)),
		this.options.drop && this.group.containers.push(this)
	}
	var h,
	i = "sortable",
	j = {
		drag: !0,
		drop: !0,
		exclude: "",
		nested: !0,
		vertical: !0
	},
	k = {
		afterMove: function (a, b, c) {},
		containerPath: "",
		containerSelector: "ol, ul",
		distance: 0,
		delay: 100,
		handle: "",
		itemPath: "",
		itemSelector: "li",
		scroll: !1,
		scrollSensitivity: 40,
		scrollSpeed: 15,
		getScrollEl: function (a, b, c, d) {
			return null
		},
		isValidTarget: function (a, b) {
			return !0
		},
		onCancel: function (a, b, c, d) {},
		onDrag: function (a, b, c, d) {
			a.css(b)
		},
		onDragStart: function (b, c, d, e) {
			b.css({
				height: b.outerHeight(),
				width: b.outerWidth()
			}),
			b.addClass("dragged"),
			a("body").addClass("dragging")
		},
		onDrop: function (b, c, d, e) {
			b.removeClass("dragged").removeAttr("style"),
			a("body").removeClass("dragging")
		},
		onMousedown: function (a, b, c) {
			return c.preventDefault(),
			!0
		},
		placeholder: '<li class="placeholder"/>',
		pullPlaceholder: !0,
		serialize: function (b, c, d) {
			var e = a.extend({}, b.data());
			return d ? c : (c[0] && (e.children = c, delete e.subContainer), delete e.sortable, e)
		},
		tolerance: 0
	},
	l = {},
	m = 0,
	n = {
		left: 0,
		top: 0,
		bottom: 0,
		right: 0
	};
	h = {
		start: "touchstart.sortable mousedown.sortable",
		drop: "touchend.sortable touchcancel.sortable mouseup.sortable",
		drag: "touchmove.sortable mousemove.sortable",
		scroll: "scroll.sortable"
	},
	f.get = function (a) {
		return l[a.group] || (void 0 === a.group && (a.group = m++), l[a.group] = new f(a)),
		l[a.group]
	},
	f.prototype = {
		dragInit: function (b, c) {
			if (this.$document = a(c.el[0].ownerDocument), c.enabled()) {
				if (this.item = a(b.target).closest(this.options.itemSelector), this.itemContainer = c, this.item.is(this.options.exclude) || !this.options.onMousedown(this.item, k.onMousedown, b))
					return;
				this.setPointer(b),
				this.toggleListeners("on")
			} else
				this.toggleListeners("on", ["drop"]);
			this.setupDelayTimer(),
			this.dragInitDone = !0
		},
		drag: function (a) {
			if (!this.dragging) {
				if (!this.distanceMet(a) || !this.delayMet)
					return;
				if (this.options.onDragStart(this.item, this.itemContainer, k.onDragStart, a), this.placeholder.outerHeight(this.item.outerHeight()), this.item.before(this.placeholder), this.options.scroll === !0) {
					var b = this.options.getScrollEl(this.item, this.itemContainer, k.getScrollEl, a);
					b && (this.scrollEl = b[0])
				}
				this.dragging = !0
			}
			if (this.options.scroll) {
				var c,
				e,
				f = this.options,
				g = f.scrollSensitivity,
				h = f.scrollSpeed,
				i = a.clientX,
				j = a.clientY,
				l = 0,
				m = 0;
				this.scrollEl && (c = this.scrollEl, e = this.scrollEl.getBoundingClientRect(), m = (Math.abs(e.right - i) <= g) - (Math.abs(e.left - i) <= g), l = (Math.abs(e.bottom - j) <= g) - (Math.abs(e.top - j) <= g)),
				clearInterval(this.scrollpid),
				c && (this.clearDimensions(), this.scrollpid = setInterval(function () {
							c === window ? window.scrollTo(window.scrollX + m * h, window.scrollY + l * h) : (l && (c.scrollTop += l * h), m && (c.scrollLeft += m * h))
						}, 24))
			}
			this.setPointer(a),
			this.options.onDrag(this.item, d(this.pointer, this.item.offsetParent()), k.onDrag, a);
			var i = a.pageX,
			j = a.pageY,
			n = this.sameResultBox,
			o = this.options.tolerance;
			(!n || n.top - o > j || n.bottom + o < j || n.left - o > i || n.right + o < i) && (this.searchValidTarget() || this.placeholder.detach())
		},
		drop: function (a) {
			this.toggleListeners("off"),
			clearInterval(this.scrollpid),
			this.dragInitDone = !1,
			this.dragging && (this.placeholder.closest("html")[0] ? this.placeholder.before(this.item).detach() : this.options.onCancel(this.item, this.itemContainer, k.onCancel, a), this.options.onDrop(this.item, this.getContainer(this.item), k.onDrop, a), this.clearDimensions(), this.clearOffsetParent(), this.lastAppendedItem = this.sameResultBox = void 0, this.dragging = !1)
		},
		searchValidTarget: function (a, b) {
			a || (a = this.relativePointer || this.pointer, b = this.lastRelativePointer || this.lastPointer);
			for (var c = e(this.getContainerDimensions(), a, b), f = c.length; f--; ) {
				var g = c[f][0],
				h = c[f][1];
				if (!h || this.options.pullPlaceholder) {
					var i = this.containers[g];
					if (!i.disabled) {
						if (!this.$getOffsetParent()) {
							var j = i.getItemOffsetParent();
							a = d(a, j),
							b = d(b, j)
						}
						if (i.searchValidTarget(a, b))
							return !0
					}
				}
			}
			this.sameResultBox && (this.sameResultBox = void 0)
		},
		movePlaceholder: function (a, b, c, d) {
			var e = this.lastAppendedItem;
			!d && e && e[0] === b[0] || (b[c](this.placeholder), this.lastAppendedItem = b, this.sameResultBox = d, this.options.afterMove(this.placeholder, a, b))
		},
		getContainerDimensions: function () {
			return this.containerDimensions || c(this.containers, this.containerDimensions = [], this.options.tolerance, !this.$getOffsetParent()),
			this.containerDimensions
		},
		getContainer: function (a) {
			return a.closest(this.options.containerSelector).data(i)
		},
		$getOffsetParent: function () {
			if (void 0 === this.offsetParent) {
				var a = this.containers.length - 1,
				b = this.containers[a].getItemOffsetParent();
				if (!this.options.parentContainer)
					for (; a--; )
						if (b[0] != this.containers[a].getItemOffsetParent()[0]) {
							b = !1;
							break
						}
				this.offsetParent = b
			}
			return this.offsetParent
		},
		setPointer: function (a) {
			var b = {
				left: a.pageX,
				top: a.pageY
			};
			if (this.$getOffsetParent()) {
				var c = d(b, this.$getOffsetParent());
				this.lastRelativePointer = this.relativePointer,
				this.relativePointer = c
			}
			this.lastPointer = this.pointer,
			this.pointer = b
		},
		distanceMet: function (a) {
			return Math.max(Math.abs(this.pointer.left - a.pageX), Math.abs(this.pointer.top - a.pageY)) >= this.options.distance
		},
		setupDelayTimer: function () {
			var a = this;
			this.delayMet = !this.options.delay,
			this.delayMet || (clearTimeout(this._mouseDelayTimer), this._mouseDelayTimer = setTimeout(function () {
						a.delayMet = !0
					}, this.options.delay))
		},
		scroll: function (a) {
			this.clearDimensions(),
			this.clearOffsetParent()
		},
		toggleListeners: function (b, c) {
			var d = this;
			c = c || ["drag", "drop", "scroll"],
			a.each(c, function (a, c) {
				d.$document[b](h[c], d[c + "Proxy"])
			})
		},
		clearOffsetParent: function () {
			this.offsetParent = void 0
		},
		clearDimensions: function () {
			this.containerDimensions = void 0;
			for (var a = this.containers.length; a--; )
				this.containers[a].clearDimensions()
		},
		destroy: function () {
			l[this.options.group] = void 0
		}
	},
	g.prototype = {
		dragInit: function (a) {
			var b = this.rootGroup;
			!b.dragInitDone && 1 === a.which && this.options.drag && b.dragInit(a, this)
		},
		searchValidTarget: function (a, b) {
			var c = e(this.getItemDimensions(), a, b),
			d = c.length,
			f = this.rootGroup,
			g = !f.options.isValidTarget || f.options.isValidTarget(f.item, this);
			if (!d && g) {
				var h = this.rootGroup.options.itemPath,
				i = h ? this.el.find(h) : this.el;
				return f.movePlaceholder(this, i, "append"),
				!0
			}
			for (; d--; ) {
				var j = c[d][0],
				k = c[d][1];
				if (!k && this.hasChildGroup(j)) {
					var l = this.getContainerGroup(j).searchValidTarget(a, b);
					if (l)
						return !0
				} else if (g)
					return this.movePlaceholder(j, a), !0
			}
		},
		movePlaceholder: function (b, c) {
			var d = a(this.items[b]),
			e = this.itemDimensions[b],
			f = "after",
			g = d.outerWidth(),
			h = d.outerHeight(),
			i = d.offset(),
			j = {
				left: i.left,
				right: i.left + g,
				top: i.top,
				bottom: i.top + h
			};
			if (this.options.vertical) {
				var k = (e[2] + e[3]) / 2,
				l = c.top <= k;
				l ? (f = "before", j.bottom -= h / 2) : j.top += h / 2
			} else {
				var m = (e[0] + e[1]) / 2,
				o = c.left <= m;
				o ? (f = "before", j.right -= g / 2) : j.left += g / 2
			}
			this.hasChildGroup(b) && (j = n),
			this.rootGroup.movePlaceholder(this, d, f, j)
		},
		getItemDimensions: function () {
			return this.itemDimensions || (this.items = this.$getChildren(this.el, "item").filter(":not(.placeholder, .dragged)").get(), c(this.items, this.itemDimensions = [], this.options.tolerance)),
			this.itemDimensions
		},
		getItemOffsetParent: function () {
			var a,
			b = this.el;
			return a = "relative" === b.css("position") || "absolute" === b.css("position") || "fixed" === b.css("position") ? b : b.offsetParent()
		},
		hasChildGroup: function (a) {
			return this.options.nested && this.getContainerGroup(a)
		},
		getContainerGroup: function (b) {
			var c = a.data(this.items[b], "subContainer");
			if (void 0 === c) {
				var d = this.$getChildren(this.items[b], "container");
				if (c = !1, d[0]) {
					var e = a.extend({}, this.options, {
							parentContainer: this,
							rootGroup: this.rootGroup,
							group: m++
						});
					c = d[i](e).data(i).group
				}
				a.data(this.items[b], "subContainer", c)
			}
			return c
		},
		enabled: function () {
			return !this.disabled && (!this.parentContainer || this.parentContainer.enabled())
		},
		$getChildren: function (b, c) {
			var d = this.rootGroup.options,
			e = d[c + "Path"],
			f = d[c + "Selector"];
			return b = a(b),
			e && (b = b.find(e)),
			b.children(f)
		},
		_serialize: function (b, c) {
			var d = this,
			e = c ? "item" : "container",
			f = this.$getChildren(b, e).not(this.options.exclude).map(function () {
					return d._serialize(a(this), !c)
				}).get();
			return this.rootGroup.options.serialize(b, f, c)
		},
		clearDimensions: function () {
			if (this.itemDimensions = void 0, this.items && this.items[0])
				for (var b = this.items.length; b--; ) {
					var c = a.data(this.items[b], "subContainer");
					c && c.clearDimensions()
				}
		}
	};
	var o = {
		enable: function (a) {
			this.disabled = !1
		},
		disable: function (a) {
			this.disabled = !0
		},
		serialize: function () {
			return this._serialize(this.el, !0)
		},
		destroy: function () {
			this.rootGroup.destroy()
		}
	};
	a.extend(g.prototype, o),
	a.fn[i] = function (b) {
		var c = Array.prototype.slice.call(arguments, 1);
		return this.map(function () {
			var d = a(this),
			e = d.data(i);
			return e && o[b] ? o[b].apply(e, c) || this : (e || void 0 !== b && "object" != typeof b || d.data(i, new g(d, b)), this)
		})
	}
}
(jQuery), function (a) {
	function b(b) {
		a(b).addClass("droppable"),
		a(b).bind("_dragenter", function (c, d) {
			a.data(b, "droppable").options.onDragEnter.apply(b, [c, d])
		}),
		a(b).bind("_dragleave", function (c, d) {
			a.data(b, "droppable").options.onDragLeave.apply(b, [c, d])
		}),
		a(b).bind("_dragover", function (c, d) {
			a.data(b, "droppable").options.onDragOver.apply(b, [c, d])
		}),
		a(b).bind("_drop", function (c, d) {
			a.data(b, "droppable").options.onDrop.apply(b, [c, d])
		})
	}
	a.fn.droppable = function (c, d) {
		return "string" == typeof c ? a.fn.droppable.methods[c](this, d) : (c = c || {}, this.each(function () {
				var d = a.data(this, "droppable");
				d ? a.extend(d.options, c) : (b(this), a.data(this, "droppable", {
						options: a.extend({}, a.fn.droppable.defaults, c)
					}))
			}))
	},
	a.fn.droppable.methods = {
		options: function (b) {
			return a.data(b[0], "droppable").options
		},
		enable: function (b) {
			return b.each(function () {
				a(this).droppable({
					disabled: !1
				})
			})
		},
		disable: function (b) {
			return b.each(function () {
				a(this).droppable({
					disabled: !0
				})
			})
		}
	},
	a.fn.droppable.defaults = {
		accept: null,
		disabled: !1,
		onDragEnter: function (a, b) {},
		onDragOver: function (a, b) {},
		onDragLeave: function (a, b) {},
		onDrop: function (a, b) {}
	}
}
(jQuery), function (a) {
	function b(b) {
		var c = a.data(b.data.target, "draggable"),
		d = c.options,
		e = c.proxy,
		f = b.data,
		g = f.startLeft + b.pageX - f.startX,
		h = f.startTop + b.pageY - f.startY;
		e && (e.parent()[0] == document.body ? (g = null != d.deltaX && void 0 != d.deltaX ? b.pageX + d.deltaX : b.pageX - b.data.offsetWidth, h = null != d.deltaY && void 0 != d.deltaY ? b.pageY + d.deltaY : b.pageY - b.data.offsetHeight) : (null != d.deltaX && void 0 != d.deltaX && (g += b.data.offsetWidth + d.deltaX), null != d.deltaY && void 0 != d.deltaY && (h += b.data.offsetHeight + d.deltaY))),
		b.data.parent != document.body && (g += a(b.data.parent).scrollLeft(), h += a(b.data.parent).scrollTop()),
		"h" == d.axis ? f.left = g : "v" == d.axis ? f.top = h : (f.left = g, f.top = h)
	}
	function c(b) {
		var c = a.data(b.data.target, "draggable"),
		d = c.options,
		e = c.proxy;
		e || (e = a(b.data.target)),
		e.css({
			left: b.data.left,
			top: b.data.top
		}),
		a("body").css("cursor", d.cursor)
	}
	function d(d) {
		a.fn.draggable.isDragging = !0;
		var e = a.data(d.data.target, "draggable"),
		f = e.options,
		g = a(".droppable").filter(function () {
				return d.data.target != this
			}).filter(function () {
				var b = a.data(this, "droppable").options.accept;
				return !b || a(b).filter(function () {
					return this == d.data.target
				}).length > 0
			});
		e.droppables = g;
		var h = e.proxy;
		return h || (f.proxy ? (h = "clone" == f.proxy ? a(d.data.target).clone().insertAfter(d.data.target) : f.proxy.call(d.data.target, d.data.target), e.proxy = h) : h = a(d.data.target)),
		h.css("position", "absolute"),
		b(d),
		c(d),
		f.onStartDrag.call(d.data.target, d),
		!1
	}
	function e(d) {
		var e = a.data(d.data.target, "draggable");
		b(d),
		0 != e.options.onDrag.call(d.data.target, d) && c(d);
		var f = d.data.target;
		return e.droppables.each(function () {
			var b = a(this);
			if (!b.droppable("options").disabled) {
				var c = b.offset();
				d.pageX > c.left && d.pageX < c.left + b.outerWidth() && d.pageY > c.top && d.pageY < c.top + b.outerHeight() ? (this.entered || (a(this).trigger("_dragenter", [f]), this.entered = !0), a(this).trigger("_dragover", [f])) : this.entered && (a(this).trigger("_dragleave", [f]), this.entered = !1)
			}
		}),
		!1
	}
	function f(b) {
		function c() {
			g && g.remove(),
			f.proxy = null
		}
		function d() {
			var d = !1;
			return f.droppables.each(function () {
				var e = a(this);
				if (!e.droppable("options").disabled) {
					var f = e.offset();
					return b.pageX > f.left && b.pageX < f.left + e.outerWidth() && b.pageY > f.top && b.pageY < f.top + e.outerHeight() ? (h.revert && a(b.data.target).css({
							position: b.data.startPosition,
							left: b.data.startLeft,
							top: b.data.startTop
						}), a(this).trigger("_drop", [b.data.target]), c(), d = !0, this.entered = !1, !1) : void 0
				}
			}),
			d || h.revert || c(),
			d
		}
		a.fn.draggable.isDragging = !1,
		e(b);
		var f = a.data(b.data.target, "draggable"),
		g = f.proxy,
		h = f.options;
		if (h.revert)
			if (1 == d())
				a(b.data.target).css({
					position: b.data.startPosition,
					left: b.data.startLeft,
					top: b.data.startTop
				});
			else if (g) {
				var i,
				j;
				g.parent()[0] == document.body ? (i = b.data.startX - b.data.offsetWidth, j = b.data.startY - b.data.offsetHeight) : (i = b.data.startLeft, j = b.data.startTop),
				g.animate({
					left: i,
					top: j
				}, function () {
					c()
				})
			} else
				a(b.data.target).animate({
					left: b.data.startLeft,
					top: b.data.startTop
				}, function () {
					a(b.data.target).css("position", b.data.startPosition)
				});
		else
			a(b.data.target).css({
				position: "absolute",
				left: b.data.left,
				top: b.data.top
			}), d();
		return h.onStopDrag.call(b.data.target, b),
		a(document).unbind(".draggable"),
		setTimeout(function () {
			a("body").css("cursor", "")
		}, 100),
		!1
	}
	a.fn.draggable = function (b, c) {
		return "string" == typeof b ? a.fn.draggable.methods[b](this, c) : this.each(function () {
			function c(b) {
				var c = a.data(b.data.target, "draggable"),
				d = c.handle,
				e = a(d).offset(),
				f = a(d).outerWidth(),
				g = a(d).outerHeight(),
				h = b.pageY - e.top,
				i = e.left + f - b.pageX,
				j = e.top + g - b.pageY,
				k = b.pageX - e.left;
				return Math.min(h, i, j, k) > c.options.edge
			}
			var g,
			h = a.data(this, "draggable");
			h ? (h.handle.unbind(".draggable"), g = a.extend(h.options, b)) : g = a.extend({}, a.fn.draggable.defaults, b || {});
			var i = g.handle ? "string" == typeof g.handle ? a(g.handle, this) : g.handle : a(this);
			return a.data(this, "draggable", {
				options: g,
				handle: i
			}),
			g.disabled ? void a(this).css("cursor", "") : void i.unbind(".draggable").bind("mousemove.draggable", {
				target: this
			}, function (b) {
				if (!a.fn.draggable.isDragging) {
					var d = a.data(b.data.target, "draggable").options;
					c(b) ? a(this).css("cursor", d.cursor) : a(this).css("cursor", "")
				}
			}).bind("mouseleave.draggable", {
				target: this
			}, function (b) {
				a(this).css("cursor", "")
			}).bind("mousedown.draggable", {
				target: this
			}, function (b) {
				if (0 != c(b)) {
					a(this).css("cursor", "");
					var g = a(b.data.target).position(),
					h = a(b.data.target).offset(),
					i = {
						startPosition: a(b.data.target).css("position"),
						startLeft: g.left,
						startTop: g.top,
						left: g.left,
						top: g.top,
						startX: b.pageX,
						startY: b.pageY,
						offsetWidth: b.pageX - h.left,
						offsetHeight: b.pageY - h.top,
						target: b.data.target,
						parent: a(b.data.target).parent()[0]
					};
					a.extend(b.data, i);
					var j = a.data(b.data.target, "draggable").options;
					0 != j.onBeforeDrag.call(b.data.target, b) && (a(document).bind("mousedown.draggable", b.data, d), a(document).bind("mousemove.draggable", b.data, e), a(document).bind("mouseup.draggable", b.data, f))
				}
			})
		})
	},
	a.fn.draggable.methods = {
		options: function (b) {
			return a.data(b[0], "draggable").options
		},
		proxy: function (b) {
			return a.data(b[0], "draggable").proxy
		},
		enable: function (b) {
			return b.each(function () {
				a(this).draggable({
					disabled: !1
				})
			})
		},
		disable: function (b) {
			return b.each(function () {
				a(this).draggable({
					disabled: !0
				})
			})
		}
	},
	a.fn.draggable.defaults = {
		proxy: null,
		revert: !1,
		cursor: "move",
		deltaX: null,
		deltaY: null,
		handle: null,
		disabled: !1,
		edge: 0,
		axis: null,
		onBeforeDrag: function (a) {},
		onStartDrag: function (a) {},
		onDrag: function (a) {},
		onStopDrag: function (a) {}
	},
	a.fn.draggable.isDragging = !1
}
(jQuery), function (a) {
	a.fn.resizable = function (b, c) {
		function d(b) {
			var c = b.data,
			d = a.data(c.target, "resizable").options;
			if (c.dir.indexOf("e") != -1) {
				var e = c.startWidth + b.pageX - c.startX;
				e = Math.min(Math.max(e, d.minWidth), d.maxWidth),
				c.width = e
			}
			if (c.dir.indexOf("s") != -1) {
				var f = c.startHeight + b.pageY - c.startY;
				f = Math.min(Math.max(f, d.minHeight), d.maxHeight),
				c.height = f
			}
			if (c.dir.indexOf("w") != -1) {
				var e = c.startWidth - b.pageX + c.startX;
				e = Math.min(Math.max(e, d.minWidth), d.maxWidth),
				c.width = e,
				c.left = c.startLeft + c.startWidth - c.width
			}
			if (c.dir.indexOf("n") != -1) {
				var f = c.startHeight - b.pageY + c.startY;
				f = Math.min(Math.max(f, d.minHeight), d.maxHeight),
				c.height = f,
				c.top = c.startTop + c.startHeight - c.height
			}
		}
		function e(b) {
			var c = b.data,
			d = a(c.target);
			d.css({
				left: c.left,
				top: c.top
			}),
			d.outerWidth() != c.width && d._outerWidth(c.width),
			d.outerHeight() != c.height && d._outerHeight(c.height)
		}
		function f(b) {
			return a.fn.resizable.isResizing = !0,
			a.data(b.data.target, "resizable").options.onStartResize.call(b.data.target, b),
			!1
		}
		function g(b) {
			return d(b),
			a.data(b.data.target, "resizable").options.onResize.call(b.data.target, b) !== !1 && e(b),
			!1
		}
		function h(b) {
			return a.fn.resizable.isResizing = !1,
			d(b, !0),
			e(b),
			a.data(b.data.target, "resizable").options.onStopResize.call(b.data.target, b),
			a(document).unbind(".resizable"),
			a("body").css("cursor", ""),
			!1
		}
		return "string" == typeof b ? a.fn.resizable.methods[b](this, c) : this.each(function () {
			function c(b) {
				var c = a(b.data.target),
				e = "",
				f = c.offset(),
				g = c.outerWidth(),
				h = c.outerHeight(),
				i = d.edge;
				b.pageY > f.top && b.pageY < f.top + i ? e += "n" : b.pageY < f.top + h && b.pageY > f.top + h - i && (e += "s"),
				b.pageX > f.left && b.pageX < f.left + i ? e += "w" : b.pageX < f.left + g && b.pageX > f.left + g - i && (e += "e");
				for (var j = d.handles.split(","), k = 0; k < j.length; k++) {
					var l = j[k].replace(/(^\s*)|(\s*$)/g, "");
					if ("all" == l || l == e)
						return e
				}
				return ""
			}
			var d = null,
			e = a.data(this, "resizable");
			e ? (a(this).unbind(".resizable"), d = a.extend(e.options, b || {})) : (d = a.extend({}, a.fn.resizable.defaults, b || {}), a.data(this, "resizable", {
					options: d
				})),
			d.disabled !== !0 && a(this).bind("mousemove.resizable", {
				target: this
			}, function (b) {
				if (!a.fn.resizable.isResizing) {
					var d = c(b);
					"" == d ? a(b.data.target).css("cursor", "") : a(b.data.target).css("cursor", d + "-resize")
				}
			}).bind("mouseleave.resizable", {
				target: this
			}, function (b) {
				a(b.data.target).css("cursor", "")
			}).bind("mousedown.resizable", {
				target: this
			}, function (b) {
				function d(c) {
					var d = parseInt(a(b.data.target).css(c));
					return isNaN(d) ? 0 : d
				}
				var e = c(b);
				if ("" != e) {
					var i = {
						target: b.data.target,
						dir: e,
						startLeft: d("left"),
						startTop: d("top"),
						left: d("left"),
						top: d("top"),
						startX: b.pageX,
						startY: b.pageY,
						startWidth: a(b.data.target).outerWidth(),
						startHeight: a(b.data.target).outerHeight(),
						width: a(b.data.target).outerWidth(),
						height: a(b.data.target).outerHeight(),
						deltaWidth: a(b.data.target).outerWidth() - a(b.data.target).width(),
						deltaHeight: a(b.data.target).outerHeight() - a(b.data.target).height()
					};
					a(document).bind("mousedown.resizable", i, f),
					a(document).bind("mousemove.resizable", i, g),
					a(document).bind("mouseup.resizable", i, h),
					a("body").css("cursor", e + "-resize")
				}
			})
		})
	},
	a.fn.resizable.methods = {
		options: function (b) {
			return a.data(b[0], "resizable").options
		},
		enable: function (b) {
			return b.each(function () {
				a(this).resizable({
					disabled: !1
				})
			})
		},
		disable: function (b) {
			return b.each(function () {
				a(this).resizable({
					disabled: !0
				})
			})
		}
	},
	a.fn.resizable.defaults = {
		disabled: !1,
		handles: "n, e, s, w, ne, se, sw, nw, all",
		minWidth: 233,
		minHeight: 149,
		maxWidth: 1e4,
		maxHeight: 1e4,
		edge: 5,
		onStartResize: function (a) {},
		onResize: function (a) {},
		onStopResize: function (a) {}
	},
	a.fn.resizable.isResizing = !1
}
(jQuery), function (a) {
	window.FX = window.FX || {};
	var b = {};
	a.shortcut = function (c, d) {
		if (null != b[c])
			throw "shortcut:[" + c + "] has been registered";
		b[c] = d,
		a.extend(d.prototype, {
			xtype: c
		})
	},
	FX.createWidget = function (c) {
		if (c instanceof a)
			return new FX.Widget({
				renderEl: c
			});
		var d = c.type.toLowerCase(),
		e = b[d];
		if (!e)
			throw d + " does not exist";
		return new e(c)
	},
	FX.extend = function (b, c, d) {
		"object" == typeof c && (d = c, c = b, b = function () {
			c.apply(this, arguments)
		});
		var e = function () {},
		f = c.prototype;
		return e.prototype = f,
		b.prototype = new e,
		b.superclass = f,
		a.extend(b.prototype, d),
		b
	},
	FX.STATIC = {
		_st: (new Date).getTime(),
		_ct: (new Date).getTime(),
		zIndex: 8e3,
		Language: "zh",
		num: 0,
		IDBase: new Date - 0,
		CSRF: a('meta[name="csrf-token"]').attr("content"),
		site: window.location.protocol + "//" + window.location.hostname
	}
}
(jQuery), function (a) {
	var b = window._jdy_config || {};
	a.extend(FX, {
		CONFIG: {
			HOST: {
				SITE_HOST: b.site,
				SITE_SHORT_HOST: (b.site || "").replace("www.", ""),
				IMAGE_HOST: "https://images.jiandaoyun.com",
				OSS_IMAGE_HOST: "https://oss-image.jiandaoyun.com",
				HELP_DOC_HOST: "http://doc.jiandaoyun.com",
				TRACK_HOST: "https://track.jiandaoyun.com"
			},
			COOKIE_DOMAIN: b.cookie_domain
		},
		ValueWidgets: {
			text: 1,
			number: 1,
			textarea: 1,
			datetime: 1,
			checkboxgroup: 1,
			radiogroup: 1,
			combo: 1,
			combocheck: 1,
			address: 1,
			image: 1,
			upload: 1,
			subform: 1,
			user: 1,
			usergroup: 1,
			dept: 1,
			deptgroup: 1,
			location: 1,
			linkdata: 1
		},
		ValueTypeMap: {
			text: "string",
			textarea: "string",
			combo: "string",
			radiogroup: "string",
			user: "id",
			combocheck: "array",
			checkboxgroup: "array",
			usergroup: "idarray",
			number: "number",
			datetime: "datetime",
			address: "address",
			location: "address",
			dept: "did",
			deptgroup: "didarray",
			upload: "upload",
			image: "upload"
		},
		USER_ID: {
			CurrentUser: "100000000000000000000001"
		},
		DATA_PREFIX: {
			Aggregate: "2"
		},
		WidgetValueOption: {
			CUSTOM: 0,
			ASYNC: 1,
			RELY: 2,
			FORMULA: 3
		},
		Keys: {
			ENTER: 13,
			BACKSPACE: 8,
			COMMA: 188,
			DELETE: 46,
			DOWN: 40,
			END: 35,
			ESCAPE: 27,
			HOME: 36,
			LEFT: 37,
			PAGE_DOWN: 34,
			PAGE_UP: 33,
			PERIOD: 190,
			RIGHT: 39,
			SPACE: 32,
			TAB: 9,
			UP: 38
		},
		States: {
			NORMAL: 0,
			SUCCESS: 1,
			ERROR: 2,
			WARNING: 3
		},
		EntryAttributes: {
			creator: 1,
			createTime: 1,
			updateTime: 1,
			ext: 1
		},
		Time: {
			excelDayOffset: 25569,
			millisecondsOfDay: 864e5
		},
		TimeZone: {
			defaultOffset: 288e5
		},
		Events: {
			RELY: "x-rely"
		},
		InvisibleSubmitRules: {
			KEEP: 1,
			NULL: 2,
			ALWAYS: 3
		},
		LimitFields: {
			filter: ["text", "radiogroup", "combo", "number", "datetime", "address", "user", "dept"],
			list: ["text", "textarea", "combo", "radiogroup", "checkboxgroup", "combocheck", "number", "datetime", "address", "location", "user", "usergroup", "dept", "deptgroup", "image", "upload", "subform", "linkdata"],
			listJoin: ["text", "combo", "radiogroup", "number", "user", "dept"],
			group: ["text", "radiogroup", "combo", "number", "datetime", "address", "string", "subform", "user", "dept", "id", "location", "linkdata"],
			groupJoin: ["text", "combo", "radiogroup", "number", "user", "datetime", "address", "location", "subform", "linkdata", "dept"],
			validate: ["number", "text", "datetime", "radiogroup", "checkboxgroup", "combo", "combocheck", "user", "usergroup", "linkdata", "dept", "deptgroup", "subform"],
			rely: ["combo", "combocheck", "text", "datetime", "number", "subform", "radiogroup", "checkboxgroup", "user", "linkdata", "dept"],
			link: ["combo", "combocheck", "text", "datetime", "number", "radiogroup", "checkboxgroup", "user", "linkdata", "dept", "deptgroup"],
			brief: ["text", "textarea", "combo", "radiogroup", "combocheck", "checkboxgroup", "number", "datetime", "address", "location", "user", "usergroup", "dept", "deptgroup"],
			import: ["text", "textarea", "combo", "radiogroup", "combocheck", "checkboxgroup", "number", "datetime", "address", "subform"],
			combodata: ["combo", "combocheck", "text", "datetime", "number", "radiogroup", "checkboxgroup"],
			linkData: ["text", "textarea", "combo", "radiogroup", "checkboxgroup", "combocheck", "number", "datetime", "address", "location", "user", "usergroup", "subform"],
			linkKey: ["text", "number", "datetime", "radiogroup", "combo"],
			subLinkData: ["text", "combo", "combocheck", "radiogroup", "checkboxgroup", "number", "datetime", "address", "location"],
			aggregate: ["text", "radiogroup", "combo", "string", "subform", "linkdata"],
			batchEdit: ["number", "text", "textarea", "datetime", "radiogroup", "checkboxgroup", "combo", "combocheck", "address", "user", "usergroup", "dept", "deptgroup"],
			fileExport: ["image", "upload"],
			itemLink: ["combo", "radiogroup"],
			printTemplate: ["text", "textarea", "combo", "radiogroup", "checkboxgroup", "combocheck", "number", "datetime", "address", "location", "user", "usergroup", "dept", "deptgroup", "subform", "linkdata", "flow"],
			excelExport: ["text", "textarea", "combo", "radiogroup", "checkboxgroup", "combocheck", "number", "datetime", "address", "location", "user", "usergroup", "dept", "deptgroup", "subform", "linkdata"]
		},
		Operators: {
			group: ["+", "-", "*", "/", "."],
			aggregate: ["+", "-", "."]
		},
		CONST: {
			WIDGET_LIST: {
				text: {
					name: "",
					changeList: ["combo", "radiogroup"],
					subChangeList: ["combo"]
				},
				radiogroup: {
					name: "",
					changeList: ["combo", "text"]
				},
				combo: {
					name: "",
					changeList: ["radiogroup", "text"],
					subChangeList: ["text"]
				},
				checkboxgroup: {
					name: "",
					changeList: ["combocheck"]
				},
				combocheck: {
					name: "",
					changeList: ["checkboxgroup"]
				},
				number: {
					name: ""
				},
				datetime: {
					name: ""
				},
				address: {
					name: ""
				},
				textarea: {
					name: ""
				},
				image: {
					name: ""
				},
				upload: {
					name: ""
				},
				subform: {
					name: ""
				},
				separator: {
					name: ""
				},
				user: {
					name: ""
				},
				usergroup: {
					name: ""
				},
				location: {
					name: ""
				},
				linkdata: {
					name: ""
				},
				linkquery: {
					name: ""
				},
				dept: {
					name: ""
				},
				deptgroup: {
					name: ""
				}
			},
			APP_CATE_NAME: {
				office: "",
				hr: "",
				crm: "",
				inventory: "",
				store: "",
				production: "",
				universal_other: "",
				logistics: "",
				restaurant: "",
				it: "IT",
				housing: "",
				education: "",
				medicine: "",
				government: "",
				vertical_other: ""
			},
			APP_CATE: {
				OFFICE: "office",
				HR: "hr",
				CRM: "crm",
				INVENTORY: "inventory",
				STORE: "store",
				PRODUCTION: "production",
				UNIVERSAL_OTHER: "universal_other",
				LOGISTICS: "logistics",
				RESTAURANT: "restaurant",
				IT: "it",
				HOUSING: "housing",
				EDUCATION: "education",
				MEDICINE: "medicine",
				GOVERNMENT: "government",
				VERTICAL_OTHER: "vertical_other"
			},
			QN_BUCKET: {
				PUBLIC_IMAGE: "media",
				PRIVATE_FILE: "file"
			},
			OSS_BUCKET: {
				PUBLIC_IMAGE: "oss_image"
			},
			WORKFLOW: {
				NODE_DELIMITER: "@",
				START_FLOW_ID: 0,
				APPROVAL_ALL: 0,
				BACKRULE: {
					DISALLOW: 0,
					PARENT_NODE: 1,
					START_NODE: 2
				},
				FLOWSTATE: {
					INPROCESS: 0,
					COMPLETE: 1
				},
				FLOWTYPE: {
					NORMAL: "flow",
					CC: "cc"
				}
			},
			DEPT_ID: {
				CURRENT: "110000000000000000000001"
			},
			PARAMETER: {
				EMPTY: "fx_param_empty"
			},
			TEXT_TYPE_REGEXP: {
				mobile: "^((\\(\\d{2,3}\\))|(\\d{3}\\-))?1\\d{10}$",
				tel: "^(0[0-9]{2,3}\\-)?([2-9][0-9]{6,7})+(\\-[0-9]{1,4})?$",
				zip: "^\\d{6}$",
				email: "^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$",
				ID: "(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)"
			},
			VIP_ORDER: {
				PACK: {
					free: {
						name: ""
					},
					lite: {
						name: "",
						service: "basic",
						data: 2e5
					},
					std: {
						name: " ",
						service: "silver",
						data: 75e4
					},
					user: {
						name: "",
						service: "silver",
						data: 25e3
					},
					pro: {
						name: "",
						service: "silver",
						data: 2e6
					},
					ent: {
						name: "",
						service: "gold",
						data: 1e7
					},
					logo: {
						name: "LOGO"
					},
					oem: {
						name: ""
					}
				},
				PACK_STATE: {
					TRAIL: 0,
					USING: 1,
					BUFFER: 2,
					EXPIRED: 3
				},
				SERVICE: {
					basic: {
						name: "",
						desc: " "
					},
					silver: {
						name: "",
						desc: "+25003000"
					},
					gold: {
						name: "",
						desc: "+600010000"
					}
				},
				DATA_ADD_UNIT: 1e5,
				USER_ADD_UNIT: 5
			},
			ORDER_STATE: {
				CANCELED: -1,
				UNPAID: 0,
				PAID: 1,
				RECEIPTING: 2,
				RECEIPTED: 3
			},
			FIELD: {
				DELIMITER: "@"
			},
			AUTH_GROUP: {
				SUBMIT: -1,
				VIEW_ALL: -2,
				MANAGE_OWN: -3,
				MANAGE_ALL: -4
			},
			AUTH_GROUP_CONTENT: [{
					groupId: -1,
					name: "",
					desc: " ",
					type: "default"
				}, {
					groupId: -4,
					name: "",
					desc: "",
					type: "default"
				}, {
					groupId: -3,
					name: "",
					desc: "",
					type: "default"
				}, {
					groupId: -2,
					name: "",
					desc: "",
					type: "default"
				}
			],
			APP_STATE: {
				private: 0,
				review: 1,
				onSale: 2
			},
			K12_APPROVE: {
				NOTPASS: -1,
				PASS: 1
			},
			VIP_MODULE: {
				USERS: "users",
				FORM_DATA: "form_data",
				DATA: "data",
				EXCEL_IMPORT: "excel_import",
				SINGLE_FILE: "single_file",
				FILE_UPLOAD: "file_upload",
				AGGREGATE: "aggregate",
				PRINT: "print",
				DATA_BACKUP: "data_backup",
				FILE_ZIP: "file_zip",
				LOGO: "logo",
				USER_SYNC: "user_sync",
				APP_BRIDGE: "app_bridge",
				LEVEL: "level"
			},
			VIP_COOKIE: {
				TRAIL: {
					SUFFIX_KEY: "#tr_time",
					EXPIRES_DATE: new Date((new Date).getTime() + 1296e6)
				},
				SYS_DATA: {
					KEY: "exceed",
					EXPIRES_DATE: new Date((new Date).getTime() + 864e5),
					VALUE: !0
				}
			},
			WPS_TIP: {
				7102: " ",
				7103: " ",
				7104: " ",
				7105: "WPS ",
				7106: "",
				7107: " WPS ",
				7108: "WPS ",
				7109: "WPS ",
				7110: "WPS ",
				7111: " "
			},
			TRACKER: {
				APP_CREATE: "app_create",
				APP_FORK: "app_fork",
				APP_EDIT: "app_edit",
				APP_CONFIG: "app_config",
				APP_REF: "app_ref",
				AUTH_GROUPS: "auth_groups",
				AGGREGATE_TABLE_CREATE: "aggregate_table_create",
				AGGREGATE_TABLE_EDIT: "aggregate_table_edit",
				FORM_CREATE: "form_create",
				FORM_EDIT: "form_edit",
				REPORT_CREATE: "report_create",
				REPORT_EDIT: "report_edit",
				ORDER_LIST: "order_list",
				VIP_CENTER: "vip_center",
				WORKFLOW: "workflow",
				MENU_PACK: "menu_pack",
				VIP_CENTER_PACK: "vip_center_pack",
				MEMBER_LIST: "member_list",
				HELP_DOC: "help_doc",
				HELP_VIDEO: "help_video",
				HELP_CUSTOM: "help_custom",
				TEMP_SEARCH: "temp_search",
				APP_VIEW: "app_view",
				PRINT_CREATE: "print_create",
				FORM_SHARE: "form_share",
				FLOW_FORM_CREATE: "flow_form_create",
				AUTH_GROUP_CREATE: "auth_group_create"
			},
			KEY_CODE: {
				LEFT: 37,
				RIGHT: 39
			},
			ALLIANCE_APPLY_STATE: {
				APPROVED: "approved",
				WAITING: "waiting",
				DENIED: "denied",
				NOT_APPLIED: "not_applied",
				BANNED: "banned"
			}
		}
	})
}
(jQuery), $.extend(FX, {
	PROPERTIES: {
		zh: {
			Sunday: "",
			Monday: "",
			Tuesday: "",
			Wednesday: "",
			Thursday: "",
			Friday: "",
			Saturday: "",
			"Short-Sun": "",
			"Short-Mon": "",
			"Short-Tue": "",
			"Short-Wed": "",
			"Short-Thu": "",
			"Short-Fri": "",
			"Short-Sat": "",
			January: "",
			February: "",
			March: "",
			April: "",
			May: "",
			June: "",
			July: "",
			August: "",
			September: "",
			October: "",
			November: "",
			December: "",
			"Short-Jan": "",
			"Short-Feb": "",
			"Short-Mar": "",
			"Short-Apr": "",
			"Short-May": "",
			"Short-Jun": "",
			"Short-Jul": "",
			"Short-Aug": "",
			"Short-Sep": "",
			"Short-Oct": "",
			"Short-Nov": "",
			"Short-Dec": ""
		},
		en: {
			Sunday: "Sunday",
			Monday: "Monday",
			Tuesday: "Tuesday",
			Wednesday: "Wednesday",
			Thursday: "Thursday",
			Friday: "Friday",
			Saturday: "Saturday",
			"Short-Sun": "Sun",
			"Short-Mon": "Mon",
			"Short-Tue": "Tue",
			"Short-Wed": "Wed",
			"Short-Thu": "Thu",
			"Short-Fri": "Fri",
			"Short-Sat": "Sat",
			January: "January",
			February: "February",
			March: "March",
			April: "April",
			May: "May",
			June: "June",
			July: "July",
			August: "August",
			September: "September",
			October: "October",
			November: "November",
			December: "December",
			"Short-Jan": "Jan",
			"Short-Feb": "Feb",
			"Short-Mar": "Mar",
			"Short-Apr": "Apr",
			"Short-May": "May",
			"Short-Jun": "Jun",
			"Short-Jul": "Jul",
			"Short-Aug": "Aug",
			"Short-Sep": "Sep",
			"Short-Oct": "Oct",
			"Short-Nov": "Nov",
			"Short-Dec": "Dec"
		},
		ja: {}
	},
	i18nText: function (a) {
		return FX.PROPERTIES[FX.STATIC.Language][a]
	}
}), function (a) {
	FX.Utils = FX.Utils || {},
	a.extend(FX.Utils, {
		isString: function (a) {
			return "string" == typeof a
		},
		isNumber: function (b) {
			return a.isNumeric(b)
		},
		isFunction: function (b) {
			return a.isFunction(b)
		},
		isDate: function (a) {
			return a instanceof Date
		},
		isArray: function (b) {
			return a.isArray(b)
		},
		isEmpty: function (a) {
			return "" === a || FX.Utils.isNull(a)
		},
		isBlank: function (a) {
			return FX.Utils.isNull(a) || "" === a.trim()
		},
		isNull: function (a) {
			return null == a
		},
		isObjectEmpty: function (a) {
			if (null == a)
				return !0;
			if (a.length > 0)
				return !1;
			if (0 === a.length)
				return !0;
			for (var b in a)
				if (hasOwnProperty.call(a, b))
					return !1;
			return isNaN(a)
		},
		isValueWidget: function (a) {
			return !!FX.ValueWidgets[a]
		},
		pick: function (a, b) {
			var c = {};
			return FX.Utils.forEach(b, function (b, d) {
				d in a && (c[d] = a[d])
			}),
			c
		},
		applyFunc: function (a, b, c, d) {
			return FX.Utils.isFunction(b) ? b.apply(a, c ? c : []) : d
		},
		forEach: function (a, b) {
			if (Array.isArray(a) || a instanceof jQuery)
				for (var c = 0, d = a.length; c < d && b.apply(a[c], [c, a[c]]) !== !1; c++);
			else if (a && "object" == typeof a)
				for (var e in a)
					if (a.hasOwnProperty(e) && b.apply(a[e], [e, a[e]]) === !1)
						break
		},
		flatten: function (a, b, c) {
			if (c || (c = []), a)
				for (var d = 0, e = a.length; d < e; d++) {
					var f = a[d];
					Array.isArray(f) ? FX.Utils.flatten(f, b, c) : b && !b(f) || c.push(f)
				}
			return c
		},
		applyCss: function (a, b) {
			FX.Utils.isEmpty(b) || (FX.Utils.isString(b) ? a.addClass(b) : a.css(b))
		},
		getServerDate: function (a) {
			if (a && a.getResponseHeader) {
				var b = a.getResponseHeader("date");
				b && (FX.STATIC._st = new Date(b).getTime(), FX.STATIC._ct = (new Date).getTime())
			}
		},
		ajax: function (b, c, d, e) {
			return a.ajax({
				type: "POST",
				beforeSend: function (a) {
					a.setRequestHeader("X-CSRF-Token", FX.STATIC.CSRF);
				},
				url: b.url,
				async: b.async !== !1,
				data: JSON.stringify(b.data),
				contentType: "application/json;charset=UTF-8",
				timeout: b.timeout
			}).done(function (a, b, d) {
				FX.Utils.getServerDate(d),
				c && c(a, b),
				e && e(a, b)
			}).fail(function (a, b, c) {
				switch (a.status) {
				case 400:
					if (FX.Utils.applyFunc(this, d, [a, b], !1) === !1) {
						var f = a.responseJSON || {};
						f.msg ? FX.Msg.toast({
							type: "warning",
							msg: f.msg
						}) : FX.Msg.toast({
							type: "error",
							msg: ""
						})
					}
					break;
				case 401:
					FX.Msg.toast({
						type: "warning",
						msg: ""
					});
					break;
				case 402:
					FX.Msg.toast({
						type: "warning",
						msg: ""
					});
					break;
				case 403:
					FX.Msg.toast({
						type: "warning",
						msg: ""
					});
					break;
				case 404:
					FX.Msg.toast({
						type: "warning",
						msg: ""
					});
					break;
				case 0:
					break;
				default:
					FX.Msg.toast({
						type: "warning",
						msg: ""
					}),
					console && console.log("")
				}
				e && e(a, b)
			})
		},
		ajaxUpload: function (b, c, d, e) {
			a.ajax({
				type: "POST",
				url: b.url,
				data: b.data,
				cache: !1,
				contentType: !1,
				processData: !1,
				beforeSend: function (a) {
					a.setRequestHeader("X-CSRF-Token", FX.STATIC.CSRF)
				},
				xhr: function () {
					var c = a.ajaxSettings.xhr();
					return c.upload && b.onUpload && c.upload.addEventListener("progress", function (a) {
						a.lengthComputable ? b.onUpload(a.loaded, a.total) : b.onUpload(3, 10)
					}, !1),
					c
				}
			}).done(function () {
				c && c.apply(this, arguments),
				e && e.apply(this, arguments)
			}).fail(function () {
				d && d.apply(this, arguments),
				e && e.apply(this, arguments)
			})
		},
		dataAjax: function (a, b, c, d) {
			a.data = a.data || {};
			var e = a.data;
			return FX.Utils.isEmpty(FX.STATIC.APPID) || (e.appId = FX.STATIC.APPID),
			FX.Utils.isEmpty(FX.STATIC.ENTRYID) || (e.entryId = FX.STATIC.ENTRYID),
			FX.Utils.isEmpty(FX.STATIC.DATAID) || (e.dataId = FX.STATIC.DATAID),
			FX.STATIC.BACKUP && (e.isBackup = !0),
			FX.Utils.isEmpty(FX.STATIC.FTOKEN) ? FX.Utils.isEmpty(FX.STATIC.QTOKEN) ? FX.Utils.isEmpty(FX.STATIC.RTOKEN) ? FX.Utils.isEmpty(FX.STATIC.ATOKEN) || (e.fx_access_token = FX.STATIC.ATOKEN, e.fx_access_type = "app_public") : (e.fx_access_token = FX.STATIC.RTOKEN, e.fx_access_type = "report_public") : (e.fx_access_token = FX.STATIC.QTOKEN, e.fx_access_type = "form_query") : (e.fx_access_token = FX.STATIC.FTOKEN, e.fx_access_type = "form_public"),
			FX.Utils.ajax(a, function (a, c) {
				b(a, c)
			}, c, d)
		},
		getUrlParameter: function (a) {
			for (var b = window.location.search.substring(1), c = b.split("&"), d = 0; d < c.length; d++) {
				var e = c[d].split("=");
				if (e[0] == a)
					return e[1]
			}
			return null
		},
		validateEmail: function (a) {
			return /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)
		},
		redirectTo: function (a) {
			window.location.href = a
		},
		isCanvasSupported: function () {
			var a = document.createElement("canvas");
			return !(!a.getContext || !a.getContext("2d"))
		},
		isFormDataSupported: function () {
			return void 0 !== window.FormData
		},
		getFileDownloadURL: function (a, b, c) {
			switch (a.bucket) {
			case FX.CONST.QN_BUCKET.PUBLIC_IMAGE:
				var d = "",
				e = a.thumb;
				return e && (d = "?imageView2/" + e.mode + "/w/" + e.width + "/h/" + e.height),
				b(FX.CONFIG.HOST.IMAGE_HOST + "/" + a.qnKey + d);
			case FX.CONST.OSS_BUCKET.PUBLIC_IMAGE:
				return b(FX.CONFIG.HOST.OSS_IMAGE_HOST + "/" + a.ossKey);
			case FX.CONST.QN_BUCKET.PRIVATE_FILE:
			default:
				if (!FX.STATIC.APPID)
					return c();
				FX.Utils.dataAjax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/file_url",
					data: a
				}, function (a) {
					b(a.url)
				}, function (a) {
					FX.Utils.applyFunc(this, c, [a], !1) === !1 && FX.Msg.toast({
						type: "warning",
						msg: ""
					})
				})
			}
		},
		evalFormula: function (a) {
			var b = [];
			FX.STATIC.FormulaEnv || (FX.Utils.forEach(Object.keys(FX.Formula), function (a, c) {
					b.push("var " + c + "=FX.Formula." + c)
				}), FX.STATIC.FormulaEnv = b.join(";") + ";");
			var c;
			try {
				c = new Function(FX.STATIC.FormulaEnv + "return " + a)()
			} catch (a) {
				c = null
			}
			return c
		},
		createEntryAttributeField: function (b, c) {
			var d = {
				id: c.entryId
			};
			switch (b) {
			case "ext":
				a.extend(d, {
					name: "ext",
					type: "text",
					text: "",
					items: c.extParams
				});
				break;
			case "createTime":
				a.extend(d, {
					name: "createTime",
					type: "datetime",
					format: "yyyy-MM-dd HH:mm:ss",
					text: ""
				});
				break;
			case "updateTime":
				a.extend(d, {
					name: "updateTime",
					type: "datetime",
					format: "yyyy-MM-dd HH:mm:ss",
					text: ""
				});
				break;
			case "creator":
				a.extend(d, {
					name: "creator",
					type: "text",
					text: ""
				});
				break;
			case "flowState":
				a.extend(d, {
					name: "flowState",
					type: "flowState",
					text: ""
				});
				break;
			case "chargers":
				a.extend(d, {
					name: "chargers",
					type: "chargers",
					text: "/"
				});
				break;
			case "deleter":
				a.extend(d, {
					name: "deleter",
					type: "text",
					text: " "
				});
				break;
			case "deleteTime":
				a.extend(d, {
					name: "deleteTime",
					type: "datetime",
					format: "yyyy-MM-dd HH:mm:ss",
					text: " "
				});
				break;
			default:
				return null
			}
			return d
		},
		createWidgetName: function () {
			return "_widget_" + FX.STATIC.IDBase++
		},
		formatFileSize: function (a) {
			return FX.Utils.isNumber(a) ? a >= 1e9 ? (a / 1e9).toFixed(2) + " GB" : a >= 1e6 ? (a / 1e6).toFixed(2) + " MB" : (a / 1e3).toFixed(2) + " KB" : ""
		},
		chunkArray: function (a, b) {
			var c = [];
			if (!b || !a.length)
				return c;
			for (var d = 0, e = a.length; d < e; d += b) {
				var f = a.slice(d, d + b);
				c.push(f)
			}
			return c
		},
		UUID: function (a) {
			return a ? (a ^ 16 * Math.random() >> a / 4).toString(16) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, this.UUID)
		},
		GCD: function (a, b) {
			return b ? this.GCD(b, a % b) : a
		},
		LCM: function (a, b) {
			return a * b / this.GCD(a, b)
		},
		fixDecimalPrecision: function (a, b) {
			var c = "";
			if (b || (b = 8), !this.isEmpty(a)) {
				var d = parseFloat(a);
				if (!isNaN(d)) {
					var e = (d + "").split(".")[1];
					c = e && e.length > b ? parseFloat(d.toFixed(b)) : d,
					b > 6 && Math.abs(c) < 1 && /e-/.test(c + "") && (c = parseFloat(d.toFixed(6)))
				}
			}
			return c
		},
		getSelectionText: function () {
			return window.getSelection ? window.getSelection().toString() : document.selection && document.selection.createRange ? document.selection.createRange().text : ""
		},
		getCorpType: function (a) {
			return a ? (a = a.toLowerCase(), /^ding/.test(a) ? "dingtalk" : /^w/.test(a) ? "wechat" : "internal") : null
		},
		isCorpSuiteAdmin: function (a) {
			return a && ("dingtalk" === a || "wechat" === a)
		},
		getWeekStartDate: function (a) {
			var b = a.getDay();
			return 0 === b && (b = 7),
			new Date(a.getFullYear(), a.getMonth(), a.getDate() - (b - 1))
		},
		getWeekEndDate: function (a) {
			var b = a.getDay();
			return 0 === b && (b = 7),
			new Date(a.getFullYear(), a.getMonth(), a.getDate() + (7 - b))
		},
		getMonthStartDate: function (a) {
			return new Date(a.getFullYear(), a.getMonth(), 1)
		},
		getMonthEndDate: function (a) {
			return new Date(a.getFullYear(), a.getMonth() + 1, 0)
		},
		setPageTitle: function (a) {
			FX.Utils.isEmpty(a) || (document.title = a)
		},
		createMask: function (b, c) {
			var d = a('<div class="x-window-mask"/>'),
			e = c || {};
			if (e.isModal && d.addClass("modal"), e.isLight ? d.addClass("light") : e.isDark && d.addClass("dark"), e.hasLoader) {
				var f = !e.isDark;
				this.createLoadIcon(d, f)
			}
			return b && d.css({
				"z-index": FX.STATIC.zIndex++
			}).appendTo(b),
			d
		},
		createLoadIcon: function (b, c) {
			var d = a('<div class="x-loader-icon"/>').appendTo(b);
			return c && d.addClass("colorful"),
			a("<div/>").appendTo(d),
			d
		},
		doPrint: function (b, c) {
			a("body").children("div").addClass("x-ui-notprint");
			var d = a("#x-printer").removeClass().empty();
			0 === d.length && (d = a('<div id="x-printer"/>').appendTo("body")),
			b && d.append(b),
			c = FX.Utils.isNull(c) ? 0 : c,
			setTimeout(function () {
				window.print()
			}, c)
		},
		cancelPrint: function () {
			a("body").children(".x-ui-notprint").removeClass("x-ui-notprint"),
			a("#x-printer").remove()
		},
		copyToClipboard: function (a, b) {
			if (a && a.length) {
				var c = document.createElement("textarea");
				c.style.background = "transparent",
				c.style.color = "transparent",
				c.value = a,
				document.body.appendChild(c),
				c.select();
				var d;
				try {
					d = document.execCommand("copy")
				} catch (a) {
					d = !1
				}
				document.body.removeChild(c),
				d && FX.Utils.applyFunc(this, b, [], !1)
			}
		},
		getFlowOption: function (a, b) {
			var c = {};
			switch (a.hasPrint && (c.print = {
						text: ""
					}), b) {
			case "todo":
				a.isEditable && a.currentFlowId !== -1 && (c = {
						forward: {
							text: ""
						},
						save: {
							text: ""
						}
					}, a.allowBack && (c.back = {
							text: ""
						}), a.allowClose && (c.close = {
							text: ""
						}), a.hasPrint && (c.print = {
							text: ""
						}), c.comment = a.comment, c.isEditable = !0);
				break;
			case "create":
				a.allowRevoke && (c.revoke = {
						text: ""
					});
				break;
			case "part":
			}
			FX.Utils.isObjectEmpty(c) ? c.hasBtn = !1 : c.hasBtn = !0,
			c.flowState = a.data.flowState,
			c.version = a.data.flowVer,
			c.hasLogView = a.hasLogView,
			c.chargers = a.data.chargers,
			c.transactors = a.data.transactors,
			c.dataId = a.data._id,
			c.ccUsers = a.data.ccUsers;
			var d = [];
			return FX.Utils.isArray(a.flowNodes) && a.flowNodes.length > 0 && (d = a.flowNodes.filter(function (a) {
						return "todo" === b ? "charger" === a.type : "part" === b ? "transactor" === a.type : void 0
					})),
			c.flowId = a.currentFlowId,
			c.printId = a.printId,
			c.flowNodes = d,
			c
		},
		getColorNumber: function (a) {
			return FX.Utils.isEmpty(a) ? 1 : parseInt(a.toString().substring(0, 8), 16) % 6 + 1
		},
		getFieldAttr: function (b, c) {
			if (!FX.Utils.isValueWidget(b.widget.type))
				return null;
			if (c && c.indexOf(b.widget.type) < 0)
				return null;
			var d = {
				id: b.formId,
				text: b.label,
				name: b.widget.widgetName,
				type: b.widget.type
			};
			switch (b.widget.type) {
			case "subform":
				var e = [];
				FX.Utils.forEach(b.widget.items, function (d, f) {
					a.extend(f, {
						formId: b.formId
					});
					var g = FX.Utils.getFieldAttr(f, c);
					g && (a.extend(g, {
							subform: b.widget.widgetName
						}), e.push(g))
				}),
				a.extend(d, {
					items: e
				});
				break;
			case "linkdata":
				a.extend(d, {
					linkForm: b.widget.linkForm,
					linkFields: b.widget.linkFields,
					refAppId: b.widget.refAppId
				});
				break;
			case "combo":
			case "combocheck":
			case "radiogroup":
			case "checkboxgroup":
				a.extend(d, {
					async: b.widget.async,
					items: b.widget.items
				});
				break;
			case "datetime":
				a.extend(d, {
					format: b.widget.format
				})
			}
			return d
		},
		leftPad: function (a, b, c) {
			var d = String(a);
			for (c || (c = " "); d.length < b; )
				d = c + d;
			return d.toString()
		},
		startWith: function (a, b) {
			var c = a.length;
			return !(null == b || "" == b || 0 === c || b.length > c) && a.substr(0, b.length) == b
		},
		getFieldInfoByFormula: function (a) {
			var b = {},
			c = a + "",
			d = c.match(/(\$[0-9a-zA-Z\._]+)(#[0-9a-f]+)?(@[0-9a-f]+)?/),
			e = ["", "field", "entryId", "appId"];
			return FX.Utils.forEach(d, function (a, c) {
				0 !== a && c && (b[e[a]] = c.substr(1))
			}),
			b
		},
		getFieldInfoById: function (a) {
			var b = {};
			a = "#" + a;
			var c = a.match(/(#[0-9a-f]+)(@[0-9a-f]+)?/),
			d = ["", "entryId", "appId"];
			return FX.Utils.forEach(c, function (a, c) {
				0 !== a && c && (b[d[a]] = c.substr(1))
			}),
			b
		},
		getVipTrail: function () {
			FX.STATIC.user.phone ? this.ajax({
				url: "/profile/start_trail"
			}, function (a) {
				FX.Msg.alert({
					type: "success",
					title: "",
					msg: "15",
					text4Ok: "",
					text4Cancel: "",
					onOk: function () {
						var a = FX.Cookie.get(FX.STATIC.user.username + FX.CONST.VIP_COOKIE.TRAIL.SUFFIX_KEY);
						a && (a = a.split(","), 1 === a.length && (a.push(+new Date), FX.Cookie.set(FX.STATIC.user.username + FX.CONST.VIP_COOKIE.TRAIL.SUFFIX_KEY, a.join(","), {
									expires: FX.CONST.VIP_COOKIE.TRAIL.EXPIRES_DATE
								}))),
						window.location.reload()
					}
				})
			}) : (new FX.VipTrailDialog).show()
		},
		isWpsWebView: function () {
			return /wpscloudform/.test(navigator.userAgent)
		},
		callWPSAPI: function (a) {
			var b = "jsAsynCall(" + JSON.stringify(a) + ")";
			window.cefQuery && window.cefQuery({
				request: b
			})
		},
		onWPSPageUnload: function (a, b) {
			a ? FX.Msg.alert({
				type: "warning",
				msg: "",
				text4Ok: "",
				text4Cancel: "",
				onOk: function () {
					FX.Utils.applyFunc(this, b, [], !1)
				}
			}) : FX.Utils.applyFunc(this, b, [], !1)
		},
		fileDownload: function (a, b) {
			if (FX.Utils.isWpsWebView()) {
				var c = {
					method: "downloadUrl",
					url: a,
					filename: b
				},
				d = b && b.split(".").pop();
				c.filter = "(*." + (d || "*") + ")",
				FX.Utils.callWPSAPI(c)
			} else
				FX.Utils.redirectTo(a)
		},
		isSupportPdf: function () {
			return "undefined" != typeof navigator.mimeTypes["application/pdf"]
		},
		dt: function (a, b) {
			if (a) {
				var c = ["e=" + a, "t=" + (new Date).getTime()];
				FX.Utils.isEmpty(b) || c.push("ext=" + b),
				FX.STATIC.user && FX.STATIC.user.username && c.push("u=" + FX.STATIC.user.username);
				var d = new Image;
				d.src = FX.CONFIG.HOST.TRACK_HOST + "/log?" + c.join("&")
			}
		}
	})
}
(jQuery), function (a) {
	FX.Utils = FX.Utils || {},
	a.extend(FX.Utils, {
		address2Str: function (a, b, c) {
			if (c && a) {
				b = "";
				var d = !0;
				/p/.test(c) && a.province && (b += a.province, a.province === a.city && (d = !1)),
				/c/.test(c) && a.city && d && (b += a.city),
				/d/.test(c) && a.district && (b += a.district),
				/a/.test(c) && a.detail && (b += a.detail)
			}
			return b
		},
		num2Str: function (a, b) {
			if (FX.Utils.isEmpty(a))
				return "";
			var c = a + "";
			if (FX.Utils.isEmpty(b))
				return c;
			var d = /\[Num0\]/;
			if (d.test(b))
				return b.replace(d, c);
			if (d = /\[Num1\]/, d.test(b))
				return b.replace(d, FX.Utils._num2CN(c, !1));
			if (d = /\[Num2\]/, d.test(b))
				return b.replace(d, FX.Utils._num2CN(c, !0));
			d = /[#0]+,?[#0]*\.?[#0]*%?/;
			var e = b.match(d);
			if (e && e.length > 0) {
				var f = e[0];
				return c = FX.Utils._numberFormat(a, f),
				b.replace(d, c)
			}
			return b
		},
		_numberFormat: function (a, b) {
			var c = "",
			d = a + "";
			if (/%$/.test(b)) {
				c = "%",
				a = 100 * a,
				b = b.replace("%", "");
				var e = d.indexOf(".");
				if (e > -1) {
					var f = d.length - 3 - e;
					f = f < 0 ? 0 : f > 8 ? 8 : f,
					a = parseFloat(a.toFixed(f))
				}
				d = a + ""
			}
			var g = b.split("."),
			h = g[0],
			i = g[1];
			if ("" !== i) {
				var j = i ? i.length : 0;
				d = parseFloat(a).toFixed(j);
				for (var k = d.split(""), l = j; l > 0 && "#" === i.charAt(l - 1); l--) {
					var m = k.pop();
					if ("0" !== m) {
						k.push(m);
						break
					}
				}
				var n = k.pop();
				"." === n && (n = ""),
				d = k.join("") + n
			}
			var o = d.split("."),
			p = o[0];
			if (/,/.test(h))
				o[0] = p.replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, "$1,");
			else {
				var q = h.match(/[0]+[0#]*$/);
				q && q.length > 0 && (o[0] = FX.Utils.leftPad(p, q[0].length, "0"))
			}
			return o.join(".") + c
		},
		_num2CN: function (a, b) {
			var c = "",
			d = "";
			b && (c = "", d = "");
			var e = Math.floor(Math.abs(a)),
			f = Math.abs(a).toString(),
			g = f.replace(/\..*$/, ""),
			h = f.split("."),
			i = c,
			j = d,
			k = "-.",
			l = i[0],
			m = new RegExp(i[0] + "*$"),
			n = new RegExp(i[0] + "+", "g"),
			o = "",
			p = "";
			if (o = a < 0 ? k[0] : "", h.length >= 2) {
				var q = h[1];
				if (q) {
					p = k[1];
					for (var r = 0; r < q.length; r++)
						p += i[+q[r]]
				}
			}
			if (1 == g.length)
				return o + i[e] + p;
			if (g.length <= 5) {
				for (var s = "", t = 0, e = g.length; e--; ) {
					var u = +g[t];
					s += this._num2CN(g[t], b) + (u && e ? j[e] : ""),
					t++
				}
				return s = s.replace(n, l),
				s = s.replace(m, ""),
				o + s + p
			}
			for (var v = g.length / 4 >> 0, w = g.length % 4, s = ""; 0 == w || !j[3 + v]; )
				w += 4, v--;
			if (+g.substr(0, w)) {
				s = this._num2CN(g.substr(0, w), b) + j[3 + v];
				var x = g.substr(w);
				"0" === x[0] && (s += i[0]),
				s += this._num2CN(x, b)
			} else
				s = this._num2CN(g.substr(0, w), b) + this._num2CN(g.substr(w), b);
			return s = s.replace(n, l),
			s = s.replace(m, ""),
			o + s + p
		},
		date2Str: function (a, b) {
			if (!a)
				return "";
			var c = b.length,
			d = "";
			if (c > 0) {
				for (var e = b.charAt(0), f = 0, g = e, h = 1; h < c; h++) {
					var i = b.charAt(h);
					e !== i ? (d += FX.Utils._compileDateFormat({
							char: e,
							str: g,
							len: h - f
						}, a), e = i, f = h, g = e) : g += i
				}
				d += FX.Utils._compileDateFormat({
					char: e,
					str: g,
					len: c - f
				}, a)
			}
			return d
		},
		_compileDateFormat: function (a, b) {
			var c = a.str,
			d = a.len,
			e = a.char;
			switch (e) {
			case "E":
				c = d > 2 ? Date._DN[b.getDay()] : d > 1 ? Date._SDN[b.getDay()] : b.getDay() + "";
				break;
			case "y":
				c = d <= 3 ? (b.getFullYear() + "").slice(2, 4) : b.getFullYear();
				break;
			case "M":
				c = d > 2 ? Date._MN[b.getMonth()] : d < 2 ? b.getMonth() + 1 : FX.Utils.leftPad(b.getMonth() + 1 + "", 2, "0");
				break;
			case "d":
				c = d > 1 ? FX.Utils.leftPad(b.getDate() + "", 2, "0") : b.getDate();
				break;
			case "h":
				var f = b.getHours() % 12;
				0 === f && (f = 12),
				c = d > 1 ? FX.Utils.leftPad(f + "", 2, "0") : f;
				break;
			case "H":
				c = d > 1 ? FX.Utils.leftPad(b.getHours() + "", 2, "0") : b.getHours();
				break;
			case "m":
				c = d > 1 ? FX.Utils.leftPad(b.getMinutes() + "", 2, "0") : b.getMinutes();
				break;
			case "s":
				c = d > 1 ? FX.Utils.leftPad(b.getSeconds() + "", 2, "0") : b.getSeconds();
				break;
			case "a":
				c = b.getHours() < 12 ? "am" : "pm";
				break;
			default:
				c = a.str
			}
			return c
		}
	})
}
(jQuery), function (a) {
	FX.Formula = {
		AND: function () {
			for (var a = FX.Utils.flatten(arguments), b = 0, c = a.length; b < c; b++)
				if (!a[b])
					return !1;
			return !0
		},
		OR: function () {
			for (var a = FX.Utils.flatten(arguments), b = 0, c = a.length; b < c; b++)
				if (a[b])
					return !0;
			return !1
		},
		FALSE: function () {
			return !1
		},
		TRUE: function () {
			return !0
		},
		IF: function (a, b, c) {
			return a ? b : c
		},
		NOT: function (a) {
			return !a
		},
		XOR: function () {
			for (var a = 0, b = FX.Utils.flatten(arguments), c = 0, d = b.length; c < d; c++)
				b[c] && a++;
			return !!(1 & Math.floor(Math.abs(a)))
		},
		CONCATENATE: function () {
			for (var a = FX.Utils.flatten(arguments), b = 0; (b = a.indexOf(!0)) > -1; )
				a[b] = "TRUE";
			for (var c = 0; (c = a.indexOf(!1)) > -1; )
				a[c] = "FALSE";
			return a.join("")
		},
		EXACT: function (a, b) {
			return a === b
		},
		LEFT: function (a, b) {
			return b = FX.Utils.isEmpty(b) ? 1 : b,
			a ? a.substring(0, b) : ""
		},
		LEN: function (a) {
			return FX.Utils.isString(a) ? a ? a.length : 0 : a && a.length ? a.length : 0
		},
		LOWER: function (a) {
			return FX.Utils.isString(a) ? a ? a.toLowerCase() : a : ""
		},
		REPLACE: function (a, b, c, d) {
			return FX.Utils.isNumber(b) && FX.Utils.isNumber(c) ? (a = a || "", d = d || "", a.substr(0, b - 1) + d + a.substr(b - 1 + c)) : a
		},
		REPT: function (a, b) {
			return b = b || 0,
			new Array(b + 1).join(a)
		},
		RIGHT: function (a, b) {
			return b = void 0 === b ? 1 : b,
			a ? a.substring(a.length - b) : ""
		},
		SEARCH: function (a, b, c) {
			var d;
			return FX.Utils.isString(a) && FX.Utils.isString(b) ? (c = FX.Utils.isNull(c) ? 0 : c, d = b.toLowerCase().indexOf(a.toLowerCase(), c - 1) + 1) : 0
		},
		SPLIT: function (a, b) {
			return FX.Utils.isString(a) ? a.split(b) : []
		},
		TRIM: function (a) {
			return FX.Utils.isString(a) ? a.replace(/ +/g, " ").trim() : ""
		},
		UPPER: function (a) {
			return FX.Utils.isString(a) ? a.toUpperCase() : ""
		},
		MID: function (a, b, c) {
			return a = a || "",
			FX.Utils.isNumber(b) && FX.Utils.isNumber(c) ? a.substr(b - 1, c) : a
		},
		AVERAGE: function () {
			for (var a = FX.Utils.flatten(arguments, function (a) {
						return FX.Utils.isNumber(a)
					}), b = a.length, c = 0, d = 0, e = 0; e < b; e++)
				c += a[e], d += 1;
			return c / d
		},
		COUNT: function () {
			return FX.Utils.flatten(arguments).length
		},
		LARGE: function (a, b) {
			return a = FX.Utils.flatten(a, function (a) {
					return FX.Utils.isNumber(a)
				}),
			a.sort(function (a, b) {
				return b - a
			})[b - 1]
		},
		MAX: function () {
			var a = FX.Utils.flatten(arguments, function (a) {
					return FX.Utils.isNumber(a)
				});
			return 0 === a.length ? 0 : Math.max.apply(Math, a)
		},
		MIN: function () {
			var a = FX.Utils.flatten(arguments, function (a) {
					return FX.Utils.isNumber(a)
				});
			return 0 === a.length ? 0 : Math.min.apply(Math, a)
		},
		SMALL: function (a, b) {
			return a = FX.Utils.flatten(a, function (a) {
					return FX.Utils.isNumber(a)
				}),
			a.sort(function (a, b) {
				return a - b
			})[b - 1]
		},
		ABS: function (a) {
			return FX.Utils.isNumber(a) ? Math.abs(a) : 0
		},
		ROUND: function (a, b) {
			return Math.round(a * Math.pow(10, b)) / Math.pow(10, b)
		},
		CEILING: function (a, b) {
			if (0 === b)
				return 0;
			var c = b < 0 ? -1 : 0;
			b = Math.abs(b);
			var d = b - Math.floor(b),
			e = 0;
			return d > 0 && (e = -Math.floor(Math.log(d) / Math.log(10))),
			a >= 0 ? FX.Formula.ROUND(Math.ceil(a / b) * b, e) : 0 === c ? -FX.Formula.ROUND(Math.floor(Math.abs(a) / b) * b, e) : -FX.Formula.ROUND(Math.ceil(Math.abs(a) / b) * b, e)
		},
		FLOOR: function (a, b) {
			if (0 === b)
				return 0;
			if (!(a > 0 && b > 0 || a < 0 && b < 0))
				return 0;
			b = Math.abs(b);
			var c = b - Math.floor(b),
			d = 0;
			return c > 0 && (d = -Math.floor(Math.log(c) / Math.log(10))),
			a >= 0 ? FX.Formula.ROUND(Math.floor(a / b) * b, d) : -FX.Formula.ROUND(Math.floor(Math.abs(a) / b) * b, d)
		},
		INT: function (a) {
			return FX.Utils.isNumber(a) ? Math.floor(a) : 0
		},
		LOG: function (a, b) {
			return b = void 0 === b ? 10 : b,
			FX.Utils.isNumber(b) ? Math.log(a) / Math.log(b) : 0
		},
		MOD: function (a, b) {
			if (0 === b)
				return 0;
			var c = Math.abs(a % b);
			return b > 0 ? c : -c
		},
		POWER: function (a, b) {
			var c = Math.pow(a, b);
			return isNaN(c) ? 0 : c
		},
		PRODUCT: function () {
			for (var a = FX.Utils.flatten(arguments, function (a) {
						return FX.Utils.isNumber(a)
					}), b = 1, c = 0; c < a.length; c++)
				b *= a[c];
			return b
		},
		SQRT: function (a) {
			return a < 0 ? 0 : Math.sqrt(a)
		},
		SUM: function () {
			for (var a = 0, b = FX.Utils.flatten(arguments, function (a) {
						return FX.Utils.isNumber(a)
					}), c = 0, d = b.length; c < d; ++c)
				a += b[c];
			return a
		},
		SUMPRODUCT: function () {
			for (var a = 0, b = [], c = -1, d = 0; d < arguments.length; d++)
				arguments[d]instanceof Array && (c = c < 0 ? arguments[d].length : Math.min(arguments[d].length, c), b.push(arguments[d]));
			for (var e, f, g, h = 0; h < c; h++) {
				for (e = 1, f = 0; f < b.length; f++)
					g = parseFloat(b[f][h]), isNaN(g) && (g = 0), e *= g;
				a += e
			}
			return a
		},
		FIXED: function (a, b) {
			return b = void 0 === b ? 0 : b,
			FX.Utils.isNumber(b) && b >= 0 ? Number(a).toFixed(b) : ""
		},
		DATE: function () {
			return 6 === arguments.length ? new Date(parseInt(arguments[0], 10), parseInt(arguments[1], 10) - 1, parseInt(arguments[2], 10), parseInt(arguments[3], 10), parseInt(arguments[4], 10), parseInt(arguments[5], 10)) : 3 === arguments.length ? new Date(parseInt(arguments[0], 10), parseInt(arguments[1], 10) - 1, parseInt(arguments[2], 10)) : new Date(arguments[0])
		},
		TIME: function (a, b, c) {
			return (3600 * a + 60 * b + c) / 86400
		},
		TIMESTAMP: function (a) {
			return FX.Utils.isDate(a) ? a.getTime() : 0
		},
		TODAY: function () {
			return new Date
		},
		NOW: function () {
			return new Date
		},
		SYSTIME: function () {
			var a = FX.STATIC._st,
			b = (new Date).getTime() - FX.STATIC._ct;
			return b > 0 && b < 36e5 && (a += b),
			new Date(a)
		},
		DAY: function (a) {
			return a.getDate()
		},
		MONTH: function (a) {
			return a.getMonth() + 1
		},
		YEAR: function (a) {
			return a.getFullYear()
		},
		HOUR: function (a) {
			return a.getHours()
		},
		MINUTE: function (a) {
			return a.getMinutes()
		},
		SECOND: function (a) {
			return a.getSeconds()
		},
		DAYS: function (a, b) {
			var c = new Date(a.getFullYear(), a.getMonth(), a.getDate()),
			d = new Date(b.getFullYear(), b.getMonth(), b.getDate());
			return (c - d) / 864e5
		},
		DAYS360: function (a, b, c) {
			var d,
			e,
			f = b.getMonth(),
			g = a.getMonth();
			if (c)
				d = 31 === b.getDate() ? 30 : b.getDate(), e = 31 === a.getDate() ? 30 : a.getDate();
			else {
				var h = new Date(b.getFullYear(), f + 1, 0).getDate(),
				i = new Date(a.getFullYear(), g + 1, 0).getDate();
				d = b.getDate() === h ? 30 : b.getDate(),
				a.getDate() === i ? d < 30 ? (g++, e = 1) : e = 30 : e = a.getDate()
			}
			return 360 * (a.getFullYear() - b.getFullYear()) + 30 * (g - f) + (e - d)
		},
		DATEDELTA: function (a, b) {
			return FX.Utils.isNumber(b) || (b = 0),
			new Date(a.getTime() + 864e5 * b)
		},
		ISOWEEKNUM: function (a) {
			a.setHours(0, 0, 0),
			a.setDate(a.getDate() + 4 - (a.getDay() || 7));
			var b = new Date(a.getFullYear(), 0, 1);
			return Math.ceil(((a - b) / 864e5 + 1) / 7)
		},
		WEEKNUM: function (a, b) {
			var c = 2 === b ? 1 : 0,
			d = new Date(a.getFullYear(), 0, 1),
			e = (c + 7 - d.getDay()) % 7,
			f = e > 0 ? 1 : 0,
			g = d.getTime() + 24 * e * 60 * 60 * 1e3;
			return Math.floor((a.getTime() - g) / 864e5 / 7 + 1) + f
		},
		TEXT: function (a, b) {
			return FX.Utils.isNull(a) ? "" : FX.Utils.isDate(a) && !FX.Utils.isEmpty(b) ? FX.Utils.date2Str(a, b) : FX.Utils.num2Str(a, b)
		},
		VALUE: function (a) {
			return FX.Utils.isEmpty(a) ? 0 : isNaN(a) ? 0 : parseFloat(a)
		},
		UUID: function () {
			return FX.Utils.UUID()
		},
		RECNO: function () {
			return FX.Utils.isNull(FX.STATIC.EntryRecNo) ? FX.STATIC.APPID && FX.STATIC.ENTRYID ? (FX.Utils.dataAjax({
					url: "/data/formula/recno",
					async: !1,
					data: {
						appId: FX.STATIC.APPID,
						formId: FX.STATIC.ENTRYID,
						hasIncLock: FX.STATIC.RecnoLock
					}
				}, function (a) {
					FX.STATIC.EntryRecNo = a.incId
				}), FX.STATIC.EntryRecNo) : "" : FX.STATIC.EntryRecNo
		},
		ISEMPTY: function (a) {
			return FX.Utils.isObjectEmpty(a)
		},
		MAPX: function (a, b, c, d) {
			var e = null;
			if (FX.Utils.isEmpty(a) || FX.Utils.isObjectEmpty(b))
				return e;
			a = a.toLowerCase();
			var f = FX.Utils.getFieldInfoByFormula(c),
			g = FX.Utils.getFieldInfoByFormula(d);
			if (/^sum|avg|max|min|count|first|last$/.test(a) && f.entryId && f.entryId === g.entryId) {
				var h = FX.Utils.isDate(b),
				i = h ? b.getTime() : b;
				FX.Utils.dataAjax({
					url: "/data/formula/aggregate",
					async: !1,
					data: {
						op: a,
						formId: f.entryId,
						lookup_value: i,
						lookup_field: f.field,
						result_field: g.field,
						date_type: h,
						refAppId: f.appId
					}
				}, function (a) {
					a.result && a.result[0] && (e = a.result[0].result)
				})
			}
			return e
		},
		MAP: function (a, b, c) {
			var d = [];
			if (FX.Utils.isObjectEmpty(a))
				return d;
			var e = FX.Utils.getFieldInfoByFormula(b),
			f = FX.Utils.getFieldInfoByFormula(c);
			return e.entryId && e.entryId === f.entryId && FX.Utils.dataAjax({
				url: "/data/formula/map",
				async: !1,
				data: {
					formId: e.entryId,
					lookup_value: a,
					lookup_field: e.field,
					result_field: f.field,
					refAppId: e.appId
				}
			}, function (a) {
				FX.Utils.forEach(a.result, function (a, b) {
					d.push(b[f.field])
				})
			}, function () {}),
			d
		},
		GETUSERNAME: function () {
			return FX.STATIC.user ? FX.STATIC.user.nickname : ""
		}
	}
}
(jQuery), FX.OB = function (a) {
	this.options = $.extend(this._defaultConfig(), a),
	this._beforeInit(),
	this._init(),
	this._afterInit()
}, $.extend(FX.OB.prototype, {
	_defaultConfig: function () {
		return {
			onBeforeInit: null,
			onAfterInit: null
		}
	},
	_init: function () {},
	_beforeInit: function () {
		FX.Utils.applyFunc(this, this.options.onBeforeInit, [], !1)
	},
	_afterInit: function () {
		FX.Utils.applyFunc(this, this.options.onAfterInit, [], !1)
	}
}), FX.Widget = FX.extend(FX.OB, {
		_defaultConfig: function () {
			return $.extend(FX.Widget.superclass._defaultConfig.apply(this, arguments), {
				widgetName: "",
				baseCls: "",
				customCls: null,
				enable: !0,
				visible: !0,
				invalidateType: "blank"
			})
		},
		_init: function () {
			FX.Widget.superclass._init.apply(this, arguments),
			this._initRoot(),
			this._initNameEffects()
		},
		_afterInit: function () {
			this._initElementSize(),
			this._initVisualEffects(),
			this._initDefaultValue(),
			FX.Widget.superclass._afterInit.apply(this, arguments)
		},
		_initRoot: function () {
			var a = this.options;
			null != a.renderEl ? this.element = $(a.renderEl) : this.element = this._defaultRoot(),
			a.baseCls && this.element.addClass(a.baseCls),
			a.customCls && this.element.addClass(a.customCls)
		},
		_initNameEffects: function () {
			var a = this.options;
			a.widgetName || (a.widgetName = "_widget_" + FX.STATIC.IDBase++),
			this.element.attr({
				widgetName: a.widgetName
			})
		},
		_initElementSize: function () {
			this.doResize()
		},
		_initVisualEffects: function () {
			this.setEnable(this.options.enable),
			this.setVisible(this.options.visible)
		},
		_initDefaultValue: function () {
			var a = this.options;
			null != a.value ? this.setValue(a.value) : null != a.text && this.setText(a.text)
		},
		_defaultRoot: function () {
			return $("<div/>")
		},
		getWidgetByName: function (a) {
			return this.options.resultWidgets ? this.options.resultWidgets[a] : null
		},
		getWidgetName: function () {
			return this.options.widgetName
		},
		getWidgetType: function () {
			return this.options.type
		},
		getText: function () {
			return this.options.text
		},
		setText: function (a) {
			this.options.text = a
		},
		getValue: function () {
			return this.options.value
		},
		setValue: function (a) {
			this.options.value = a
		},
		isEnabled: function () {
			return this.options.enable
		},
		setEnable: function (a) {
			this.options.enable = !!a,
			this.options.enable === !0 ? this.element.removeClass("x-ui-disable") : this.element.addClass("x-ui-disable")
		},
		isVisible: function () {
			return this.options.visible
		},
		setVisible: function (a) {
			this.options.visible = !!a,
			this.options.visible === !0 ? this.element.removeClass("x-ui-hidden") : this.element.addClass("x-ui-hidden")
		},
		reset: function () {
			this.setValue(null)
		},
		doResize: function (a) {
			var b = this.options;
			a && (b.width = a.width, b.height = a.height),
			FX.Utils.isEmpty(b.width) || this.element.css({
				width: b.width
			}),
			FX.Utils.isEmpty(b.height) || this.element.css({
				height: b.height
			})
		},
		destroy: function () {
			this.element.remove()
		},
		rebuild: function () {
			this.options.renderEl = this.element,
			this.element.empty(),
			this._beforeInit(),
			this._init(),
			this._afterInit()
		},
		checkValidate: function () {
			return !0
		},
		fireEvent: function (a, b) {
			this.element.trigger(a, b)
		},
		getOptions: function () {
			var a = this.options;
			return {
				type: a.type,
				widgetName: a.widgetName,
				customCls: a.customCls,
				height: a.height,
				width: a.width,
				text: a.text,
				value: a.value,
				enable: a.enable,
				visible: a.visible,
				allowBlank: a.allowBlank,
				rely: a.rely
			}
		},
		getInvalidateType: function () {
			return this.options.invalidateType
		},
		setInvalidateType: function (a) {
			this.options.invalidateType = a
		},
		getNullValue: function () {
			return null
		},
		getLinkValue: function () {
			return this.getValue()
		},
		getLinkType: function () {
			return this.getWidgetType()
		}
	}), function (a) {
	FX.RelyProcessor = function (a) {
		this.options = {
			version: 0,
			versionMap: {},
			stateMap: {},
			asyncMap: {},
			defaults: [],
			relyMap: {},
			linkMap: {}
		},
		this._init(a)
	},
	a.extend(FX.RelyProcessor.prototype, {
		RELY_END: -1,
		_init: function (a) {
			this.options.relyMap = this._getRelyWidgetsMap(a),
			this.options.linkMap = this._getLinkMap(this.options.relyMap)
		},
		_getLinkMap: function (a) {
			var b = this,
			c = {};
			return FX.Utils.forEach(a, function (a, d) {
				FX.Utils.forEach(d, function (d, e) {
					b._add2LinkMap(c, e, a)
				})
			}),
			c
		},
		_add2LinkMap: function (a, b, c) {
			if (a[b] || (a[b] = []), a[b].push(c), /\./.test(b) && !/\./.test(c)) {
				var d = b.split(".")[0];
				this._add2LinkMap(a, d, c)
			}
			return a
		},
		_getRelyWidgetsMap: function (a) {
			var b = this,
			c = {};
			return FX.Utils.forEach(a, function (a, d) {
				var e = d.widget;
				if (e && "linkdata" !== e.type) {
					if ("subform" === e.type) {
						var f = b._getRelyWidgetsMap(e.items);
						FX.Utils.forEach(f, function (a, b) {
							var d = [e.widgetName, a].join(".");
							c[d] = b
						})
					}
					var g = e.rely;
					g && g.widgets && (c[e.widgetName] = g.widgets)
				}
			}),
			c
		},
		_isSubformWidget: function (a) {
			return /\./.test(a)
		},
		getRelyVersion: function (a, b, c, d) {
			var e = this;
			return d = d || {},
			FX.Utils.forEach(a[b], function (b, f) {
				d[f] || (d[f] = c, e.getRelyVersion(a, f, c, d))
			}),
			d
		},
		checkAsyncState: function () {
			var a = this,
			b = this.options,
			c = !0;
			return FX.Utils.forEach(b.asyncMap, function (d) {
				var e = b.asyncMap[d];
				if (a._isSubformWidget(d) ? FX.Utils.forEach(e, function (a, b) {
						if (b === !1)
							return c = !1, !1
					}) : c = e !== !1, !c)
					return !1
			}),
			c
		},
		setStateMap: function (a, b) {
			this.options.stateMap[a] = b
		},
		setAsyncMap: function (a, b) {
			this.options.asyncMap[a] = b
		},
		addDefaultRely: function (a) {
			FX.Utils.isObjectEmpty(a.options.value) || this.options.defaults.push(a)
		},
		getDefaultRely: function () {
			return this.options.defaults
		},
		fireRely: function (b, c, d) {
			var e = this.options,
			f = this,
			g = -1,
			h = b.options.widgetName;
			b.options.subform && (h = [b.options.subform, h].join("."), g = a(b.element).closest(".subform-line").index()),
			c || (e.version++, c = e.version, a.extend(e.versionMap, this.getRelyVersion(e.linkMap, h, c))),
			g > -1 ? (e.asyncMap[h] = e.asyncMap[h] || {}, e.asyncMap[h][g] = c) : e.asyncMap[h] = c;
			var i = b.getLinkValue();
			FX.Utils.forEach(e.linkMap[h], function (a, b) {
				if (!e.versionMap[b] || e.versionMap[b] === c) {
					var h = !0;
					if (FX.Utils.forEach(e.relyMap[b], function (a, d) {
							if (e.versionMap[d] === c) {
								var i = e.asyncMap[d];
								if (f._isSubformWidget(d))
									if (i = i || {}, g > -1 && f._isSubformWidget(b))
										h = i[g] === c;
									else {
										var j = e.stateMap[d] === c;
										FX.Utils.forEach(i, function (a, b) {
											if (e.stateMap[d + a] === c)
												return j = !0, b !== c ? (j = !1, !1)
													 : void 0
											}),
											j || (h = !1)
										}
									else
										h = i === c;
									return !!h && void 0
								}
							}), h) {
							if (g > -1) {
								if (e.stateMap[b + g] === c)
									return;
								e.stateMap[b + g] = c
							} else {
								if (e.stateMap[b] === c)
									return;
								e.stateMap[b] = c
							}
							var j;
							if (f._isSubformWidget(b))
								if (g > -1) {
									if (j = d.getWidgetByName(b, g), !j)
										return;
									e.asyncMap[b] = e.asyncMap[b] || {},
									e.asyncMap[b][g] = !1,
									d.dealRely(b, j, c, i)
								} else {
									var k = 0;
									e.asyncMap[b] = e.asyncMap[b] || {};
									do
										j = d.getWidgetByName(b, k), j && (e.asyncMap[b][k] = !1, d.dealRely(b, j, c, i)), k++;
									while (j)
								}
							else {
								if (j = d.getWidgetByName(b), !j)
									return;
								e.asyncMap[b] = !1,
								d.dealRely(b, j, c, i)
							}
						}
				}
			})
		}
	})
}
(jQuery), function () {
	function a() {
		try {
			return c in b && b[c]
		} catch (a) {
			return !1
		}
	}
	FX.Store = FX.Store || {},
	$.extend(FX.Store, {
		set: function (a, b) {},
		get: function (a, b) {},
		has: function (a) {
			return void 0 !== this.get(a)
		},
		remove: function (a) {},
		clear: function () {},
		transact: function (a, b, c) {
			null == c && (c = b, b = null),
			null == b && (b = {});
			var d = this.get(a, b);
			c(d),
			this.set(a, d)
		},
		getAll: function () {
			var a = {};
			return this.forEach(function (b, c) {
				a[b] = c
			}),
			a
		},
		forEach: function () {},
		serialize: function (a) {
			return JSON.stringify(a)
		},
		deserialize: function (a) {
			if ("string" == typeof a)
				try {
					return JSON.parse(a)
				} catch (b) {
					return a || void 0
				}
		},
		getKey: function (a, b) {
			var c = "";
			switch (a) {
			case "paramFields":
			case "showFields":
			case "metaFields":
				c = [a, b.appId, b.entryId, b.groupId].join("");
				break;
			case "authGroup":
				c = [a, b.appId, b.entryId].join("")
			}
			return c
		}
	});
	var b = "undefined" != typeof window ? window : global,
	c = "localStorage";
	a() && $.extend(FX.Store, {
		storage: b[c],
		set: function (a, b) {
			if (void 0 === b)
				return this.remove(a);
			try {
				this.storage.setItem(a, this.serialize(b))
			} catch (a) {
				return
			}
			return b
		},
		get: function (a, b) {
			var c = this.deserialize(this.storage.getItem(a));
			return void 0 === c ? b : c
		},
		remove: function (a) {
			this.storage.removeItem(a)
		},
		clear: function () {
			this.storage.clear()
		},
		forEach: function (a) {
			for (var b = 0; b < this.storage.length; b++) {
				var c = this.storage.key(b);
				a(c, this.get(c))
			}
		}
	})
}
(), function (a) {
	FX.UI = {
		showPopover: function (b) {
			var c = a('<div class="x-ui-popover"/>').appendTo("body"),
			d = a.extend({
					anchor: null,
					position: "topLeft",
					content: null,
					maxWidth: null,
					animation: !0,
					type: "info"
				}, b);
			d.maxWidth && c.css({
				"max-width": d.maxWidth
			}),
			d.type && c.addClass(d.type),
			d.animation && c.addClass("animation"),
			d.content && d.content.appendTo(c);
			var e = d.anchor,
			f = e.offset(),
			g = {
				"z-Index": FX.STATIC.zIndex++
			};
			switch (d.position) {
			case "topLeft":
				c.addClass("top"),
				g.left = Math.max(f.left + e.width() / 2 - c.width() / 2 - 5, 4),
				g.bottom = document.body.clientHeight - f.top + 8;
				break;
			case "topRight":
				c.addClass("top"),
				g.right = Math.max(document.body.clientWidth - f.left - e.width() / 2 - c.width() / 2 - 5, 4),
				g.bottom = document.body.clientHeight - f.top + 8;
				break;
			case "bottomLeft":
				c.addClass("bottom"),
				g.left = Math.max(f.left + e.width() / 2 - c.width() / 2 - 5, 4),
				g.top = f.top + e.height() + 8;
				break;
			case "bottomRight":
			}
			c.css(g),
			c.addClass("fadein")
		},
		closePopover: function () {
			var b = a(".x-ui-popover");
			b.length > 0 && (b.remove(), b = null)
		}
	}
}
(jQuery), function (a) {
	FX.Vip = {
		_getPack: function () {
			if (!FX.STATIC.VIP_PACK) {
				if (!FX.STATIC.APPID)
					return {};
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/get_vip_pack",
					async: !1
				}, function (b) {
					FX.STATIC.VIP_PACK = a.extend({}, b.vipPack)
				}, function () {
					FX.STATIC.VIP_PACK = {}
				})
			}
			return FX.STATIC.VIP_PACK
		},
		clear: function () {
			FX.STATIC.VIP_PACK = null
		},
		showUpgradeTip: function (a, b) {
			if (!FX.Utils.isObjectEmpty(a)) {
				if (FX.Utils.isWpsWebView())
					return void this._showWpsTip(a.code, a.message || b);
				var c,
				d,
				e,
				f = null;
				/^71[0-9]{2}/.test(a.code) ? (c = "", d = "", f = function () {
					return FX.Utils.redirectTo("/profile#/vip"),
					!1
				}) : /^72[0-9]{2}/.test(a.code) && (c = "", d = ""),
				e = a.expireDays && a.expireDays < 8 ? (a.message || a.msg) + a.expireDays + "" : a.message || a.msg,
				FX.Msg.alert({
					msg: e,
					text4Ok: c,
					text4Cancel: d,
					onOk: f
				})
			}
		},
		_showWpsTip: function (a, b) {
			b = FX.CONST.WPS_TIP[a] || b,
			FX.Msg.toast({
				type: "error",
				msg: b
			})
		},
		getExcelMFS: function () {
			var a = this._getPack();
			return a[FX.CONST.VIP_MODULE.EXCEL_IMPORT] || 2097152
		},
		getUploadMFS: function () {
			var a = this._getPack();
			return a[FX.CONST.VIP_MODULE.SINGLE_FILE] || 20971520
		},
		hasAppBridge: function () {
			var a = this._getPack();
			return a[FX.CONST.VIP_MODULE.APP_BRIDGE] > 0
		},
		hasDataBackup: function () {
			var a = this._getPack();
			return a[FX.CONST.VIP_MODULE.DATA_BACKUP] > 0
		},
		hasFileExport: function () {
			var a = this._getPack();
			return a[FX.CONST.VIP_MODULE.FILE_ZIP] > 0
		},
		getPTSize: function () {
			var a = this._getPack();
			return a[FX.CONST.VIP_MODULE.PRINT]
		}
	}
}
(jQuery), function (a) {
	FX.Cookie = FX.Cookie || {},
	a.extend(FX.Cookie, {
		_encode: function (a) {
			return this.raw ? a : encodeURIComponent(a)
		},
		_decode: function (a) {
			return this.raw ? a : decodeURIComponent(a)
		},
		_stringifyCookieValue: function (a) {
			return this._encode(this.json ? JSON.stringify(a) : String(a))
		},
		_parseCookieValue: function (a) {
			0 === a.indexOf('"') && (a = a.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\"));
			try {
				return a = decodeURIComponent(a.replace(/\+/g, " ")),
				this.json ? JSON.parse(a) : a;
			} catch (a) {}
		},
		_read: function (b, c) {
			var d = this.raw ? b : this._parseCookieValue(b);
			return a.isFunction(c) ? c(d) : d
		},
		set: function (b, c, d) {
			if (arguments.length > 1 && !a.isFunction(c)) {
				if (d = a.extend({
							expires: new Date((new Date).getTime() + 1728e6),
							domain: FX.CONFIG.COOKIE_DOMAIN
						}, d), "number" == typeof d.expires) {
					var e = d.expires,
					f = d.expires = new Date;
					f.setMilliseconds(f.getMilliseconds() + 864e5 * e)
				}
				return document.cookie = [this._encode(b), "=", this._stringifyCookieValue(c), d.expires ? "; expires=" + d.expires.toUTCString() : "", d.path ? "; path=" + d.path : "", d.domain ? "; domain=" + d.domain : "", d.secure ? "; secure" : ""].join("")
			}
		},
		get: function (a, b) {
			for (var c = a ? void 0 : {}, d = document.cookie ? document.cookie.split("; ") : [], e = 0, f = d.length; e < f; e++) {
				var g = d[e].split("="),
				h = this._decode(g.shift()),
				i = g.join("=");
				if (a === h) {
					c = this._read(i, b);
					break
				}
				a || void 0 === (i = this._read(i)) || (c[h] = i)
			}
			return c
		},
		remove: function (b, c) {
			return this.set(b, "", a.extend({}, c, {
					expires: -1
				})),
			!this.set(b)
		}
	})
}
(jQuery), function (a) {
	FX.Hotkeys = {
		specialKeys: {
			8: "backspace",
			9: "tab",
			13: "return",
			16: "shift",
			17: "ctrl",
			18: "alt",
			19: "pause",
			20: "capslock",
			27: "esc",
			32: "space",
			33: "pageup",
			34: "pagedown",
			35: "end",
			36: "home",
			37: "left",
			38: "up",
			39: "right",
			40: "down",
			45: "insert",
			46: "del",
			96: "0",
			97: "1",
			98: "2",
			99: "3",
			100: "4",
			101: "5",
			102: "6",
			103: "7",
			104: "8",
			105: "9",
			106: "*",
			107: "+",
			109: "-",
			110: ".",
			111: "/",
			112: "f1",
			113: "f2",
			114: "f3",
			115: "f4",
			116: "f5",
			117: "f6",
			118: "f7",
			119: "f8",
			120: "f9",
			121: "f10",
			122: "f11",
			123: "f12",
			144: "numlock",
			145: "scroll",
			188: ",",
			190: ".",
			191: "/",
			224: "meta"
		},
		shiftNums: {
			"`": "~",
			1: "!",
			2: "@",
			3: "#",
			4: "$",
			5: "%",
			6: "^",
			7: "&",
			8: "*",
			9: "(",
			0: ")",
			"-": "_",
			"=": "+",
			";": ": ",
			"'": '"',
			",": "<",
			".": ">",
			"/": "?",
			"\\": "|"
		},
		keyHandler: function (b) {
			var c = b.handler,
			d = (b.namespace || "").toLowerCase().split(" ");
			d = a.map(d, function (a) {
					return a.split(".")
				}),
			(1 !== d.length || "" !== d[0] && "autocomplete" !== d[0].substring(0, 12) && "accordion" !== d[0].substring(0, 9) && "tabs" !== d[0].substring(0, 4) && "menu" !== d[0].substring(0, 4)) && (b.handler = function (b) {
				if (this === b.target || !/textarea|select/i.test(b.target.nodeName) && "text" !== b.target.type && "true" != a(b.target).prop("contenteditable")) {
					var e = "keypress" !== b.type && FX.Hotkeys.specialKeys[b.which],
					f = String.fromCharCode(b.which).toLowerCase(),
					g = "",
					h = {};
					b.altKey && "alt" !== e && (g += "alt_"),
					b.ctrlKey && "ctrl" !== e && (g += "ctrl_"),
					b.metaKey && !b.ctrlKey && "meta" !== e && (g += "meta_"),
					b.shiftKey && "shift" !== e && (g += "shift_"),
					e ? h[g + e] = !0 : (h[g + f] = !0, h[g + FX.Hotkeys.shiftNums[f]] = !0, "shift_" === g && (h[FX.Hotkeys.shiftNums[f]] = !0));
					for (var i = 0, j = d.length; i < j; i++)
						if (h[d[i]])
							return c.apply(this, arguments)
				}
			})
		}
	},
	FX.Utils.forEach(["keydown", "keyup", "keypress"], function (b, c) {
		a.event.special[c] = {
			add: FX.Hotkeys.keyHandler
		}
	})
}
(jQuery), $.extend(Array.prototype, {
	remove: function (a) {
		var b = this.indexOf(a);
		return b != -1 && this.splice(b, 1),
		this
	},
	unique: function () {
		for (var a = {}, b = this.length, c = [], d = 0; d < b; d++) {
			var e = this[d];
			a.hasOwnProperty(e) || (a[e] = 1, c.push(e))
		}
		return c
	}
}), $.extend(Date.prototype, {
	getMonthDays: function (a) {
		var b = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
		c = this.getFullYear();
		return "undefined" == typeof a && (a = this.getMonth()),
		0 !== c % 4 || 0 === c % 100 && 0 !== c % 400 || 1 !== a ? b[a] : 29
	}
}), function () {
	Date._DN = [FX.i18nText("Sunday"), FX.i18nText("Monday"), FX.i18nText("Tuesday"), FX.i18nText("Wednesday"), FX.i18nText("Thursday"), FX.i18nText("Friday"), FX.i18nText("Saturday")],
	Date._SDN = [FX.i18nText("Short-Sun"), FX.i18nText("Short-Mon"), FX.i18nText("Short-Tue"), FX.i18nText("Short-Wed"), FX.i18nText("Short-Thu"), FX.i18nText("Short-Fri"), FX.i18nText("Short-Sat")],
	Date._MN = [FX.i18nText("January"), FX.i18nText("February"), FX.i18nText("March"), FX.i18nText("April"), FX.i18nText("May"), FX.i18nText("June"), FX.i18nText("July"), FX.i18nText("August"), FX.i18nText("September"), FX.i18nText("October"), FX.i18nText("November"), FX.i18nText("December")],
	Date._SMN = [FX.i18nText("Short-Jan"), FX.i18nText("Short-Feb"), FX.i18nText("Short-Mar"), FX.i18nText("Short-Apr"), FX.i18nText("Short-May"), FX.i18nText("Short-Jun"), FX.i18nText("Short-Jul"), FX.i18nText("Short-Aug"), FX.i18nText("Short-Sep"), FX.i18nText("Short-Oct"), FX.i18nText("Short-Nov"), FX.i18nText("Short-Dec")]
}
(), $.extend($.Event.prototype, {
	stopEvent: function () {
		this.stopPropagation(),
		this.preventDefault()
	}
}), function (a) {
	FX.Container = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Container.superclass._defaultConfig.apply(), {
					baseCls: "fui_container",
					resultWidgets: {}
				})
			},
			_addWidget: function (b) {
				var c = this.options,
				d = FX.createWidget(b);
				c.resultWidgets[d.options.widgetName] = d;
				var e = d.options.resultWidgets;
				return e && a.extend(c.resultWidgets, e),
				d
			}
		})
}
(jQuery), function (a) {
	FX.TextEditor = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.TextEditor.superclass._defaultConfig.apply(), {
					baseCls: "fui_text",
					inputCls: "x-input",
					width: 240,
					height: 30,
					allowBlank: !0,
					noRepeat: !1,
					onValidateSuccess: null,
					onValidateFail: null,
					onAfterValidate: null,
					onBeforeEdit: null,
					onAfterEdit: null,
					onStopEdit: null
				})
			},
			_init: function () {
				FX.TextEditor.superclass._init.apply(this, arguments);
				var a = this.options,
				b = this;
				this.editComp = this._createEditComp(),
				this.editComp.addClass(a.inputCls).appendTo(this.element),
				a.waterMark && this.editComp.attr("placeholder", a.waterMark),
				this.editComp.focus(function (c) {
					b.$err && b.$err.hide(),
					b.isEnabled() && b._isScanEditable() && (b.editComp.addClass(a.inputCls + "-focus"), FX.Utils.applyFunc(b, a.onBeforeEdit, [c], !1))
				}).blur(function (c) {
					if (b.isEnabled() && b._isScanEditable()) {
						b.editComp.removeClass(a.inputCls + "-focus");
						var d = b.checkValidate();
						FX.Utils.applyFunc(b, a.onStopEdit, [d, c], !1)
					}
				}).keyup(function (c) {
					b.isEnabled() && b._isScanEditable() && FX.Utils.applyFunc(b, a.onAfterEdit, [c], !1)
				})
			},
			_createEditComp: function () {
				return a("<input type='text'/>")
			},
			checkValidate: function () {
				var a = this.options,
				b = this.editComp.val().trim(),
				c = !0;
				if (FX.Utils.isEmpty(b))
					c = a.allowBlank;
				else if (!FX.Utils.isEmpty(a.regex)) {
					try {
						c = new RegExp(a.regex).test(b)
					} catch (a) {
						c = !1
					}
					c || this.setInvalidateType("regex")
				}
				return c ? FX.Utils.applyFunc(this, a.onValidateSuccess, [b], !1) === !1 && this.setState(FX.States.NORMAL) : FX.Utils.applyFunc(this, a.onValidateFail, [b], !1) === !1 && this.setState(FX.States.ERROR),
				FX.Utils.applyFunc(this, a.onAfterValidate, [b, c], !1),
				c
			},
			showErrorMsg: function (b) {
				FX.Utils.isEmpty(b) || (this.$err || (this.$err = a('<span class="invalid-info"/>').appendTo(this.element)), this.$err.text(b).show())
			},
			select: function () {
				this.editComp && (this.editComp.select(), this.editComp.focus())
			},
			_isScanEditable: function () {
				var a = this.options;
				return !a.scan || a.scan.editable
			},
			setEnable: function (a) {
				FX.TextEditor.superclass.setEnable.apply(this, [a]),
				a && this._isScanEditable() ? this.editComp.removeAttr("readOnly") : this.editComp.attr("readOnly", "readOnly")
			},
			setText: function (a) {
				this.setValue(a)
			},
			setValue: function (a) {
				this.editComp.val(a)
			},
			getText: function () {
				return this.getValue()
			},
			getValue: function () {
				return this.editComp.val().trim()
			},
			setState: function (a) {
				var b = this.options,
				c = b.inputCls + "-error " + b.inputCls + "-success " + b.inputCls + "-warning";
				switch (b.state = a, a) {
				case FX.States.SUCCESS:
					this.editComp.removeClass(c).addClass(b.inputCls + "-success");
					break;
				case FX.States.ERROR:
					this.editComp.removeClass(c).addClass(b.inputCls + "-error");
					break;
				case FX.States.WARNING:
					this.editComp.removeClass(c).addClass(b.inputCls + "-warning");
					break;
				default:
					this.editComp.removeClass(c)
				}
			},
			getState: function () {
				return this.options.state ? 0 : this.options.state
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.TextEditor.superclass.getOptions.apply(this, arguments), {
					regex: b.regex,
					noRepeat: b.noRepeat,
					scan: b.scan
				})
			},
			getNullValue: function () {
				return ""
			}
		}),
	a.shortcut("text", FX.TextEditor)
}
(jQuery), function (a) {
	FX.TextArea = FX.extend(FX.TextEditor, {
			_defaultConfig: function () {
				return a.extend(FX.TextArea.superclass._defaultConfig.apply(), {
					baseCls: "fui_textarea",
					inputCls: "x-textarea",
					width: 420,
					height: 140
				})
			},
			_createEditComp: function () {
				return a("<textarea/>")
			}
		}),
	a.shortcut("textarea", FX.TextArea)
}
(jQuery), function (a) {
	FX.Number = FX.extend(FX.TextEditor, {
			_defaultConfig: function () {
				return a.extend(FX.Number.superclass._defaultConfig.apply(), {
					allowDecimals: !1,
					allowNegative: !0
				})
			},
			_init: function () {
				FX.Number.superclass._init.apply(this, arguments);
				var a = this.options,
				b = "[\\d]{0,}";
				a.allowDecimals && (b = "[\\d]{0,}[\\.]?[\\d]{0,}"),
				a.allowNegative && (b = "[-]?" + b),
				a.regex = "^" + b + "$"
			},
			_createEditComp: function () {
				return a("<input/>")
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Number.superclass.getOptions.apply(this, arguments), {
					allowDecimals: b.allowDecimals,
					allowNegative: b.allowNegative
				})
			},
			setValue: function (a) {
				this.editComp.val(FX.Utils.fixDecimalPrecision(a))
			},
			getValue: function () {
				var a = this.editComp.val();
				if (FX.Utils.isEmpty(a))
					return null;
				var b = parseFloat(a);
				return isNaN(b) ? null : b
			},
			getNullValue: function () {
				return null
			},
			getText: function () {
				return this.editComp.val()
			}
		}),
	a.shortcut("number", FX.Number)
}
(jQuery), function (a) {
	FX.Password = FX.extend(FX.TextEditor, {
			_createEditComp: function () {
				return a('<input type="password"/>')
			}
		}),
	a.shortcut("password", FX.Password)
}
(jQuery), function (a) {
	FX.Trigger = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Trigger.superclass._defaultConfig.apply(), {
					baseCls: "fui_trigger",
					width: 240,
					height: 30,
					btnWidth: 30,
					waterMark: null,
					onElementCreate: null,
					triggerIcon: "",
					edge: {
						width: 240,
						height: 200
					}
				})
			},
			_init: function () {
				FX.Trigger.superclass._init.apply(this, arguments);
				var a = this.options;
				FX.Utils.applyFunc(this, a.onElementCreate, [], !1) === !1 && (this.editComp = this._createEditComp(), a.waterMark && this.editComp.attr("placeholder", a.waterMark), this.triggerBtn = this._createTriggerBtn(), this._bindEvts())
			},
			_createEditComp: function () {
				return a('<input class="fui_trigger-input" onfocus="this.blur();"/>').attr("readOnly", "readOnly").attr("UNSELECTABLE", "on").appendTo(this.element)
			},
			_createTriggerBtn: function () {
				return a('<i class="fui_trigger-btn"/>').addClass(this.options.triggerIcon).appendTo(this.element)
			},
			_bindEvts: function () {
				var b = this;
				this.element.unbind("click.trigger"),
				this.element.bind("click.trigger", function (c) {
					var d = a(c.target);
					(d.closest(".fui_trigger-input").length > 0 || d.closest(".fui_trigger-btn").length > 0) && b._onTriggerClick()
				})
			},
			_onTriggerClick: function (a) {},
			_getTriggerView: function () {
				var b = a(".x-dropdown-wrapper");
				return 0 === b.length && (b = a('<div class="x-dropdown-wrapper"/>').appendTo("body")),
				b
			},
			_calTriggerViewPos: function () {
				var a = {
					"z-Index": FX.STATIC.zIndex++
				},
				b = this.element.offset(),
				c = this.options.edge,
				d = document.body.clientWidth - b.left;
				d < c.width ? (a.right = d - this.element.outerWidth(), a.left = "auto") : (a.right = "auto", a.left = b.left);
				var e = document.body.clientHeight + document.body.scrollTop - b.top - this.element.outerHeight();
				return e < c.height ? (a.top = "auto", a.bottom = document.body.clientHeight - b.top) : (a.top = b.top + this.element.outerHeight(), a.bottom = "auto"),
				a
			},
			setValue: function (a) {
				this.setText(a)
			},
			setText: function (a) {
				this.editComp.val(a)
			},
			getValue: function () {
				return this.getText()
			},
			getText: function () {
				return this.editComp.val()
			},
			doResize: function (a) {
				FX.Trigger.superclass.doResize.apply(this, arguments);
				var b = this.options,
				c = b.height;
				this.element.css({
					"line-height": c - 2 + "px"
				})
			}
		})
}
(jQuery), function (a) {
	FX.DateTime = FX.extend(FX.Trigger, {
			_defaultConfig: function () {
				return a.extend(FX.DateTime.superclass._defaultConfig.apply(), {
					baseCls: "fui_datetime",
					triggerIcon: "icon-widget-datetime",
					startDate: null,
					endDate: null,
					allowBlank: !0,
					format: "yyyy-MM-dd",
					onAfterEdit: null,
					edge: {
						width: 240,
						height: 315
					}
				})
			},
			_init: function () {
				FX.DateTime.superclass._init.apply(this, arguments);
				var a = this.options;
				this.viewMode = this._initViewMode(),
				this.std = this._initStartDate(a.startDate, this.viewMode),
				this.edd = this._initEndDate(a.endDate, this.viewMode)
			},
			_onTriggerClick: function () {
				if (this.isEnabled()) {
					var b = this;
					this._showDatePicker(),
					a(document).bind("mousedown.datepicker", function (c) {
						var d = c.target,
						e = a(d).closest(b.datepicker.element);
						0 === e.length && b._hideDatePicker()
					})
				}
			},
			_initViewMode: function () {
				var a = this.options,
				b = 1;
				return a.format.match(/[YyMDd]/) ? a.format.match(/[Dd]/) ? a.format.match(/[Hhms]/) && (b = 3) : b = 0 : b = a.format.match(/s/) ? 2 : 4,
				b
			},
			_initStartDate: function (a, b) {
				if (!a)
					return null;
				var c = new Date(a);
				switch (b) {
				case 0:
					return new Date(c.getFullYear(), c.getMonth(), 1, 0, 0, 0);
				case 1:
					return new Date(c.getFullYear(), c.getMonth(), c.getDate(), 0, 0, 0);
				case 2:
					var d = new Date;
					return d.setHours(0),
					d.setMinutes(0),
					d.setSeconds(0),
					d;
				case 3:
					return new Date(c.getFullYear(), c.getMonth(), c.getDate(), 0, 0, 0);
				default:
					return c
				}
			},
			_initEndDate: function (a, b) {
				if (!a)
					return null;
				var c = new Date(a);
				switch (b) {
				case 0:
					return new Date(c.getFullYear(), c.getMonth(), c.getMonthDays(), 23, 59, 59);
				case 1:
					return new Date(c.getFullYear(), c.getMonth(), c.getDate(), 23, 59, 59);
				case 2:
					var d = new Date;
					return d.setHours(23),
					d.setMinutes(59),
					d.setSeconds(59),
					d;
				case 3:
					return new Date(c.getFullYear(), c.getMonth(), c.getDate(), 23, 59, 59);
				default:
					return c
				}
			},
			_showDatePicker: function () {
				var a = this,
				b = this.options;
				if (!this.datepicker) {
					var c = {
						viewMode: this.viewMode,
						startDate: this.std,
						endDate: this.edd,
						customCls: "x-dropdown",
						date: this.value ? new Date(this.value) : new Date,
						onDateUpdate: function () {
							var c = this.getValue();
							c ? a.setValue(c.getTime()) : a.setValue(null),
							FX.Utils.applyFunc(a, b.onAfterEdit, arguments, !1)
						},
						onClear: function () {
							a._hideDatePicker()
						},
						onOk: function () {
							a._hideDatePicker()
						},
						onClose: function () {
							a._hideDatePicker()
						},
						onToday: function () {
							a._hideDatePicker()
						}
					};
					this.datepicker = new FX.DatePicker(c)
				}
				this.datepicker.element.appendTo("body").css(this._calTriggerViewPos()).show()
			},
			_hideDatePicker: function () {
				this.datepicker && (a(document).unbind("mousedown.datepicker"), this.datepicker.element.detach(), FX.Utils.applyFunc(this, this.options.onStopEdit, [], !1))
			},
			checkValidate: function () {
				var a = this.options;
				return !(!a.allowBlank && FX.Utils.isEmpty(this.getValue())) && (!(a.startDate && this.value < a.startDate) && !(a.endDate && this.value > a.endDate))
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.DateTime.superclass.getOptions.apply(this, arguments), {
					format: b.format
				})
			},
			rebuild: function () {
				FX.DateTime.superclass.rebuild.apply(this, arguments),
				this.datepicker && (this.datepicker.element.remove(), this.datepicker = null)
			},
			setValue: function (a) {
				var b = this.options;
				if (FX.Utils.isNull(a))
					return this.value = null, void this.setText(null);
				var c = null;
				c = "today" === a ? new Date : new Date(a),
				0 !== this.viewMode && 1 !== this.viewMode || c.setHours(0, 0, 0),
				c.setMilliseconds(0);
				var d = c.getTime();
				return isNaN(d) ? (this.value = null, void this.setText(null)) : (this.value = d, void this.setText(FX.Utils.date2Str(new Date(this.value), b.format)))
			},
			setText: function (a) {
				this.editComp.val(a)
			},
			getValue: function () {
				return this.value
			},
			getText: function () {
				return this.editComp.val()
			}
		}),
	a.shortcut("datetime", FX.DateTime)
}
(jQuery), function (a) {
	FX.DatePicker = FX.extend(FX.Widget, {
			CONSTS: {
				VIEWMODE: {
					YM: 0,
					YMD: 1,
					HMS: 2,
					YMDHMS: 3,
					HM: 4
				},
				MINYEAR: 1900,
				MAXYEAR: 2999,
				NAV: {
					prevm: 2,
					nextm: 3,
					title: 4,
					clear: 5,
					today: 6,
					dok: 7,
					prevy: 8,
					nexty: 9,
					cancel: 10,
					mok: 11,
					plus: 12,
					minus: 13,
					current: 15,
					day: 100,
					month: 200,
					year: 300
				}
			},
			_TT: {
				CALENDAR: "",
				CLEAR: "",
				TODAY: "",
				OK: "",
				CURRENT: "",
				TIME: ""
			},
			_defaultConfig: function () {
				return a.extend(FX.DatePicker.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fui_datepicker",
					viewMode: 1,
					endDate: null,
					startDate: null,
					date: null,
					onDateUpdate: null,
					onClear: null,
					onOk: null,
					onClose: null,
					onToday: null
				})
			},
			_init: function () {
				FX.DatePicker.superclass._init.apply(this, arguments),
				this.cache = {
					showYear: null,
					showMonth: null
				},
				this._initTables(),
				this._bindEvts()
			},
			_initTables: function () {
				var b = this.options;
				switch (this.$datetable = this._createDatePicker(), this._loadDateData(this.$datetable, new Date(this.options.date)), this.$monthtable = this._createMonthPicker(), this.$timetable = this._createTimePicker(), b.viewMode) {
				case this.CONSTS.VIEWMODE.YM:
					this._loadMonthData(this.$monthtable, new Date(this.options.date)),
					this.$monthtable.appendTo(this.element).show();
					break;
				case this.CONSTS.VIEWMODE.HMS:
					this._loadTimeData(this.$timetable, this.options.date),
					this._addTimeOptPane(this.$timetable),
					this.$timetable.appendTo(this.element).show();
					break;
				case this.CONSTS.VIEWMODE.HM:
					this.$timetable.remove(),
					this.$timetable = this._createTimePicker({
							s: !1
						}),
					this._loadTimeData(this.$timetable, this.options.date),
					this.$timetable.appendTo(this.element).show();
					break;
				case this.CONSTS.VIEWMODE.YMD:
					this.$datetable.appendTo(this.element).show(),
					this.$monthtable.hide().appendTo(this.element);
					break;
				default:
					this.$datetable.appendTo(this.element).show(),
					this.$monthtable.hide().appendTo(this.element);
					var c = a("<tr/>").prependTo(this.$datetable.find("tfoot"));
					this._loadTimeData(this.$timetable, this.options.date),
					this.$timetable.show().appendTo(a('<td colspan="7"/>').appendTo(c))
				}
			},
			_createTimePicker: function (b) {
				b = b || {};
				var c = a('<table cellspacing = "0" cellpadding = "0" class="tt"/>'),
				d = a("<tbody>").appendTo(c),
				e = this,
				f = this.options,
				g = this.CONSTS.NAV,
				h = a("<td/>").append(a('<i class="icon-angleup"/>')).data("nav", g.plus),
				i = a("<td/>").append(a('<i class="icon-angledown"/>')).data("nav", g.minus),
				j = a("<tr/>").append(a('<td rowspan="2"/>').text(this._TT.TIME));
				return b.h !== !1 && (c.$h = a("<input/>").data("time", "h").keyup(function () {
							var a = this.value,
							b = parseInt(a, 10);
							b < 24 && b >= 0 && (f.date.setHours(b), FX.Utils.applyFunc(e, f.onDateUpdate, arguments))
						}).focus(function () {
							c.focus = a(this)
						}), c.focus = c.$h, j.append(a('<td rowspan="2"/>').append(c.$h))),
				b.m !== !1 && (c.$m = a("<input/>").data("time", "m").keyup(function () {
							var a = this.value,
							b = parseInt(a, 10);
							b < 60 && b >= 0 && (f.date.setMinutes(b), FX.Utils.applyFunc(e, f.onDateUpdate, arguments))
						}).focus(function () {
							c.focus = a(this)
						}), c.focus = c.$m, j.append(a('<td class="common" rowspan="2"/>').text(":")).append(a('<td rowspan="2"/>').append(c.$m))),
				b.s !== !1 && (c.$s = a("<input/>").data("time", "s").keyup(function () {
							var a = this.value,
							b = parseInt(a, 10);
							b < 60 && b >= 0 && (f.date.setSeconds(b), FX.Utils.applyFunc(e, f.onDateUpdate, arguments))
						}).focus(function () {
							c.focus = a(this)
						}), c.focus = c.$s, j.append(a('<td class="common" rowspan="2"/>').text(":")).append(a('<td rowspan="2"/>').append(c.$s))),
				j.append(h).appendTo(d),
				a("<tr/>").append(i).appendTo(d),
				c
			},
			_addTimeOptPane: function (b) {
				var c = this.CONSTS.NAV,
				d = a("<tfoot/>"),
				e = a("<tr/>").appendTo(d);
				this._createCell(e, this._TT.CLEAR, 2, c.clear, "clear"),
				this._createCell(e, this._TT.CURRENT, 3, c.current, "current"),
				this._createCell(e, this._TT.OK, 2, c.dok, "ok"),
				d.appendTo(b)
			},
			_createDatePicker: function () {
				var b = a('<table cellspacing = "2px" cellpadding = "0" class="dt"/>'),
				c = this.CONSTS.NAV,
				d = a("<thead/>").appendTo(b);
				h = a('<tr class = "mainhead"/>'),
				b.$prevm = this._createCell(h, '<i class="icon-angleleft"/>', 1, c.prevm, "prevm"),
				b.$title = a('<td class="title" colspan="5"/>').data("nav", c.title).appendTo(h),
				b.$nextm = this._createCell(h, '<i class="icon-angleright"/>', 1, c.nextm, "nextm"),
				h.appendTo(d),
				h = a("<tr/>");
				for (var e = 7; e > 0; --e)
					a("<td/>").appendTo(h);
				for (var e = 0; e < 7; ++e) {
					var f = h.children().eq(e);
					f.addClass("day name").text(Date._SDN[e]),
					[0, 6].indexOf(e) != -1 && f.addClass("weekend")
				}
				h.appendTo(d);
				var g = a('<tbody onselectstart="return false"/>').appendTo(b);
				for (e = 6; e > 0; e--)
					for (var h = a("<tr/>").appendTo(g), i = 0; i < 7; i++)
						a("<td/>").appendTo(h);
				var j = a("<tfoot/>").appendTo(b);
				this._createCell(a("<tr/>").appendTo(j), "", 7, null, "split");
				var h = a("<tr/>");
				return this._createCell(h, this._TT.CLEAR, 2, c.clear, "clear"),
				this._createCell(h, this._TT.TODAY, 3, c.today, "today"),
				this._createCell(h, this._TT.OK, 2, c.dok, "ok"),
				h.appendTo(j),
				b
			},
			_createMonthPicker: function () {
				for (var b = a('<table cellspacing = "2px" cellpadding = "0" class="mt"/>'), c = this.CONSTS.NAV, d = a("<tbody/>").appendTo(b), e = a("<tr/>").appendTo(d), f = 0; f < 2; f++)
					a('<td class="month"/>').appendTo(e);
				this._createCell(e, '<i class="icon-angleleft"/>', 1, c.prevy, " prevy"),
				this._createCell(e, '<i class="icon-angleright"/>', 1, c.nexty, " nexty");
				for (var g = 0; g < 5; g++)
					e = a("<tr/>").appendTo(d), a('<td class="month"/><td class="month"/><td class="year"/><td class="year"/>').appendTo(e);
				var h = a("<tfoot/>").appendTo(b);
				return e = a("<tr/>").appendTo(h),
				this._createCell(e, this._TT.OK, 4, c.mok, "ok"),
				b
			},
			_toPrevMonth: function () {
				var a = this.options.startDate,
				b = this.options.date,
				c = this.cache.showMonth,
				d = this.cache.showYear;
				return a ? void(d > a.getFullYear() ? c > 0 ? this._setMonth(c - 1) : (b.setFullYear(d - 1), this._setMonth(11)) : d == a.getFullYear() && c > a.getMonth() && c > 0 && (this._setMonth(c - 1), b < a && (b = new Date(a)))) : void(c > 0 ? this._setMonth(c - 1) : (b.setFullYear(d - 1), this._setMonth(11)))
			},
			_toNextMonth: function () {
				var a = this.options.endDate,
				b = this.options.date,
				c = this.cache.showMonth,
				d = this.cache.showYear;
				return a ? void(d < a.getFullYear() ? c < 11 ? this._setMonth(c + 1) : (b.setFullYear(d + 1), this._setMonth(0)) : d == a.getFullYear() && c < a.getMonth() && (this._setMonth(c + 1), b > a && (b = new Date(a)))) : void(c < 11 ? this._setMonth(c + 1) : (b.setFullYear(d + 1), this._setMonth(0)))
			},
			_toPrevDecade: function () {
				var a,
				b,
				c = this.options.startDate,
				d = this.options.date,
				e = d.getFullYear() - 10,
				f = d.getMonth();
				c && e == (b = c.getFullYear()) && (a = c.getMonth()),
				(!b || b < this.CONSTS.MINYEAR) && (b = this.CONSTS.MINYEAR),
				e < b ? (d.setFullYear(b), f < a && d.setMonth(a)) : d.setFullYear(e)
			},
			_toNextDecade: function () {
				var a,
				b,
				c = this.options.endDate,
				d = this.options.date,
				e = d.getFullYear() + 10,
				f = d.getMonth();
				c && e == (b = c.getFullYear()) && (a = c.getMonth()),
				(!b || b > this.CONSTS.MAXYEAR) && (b = this.CONSTS.MAXYEAR),
				e > b ? (d.setFullYear(b), f < a && d.setMonth(a)) : d.setFullYear(e)
			},
			_setMonth: function (a) {
				var b = this.options.date,
				c = b.getDate(),
				d = this.options.endDate,
				e = this.options.startDate,
				f = b.getMonthDays(a);
				c > f && b.setDate(f),
				b.setMonth(a),
				d && b > d && b.setDate(d.getDate()),
				e && b < e && b.setDate(e.getDate())
			},
			_loadDateData: function (a, b) {
				if (b) {
					var c = b.getFullYear(),
					d = b.getMonth(),
					e = b.getDate(),
					f = new Date,
					g = f.getFullYear(),
					h = f.getMonth(),
					i = f.getDate();
					this.cache.showYear = c,
					this.cache.showMonth = d;
					var j = this.options.startDate,
					k = this.options.endDate;
					a.$title.text(Date._MN[d] + ", " + c);
					var l = new Date(b);
					l.setDate(l.getMonthDays() + 1),
					k && l > k || l.getFullYear() > this.CONSTS.MAXYEAR ? a.$nextm.addClass("disabled").removeClass("hover").data("disabled", !0) : a.$nextm.removeClass("disabled").data("disabled", !1);
					var m = new Date(b);
					m.setDate(0),
					j && m < j || m.getFullYear() < this.CONSTS.MINYEAR ? a.$prevm.addClass("disabled").removeClass("hover").data("disabled", !0) : a.$prevm.removeClass("disabled").data("disabled", !1),
					b.setDate(1);
					var n = b.getDay() % 7;
					b.setDate(0 - n),
					b.setDate(b.getDate() + 1);
					for (var o = a.find("tbody").children().eq(0), p = 0; p < 6 && o.length; p++) {
						for (var q, r = o.children(), s = 0; s < 7; ++s, b.setDate(q + 1)) {
							var t = r.eq(s);
							if (t.removeClass().data("nav", this.CONSTS.NAV.day), !t.length)
								break;
							q = b.getDate(),
							t.text(q);
							var u = b.getMonth() == d;
							if (u) {
								var v = !1;
								if (null != j && j > b || null != k && k < b ? (t.addClass("day disabled"), v = !0) : t.addClass("day"), t.data("disabled", v), !v) {
									u && q == e && (this.cache.selectedDate && this.cache.selectedDate.removeClass("selected"), t.addClass("selected"), this.cache.selectedDate = t, this.cache.showDay = q),
									b.getFullYear() == g && b.getMonth() == h && q == i && t.addClass("today");
									var w = b.getDay();
									[0, 6].indexOf(w) != -1 && t.addClass("weekend")
								}
							} else
								t.addClass("oday").data("disabled", !0)
						}
						o = o.next()
					}
				}
			},
			_loadMonthData: function (b, c) {
				if (c) {
					var d = c.getFullYear(),
					e = c.getMonth(),
					f = a(b).data("midYear");
					f ? d > f + 5 ? f += 10 : d < f - 4 && (f -= 10) : f = d,
					a(b).data("midYear", f);
					var g,
					h,
					i,
					j,
					k = [f - 4, f - 3, f - 2, f - 1, f, f + 1, f + 2, f + 3, f + 4, f + 5],
					l = a("td.year", b),
					m = a("td.month", b),
					n = this.options,
					o = n.endDate,
					p = n.startDate;
					o && o && d == (g = o.getFullYear()) && (h = o.getMonth()),
					(!g || g > this.CONSTS.MAXYEAR) && (g = this.CONSTS.MAXYEAR),
					p && p && d == (i = p.getFullYear()) && (j = p.getMonth()),
					(!i || i < this.CONSTS.MINYEAR) && (i = this.CONSTS.MINYEAR);
					for (var q = 0; q < 12; q++) {
						var r = m.eq(q).text(Date._MN[q]).data("nav", this.CONSTS.NAV.month).data("month", q);
						if (q == e && (this.cache.selectedMonth && this.cache.selectedMonth.removeClass("selected"), r.addClass("selected"), this.cache.selectedMonth = r), !FX.Utils.isEmpty(j) && q < j || !FX.Utils.isEmpty(h) && q > h ? r.addClass("disabled").data("disabled", !0) : r.removeClass("disabled").data("disabled", !1), q < 10) {
							var s = l.eq(q).text(k[q]).data("nav", this.CONSTS.NAV.year);
							k[q] == d && (this.cache.selectedYear && this.cache.selectedYear.removeClass("selected"), s.addClass("selected"), this.cache.selectedYear = s),
							!FX.Utils.isEmpty(i) && k[q] < i || !FX.Utils.isEmpty(g) && k[q] > g ? s.addClass("disabled").data("disabled", !0) : s.removeClass("disabled").data("disabled", !1)
						}
					}
					var t = a("td.prevy", b).removeClass("disabled").data("disabled", !1);
					k[0] <= i && t.addClass("disabled").data("disabled", !0).removeClass("hover");
					var u = a("td.nexty", b).removeClass("disabled").data("disabled", !1);
					k[9] >= g && u.addClass("disabled").data("disabled", !0).removeClass("hover")
				}
			},
			_loadTimeData: function (a, b) {
				if (b) {
					var c = b.getHours() + "",
					d = b.getMinutes() + "",
					e = b.getSeconds() + "";
					a.$h && a.$h.val(FX.Utils.leftPad(c, 2, "0")),
					a.$m && a.$m.val(FX.Utils.leftPad(d, 2, "0")),
					a.$s && a.$s.val(FX.Utils.leftPad(e, 2, "0"))
				}
			},
			_doTimeInc: function (a, b) {
				var c = b.data("time"),
				d = this.options;
				if ("h" === c) {
					var e = (d.date.getHours() + 1) % 24;
					d.date.setHours(e),
					a.$h.val(FX.Utils.leftPad(e + "", 2, "0"))
				} else if ("m" === c) {
					var e = (d.date.getMinutes() + 1) % 60;
					d.date.setMinutes(e),
					a.$m.val(FX.Utils.leftPad(e + "", 2, "0"))
				} else {
					var e = (d.date.getSeconds() + 1) % 60;
					d.date.setSeconds(e),
					a.$s.val(FX.Utils.leftPad(e + "", 2, "0"))
				}
				b.select(),
				FX.Utils.applyFunc(this, d.onDateUpdate, arguments, !1)
			},
			_doTimeDec: function (a, b) {
				var c = b.data("time"),
				d = this.options;
				if ("h" === c) {
					var e = (d.date.getHours() + 23) % 24;
					d.date.setHours(e),
					a.$h.val(FX.Utils.leftPad(e + "", 2, "0"))
				} else if ("m" === c) {
					var e = (d.date.getMinutes() + 59) % 60;
					d.date.setMinutes(e),
					a.$m.val(FX.Utils.leftPad(e + "", 2, "0"))
				} else {
					var e = (d.date.getSeconds() + 59) % 60;
					d.date.setSeconds(e),
					a.$s.val(FX.Utils.leftPad(e + "", 2, "0"))
				}
				b.select(),
				FX.Utils.applyFunc(this, d.onDateUpdate, arguments, !1)
			},
			_bindEvts: function () {
				var b = this,
				c = this.options,
				d = this.CONSTS.NAV,
				e = this.$monthtable,
				f = this.$datetable,
				g = this.$timetable,
				h = function (h) {
					var i = h.target,
					j = a(i).closest("td"),
					k = h.type,
					l = j.data("nav");
					if (!j.data("disabled") && 0 !== j.length && l)
						if (b.options.date || (b.options.date = new Date), "mouseover" === k)
							j.addClass("hover");
						else if ("mouseup" === k)
							switch (j.removeClass("hover"), l) {
							case d.prevm:
								b._toPrevMonth(),
								b._loadDateData(f, new Date(b.options.date)),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
								break;
							case d.nextm:
								b._toNextMonth(),
								b._loadDateData(f, new Date(b.options.date)),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
								break;
							case d.title:
								b._loadMonthData(e, new Date(b.cache.showYear, b.cache.showMonth)),
								e.css({
									position: "absolute",
									top: 0,
									"z-index": FX.STATIC.zIndex++
								}).show("fast");
								break;
							case d.clear:
								b.options.date = null,
								b.cache.selectedDate && b.cache.selectedDate.removeClass("selected"),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments),
								FX.Utils.applyFunc(b, c.onClear, arguments);
								break;
							case d.current:
								b.options.date = new Date,
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
							case d.today:
								var m = new Date;
								if (b.options.startDate && m < b.options.startDate || b.options.endDate && m > b.options.endDate)
									return;
								b.options.date = m,
								b.cache.selectedDate && b.cache.selectedDate.removeClass("selected"),
								b.cache.selectedDate = b.$datetable.find("td.today").addClass("selected"),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments),
								FX.Utils.applyFunc(b, c.onToday, arguments);
								break;
							case d.dok:
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments),
								FX.Utils.applyFunc(b, c.onOk, arguments);
								break;
							case d.prevy:
								b._toPrevDecade(),
								b._loadMonthData(e, new Date(b.options.date)),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
								break;
							case d.nexty:
								b._toNextDecade(),
								b._loadMonthData(e, new Date(b.options.date)),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
								break;
							case d.mok:
								b._loadDateData(f, new Date(b.options.date)),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments),
								e.hide("fast");
								break;
							case d.cancel:
								b._loadDateData(f, new Date(b.options.date)),
								e.hide("fast");
								break;
							case d.year:
								b.cache.selectedYear && b.cache.selectedYear.removeClass("selected"),
								b.cache.selectedYear = j;
								var n = b.options.date;
								n.setFullYear(j.text()),
								b._loadMonthData(e, new Date(n)),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
								break;
							case d.month:
								b.cache.selectedMonth && b.cache.selectedMonth.removeClass("selected"),
								b.cache.selectedMonth = j.addClass("selected"),
								b.options.date.setMonth(j.data("month")),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments);
								break;
							case d.day:
								b.cache.selectedDate && b.cache.selectedDate.removeClass("selected"),
								b.cache.selectedDate = j.addClass("selected");
								var n = b.options.date;
								n.setFullYear(b.cache.showYear),
								n.setMonth(b.cache.showMonth),
								n.setDate(j.text()),
								FX.Utils.applyFunc(b, c.onDateUpdate, arguments),
								g.parent().length || FX.Utils.applyFunc(b, c.onClose, arguments);
								break;
							case d.plus:
								b._doTimeInc(g, g.focus);
								break;
							case d.minus:
								b._doTimeDec(g, g.focus)
							}
						else
							"mouseout" === k && j.removeClass("hover")
				};
				this.element.unbind(),
				this.element.bind("mousedown", h).bind("mouseover", h).bind("mouseup", h).bind("mouseout", h)
			},
			_createCell: function (b, c, d, e, f) {
				var g = a("<td class/>").attr("colSpan", d).html(c).appendTo(b);
				return e && g.data("nav", e),
				f = f ? "btn " + f : "btn",
				g.addClass(f),
				g
			},
			getValue: function () {
				var a = this.options,
				b = this.CONSTS.VIEWMODE,
				c = this.options.date;
				return c && (c.setMilliseconds(0), a.viewMode !== b.YMD && a.viewMode !== b.YM || c.setHours(0, 0, 0)),
				c
			},
			setValue: function (a) {
				this.options.date = a
			},
			getText: function () {
				return this.getValue()
			},
			setText: function (a) {
				this.setValue(a)
			}
		}),
	a.shortcut("datepicker", FX.DatePicker)
}
(jQuery), function (a) {
	FX.ComboBox = FX.extend(FX.Trigger, {
			_defaultConfig: function () {
				return a.extend(FX.ComboBox.superclass._defaultConfig.apply(), {
					baseCls: "fui_combo",
					triggerIcon: "icon-ui-combo",
					triggerList: "combo-list",
					textField: "text",
					valueField: "value",
					allowBlank: !0,
					async: null,
					asyncResultKey: "items",
					items: [{
							value: "1",
							text: "1"
						}, {
							value: "2",
							text: "2"
						}, {
							value: "3",
							text: "3"
						}
					],
					searchable: !0,
					onDataFilter: null,
					onItemCreate: null,
					onAfterItemSelect: null,
					onAfterTriggerHide: null,
					limitData: 300,
					emptyTip: null
				})
			},
			_init: function () {
				FX.ComboBox.superclass._init.apply(this, arguments),
				this._initStoreValue(),
				this.options.async && !this._hasDefaultValue() || this._createTriggerView()
			},
			_initStoreValue: function () {
				this.text = null,
				this.value = null
			},
			_hasDefaultValue: function () {
				return !FX.Utils.isEmpty(this.options.value)
			},
			_onTriggerClick: function (b) {
				if (this.isEnabled()) {
					this._showTriggerView();
					var c = this,
					d = "mousedown";
					a(document).bind(d + ".trigger", function (b) {
						var d = b.target,
						e = a(d).closest(c.triggerView);
						0 === e.length && c._hideTriggerView()
					})
				}
			},
			_hideTriggerView: function () {
				var b = this.options;
				if (this.triggerView) {
					var c = "mousedown";
					if (a(document).unbind(c + ".trigger"), this.triggerView.detach(), FX.Utils.applyFunc(this, b.onAfterTriggerHide, [], !1), !this.changed)
						return;
					FX.Utils.applyFunc(this, b.onStopEdit, [], !1)
				}
			},
			_showTriggerView: function () {
				null == this.triggerView && this._createTriggerView(),
				this.triggerView.appendTo("body").css(this._calTriggerViewPos()).show(),
				this.changed = !1
			},
			_createTriggerView: function () {
				if (this.triggerView = a('<div class="x-dropdown"/>'), this.valueMap = {}, this.options.searchable) {
					var b = this,
					c = a('<div class="fui_combo-search"/>').appendTo(this.triggerView);
					a("<input/>").bind("input propertychange", function (a) {
						if (b.searchValue !== this.value) {
							b.searchinterval && clearTimeout(b.searchinterval),
							b.searchValue = this.value,
							b.$listView.empty();
							var c = b._createLoadingIcon("...");
							b.searchinterval = setTimeout(function () {
									c.remove(),
									b.startIndex = 0,
									b._onBeforeItemsLoaded(),
									b._createItemList(b.searchValue)
								}, 500)
						}
					}).appendTo(c),
					c.append(a('<i class="icon-search search-icon"/>'))
				}
				this.$listView = a('<div class="x-dropdown-list"/>').addClass(this.options.triggerList).appendTo(this.triggerView),
				this._onLoadItems(),
				this._bindViewEvts()
			},
			_hideItems: function (b) {
				var c = this.$listView.children(".x-dropdown-item");
				FX.Utils.forEach(c, function (c, d) {
					var e = a(d);
					e.text().indexOf(b) < 0 && e.addClass("hide")
				})
			},
			_onLoadItems: function (a) {
				var b = this.options,
				c = this;
				if (b.async && b.async.url)
					if (this.items)
						c._onBeforeItemsLoaded(), FX.Utils.forEach(this.items, function (b, d) {
							c._onItemCreate(d, b, a)
						});
					else {
						var d = this._createLoadingIcon(" ...");
						FX.Utils.applyFunc(this, b.onBeforeAsync, [], !1),
						FX.Utils.dataAjax({
							url: b.async.url,
							data: b.async.data
						}, function (e, f) {
							d.remove(),
							c._onBeforeItemsLoaded(),
							c.items = FX.Utils.applyFunc(c, b.onAsyncSuccess, [e], !1),
							c.items === !1 ? (c.items = [], c.startIndex = 0, FX.Utils.forEach(e[b.asyncResultKey], function (a, d) {
									var e = {};
									FX.Utils.isEmpty(d) || (e[b.textField] = d[b.textField] || d, e[b.valueField] = d[b.valueField] || d, c.items.push(e))
								}), c.items = c._sortItems(c.items), c._createItemList(a)) : FX.Utils.forEach(c.items, function (b, d) {
								c._onItemCreate(d, b, a)
							}),
							c._onAfterItemsLoaded()
						}, function () {
							d.remove();
						})
					}
				else if (b.items) {
					if (c._onBeforeItemsLoaded(), FX.Utils.isArray(b.items))
						FX.Utils.forEach(b.items, function (b, d) {
							c._onItemCreate(d, b, a)
						});
					else {
						var e = 0;
						for (var f in b.items) {
							var g = {};
							g[b.valueField] = f,
							g[b.textField] = b.items[f],
							c._onItemCreate(g, e, a),
							e++
						}
					}
					c._onAfterItemsLoaded()
				}
			},
			_sortItems: function (a) {
				var b = this.options;
				return a.sort(function (a, c) {
					var d = a[b.valueField] || a[b.textField] || a,
					e = c[b.valueField] || c[b.textField] || c;
					return  + (d > e) ||  + (d === e) - 1
				})
			},
			_createItemList: function (a) {
				var b = this,
				c = this.options;
				this.items || (this.items = c.items || []),
				this.startIndex = this.startIndex || 0;
				for (var d = 0, e = !0; d < c.limitData; ) {
					if (this.startIndex >= this.items.length) {
						e = !1;
						break
					}
					var f = this.items[this.startIndex];
					this.startIndex++,
					b._onItemCreate(f, d, a) !== !1 && d++
				}
				e && b._bindLoadMore(a)
			},
			_bindLoadMore: function (a) {
				var b = this;
				this.$listView.bind("scroll.loadMore", function () {
					b.$listView.scrollTop() + b.$listView.height() + 100 >= 26 * b.startIndex && (b.$listView.unbind("scroll.loadMore"), b._createItemList(a))
				})
			},
			_createLoadingIcon: function (b) {
				var c = this.$listView.children(".loading-text");
				return 0 === c.length && (c = a('<div class="loading-text"/>').appendTo(this.$listView), a("<span/>").text(b).appendTo(c)),
				c
			},
			_onAfterItemsLoaded: function () {
				var b = this.options,
				c = this.$listView.children(a(".x-dropdown-item")),
				d = b.allowBlank ? 1 : 0;
				b.emptyTip && c.length <= d && this.$listView.empty().append(a('<div class="empty-tip"/>').text(b.emptyTip))
			},
			_onBeforeItemsLoaded: function () {
				var b = this.options,
				c = this;
				b.allowBlank && a('<a class="x-dropdown-item"/>').text("----").appendTo(c.$listView)
			},
			_onItemCreate: function (b, c, d) {
				var e = this.options,
				f = this;
				if (FX.Utils.applyFunc(this, e.onItemCreate, [b, c], !1) === !1) {
					var g = FX.Utils.applyFunc(this, e.onDataFilter, [b, c], !1);
					g !== !1 && (b = g);
					var h = b[e.textField],
					i = b[e.valueField];
					if (this.valueMap[i] = h, !FX.Utils.isEmpty(d) && (h + "").indexOf(d) < 0)
						return !1;
					var j = a('<a class="x-dropdown-item"/>').data("item", b).attr("option", i).attr("title", h).text(h).appendTo(this.$listView);
					if ((b.selected || !FX.Utils.isEmpty(i) && this.value === i) && (a(".select", this.triggerView).removeClass("select"), j.addClass("select"), this.value = i, this.text = h, this.editComp.val(h)), b.isOther) {
						var k = a('<div class="fui-text-other"/>');
						this.element.after(k),
						this.textOther = FX.createWidget({
								renderEl: k,
								width: e.width ? e.width : 240,
								type: "text",
								visible: !!b.selected,
								onStopEdit: function () {
									FX.Utils.applyFunc(f, e.onStopEdit, [], !1)
								}
							}),
						j.addClass("item-other")
					}
				}
			},
			_bindViewEvts: function () {
				var b = this,
				c = "click",
				d = !1;
				this.triggerView.bind(c, function (c) {
					if (d)
						return void(d = !1);
					var e = a(c.target).closest("a");
					if (e.length > 0) {
						var f = e.data("item");
						b._onItemClick(e, f),
						c.stopEvent()
					}
				})
			},
			_onItemClick: function (b, c) {
				var d = this.options;
				a(".select", this.triggerView).removeClass("select"),
				c ? (b.addClass("select"), this.value = c[d.valueField], this.text = c[d.textField]) : (this.value = null, this.text = null),
				this.editComp.val(this.text),
				this.textOther && this.textOther.setVisible(b.hasClass("item-other")),
				FX.Utils.applyFunc(this, d.onAfterItemSelect, [b, c], !1),
				FX.Utils.applyFunc(this, d.onAfterEdit, [b, c], !1),
				this.changed = !0,
				this._hideTriggerView()
			},
			effectItemLinkWidgets: function () {
				var b = this.options;
				if (!b.async && this.triggerView) {
					var c = a(".select", this.triggerView);
					FX.Utils.applyFunc(this, b.onAfterItemSelect, [c, c.data("item")], !1)
				}
			},
			checkValidate: function () {
				var a = this.options;
				return !(!a.allowBlank && FX.Utils.isEmpty(this.getValue()))
			},
			setEnable: function (a) {
				FX.ComboBox.superclass.setEnable.apply(this, [a]),
				this.textOther && this.textOther.setEnable(a)
			},
			setValue: function (b) {
				if (this.value = b, this.valueMap && this.valueMap[b] ? this.text = this.valueMap[b] : this.text = b, this.triggerView)
					if (a(".select", this.triggerView).removeClass("select"), FX.Utils.isEmpty(b))
						this.textOther && this.textOther.setVisible(!1);
					else {
						var c = [];
						if (a("a.x-dropdown-item", this.$listView).each(function (d, e) {
								var f = a(e).attr("option");
								f == b && (c = a(e).addClass("select"))
							}), this.textOther) {
							if (0 === c.length)
								return void this.setOtherItemSelect(b);
							this.textOther.setVisible(!1)
						}
					}
				this.editComp && this.editComp.val(this.text)
			},
			setOtherItemSelect: function (a) {
				this.$listView.children(".item-other").addClass("select"),
				this.editComp.val(""),
				this.textOther.setVisible(!0),
				this.textOther.setValue(a)
			},
			setText: function (a) {
				this.text = a,
				this.editComp && this.editComp.val(a)
			},
			getValue: function () {
				return this.textOther && this.textOther.isVisible() ? this.textOther.getValue() : this.value
			},
			getText: function () {
				return this.textOther && this.textOther.isVisible() ? this.textOther.getValue() : this.text
			},
			rebuild: function () {
				this.triggerView && (this.triggerView.remove(), this.triggerView = null, this.$listView = null, this.textOther && (this.textOther.destroy(), this.textOther = null)),
				FX.ComboBox.superclass.rebuild.apply(this, arguments)
			},
			getOptions: function () {
				var b = this.options,
				c = {
					noRepeat: b.noRepeat
				};
				return b.async && b.async.url ? c.async = b.async : c.items = b.items,
				a.extend(FX.ComboBox.superclass.getOptions.apply(this, arguments), c)
			}
		}),
	a.shortcut("combo", FX.ComboBox)
}
(jQuery), function (a) {
	FX.ComboCheckBox = FX.extend(FX.ComboBox, {
			_defaultConfig: function () {
				return a.extend(FX.ComboCheckBox.superclass._defaultConfig.apply(), {
					baseCls: "fui_combocheck",
					triggerList: "combocheck-list",
					limitData: 300,
					hasSelectAll: !0
				})
			},
			_initStoreValue: function () {
				this.value = [],
				this.text = []
			},
			_hasDefaultValue: function () {
				var a = this.options.value;
				return !FX.Utils.isNull(a) && a.length > 0
			},
			_onBeforeItemsLoaded: function () {
				var a = this.options;
				if (a.hasSelectAll) {
					var b = {
						selectAll: !0
					};
					b[this.options.textField] = "",
					this._onItemCreate(b)
				}
			},
			_onAfterItemsLoaded: function () {
				this._setEditCompText()
			},
			_createItemList: function (a) {
				FX.ComboCheckBox.superclass._createItemList.apply(this, arguments),
				this._checkSelectAll()
			},
			_onItemCreate: function (b, c, d) {
				var e = this.options,
				f = b[e.valueField],
				g = b[e.textField];
				if (!FX.Utils.isEmpty(d) && (g + "").indexOf(d) < 0)
					return !1;
				var h = a('<a class="x-dropdown-item x-check"/>').data("item", b).attr("option", f).attr("title", g).appendTo(this.$listView);
				a('<i class="icon-blank"/>').appendTo(h),
				a("<span/>").text(g).appendTo(h),
				(b.selected || this.value.indexOf(f) > -1) && (h.addClass("select"), b.selected && (this.value.push(f), this.text.push(g))),
				b.selectAll ? (h.addClass("select-all"), this.$selectAllItem = h) : this.valueMap[f] = g
			},
			_onItemClick: function (b, c) {
				var d = this,
				e = this.options,
				f = b.hasClass("select");
				if (c.selectAll) {
					var g = a(".x-dropdown-item", this.triggerView);
					f ? (FX.Utils.isEmpty(this.searchValue) ? (this.value = [], this.text = []) : FX.Utils.forEach(g, function (b, c) {
							var e = a(c).data("item");
							d._removeItem(e)
						}), g.removeClass("select")) : (FX.Utils.forEach(g, function (b, c) {
							var e = a(c).data("item");
							d._addItem(e)
						}), g.addClass("select"))
				} else
					f ? (b.removeClass("select"), this._removeItem(b.data("item")), this.$selectAllItem && this.$selectAllItem.removeClass("select")) : (b.addClass("select"), this._addItem(b.data("item")), this._checkSelectAll());
				this._setEditCompText(),
				FX.Utils.applyFunc(this, e.onAfterItemSelect, [this.value, this.text], !1),
				FX.Utils.applyFunc(this, e.onAfterEdit, [this.value, this.text], !1),
				this.changed = !0
			},
			_addItem: function (a) {
				var b = this.options;
				if (!a.selectAll) {
					var c = a[b.valueField],
					d = a[b.textField],
					e = this.value.indexOf(c);
					e > -1 || (this.value.push(c), this.text.push(d))
				}
			},
			_removeItem: function (a) {
				var b = this.options;
				if (!a.selectAll) {
					var c = this.value.indexOf(a[b.valueField]);
					c < 0 || (this.value.splice(c, 1), this.text.splice(c, 1))
				}
			},
			_checkSelectAll: function () {
				this.$listView && this.$selectAllItem && (this.$selectAllItem.hasClass("select") ? this.$listView.children().not(".select").length >= 1 && this.$selectAllItem.removeClass("select") : this.$listView.children().not(".select").length <= 1 && this.$selectAllItem.addClass("select"))
			},
			_setEditCompText: function () {
				this.editComp && this.editComp.val(this.text.join(","))
			},
			effectItemLinkWidgets: function () {},
			checkValidate: function () {
				var a = this.options;
				return !(!a.allowBlank && 0 === this.value.length)
			},
			setValue: function (b) {
				var c = this,
				d = a.makeArray(b);
				this.text = [],
				this.value = d,
				this.valueMap ? (a(".select", c.triggerView).removeClass("select"), FX.Utils.forEach(d, function (b, d) {
						var e = c.valueMap[d];
						FX.Utils.isNull(e) ? c.text.push(d) : c.text.push(e),
						c.triggerView && a("a.x-dropdown-item", c.$listView).each(function (b, c) {
							var e = a(c).attr("option");
							e == d && a(c).addClass("select")
						})
					})) : this.text = d.slice(0),
				this._setEditCompText()
			},
			setText: function (b) {
				this.text = a.makeArray(b),
				this.value = a.makeArray(b),
				this._setEditCompText()
			},
			getValue: function () {
				return this.value
			},
			getNullValue: function () {
				return []
			},
			getText: function () {
				return this.text
			}
		}),
	a.shortcut("combocheck", FX.ComboCheckBox)
}
(jQuery), function (a) {
	FX.XComboCheckBox = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.XComboCheckBox.superclass._defaultConfig.apply(), {
					baseCls: "fui_combocheck",
					waterMark: null,
					hasSelectAll: !0,
					hasSelectEmpty: !0,
					textField: "text",
					valueField: "value",
					async: null,
					asyncResultKey: "items",
					searchable: !0,
					onStopEdit: null,
					height: 30,
					width: 240,
					edge: {
						width: 240,
						height: 200
					},
					hasLimit: !1,
					searchKey: "keyword"
				})
			},
			_init: function () {
				FX.XComboCheckBox.superclass._init.apply(this, arguments);
				var b = this.options;
				this.values = [],
				this.texts = [],
				this.valueMap = {},
				b.hasSelectEmpty && (this.valueMap[FX.CONST.PARAMETER.EMPTY] = ""),
				this.editComp = a('<input class="fui_trigger-input" />').attr("readonly", "readonly").attr("placeholder", b.waterMark).appendTo(this.element),
				a('<i class="fui_trigger-btn icon-ui-combo" />').appendTo(this.element),
				FX.Utils.isObjectEmpty(b.value) || this._createTriggerView(),
				this._bindEvents()
			},
			_bindEvents: function () {
				var b = this;
				this.element.unbind("click.trigger"),
				this.element.bind("click.trigger", function (c) {
					var d = a(c.target);
					(d.closest(".fui_trigger-input").length > 0 || d.closest(".fui_trigger-btn").length > 0) && b._onTriggerClick()
				})
			},
			_onTriggerClick: function () {
				var b = this;
				this._showTriggerView(),
				a(document).bind("mousedown.trigger", function (c) {
					var d = c.target,
					e = a(d).closest(b.$triggerView);
					0 === e.length && b._hideTriggerView()
				})
			},
			_showTriggerView: function () {
				var a = this.options;
				this.$triggerView || this._createTriggerView(),
				a.hasLimit && !FX.Utils.isObjectEmpty(this.values) && (this._refreshItems(), this._afterLoadItems()),
				this.$triggerView.appendTo("body").css(this._calTriggerViewPos()).show()
			},
			_hideTriggerView: function () {
				var b = this.options;
				this.$triggerView && (a(document).unbind("mousedown.trigger"), this.$triggerView.detach(), FX.Utils.applyFunc(this, b.onStopEdit, [], !1))
			},
			_calTriggerViewPos: function () {
				var a = {
					"z-Index": FX.STATIC.zIndex++
				},
				b = this.element.offset(),
				c = this.options.edge,
				d = document.body.clientWidth - b.left;
				d < c.width ? (a.right = d - this.element.outerWidth(), a.left = "auto") : (a.right = "auto", a.left = b.left);
				var e = document.body.clientHeight + document.body.scrollTop - b.top - this.element.outerHeight();
				return e < c.height ? (a.top = "auto", a.bottom = document.body.clientHeight - b.top) : (a.top = b.top + this.element.outerHeight(), a.bottom = "auto"),
				a
			},
			_createTriggerView: function () {
				var b = this,
				c = this.options;
				if (this.$triggerView = a('<div class="x-dropdown" />'), c.searchable) {
					var d = a('<div class="fui_combo-search"/>').appendTo(this.$triggerView);
					a("<input />").bind("input propertychange", function () {
						b.searchValue !== this.value && b._doSearch(this.value)
					}).appendTo(d),
					d.append(a('<i class="icon-search search-icon"/>'))
				}
				this.$listView = a('<div class="x-dropdown-list combocheck-list"/>').appendTo(this.$triggerView),
				this._loadItems(),
				this._refreshData()
			},
			_loadItems: function () {
				var b = this,
				c = this.options;
				if (this.itemsMap = {}, c.async && c.async.url) {
					this.ajaxObj && this.ajaxObj.abort && this.ajaxObj.abort();
					var d = a('<div class="loading-text" />').append(a("<span />").text(" ...")).appendTo(b.$listView),
					e = {
						hasLimit: c.hasLimit
					};
					FX.Utils.isEmpty(this.searchValue) || (e[c.searchKey] = this.searchValue),
					this.ajaxObj = FX.Utils.dataAjax({
							url: c.async.url,
							data: a.extend(e, c.async.data)
						}, function (a) {
							FX.Utils.forEach(a[c.asyncResultKey], function (a, d) {
								var e = {};
								e[c.textField] = d[c.textField] || d,
								e[c.valueField] = d[c.valueField] || d,
								b._createItem(e)
							}),
							b._afterLoadItems()
						}, null, function () {
							d.remove(),
							b.ajaxObj = null
						})
				} else
					c.items && (FX.Utils.forEach(c.items, function (a, d) {
							var e = {};
							e[c.textField] = d[c.textField] || d,
							e[c.valueField] = d[c.valueField] || d,
							b._createItem(e)
						}), b._afterLoadItems())
			},
			_doSearch: function (a) {
				var b = this,
				c = this.options;
				b.searchValue = a,
				b.$listView.children().addClass("hide");
				var d = b._createLoadingIcon("...");
				b.searchinterval && clearTimeout(b.searchinterval),
				c.async && c.hasLimit ? b.searchinterval = setTimeout(function () {
						d.remove(),
						b.items = null,
						b.$listView.empty(),
						b._loadItems()
					}, 600) : (b.searchinterval = setTimeout(function () {
								d.remove(),
								b.$listView.children().removeClass("hide"),
								FX.Utils.isEmpty(b.searchValue) || b._hideItems(b.searchValue)
							}, 500), FX.Utils.isEmpty(a) ? this.$selectAllItem.find("span").text("") : (this.$selectAllItem.find("span").text(""), this.$listView.children("a.select-empty").addClass("hide")))
			},
			_createLoadingIcon: function (b) {
				var c = this.$listView.children(".loading-text");
				return 0 === c.length && (c = a('<div class="loading-text"/>').appendTo(this.$listView), a("<span/>").text(b).appendTo(c)),
				c
			},
			_createItem: function (b) {
				var c = this,
				d = this.options,
				e = b[d.valueField],
				f = b[d.textField],
				g = a('<a class="x-dropdown-item x-check"/>').data("item", b).attr("option", e).attr("title", f).appendTo(this.$listView);
				a('<i class="icon-blank"/>').appendTo(g),
				a("<span/>").text(f).appendTo(g),
				this.valueMap[e] = f,
				this.itemsMap[e] = !0,
				this.values.indexOf(e) > -1 && g.addClass("select").prependTo(this.$listView),
				g.click(function (a) {
					c._onItemClick(g, b),
					a.preventDefault()
				})
			},
			_createCustomItem: function (b) {
				var c = this,
				d = this.options,
				e = b[d.valueField],
				f = b[d.textField],
				g = a('<a class="x-dropdown-item x-check"><i class="icon-blank"/><span>' + f + "</span></a>").data("item", b).attr("option", e).attr("title", f).prependTo(this.$listView);
				b.selectAll ? (g.addClass("select-all"), this.$selectAllItem = g) : b.selectEmpty && (g.addClass("select-empty"), this.values.indexOf(e) > -1 && g.addClass("select")),
				g.click(function (a) {
					c._onItemClick(g, b),
					a.preventDefault()
				})
			},
			_afterLoadItems: function () {
				var b = this,
				c = this.options;
				if (FX.Utils.forEach(this.values, function (a, d) {
						if (!(b.itemsMap[d] || c.hasSelectEmpty && d == FX.CONST.PARAMETER.EMPTY)) {
							var e = {};
							e[c.valueField] = d,
							e[c.textField] = b.valueMap[d] || d,
							b._createItem(e)
						}
					}), c.hasSelectEmpty) {
					a(".select-empty", this.$listView).remove();
					var d = {
						selectEmpty: !0
					};
					d[c.valueField] = FX.CONST.PARAMETER.EMPTY,
					d[c.textField] = "",
					this._createCustomItem(d)
				}
				if (c.hasSelectAll) {
					a(".select-all", this.$listView).remove();
					var e = {
						selectAll: !0
					};
					e[c.textField] = "",
					this._createCustomItem(e),
					this._checkSelectAll()
				}
				FX.Utils.isEmpty(this.searchValue) || (this.$selectAllItem.find("span").text(""), this.$listView.children("a.select-empty").addClass("hide"))
			},
			_hideItems: function (b) {
				var c = this.$listView.children("a").not(".select-all").not(".select-empty");
				FX.Utils.forEach(c, function (c, d) {
					var e = a(d);
					e.text().indexOf(b) < 0 && e.addClass("hide")
				})
			},
			_onItemClick: function (b, c) {
				var d = this,
				e = b.hasClass("select");
				if (c.selectAll) {
					var f = this.$listView.children("a").not(".hide").not(".select-all");
					e ? (b.removeClass("select"), this.selectAll = !1, FX.Utils.isEmpty(this.searchValue) && (this.values = [])) : (b.addClass("select"), FX.Utils.isEmpty(this.searchValue) && (this.selectAll = !0)),
					FX.Utils.forEach(f, function (b, c) {
						d._handleItemClick(a(c), e)
					})
				} else
					this._handleItemClick(b, e);
				this._refreshData()
			},
			_refreshData: function () {
				var a = this;
				this.valueMap && (a.texts = [], FX.Utils.forEach(this.values, function (b, c) {
						var d = a.valueMap[c];
						d && a.texts.push(d)
					})),
				this.editComp.val(this.texts.join(","))
			},
			_handleItemClick: function (a, b) {
				var c = this.options,
				d = a.data("item"),
				e = d[c.valueField];
				d[c.textField];
				if (b) {
					a.removeClass("select");
					var f = this.values.indexOf(e);
					f > -1 && this.values.splice(f, 1),
					this.$selectAllItem && this.$selectAllItem.removeClass("select"),
					this.selectAll = !1
				} else
					a.addClass("select"), this.values.indexOf(e) < 0 && this.values.push(e), this._checkSelectAll()
			},
			_checkSelectAll: function () {
				var a = this.$listView.children("a").not(".hide").not(".select-all"),
				b = this.$listView.children("a.select").not(".hide").not(".select-all");
				a.length === b.length && (this.$selectAllItem && this.$selectAllItem.addClass("select"), FX.Utils.isEmpty(this.searchValue) && (this.selectAll = !0))
			},
			_refreshItems: function () {
				var b = this,
				c = this.options;
				a("a", this.$listView).each(function (d, e) {
					var f = a(e).data("item");
					f && (b.values.indexOf(f[c.valueField]) > -1 ? (a(e).addClass("select"), c.hasLimit && a(e).prependTo(b.$listView)) : a(e).removeClass("select"))
				})
			},
			doResize: function () {
				FX.XComboCheckBox.superclass.doResize.apply(this, arguments);
				var a = this.options,
				b = a.height;
				this.element.css({
					"line-height": b - 2 + "px"
				})
			},
			setValue: function (a) {
				var b = this;
				a || (a = []);
				var c = [];
				FX.Utils.isArray(a) ? c = a : (c = a.items || [], a.hasEmpty && c.indexOf(FX.CONST.PARAMETER.EMPTY) < 0 && c.unshift(FX.CONST.PARAMETER.EMPTY)),
				b.values = [],
				b.texts = [],
				FX.Utils.forEach(c, function (a, c) {
					var d = b.valueMap[c];
					FX.Utils.isNull(d) ? b.texts.push(c) : b.texts.push(d),
					b.values.push(c)
				}),
				this._refreshItems(),
				this.editComp.val(this.texts.join(","))
			},
			getValue: function () {
				if (FX.Utils.isObjectEmpty(this.values))
					return {};
				var a = [].concat(this.values),
				b = !1,
				c = a.indexOf(FX.CONST.PARAMETER.EMPTY);
				return c > -1 && (b = !0, a.splice(c, 1)), {
					hasEmpty: b,
					items: a
				}
			}
		}),
	a.shortcut("xcombocheck", FX.XComboCheckBox)
}
(jQuery), function (a) {
	FX.UserCheckBox = FX.extend(FX.XComboCheckBox, {
			setValue: function (a) {
				FX.UserCheckBox.superclass.setValue.apply(this, arguments);
				var b = this,
				c = [];
				FX.Utils.forEach(this.values, function (a, d) {
					b.valueMap[d] || c.push(d)
				}),
				this.valueMap[FX.USER_ID.CurrentUser] = "",
				FX.Utils.isObjectEmpty(c) || FX.Utils.ajax({
					url: "/corp/list_member_name",
					data: {
						isUserOnly: !0,
						members: c
					}
				}, function (a) {
					FX.Utils.forEach(a.users, function (a, c) {
						b.valueMap[c._id] = c.nickname
					}),
					b.texts = [],
					FX.Utils.forEach(b.values, function (a, c) {
						b.texts.push(b.valueMap[c])
					}),
					b.editComp.val(b.texts.join(","))
				})
			}
		}),
	a.shortcut("usercheck", FX.UserCheckBox)
}
(jQuery), function (a) {
	FX.ButtonGroup = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ButtonGroup.superclass._defaultConfig.apply(), {
					baseCls: "x-group",
					btnCls: "btn_group",
					allowBlank: !0,
					layout: null,
					items: [{
							value: "1",
							text: "1"
						}, {
							value: "2",
							text: "2"
						}, {
							value: "3",
							text: "3"
						}
					]
				})
			},
			_init: function () {
				FX.ButtonGroup.superclass._init.apply(this, arguments);
				var a = this.options,
				b = this;
				this.$btns = [],
				this.$btnOther = null,
				a.items && FX.Utils.forEach(a.items, function (a, c) {
					b._createItem(c)
				}),
				this._bindEvt()
			},
			_createItem: function (b) {
				var c = this.options,
				d = a('<div class="group_item"/>').attr("value", b.value).data("item", b).addClass(this.options.btnCls).appendTo(this.element);
				return c.layout && d.addClass(c.layout),
				a('<i class="icon-blank"/>').appendTo(d),
				b.selected && d.addClass("select"),
				a("<span/>").text(b.text).appendTo(d),
				this.$btns.push(d),
				d
			},
			_bindEvt: function () {
				var b = this;
				this.element.unbind("click.group"),
				this.element.bind("click.group", function (c) {
					if (b.isEnabled()) {
						var d = c.target.tagName ? c.target.tagName.toUpperCase() : "";
						if ("INPUT" !== d && "TEXTAREA" !== d) {
							var e = a(c.target),
							f = e.closest(".group_item");
							f && f.length > 0 && b._doItemClick(f)
						}
					}
				})
			},
			_doItemClick: function (a) {},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.ButtonGroup.superclass.getOptions.apply(this, arguments), {
					items: b.items
				})
			}
		})
}
(jQuery), function (a) {
	FX.RadioGroup = FX.extend(FX.ButtonGroup, {
			_defaultConfig: function () {
				return a.extend(FX.RadioGroup.superclass._defaultConfig.apply(), {
					btnCls: "x-radio",
					onAfterItemSelect: null
				})
			},
			_doItemClick: function (b) {
				var c = this.options,
				d = !0;
				if (b.hasClass("select") ? (b.removeClass("select"), d = !1) : (a(".select", this.element).removeClass("select"), b.addClass("select"), d = !0), b.hasClass("item-other")) {
					var e = b.data("widget");
					e.setEnable(d),
					d && e.select()
				} else
					this.$btnOther && this.$btnOther.data("widget").setEnable(!1);
				var f = a(".select", this.element);
				FX.Utils.applyFunc(this, c.onAfterItemSelect, [f, f.data("item")], !1),
				FX.Utils.applyFunc(this, c.onStopEdit, [], !1)
			},
			_createItem: function (b) {
				var c = FX.RadioGroup.superclass._createItem.apply(this, arguments),
				d = this.options,
				e = this;
				if (b.isOther) {
					var f = FX.createWidget({
							renderEl: a('<div class="text-other"/>').appendTo(c),
							width: d.width ? d.width - 60 : 180,
							type: "text",
							enable: !!b.selected,
							onStopEdit: function () {
								FX.Utils.applyFunc(e, d.onStopEdit, [], !1)
							}
						});
					c.addClass("item-other"),
					this.$btnOther = c,
					c.data("widget", f)
				}
			},
			setEnable: function (a) {
				if (FX.RadioGroup.superclass.setEnable.apply(this, [a]), this.$btnOther) {
					var b = this.$btnOther.data("widget");
					this.$btnOther.hasClass("select") && a ? b.setEnable(!0) : b.setEnable(!1)
				}
			},
			effectItemLinkWidgets: function () {
				var b = this.options,
				c = a(".select", this.element);
				FX.Utils.applyFunc(this, b.onAfterItemSelect, [c, c.data("item")], !1)
			},
			setValue: function (b) {
				if (a(".select", this.element).removeClass("select"), FX.Utils.isEmpty(b))
					return void(this.$btnOther && this.$btnOther.removeClass("select"));
				var c = !1;
				if (FX.Utils.forEach(this.$btns, function (a, d) {
						var e = d.data("item");
						if (e.value === b)
							return d.addClass("select") , c = !0, !1
						}), !c && this.$btnOther) {
						this.$btnOther.addClass("select");
						var d = this.$btnOther.data("widget");
						d.setValue(b)
					}
			},
			checkValidate: function () {
				var a = this.options;
				return !(!a.allowBlank && FX.Utils.isEmpty(this.getValue()))
			},
			getValue: function () {
				var b = [],
				c = a(".select", this.element);
				return FX.Utils.forEach(c, function (c, d) {
					var e = a(d).data("item");
					e.isOther ? b.push(a(d).data("widget").getValue()) : b.push(e.value)
				}),
				b.length > 0 ? b.join("") : null
			},
			setText: function (b) {
				var c = this;
				a(".select", this.element).removeClass("select"),
				FX.Utils.forEach(this.$btns, function (a, d) {
					var e = d.data("item");
					return e.text === b ? (d.addClass("select"), !1) : void(c.$btnOther && (c.$btnOther.addClass("select"), c.$btnOther.data("widget").setValue(b)))
				})
			},
			getText: function () {
				var b = [],
				c = a(".select", this.element);
				return FX.Utils.forEach(c, function (c, d) {
					var e = a(d).data("item");
					e.isOther ? b.push(a(d).data("widget").getValue()) : b.push(e.text)
				}),
				b.length > 0 ? b.join("") : null
			}
		}),
	a.shortcut("radiogroup", FX.RadioGroup)
}
(jQuery), function (a) {
	FX.CheckBoxGroup = FX.extend(FX.ButtonGroup, {
			_defaultConfig: function () {
				return a.extend(FX.CheckBoxGroup.superclass._defaultConfig.apply(), {
					btnCls: "x-check",
					onAfterItemSelect: null
				})
			},
			_doItemClick: function (a) {
				FX.CheckBoxGroup.superclass._doItemClick.apply(this, arguments);
				var b = this.options;
				a.toggleClass("select");
				var c = a.data("item"),
				d = a.hasClass("select");
				FX.Utils.applyFunc(this, b.onAfterItemSelect, [a, c, d], !1),
				FX.Utils.applyFunc(this, b.onStopEdit, [], !1)
			},
			checkValidate: function () {
				var b = this.options;
				return !(!b.allowBlank && 0 === a(".select", this.element).length)
			},
			setValue: function (b) {
				a(".select", this.element).removeClass("select");
				var c = a.makeArray(b);
				FX.Utils.forEach(this.$btns, function (b, d) {
					var e = a(d).data("item");
					c.indexOf(e.value) > -1 && a(d).addClass("select")
				})
			},
			getValue: function () {
				var b = [],
				c = a(".select", this.element);
				return FX.Utils.forEach(c, function (c, d) {
					var e = a(d).data("item");
					b.push(e.value)
				}),
				b
			},
			setText: function (b) {
				a(".select", this.element).removeClass("select");
				var c = a.makeArray(b);
				FX.Utils.forEach(this.$btns, function (b, d) {
					var e = a(d).data("item");
					c.indexOf(e.text) > -1 && a(d).addClass("select")
				})
			},
			getText: function () {
				var b = [],
				c = a(".select", this.element);
				return FX.Utils.forEach(c, function (c, d) {
					var e = a(d).data("item");
					b.push(e.text)
				}),
				b
			},
			getNullValue: function () {
				return []
			}
		}),
	a.shortcut("checkboxgroup", FX.CheckBoxGroup)
}
(jQuery), function (a) {
	FX.Address = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Address.superclass._defaultConfig.apply(), {
					baseCls: "fui_address",
					needDetail: !0,
					allowBlank: !0,
					width: 420,
					width4province: "45%",
					width4city: "24%",
					width4district: "24%",
					width4detail: "100%"
				})
			},
			_init: function () {
				FX.Address.superclass._init.apply(this, arguments),
				FX.AddressData || (FX.AddressData = {
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", " ", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							" ": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", " ", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", " ", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", " ", "", ""],
							"": [" ", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", " ", " "]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", ""]
						},
						"": {
							"": [" ", "", " ", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", " ", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", " ", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", " ", " ", "", "", ""],
							"": ["", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "  ", "", " ", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", " ", "", "", "", ""],
							"": ["", "", "", "", "", "", " "],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", " ", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", " ", "", ""],
							" ": ["", "", "", "", "", "", " ", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							" ": ["", "", "", "", "", "", "", "", ""],
							" ": [" ", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", " ", ""],
							"": ["", "", "", ""],
							"": ["", " ", "", "", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", " ", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", " ", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", ""],
							"": ["", "", " ", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", " ", ""]
						},
						"": {
							"": [" ", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", " ", " ", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", ""],
							"": ["", "", " ", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", " ", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", " ", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", " ", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", " "],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", "", "", "", " ", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							" ": ["", "", " ", "", "", "", "", ""],
							"": ["", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", " ", "", "", " ", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", " ", ""],
							"": ["", "", "", "", "", "", " ", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							" ": ["", "", "", "", "", "", "", "", " ", ""],
							" ": ["", "", "", ""],
							"": ["", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", " ", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							" ": [" ", " ", "", "", " ", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", " ", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", ""],
							" ": ["", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": [" ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							" ": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", ""]
						},
						"": {
							"": ["", "", "", ""],
							"": ["", "", "", "", " "],
							"": ["", ""],
							"": ["", ""],
							"": ["", ""],
							"": ["", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", ""],
							"": ["", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", ""],
							"": [" ", ""],
							"": ["", "", ""],
							"": ["", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", ""],
							"": ["", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", " "],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": [" ", "", "", "", "", " ", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", " ", "", "", "", "", "", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", " ", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", " ", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", " ", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", " ", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", " ", " "],
							"": ["", "", "", ""],
							"": ["", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", " ", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", " ", "", "", "", "", "", "", "", ""],
							"": [" ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", " ", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", " ", "", "", ""],
							"": ["", "", "", "", "", "", " "],
							"": ["", "", "", ""],
							" ": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", ""],
							" ": [" ", "", "", "", "", ""],
							"": ["", " ", "", "", "", "", "", ""]
						},
						"": {
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							" ": ["", "", " ", "", " "],
							"": ["", "", ""],
							"": [" ", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", ""],
							"": ["", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", ""],
							"": [""],
							" ": ["", "", ""],
							"": [""],
							"": [""],
							"": [""],
							"": [""],
							"": ["", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", ""],
							"": ["", "", "", ""],
							"": ["", "", "", ""]
						},
						"": {
							"": ["", "", "", ""]
						},
						"": {
							"": ["", "", ""]
						},
						"": {
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", " ", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": [" ", "", "", "", "", "", ""],
							"": ["", "", ""],
							"": ["", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							" ": ["", "", "", "", "", "", " ", " ", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", " ", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", " ", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", "", "", "", ""],
							"": ["", "", "", "", "", "", "", "", "", " ", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", "", "", ""],
							"": ["", "", "", ""]
						},
						"": {
							"": [""]
						}
					});
				var b = a('<div class="fui_address-select"/>').appendTo(this.element),
				c = this,
				d = this.options,
				e = [];
				FX.Utils.forEach(FX.AddressData, function (a) {
					e.push({
						value: a,
						text: a
					})
				}),
				this.province = FX.createWidget({
						type: "combo",
						customCls: "sel-province",
						items: e,
						renderEl: a("<div/>").appendTo(b),
						allowBlank: d.allowBlank,
						width: d.width4province,
						waterMark: "//",
						onAfterItemSelect: function () {
							c.linkByProvince(this.getValue()),
							FX.Utils.applyFunc(c, d.onStopEdit, arguments, !1)
						}
					}),
				this.city = FX.createWidget({
						type: "combo",
						customCls: "sel-city",
						items: [],
						renderEl: a("<div/>").appendTo(b),
						allowBlank: d.allowBlank,
						width: d.width4city,
						waterMark: "",
						onAfterItemSelect: function () {
							c.linkByProvinceAndCity(c.province.getValue(), this.getValue()),
							FX.Utils.applyFunc(c, d.onStopEdit, arguments, !1)
						}
					}),
				this.district = FX.createWidget({
						type: "combo",
						renderEl: a("<div/>").appendTo(b),
						customCls: "sel-district",
						allowBlank: d.allowBlank,
						width: d.width4district,
						waterMark: "/",
						items: [],
						onAfterItemSelect: function () {
							FX.Utils.applyFunc(c, d.onStopEdit, arguments, !1)
						}
					}),
				d.needDetail && (this.detail = FX.createWidget({
							type: "textarea",
							customCls: "address-detail",
							waterMark: "",
							allowBlank: d.allowBlank,
							width: d.width4detail,
							renderEl: a("<div/>").appendTo(this.element)
						}))
			},
			linkByProvince: function (a) {
				var b = [];
				FX.Utils.forEach(FX.AddressData[a], function (a) {
					b.push({
						value: a,
						text: a
					})
				}),
				this.city.options.items = b,
				this.district.options.items = [],
				this.city.rebuild(),
				this.district.rebuild()
			},
			linkByProvinceAndCity: function (a, b) {
				var c = FX.AddressData[a];
				if (c) {
					var d = [];
					FX.Utils.forEach(c[b], function (a, b) {
						d.push({
							value: b,
							text: b
						})
					}),
					this.district.options.items = d
				} else
					this.district.options.items = [];
				this.district.rebuild()
			},
			setEnable: function (a) {
				this.options.enable = !!a,
				this.province.setEnable(a),
				this.city.setEnable(a),
				this.district.setEnable(a),
				this.detail && this.detail.setEnable(a)
			},
			checkValidate: function () {
				var a = this.province.checkValidate() && this.city.checkValidate() && this.district.checkValidate();
				return this.detail && (a = this.detail.checkValidate() && a),
				a
			},
			setValue: function (a) {
				return a && (FX.Utils.isEmpty(a.detail) || this.detail.setValue(a.detail), !FX.Utils.isEmpty(a.province)) ? (this.province.setValue(a.province), this.linkByProvince(a.province), void(FX.Utils.isEmpty(a.city) || (this.city.setValue(a.city), this.linkByProvinceAndCity(a.province, a.city), FX.Utils.isEmpty(a.district) || this.district.setValue(a.district)))) : (this.province.setValue(null), void this.linkByProvince(null))
			},
			getValue: function () {
				var a = {},
				b = this.province.getValue(),
				c = this.city.getValue(),
				d = this.district.getValue(),
				e = this.detail ? this.detail.getValue() : null;
				return FX.Utils.isEmpty(b) || (a.province = b),
				FX.Utils.isEmpty(c) || (a.city = c),
				FX.Utils.isEmpty(d) || (a.district = d),
				FX.Utils.isEmpty(e) || (a.detail = e),
				a
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Address.superclass.getOptions.apply(this, arguments), {
					needDetail: b.needDetail
				})
			},
			getNullValue: function () {
				return {}
			}
		}),
	a.shortcut("address", FX.Address)
}
(jQuery), function (a) {
	FX.Location = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Location.superclass._defaultConfig.apply(), {
					baseCls: "fui_location",
					allowBlank: !0
				})
			},
			_init: function () {
				FX.Location.superclass._init.apply(this, arguments),
				this.button = new FX.Button({
						renderEl: a('<div class="location-btn"/>').appendTo(this.element),
						text: "",
						style: "white",
						width: 240
					}),
				a('<span class="location-tip"/>').text("").appendTo(this.element)
			},
			checkValidate: function () {
				return this.options.allowBlank || !FX.Utils.isObjectEmpty(this.value)
			},
			setValue: function (b) {
				if (this.value = b, b) {
					var c = b.province + b.city + b.district + b.detail;
					this.$info ? this.$info.text(c) : this.$info = a('<div class="location-info"/>').prependTo(this.element).text(c)
				}
			},
			getValue: function () {
				return this.value || {}
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Location.superclass.getOptions.apply(this, arguments), {
					adjustable: b.adjustable,
					radius: b.radius,
					limits: b.limits
				})
			},
			getNullValue: function () {
				return {}
			}
		}),
	a.shortcut("location", FX.Location)
}
(jQuery), function (a) {
	FX.Upload = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Upload.superclass._defaultConfig.apply(), {
					files: [],
					fileType: [],
					maxFileSize: 5242880,
					maxFileCount: 1,
					uploadURL: "/upload",
					uploadTokenURL: "/upload/get_token",
					uploadSite: "qn",
					uploadToMedia: !1,
					uploadToForm: !1,
					allowBlank: !0,
					onFileSizeLimit: null,
					onValidateSuccess: null,
					onValidateFail: null,
					onAfterValidate: null,
					onUpload: null,
					onUploadSuccess: null,
					onUploadFail: null,
					onAfterUpload: null
				})
			},
			_init: function () {
				FX.Upload.superclass._init.apply(this, arguments);
				var a = this.options;
				this.tokenKey = a.uploadToMedia ? "imageUploadToken" : "fileUploadToken",
				this.tokenExpireKey = this.tokenKey + "Expires",
				this._initUploadForm(),
				this._initUploadInput()
			},
			_initUploadForm: function () {
				var b = this.options;
				switch (b.uploadSite) {
				case "qn":
					b.uploadURL = "https://up.qbox.me/";
					break;
				case "oss":
					b.uploadURL = "https://jdy-image.oss-cn-hangzhou.aliyuncs.com"
				}
				this.$uploadForm = a('<form class="upload-form" action="' + b.uploadURL + '" enctype="multipart/form-data" method="post"/>')
			},
			_initUploadInput: function () {
				var b = this.options;
				this.files = b.files || [],
				this.$uploadInput = a('<input type="file" name="file" class="upload-btn-input"/>').appendTo(this.$uploadForm),
				b.maxFileCount > 1 && this.$uploadInput.attr("multiple", !0)
			},
			doUpload: function () {
				var a = this;
				if (!this.upFiles) {
					if (!this.$uploadInput[0].files.length > 1)
						return;
					this.upFiles = this.$uploadInput[0].files
				}
				this._checkUploadToken(function () {
					a._doDataUpload()
				})
			},
			_isTokenValid: function () {
				return FX.STATIC[this.tokenKey] && Date.now() < FX.STATIC[this.tokenExpireKey]
			},
			_checkUploadToken: function (a) {
				var b = this,
				c = this.options;
				return "local" === c.uploadSite ? a() : this._isTokenValid() ? a() : void FX.Utils.dataAjax({
					url: c.uploadTokenURL,
					data: {
						site: c.uploadSite,
						isMedia: c.uploadToMedia
					}
				}, function (c) {
					FX.STATIC[b.tokenKey] = c.token,
					FX.STATIC[b.tokenExpireKey] = 18e5 + Date.now(),
					a()
				}, function (a) {
					FX.Vip.showUpgradeTip(a.responseJSON)
				})
			},
			_doDataUpload: function () {
				var a = this;
				if (!FX.Utils.isFormDataSupported())
					return void FX.Msg.toast({
						type: "warning",
						msg: "  "
					});
				var b = 0,
				c = [],
				d = 0,
				e = 0,
				f = function () {
					return c.reduce(function (a, b) {
						return a + b
					})
				},
				g = function () {
					d + e === a.upFiles.length && (e > 0 ? a.onFail({
							failCount: e
						}) : a.onSuccess())
				};
				if (this.upFiles)
					for (var h = 0, i = this.upFiles.length; h < i; h++) {
						var j = this.upFiles[h];
						b += j.size,
						a._doXhrUpload(j, function (d, e) {
							c[h] = d,
							a.onUpload(f(), b)
						}, function (e) {
							c[h] = j.size,
							a.onUpload(f(), b),
							a.files.push(e.file),
							d++,
							g()
						}, function (d) {
							c[h] = 0,
							a.onUpload(f(), b),
							e++,
							g()
						})
					}
			},
			_doXhrUpload: function (a, b, c, d) {
				var e,
				f = this.options,
				g = a.name,
				h = new FormData,
				i = FX.STATIC.user ? FX.STATIC.user._id : "";
				if ("qn" === f.uploadSite)
					h.append("file", a), h.append("token", FX.STATIC[this.tokenKey]), h.append("x:bucketType", f.uploadToMedia ? FX.CONST.QN_BUCKET.PUBLIC_IMAGE : FX.CONST.QN_BUCKET.PRIVATE_FILE), h.append("x:uploader", i), f.uploadToForm && (h.append("x:appId", FX.STATIC.APPID), h.append("x:entryId", FX.STATIC.ENTRYID), h.append("x:field", f.widgetName));
				else if ("oss" === f.uploadSite) {
					e = FX.Utils.UUID();
					var j = FX.STATIC[this.tokenKey].split(":");
					h.append("Signature", j[2]),
					h.append("OSSAccessKeyId", j[0]),
					h.append("policy", j[1]),
					h.append("callback", j[3]),
					h.append("x:file_name", g),
					h.append("x:bucket_type", FX.CONST.OSS_BUCKET.PUBLIC_IMAGE),
					h.append("x:uploader", i),
					h.append("key", e),
					h.append("file", a)
				} else
					h.append("file", a);
				FX.Utils.ajaxUpload({
					url: f.uploadURL,
					data: h,
					onUpload: b
				}, function (a, b) {
					return a.file ? void("qn" === f.uploadSite ? c(a) : "oss" === f.uploadSite ? c(a) : c && c.apply(this, arguments)) : d()
				}, d)
			},
			checkValidate: function () {
				var a = this.options,
				b = !0;
				return a.allowBlank || (b = this.isUploaded()),
				b ? FX.Utils.applyFunc(this, a.onValidateSuccess, [], !1) : FX.Utils.applyFunc(this, a.onValidateFail, [], !1),
				FX.Utils.applyFunc(this, a.onAfterValidate, [], !1),
				b
			},
			checkFile: function (a) {
				var b = this.options;
				if (!a)
					return !1;
				var c = a.name,
				d = c.split(".").pop(),
				e = !0;
				e && b.fileType.length > 0 && b.fileType.indexOf(d.toLowerCase()) === -1 && (FX.Msg.toast({
						msg: "",
						type: "warning"
					}), e = !1);
				var f = b.maxFileSize,
				g = FX.Utils.applyFunc(this, b.onFileSizeLimit, [], !1);
				return FX.Utils.isNumber(g) && (f = g),
				e && a.size > f && (FX.Msg.toast({
						msg: "",
						type: "warning"
					}), e = !1),
				e
			},
			doClear: function () {
				this.resetUploadInput(),
				this.files = []
			},
			resetUploadInput: function () {
				this.$uploadInput.replaceWith(this.$uploadInput = this.$uploadInput.clone(!0))
			},
			isImageFile: function (a) {
				return !!a.match(/^(jpg|jpeg|png|gif|svg)$/g)
			},
			onUpload: function (a, b) {
				var c = this.options;
				FX.Utils.applyFunc(this, c.onUpload, [a, b], !1)
			},
			onSuccess: function () {
				var a = this.options;
				FX.Utils.applyFunc(this, a.onUpload, [1, 1], !1),
				FX.Utils.applyFunc(this, a.onUploadSuccess, [this.files], !1),
				this.resetUploadInput()
			},
			onFail: function (a) {
				var b = this.options;
				FX.Utils.applyFunc(this, b.onUploadFail, [a], !1),
				413 === a ? FX.Msg.toast({
					type: "warning",
					msg: ""
				}) : FX.Msg.toast({
					type: "warning",
					msg: " "
				})
			},
			onFinish: function () {
				var a = this.options;
				FX.Utils.applyFunc(this, a.onAfterUpload, [], !1)
			},
			isUploaded: function () {
				return !FX.Utils.isObjectEmpty(this.files)
			},
			setEnable: function (a) {
				this.options.enable = !!a,
				a ? this.$uploadInput.removeAttr("disabled").removeAttr("readonly") : this.$uploadInput.attr("disabled", "disabled").attr("readonly", "readonly")
			},
			getValue: function () {
				return this.files
			},
			getUpFiles: function () {
				return this.upFiles
			},
			getNullValue: function () {
				return []
			},
			setValue: function (b) {
				var c = this.options;
				this.files = a.makeArray(b),
				this.files.length > c.maxFileCount && (this.files = this.files.slice(0, c.maxFileCount))
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Upload.superclass.getOptions.apply(this, arguments), {
					maxFileCount: b.maxFileCount
				})
			}
		})
}
(jQuery), function (a) {
	FX.FileUpload = FX.extend(FX.Upload, {
			_defaultConfig: function () {
				return a.extend(FX.FileUpload.superclass._defaultConfig.apply(), {
					baseCls: "fui_upload",
					files: [],
					fileType: [],
					maxFileSize: 5242880,
					maxFileCount: 1,
					uploadURL: "/upload",
					uploadSite: "qn",
					uploadToForm: !0,
					style: "white",
					size: "normal",
					mode: "upload",
					tipText: "",
					allowBlank: !0,
					thumbWidth: 180,
					thumbHeight: 100,
					hasProgress: !0,
					hasPreview: !0,
					hasPreviewList: !0,
					onBeforeUpload: null,
					onUpload: null,
					onAfterUpload: null,
					onUploadFail: null
				})
			},
			_init: function () {
				FX.FileUpload.superclass._init.apply(this, arguments);
				var b = this.options;
				"upload" === b.mode && this._createUploadBtn(),
				b.hasProgress && (this.progress = FX.createWidget({
							type: "progress",
							renderEl: a("<div/>").appendTo(this.element),
							width: 420,
							height: 30,
							visible: !1
						})),
				this.$previewList = a('<div class="upload-preview-list"/>').appendTo(this.element),
				"small" === b.size && this.$previewList.addClass("small"),
				this._bindFileEvent()
			},
			_createUploadBtn: function () {
				var b = this,
				c = this.options;
				if (this.$uploadBtn = a('<div class="upload-btn x-btn"/>').addClass("style-" + c.style).appendTo(this.element), a('<i class="icon-upload upload-icon"/>').appendTo(this.$uploadBtn), a("<span/>").text("" + c.tipText).appendTo(this.$uploadBtn), this.$uploadForm.appendTo(this.$uploadBtn), c.fileType.length > 0) {
					var d = "." + c.fileType.join(",.");
					this.$uploadInput.prop("accept", d)
				}
				this.$uploadInput.bind("change", function () {
					if (b.upFiles = this.files, !b.upFiles && !FX.Utils.isFormDataSupported()) {
						if (!this.value)
							return;
						b.upFiles = [{
								name: this.value.split("\\").pop(),
								size: this.size
							}
						]
					}
					return 1 === c.maxFileCount && (b.files = [], b.$previewList.empty()),
					b._checkUploadFiles(b.upFiles) ? void b.doUpload() : void(b.upFiles = null)
				})
			},
			_checkUploadFiles: function (a) {
				var b = this,
				c = this.options;
				if (this.files.length + a.length > c.maxFileCount)
					return FX.Msg.toast({
						msg: " " + c.maxFileCount + " " + c.tipText,
						type: "warning"
					}), !1;
				var d = !0;
				if (a)
					for (var e = 0, f = a.length; e < f && (d = d && b.checkFile(a[e]), d); e++);
				return d
			},
			_previewFiles: function (a) {
				var b = this,
				c = this.options;
				if (c.hasPreviewList && (a || (a = this.files), a))
					for (var d = 0, e = a.length; d < e; d++)
						b._createFilePreview(a[d]).appendTo(b.$previewList)
			},
			_createFilePreview: function (b) {
				var c = this,
				d = this.options,
				e = FX.Utils.formatFileSize(b.size),
				f = c._trimFileName(b.name),
				g = b.name ? b.name.split(".").pop() : "",
				h = FX.Utils.date2Str(new Date(b.uploadTime), "yyyy/MM/dd");
				if ("print" === d.mode)
					return a("<div/>").text([f, ":" + e, " :" + h].join(" "));
				var i = a('<div class="upload-info"/>'),
				j = a('<div class="upload-preview"/>').appendTo(i),
				k = a('<div class="upload-file-info"/>').appendTo(i),
				l = !1;
				return c.isImageFile(g.toLowerCase()) && (b instanceof File ? (c._drawLocalPreview(b).appendTo(j), l = !0) : b.qnKey && (l = !0, c._drawRemotePreview(b, function (a) {
							a.appendTo(j)
						}))),
				l || (a('<i class="icon-file upload-file-mark"/>').appendTo(j), a('<span class="upload-ext-mark"/>').text(g.toUpperCase()).appendTo(j)),
				a('<div class="info-text"/>').text(f).appendTo(k),
				a('<div class="info-text"/>').text(e).appendTo(k),
				d.enable && "upload" === d.mode && a('<div class="upload-info-btn remove-btn"/>').append(a('<i class="icon-upload-remove"/>')).appendTo(i),
				i
			},
			_bindFileEvent: function () {
				var b = this,
				c = this.options,
				d = function (d) {
					var e = d.target,
					f = d.type,
					g = a(e).closest(".upload-info-btn.remove-btn"),
					h = a(e).closest(".upload-info");
					"upload" === c.mode && g && g.length > 0 ? "click" === f && (b.files.splice(h.index(), 1), h.remove()) : c.hasPreview && h && h.length > 0 && new FX.FilePreview({
						files: b.files,
						currentItem: h.index(),
						autoClose: !1
					})
				};
				this.$previewList.unbind(".file-op"),
				this.$previewList.bind({
					"click.file-op": d
				})
			},
			_trimFileName: function (a) {
				if (FX.Utils.isEmpty(a))
					return "";
				var b = 20,
				c = a ? a.split(".").pop() : "";
				return a.length - c.length - 1 > b && (a = a.slice(0, b - 1), a = a + "..." + c),
				a
			},
			_drawLocalPreview: function (b) {
				var c = this.options,
				d = a("<canvas/>"),
				e = window.URL || window.webkitURL,
				f = d[0].getContext("2d"),
				g = new Image,
				h = e.createObjectURL(b);
				g.src = h;
				var i = 2 * c.thumbWidth,
				j = 2 * c.thumbHeight;
				return f.canvas.width = i,
				f.canvas.height = j,
				g.onload = function () {
					var a = Math.min(i / g.width, j / g.height);
					f.drawImage(g, 0, 0, g.width, g.height, 0, 0, g.width * a, g.height * a),
					e.revokeObjectURL(h)
				},
				d
			},
			_drawRemotePreview: function (b, c) {
				var d = this.options,
				e = a("<img/>").hide(),
				f = a.extend({
						thumb: {
							mode: 2,
							width: d.thumbWidth,
							height: d.thumbHeight
						}
					}, b);
				FX.Utils.getFileDownloadURL(f, function (a) {
					return e.attr("src", a).show(),
					c(e)
				})
			},
			doUpload: function () {
				FX.FileUpload.superclass.doUpload.apply(this, arguments);
				var a = this.options;
				!this.upFiles || this.upFiles.length <= 0 || (this.$uploadBtn.hide(), a.hasProgress && this.progress.setVisible(!0), FX.Utils.applyFunc(this, a.onBeforeUpload, [{
								files: null,
								up: 0,
								total: 0
							}
						], !1), this._setProgress(0, 1))
			},
			_setProgress: function (a, b) {
				var c = this.options;
				if (c.hasProgress) {
					var d = parseInt(a / b * 100);
					d < 100 ? this.progress.setMessage(" ...") : this.progress.setMessage(" "),
					this.progress.setProgress(d)
				}
			},
			onUpload: function (a, b) {
				FX.FileUpload.superclass.onUpload.apply(this, arguments),
				FX.Utils.applyFunc(this, this.options.onUpload, [{
							files: null,
							up: a,
							total: b
						}
					], !1),
				this._setProgress(a, b)
			},
			onSuccess: function () {
				FX.FileUpload.superclass.onSuccess.apply(this, arguments);
				var a = this.options;
				FX.Utils.isCanvasSupported() ? this._previewFiles(this.upFiles) : this._previewFiles(),
				a.hasProgress && this.progress.setVisible(!1),
				FX.Utils.applyFunc(this, a.onAfterUpload, [{
							files: this.files,
							up: 0,
							total: 0
						}
					], !1),
				this.$uploadBtn.show()
			},
			onFail: function (a) {
				FX.FileUpload.superclass.onFail.apply(this, arguments);
				var b = this.options;
				b.hasProgress && this.progress.setVisible(!1),
				this.$uploadBtn.show(),
				FX.Utils.applyFunc(this, b.onUploadFail, [], !1)
			},
			doClear: function () {
				FX.FileUpload.superclass.doClear.apply(this, arguments),
				this.$previewList.empty()
			},
			setEnable: function (a) {
				FX.FileUpload.superclass.setEnable.apply(this, [a]),
				this.$uploadBtn && (a ? this.$uploadBtn.removeClass("x-ui-disable") : this.$uploadBtn.addClass("x-ui-disable")),
				this.$previewList.empty(),
				this._previewFiles()
			},
			setValue: function (a) {
				FX.FileUpload.superclass.setValue.apply(this, arguments),
				a && (this.$previewList.empty(), this._previewFiles())
			}
		}),
	a.shortcut("upload", FX.FileUpload)
}
(jQuery), function () {
	FX.ImageUpload = FX.extend(FX.FileUpload, {
			_defaultConfig: function () {
				return $.extend(FX.ImageUpload.superclass._defaultConfig.apply(), {
					baseCls: "fui_upload fui_image",
					fileType: ["jpg", "jpeg", "png", "gif", "bmp"],
					tipText: "",
					compressed: !1,
					onlyCamera: !1
				})
			},
			_createUploadBtn: function () {
				FX.ImageUpload.superclass._createUploadBtn.apply(this, arguments);
				var a = this.options;
				a.onlyCamera && $('<span class="upload-tip"> /</span>').appendTo(this.element)
			},
			setEnable: function (a) {
				FX.ImageUpload.superclass.setEnable.apply(this, [a]);
				var b = this.options;
				!b.onlyCamera && a ? (this.$uploadBtn.removeClass("x-ui-disable"), this.$uploadInput.removeAttr("disabled").removeAttr("readonly")) : (this.$uploadBtn.addClass("x-ui-disable"), this.$uploadInput.attr("disabled", "disabled").attr("readonly", "readonly"))
			},
			getOptions: function () {
				var a = this.options;
				return $.extend(FX.ImageUpload.superclass.getOptions.apply(this, arguments), {
					compressed: a.compressed,
					onlyCamera: a.onlyCamera
				})
			}
		}),
	$.shortcut("image", FX.ImageUpload)
}
(jQuery), function (a) {
	FX.SubForm = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.SubForm.superclass._defaultConfig.apply(), {
					baseCls: "fui_subform",
					allowBlank: !0,
					ignoreOptAuth: !1,
					items: [],
					maxItemCount: 0,
					newItemText: " ",
					noFieldText: " ",
					onBeforeWidgetCreate: null,
					onAfterWidgetCreate: null
				})
			},
			_init: function () {
				FX.SubForm.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.$table = a('<table cellpadding="2px" cellspacing="0"/>').appendTo(this.element),
				this.$head = a("<thead/>").appendTo(this.$table),
				this.$body = a("<tbody/>").appendTo(this.$table),
				this.options.items.length > 0 ? (this._appendHead(), this._appendLine()) : a('<div class="subform-none-tip"/>').text(c.noFieldText).appendTo(this.element),
				this.addBtn = new FX.Button({
						renderEl: a("<div/>").appendTo(this.element),
						style: "none",
						iconCls: "icon-add",
						customCls: "btn-itemadd",
						text: c.newItemText,
						onClick: function () {
							if (b.isEnabled()) {
								if (a(".subform-line", b.$body).length >= 200)
									return void FX.Msg.toast({
										type: "warning",
										msg: "200"
									});
								b._appendLine(),
								FX.Utils.applyFunc(b, c.onStopEdit, [], !1)
							}
						}
					})
			},
			_appendHead: function () {
				var b = this.options,
				c = a('<tr class="subform-head"/>').appendTo(this.$head);
				FX.Utils.forEach(b.items, function (d, e) {
					var f = a("<td/>").appendTo(c);
					switch (e.widget.type) {
					case "linkquery":
					case "linkdata":
						FX.Utils.forEach(e.widget.linkFields, function (b, c) {
							f.append(a('<div class="sub-link-title sub-' + e.widget.type + '"/>').text(c.text))
						}),
						f.append(a('<span class="form-cell"/>').text(e.label));
						break;
					default:
						f.append(a('<span class="form-cell"/>').text(e.label));
						var g = a('<span class="label-notnull x-ui-hidden"/>').text("*").appendTo(f);
						e.widget.allowBlank === !1 && g.removeClass("x-ui-hidden")
					}
					b.ignoreOptAuth || e.widget.visible !== !1 || f.addClass("x-ui-hidden")
				}),
				a('<td class="navi-cell"/>').appendTo(c)
			},
			_appendLine: function (b) {
				var c = this.options,
				d = this;
				if (0 !== c.items.length) {
					var e = a('<tr class="subform-line"/>').appendTo(d.$body);
					FX.Utils.forEach(c.items, function (f, g) {
						var h = a("<td/>").appendTo(e);
						FX.Utils.applyFunc(d, c.onBeforeWidgetCreate, [g.widget], !1);
						var i = a.extend({}, g.widget, {
								renderEl: a('<div class="form-cell"/>').appendTo(h),
								subform: c.widgetName,
								width: 150
							});
						c.ignoreOptAuth && (i.enable = !0, i.visible = !0);
						var j = FX.createWidget(i);
						if (FX.Utils.applyFunc(d, c.onAfterWidgetCreate, [j], !1), i.visible === !1 && h.addClass("x-ui-hidden"), c.enable === !1 && j.setEnable(!1), h.attr("namecol", j.options.widgetName), b) {
							var k = b[j.options.widgetName];
							FX.Utils.isNull(k) || (k.hasOwnProperty("widgetType") ? j.setValue(k.data) : j.setValue(k))
						}
						h.data("widget", j)
					});
					var f = a('<td class="navi-cell"/>').appendTo(e).append(a('<i class="icon-ui-remove"/>')).click(function () {
							d.isEnabled() && (e.remove(), d._checkItemLimit(), FX.Utils.applyFunc(d, c.onStopEdit, [], !1))
						});
					c.enable || f.addClass("x-ui-disable"),
					this._checkItemLimit()
				}
			},
			_checkItemLimit: function () {
				var a = this.options;
				if (a.maxItemCount && this.addBtn) {
					var b = this.$body.find("tr.subform-line");
					this.addBtn.setEnable(b.length < a.maxItemCount)
				}
			},
			setEnable: function (a) {
				if (this.options.enable = !!a, this.$table) {
					var b = this.$table.find("td.navi-cell");
					a ? b.removeClass("x-ui-disable") : b.addClass("x-ui-disable")
				}
				this.addBtn.setEnable(a)
			},
			getOptions: function () {
				var b = this.options,
				c = this,
				d = this.$body.children("tr").eq(0);
				if (d.length > 0) {
					var e = [],
					f = d.children("td");
					FX.Utils.forEach(f, function (b, d) {
						var f = a(d).data("widget");
						f && e.push({
							label: c.$head.find(".form-cell").eq(b).text(),
							widget: f.getOptions()
						})
					}),
					b.items = e
				}
				return a.extend(FX.SubForm.superclass.getOptions.apply(this, arguments), {
					items: b.items
				})
			},
			getWidgetByName: function (b, c) {
				var d = [];
				return FX.Utils.forEach(this.$table.find('td[namecol="' + b + '"]'), function (b, c) {
					var e = a(c).data("widget");
					e && d.push(e)
				}),
				FX.Utils.isNull(c) ? d : d[c]
			},
			getValue: function () {
				var b = [];
				return this.$table.find("tr.subform-line").each(function (c, d) {
					var e = {},
					f = !0;
					a(d).find(".form-cell").each(function (b, c) {
						var d = a(c).parent().data("widget"),
						g = d.getValue();
						f = FX.Utils.isObjectEmpty(g) && f,
						e[d.getWidgetName()] = {
							data: g,
							widgetType: d.getWidgetType()
						}
					}),
					f || b.push(e)
				}),
				b
			},
			getText: function () {
				var b = [];
				return this.$table.find("tr.subform-line").each(function (c, d) {
					var e = {},
					f = !0;
					a(d).find(".form-cell").each(function (b, c) {
						var d = a(c).parent().data("widget"),
						g = d.getText();
						f = FX.Utils.isObjectEmpty(g) && f;
						var h = d.getWidgetType();
						"linkdata" === h ? a.extend(e, g) : e[d.getWidgetName()] = g
					}),
					f || b.push(e)
				}),
				b
			},
			setValue: function (a) {
				var b = this;
				this.$table.find("tr.subform-line").remove(),
				FX.Utils.forEach(a, function (a, c) {
					b._appendLine(c)
				})
			},
			checkValidate: function () {
				var b = this.options,
				c = [],
				d = !0;
				return this.$table && this.$table.find("tr.subform-line").each(function (b, e) {
					var f = {},
					g = !0,
					h = !0;
					a(e).find(".form-cell").each(function (b, c) {
						var d = a(c).parent().data("widget");
						h = d.checkValidate() && h;
						var e = d.getValue();
						g = FX.Utils.isObjectEmpty(e) && g,
						f[d.getWidgetName()] = {
							data: e,
							widgetType: d.getWidgetType()
						}
					}),
					g ? h = !0 : c.push(f),
					d = h && d
				}),
				!(!b.allowBlank && c.length <= 0) && (d || this.setInvalidateType("regex"), d)
			},
			getNullValue: function () {
				return []
			}
		}),
	a.shortcut("subform", FX.SubForm)
}
(jQuery), function (a) {
	FX.Separator = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Separator.superclass._defaultConfig.apply(), {
					baseCls: "fui_separator",
					allowBlank: !0
				})
			},
			_init: function () {
				FX.Separator.superclass._init.apply(this, arguments);
				this.options;
				a('<div class="sep-line"/>').appendTo(this.element),
				this.$description = a("<div/>").appendTo(this.element)
			},
			setValue: function (a) {
				FX.Separator.superclass.setValue.apply(this, arguments),
				this.$description.empty(),
				FX.Utils.isEmpty(a) || this.$description.append(a)
			}
		}),
	a.shortcut("separator", FX.Separator)
}
(jQuery), function (a) {
	FX.User = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.User.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fui_user",
					title: "",
					msg: "",
					width: 240,
					height: 40,
					value: null,
					allowBlank: !0,
					noRepeat: !1,
					editable: !1,
					count: 100,
					limit: [],
					dynamicFields: [{
							id: FX.USER_ID.CurrentUser,
							name: ""
						}
					],
					dynamicKey: FX.USER_ID.CurrentUser,
					dynamicType: "select",
					onStopEdit: null,
					onBeforeEdit: null
				})
			},
			_init: function () {
				FX.User.superclass._init.apply(this, arguments),
				this._initSelectPane()
			},
			_initData: function () {
				if (!FX.STATIC.FTOKEN) {
					var a = this.options,
					b = this;
					if (a.items)
						return this.items = a.items, void this._initSelectPane();
					if (this.items = b._getDynamicFields(), "select" === a.dynamicType && this.value === a.dynamicKey && FX.STATIC.user && (this.value = FX.STATIC.user._id), this.value) {
						var c = FX.Utils.createMask(this.element, {
								isLight: !0,
								hasLoader: !0
							});
						FX.Utils.ajax({
							url: "/corp/list_member_name",
							data: {
								members: this.value
							}
						}, function (a, d) {
							var e = [];
							FX.Utils.forEach(a.users, function (a, b) {
								e.push({
									id: b._id,
									name: b.nickname
								})
							}),
							b.items = e.concat(b._getDynamicFields()),
							b._initSelectPane(),
							c.remove()
						}, function (a, b) {
							c.remove()
						})
					} else
						this._initSelectPane()
				}
			},
			_initSelectPane: function () {
				if (FX.STATIC.FTOKEN)
					return this.element.empty(), void a('<div class="nonsupport-msg"/>').text("").appendTo(this.element);
				var b = this,
				c = this.options;
				this.selectMap = {},
				FX.Utils.forEach(this.items, function (a, c) {
					b.selectMap[c.id] = c
				}),
				this._createSelectList(),
				c.editable ? this._createSelectPane() : this._bindEditEvent()
			},
			_bindEditEvent: function () {
				var a = this,
				b = this.options;
				this.$selectList.unbind("click"),
				this.$selectList.bind("click", function () {
					if (a.isEnabled()) {
						FX.Utils.applyFunc(a, b.onBeforeEdit, [], !1);
						var c = new FX.ConfirmDialog({
								title: b.title,
								height: 550,
								width: 590,
								contentWidget: {
									rowSize: [440],
									colSize: [570],
									padding: 10,
									items: [[{
												widgetName: b.widgetName,
												type: b.type,
												editable: !0,
												limit: b.limit,
												limitWidget: b.limitWidget,
												items: a.items,
												value: a.value
											}
										]]
								},
								onOk: function () {
									var d = c.getWidgetByName(b.widgetName);
									return a.value = d.getValue(),
									a.items = d.getItems(),
									a._initSelectPane(),
									FX.Utils.applyFunc(a, b.onStopEdit, [], !1),
									!1
								}
							});
						c.show()
					}
				})
			},
			_createSelectList: function () {
				var b = this,
				c = this.options;
				if (this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element), this.value) {
					var d = b.selectMap[this.value];
					b._createSelectItem(d)
				} else
					c.editable || this.$selectList.append(a('<div class="select-empty"/>').text(c.msg))
			},
			_setSelectItem: function (a) {
				this.$selectList.empty(),
				this._createSelectItem(a),
				this.value = a.id,
				this.selectMap[a.id] = a
			},
			_clearSelectItem: function () {
				this.$selectList.empty(),
				this.value = null
			},
			_createSelectItem: function (b) {
				var c = this.options,
				d = this;
				if (b) {
					var e = a('<li class="select-item"/>').append(a("<span/>").text(b.name)).appendTo(this.$selectList).attr("id", b.id).data("item", b);
					e.prepend(a('<i class="select-icon icon-member-normal"/>')),
					c.editable && a('<span class="remove-btn"/>').append(a('<i class="icon-close-large"/>')).click(function () {
						d._clearSelectItem(),
						d.refresh()
					}).appendTo(e)
				}
			},
			_createSelectPane: function () {
				if (!this.$selectPane) {
					var b = this.options,
					c = this,
					d = a('<div class="select-menu"/>').appendTo(this.element);
					this.$selectPane = a('<div class="select-pane"/>').appendTo(this.element);
					var e = a('<div class="select-btn"/>').click(function () {
							a(".select-btn", d).removeClass("select"),
							a(this).addClass("select"),
							c._createMemberMenu(),
							c._createMemberList()
						}).text("").appendTo(d);
					(b.limit.indexOf(b.dynamicKey) > -1 || b.limit.length <= 0) && ("set" === b.dynamicType ? (a('<div class="select-btn"/>').click(function () {
								a(".select-btn", d).removeClass("select"),
								a(this).addClass("select"),
								c._createDynamicList()
							}).text("").appendTo(d), this._createDynamicList()) : (a('<div class="select-btn"/>').click(function () {
								a(".select-btn", d).removeClass("select"),
								a(this).addClass("select"),
								c._createCurrentUserList()
							}).text("").appendTo(d), this._createCurrentUserList())),
					a('<i class="icon-search"/>').appendTo(d).click(function () {
						return a(".search-info").hide(),
						a(".search-input").animate({
							width: "100%"
						}, function () {
							a("#searchInput").keydown(function (b) {
								13 === b.keyCode && c._createSearchList(a(this).val())
							}).focus()
						}).show(),
						a(document).bind("click.search", function (b) {
							var c = b.target,
							d = a(c).closest(".search-input");
							0 === d.length && (a(".search-info").show(), a(".search-input").animate({
									width: 0
								}, function () {
									a(".search-input").hide()
								}), a(document).unbind("click.search"))
						}),
						!1
					}),
					d.append(a('<div class="search-input"/>').append(a('<input id="searchInput"/>')).append(a('<i class="icon-search"/>'))),
					e.addClass("select"),
					this._createMemberMenu(),
					this._createMemberList(),
					this._bindMemberEvent()
				}
			},
			_isRelyLimitEmpty: function () {
				var a = this.options;
				return FX.Utils.isObjectEmpty(a.limit) && !FX.Utils.isObjectEmpty(a.limitWidget)
			},
			_initLimitMap: function (a) {
				var b = this.options,
				c = this,
				d = {};
				FX.Utils.forEach(a, function (a, b) {
					d[b._id] = b
				}),
				this.limitMap = {},
				FX.Utils.forEach(b.limit, function (a, b) {
					var e = d[b];
					e && e.departmentId && (c.limitMap[e.departmentId] = !0)
				})
			},
			_createMemberMenu: function () {
				var b = this,
				c = this.options;
				if (!this._isRelyLimitEmpty()) {
					if (this.$selectPane.children().hide(), this.$memberMenu)
						return void this.$memberMenu.show();
					this.$memberMenu = a('<div class="member-menu"/>').appendTo(b.$selectPane),
					FX.Utils.dataAjax({
						url: "/data/member/departments",
						data: {
							appId: FX.STATIC.APPID,
							departmentLimit: c.limit
						}
					}, function (c) {
						b.memberTree = new FX.Tree({
								renderEl: a("<div/>").appendTo(b.$memberMenu),
								customCls: "x-department-tree select-department",
								Nodes: c.departments,
								setting: {
									view: {
										expandSpeed: 100
									},
									data: {
										simpleData: {
											enable: !0,
											idKey: "departmentId",
											pIdKey: "parentId"
										}
									},
									callback: {
										onNodeCreated: function (a, b) {
											b.isParent && !b.open && b.level < 1 && this.expandNode(b, !0)
										},
										onClick: function (a, c) {
											b.currentDepartment = c.departmentId,
											b._createMemberList()
										}
									}
								}
							})
					})
				}
			},
			_createMemberList: function (b) {
				var c = this,
				d = this.options;
				this.$memberList ? this.$memberList.show() : this.$memberList = a('<ul class="select-member"/>').appendTo(this.$selectPane),
				this._isRelyLimitEmpty() || (c.memberList = [], b ? (c.$memberList.empty(), this._createMemberItem(b)) : FX.Utils.dataAjax({
						url: "/data/member/users",
						data: {
							appId: FX.STATIC.APPID,
							departmentLimit: d.limit,
							departmentId: c._getDepartmentId(),
							limit: d.count
						}
					}, function (a) {
						c.$memberList.empty(),
						FX.Utils.forEach(a.users, function (a, b) {
							c._createMemberItem(b)
						}),
						a.users.length >= d.count && c._createLoadMoreBtn(0)
					}))
			},
			_createLoadMoreBtn: function (b) {
				var c = this,
				d = a('<li class="load-more"/>').text(" ...").data("skip", b).click(function () {
						c._loadMoreUser(b),
						d.remove()
					}).appendTo(this.$memberList)
			},
			_loadMoreUser: function (a) {
				var b = this,
				c = this.options;
				a += c.count,
				FX.Utils.dataAjax({
					url: "/data/member/users",
					data: {
						appId: FX.STATIC.APPID,
						departmentLimit: c.limit,
						departmentId: b._getDepartmentId(),
						skip: a,
						limit: c.count
					}
				}, function (d) {
					FX.Utils.forEach(d.users, function (a, c) {
						b._createMemberItem(c)
					}),
					d.users.length >= c.count && b._createLoadMoreBtn(a)
				})
			},
			_createMemberItem: function (b) {
				var c = {
					id: b._id,
					name: b.nickname
				},
				d = a("<li/>").append(a("<span/>").text(c.name)).append(a('<div class="select-btn x-radio"/>').append(a('<i class="icon-blank"/>'))).appendTo(this.$memberList).data("user", c);
				this.value === c.id && d.children(".select-btn").addClass("select")
			},
			_bindMemberEvent: function () {
				var b = this;
				this.options;
				this.$memberList.bind("click", function (c) {
					var d = a(c.target).closest("li"),
					e = d.children(".select-btn");
					if (d.length > 0 && e.length > 0)
						if (e.hasClass("select"))
							e.removeClass("select"), b._clearSelectItem();
						else {
							a(".select", b.$memberList).removeClass("select"),
							e.addClass("select");
							var f = d.data("user");
							b._setSelectItem(f)
						}
				})
			},
			_getDynamicFields: function () {
				return this.options.dynamicFields
			},
			_createCurrentUserList: function () {
				var b = this,
				c = this.options;
				if (this.$selectPane.children().hide(), this.$currentUserList ? this.$currentUserList.empty().show() : this.$currentUserList = a('<ul class="select-dynamic"/>').appendTo(this.$selectPane), !this._isRelyLimitEmpty() && FX.STATIC.user) {
					var d = {
						id: FX.STATIC.user._id,
						name: FX.STATIC.user.nickname
					},
					e = a("<li/>").append(a("<span/>").text(d.name)).append(a('<div class="select-btn x-radio"/>').append(a('<i class="icon-blank"/>'))).appendTo(b.$currentUserList).data("user", d).click(function () {
							var c = e.children(".select-btn");
							if (c.hasClass("select"))
								c.removeClass("select"), b._clearSelectItem();
							else {
								a(".select", b.$currentUserList).removeClass("select"),
								c.addClass("select");
								var d = e.data("user");
								b._setSelectItem(d)
							}
						});
					b.value === d.id ? e.children(".select-btn").addClass("select") : b.value === c.dynamicKey && (e.children(".select-btn").addClass("select"), b._setSelectItem(item))
				}
			},
			_createDynamicList: function () {
				var b = this;
				this.$selectPane.children().hide(),
				this.$dynamicList ? this.$dynamicList.empty().show() : this.$dynamicList = a('<ul class="select-dynamic"/>').appendTo(this.$selectPane),
				this._isRelyLimitEmpty() || FX.Utils.forEach(this._getDynamicFields(), function (c, d) {
					var e = a("<li/>").append(a("<span/>").text(d.name)).append(a('<div class="select-btn x-radio"/>').append(a('<i class="icon-blank"/>'))).appendTo(b.$dynamicList).data("user", d).click(function () {
							var c = e.children(".select-btn");
							if (c.hasClass("select"))
								c.removeClass("select"), b._clearSelectItem();
							else {
								a(".select", b.$dynamicList).removeClass("select"),
								c.addClass("select");
								var d = e.data("user");
								b._setSelectItem(d)
							}
						});
					b.value === d.id && e.children(".select-btn").addClass("select")
				})
			},
			_createSearchList: function (b) {
				var c = this.options,
				d = this;
				if (!this._isRelyLimitEmpty()) {
					this.$selectPane.children().hide();
					var e = a('<div class="select-search"/>').appendTo(this.$selectPane);
					e.append(a('<div class="search-title"/>').text("")),
					FX.Utils.dataAjax({
						url: "/data/member/users",
						data: {
							appId: FX.STATIC.APPID,
							departmentLimit: c.limit,
							departmentId: 1,
							keyword: b,
							limit: c.count
						}
					}, function (b) {
						var c = b.users || [];
						if (c.length <= 0)
							e.append(a('<span class="search-empty"/>').text(" "));
						else {
							var d = a('<ul class="search-list"/>').appendTo(e);
							FX.Utils.forEach(c, function (b, c) {
								a("<li/>").appendTo(d).text(c.nickname).data("data", c)
							})
						}
					}),
					e.bind("click", function (b) {
						var c = b.target,
						e = a(c).closest("li"),
						f = e.data("data");
						e.length > 0 && f && (d._createMemberMenu(), d._createMemberList(f))
					})
				}
			},
			_getDepartmentId: function () {
				return FX.Utils.isEmpty(this.currentDepartment) && (this.currentDepartment = 1),
				this.currentDepartment
			},
			getItems: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).data("item"))
				}),
				b
			},
			setValue: function (a) {
				this.value = a,
				this._initData()
			},
			getValue: function () {
				return this.value
			},
			getText: function () {
				return this.value && this.selectMap[this.value] ? this.selectMap[this.value].name : ""
			},
			_refreshUserList: function (b) {
				var c = this;
				a("li", b).each(function (b, d) {
					var e = a(d).data("user");
					e && (c.value === e.id ? a(d).children(".select-btn").addClass("select") : a(d).children(".select-btn").removeClass("select"))
				})
			},
			refresh: function () {
				this.$memberList && this._refreshUserList(this.$memberList),
				this.$dynamicList && this._refreshUserList(this.$dynamicList),
				this.$currentUserList && this._refreshUserList(this.$currentUserList)
			},
			checkValidate: function () {
				if (FX.STATIC.FTOKEN)
					return this.setInvalidateType("regex"), !1;
				var a = this.options;
				return !FX.Utils.isEmpty(this.getValue()) || a.allowBlank
			},
			rebuild: function (a) {
				this.value = a,
				this._initData(),
				this.refresh()
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.User.superclass.getOptions.apply(this, arguments), {
					noRepeat: b.noRepeat,
					limit: b.limit,
					limitWidget: b.limitWidget
				})
			}
		}),
	a.shortcut("user", FX.User)
}
(jQuery), function (a) {
	FX.UserGroup = FX.extend(FX.User, {
			_defaultConfig: function () {
				return a.extend(FX.UserGroup.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fui_user_group ",
					title: "",
					msg: "",
					width: 420,
					height: 80,
					value: [],
					onStopEdit: null
				})
			},
			_init: function () {
				this.value = [],
				FX.UserGroup.superclass._init.apply(this, arguments)
			},
			_initData: function () {
				if (!FX.STATIC.FTOKEN) {
					var a = this.options,
					b = this;
					if (this.selectMap = {}, a.items)
						return this.items = a.items, void this._initSelectPane();
					if (this.items = b._getDynamicFields(), this.value && this.value.length > 0) {
						var c = this.value.indexOf(a.dynamicKey);
						"select" === a.dynamicType && c > -1 && FX.STATIC.user && this.value.splice(c, 1, FX.STATIC.user._id);
						var d = FX.Utils.createMask(this.element, {
								isLight: !0,
								hasLoader: !0
							});
						FX.Utils.ajax({
							url: "/corp/list_member_name",
							data: {
								members: this.value
							}
						}, function (a, c) {
							var e = [];
							FX.Utils.forEach(a.users, function (a, b) {
								e.push({
									id: b._id,
									name: b.nickname,
									type: "user"
								})
							}),
							b.items = e.concat(b._getDynamicFields()),
							b._initSelectPane(),
							d.remove()
						}, function (a, b) {
							d.remove()
						})
					} else
						this._initSelectPane()
				}
			},
			_createSelectList: function () {
				var b = this,
				c = this.options;
				this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element),
				this.value && this.value.length > 0 ? FX.Utils.forEach(this.value, function (a, c) {
					var d = b.selectMap[c];
					b._createSelectItem(d)
				}) : c.editable || this.$selectList.append(a('<div class="select-empty"/>').text(c.msg))
			},
			_addSelectItem: function (a) {
				this.options;
				this._createSelectItem(a),
				this.value = this.getValue(),
				this.selectMap[a.id] = a
			},
			_removeSelectItem: function (b) {
				this.options;
				a("#" + b.id, this.$selectList).remove(),
				this.value = this.getValue()
			},
			_createSelectItem: function (b) {
				var c = this.options,
				d = this;
				if (b) {
					var e = a('<li class="select-item"/>').append(a("<span/>").text(b.name)).appendTo(this.$selectList).attr("id", b.id).data("item", b);
					e.prepend(a('<i class="select-icon icon-member-normal"/>')),
					c.editable && a('<span class="remove-btn"/>').append(a('<i class="icon-close-large"/>')).click(function () {
						d._removeSelectItem(b),
						d.refresh()
					}).appendTo(e)
				}
			},
			_createMemberItem: function (b) {
				var c = {
					id: b._id,
					name: b.nickname
				},
				d = a("<li/>").append(a("<span/>").text(c.name)).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).appendTo(this.$memberList).data("user", c);
				this.value.indexOf(c.id) > -1 && d.children(".select-btn").addClass("select")
			},
			_bindMemberEvent: function () {
				var b = this;
				this.options;
				this.$memberList.bind("click", function (c) {
					var d = a(c.target).closest("li"),
					e = d.children(".select-btn");
					if (d.length > 0 && e.length > 0) {
						var f = d.data("user");
						e.hasClass("select") ? (e.removeClass("select"), b._removeSelectItem(f)) : (e.addClass("select"), b._addSelectItem(f))
					}
				})
			},
			_createCurrentUserList: function () {
				var b = this,
				c = this.options;
				if (this.$selectPane.children().hide(), this.$currentUserList ? this.$currentUserList.empty().show() : this.$currentUserList = a('<ul class="select-dynamic"/>').appendTo(this.$selectPane), !this._isRelyLimitEmpty() && FX.STATIC.user) {
					var d = {
						id: FX.STATIC.user._id,
						name: FX.STATIC.user.nickname
					},
					e = a("<li/>").append(a("<span/>").text(d.name)).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).appendTo(b.$currentUserList).data("user", d).click(function () {
							var a = e.children(".select-btn"),
							c = e.data("user");
							a.hasClass("select") ? (a.removeClass("select"), b._removeSelectItem(c)) : (a.addClass("select"), b._addSelectItem(c))
						});
					b.value.indexOf(d.id) > -1 ? e.children(".select-btn").addClass("select") : b.value.indexOf(c.dynamicKey) > -1 && (e.children(".select-btn").addClass("select"), b._addSelectItem(d))
				}
			},
			_createDynamicList: function () {
				var b = this;
				this.$selectPane.children().hide(),
				this.$dynamicList ? this.$dynamicList.empty().show() : this.$dynamicList = a('<ul class="select-dynamic"/>').appendTo(this.$selectPane),
				this._isRelyLimitEmpty() || FX.Utils.forEach(this._getDynamicFields(), function (c, d) {
					var e = a("<li/>").append(a("<span/>").text(d.name)).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).appendTo(b.$dynamicList).data("user", d).click(function () {
							var a = e.children(".select-btn"),
							c = e.data("user");
							a.hasClass("select") ? (a.removeClass("select"), b._removeSelectItem(c)) : (a.addClass("select"), b._addSelectItem(c))
						});
					b.value.indexOf(d.id) > -1 && e.children(".select-btn").addClass("select")
				})
			},
			getItems: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).data("item"))
				}),
				b
			},
			checkValidate: function () {
				if (FX.STATIC.FTOKEN)
					return this.setInvalidateType("regex"), !1;
				var a = this.options;
				return !(!a.allowBlank && 0 === this.getValue().length)
			},
			setValue: function (a) {
				this.value = a ? [].concat(a) : [],
				this._initData()
			},
			getValue: function () {
				var b = (this.options, this.value);
				return this.$selectList && (b = [], a(".select-item", this.$selectList).each(function (c, d) {
						b.push(a(d).attr("id"))
					})),
				b
			},
			getText: function () {
				var a = this,
				b = [];
				return FX.Utils.forEach(this.value, function (c, d) {
					a.selectMap[d] && b.push(a.selectMap[d].name)
				}),
				b
			},
			getNullValue: function () {
				return []
			},
			_refreshUserList: function (b) {
				var c = this;
				a("li", b).each(function (b, d) {
					var e = a(d).data("user");
					e && (c.value.indexOf(e.id) > -1 ? a(d).children(".select-btn").addClass("select") : a(d).children(".select-btn").removeClass("select"))
				})
			}
		}),
	a.shortcut("usergroup", FX.UserGroup)
}
(jQuery), function (a) {
	FX.Dept = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Dept.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fui_dept",
					title: "",
					msg: "",
					width: 240,
					height: 40,
					value: null,
					allowBlank: !0,
					noRepeat: !1,
					editable: !1,
					count: 100,
					limit: [],
					dynamicFields: [{
							_id: FX.CONST.DEPT_ID.CURRENT,
							name: ""
						}
					],
					dynamicKey: FX.CONST.DEPT_ID.CURRENT,
					dynamicType: "select",
					onStopEdit: null
				})
			},
			_init: function () {
				FX.Dept.superclass._init.apply(this, arguments),
				this._initSelectPane()
			},
			_initData: function () {
				if (!FX.STATIC.FTOKEN) {
					var a = this.options,
					b = this;
					if (a.items)
						return this.items = a.items, void this._initSelectPane();
					if (this.items = b._getDynamicFields(), "select" === a.dynamicType && this.value === a.dynamicKey) {
						var c = FX.Utils.createMask(this.element, {
								isLight: !0,
								hasLoader: !0
							});
						return void FX.Utils.dataAjax({
							url: "/data/member/current_departments",
							async: !1
						}, function (c) {
							b.value === a.dynamicKey && (FX.Utils.isObjectEmpty(c.departmentList) ? b.setValue(null) : b.setValue(c.departmentList[0]._id))
						}, function () {}, function () {
							c.remove()
						})
					}
					if (this.value) {
						var d = FX.Utils.createMask(this.element, {
								isLight: !0,
								hasLoader: !0
							});
						FX.Utils.dataAjax({
							url: "/corp/list_member_name",
							data: {
								members: this.value
							}
						}, function (a) {
							var c = [];
							FX.Utils.forEach(a.departments, function (a, b) {
								c.push({
									_id: b._id,
									name: b.name
								})
							}),
							b.items = c.concat(b._getDynamicFields()),
							b._initSelectPane()
						}, function () {}, function () {
							d.remove()
						})
					} else
						this._initSelectPane()
				}
			},
			_initSelectPane: function () {
				if (FX.STATIC.FTOKEN)
					return this.element.empty(), void a('<div class="nonsupport-msg"/>').text("").appendTo(this.element);
				var b = this,
				c = this.options;
				this.selectMap = {},
				FX.Utils.forEach(this.items, function (a, c) {
					b.selectMap[c._id] = c
				}),
				this._createSelectList(),
				c.editable ? (this._createSelectPane(), this._bindSelectEvent()) : this._bindEditEvent()
			},
			_bindEditEvent: function () {
				var a = this,
				b = this.options;
				this.$selectList.unbind("click"),
				this.$selectList.bind("click", function () {
					if (a.isEnabled()) {
						var c = new FX.ConfirmDialog({
								title: b.title,
								height: 550,
								width: 590,
								contentWidget: {
									rowSize: [440],
									colSize: [570],
									padding: 10,
									items: [[{
												widgetName: b.widgetName,
												type: b.type,
												editable: !0,
												limit: b.limit,
												rely: b.rely,
												items: a.items,
												value: a.value
											}
										]]
								},
								onOk: function () {
									var d = c.getWidgetByName(b.widgetName);
									return a.value = d.getValue(),
									a.items = d.getItems(),
									a._initSelectPane(),
									FX.Utils.applyFunc(a, b.onStopEdit, [], !1),
									!1
								}
							});
						c.show()
					}
				})
			},
			_createSelectList: function () {
				var b = this,
				c = this.options;
				if (this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element), this.value) {
					var d = b.selectMap[this.value];
					b._createSelectItem(d)
				} else
					c.editable || this.$selectList.append(a('<div class="select-empty"/>').text(c.msg))
			},
			_bindSelectEvent: function () {
				var b = this;
				this.$selectList.unbind("click"),
				this.$selectList.bind("click", function (c) {
					var d = a(c.target).closest(".select-item"),
					e = d.data("item");
					if (e) {
						var f = a(c.target).closest(".remove-btn");
						f.length > 0 && b._removeSelectItem(e)
					}
				})
			},
			_addSelectItem: function (a) {
				this.$selectList.empty(),
				this._createSelectItem(a),
				this.value = a._id,
				this.selectMap[a._id] = a,
				this.refresh()
			},
			_removeSelectItem: function () {
				this.$selectList.empty(),
				this.value = null,
				this.refresh()
			},
			_createSelectItem: function (b) {
				var c = this.options;
				if (b) {
					var d = a('<li class="select-item"/>').append(a("<span/>").text(b.name)).appendTo(this.$selectList).attr("id", b._id).data("item", b);
					d.prepend(a('<i class="select-icon icon-department"/>')),
					c.editable && a('<span class="remove-btn"/>').append(a('<i class="icon-close-large"/>')).appendTo(d)
				}
			},
			_createSelectPane: function () {
				if (!this.$selectPane) {
					var b = this.options,
					c = this,
					d = a('<div class="select-menu"/>').appendTo(this.element);
					this.$selectPane = a('<div class="select-pane"/>').appendTo(this.element);
					var e = a('<div class="select-btn"/>').click(function () {
							a(".select-btn", d).removeClass("select"),
							a(this).addClass("select"),
							c._createDepartmentList()
						}).text("").appendTo(d);
					(b.limit.indexOf(b.dynamicKey) > -1 || b.limit.length <= 0) && ("set" === b.dynamicType ? (a('<div class="select-btn"/>').click(function () {
								a(".select-btn", d).removeClass("select"),
								a(this).addClass("select"),
								c._createDynamicList()
							}).text("").appendTo(d), this._createDynamicList()) : a('<div class="select-btn"/>').click(function () {
							a(".select-btn", d).removeClass("select"),
							a(this).addClass("select"),
							c._createCurrentDepartmentList()
						}).text("").appendTo(d)),
					a('<i class="icon-search"/>').appendTo(d).click(function () {
						return a(".search-info").hide(),
						a(".search-input").animate({
							width: "100%"
						}, function () {
							a("#searchInput").keydown(function (b) {
								13 === b.keyCode && c._createSearchList(a(this).val())
							}).focus()
						}).show(),
						a(document).bind("click.search", function (b) {
							var c = b.target,
							d = a(c).closest(".search-input");
							0 === d.length && (a(".search-info").show(), a(".search-input").animate({
									width: 0
								}, function () {
									a(".search-input").hide()
								}), a(document).unbind("click.search"))
						}),
						!1
					}),
					d.append(a('<div class="search-input"/>').append(a('<input id="searchInput"/>')).append(a('<i class="icon-search"/>'))),
					e.addClass("select"),
					this._createDepartmentList()
				}
			},
			_isRelyLimitEmpty: function () {
				var a = this.options;
				return FX.Utils.isObjectEmpty(a.limit) && !FX.Utils.isObjectEmpty(a.rely)
			},
			_initLimitMap: function (a) {
				var b = this.options,
				c = this;
				if (!FX.Utils.isObjectEmpty(b.limit)) {
					var d = {};
					FX.Utils.forEach(a, function (a, b) {
						d[b._id] = b
					}),
					this.limitMap = {},
					FX.Utils.forEach(b.limit, function (a, b) {
						var e = d[b];
						e && e.departmentId && (c.limitMap[e.departmentId] = !0)
					}),
					FX.Utils.forEach(a, function (a, b) {
						c.limitMap[b.departmentId] || FX.Utils.forEach(b.path, function (a, d) {
							c.limitMap[d] && (c.limitMap[b.departmentId] = !0)
						})
					})
				}
			},
			_doSelectItem: function (a) {
				if (this._checkLimit(a)) {
					var b = {
						name: a.name,
						_id: a._id
					};
					this.value !== b._id ? this._addSelectItem(b) : this._removeSelectItem(b),
					this.departmentTree.refresh()
				}
			},
			_createDepartmentList: function () {
				var b = this,
				c = this.options;
				if (!this._isRelyLimitEmpty()) {
					if (this.$selectPane.children().hide(), this.$memberMenu)
						return void this.$memberMenu.show();
					this.$memberMenu = a('<div class="select-department"/>').appendTo(b.$selectPane),
					FX.Utils.dataAjax({
						url: "/data/member/departments",
						data: {
							appId: FX.STATIC.APPID,
							departmentLimit: c.limit
						}
					}, function (c) {
						b.departments = a.extend(!0, [], c.departments),
						b.departments[0] && !b.departments[0]._id && b.departments.shift(),
						b._initLimitMap(b.departments),
						b.departmentTree = new FX.Tree({
								renderEl: a("<div/>").appendTo(b.$memberMenu),
								customCls: "x-department-tree select-department",
								Nodes: b.departments,
								setting: {
									view: {
										expandSpeed: 100
									},
									data: {
										simpleData: {
											enable: !0,
											idKey: "departmentId",
											pIdKey: "parentId"
										}
									},
									callback: {
										onCheck: function (a, c) {
											b._doSelectItem(c)
										},
										onClick: function (a, c) {
											b._doSelectItem(c)
										},
										beforeNodeCreate: function (a) {
											b._checkLimit(a) || (a.nocheck = !0),
											a.checked = a._id === b.value
										},
										onNodeCreated: function (a, c) {
											c.isParent && !c.open && c.level < 1 && this.expandNode(c, !0),
											c.departmentId == b.currentDepartment && this.selectNode(c)
										}
									},
									check: {
										enable: !0,
										chkStyle: "x-radio",
										chkboxType: {
											Y: "",
											N: ""
										}
									}
								}
							})
					})
				}
			},
			_checkLimit: function (a) {
				var b = this.options;
				return !!a && (!!FX.Utils.isObjectEmpty(b.limit) || this.limitMap[a.departmentId])
			},
			_getDynamicFields: function () {
				return this.options.dynamicFields
			},
			_createDepartmentItem: function (b) {
				var c = this,
				d = a("<li/>").append(a('<i class="icon-department"/>')).append(a("<span/>").text(b.name)).append(a('<div class="select-btn x-radio"/>').append(a('<i class="icon-blank"/>'))).data("item", b).click(function () {
						var a = d.children(".select-btn");
						if (a.hasClass("select"))
							a.removeClass("select"), c._removeSelectItem();
						else {
							a.addClass("select");
							var b = d.data("item");
							c._addSelectItem(b)
						}
					});
				return this.value === b._id && d.children(".select-btn").addClass("select"),
				d
			},
			_createCurrentDepartmentList: function () {
				var b = this;
				this._isRelyLimitEmpty() || (this.$selectPane.children().hide(), this.$currentDepartmentList ? this.$currentDepartmentList.empty().show() : this.$currentDepartmentList = a('<ul class="department-list"/>').appendTo(this.$selectPane),
					this.currentDepartments ? FX.Utils.forEach(this.currentDepartments, function (a, c) {
						b.$currentDepartmentList.append(b._createDepartmentItem(c))
					}) : FX.Utils.dataAjax({
						url: "/data/member/current_departments"
					}, function (a) {
						b.currentDepartments = a.departmentList,
						b._createCurrentDepartmentList()
					}))
			},
			_createDynamicList: function () {
				var b = this;
				this.$selectPane.children().hide(),
				this.$dynamicList ? this.$dynamicList.empty().show() : this.$dynamicList = a('<ul class="department-list"/>').appendTo(this.$selectPane),
				FX.Utils.forEach(this._getDynamicFields(), function (a, c) {
					b.$dynamicList.append(b._createDepartmentItem(c))
				})
			},
			_createSearchList: function (b) {
				var c = this;
				if (!this._isRelyLimitEmpty()) {
					this.$selectPane.children().hide();
					var d = [],
					e = a('<div class="select-search"/>').appendTo(this.$selectPane),
					f = new RegExp(b);
					FX.Utils.forEach(this.departments, function (a, b) {
						f.test(b.name) && d.push(b)
					}),
					e.append(a('<div class="search-title"/>').text("")),
					d.length <= 0 ? e.append(a('<span class="search-empty"/>').text(" ")) : (this.$searchList = a('<ul class="department-list"/>').appendTo(e), FX.Utils.forEach(d, function (a, b) {
							c._checkLimit(b) && c.$searchList.append(c._createDepartmentItem(b))
						}))
				}
			},
			getItems: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).data("item"))
				}),
				b
			},
			setValue: function (a) {
				this.value = a,
				this._initData()
			},
			getValue: function () {
				return this.value
			},
			getText: function () {
				return this.value && this.selectMap[this.value] ? this.selectMap[this.value].name : ""
			},
			_refreshDepartmentList: function (b) {
				var c = this;
				a("li", b).each(function (b, d) {
					var e = a(d).data("item");
					e && (c.value === e._id ? a(d).children(".select-btn").addClass("select") : a(d).children(".select-btn").removeClass("select"))
				})
			},
			refresh: function () {
				this.departmentTree.refresh(),
				this.$dynamicList && this._refreshDepartmentList(this.$dynamicList),
				this.$currentDepartmentList && this._refreshDepartmentList(this.$currentDepartmentList),
				this.$searchList && this._refreshDepartmentList(this.$searchList)
			},
			checkValidate: function () {
				if (FX.STATIC.FTOKEN)
					return this.setInvalidateType("regex"), !1;
				var a = this.options;
				return !FX.Utils.isEmpty(this.getValue()) || a.allowBlank
			},
			rebuild: function (a) {
				this.value = a,
				this._initData(),
				this.refresh()
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Dept.superclass.getOptions.apply(this, arguments), {
					noRepeat: b.noRepeat,
					limit: b.limit
				})
			}
		}),
	a.shortcut("dept", FX.Dept)
}
(jQuery), function (a) {
	FX.DeptGroup = FX.extend(FX.Dept, {
			_defaultConfig: function () {
				return a.extend(FX.DeptGroup.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fui_dept fui_dept_group",
					width: 420,
					height: 80,
					value: []
				})
			},
			_init: function () {
				this.value = [],
				FX.DeptGroup.superclass._init.apply(this, arguments)
			},
			_initData: function () {
				if (!FX.STATIC.FTOKEN) {
					var a = this.options,
					b = this;
					if (this.selectMap = {}, a.items)
						return this.items = a.items, void this._initSelectPane();
					if (this.items = b._getDynamicFields(), FX.Utils.isObjectEmpty(this.value))
						return void this._initSelectPane();
					var c = this.value.indexOf(a.dynamicKey);
					if ("select" === a.dynamicType && c > -1) {
						var d = FX.Utils.createMask(this.element, {
								isLight: !0,
								hasLoader: !0
							});
						return void FX.Utils.dataAjax({
							url: "/data/member/current_departments"
						}, function (d) {
							if (!(b.value.indexOf(a.dynamicKey) < 0)) {
								var e = [];
								FX.Utils.forEach(d.departmentList, function (a, b) {
									e.push(b._id)
								}),
								b.value.splice(c, 1),
								b.value = b.value.concat(e),
								b.setValue(b.value)
							}
						}, function () {}, function () {
							d.remove()
						})
					}
					var e = FX.Utils.createMask(this.element, {
							isLight: !0,
							hasLoader: !0
						});
					FX.Utils.ajax({
						url: "/corp/list_member_name",
						data: {
							members: this.value
						}
					}, function (a) {
						var c = [];
						FX.Utils.forEach(a.departments, function (a, b) {
							c.push({
								_id: b._id,
								name: b.name
							})
						}),
						b.items = c.concat(b._getDynamicFields()),
						b._initSelectPane()
					}, function () {}, function () {
						e.remove()
					})
				}
			},
			_createSelectList: function () {
				var b = this,
				c = this.options;
				this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element),
				this.value && this.value.length > 0 ? FX.Utils.forEach(this.value, function (a, c) {
					var d = b.selectMap[c];
					b._createSelectItem(d)
				}) : c.editable || this.$selectList.append(a('<div class="select-empty"/>').text(c.msg))
			},
			_addSelectItem: function (a) {
				this._createSelectItem(a),
				this.value = this.getValue(),
				this.selectMap[a._id] = a,
				this.refresh()
			},
			_removeSelectItem: function (b) {
				a("#" + b._id, this.$selectList).remove(),
				this.value = this.getValue(),
				this.refresh()
			},
			_doSelectItem: function (a) {
				if (this._checkLimit(a)) {
					var b = {
						name: a.name,
						_id: a._id
					};
					this.value.indexOf(b._id) > -1 ? this._removeSelectItem(b) : this._addSelectItem(b)
				}
			},
			_createDepartmentList: function () {
				var b = this,
				c = this.options;
				if (!this._isRelyLimitEmpty()) {
					if (this.$selectPane.children().hide(), this.$memberMenu)
						return void this.$memberMenu.show();
					this.$memberMenu = a('<div class="select-department"/>').appendTo(b.$selectPane),
					FX.Utils.dataAjax({
						url: "/data/member/departments",
						data: {
							appId: FX.STATIC.APPID,
							departmentLimit: c.limit
						}
					}, function (c) {
						b.departments = a.extend(!0, [], c.departments),
						b.departments[0] && !b.departments[0]._id && b.departments.shift(),
						b._initLimitMap(b.departments),
						b.departmentTree = new FX.Tree({
								renderEl: a("<div/>").appendTo(b.$memberMenu),
								customCls: "x-department-tree select-department",
								Nodes: b.departments,
								setting: {
									view: {
										expandSpeed: 100
									},
									data: {
										simpleData: {
											enable: !0,
											idKey: "departmentId",
											pIdKey: "parentId"
										}
									},
									callback: {
										onCheck: function (a, c) {
											b._doSelectItem(c)
										},
										onClick: function (a, c) {
											b._doSelectItem(c)
										},
										beforeNodeCreate: function (a) {
											b._checkLimit(a) || (a.nocheck = !0),
											a.checked = b.value.indexOf(a._id + "") > -1
										},
										onNodeCreated: function (a, c) {
											c.isParent && !c.open && c.level < 1 && this.expandNode(c, !0),
											c.departmentId == b.currentDepartment && this.selectNode(c)
										}
									},
									check: {
										enable: !0,
										chkboxType: {
											Y: "",
											N: ""
										}
									}
								}
							})
					})
				}
			},
			_createDepartmentItem: function (b) {
				var c = this,
				d = a("<li/>").append(a('<i class="icon-department"/>')).append(a("<span/>").text(b.name)).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).data("item", b).click(function () {
						var a = d.children(".select-btn");
						if (a.hasClass("select"))
							a.removeClass("select"), c._removeSelectItem(d.data("item"));
						else {
							a.addClass("select");
							var b = d.data("item");
							c._addSelectItem(b)
						}
					});
				return this.value.indexOf(b._id) > -1 && d.children(".select-btn").addClass("select"),
				d
			},
			getItems: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).data("item"))
				}),
				b
			},
			checkValidate: function () {
				if (FX.STATIC.FTOKEN)
					return this.setInvalidateType("regex"), !1;
				var a = this.options;
				return !(!a.allowBlank && 0 === this.getValue().length)
			},
			setValue: function (a) {
				this.value = a ? [].concat(a) : [],
				this._initData()
			},
			getValue: function () {
				var b = this.value;
				return this.$selectList && (b = [], a(".select-item", this.$selectList).each(function (c, d) {
						b.push(a(d).attr("id"))
					})),
				b
			},
			getText: function () {
				var a = this,
				b = [];
				return FX.Utils.forEach(this.value, function (c, d) {
					a.selectMap[d] && b.push(a.selectMap[d].name)
				}),
				b
			},
			getNullValue: function () {
				return []
			},
			_refreshDepartmentList: function (b) {
				var c = this;
				a("li", b).each(function (b, d) {
					var e = a(d).data("item");
					e && (c.value.indexOf(e._id) > -1 ? a(d).children(".select-btn").addClass("select") : a(d).children(".select-btn").removeClass("select"))
				})
			}
		}),
	a.shortcut("deptgroup", FX.DeptGroup)
}
(jQuery), function (a) {
	FX.LinkQuery = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.LinkQuery.superclass._defaultConfig.apply(), {
					baseCls: "fui_link_query",
					allowBlank: !0,
					linkFields: [],
					linkFilter: [],
					linkForm: null,
					layoutSize: {}
				})
			},
			_init: function () {
				FX.LinkQuery.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.widgetsMap = {},
				this.typeMap = {},
				FX.Utils.forEach(b.linkFields, function (d, e) {
					var f = a('<div class="link-field"/>').appendTo(c.element);
					c._formatSubFormItems(e);
					var g = {},
					h = c._formatWidgetType(e.type);
					b.subform ? (f.addClass("sub-link"), g.width = 150) : (f.append(a('<div class="fl-label"/>').text(e.text)), b.layoutSize && b.layoutSize[h] && a.extend(g, b.layoutSize[h])),
					c.widgetsMap[e.name] = FX.createWidget(a.extend(g, {
								renderEl: a("<div/>").appendTo(f),
								widgetName: e.name,
								type: h,
								items: e.items,
								format: e.format,
								enable: !1
							})),
					c.typeMap[e.name] = e.type
				})
			},
			_formatSubFormItems: function (a) {
				if ("subform" === a.type) {
					var b = this;
					FX.Utils.forEach(a.items, function (a, c) {
						c.widget && (c.widget.type = b._formatWidgetType(c.widget.type))
					})
				}
			},
			_formatWidgetType: function (a) {
				switch (a) {
				case "combo":
				case "combocheck":
				case "radiogroup":
				case "checkboxgroup":
				case "address":
				case "location":
					return "text";
				default:
					return a
				}
			},
			_formatWidgetData: function (a, b) {
				switch (a) {
				case "address":
				case "location":
					return FX.Utils.address2Str(b, "", "pcda");
				default:
					return b
				}
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.LinkQuery.superclass.getOptions.apply(this, arguments), {
					linkFilter: b.linkFilter,
					linkFields: b.linkFields,
					linkForm: b.linkForm,
					refAppId: b.refAppId
				})
			},
			reload: function (a) {
				var b = this.options,
				c = this,
				d = [];
				FX.Utils.forEach(b.linkFields, function (a, b) {
					d.push(b.name)
				}),
				!b.linkForm || d.length <= 0 || FX.Utils.dataAjax({
					url: "/data/filter",
					data: {
						formId: b.linkForm,
						fields: d,
						filter: a,
						refAppId: b.refAppId
					}
				}, function (a, b) {
					return FX.Utils.isObjectEmpty(a.result) ? void FX.Utils.forEach(c.widgetsMap, function (a, b) {
						b.setValue(null)
					}) : void FX.Utils.forEach(c.widgetsMap, function (b, d) {
						var e = c._formatWidgetData(c.typeMap[b], a.result[b]);
						d.setValue(e)
					})
				})
			},
			doResize: function (a) {
				var b = this.options;
				if (b.subform) {
					var c = 154 * b.linkFields.length;
					this.element.css({
						width: c
					})
				}
			},
			supportLayout: function () {
				var a = this.options,
				b = !0;
				return FX.Utils.forEach(a.linkFields, function (a, c) {
					if ("subform" === c.type)
						return b = !1, !1
				}),
				b
			}
		}),
	a.shortcut("linkquery", FX.LinkQuery)
}
(jQuery), function (a) {
	FX.LinkData = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.LinkData.superclass._defaultConfig.apply(), {
					baseCls: "fui_link_data",
					allowBlank: !0,
					linkFields: [],
					linkKey: null,
					linkFilter: [],
					linkForm: null,
					itemsPerPage: 20,
					layoutSize: {},
					onBeforeLinkData: null
				})
			},
			_init: function () {
				FX.LinkData.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this._createSelectBtn(),
				this.widgetsMap = {},
				this.typeMap = {},
				FX.Utils.forEach(b.linkFields, function (d, e) {
					var f = a('<div class="link-field"/>').appendTo(c.element);
					c._formatSubFormItems(e);
					var g = {},
					h = c._formatWidgetType(e.type);
					b.subform ? (f.addClass("sub-link"), g.width = 150) : (f.append(a('<div class="fl-label"/>').text(e.text)), b.layoutSize && b.layoutSize[h] && a.extend(g, b.layoutSize[h])),
					c.widgetsMap[e.name] = FX.createWidget(a.extend(g, {
								renderEl: a("<div/>").appendTo(f),
								widgetName: e.name,
								type: h,
								items: e.items,
								format: e.format,
								enable: !1
							})),
					c.typeMap[e.name] = e.type
				})
			},
			_setWidgetsValue: function (a) {
				var b = this;
				FX.Utils.forEach(this.widgetsMap, function (c, d) {
					var e = b._formatWidgetData(b.typeMap[c], a[c]);
					d.setValue(e)
				})
			},
			_formatSubFormItems: function (a) {
				if ("subform" === a.type) {
					var b = this;
					FX.Utils.forEach(a.items, function (a, c) {
						c.widget && (c.widget.type = b._formatWidgetType(c.widget.type))
					})
				}
			},
			_formatWidgetType: function (a) {
				switch (a) {
				case "combo":
				case "combocheck":
				case "radiogroup":
				case "checkboxgroup":
				case "address":
				case "location":
					return "text";
				default:
					return a
				}
			},
			_formatWidgetData: function (a, b) {
				switch (a) {
				case "address":
				case "location":
					return FX.Utils.address2Str(b, "", "pcda");
				default:
					return b
				}
			},
			_createSelectBtn: function () {
				var b = this.options,
				c = this;
				b.subform ? a('<div class="data-select"/>').append(a('<i class="icon-data-picker"/>')).appendTo(this.element).click(function (a) {
					c.isEnabled() && FX.Utils.applyFunc(c, b.onBeforeLinkData, [b.linkFilter], !1)
				}) : new FX.Button({
					text: "",
					width: 240,
					style: "white",
					renderEl: a("<div/>").appendTo(this.element),
					onClick: function () {
						c.isEnabled() && FX.Utils.applyFunc(c, b.onBeforeLinkData, [b.linkFilter], !1)
					}
				})
			},
			_createDataList: function (b) {
				var c = this;
				this.datalist && this.datalist.remove(),
				this.items = b,
				this.datalist = a('<ul class="data-list"/>').appendTo(this.element),
				this.datalist.append(a('<li class="data-item data-clear"/>').text("")),
				b.length <= 0 ? this.datalist.append(a('<div class="empty-list"/>').text("")) : FX.Utils.forEach(b, function (a, b) {
					c._createDataItem(b)
				}),
				this._bindListEvent()
			},
			_createDataItem: function (b) {
				var c = this.options,
				d = this,
				e = [];
				FX.Utils.forEach(c.linkFields, function (a, c) {
					var f = d._formatData(c.type, b[c.name], c.format);
					f && e.push(f)
				});
				var f = e.join(","),
				g = a('<li class="data-item" title=' + f + "/>").text(f).appendTo(this.datalist).data("data", b);
				this.value && this.value.id === b._id && g.addClass("select")
			},
			_bindListEvent: function () {
				var b = this,
				c = this.options;
				a(document).bind("mousedown.data-list", function (c) {
					var d = c.target,
					e = a(d).closest(b.datalist);
					0 === e.length && b._hideDataList()
				}),
				this.datalist.click(function (d) {
					var e = d.target,
					f = a(e).closest(".data-item");
					if (f && f.length > 0) {
						if (f.hasClass("data-clear"))
							b.value = {},
						FX.Utils.forEach(b.widgetsMap, function (a, b) {
							b.setValue(null)
						});
						else {
							var g = f.data("data");
							b.value = {
								id: g._id,
								key: g[c.linkKey]
							},
							b._setWidgetsValue(g)
						}
						FX.Utils.applyFunc(b, c.onStopEdit, [], !1),
						b._hideDataList()
					}
					return !1
				}),
				this.datalist.scroll(function () {
					this.scrollTop + a(this).height() > this.scrollHeight - 5 && b.loadMore()
				})
			},
			_hideDataList: function () {
				a(document).unbind("mousedown.data-list"),
				this.datalist.detach()
			},
			_formatData: function (a, b, c) {
				if (FX.Utils.isObjectEmpty(b))
					return "";
				var d = b.toString();
				switch (a) {
				case "address":
				case "location":
					d = FX.Utils.address2Str(b, "", "pcda");
					break;
				case "datetime":
					d = FX.Utils.date2Str(new Date(b), c || "yyyy-MM-dd");
					break;
				case "subform":
					d = "";
					break;
				case "user":
				case "usergroup":
					d = this.nameMap ? this.nameMap[b] : b
				}
				return d
			},
			checkValidate: function () {
				return this.options.allowBlank || !FX.Utils.isObjectEmpty(this.value)
			},
			setValue: function (a) {
				var b = this.options,
				c = this;
				this.value = a,
				!FX.Utils.isObjectEmpty(a) && a.hasOwnProperty("id") && FX.Utils.dataAjax({
					url: "/data/read_link",
					data: {
						formId: a.entryId || b.linkForm,
						linkId: a.id,
						refAppId: a.appId || b.refAppId
					}
				}, function (a, b) {
					c._setWidgetsValue(a.data)
				})
			},
			getValue: function () {
				var b = this.options;
				return this.value && this.value.id ? a.extend({
					appId: b.refAppId,
					entryId: b.linkForm
				}, this.value) : {}
			},
			getText: function () {
				var a = {};
				return FX.Utils.forEach(this.widgetsMap, function (b, c) {
					a[b] = c.getText()
				}),
				a
			},
			getLinkValue: function () {
				return this.value && this.value.key
			},
			getLinkType: function () {
				return this.options.linkType
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.LinkData.superclass.getOptions.apply(this, arguments), {
					linkFilter: b.linkFilter,
					linkFields: b.linkFields,
					linkForm: b.linkForm,
					linkKey: b.linkKey,
					linkType: b.linkType,
					refAppId: b.refAppId
				})
			},
			getNullValue: function () {
				return {}
			},
			_loadData: function (b) {
				var c = this.options,
				d = this;
				this.loading = !0,
				FX.Utils.dataAjax({
					url: "/data/filter",
					data: {
						multi: !0,
						formId: c.linkForm,
						fields: this.fields,
						filter: this.filter,
						limit: c.itemsPerPage,
						skip: this.skip,
						refAppId: c.refAppId
					}
				}, function (e) {
					var f = [];
					FX.Utils.isObjectEmpty(e.result) || (f = e.result),
					FX.Utils.isObjectEmpty(e.nameMap) || (d.nameMap = a.extend(d.nameMap, e.nameMap)),
					f.length < c.itemsPerPage && (d.hasMore = !1),
					b ? d._createDataList(f) : FX.Utils.forEach(f, function (a, b) {
						d._createDataItem(b)
					})
				}, function () {}, function () {
					d.skip += c.itemsPerPage,
					d.loading = !1
				})
			},
			loadMore: function () {
				!this.loading && this.hasMore && this._loadData()
			},
			reload: function (a) {
				var b = this.options,
				c = [];
				FX.Utils.forEach(b.linkFields, function (a, b) {
					c.push({
						type: b.type,
						name: b.name
					})
				}),
				b.linkKey && c.push({
					type: b.linkType,
					name: b.linkKey
				}),
				!b.linkForm || c.length <= 0 || (this.filter = a, this.fields = c, this.nameMap = {}, this.skip = 0, this.hasMore = !0, this._loadData(!0))
			},
			doResize: function (a) {
				var b = this.options;
				if (b.subform) {
					var c = 154 * b.linkFields.length + 40;
					this.element.css({
						width: c
					})
				}
			},
			supportLayout: function () {
				var a = this.options,
				b = !0;
				return FX.Utils.forEach(a.linkFields, function (a, c) {
					if ("subform" === c.type)
						return b = !1, !1
				}),
				b
			}
		}),
	a.shortcut("linkdata", FX.LinkData)
}
(jQuery), function (a) {
	FX.Block = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Block.superclass._defaultConfig.apply(), {
					title: "",
					visible4Title: !0,
					cls4FullScreen: "block-fullscreen",
					hasHeader: !0,
					hasBorder: !0,
					height4Head: 35,
					height: 230,
					width: 200,
					forms: [],
					filterFields: null,
					linkWidgets: null,
					allowDataLoad: !0,
					onAfterHeadCreate: null,
					scalable: !1
				})
			},
			_init: function () {
				FX.Block.superclass._init.apply(this, arguments);
				var a = this.options;
				this.element.addClass("x-block-bg"),
				a.hasBorder || this.element.addClass("no-border"),
				a.hasHeader && this._onCreateHead(),
				this._onCreateBody()
			},
			_onCreateHead: function () {
				var b = this.options;
				if (b.height4Head) {
					this.$head = a('<div class="x-block-head"/>').height(b.height4Head).css({
							"line-height": b.height4Head + "px"
						}).appendTo(this.element);
					var c = a('<div class="x-block-head-title"/>').appendTo(this.$head);
					b.visible4Title && c.text(b.title)
				}
				return FX.Utils.applyFunc(this, b.onAfterHeadCreate, [this.$head], !1),
				this.$head
			},
			createHeadTools: function () {
				var b = this,
				c = this.options;
				if (this.$head.children("a").remove(), c.scalable) {
					var d = a("<a />").append('<i class="icon-enlarge">').append(a("<span />").text(""));
					b.element.hasClass(c.cls4FullScreen) && (d = a("<a />").append('<i class="icon-shrink">').append(a("<span />").text(""))),
					d.appendTo(this.$head).click(function () {
						b.doFullScreen() ? (d.children("i").removeClass().addClass("icon-shrink"), d.children("span").text("")) : (d.children("i").removeClass().addClass("icon-enlarge"), d.children("span").text(""))
					})
				}
			},
			_onCreateBody: function () {
				return this.$body = a('<div class="x-block-body"/>').appendTo(this.element),
				this._resizeBody(),
				this._initContent(this.$body),
				this.$body
			},
			_resizeBody: function () {
				var a = this.options,
				b = {};
				if (FX.Utils.isNumber(a.width)) {
					var c = a.width;
					a.hasBorder && (c -= 2),
					b.width = c
				} else
					FX.Utils.isNull(a.width) || (b.width = a.width);
				if (FX.Utils.isNumber(a.height)) {
					var d = a.height;
					a.hasBorder && (d -= 2),
					a.hasHeader && (d -= a.height4Head),
					b.height = d,
					this.$body.addClass("fixed-height")
				} else
					FX.Utils.isNull(a.height) ? (this.$body.removeClass("fixed-height"), b.height = "auto") : (this.$body.removeClass("fixed-height"), b.height = a.height);
				this.$body.css(b)
			},
			_initContent: function (a) {},
			isAllowDataLoad: function () {
				return this.options.allowDataLoad
			},
			setAllowDataLoad: function (a) {
				this.options.allowDataLoad = !!a
			},
			loadingAjax: function (a, b, c) {
				var d = this;
				if (this.isAllowDataLoad() && !this.isLoading) {
					this.isLoading = !0;
					var e = this.createLoadingMask();
					FX.Utils.dataAjax(a, function (a, c) {
						return FX.Utils.applyFunc(d, b, [a, c], !1)
					}, function (a, b) {
						return FX.Utils.applyFunc(d, c, [a, b], !1)
					}, function () {
						e.remove(),
						d.isLoading = !1
					})
				}
			},
			createLoadingMask: function () {
				return FX.Utils.createMask(this.element, {
					hasLoader: !0,
					isLight: !0
				})
			},
			_makeGroups: function (b) {
				var c = [],
				d = function (b, d) {
					b.forEach(function (b) {
						var e = a.extend({}, d),
						f = d.tag || d.name;
						e.groupName = f + "_" + b,
						e.groupBy = b,
						c.push(e)
					})
				};
				return FX.Utils.forEach(b, function (a, b) {
					switch (b.type) {
					case "datetime":
						var e = b.dateType || "year";
						d(e.split("&"), b);
						break;
					case "address":
					case "location":
						var f = b.addressType || "province";
						d(f.split("&"), b);
						break;
					default:
						c.push(b)
					}
				}),
				c
			},
			reload: function (a) {},
			rebuild: function () {
				this.$body.remove(),
				this._onCreateBody()
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Block.superclass.getOptions.apply(this, arguments), {
					title: b.title,
					linkWidgets: b.linkWidgets,
					forms: b.forms,
					filterFields: b.filterFields
				})
			},
			_getWidgetNameByTag: function (a) {
				var b = this.options,
				c = a;
				return FX.Utils.forEach([].concat(b.xFields, b.yFields), function (b, d) {
					if (d.tag && d.tag === a)
						return c = d.name, !1
				}),
				c
			},
			_getLinkFilterParams: function (a) {
				var b = this.options,
				c = this,
				d = {};
				return FX.Utils.forEach(a, function (a, e) {
					var f = c._getWidgetNameByTag(a);
					if (b.relations.hasOwnProperty(f)) {
						var g = b.relations[f];
						FX.Utils.forEach(g, function (a, b) {
							d.hasOwnProperty(a) || (d[a] = {}),
							d[a][b] = e
						})
					} else {
						var h = b.forms[0];
						d.hasOwnProperty(h) || (d[h] = {}),
						d[h][f] = e
					}
				}),
				d
			},
			getFilterData: function (a) {
				var b = this.options,
				c = {},
				d = null;
				if (b.forms && b.forms.length > 1 && b.relations) {
					d = {};
					for (var e in b.relations)
						for (var f in b.relations[e])
							d[b.relations[e][f]] = e
				}
				return this._pushCurrentFilter(b.filterFields, c, d),
				this._pushCurrentFilter(FX.Utils.applyFunc(this, b.onDataFilter, [], null), c, d),
				this._pushCurrentFilter(a, c, d),
				c
			},
			_pushCurrentFilter: function (a, b, c) {
				var d = this.options;
				a && FX.Utils.forEach(d.forms, function (d, e) {
					if (a[e])
						if (b[e] || (b[e] = []), c) {
							var f = {};
							for (var g in a[e])
								c[g] ? f[c[g]] = a[e][g] : f[g] = a[e][g];
							b[e].push(f)
						} else
							b[e].push(a[e])
				})
			},
			hasContentInited: function () {
				return this.contentInited
			},
			doResize: function (a) {
				FX.Block.superclass.doResize.apply(this, arguments),
				this._resizeBody()
			},
			doFullScreen: function () {
				var a = this.options;
				return this.element.hasClass(a.cls4FullScreen) ? (this.element.removeClass(a.cls4FullScreen), this.doResize({
						width: FX.Utils.isEmpty(this.originStyle.w) ? "auto" : this.originStyle.w,
						height: FX.Utils.isEmpty(this.originStyle.h) ? "auto" : this.originStyle.h
					}), !1) : (this.originStyle = {
						w: this.element.outerWidth(),
						h: a.height
					}, this.element.addClass(a.cls4FullScreen), this.doResize({
						width: document.body.clientWidth,
						height: document.body.clientHeight
					}), !0)
			}
		})
}
(jQuery), function (a) {
	FX.Table = FX.extend(FX.Block, {
			_defaultConfig: function () {
				return a.extend(FX.Table.superclass._defaultConfig.apply(), {
					baseCls: "fui_table",
					tableHead: null,
					tableRowHead: null,
					tableData: [],
					hasMenu: !1,
					isHeadSticky: !1,
					isRowHeadSticky: !1,
					onScroll: null,
					onAfterTableCreate: null,
					onCheckValid: null,
					exportable: !0,
					scalable: !0,
					tableClass: "x-table"
				})
			},
			_initContent: function (b) {
				FX.Table.superclass._initContent.apply(this, arguments);
				var c = this.options;
				this.$wrapper = a('<div class="fui_table-wrapper"/>').appendTo(b),
				c.hasMenu && (this.$wrapper.addClass("has-menu"), this.$menu = a('<div class="fui-table-menu"/>').appendTo(b)),
				this._removeTable()
			},
			createHeadTools: function () {
				FX.Table.superclass.createHeadTools.apply(this, arguments);
				var b = this,
				c = this.options;
				c.exportable && a("<a/>").append('<i class="icon-export">').append(a("<span/>").text("Excel")).appendTo(this.$head).click(function () {
					b.doExcelExport()
				})
			},
			createTable: function () {
				var b = this,
				c = this.options;
				if (this.$tableScroller = a('<div class="table-scroller"/>').scroll(function () {
							b._scrollStickyHead()
						}).appendTo(this.$wrapper), this.$table = a('<table cellpadding="0" cellspacing="0" class="' + c.tableClass + ' x-table-bordered x-table-striped t-main"/>').appendTo(this.$tableScroller), c.tableHead && c.tableHead.length > 0) {
					var d = a('<thead class="t-head"/>').appendTo(this.$table);
					FX.Utils.forEach(c.tableHead, function (c, e) {
						var f = a('<tr class="t-row th-row"/>').appendTo(d);
						FX.Utils.forEach(e, function (a, c) {
							b._createCell(c, {
								tag: "th",
								cls: "th-cell"
							}).appendTo(f)
						})
					})
				}
				this.$tableBody = a('<tbody class="t-body"/>').appendTo(this.$table),
				this._appendTableData(),
				this._setEvent(),
				this._createStickyHead(),
				FX.Utils.applyFunc(this, c.onAfterTableCreate, [], !1)
			},
			_appendTableData: function () {
				var b = this,
				c = this.options;
				FX.Utils.forEach(c.tableData, function (d, e) {
					var f = d % 2 === 0 ? "odd" : "even",
					g = a('<tr class="t-row tb-row"/>').addClass(f).appendTo(b.$tableBody);
					b._bindRowData(b.$tableBody, g, d),
					c.tableRowHead && c.tableRowHead.length > 0 && c.tableRowHead.forEach(function (a) {
						var c = a[d];
						c && b._createCell(c, {
							tag: "th",
							cls: "rh-cell"
						}).appendTo(g)
					}),
					FX.Utils.forEach(e, function (a, c) {
						b._formatCell(c),
						c.row = d,
						c.col = a,
						b._createCell(c, {
							tag: "td",
							cls: "td-cell"
						}).appendTo(g)
					})
				})
			},
			_bindRowData: function (a, b, c) {},
			_formatCell: function (a) {},
			_createCell: function (b, c) {
				var d = c || {
					tag: "td"
				};
				d.cls && b.cls && (b.cls = d.cls + " " + b.cls);
				var e = a.extend(d, b.text || b.html || !FX.Utils.isString(b) ? b : {
						text: b
					}),
				f = a("<" + e.tag + ' class="t-cell"/>');
				switch (f.attr({
						row: e.row,
						col: e.col
					}), e.hasOwnProperty("html") ? f.html(e.html) : f.text(e.text), e.align) {
				case "center":
					f.addClass("h-center");
					break;
				case "right":
					f.addClass("h-right")
				}
				if (e.data)
					for (var g in e.data)
						e.data.hasOwnProperty(g) && f.data(g, e.data[g]);
				return e.cls && f.addClass(e.cls),
				e.colspan && f.attr("colspan", e.colspan),
				e.rowspan && f.attr("rowspan", e.rowspan),
				e.width && f.width(e.width),
				e.height && f.width(e.height),
				f
			},
			_createStickyHead: function () {
				var b = this,
				c = this.options;
				c.isHeadSticky === !0 && (this.$stickyHead = a('<table cellpadding="0" cellspacing="0" class="' + c.tableClass + ' x-table-bordered x-table-striped"/>').append(this.$table.children(".t-head").clone(!0)).outerWidth(this.$table.outerWidth()), this.$stickyHead.find(".t-head .th-cell").each(function (c, d) {
						var e = b.$table.find(".t-head .th-cell").eq(c);
						a(d).outerWidth(e.outerWidth())
					}), a('<div class="table-sticky-head"/>').css({
						width: this.$tableScroller[0].clientWidth
					}).append(this.$stickyHead).appendTo(this.$wrapper)),
				c.isRowHeadSticky === !0 && (this.$stickyRowHead = a('<table cellpadding="0" cellspacing="0" class="' + c.tableClass + ' x-table-bordered x-table-striped"/>').append(this.$table.children(".t-head, .t-body").clone(!0)), this.$stickyRowHead.find(".t-head .th-cell").each(function (c, d) {
						var e = b.$table.find(".t-head .th-cell").eq(c);
						a(d).outerHeight(e.outerHeight()).outerWidth(e.outerWidth())
					}), this.$stickyRowHead.find(".t-row .rh-cell").each(function (c, d) {
						var e = b.$table.find(".t-row .rh-cell").eq(c);
						a(d).outerHeight(e.outerHeight())
					}), this.$stickyRowHead.children(".t-head").children("tr.t-row").each(function (b, c) {
						a(c).children(".th-cell").not(".group-head").remove()
					}), this.$stickyRowHead.find(".t-body .td-cell").remove(), a('<div class="table-sticky-row-head"/>').css({
						height: this.$tableScroller[0].clientHeight
					}).append(this.$stickyRowHead).appendTo(this.$wrapper)),
				c.isHeadSticky === !0 && c.isRowHeadSticky === !0 && (this.$stickyIntersect = a('<table cellpadding="0" cellspacing="0" class="' + c.tableClass + ' x-table-bordered x-table-striped"/>').append(this.$stickyRowHead.children(".t-head").clone(!0)), a('<div class="table-sticky-intersect"/>').append(this.$stickyIntersect).appendTo(this.$wrapper))
			},
			rebuildStickyHead: function () {
				this.element.find(".table-sticky-head, .table-sticky-row-head, .table-sticky-intersect").remove(),
				this._createStickyHead()
			},
			_scrollStickyHead: function () {
				var a = this.options,
				b = this.$tableScroller.scrollTop(),
				c = this.$tableScroller.scrollLeft();
				FX.Utils.applyFunc(this, a.onScroll, [c, b], !1) === !1 && (this.$stickyHead && this.$stickyHead.css({
						"margin-left": -c
					}), this.$stickyRowHead && this.$stickyRowHead.css({
						"margin-top": -b
					}))
			},
			_setEvent: function () {},
			_removeTable: function () {
				this.$wrapper.children().remove(),
				this.$menu && this.$menu.children().remove()
			},
			reload: function (a) {
				FX.Table.superclass.reload.apply(this, arguments),
				this._removeTable()
			},
			refresh: function () {
				this.options.tableRowHead = [],
				this._removeTable(),
				this.createTable()
			},
			doResize: function (a) {
				this.options;
				FX.Table.superclass.doResize.apply(this, arguments),
				this.$table && (this.$stickyHead && this.$stickyHead.parent().remove(), this.$stickyRowHead && this.$stickyRowHead.parent().remove(), this.$stickyIntersect && this.$stickyIntersect.parent().remove(), this._createStickyHead(), this._scrollStickyHead())
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Table.superclass.getOptions.apply(this, arguments), {
					exportable: b.exportable
				})
			}
		})
}
(jQuery), function (a) {
	FX.DataTableTemplate = FX.extend(FX.Table, {
			_defaultConfig: function () {
				return a.extend(FX.DataTableTemplate.superclass._defaultConfig.apply(), {
					itemEditable: !1,
					itemRemovable: !1,
					hasCheck: !1,
					isHeadSticky: !0,
					isRowHeadSticky: !0,
					tableRowHead: []
				})
			},
			createTable: function () {
				this._initHeadCount(),
				this._createTableHead(),
				this._extendTableHead(),
				this._createTableData(),
				FX.DataTableTemplate.superclass.createTable.call(this)
			},
			appendData: function () {
				var a = this.options;
				a.tableRowHead = [],
				this._extendTableHead(),
				this._createTableData(),
				this._appendTableData(),
				(a.isHeadSticky || a.isRowHeadSticky) && this.rebuildStickyHead()
			},
			_initHeadCount: function () {
				var a = this;
				this.headRowCount = 1,
				FX.Utils.forEach(a.header, function (b, c) {
					switch (c.type) {
					case "combocheck":
					case "checkboxgroup":
						a.headRowCount = 2;
						break;
					case "subform":
						if (a.headRowCount = 2, FX.Utils.forEach(c.items, function (b, c) {
								if ("combocheck" === c.type)
									return a.headRowCount = 3, !1
							}), 3 === a.headRowCount)
							return !1
					}
				})
			},
			getSortedFieldIdx: function (a) {
				var b = -1;
				return FX.Utils.forEach(this.sort, function (c, d) {
					if (d)
						return d[a] ? (b = c, !1) : void 0
				}),
				b
			},
			_getFieldTargetName: function (a) {
				return a ? a.tag || a.name : ""
			},
			_createTableHead: function () {
				for (var b = this, c = this.options, d = [], e = 0; e < this.headRowCount; e++)
					d.push([]);
				this.cols = [],
				this.fieldTypeMap = {
					_removeCheck: "_removeCheck"
				},
				FX.Utils.forEach(b.header, function (e, f) {
					if (f && !f.detailOnly) {
						var g,
						h = b._getFieldTargetName(f),
						i = {
							text: f.text,
							cls: f.type + "-col",
							colspan: 1
						},
						j = {
							field: h
						};
						f.cellFmt && (g = f.cellFmt.data),
						j.format = g || f.format,
						f.regex && (j.regex = f.regex);
						var k = b.getSortedFieldIdx(h);
						if (~k) {
							var l = b.sort[k][h];
							switch (l) {
							case 1:
								i.cls += " sort sort-asc";
								break;
							case -1:
								i.cls += " sort sort-desc"
							}
						}
						switch (b.fieldTypeMap[h] = f.type, f.type) {
						case "image":
						case "upload":
						case "address":
						case "location":
						case "user":
						case "usergroup":
						case "dept":
						case "deptgroup":
						case "id":
						case "did":
							i.rowspan = b.headRowCount,
							i.data = {
								field: h
							},
							d[0].push(i),
							b.cols.push(j);
							break;
						case "subform":
							if (!f.items)
								return;
							i.colspan = f.items.length,
							i.cls += " combined-col",
							FX.Utils.forEach(f.items, function (e, f) {
								var g = {
									field: h,
									subField: b._getFieldTargetName(f)
								},
								j = [g.field, g.subField].join(".");
								b.fieldTypeMap[j] = f.type;
								var k = {
									text: f.text,
									rowspan: b.headRowCount - 1
								};
								if (c.resizable && (k.data = {
											resizeCol: j
										}), "combocheck" !== f.type || FX.Utils.isObjectEmpty(f.items)) {
									k.rowspan = b.headRowCount - 1,
									c.resizable && (k.width = b._getColumnSize(f));
									var l;
									f.cellFmt && (l = f.cellFmt.data),
									g.format = l || f.format,
									b.cols.push(g)
								} else
									k.rowspan = b.headRowCount - 2, k.colspan = f.items.length, k.cls = "combined-col", i.colspan += f.items.length - 1, FX.Utils.forEach(f.items, function (e, h) {
										var i = a.extend({}, g),
										k = {
											text: h.value,
											rowspan: b.headRowCount - 2
										};
										c.resizable && a.extend(k, {
											width: b._getColumnSize(f, e),
											data: {
												resizeCol: [j, e].join("#")
											}
										}),
										d[2].push(k),
										i.item = h.value,
										b.cols.push(i)
									});
								d[1].push(k)
							}),
							f.items.length > 0 && d[0].push(i);
							break;
						case "combocheck":
						case "checkboxgroup":
							FX.Utils.isObjectEmpty(f.items) ? (i.rowspan = b.headRowCount, i.data = {
									field: h
								}, b.cols.push(j), d[0].push(i)) : (FX.Utils.forEach(f.items, function (e, g) {
									var i = {
										field: h
									},
									j = {
										text: g.value,
										rowspan: b.headRowCount - 1
									};
									c.resizable && a.extend(j, {
										width: b._getColumnSize(f, e),
										data: {
											resizeCol: [f.name, e].join("#")
										}
									}),
									d[1].push(j),
									i.item = g.value,
									b.cols.push(i)
								}), i.cls += " combined-col", i.colspan = f.items.length, d[0].push(i));
							break;
						case "datetime":
							i.rowspan = b.headRowCount,
							i.data = {
								field: h
							},
							i.cls += " clickable sortable",
							b.cols.push(j),
							d[0].push(i);
							break;
						case "chargers":
							b.cols.push({
								show: "node",
								field: j.field
							});
							var m = {
								colspan: i.colspan,
								rowspan: b.headRowCount,
								data: {
									resizeCol: h
								},
								text: ""
							};
							b.cols.push({
								show: "user",
								field: j.field
							});
							var n = {
								colspan: i.colspan,
								rowspan: b.headRowCount,
								data: {
									resizeCol: h
								},
								text: ""
							};
							c.resizable && (a.extend(m, {
									width: b._getColumnSize(f)
								}), a.extend(n, {
									width: b._getColumnSize(f)
								})),
							d[0].push(m),
							d[0].push(n);
							break;
						default:
							if ("flowVer" === f.name)
								break;
							i.rowspan = b.headRowCount,
							i.data = {
								field: h
							},
							i.cls += " clickable sortable",
							b.cols.push(j),
							d[0].push(i)
						}
						c.resizable && (i.data ? i.data.resizeCol || a.extend(i.data, {
								resizeCol: h
							}) : i.data = {
								resizeCol: h
							}, /combined/.test(i.cls) || (i.width = b._getColumnSize(f)))
					}
				}),
				c.resizable && d[0].push({
					rowspan: b.headRowCount,
					cls: "blank-cell"
				}),
				c.tableHead = d
			},
			_appendTableData: function () {
				var a = this.options;
				a.resizable && FX.Utils.forEach(a.tableData, function (a, b) {
					b.push({
						cls: "blank-cell"
					})
				}),
				FX.CombinedTable.superclass._appendTableData.apply(this, arguments)
			},
			_extendTableHead: function () {
				var b = this.options;
				if (b.hasCheck) {
					var c = a('<div class="x-check table-op-btn"><i class="icon-blank"/></div>').click(function () {
							c.toggleClass("select")
						});
					b.tableHead[0].unshift({
						rowspan: this.headRowCount,
						cls: "table-op-btn-cell group-head",
						html: c
					}),
					this.cols.unshift({
						field: "_removeCheck"
					}),
					this.removeCheckList = [],
					b.tableRowHead.push(this.removeCheckList)
				}
			},
			_createTableData: function () {
				var a = this,
				b = this.options;
				b.tableData = [],
				this.dataMap = [],
				FX.Utils.forEach(a.data, function (c, d) {
					for (var e = [], f = a._calculateDataRowCount(d), g = 0; g < f; g++)
						e.push([]);
					FX.Utils.forEach(a.cols, function (b, c) {
						var g = a._createCellData(d, c, !1),
						h = a.fieldTypeMap[c.field];
						switch (h) {
						case "subform":
							var i = d[c.field];
							FX.Utils.isObjectEmpty(i) && (i = [{}
								]);
							for (var j = 0; j < f; j++) {
								var k = i[j],
								l = a._createCellData(k, c, !0);
								e[j].push(l)
							}
							break;
						case "_removeCheck":
							g.rowspan = f,
							a.removeCheckList.push(g),
							a.removeCheckList.length += f - 1;
							break;
						default:
							g.rowspan = f,
							e[0].push(g)
						}
					}),
					d && FX.Utils.forEach(e, function (b, d) {
						a.dataMap.push(c)
					}),
					b.tableData = b.tableData.concat(e)
				})
			},
			_calculateDataRowCount: function (a) {
				var b = this,
				c = [1];
				for (FX.Utils.forEach(a, function (a, d) {
						d && "subform" === b.fieldTypeMap[a] && c.push(d.length || 1)
					}); c.length >= 2; )
					c.push(Math.max(c.pop(), c.pop()));
				return c[0]
			},
			_createCellData: function (b, c, d) {
				var e,
				f;
				if (FX.Utils.isNull(b))
					return {
						text: ""
					};
				switch (d ? (e = b[c.subField], f = this.fieldTypeMap[c.field + "." + c.subField]) : (e = b[c.field],
						f = this.fieldTypeMap[c.field]), f) {
				case "checkboxgroup":
				case "combocheck":
				case "array":
					if (FX.Utils.isObjectEmpty(c.item))
						return {
							text: FX.Utils.isNull(e) ? "" : e.join(", ")
						};
					var g = !1;
					return FX.Utils.forEach(e, function (a, b) {
						if (b === c.item)
							return g = !0, !1
					}), {
						html: g ? '<i class="icon-tick x-c-key"></i>' : ""
					};
				case "text":
					if (c.regex && new RegExp(c.regex).test(e)) {
						var h = FX.CONST.TEXT_TYPE_REGEXP;
						if (c.regex === h.email)
							return {
								html: '<a href="mailto:' + e + '">' + e + "</a>"
							}
					}
					return {
						text: FX.Utils.isNull(e) ? "" : e
					};
				case "radiogroup":
				case "combo":
				case "string":
				case "user":
				case "usergroup":
				case "id":
				case "dept":
				case "deptgroup":
				case "did":
					return {
						text: FX.Utils.isNull(e) ? "" : e
					};
				case "number":
				case "formula":
					var i = FX.Utils.fixDecimalPrecision(e);
					return {
						text: FX.Utils.num2Str(i, c.format)
					};
				case "address":
				case "location":
					var j = [];
					return e && (e.province && (j.push(e.province), e.city && e.province !== e.city && j.push(e.city), e.district && j.push(e.district)), e.detail && j.push(e.detail)), {
						text: FX.Utils.address2Str(e, j.join(""), c.format)
					};
				case "textarea":
					return {
						html: e ? a("<pre/>").text(e) : ""
					};
				case "datetime":
					if (e)
						return {
							text: FX.Utils.date2Str(new Date(e), c.format)
						};
					break;
				case "_removeCheck":
					var k = a('<div class="x-check table-op-btn"/>').append(a('<i class="icon-blank"/>')).data({
							op: "remove_check",
							dataId: b._id
						});
					return {
						cls: "table-op-btn-cell",
						html: k
					};
				case "image":
				case "upload":
					var l = a('<a class="table-op-btn table-file-btn"/>').data("file", e);
					return FX.Utils.isObjectEmpty(e) ? l.text("") : l.text("").data("op", "file"), {
						html: l
					};
				case "linkdata":
					return {
						text: e && e.key
					};
				case "flowState":
					switch (e) {
					case FX.CONST.WORKFLOW.FLOWSTATE.INPROCESS:
						return {
							text: ""
						};
					case FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE:
						return {
							text: ""
						}
					}
					break;
				case "chargers":
					var m = {},
					n = {};
					FX.Utils.forEach(e, function (a, b) {
						b.flowName && (m[b.flowName] || (m[b.flowName] = !0), n[b.userNickname] || (n[b.userNickname] = !0))
					});
					var o = [];
					return "node" === c.show ? FX.Utils.forEach(m, function (a) {
						o.push(a)
					}) : FX.Utils.forEach(n, function (a) {
						o.push(a)
					}), {
						text: o.join(",")
					}
				}
				return {
					text: ""
				}
			},
			rebuildStickyHead: function () {
				var a,
				b = this.options,
				c = this.$stickyHead.attr("class");
				this.$stickyHead.parent().remove(),
				b.isRowHeadSticky && (a = this.$stickyRowHead.attr("class"), this.$stickyRowHead.parent().remove(), this.$stickyIntersect.parent().remove()),
				this._createStickyHead(),
				this.$stickyHead.addClass(c),
				b.isRowHeadSticky && this.$stickyRowHead.addClass(a)
			}
		})
}
(jQuery), function (a) {
	FX.DataTable = FX.extend(FX.DataTableTemplate, {
			_defaultConfig: function () {
				return a.extend(FX.DataTable.superclass._defaultConfig.apply(), {
					baseCls: "fui_datatable",
					hasMenu: !0,
					ignoreOptAuth: !1,
					ignoreValidate: !1,
					itemEditable: !1,
					itemRemovable: !1,
					itemPrintable: !0,
					hasCheck: !1,
					isHeadSticky: !0,
					isRowHeadSticky: !0,
					isFieldSortable: !0,
					isExportSelectable: !1,
					resizable: !1,
					hasFlow: !1,
					itemsPerPage: 20,
					optAuth: null,
					filterParam: {},
					fields: [],
					data: [],
					authGroupId: null,
					asyncURL: "/data/list",
					asyncExportURL: "/data/list/excel_export",
					onAfterShowFieldsSelected: null,
					onAfterShowFieldsMetaChange: null,
					onRecoverData: null
				})
			},
			_initContent: function (a) {
				FX.DataTable.superclass._initContent.apply(this, arguments),
				this.sort = [],
				this.page = 0,
				this.count = 0,
				this._initDataTable()
			},
			_initDataTable: function (a) {
				var b = this,
				c = this.options;
				c.itemEditable && b._isMultiForm() && (c.itemEditable = !1),
				c.itemRemovable && b._isMultiForm() && (c.itemRemovable = !1),
				FX.Utils.isObjectEmpty(a) || (c.filterParam = a),
				c.tableRowHead = [],
				this._loadData(function () {
					b.createTable()
				}),
				this._setTitle()
			},
			_setTitle: function (a) {
				a && (this.title = a),
				FX.Utils.isEmpty(this.title) ? this.title = document.title : FX.Utils.setPageTitle(this.title)
			},
			_isMultiForm: function () {
				var a = this.options;
				return a.forms.length > 1 || !FX.Utils.isObjectEmpty(a.relations)
			},
			_loadData: function (a) {
				var b = this,
				c = this.options;
				this._isFieldsValid() && this.loadingAjax({
					url: c.asyncURL,
					data: {
						fields: c.fields,
						forms: c.forms,
						relations: c.relations,
						sort: this.sort,
						skip: this.page * c.itemsPerPage,
						limit: c.itemsPerPage,
						filter: this.getFilterData(c.filterParam),
						authGroupId: c.authGroupId,
						hasCount: this.hasCount !== !1
					}
				}, function (c) {
					b.hasCount !== !1 && (b.count = c.count),
					b.header = c.header,
					b.data = c.data,
					a && a()
				}, function (a) {
					var b = a.responseJSON || {};
					FX.Utils.isEmpty(b.msg) || FX.Msg.toast({
						type: "warning",
						msg: b.msg
					})
				})
			},
			_isFieldsValid: function () {
				var a = this.options,
				b = !0;
				return b &= a.forms && a.forms.length > 0,
				b &= a.fields && a.fields.length > 0,
				FX.Utils.applyFunc(this, a.onCheckValid, [], !1),
				b
			},
			createTable: function () {
				FX.DataTable.superclass.createTable.call(this);
				var a = this.options;
				a.hasMenu && this._createPagination(),
				a.resizable && this._initColumnResizer()
			},
			_initColumnResizer: function () {
				var b = this,
				c = this.options;
				c.resizable && (this.$columnResizerLine || (this.$columnResizerLine = a('<div class="column-resizer-line"/>').appendTo(this.element)), this.$columnResizer || (this.$columnResizer = a('<div class="column-resizer"/>').appendTo(this.element)), this.element.unbind("mouseover.resize"), this.element.bind("mouseover.resize", function (c) {
						if (!b.pressed) {
							var d = a(c.target).closest(".th-cell");
							if (d.length && d.data("resizeCol") && !d.hasClass("combined-col")) {
								b.$currentTH = d;
								var e = d.offset();
								b.$columnResizer.css({
									left: e.left + d.outerWidth() - b.$columnResizer.outerWidth(),
									top: e.top,
									height: d.height()
								})
							}
						}
					}), this.element.unbind("mousedown.resize"), this.element.on("mousedown.resize", function (c) {
						var d = a(c.target);
						if (d.hasClass("column-resizer")) {
							b.element.addClass("unselectable"),
							b.pressed = !0;
							var e = b.$currentTH,
							f = d.offset(),
							g = b.element.offset();
							b.$columnResizerLine.css({
								left: f.left + 10,
								top: g.top + 40,
								height: b.element.height() - 80
							}).addClass("active"),
							b.startLeft = f.left,
							b.currentField = e.data("resizeCol"),
							b.startX = c.pageX,
							b.startWidth = parseInt(e.outerWidth())
						}
					}), this.element.unbind("mousemove.resize"), this.element.on("mousemove.resize", function (a) {
						if (b.pressed) {
							var c = Math.max(a.pageX, b.startLeft - b.startWidth + 45);
							return b.$columnResizerLine.css({
								left: c
							}),
							b.$columnResizer.css({
								left: c - 5
							}),
							!1
						}
					}), this.element.unbind("mouseup.resize"), this.element.on("mouseup.resize", function (d) {
						if (b.element.removeClass("unselectable"), b.$columnResizerLine.removeClass("active"), b.pressed && (b.pressed = !1, b.$columnResizerLine.removeClass("active"), b.$currentTH && b.currentField)) {
							var e = b.$currentTH.offset();
							b.columnSizeMap[b.currentField] = Math.max(b.startWidth + d.pageX - b.startX, 35),
							b.$columnResizer.css({
								left: e.left + b.$currentTH.outerWidth() - 10
							});
							var f = b.$currentTH.parent("tr")[0].rowIndex,
							g = b.$currentTH[0].cellIndex;
							a(b.$table[0].rows[f].cells[g]).css({
								"min-width": b.columnSizeMap[b.currentField],
								width: b.columnSizeMap[b.currentField]
							}).children(".content").children(".data").css("width", b.columnSizeMap[b.currentField]),
							b.currentField = null,
							b.rebuildStickyHead(),
							b._initColumnResizer(),
							b.$table.scroll(),
							FX.Utils.applyFunc(b, c.onAfterShowFieldsMetaChange, [b.columnSizeMap], !1)
						}
					}))
			},
			_getColumnSize: function (a, b) {
				var c = this.options;
				if (!this.columnSizeMap) {
					var d = {};
					FX.Utils.forEach(c.showFieldsMeta, function (a, b) {
						d[a] = b.width
					}),
					this.columnSizeMap = d
				}
				var e = a.name;
				a.subform && (e = [a.subform, e].join(".")),
				FX.Utils.isNumber(b) && (e = [e, b].join("#"));
				var f = this.columnSizeMap[e];
				if (f)
					return f;
				switch (a.type) {
				case "textarea":
				case "address":
				case "location":
					f = 300;
					break;
				case "image":
				case "upload":
					f = 100;
					break;
				case "usergroup":
				case "deptgroup":
					f = 250;
					break;
				case "combocheck":
				case "checkboxgroup":
					f = FX.Utils.isNumber(b) ? 100 : 300;
					break;
				default:
					f = 150
				}
				return f
			},
			_createCell: function (b, c) {
				var d = this.options,
				e = c || {
					tag: "td"
				};
				e.cls && b.cls && (b.cls = e.cls + " " + b.cls);
				var f = a.extend(e, b.text || b.html || !FX.Utils.isString(b) ? b : {
						text: b
					}),
				g = a("<" + f.tag + ' class="t-cell"/>');
				if (g.attr({
						row: f.row,
						col: f.col
					}), d.resizable) {
					g.css({
						"min-width": f.width || b.width,
						width: f.width || b.width
					});
					var h = a('<div class="data"/>').appendTo(a('<div class="content"/>').appendTo(g)).css("width", f.width || b.width);
					f.hasOwnProperty("html") ? h.html(f.html).attr("title", a(f.html).text()) : h.text(f.text).attr("title", f.text)
				} else
					f.hasOwnProperty("html") ? g.html(f.html) : g.text(f.text);
				switch (f.align) {
				case "center":
					g.addClass("h-center");
					break;
				case "right":
					g.addClass("h-right")
				}
				if (f.data)
					for (var i in f.data)
						f.data.hasOwnProperty(i) && g.data(i, f.data[i]);
				return f.cls && g.addClass(f.cls),
				f.colspan && g.attr("colspan", f.colspan),
				f.rowspan && g.attr("rowspan", f.rowspan),
				f.width && g.width(f.width),
				f.height && g.width(f.height),
				g
			},
			_createPagination: function () {
				var b = this,
				c = this.options,
				d = a('<div class="x-table-page-item-count"/>').appendTo(this.$menu);
				new FX.ComboBox({
					renderEl: a('<div class="count-sel"/>').appendTo(d),
					width: 100,
					height: 30,
					searchable: !1,
					allowBlank: !1,
					items: [{
							value: 20,
							text: "20 /"
						}, {
							value: 50,
							text: "50 /"
						}, {
							value: 100,
							text: "100 /"
						}
					],
					value: c.itemsPerPage,
					onAfterItemSelect: function (a, d) {
						c.itemsPerPage = d.value,
						b.page = 0,
						b.reload(c.filterParam)
					}
				}),
				a("<span />").text(" " + b.count + " ").appendTo(d),
				new FX.Pagination({
					renderEl: a("<div />").appendTo(this.$menu),
					count: b.count,
					limit: c.itemsPerPage,
					curPage: b.page + 1,
					onChangePage: function (a, c) {
						b.page = a - 1,
						b.turnPage()
					}
				})
			},
			_doShowReport: function () {
				this.element.closest(".fui-report").show(),
				this._setTitle()
			},
			_doHideReport: function () {
				this.element.closest(".fui-report").hide()
			},
			_doShowData: function (b) {
				var c = this.data[b];
				if (c) {
					var d = this.options,
					e = this,
					f = c._id,
					g = this.header,
					h = d.title,
					i = a('<div class="x-window-mask modal light"/>').css({
							"z-index": FX.STATIC.zIndex++
						}).appendTo("body");
					a(document).bind("keydown.left keydown.right", function (b) {
						return a(".x-window-mask", "body").length ? (b.preventDefault(), !1) : void a(document).unbind("keydown.left keydown.right")
					});
					new FX.FormData({
						renderEl: a("<div class='x-shadow-content'/>").appendTo(i),
						entryId: d.forms[0],
						forms: d.forms,
						fields: d.fields,
						header: g,
						layout: d.formLayout,
						data: c,
						title: h,
						height: "100%",
						hasFlowBtn: d.hasFlow && !d.hasRecoverBtn,
						hasPrintBtn: d.itemPrintable,
						hasEditBtn: d.itemEditable,
						hasDeleteBtn: d.itemRemovable,
						hasRecoverBtn: d.hasRecoverBtn,
						hasSwitchBtn: !0,
						dataIndex: b + 1,
						dataCount: this.data.length,
						authGroupId: d.authGroupId,
						hasCustomPrint: d.ignoreOptAuth || d.authGroupId,
						onRecoverData: function (a, b) {
							FX.Utils.applyFunc(e, d.onRecoverData, [a, b, i], !1)
						},
						onEditData: function () {
							i.remove(),
							e._doEditData(f, b)
						},
						onSwitchData: function (a, b) {
							var c = e.data[a - 1];
							c && i.parent().length && (i.remove(), b ? e._doEditData(c._id, a - 1) : e._doShowData(a - 1))
						},
						onDeleteData: function () {
							FX.Msg.alert({
								title: " ",
								msg: "  ",
								type: "warning",
								onOk: function () {
									e.doDeleteData(f),
									i.remove()
								}
							})
						},
						onClose: function (a) {
							e._doShowReport(),
							i.remove(),
							a && e.reload(d.filterParam, !0)
						}
					})
				}
			},
			_doEditData: function (b, c) {
				if (b) {
					var d = this.options,
					e = this,
					f = a('<div class="x-window-mask modal light"/>').css({
							"z-index": FX.STATIC.zIndex++
						}).appendTo("body");
					FX.Utils.dataAjax({
						url: "/data/read",
						data: {
							formId: d.forms[0],
							dataId: b
						}
					}, function (g) {
						new FX.Form(a.extend(g.form, {
								renderEl: a("<div class='x-shadow-content'/>").appendTo(f),
								entryId: d.forms[0],
								dataId: b,
								customCls: "more-btn",
								submitUrl: "/data/update",
								submitData: {
									dataId: b
								},
								title: g.formName,
								height: "100%",
								submitText: "",
								cancelText: "",
								ignoreOptAuth: d.ignoreOptAuth,
								ignoreValidate: d.ignoreValidate,
								widgetOptAuth: d.optAuth || g.optAuth,
								authGroupId: d.authGroupId,
								editValue: g.data,
								mode: "edit",
								buttonPosition: "middle",
								onSuccess: function (a) {
									f.remove(),
									e._doShowReport(),
									e._reloadWithoutCount(d.filterParam, !0),
									(d.ignoreOptAuth || d.authGroupId) && (e._updateTableData(c, a.data), e._doShowData(c))
								},
								onAfterCancel: function () {
									e._doShowReport(),
									f.remove(),
									e._doShowData(c)
								}
							}))
					}, function () {
						f.remove()
					})
				}
			},
			_updateTableData: function (b, c) {
				var d = this.options;
				if (this.data[b]) {
					var e = {};
					FX.Utils.forEach(d.fields, function (a, b) {
						switch (b.type) {
						case "user":
						case "dept":
							FX.Utils.isObjectEmpty(c[b.name]) ? e[b.name] = c[b.name] : e[b.name] = c[b.name].name;
							break;
						case "usergroup":
						case "deptgroup":
							var d = [];
							FX.Utils.forEach(c[b.name], function (a, b) {
								d.push(b.name)
							}),
							e[b.name] = d;
							break;
						default:
							"creator" !== b.name || FX.Utils.isObjectEmpty(c[b.name]) ? e[b.name] = c[b.name] : e[b.name] = c[b.name].name
						}
					}),
					a.extend(this.data[b], e)
				}
			},
			doDeleteData: function (a) {
				var b = this.options,
				c = this;
				FX.Utils.dataAjax({
					url: "/data/remove",
					data: {
						formId: b.forms[0],
						idList: [a]
					}
				}, function () {
					c.turnPage()
				})
			},
			_setEvent: function () {
				FX.DataTable.superclass._setEvent.apply(this, arguments);
				var b = this,
				c = this.options,
				d = function (d) {
					var e = d.target,
					f = d.type,
					g = a(e).closest("tr");
					if (g && g.length > 0)
						if (c.isFieldSortable && g.hasClass("th-row")) {
							var h = a(e).closest(".th-cell");
							if (h && h.length > 0 && "click" === f) {
								var i = h.data("field");
								if (i) {
									if (!h.hasClass("sortable"))
										return;
									var j = {},
									k = -1;
									h.hasClass("sort-asc") ? (h.removeClass("sort-asc").addClass("sort-desc"), j[i] = -1, k = b.getSortedFieldIdx(i), ~k ? b.sort[k] = j : b.sort.push(j)) : h.hasClass("sort-desc") ? (h.removeClass("sort sort-desc"), k = b.getSortedFieldIdx(i), ~k && b.sort.splice(k, 1)) : (h.removeClass("sort-desc").addClass("sort sort-asc"), k = b.getSortedFieldIdx(i), j[i] = 1, ~k ? b.sort[k] = j : b.sort.push(j)),
									b.page = 0,
									b._reloadWithoutCount()
								}
								var l = h.find(".x-check");
								l && l.length > 0 && (l.toggleClass("select"), l.hasClass("select") ? b.setRemoveCheckResult(!0) : b.setRemoveCheckResult(!1))
							}
						} else if (g.hasClass("tb-row")) {
							var m = a(e).closest(".table-op-btn");
							if ("click" === f)
								if (m && m.length > 0) {
									var n = m.data("op");
									if (!c.forms)
										return;
									if ("remove_check" === n)
										m.hasClass("select") && b.setRemoveCheckSelectAll(!1), m.toggleClass("select");
									else if ("file" === n) {
										var o = m.data("file");
										new FX.FilePreview({
											files: a.makeArray(o)
										})
									}
								} else {
									if (!FX.Utils.isEmpty(FX.Utils.getSelectionText()))
										return;
									b._doShowData(g.data("idx"))
								}
						}
				};
				this.$wrapper.unbind(".data-table"),
				this.$wrapper.bind({
					"click.data-table": d
				})
			},
			_bindRowData: function (a, b, c) {
				if (this.dataMap && this.dataMap.length > c) {
					var d = this.dataMap[c];
					b.data("idx", d)
				}
			},
			doExcelExport: function () {
				var a = this.options;
				if (this._isFieldsValid()) {
					if (a.isExportSelectable)
						return void new FX.ExcelExportPane({
							fields: a.showFields,
							selectedFields: a.fields,
							forms: a.forms,
							relations: a.relations,
							filter: this.getFilterData(a.filterParam),
							sort: this.sort,
							name: a.title
						}).show();
					var b = this.createLoadingMask();
					FX.Utils.dataAjax({
						url: a.asyncExportURL,
						data: {
							fields: a.fields,
							forms: a.forms,
							relations: a.relations,
							filter: this.getFilterData(a.filterParam),
							sort: this.sort,
							name: a.title
						}
					}, function (a) {
						b.remove(),
						window.location.href = a.url
					}, function () {
						b.remove(),
						FX.Msg.toast({
							msg: "",
							type: "error"
						})
					})
				}
			},
			turnPage: function () {
				var a = this.options;
				this._removeTable(),
				this._initDataTable(a.filterParam)
			},
			reload: function (a, b, c) {
				FX.DataTable.superclass.reload.apply(this, arguments),
				b || (this.page = 0),
				c ? this.hasCount = !1 : (this.hasCount = !0, this.count = 0),
				this._initDataTable(a)
			},
			_reloadWithoutCount: function (a, b) {
				this.reload(a, b, !0)
			},
			loadMore: function (a) {
				var b = this;
				this.hasMore() && !this.isLoading && (b.page++, this._loadData(function () {
						b.appendData(),
						a && a()
					}))
			},
			hasMore: function () {
				var a = this.options;
				return (this.page + 1) * a.itemsPerPage < this.count
			},
			setHasCheck: function (a) {
				this.options.hasCheck = a
			},
			setRemoveCheckSelectAll: function (a) {
				a || this.$stickyRowHead.children(".t-head").find(".x-check").removeClass("select")
			},
			setRemoveCheckResult: function (b) {
				b ? this.$stickyRowHead.find(".x-check").each(function (b, c) {
					a(c).addClass("select")
				}) : this.$stickyRowHead.find(".x-check").each(function (b, c) {
					a(c).removeClass("select")
				})
			},
			getCheckResult: function () {
				var b = [];
				return this.$stickyRowHead.find(".t-body .x-check").each(function (c, d) {
					a(d).hasClass("select") && b.push(a(d).data("dataId"))
				}),
				b
			},
			createHeadTools: function () {
				FX.DataTable.superclass.createHeadTools.apply(this, arguments);
				var b = this,
				c = this.options;
				if (c.itemRemovable && a("<a/>").append('<i class="icon-ui-delete">').append(a("<span/>").text(" ")).appendTo(this.$head).click(function () {
						b.createTableDeleteButtons()
					}), c.showFields)
					var d = a("<a />").append('<i class="icon-page-view">').append(a("<span />").text("")).appendTo(this.$head).click(function () {
							b.doShowFields(d)
						})
			},
			createTableDeleteButtons: function () {
				var b = this;
				b.setHasCheck(!0),
				this.fieldCheck = null,
				this.refresh(),
				this.$head.children("a").remove(),
				a("<a />").append('<i class="icon-signout">').append(a("<span />").text("")).appendTo(this.$head).click(function () {
					b.setHasCheck(!1),
					b.refresh(),
					b.createHeadTools()
				}),
				a("<a />").append('<i class="icon-ui-delete">').append(a("<span />").text(" ")).appendTo(this.$head).click(function () {
					var a = b.getCheckResult().length;
					b.deleteCheckResult(!1, "" + a + "   ")
				}),
				a("<a />").append('<i class="icon-clear">').append(a("<span />").text("")).appendTo(this.$head).click(function () {
					b.deleteCheckResult(!0, " ")
				})
			},
			deleteCheckResult: function (a, b, c) {
				var d = this,
				e = this.options;
				FX.Msg.alert({
					title: " ",
					msg: b,
					type: "warning",
					onOk: function () {
						var b = {
							formId: e.forms[0]
						},
						f = !0;
						if (a)
							b.clearAll = !0, b.filter = d.getFilterData(e.filterParam);
						else {
							var g = d.getCheckResult();
							g && g.length > 0 ? b.idList = g : f = !1
						}
						f && FX.Utils.dataAjax({
							url: "/data/remove",
							data: b
						}, function () {
							FX.Utils.applyFunc(d, c, [], !1) === !1 && (d.setHasCheck(!1), d.createHeadTools(), d.reload())
						})
					}
				})
			},
			doShowFields: function (a) {
				var b = this.options,
				c = this;
				if (!this.fieldCheck) {
					this.fieldItems || (this.fieldItems = [], FX.Utils.forEach(b.showFields, function (a, d) {
							var e = {
								text: d.text,
								value: d.name
							};
							b.fields && b.fields.indexOf(d) > -1 && (e.selected = !0),
							c.fieldItems.push(e)
						}));
					var d = function (a) {
						var d = [];
						FX.Utils.forEach(b.showFields, function (b, c) {
							a.indexOf(c.name) >= 0 && d.push(c)
						}),
						b.fields = d,
						c._reloadWithoutCount()
					},
					e = new FX.ComboCheckBox({
							renderEl: a,
							items: this.fieldItems,
							width: null,
							height: null,
							onStopEdit: function () {
								d(this.getValue())
							},
							onAfterTriggerHide: function () {
								FX.Utils.applyFunc(c, b.onAfterShowFieldsSelected, [this.getValue()], !1)
							},
							onElementCreate: function () {
								this.element.unbind("click.trigger"),
								this.element.bind("click.trigger", function () {
									e._onTriggerClick()
								})
							}
						});
					this.fieldCheck = e,
					this.fieldCheck._onTriggerClick()
				}
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.DataTable.superclass.getOptions.apply(this, arguments), {
					relations: b.relations,
					joinedFields: b.joinedFields,
					fields: b.fields,
					itemEditable: b.itemEditable,
					itemRemovable: b.itemRemovable
				})
			}
		}),
	a.shortcut("datatable", FX.DataTable)
}
(jQuery), function (a) {
	FX.CombinedTable = FX.extend(FX.Table, {
			_defaultConfig: function () {
				return a.extend(FX.CombinedTable.superclass._defaultConfig.apply(), {
					baseCls: "fui_combinedtable",
					hasMenu: !0,
					isHeadSticky: !0,
					isRowHeadSticky: !0,
					chunkSize: {
						x: 2e3,
						y: 50
					},
					forms: [],
					relations: {},
					joinedFields: [],
					xFields: [],
					yFields: [],
					valueFields: [],
					asyncURL: "/data/combined_group",
					asyncExportURL: "/data/combined_group/excel_export",
					onItemClick: null
				})
			},
			_initContent: function (a) {
				FX.DataTable.superclass._initContent.apply(this, arguments),
				this._initCombinedTable(a)
			},
			_initCombinedTable: function (b) {
				var c = this,
				d = this.options;
				this.tablePart = {
					x: 0,
					y: 0
				},
				this.count = {
					x: 0,
					y: 0
				},
				this.filterParam = b,
				this._isFieldsValid() ? (this.xGroups = this._makeGroups(d.xFields), this.yGroups = this._makeGroups(d.yFields), this.loadingAjax({
						url: d.asyncURL,
						data: {
							forms: d.forms,
							relations: d.relations,
							xFields: this.xGroups,
							yFields: this.yGroups,
							valFields: d.valueFields,
							linkWidgets: d.linkWidgets,
							filter: this.getFilterData(this.filterParam)
						}
					}, function (b, e) {
						if (FX.Utils.isObjectEmpty(b.table))
							c.table = null, d.tableHead = [], d.tableRowHead = [], d.tableData = [];
						else {
							c.table = b.table,
							c._chunkTable(),
							c._getTablePart();
							var f = c._getTablePart();
							a.extend(d, c._assembleTable(f))
						}
						c.createTable()
					})) : this.createTable()
			},
			_assembleTable: function (a) {
				var b = [];
				FX.Utils.forEach(a.headBase, function (c, d) {
					b[c] = [].concat(d || [], a.head[c] || [], a.headGroup[c] || [])
				});
				var c = a.rowHead || [];
				a.rowHeadGroup && (c[0] = c[0] || [], c[0].push(a.rowHeadGroup));
				for (var d = [], e = Math.max(a.data.length || a.dataGroupCol.length), f = 0; f < e; f++)
					d[f] = [].concat(a.data[f] || [], a.dataGroupCol[f] || []);
				if (!this.hasMore()) {
					var g = a.dataGroupRow || [];
					FX.Utils.isObjectEmpty(a.dataGroupAll) || (g = g.concat(a.dataGroupAll)),
					d.push(g)
				}
				return {
					tableHead: b,
					tableRowHead: c,
					tableData: d
				}
			},
			_chunkTable: function () {
				var b = this.options;
				if (b.chunkSize.x && b.chunkSize.y) {
					var c = [];
					FX.Utils.forEach(this.table.head, function (d, e) {
						var f = 0;
						FX.Utils.forEach(e, function (e, g) {
							for (var h = g.colspan || 1, i = parseInt(f / b.chunkSize.x), j = (i + 1) * b.chunkSize.x - f; h > 0; ) {
								var k = Math.min(j, h);
								c[i] = c[i] || [],
								c[i][d] = c[i][d] || [],
								c[i][d].push(a.extend({}, g, {
										colspan: k
									})),
								h -= k,
								i++,
								f += k
							}
						})
					}),
					this.tableHeadChunks = c;
					var d = [];
					FX.Utils.forEach(this.table.rowHead, function (c, e) {
						var f = null,
						g = FX.Utils.chunkArray(e, b.chunkSize.y);
						FX.Utils.forEach(g, function (b, c) {
							f && f.rowspan > 0 && (c[0] = f);
							for (var e = c.length - 1; e > -1; e--) {
								var g = c[e];
								if (g && g.rowspan > 1) {
									f = a.extend({}, g);
									var h = Math.min(c.length - e, g.rowspan);
									g.rowspan = h,
									f.rowspan -= h;
									break
								}
							}
							d[b] = d[b] || [],
							d[b].push(c)
						})
					}),
					this.tableRowHeadChunks = d;
					var e = {};
					this.count.y = this.table.data.length;
					var f = FX.Utils.chunkArray(this.table.data, b.chunkSize.y);
					FX.Utils.forEach(f, function (a, c) {
						FX.Utils.forEach(c, function (c, d) {
							var f = FX.Utils.chunkArray(d, b.chunkSize.x);
							FX.Utils.forEach(f, function (b, d) {
								var f = b + "-" + a;
								e[f] = e[f] || [],
								e[f][c] = d
							})
						})
					}),
					this.tableDataChunkMap = e,
					this.tableDataGroupColChunks = FX.Utils.chunkArray(this.table.dataGroupCol, b.chunkSize.y),
					this.tableDataGroupRowChunks = FX.Utils.chunkArray(this.table.dataGroupRow, b.chunkSize.x)
				}
			},
			_getTablePart: function () {
				var a = this.tablePart.x,
				b = this.tablePart.y;
				return {
					headBase: this.table.headBase,
					head: this.tableHeadChunks[a] || [],
					headGroup: this.table.headGroup,
					rowHead: this.tableRowHeadChunks[b] || [],
					rowHeadGroup: this.table.rowHeadGroup,
					data: this.tableDataChunkMap[a + "-" + b] || [],
					dataGroupRow: this.tableDataGroupRowChunks[a] || [],
					dataGroupCol: this.tableDataGroupColChunks[b] || [],
					dataGroupAll: this.table.dataGroupAll
				}
			},
			_isFieldsValid: function () {
				var a = this.options,
				b = !0;
				return b &= a.forms.length > 0,
				b &= 0 !== a.valueFields.length,
				b &= 0 !== a.xFields.length || 0 !== a.yFields.length,
				FX.Utils.applyFunc(this, a.onCheckValid, [], !1),
				!!b
			},
			_setEvent: function () {
				FX.CombinedTable.superclass._setEvent.apply(this, arguments);
				var b = this,
				c = this.options,
				d = function (d) {
					var e = d.target,
					f = d.type,
					g = a(e).closest(".t-cell");
					if (g && g.length > 0 && "click" === f) {
						var h = g.data("id");
						if (h) {
							var i = b._getGroupIdCondition(h),
							j = b._getLinkParams(i);
							j = b._getLinkFilterParams(j),
							FX.Utils.applyFunc(b, c.onItemClick, [j], !1)
						}
					}
				};
				this.$wrapper.unbind(".combined-table"),
				this.$wrapper.bind({
					"click.combined-table": d
				})
			},
			_getGroupIdCondition: function (a) {
				var b = {};
				for (var c in a)
					if (a.hasOwnProperty(c)) {
						var d = c,
						e = c.match(/(createTime|updateTime|\d{13})_([a-zA-Z]+)/);
						if (e && e.length > 1) {
							var f = e[e.length - 1];
							d = c.replace("_" + f, ""),
							b.hasOwnProperty(d) || (b[d] = {});
							var g = b[d];
							g[f] = a[c]
						} else
							b[d] = a[c]
					}
				return b
			},
			_getLinkParams: function (b) {
				if (b) {
					var c = {};
					for (var d in b)
						if (b.hasOwnProperty(d)) {
							var e = b[d];
							if (e.year) {
								var f = new Date,
								g = {};
								e.day ? (f.setFullYear(e.year, e.month - 1, e.day), f.setHours(0, 0, 0, 0), g.min = f.getTime(), f.setHours(23, 59, 59, 999), g.max = f.getTime()) : e.month ? (f.setFullYear(e.year, e.month - 1, 1), f.setHours(0, 0, 0, 0), g.min = f.getTime(), f.setFullYear(e.year, e.month, 1), g.max = f.getTime() - 1) : (f.setFullYear(e.year, 0, 1), f.setHours(0, 0, 0, 0), g.min = f.getTime(), f.setFullYear(e.year + 1, 0, 1), g.max = f.getTime() - 1),
								c[d] = {
									widgetType: "datelimit",
									widgetValue: g
								}
							} else
								e.province ? c[d] = {
									widgetType: "address",
									widgetValue: e
								}
							 : e.value ? c[d] = {
								widgetType: "combocheck",
								widgetValue: a.makeArray(e.value)
							}
							 : c[d] = {
								widgetType: "combocheck",
								widgetValue: a.makeArray(e)
							}
						}
					return c
				}
			},
			createTable: function () {
				FX.CombinedTable.superclass.createTable.call(this);
				var a = this.options;
				a.hasMenu && this._createPagination()
			},
			_createPagination: function () {
				var b = this,
				c = this.options;
				new FX.Pagination({
					renderEl: a("<div />").appendTo(this.$menu),
					count: this.count.y,
					limit: c.chunkSize.y,
					curPage: this.tablePart.y + 1,
					hasTurnLast: !0,
					onChangePage: function (a, c) {
						b.tablePart.y = a - 1,
						b.turnPage()
					}
				})
			},
			turnPage: function () {
				var b = this.options;
				if (this.table) {
					this._removeTable();
					var c = this._getTablePart();
					a.extend(b, this._assembleTable(c)),
					this.createTable(),
					this.$wrapper.scrollTop(0),
					this.$wrapper.scrollLeft(0)
				}
			},
			hasMore: function () {
				var a = this.options;
				return (this.tablePart.y + 1) * a.chunkSize.y < this.count.y
			},
			doExcelExport: function () {
				var a = this.options;
				if (this._isFieldsValid()) {
					var b = this.createLoadingMask();
					FX.Utils.dataAjax({
						url: a.asyncExportURL,
						data: {
							title: a.title,
							forms: a.forms,
							relations: a.relations,
							xFields: this.xGroups,
							yFields: this.yGroups,
							valFields: a.valueFields,
							linkWidgets: a.linkWidgets,
							filter: this.getFilterData(this.filterParam)
						}
					}, function (a) {
						b.remove(),
						window.location.href = a.url
					}, function () {
						b.remove(),
						FX.Msg.toast({
							msg: "",
							type: "error"
						})
					})
				}
			},
			reload: function (a) {
				FX.CombinedTable.superclass.reload.apply(this, arguments),
				this.count = {
					x: 0,
					y: 0
				},
				this._initCombinedTable(a)
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.CombinedTable.superclass.getOptions.apply(this, arguments), {
					isHeadSticky: b.isHeadSticky,
					isRowHeadSticky: b.isRowHeadSticky,
					forms: b.forms,
					relations: b.relations,
					joinedFields: b.joinedFields,
					xFields: b.xFields,
					yFields: b.yFields,
					valueFields: b.valueFields
				})
			},
			_appendTableData: function () {
				var a = this,
				b = this.options;
				this.formatMap = {},
				FX.Utils.forEach(b.valueFields, function (b, c) {
					c.cellFmt && (a.formatMap[c.name] = c.cellFmt.data)
				}),
				FX.CombinedTable.superclass._appendTableData.apply(this, arguments)
			},
			_formatCell: function (a) {
				var b = a.field;
				b && (b = b.replace("%", "."));
				var c = this.formatMap[b];
				if (c) {
					var d = FX.Utils.fixDecimalPrecision(a.value);
					a.text = FX.Utils.num2Str(d, c) || "-"
				}
			}
		}),
	a.shortcut("combinedtable", FX.CombinedTable)
}
(jQuery), function (a) {
	FX.Parameter = FX.extend(FX.Block, {
			_defaultConfig: function () {
				return a.extend(FX.Parameter.superclass._defaultConfig.apply(), {
					baseCls: "fui_parameter",
					fields: [],
					onStopEdit: null,
					height: null,
					width: null,
					showFields: null,
					authGroupId: null,
					onAfterShowFieldsSelected: null,
					onBeforeConvertField: null
				})
			},
			_initContent: function (a) {
				FX.Parameter.superclass._initContent.apply(this, arguments);
				var b = this.options,
				c = this;
				FX.Utils.forEach(b.fields, function (a, b) {
					c._createItem(b)
				})
			},
			addShowFields: function () {
				var b = this.options,
				c = this;
				if (b.showFields)
					var d = a("<a />").append('<i class="icon-query-setting">').append(a("<span />").text("")).appendTo(this.$head).click(function () {
							c.doShowFields(d)
						})
			},
			doShowFields: function (a) {
				var b = this.options,
				c = this;
				if (!this.fieldCheck) {
					this.fieldItems || (this.fieldItems = [], FX.Utils.forEach(b.showFields, function (a, d) {
							var e = {
								text: d.text,
								value: d.name
							};
							b.fields && b.fields.indexOf(d) > -1 && (e.selected = !0),
							c.fieldItems.push(e)
						}));
					var d = function (a) {
						var d = [];
						FX.Utils.forEach(b.showFields, function (b, c) {
							a.indexOf(c.name) >= 0 && d.push(c)
						}),
						b.fields = d,
						c.rebuild()
					},
					e = new FX.ComboCheckBox({
							renderEl: a,
							width: null,
							height: null,
							items: this.fieldItems,
							onAfterItemSelect: function () {
								d(this.getValue())
							},
							onAfterTriggerHide: b.onAfterShowFieldsSelected,
							onElementCreate: function () {
								this.element.unbind("click.trigger"),
								this.element.bind("click.trigger", function (a) {
									e._onTriggerClick()
								})
							}
						});
					this.fieldCheck = e,
					this.fieldCheck._onTriggerClick()
				}
			},
			_createItem: function (b) {
				var c = this.options,
				d = this,
				e = a('<div class="fui_parameter_cell"/>').appendTo(this.$body),
				f = d.getConfigFromItem(b);
				if (f) {
					a('<div class="cell-title"/>').text(f.title).appendTo(e),
					f.renderEl = a("<div/>").appendTo(e);
					var g = function () {
						var a = JSON.stringify(this.getValue());
						this.oldValue && this.oldValue == a || (this.oldValue = a, FX.Utils.applyFunc(d, c.onStopEdit, [b.id], !1))
					};
					f.onStopEdit = g;
					var h = FX.createWidget(f);
					e.data("widget", h)
				}
			},
			_resizeBody: function () {},
			getConfigFromItem: function (b) {
				var c = this.options,
				d = {
					title: b.text,
					value: this._parseDefaultValue(b)
				};
				if (FX.Utils.applyFunc(this, c.onBeforeConvertField, [d, b], !1) === !1) {
					var e = FX.Utils.getFieldInfoById(b.id);
					switch (b.type) {
					case "text":
					case "radiogroup":
					case "combo":
						d.type = "xcombocheck",
						d.async = {
							url: "/data/distinct",
							data: {
								refAppId: e.appId,
								formId: e.entryId,
								field: b.name,
								type: b.type,
								authGroupId: c.authGroupId
							}
						},
						d.hasLimit = !0,
						d.searchable = !0,
						d.width = 150,
						"creator" !== b.name && "deleter" !== b.name || a.extend(d, this._getUserConfig(b));
						break;
					case "flowstate":
						d.type = "combocheck",
						d.items = [{
								value: FX.CONST.WORKFLOW.FLOWSTATE.INPROCESS,
								text: ""
							}, {
								value: FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE,
								text: ""
							}
						],
						d.width = 150;
						break;
					case "flownode":
						d.type = "combo",
						d.async = {
							url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/query_node",
							data: {
								formId: b.id
							}
						},
						d.textField = "_id",
						d.asyncResultKey = "data",
						d.width = 150;
						break;
					case "number":
						d.type = "numberlimit";
						break;
					case "datetime":
						d.type = "datelimit";
						break;
					case "address":
						d.type = "address",
						d.needDetail = !1;
						break;
					case "dept":
						d.type = "deptselect",
						d.limit = {
							url: "/data/distinct",
							data: {
								refAppId: e.appId,
								formId: e.entryId,
								field: b.name,
								type: b.type,
								authGroupId: c.authGroupId
							}
						};
						break;
					case "user":
						a.extend(d, this._getUserConfig(b));
						break;
					default:
						"creator" === b.name && a.extend(d, this._getUserConfig(b))
					}
				}
				return FX.Utils.isNull(d.type) ? null : d
			},
			_parseDefaultValue: function (b) {
				if (b.defaultValue) {
					var c;
					if ("datetime" === b.type && b.defaultValue) {
						c = {};
						var d = b.defaultValue,
						e = new Date,
						f = e.getTime(),
						g = 864e5;
						switch (d.type) {
						case "today":
							c.min = f,
							c.max = f;
							break;
						case "yesterday":
							c.min = f - g,
							c.max = f - g;
							break;
						case "lastWeek":
							c.min = f - 7 * g,
							c.max = f;
							break;
						case "thisWeek":
							c.min = FX.Utils.getWeekStartDate(e).getTime(),
							c.max = FX.Utils.getWeekEndDate(e).getTime();
							break;
						case "thisMonth":
							c.min = FX.Utils.getMonthStartDate(e).getTime(),
							c.max = FX.Utils.getMonthEndDate(e).getTime();
							break;
						case "formula":
							var h,
							i;
							h = "before" === d.min.type ? -1 * d.min.value : d.min.value,
							i = "before" === d.max.type ? -1 * d.max.value : d.max.value,
							c.min = f + h,
							c.max = f + i;
							break;
						default:
							c.min = d.min,
							c.max = d.max
						}
					} else if ("user" !== b.type && "creator" !== b.name || !b.defaultValue)
						c = a.extend(!0, {}, b.defaultValue);
					else {
						var j = [].concat(b.defaultValue.items || []),
						k = j.indexOf(FX.USER_ID.CurrentUser);
						k > -1 && (!FX.STATIC.user._id || j.indexOf(FX.STATIC.user._id) > -1 ? j.splice(k, 1) : j[k] = FX.STATIC.user._id),
						c = {
							items: j,
							hasEmpty: b.defaultValue.hasEmpty
						}
					}
					return c
				}
			},
			_getUserConfig: function (a) {
				var b = this.options,
				c = FX.Utils.getFieldInfoById(a.id);
				return {
					type: "usercheck",
					async: {
						url: "/data/distinct",
						data: {
							refAppId: c.appId,
							formId: c.entryId,
							field: a.name,
							type: a.type,
							authGroupId: b.authGroupId
						}
					},
					hasLimit: !0,
					textField: "nickname",
					valueField: "_id",
					width: 150
				}
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Parameter.superclass.getOptions.apply(this, arguments), {
					fields: b.fields
				})
			},
			removeField: function (b) {
				a(".fui_parameter_cell", this.element).eq(b).remove()
			},
			updateField: function (b, c) {
				if (!FX.Utils.isNull(c)) {
					a(".fui_parameter_cell", this.element).eq(c).children(".cell-title").text(b.text);
					var d = a(".fui_parameter_cell", this.element).eq(c).data("widget");
					d.setValue(this._parseDefaultValue(b))
				}
			},
			addField: function (a) {
				this._createItem(a)
			},
			checkValidate: function () {
				if (!this.options.allowBlank) {
					var b = a(".fui_parameter_cell", this.element),
					c = !0;
					return FX.Utils.forEach(b, function (b, d) {
						var e = a(d).data("widget");
						if (e) {
							var f = e.getValue();
							return FX.Utils.isObjectEmpty(f) ? (c = !1, !1) : void 0
						}
					}),
					c
				}
				return !0
			},
			_checkWidgetValue: function (a, b) {
				switch (a) {
				case "xcombocheck":
				case "usercheck":
				case "deptselect":
					return b.hasEmpty || !FX.Utils.isObjectEmpty(b.items);
				case "combo":
					return !FX.Utils.isObjectEmpty(b.nodes);
				case "combocheck":
					return !FX.Utils.isObjectEmpty(b.states);
				default:
					return !FX.Utils.isObjectEmpty(b)
				}
			},
			_getWidgetType: function (a) {
				switch (a) {
				case "xcombocheck":
				case "text":
					return "combocheck";
				case "combo":
					return "flownode";
				case "combocheck":
					return "flowstate";
				default:
					return a
				}
			},
			_getWidgetValue: function (b) {
				switch (b.options.type) {
				case "text":
					return a.makeArray(b.getValue());
				case "combo":
					return {
						nodes: b.getValue()
					};
				case "combocheck":
					return {
						states: b.getValue()
					};
				default:
					return b.getValue()
				}
			},
			getValue: function () {
				var b = a(".fui_parameter_cell", this.element),
				c = {},
				d = this,
				e = this.options;
				return FX.Utils.forEach(b, function (b, f) {
					var g = a(f).data("widget");
					if (g) {
						var h = d._getWidgetValue(g);
						if (d._checkWidgetValue(g.options.type, h)) {
							var i = e.fields[b];
							c.hasOwnProperty(i.id) || (c[i.id] = {}),
							c[i.id][i.name] = {
								widgetType: d._getWidgetType(g.options.type),
								widgetValue: h
							}
						}
					}
				}),
				c
			}
		}),
	a.shortcut("parameter", FX.Parameter)
}
(jQuery), function (a) {
	FX.TableContainer = FX.extend(FX.Container, {
			_defaultConfig: function () {
				return a.extend(FX.TableContainer.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "x-layout-table",
					rowSize: [],
					colSize: [],
					hgap: 0,
					vgap: 0,
					items: [],
					padding: 0
				})
			},
			_init: function () {
				FX.TableContainer.superclass._init.apply(this, arguments),
				this.$rows = [];
				var b = this.options;
				b.padding && this.element.css({
					padding: b.padding
				});
				for (var c = 0, d = b.rowSize.length; c < d; c++) {
					for (var e = a('<div class="x-layout-table-row"/>').appendTo(this.element), f = 0, g = b.colSize.length; f < g; f++) {
						var h = b.items[c][f];
						if (h) {
							var i = a('<div class="x-layout-table-item"/>').appendTo(e);
							h.type ? this._addWidget(a.extend(h, {
									width: h.width ? h.width : b.colSize[f],
									height: h.height ? h.height : b.rowSize[c],
									renderEl: i
								})) : i.css({
								width: b.colSize[f],
								height: b.rowSize[c]
							}).append(h),
							f > 0 && i.css({
								"margin-left": b.hgap
							})
						}
					}
					c > 0 && e.css({
						"margin-top": b.vgap
					}),
					this.$rows.push(e)
				}
			},
			getRowAt: function (a) {
				return this.$rows[a]
			},
			setRowVisible: function (a, b) {
				for (var c = 0, d = a.length; c < d; c++)
					b ? this.$rows[a[c]].show() : this.$rows[a[c]].hide()
			}
		}),
	a.shortcut("tablecontainer", FX.TableContainer)
}
(jQuery), function (a) {
	FX.CheckBox = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.CheckBox.superclass._defaultConfig.apply(), {
					baseCls: "x-check",
					isSelected: !1,
					onStateChange: null
				})
			},
			_init: function () {
				FX.CheckBox.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				a('<i class="icon-blank"/>').appendTo(this.element),
				this.$text = a("<span/>").appendTo(this.element),
				this.element.click(function () {
					c.isEnabled() && c.setSelected(!b.isSelected) && FX.Utils.applyFunc(c, b.onStateChange, [b.isSelected], !1)
				})
			},
			_initDefaultValue: function () {
				var a = this.options;
				FX.Utils.isEmpty(a.text) || this.setText(a.text),
				a.value && this.setValue(a.value)
			},
			setSelected: function (a) {
				return this.options.isSelected !== a && (this.options.isSelected = a, a ? this.element.addClass("select") : this.element.removeClass("select"), !0)
			},
			isSelected: function () {
				return this.options.isSelected
			},
			setValue: function (a) {
				a ? this.setSelected(!0) : this.setSelected(!1)
			},
			getValue: function () {
				return this.isSelected()
			},
			setText: function (a) {
				this.$text.text(a)
			},
			getText: function () {
				return this.$text.text()
			}
		}),
	a.shortcut("checkbox", FX.CheckBox)
}
(jQuery), function (a) {
	FX.Switch = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Switch.superclass._defaultConfig.call(), {
					baseCls: "fui_switch",
					width: 44,
					height: 22,
					value: !1,
					onSwitch: null,
					btnPadding: 2,
					text4On: "",
					text4Off: ""
				})
			},
			_init: function () {
				FX.Switch.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.$text = a('<span class="switch-text"/>').text(b.text4On).appendTo(this.element),
				this.$btn = a('<span class="switch-btn"/>').appendTo(this.element),
				this.element.click(function () {
					c.isEnabled() && c._doSwitch(!b.value, !0)
				})
			},
			_doSwitch: function (a, b) {
				var c = this.options,
				d = this,
				e = {},
				f = {},
				g = "";
				c.value = a,
				c.value === !0 ? (this.element.addClass("on").removeClass("off"), this.$text.text(""), e.left = c.width - c.height + c.btnPadding, f["padding-left"] = 0, f["padding-right"] = c.height - 3 * c.btnPadding, g = c.text4On) : (this.element.addClass("off").removeClass("on"), this.$text.text(""), e.left = c.btnPadding, f["padding-left"] = c.height - 3 * c.btnPadding, f["padding-right"] = 0, g = c.text4Off),
				b ? this.$btn.animate(e, 150, function () {
					d.element.css(f),
					d.$text.text(g),
					FX.Utils.applyFunc(d, c.onSwitch, [c.value], !1)
				}) : (this.$btn.css(e), this.element.css(f), this.$text.text(g))
			},
			setValue: function (a) {
				this._doSwitch(a, !1)
			},
			getValue: function () {
				return this.options.value
			},
			doResize: function (a) {
				FX.Switch.superclass.doResize.apply(this, arguments);
				var b = this.options,
				c = b.height,
				d = b.width,
				e = c - 2 * b.btnPadding,
				f = {};
				c && (f["line-height"] = c + "px"),
				d && (this.$btn.css({
						width: e,
						height: e
					}), f["border-radius"] = d / 2),
				this.element.css(f)
			}
		}),
	a.shortcut("switch", FX.Switch)
}
(jQuery), function (a) {
	FX.Button = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Button.superclass._defaultConfig.apply(), {
					baseCls: "x-btn",
					iconCls: null,
					style: "blue"
				})
			},
			_init: function () {
				FX.Button.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				b.iconCls && a("<i/>").addClass(b.iconCls).appendTo(this.element),
				this.$text = a("<span/>").appendTo(this.element),
				b.style && this.element.addClass("style-" + b.style),
				b.hoverCls && this.element.hover(function () {
					c.isEnabled() && a(this).addClass(b.hoverCls)
				}, function () {
					c.isEnabled() && a(this).removeClass(b.hoverCls)
				}),
				this.element.click(function (a) {
					c.isEnabled() && FX.Utils.applyFunc(c, b.onClick, [a], !1)
				})
			},
			doResize: function (a) {
				FX.Button.superclass.doResize.apply(this, arguments);
				var b = this.options;
				FX.Utils.isEmpty(b.height) || this.element.css("line-height", b.height + "px")
			},
			setValue: function (a) {
				FX.Button.superclass.setValue.apply(this, arguments),
				FX.Utils.isNull(a) && (a = ""),
				this.$text.text(a)
			},
			setText: function (a) {
				FX.Button.superclass.setText.apply(this, arguments),
				FX.Utils.isNull(a) && (a = ""),
				this.$text.text(a)
			}
		}),
	a.shortcut("button", FX.Button)
}
(jQuery), function (a) {
	FX.Label = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Label.superclass._defaultConfig.apply(), {
					baseCls: "x-label",
					text: "",
					onClick: null
				})
			},
			_init: function () {
				FX.Label.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.$label = a("<a/>").appendTo(this.element),
				c.onClick && this.$label.addClass("link").click(function () {
					FX.Utils.applyFunc(b, c.onClick, [b.$label], !1)
				})
			},
			setText: function (a) {
				a = FX.Utils.isNull(a) ? "" : a,
				this.$label.text(a)
			},
			setValue: function (a) {
				this.setText(a)
			}
		}),
	a.shortcut("label", FX.Label)
}
(jQuery), function (a) {
	FX.ComboTree = FX.extend(FX.Trigger, {
			_defaultConfig: function () {
				return a.extend(FX.ComboTree.superclass._defaultConfig.apply(), {
					baseCls: "fui_combotree",
					triggerIcon: "icon-ui-combo",
					triggerList: "combotree-list",
					delimiter: ",",
					items: null,
					onAfterNodeClick: null
				})
			},
			_init: function () {
				FX.ComboTree.superclass._init.apply(this, arguments),
				this.value = [],
				this.text = [],
				this.options.async || this._createTreeView()
			},
			_onTriggerClick: function (b) {
				if (this.isEnabled()) {
					var c = this;
					this._showTreeView(),
					a(document).bind("mousedown.treeview", function (b) {
						var d = b.target,
						e = a(d).closest(c.treeView);
						0 === e.length && c._hideTreeView()
					})
				}
			},
			_createTreeView: function () {
				var b = this.options,
				c = this;
				this.treeView = a('<div class="x-dropdown x-dropdown-list"/>').addClass(b.triggerList),
				this.tree = new FX.Tree({
						renderEl: this.treeView,
						Nodes: b.items,
						setting: {
							treeId: b.treeId,
							data: {
								simpleData: {
									enable: !0
								}
							},
							callback: {
								onClick: function (a, d) {
									d.isParent ? this.onSwitchNode(a, d) : (c._setValueByNode(d), FX.Utils.applyFunc(c, b.onAfterNodeClick, [d], !1), c._hideTreeView())
								}
							}
						}
					})
			},
			_setValueByNode: function (a) {
				if (a) {
					this.value = [a.id],
					this.text = [a.name];
					for (var b = a.getParentNode(); b; )
						this.value.unshift(b.id), this.text.unshift(b.name), b = b.getParentNode()
				}
				this.editComp && this.editComp.val(this.text.join(this.options.delimiter))
			},
			_hideTreeView: function () {
				this.treeView && (a(document).unbind("mousedown.treeview"), this.treeView.detach())
			},
			_showTreeView: function () {
				null == this.treeView && this._createTreeView(),
				this.treeView.appendTo("body").css(this._calTriggerViewPos()).show()
			},
			setValue: function (b) {
				var c = this,
				d = a.makeArray(b),
				e = this.tree.getNodes();
				this.value = [],
				this.text = [],
				FX.Utils.forEach(d, function (a, b) {
					var f = !1;
					if (FX.Utils.forEach(e, function (g, h) {
							if (h.id === b)
								return c.value.push(h.id) , c.text.push(h.name), f = !0, e = h.children, a === d.length - 1 && c.tree.selectNode(h), !1
							}), !f)return !1
				}),
				this.editComp && this.editComp.val(this.text.join(this.options.delimiter))
			},
			getValue: function () {
				return this.value
			},
			getText: function () {
				return this.text
			}
		}),
	a.shortcut("combotree", FX.ComboTree)
}
(jQuery), function (a) {
	FX.Grid = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Grid.superclass._defaultConfig.call(), {
					baseCls: "fui-grid",
					baseId: null,
					itemsPerPage: 15,
					items: [],
					columnsConfig: [],
					footAlign: "bottom",
					isHeadShow: !0,
					multiSelect: !1,
					intervalColor: !1,
					async: null,
					hasHoverCls: !0,
					hasPagination: !1,
					onPageTurn: null,
					onAsyncSuccess: null,
					onAsyncError: null,
					onBeforeRowCreate: null,
					onAfterRowCreate: null,
					onBeforeHeadCreate: null,
					onAfterHeadCreate: null,
					onAfterRowCheck: null
				})
			},
			_init: function () {
				FX.Grid.superclass._init.apply(this, arguments);
				var a = this.options;
				a.baseId && this.element.attr("id", a.baseId),
				a.hasPagination && !this.page && (this.page = 0),
				this.refresh()
			},
			refresh: function (b) {
				var c = this,
				d = this.options;
				if (a.isArray(b))
					d.items = b, this._createTable();
				else if (d.async) {
					var e = d.async.data;
					d.hasPagination && (e = a.extend({}, e, {
								skip: this.page * d.itemsPerPage,
								limit: d.itemsPerPage
							})),
					FX.Utils.ajax({
						url: d.async.url,
						data: e
					}, function (a, e) {
						FX.Utils.applyFunc(c, d.onAsyncSuccess, [a, e, b], !1),
						d.hasPagination && (c.count = a.count),
						c._createTable()
					}, function (a, e) {
						FX.Utils.applyFunc(c, d.onAsyncError, [a, e, b], !1)
					})
				} else
					this._createTable()
			},
			_createTable: function () {
				var b = this.options;
				this.options.multiSelect && (this.allBoxes = []),
				this.element.empty(),
				this.$container = a('<div class="fui-grid-table"/>').appendTo(this.element),
				this.$table = a('<table cellPadding="0" cellSpacing="0"/>'),
				this._onCreateHead(),
				this._onCreateTable(),
				this._bindEvts(),
				b.hasPagination && this._createPagination(),
				this.$container.append(this.$table)
			},
			_onCreateHead: function () {
				var b = this.options,
				c = this,
				d = b.isHeadShow;
				this.$head = a("<thead/>");
				var e = a("<tr/>").appendTo(this.$head);
				FX.Utils.applyFunc(this, b.onBeforeHeadCreate, [e], !1),
				b.multiSelect && (this.$AllCheck = new FX.CheckBox({
							width: 25,
							onStateChange: function () {
								if (c.allBoxes) {
									var a = this.isSelected();
									FX.Utils.forEach(c.allBoxes, function (b, c) {
										c.isEnabled() && c.setValue(a)
									}),
									FX.Utils.applyFunc(c, b.onAfterRowCheck, [this.isSelected()], !1)
								}
							}
						}), a("<td/>").append(this.$AllCheck.element).appendTo(e)),
				FX.Utils.forEach(b.columnsConfig, function (b, c) {
					var d = a("<td/>").width(c.width),
					f = FX.Utils.applyFunc(this, c.onHeadCellCreate, [b, c], !1);
					f === !1 ? d.css("text-align", c.textAlign ? c.textAlign : "left").text(c.value ? c.value : c.key) : d.append(f),
					d.appendTo(e)
				}),
				FX.Utils.applyFunc(this, b.onAfterHeadCreate, [e], !1),
				d && this.$table.append(this.$head)
			},
			_onCreateTable: function () {
				this.$tbody = a("<tbody/>");
				var b = this,
				c = this.options,
				d = c.items;
				FX.Utils.forEach(d, function (a, c) {
					var d = b.onCreateRow(a, c);
					b.$tbody.append(d)
				}),
				this.$table.append(this.$tbody)
			},
			_bindEvts: function () {
				var a = this,
				b = this.options,
				c = function (c) {
					var d = c.target,
					e = c.type,
					f = a._getTargetDom(d, "TR");
					if (f) {
						var g = f.data("item");
						"mousedown" === e ? FX.Utils.applyFunc(a, b.onRowMouseDown, [f, g], !1) : "mouseover" === e ? (b.hasHoverCls && f.addClass("hover"), FX.Utils.applyFunc(a, b.onRowMouseOver, [f, g], !1)) : "mouseout" === e ? (f.removeClass("hover"), FX.Utils.applyFunc(a, b.onRowMouseOut, [f, g], !1)) : "mouseup" === e && FX.Utils.applyFunc(a, b.onRowClick, [f, g], !1)
					}
				};
				this.$tbody.unbind(),
				this.$tbody.bind("mousedown", c).bind("mouseover", c).bind("mouseup", c).bind("mouseout", c)
			},
			_getTargetDom: function (b, c) {
				for (; b && b.tagName; ) {
					if (b.tagName.toUpperCase() === c.toUpperCase())
						return a(b);
					b = b.parentNode
				}
				return null
			},
			onCreateRow: function (b, c) {
				var d = this,
				e = this.options,
				f = a("<tr/>").data("item", c);
				if (FX.Utils.applyFunc(this, e.onBeforeRowCreate, [f, b, c], !1), e.multiSelect) {
					var g = new FX.CheckBox({
							width: 25,
							enable: c.enable !== !1,
							gridRowData: c,
							onStateChange: function () {
								if (d.$AllCheck) {
									if (this.isSelected()) {
										var a = !0;
										FX.Utils.forEach(d.allBoxes, function (b, c) {
											if (!c.isSelected())
												return a = !1, !1
										}),
										d.$AllCheck.setValue(a)
									} else
										d.$AllCheck.setValue(!1);
									FX.Utils.applyFunc(d, e.onAfterRowCheck, [this.isSelected()], !1)
								}
							}
						});
					c.selected && g.setSelected(c.selected),
					this.allBoxes.push(g),
					a("<td/>").append(g.element).appendTo(f)
				}
				return FX.Utils.forEach(e.columnsConfig, function (a, e) {
					d.onCellCreate(b, a, c, e).appendTo(f)
				}),
				e.intervalColor && b % 2 === 0 && f.addClass("even"),
				FX.Utils.applyFunc(this, e.onAfterRowCreate, [f, b, c], !1),
				f
			},
			onCellCreate: function (b, c, d, e) {
				var f = a("<td/>"),
				g = this,
				h = FX.Utils.applyFunc(this, e.onCellCreate, [b, c, d, e], !1);
				return h === !1 ? FX.Utils.isEmpty(e.value) || (h = a('<div class="cell"/>').text(d[e.key]).attr("title", d[e.key]).appendTo(f)) : f.append(h),
				f.click(function () {
					FX.Utils.applyFunc(g, e.onCellClick, [b, c, d, e, h], !1)
				}),
				FX.Utils.applyCss(h, e.css),
				f
			},
			getValue: function () {
				return this.options.items
			},
			addRowData: function (a) {
				var b = this.options;
				if (b.async);
				else {
					var c = this.onCreateRow(this.options.items.length, a);
					this.options.items.push(a),
					c.appendTo(this.$tbody)
				}
			},
			getSelectedData: function () {
				var a = [];
				return this.allBoxes && FX.Utils.forEach(this.allBoxes, function (b, c) {
					c.isSelected() && a.push(c.options.gridRowData)
				}),
				a
			},
			hasMore: function () {
				var a = this.options;
				return (this.page + 1) * a.itemsPerPage < this.count
			},
			_createPagination: function () {
				var b = this,
				c = this.options;
				new FX.Pagination({
					renderEl: a("<div />").appendTo(this.element),
					count: this.count,
					limit: c.itemsPerPage,
					curPage: this.page + 1,
					onChangePage: function (a, c) {
						b.page = a - 1,
						b.rebuild()
					}
				})
			}
		}),
	a.shortcut("grid", FX.Grid)
}
(jQuery), function (a) {
	FX.Dialog = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Dialog.superclass._defaultConfig.apply(), {
					renderEl: a("<div/>").appendTo("body"),
					baseCls: "x-dialog",
					title: "",
					animation: 300,
					style4Header: null,
					hasCloseBtn: !0,
					contentWidget: {},
					autoClose: !0,
					onAfterHeaderCreate: null,
					onContentCreate: null,
					onClose: null
				})
			},
			_init: function () {
				FX.Dialog.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.$mask = a('<div class="x-window-mask light modal fadeout scrollable"/>').css({
						"z-index": FX.STATIC.zIndex++
					}).appendTo("body"),
				this.element.appendTo(this.$mask),
				b.autoClose && this.$mask.click(function (b) {
					a(b.target).hasClass("x-window-mask") && c.close()
				});
				var d = a('<div class="dialog-header"/>').append(a('<span class="title"/>').text(b.title)).appendTo(this.element);
				b.style4Header && d.addClass(b.style4Header),
				b.hasCloseBtn && a('<i class="icon-close-large"/>').click(function () {
					c.close()
				}).appendTo(d),
				FX.Utils.applyFunc(this, b.onAfterHeaderCreate, [d], !1),
				this.$content = a('<div class="dialog-body"/>').appendTo(this.element),
				this._createContent(this.$content)
			},
			_createContent: function (b) {
				var c = this.options;
				FX.Utils.applyFunc(this, c.onContentCreate, [b], !1) === !1 && (this.container = FX.createWidget(a.extend({
								type: "tablecontainer",
								renderEl: a("<div/>").appendTo(b)
							}, c.contentWidget)))
			},
			getWidgetByName: function (a) {
				return this.container ? this.container.getWidgetByName(a) : null
			},
			show: function () {
				var a = this;
				setTimeout(function () {
					a.$mask.addClass("fadein").removeClass("fadeout")
				}, 0)
			},
			close: function () {
				var a = this.options,
				b = this;
				this.$mask.addClass("fadeout").removeClass("fadein"),
				setTimeout(function () {
					b.element.remove(),
					b.$mask.remove(),
					FX.Utils.applyFunc(b, a.onClose, [], !1)
				}, a.animation)
			},
			rebuildContent: function (b) {
				this.options = a.extend(this.options, b),
				this.$content.empty(),
				this._createContent(this.$content),
				this.doResize()
			}
		}),
	a.shortcut("dialog", FX.Dialog)
}
(jQuery), function (a) {
	FX.ConfirmDialog = FX.extend(FX.Dialog, {
			_defaultConfig: function () {
				return a.extend(FX.ConfirmDialog.superclass._defaultConfig.apply(), {
					text4Ok: "",
					text4Cancel: "",
					btnPosition: "right",
					autoClose: !1,
					onOk: null,
					onCancel: null
				})
			},
			_init: function () {
				FX.ConfirmDialog.superclass._init.apply(this, arguments),
				this._createButtonGroup()
			},
			_createButtonGroup: function () {
				var b = this,
				c = this.options,
				d = FX.Utils.isEmpty(c.contentWidget.padding) ? 15 : c.contentWidget.padding,
				e = a('<div class="dialog-btn-row"/>').css({
						bottom: d
					}).appendTo(this.$content),
				f = a('<div class="dialog-btn ok-btn"/>'),
				g = a('<div class="dialog-btn cancel-btn"/>');
				"right" === c.btnPosition ? (e.css({
						right: d
					}), g.css({
						"margin-left": d
					})) : "left" === c.btnPosition && (e.css({
						left: d
					}), f.css({
						"margin-right": d
					})),
				c.text4Ok && (this.btnOk = new FX.Button({
							renderEl: f.appendTo(e),
							widgetName: "confirmBtnOK",
							text: c.text4Ok,
							style: "green",
							onClick: function () {
								FX.Utils.applyFunc(b, c.onOk, [], !1) === !1 && b.close()
							}
						})),
				c.text4Cancel && (this.btnCancel = new FX.Button({
							renderEl: g.appendTo(e),
							widgetName: "confirmBtnCancel",
							text: c.text4Cancel,
							style: "white",
							onClick: function () {
								FX.Utils.applyFunc(b, c.onCancel, [], !1) === !1 && b.close()
							}
						}))
			},
			getOkBtn: function () {
				return this.btnOk
			},
			getCancelBtn: function () {
				return this.btnCancel
			},
			rebuildContent: function (a) {
				FX.ConfirmDialog.superclass.rebuildContent.apply(this, arguments),
				this._createButtonGroup()
			}
		}),
	a.shortcut("confirmdialog", FX.ConfirmDialog)
}
(jQuery), function (a) {
	FX.Form = FX.extend(FX.Widget, {
			LAYOUT_SIZES: {
				normal: {
					textarea: {
						width: 420
					},
					address: {
						width: 420
					}
				},
				"grid-2": {
					textarea: {
						width: 320
					},
					address: {
						width: "88.8%"
					}
				},
				"full-line": {
					text: {
						width: 420
					},
					number: {
						width: 420
					},
					combo: {
						width: 420
					},
					combocheck: {
						width: 420
					},
					textarea: {
						width: 420
					}
				}
			},
			_defaultConfig: function () {
				return a.extend(FX.Form.superclass._defaultConfig.apply(), {
					baseCls: "fui-form",
					title: "",
					appId: null,
					entryId: null,
					dataId: null,
					onAfterItemCreate: null,
					onAfterSubmit: null,
					onSuccess: null,
					onAfterCancel: null,
					layout: "normal",
					mode: "new",
					submitRule: FX.InvisibleSubmitRules.KEEP,
					width: 780,
					extParam: null,
					submitUrl: "/data/create",
					submitData: null,
					submitText: null,
					validators: null,
					cancelText: null,
					ignoreOptAuth: !1,
					ignoreValidate: !1,
					widgetOptAuth: null,
					editValue: null,
					buttonPosition: "left",
					hasFooter: !0,
					hasHeader: !0,
					onCreateMoreBtn: null,
					flow: null,
					authGroupId: null
				})
			},
			_init: function () {
				FX.Form.superclass._init.apply(this, arguments);
				var a = this.options;
				FX.STATIC.DATAID = a.dataId,
				this._initMain()
			},
			_initMain: function () {
				var b = this,
				c = this.options;
				c.hasHeader && (this.$header ? this.$header.children("span").text(c.title) : this.$header = a('<div class="header"/>').append(a("<span/>").text(c.title)).appendTo(this.element), c.onAfterCancel && a('<i class="icon-close-large form-exit-icon">').click(function () {
						FX.STATIC.DATAID = null,
						FX.Utils.applyFunc(b, c.onAfterCancel, [], !1)
					}).appendTo(this.$header), c.flow && this._initFlowHeader()),
				FX.STATIC.RecnoLock = this._isPreviewMode(),
				FX.STATIC.EntryRecNo = null,
				this.$wrapper = a('<div class="widget-wrapper">').appendTo(this.element);
				var d = a("<ul/>").appendTo(this.$wrapper),
				e = "normal-layout";
				"grid-2" === c.layout && (e = "grid-layout"),
				this.element.addClass(e),
				this.rely = new FX.RelyProcessor(c.items),
				this.widgetsMap = {},
				this.visibleWidgetsMap = {},
				c.items && (c.resultWidgets = {}, c.widgetOptAuth = c.widgetOptAuth || {}, FX.Utils.forEach(c.items, function (a, c) {
						var e = c.lineWidth || 12,
						f = b._createItem(a, c, d),
						g = f.data("widget");
						g.supportLayout && !g.supportLayout() || f.addClass("x-grid-col-" + e),
						b._hasContactWidgets(c.widget) && b._initContactWidgets(c.widget)
					})),
				FX.Utils.forEach(this.widgetsMap, function (a, c) {
					FX.Utils.forEach(c, function (a, c) {
						b.visibleWidgetsMap[c] ? b._setWidgetVisible(c, !0) : b._setWidgetVisible(c, !1)
					})
				}),
				this._initFooter(),
				this._isEditMode() ? (FX.Utils.forEach(c.editValue, function (a, c) {
						var d = b.getWidgetByName(a);
						d && (d.setValue(c), d.effectItemLinkWidgets && d.effectItemLinkWidgets())
					}), this._setLinkQuery()) : FX.Utils.forEach(this.rely.getDefaultRely(), function (a, c) {
					b._fireWidgetRelyEvent(c, null)
				})
			},
			_initFooter: function () {
				var b = this,
				c = this.options;
				if (c.hasFooter) {
					this.$footer = a('<div class="footer"/>').appendTo(this.element);
					var d = c.flow && c.flow.comment;
					if (d && d.enable) {
						this.$footer.addClass("comment-footer");
						var e = a('<div class="comment-pane"/>').appendTo(this.$footer).append(a("<span/>").text(""));
						d.required && e.append(a('<span class="label-notnull"/>').text("*")),
						this.flowComment = new FX.TextArea({
								renderEl: a('<div class="comment-content"/>').appendTo(e),
								allowBlank: !d.required,
								width: "auto",
								height: 50,
								onStopEdit: function () {
									c.submitData.comment = this.getValue()
								}
							})
					}
					var f = a('<div class="btn-pane"/>').addClass(c.buttonPosition).appendTo(this.$footer);
					c.flow ? new FX.FlowBtn({
						renderEl: f,
						flow: c.flow,
						onSubmit: function (a, d) {
							"print" === a && (b.needPrint = !0, a = "forward"),
							c.submitData.flowAction = a,
							d ? b.doVerifyAndSubmit() : b.doSubmit()
						},
						onCancel: c.onAfterCancel,
						onPrint: c.onPrint
					}) : (c.printText && new FX.Button({
							renderEl: a('<div class="print-btn"/>').appendTo(f),
							text: c.printText,
							width: 120,
							style: "green",
							onClick: function () {
								b.needPrint = !0,
								b.doVerifyAndSubmit()
							}
						}), c.submitText && new FX.Button({
							renderEl: a('<div class="ok-btn"/>').appendTo(f),
							text: c.submitText,
							width: 120,
							style: "green",
							onClick: function () {
								b.doVerifyAndSubmit()
							}
						}), c.cancelText && new FX.Button({
							renderEl: a('<div class="cancel-btn"/>').appendTo(f),
							text: c.cancelText,
							style: "white",
							width: 120,
							onClick: function () {
								FX.STATIC.DATAID = null,
								FX.Utils.applyFunc(b, c.onAfterCancel, [!1], !0)
							}
						}), c.submitText && c.cancelText || c.submitText && c.printText ? f.addClass("float") : c.submitText && f.addClass("single"), FX.Utils.applyFunc(this, c.onCreateMoreBtn, [f], !1))
				}
			},
			_initFlowHeader: function () {
				var b = this.options,
				c = this;
				!this.$header.hasClass("flow-header") && this.$header.addClass("flow-header"),
				FX.Utils.isArray(b.flow.flowNodes) && b.flow.flowNodes.length > 1 ? this.flowMenu ? (this.flowMenu.setEnable(!0), this.flowMenu.refresh({
						currentMenuId: b.submitData.flowId,
						items: b.flow.flowNodes
					})) : (this.$menu = a("<div />").appendTo(this.element), this.flowMenu = new FX.Navigator({
							renderEl: this.$menu,
							items: b.flow.flowNodes,
							currentMenuId: b.submitData.flowId,
							menuKey: "flowId",
							onMenuClick: function (a) {
								this.setEnable(!1),
								FX.Utils.applyFunc(c, b.onFlowNodeClick, [b.entryId, b.dataId, a], !1)
							}
						})) : this.flowMenu && (this.flowMenu.empty(), this.flowMenu = null, this.$menu = null),
				b.flow.hasLogView && 0 === a(".flow-state", this.$header).length && this.$header.append(a('<div class="flow-state flow-btn"/>').append(a('<i class="icon-flow-state"/>')).append(a("<span/>").text(""))),
				FX.Utils.dataAjax({
					url: "/data/log_flow",
					data: {
						appId: b.appId,
						entryId: b.entryId,
						dataId: b.flow.dataId
					}
				}, function (d) {
					c.flowLogs = d.logs;
					var e = function () {
						new FX.FlowCommentPane({
							renderEl: a('<div class="flow-info-pane flow-comment"/>').appendTo(c.element),
							appId: b.appId,
							entryId: b.entryId,
							comments: d.logs
						})
					},
					f = !1;
					FX.Utils.forEach(d.logs, function (b, d) {
						if (d.comment && "save" !== d.flowAction) {
							var g = [d.operator, d.comment].join(": "),
							h = a('<div class="flow-last-comment"/>').append("<span/>").text(g).prependTo(c.$wrapper);
							return h.append(a('<a class="flow-show-comment"/>').text("").click(function () {
									e()
								})),
							f = !0,
							!1
						}
					}),
					f && 0 === a(".flow-comment", c.$header).length && a('<div class="flow-comment flow-btn"/>').append(a('<i class="icon-flow-comment"/>')).append(a("<span/>").text("")).appendTo(c.$header).click(function () {
						var a = c.element.children(".flow-info-pane");
						a.hasClass("flow-comment") || (a.remove(), e())
					})
				}),
				this.$header.click(function (d) {
					var e = a(d.target).closest(".flow-btn"),
					f = c.element.children(".flow-info-pane");
					if (e.hasClass("flow-state")) {
						if (f.hasClass("flow-state"))
							return;
						f.remove(),
						new FX.FlowStatePane({
							renderEl: a('<div class="flow-info-pane flow-state"/>').appendTo(c.element),
							appId: b.appId,
							entryId: b.entryId,
							flow: b.flow
						})
					}
				})
			},
			_hasContactWidgets: function (a) {
				return a && ("combo" === a.type || "radiogroup" === a.type) && !a.async
			},
			_isEditMode: function () {
				return "edit" === this.options.mode
			},
			_isPreviewMode: function () {
				return "preview" === this.options.mode
			},
			_initContactWidgets: function (a) {
				var b = !1,
				c = [],
				d = this;
				if (FX.Utils.forEach(a.items, function (a, e) {
						e.widgetsMap && FX.Utils.forEach(e.widgetsMap, function (a, f) {
							b = !0,
							c.indexOf(f) < 0 && c.push(f),
							e.selected && (d.visibleWidgetsMap[f] = !0)
						})
					}), b) {
					this.widgetsMap[a.widgetName] = c;
					var e = this.getWidgetByName(a.widgetName);
					e.options.onAfterItemSelect = function (a, b) {
						d._hideContactWidgets(d.widgetsMap[this.options.widgetName]),
						b && FX.Utils.forEach(b.widgetsMap, function (a, b) {
							d._setWidgetVisible(b, !0)
						})
					}
				}
			},
			_hideContactWidgets: function (a) {
				var b = this;
				FX.Utils.forEach(a, function (a, c) {
					b._setWidgetVisible(c, !1)
				})
			},
			_setWidgetVisible: function (a, b) {
				var c = this.getWidgetByName(a);
				if (c) {
					c.setVisible(b);
					var d = c.element.closest(".widget-view");
					b ? d.removeClass("hide") : d.addClass("hide")
				}
			},
			_getWidgetOptAuth: function (a) {
				var b = this.options;
				return b.ignoreOptAuth ? {
					ignoreOptAuth: !0,
					visible: !0,
					enable: !0
				}
				 : b.flow || !FX.Utils.isNull(b.authGroupId) ? b.widgetOptAuth[a.widget.widgetName] || {
					visible: !1,
					enable: !1
				}
				 : {}
			},
			_getWidgetConfig: function (b) {
				var c = this,
				d = {
					onStopEdit: function () {
						c._fireWidgetRelyEvent(this, null)
					},
					onBeforeInit: function () {
						var a = this.options.rely;
						a && a.widgets && 0 === a.widgets.length && a.formula && !c._isEditMode() && (this.options.value = c._calFormula(a.formula.formula, {}))
					}
				};
				switch (b) {
				case "combo":
				case "combocheck":
					a.extend(d, {
						onBeforeAsync: function () {
							var a = this.options.async.data;
							a && (a.filter = c._iterAddFilter(this))
						}
					});
					break;
				case "linkdata":
					a.extend(d, {
						onBeforeLinkData: function (b) {
							var d = this.element,
							e = this.options.linkForm;
							if (e) {
								var f = [],
								g = {};
								FX.Utils.forEach(b, function (b, e) {
									var g = -1;
									c._isSubformWidget(e.rely) && (g = a(d).closest(".subform-line").index());
									var h = c.getWidgetByName(e.rely, g);
									if (h) {
										var i = h.getLinkValue();
										FX.Utils.isObjectEmpty(i) || f.push(c._createDataFilter(h, i, e.link))
									}
								}),
								g[e] = f,
								this.reload(g)
							}
						}
					});
					break;
				case "subform":
					a.extend(d, {
						onBeforeWidgetCreate: function (b) {
							a.extend(b, c._getWidgetConfig(b.type))
						},
						onAfterWidgetCreate: function (a) {
							c._addLinkQuery(a)
						}
					});
					break;
				case "user":
				case "usergroup":
					a.extend(d, {
						onBeforeEdit: function () {
							var a = this.options;
							if (a.limitWidget) {
								var b = c.getWidgetByName(a.limitWidget);
								if (b) {
									var d = b.getLinkValue();
									FX.Utils.isArray(d) ? a.limit = d : a.limit = [d]
								}
							}
						}
					});
					break;
				case "image":
				case "upload":
					a.extend(d, {
						uploadTokenURL: "/dashboard/app/" + FX.STATIC.APPID + "/upload_token",
						onFileSizeLimit: function () {
							return FX.Vip.getUploadMFS()
						}
					})
				}
				return d
			},
			_createItem: function (b, c, d) {
				var e = this.options,
				f = a('<li class="widget-view"/>').appendTo(d),
				g = a('<div class="fl-label"/>').appendTo(f).append(a('<span class="label-title"/>').text(c.label));
				FX.Utils.isEmpty(c.description) || "<br>" === c.description || a('<div class="fl-description separator"/>').append(c.description).appendTo(f);
				var h = a.extend({
						renderEl: a("<div/>").appendTo(a('<div class="fl-widget"/>').appendTo(f))
					}, this._getWidgetConfig(c.widget.type), c.widget, this._getWidgetOptAuth(c));
				h = this._doLayoutResize(h, c.lineWidth);
				var i = FX.createWidget(h);
				return this._addLinkQuery(i),
				this.rely.addDefaultRely(i),
				i.options.allowBlank || a('<span class="label-notnull"/>').text("*").appendTo(g),
				e.resultWidgets[h.widgetName] = i,
				f.data("widget", i),
				FX.Utils.applyFunc(this, e.onAfterItemCreate, [b, c, f], !1),
				i.isVisible() || f.addClass("hide"),
				f
			},
			_doLayoutResize: function (b, c) {
				var d = this.options;
				return this.LAYOUT_SIZES[d.layout] && this.LAYOUT_SIZES[d.layout][b.type] && a.extend(b, this.LAYOUT_SIZES[d.layout][b.type]),
				"grid-2" === d.layout && 12 === c && ("linkquery" === b.type || "linkdata" === b.type ? a.extend(b, {
						layoutSize: this.LAYOUT_SIZES["full-line"]
					}) : a.extend(b, this.LAYOUT_SIZES["full-line"][b.type])),
				b
			},
			_fireWidgetRelyEvent: function (a, b) {
				this.rely.fireRely(a, b, this)
			},
			_iterAddFilter: function (b, c) {
				var d = this;
				if (b) {
					var e = b.options.rely;
					if (e && (c || (c = {}), !c[b.options.widgetName])) {
						c[b.options.widgetName] = !0;
						var f = {};
						return e.data && e.ref && FX.Utils.forEach(e.widgets, function (g, h) {
							if (c[h])
								return !1;
							var i = -1;
							d._isSubformWidget(h) && b.options.subform && (i = a(b.element).closest(".subform-line").index());
							var j = d.getWidgetByName(h, i);
							if (!j)
								return !1;
							var k = j.getLinkValue(),
							l = d._createDataFilter(j, k, e.ref.field);
							return f[e.ref.formId] = [l],
							a.extend(!0, f, d._iterAddFilter(j, c)),
							!1
						}),
						f
					}
				}
			},
			_createDataFilter: function (a, b, c) {
				var d = {};
				if (a && "datetime" === a.getLinkType()) {
					var e = {},
					f = new Date(b);
					f.setHours(0, 0, 0, 0),
					e.min = f.getTime();
					var g = new Date(b);
					g.setHours(23, 59, 59, 999),
					e.max = g.getTime(),
					d[c] = {
						widgetType: "datelimit",
						widgetValue: e
					}
				} else {
					var h = b;
					FX.Utils.isArray(b) || (h = [b]),
					d[c] = {
						widgetType: "combocheck",
						widgetValue: h
					}
				}
				return d
			},
			dealRely: function (a, b, c, d) {
				var e = this,
				f = null,
				g = b.options.rely;
				if (b.options.subform && (f = b.element.closest(".subform-line").index()), g.formula) {
					var h = g.formula.formula,
					i = {};
					i[a] = d,
					FX.Utils.forEach(g.widgets, function (a, b) {
						var c = e.getWidgetByName(b, f);
						if (FX.Utils.isArray(c)) {
							var d = [];
							FX.Utils.forEach(c, function (a, b) {
								d.push(b.getLinkValue())
							}),
							i[b] = d
						} else
							c && (i[b] = c.getLinkValue())
					});
					var j = e._calFormula(h, i);
					b.setValue(j),
					e._fireWidgetRelyEvent(b, c)
				}
				if (g.ref && g.data) {
					var k = g.data;
					switch (b.getWidgetType()) {
					case "combo":
					case "combocheck":
						b.options.async && (b.items = null),
						b.rebuild(),
						e._fireWidgetRelyEvent(b, c);
						break;
					case "dept":
					case "deptgroup":
						k.filter = e._iterAddFilter(b),
						FX.Utils.dataAjax({
							url: "/data/distinct",
							data: k
						}, function (a) {
							b.options.limit = a.items,
							e._fireWidgetRelyEvent(b, c)
						});
						break;
					default:
						k.filter = e._iterAddFilter(b),
						FX.Utils.dataAjax({
							url: "/data/link",
							data: k
						}, function (a) {
							b.setValue(a.result),
							e._fireWidgetRelyEvent(b, c)
						})
					}
				}
				e._getLinkQueryData(b)
			},
			_addLinkQuery: function (a) {
				a && "linkquery" === a.options.type && (this.linkQueryWidgets || (this.linkQueryWidgets = []), this.linkQueryWidgets.push(a))
			},
			_setLinkQuery: function () {
				var a = this;
				FX.Utils.forEach(this.linkQueryWidgets, function (b, c) {
					a._getLinkQueryData(c)
				})
			},
			_getLinkQueryData: function (b) {
				var c = this;
				if ("linkquery" === b.options.type) {
					var d = b.options.widgetName,
					e = null;
					b.options.subform && (d = [b.options.subform, d].join("."), e = a(b.element).closest(".subform-line").index()),
					this.rely.setStateMap(d, this.rely.RELY_END),
					this.rely.setAsyncMap(d, this.rely.RELY_END);
					var f = {},
					g = [],
					h = b.options.linkForm;
					if (h) {
						var i = !0;
						FX.Utils.forEach(b.options.linkFilter, function (a, b) {
							var d = c.getWidgetByName(b.rely, e);
							if (d) {
								var f = d.getLinkValue();
								return FX.Utils.isObjectEmpty(f) ? (i = !1, !1) : void g.push(c._createDataFilter(d, f, b.link))
							}
						}),
						i && (f[h] = g, b.reload(f))
					}
				}
			},
			_isSubformWidget: function (a) {
				return a.indexOf(".") > -1
			},
			_calFormula: function (a, b) {
				var c = this,
				d = a.split(/(\$[0-9a-zA-Z\._#@]+)/g),
				e = [];
				FX.Utils.forEach(d, function (a, d) {
					if (FX.Utils.startWith(d, "$_widget_") || FX.Utils.startWith(d, "$ext")) {
						var f = d.replace("$", "").split("#"),
						g = f[0],
						h = f[1];
						if (FX.Utils.isEmpty(h)) {
							var i;
							if (b)
								i = b[g];
							else {
								var j = c.getWidgetByName(g);
								FX.Utils.isArray(j) ? (i = [], FX.Utils.forEach(j, function (a, b) {
										i.push(b.getLinkValue())
									})) : j && (i = j.getLinkValue())
							}
							var k = JSON.stringify(i) + "";
							!isNaN(i) && i < 0 && (k = "(" + k + ")"),
							e.push(k)
						} else
							e.push('"' + d + '"')
					} else
						e.push(d)
				});
				var f;
				try {
					f = FX.Utils.evalFormula(e.join(""))
				} catch (a) {
					f = ""
				}
				return f
			},
			getWidgetByName: function (a, b) {
				var c = this.options;
				if (FX.Utils.isEmpty(a) || !c.resultWidgets)
					return null;
				var d;
				if (this._isSubformWidget(a)) {
					var e = c.resultWidgets[[a.split(".")[0]]];
					e && (d = e.getWidgetByName(a.split(".")[1], b))
				} else
					d = c.resultWidgets[a];
				return d
			},
			doSubmit: function () {
				var b = this,
				c = this.options;
				if (!this.ajaxLoading) {
					this.ajaxLoading = !0;
					var d = FX.Utils.createMask(this.element, {
							hasLoader: !0,
							isLight: !0
						}),
					e = a.extend({
							values: this.getValue()
						}, c.submitData);
					a.extend(e, {
						appId: c.appId,
						entryId: c.entryId,
						formId: c.entryId,
						checkRepeat: this.checkRepeat,
						hasResult: !0
					}),
					c.extParam && a.extend(e.values, {
						ext: {
							data: c.extParam,
							widgetType: "text"
						}
					}),
					FX.Utils.dataAjax({
						url: c.submitUrl,
						data: e
					}, function (a, d) {
						FX.STATIC.DATAID = null,
						FX.Utils.applyFunc(b, c.onSuccess, [a, e.flowAction, b.needPrint], !1) === !1 && FX.Msg.toast({
							type: "success",
							msg: ""
						})
					}, function (a, c) {
						var d = a.responseJSON || {},
						e = d.msg || "";
						4002 === d.code ? (FX.Msg.toast({
								type: "warning",
								msg: e
							}), d.meta && FX.Utils.forEach(d.meta.repeatFields, function (a, c) {
								var d = b.getWidgetByName(c);
								d && b.setErrorState(d, "")
							})) : FX.Msg.toast({
							type: "error",
							msg: e
						})
					}, function () {
						d.remove(),
						b.ajaxLoading = !1
					})
				}
			},
			doVerify: function () {
				var a = this,
				b = this.options,
				c = {
					result: !0
				};
				if (this.rely.checkAsyncState() || (c.result = !1, c.errMsg = ""), b.ignoreValidate)
					return c;
				var d = b.resultWidgets;
				for (var e in d) {
					var f = d[e];
					f && f.isVisible() && (this.clearErrorState(f), f.checkValidate() || (c.result = !1, this.setErrorState(f)))
				}
				return c.result && FX.Utils.forEach(b.validators, function (b, d) {
					var e = a._calFormula(d.formula);
					if (!e)
						return c.result = !1, c.errMsg = d.remind, !1
				}),
				c.result && this.flowComment && "save" !== b.submitData.flowAction && (c.result = this.flowComment.checkValidate(), c.result || (c.errMsg = "")),
				c
			},
			setErrorState: function (b, c) {
				var d = b.element.closest("li");
				if (d.addClass("error"), d.children(".error-info").length <= 0) {
					var e = "";
					c && (e = c),
					"regex" === b.getInvalidateType() && (e = " "),
					d.append(a('<div class="error-info"/>').text(e))
				}
			},
			clearErrorState: function (a) {
				a.setInvalidateType("blank");
				var b = a.element.closest("li");
				b.removeClass("error"),
				b.children(".error-info").remove()
			},
			doVerifyAndSubmit: function () {
				var a = this.doVerify();
				a.result ? this.doSubmit() : FX.Msg.toast({
					type: "warning",
					msg: a.errMsg ? a.errMsg : ""
				})
			},
			getValue: function () {
				var a = this.options,
				b = this,
				c = {},
				d = a.resultWidgets;
				this.checkRepeat = [];
				for (var e in d) {
					var f = d[e];
					if (f && FX.Utils.isValueWidget(f.getWidgetType())) {
						var g = f.getValue();
						if (f.options.noRepeat && !FX.Utils.isEmpty(g)) {
							var h = {};
							h[f.options.widgetName] = g,
							b.checkRepeat.push(h)
						}
						c[e] = {
							data: g,
							visible: f.isVisible()
						}
					}
				}
				return c.version = this.options.version,
				c
			},
			doResize: function (a) {
				FX.Form.superclass.doResize.apply(this, arguments);
				var b = this.options;
				b.height && (this.element.addClass("form-modal"), b.hasHeader && (this.$menu ? this.$wrapper.css({
							top: this.$header.outerHeight() + this.$menu.outerHeight()
						}) : this.$wrapper.css({
							top: this.$header.outerHeight()
						})), b.hasFooter && this.$wrapper.css({
						bottom: this.$footer.outerHeight()
					}))
			},
			reload: function (b) {
				this.options = a.extend(this.options, b),
				a(".widget-wrapper", this.element).remove(),
				a(".footer", this.element).remove(),
				this._initMain(),
				this.doResize()
			}
		}),
	a.shortcut("form", FX.Form)
}
(jQuery), function (a) {
	FX.FormData = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormData.superclass._defaultConfig.apply(), {
					baseCls: "fui-form-data",
					title: "",
					width: 780,
					header: null,
					hasHeader: !0,
					layout: null,
					data: null,
					flow: null,
					comments: null,
					isPrint: !1,
					hasFlowBtn: !1,
					hasPrintBtn: !1,
					hasEditBtn: !1,
					hasDeleteBtn: !1,
					hasRecoverBtn: !1,
					hasSwitchBtn: !1,
					dataIndex: 1,
					dataCount: 10,
					onEditData: null,
					onDeleteData: null,
					onRecoverData: null,
					onSwitchData: null,
					onClose: null,
					onFlowNodeClick: null,
					height: null,
					subItemWidth: 146,
					ignoreVisible: !0,
					hasCustomPrint: !1,
					authGroupId: null,
					optAuth: null
				})
			},
			_init: function () {
				FX.FormData.superclass._init.apply(this, arguments),
				this.$wrapper = a('<div class="widget-wrapper">').appendTo(this.element),
				this._createHeader(),
				this._createEditPane(),
				this._createDataWrapper(),
				this._createFlowComments(),
				this._createFooter()
			},
			_createHeader: function () {
				var b = this,
				c = this.options;
				if (c.hasHeader) {
					var d = a('<div class="preview-title-pane"/>').prependTo(this.element);
					c.hasFlowBtn && c.ignoreVisible ? (d.append('<div class="pane-menu-item active"></div>'), d.append('<div class="pane-menu-item"></div>'), this.$flowWrapper = a('<div class="widget-wrapper hide-right">').appendTo(this.element), a(".pane-menu-item", this.element).on("click", function (c) {
							var d = a(c.currentTarget);
							return d.hasClass("active") ? void c.preventDefault() : (a(".pane-menu-item").removeClass("active"), d.addClass("active"), b.$wrapper.toggleClass("hide-left"), b.$flowWrapper.toggleClass("hide-right"), b.$footer && b.$footer.toggleClass("x-ui-hidden"), void b._createFlowStatePane(b.$flowWrapper))
						})) : c.hasFlowBtn ? (d.append('<div class="preview-title left">' + c.title + "</div>"), d.append(a('<div class="flow-state flow-btn"><i class="icon-flow-state"/><span></span></div>').on("click", function () {
								new FX.FlowStatePane({
									renderEl: a('<div class="flow-info-pane flow-state"/>').appendTo(b.element),
									appId: c.appId,
									entryId: c.entryId,
									flow: c.flow
								})
							}))) : d.append('<div class="preview-title">' + c.title + "</div>"),
					c.onClose && a('<i class="icon-close-large form-data-exit-icon">').click(function () {
						FX.Utils.applyFunc(b, c.onClose, [b.stateChanged], !1)
					}).prependTo(d),
					c.flow && FX.Utils.isArray(c.flow.flowNodes) && c.flow.flowNodes.length > 1 && (this.$menu = a('<div class="flow-menu"/>').appendTo(this.$wrapper), this.flowMenu = new FX.Navigator({
								renderEl: this.$menu,
								items: c.flow.flowNodes,
								currentMenuId: c.flow.flowId,
								menuKey: "flowId",
								onMenuClick: function (a) {
									this.setEnable(!1),
									FX.Utils.applyFunc(b, c.onFlowNodeClick, [c.entryId, c.flow.dataId, a], !1)
								}
							}))
				}
			},
			_createFooter: function () {
				var b = this,
				c = this.options;
				c.hasFooter && c.flow && c.flow.hasBtn && (this.$footer = a('<div class="footer"/>').appendTo(this.element), new FX.FlowBtn({
						renderEl: a('<div class="btn-pane"/>').appendTo(this.$footer),
						flow: c.flow,
						onSubmit: function (a) {
							return "print" === a ? void b._doPrint() : void FX.Utils.dataAjax({
								url: "/data/update",
								data: {
									appId: FX.STATIC.APPID,
									entryId: c.entryId,
									formId: c.entryId,
									dataId: c.flow.dataId,
									flowId: c.flow.flowId,
									flowAction: a
								}
							}, function (a) {
								FX.Utils.applyFunc(b, c.onClose, [!0], !1)
							})
						}
					}))
			},
			_createDataWrapper: function () {
				var b = this.options,
				c = this,
				d = a("<ul/>").appendTo(a('<div class="data-wrapper"/>').appendTo(this.$wrapper));
				this.concatMap = {},
				this.header = [],
				FX.Utils.forEach(b.header, function (e, f) {
					if (f.widget && (f = FX.Utils.getFieldAttr(f)), f && "flowVer" !== f.name) {
						var g = f.tag || f.name,
						h = b.data[g],
						i = f.text;
						if (b.ignoreVisible || c._dealWidgetVisible(f, h)) {
							c.header.push(f);
							var j = a('<li class="widget-data-view"/>').appendTo(d);
							c._createItem(f, i, h, j, !0)
						}
					}
				})
			},
			_createFlowComments: function () {
				var a = this.options,
				b = this;
				if (a.hasFlowBtn || a.flow)
					return a.comments ? void this._createFlowCommentsPane(a.comments) : void FX.Utils.dataAjax({
						url: "/data/log_flow",
						data: {
							entryId: a.entryId,
							dataId: a.data._id
						}
					}, function (c) {
						a.comments = c.logs,
						b._createFlowCommentsPane(a.comments)
					})
			},
			_createFlowCommentsPane: function (b) {
				var c = this.options,
				d = !1;
				FX.Utils.forEach(b, function (a, b) {
					if (b.comment)
						return d = !0, !1
				}),
				d && new FX.FlowCommentPane({
					renderEl: a('<div class="flow-comment"/>').appendTo(this.$wrapper.children(".data-wrapper")),
					appId: FX.STATIC.APPID,
					entryId: c.entryId,
					comments: b,
					isPrint: !0
				})
			},
			_dealWidgetVisible: function (a, b) {
				var c = this,
				d = this.options,
				e = {};
				return FX.Utils.forEach(a.items, function (a, d) {
					d.widgetsMap && (e[d.value] = !0, d.value == b || d.isOther && b && !e[b] ? FX.Utils.forEach(d.widgetsMap, function (a, b) {
							c.concatMap[b] = !0
						}) : FX.Utils.forEach(d.widgetsMap, function (a, b) {
							c.concatMap[b] || (c.concatMap[b] = !1)
						}))
				}),
				this.concatMap[a.name] === !0 || (d.optAuth && (a.visible = d.optAuth[a.name] && d.optAuth[a.name].visible || !1), a.visible !== !1 && this.concatMap[a.name] !== !1)
			},
			_isEditable: function () {
				var a = this.options,
				b = a.hasEditBtn || a.hasDeleteBtn;
				if (a.data && a.data._id) {
					var c = a.data._id;
					return b && c.toString().substring(0, 1) !== FX.DATA_PREFIX.Aggregate
				}
				return !1
			},
			_createEditPane: function () {
				var b = this,
				c = this.options;
				if (this._isEditable() || c.hasPrintBtn || c.hasRecoverBtn || c.hasSwitchBtn) {
					var d = a('<div class="preview-edit-pane"/>').appendTo(this.$wrapper);
					if (this.$editPane = a('<div class="edit-pane"/>').appendTo(d), this._isEditable() && c.hasDeleteBtn && a('<a class="delete-btn"/>').append(a('<i class="icon-trasho">')).append(a("<span/>").text(" ")).click(function () {
							FX.Utils.applyFunc(b, c.onDeleteData, [], !1)
						}).appendTo(this.$editPane), this._isEditable() && c.hasEditBtn && a('<a class="edit-btn"/>').append(a('<i class="icon-flow-edit">')).append(a("<span/>").text("")).click(function () {
							FX.Utils.applyFunc(b, c.onEditData, [], !1)
						}).appendTo(this.$editPane), c.hasPrintBtn && a('<a class="print-btn"><i class="icon-print"></i><span></span></a>').click(function () {
							b._doPrint()
						}).appendTo(this.$editPane), c.hasRecoverBtn) {
						0 === d.length && (d = a('<div class="preview-edit-pane"/>').appendTo(this.$wrapper));
						var e = a('<div class="edit-pane"/>').appendTo(d);
						e.append('<a class="style-red"><i class="icon-trasho style-red"></i><span> </span></a>'),
						e.append('<a ><i class="icon-recover"></i><span></span></a>'),
						a("a", e).on("click", function (d) {
							var e = !a(d.currentTarget).hasClass("style-red");
							FX.Utils.applyFunc(b, c.onRecoverData, [c.data._id, e], !1)
						})
					}
					c.hasSwitchBtn && this._initSwitchBtn(d)
				}
			},
			_initSwitchBtn: function (b) {
				var c = this,
				d = this.options;
				this.dataIndex = d.dataIndex;
				var e = a('<div class="switch-pane"><div class="switch-btn prev"><i class="icon-angleleft"/></div><div class="switch-num">' + d.dataIndex + "/" + d.dataCount + '</div><div class="switch-btn next"><i class="icon-angleright"/></div></div>').appendTo(b);
				d.dataIndex <= 1 && a(".prev", e).addClass("disabled"),
				d.dataIndex >= d.dataCount && a(".next", e).addClass("disabled"),
				a(".switch-btn", e).hover(function (b) {
					var c = a(b.target).closest(".switch-btn");
					if (!c.hasClass("disabled")) {
						var d = c.hasClass("prev"),
						e = "";
						d && (e = ""),
						FX.UI.showPopover({
							position: "bottomLeft",
							anchor: c,
							content: a("<span/>").text(e),
							type: "dark",
							animation: !1
						})
					}
				}, function () {
					FX.UI.closePopover()
				}),
				e.click(function (b) {
					var d = a(b.target).closest(".switch-btn");
					if (d.length) {
						var e = d.hasClass("prev"),
						f = e ? c.dataIndex - 1 : c.dataIndex + 1;
						c._switchData(f)
					}
				}),
				a(document).one("keydown.ctrl_left keydown.meta_left", function () {
					c._switchData(c.dataIndex - 1, !0)
				}),
				a(document).one("keydown.ctrl_right keydown.meta_right", function () {
					c._switchData(c.dataIndex + 1, !0)
				}),
				a(document).one("keydown.left", function () {
					c._switchData(c.dataIndex - 1, !1)
				}),
				a(document).one("keydown.right", function () {
					c._switchData(c.dataIndex + 1, !1)
				})
			},
			_showSwitchTip: function (b, c) {
				var d = this.options;
				a(".x-window-mask", this.element).remove();
				var e = FX.Utils.createMask(this.element),
				f = c ? "" : "",
				g = "";
				return b <= 0 ? g = "" : b > d.dataCount && (g = ""),
				FX.Utils.isEmpty(g) ? this.dataIndex < b ? a('<div class="switch-tip"><span>' + f + '</span><i class="next icon-arrow-right"/></div>').appendTo(e) : a('<div class="switch-tip"><i class="prev icon-arrow-left"/><span>' + f + "</span></div>").appendTo(e) : a('<div class="switch-tip widen"><span>' + g + "</span></div>").appendTo(e),
				e
			},
			_switchData: function (a, b) {
				var c = this,
				d = this.options;
				if (!b || d.hasEditBtn) {
					FX.UI.closePopover();
					var e = this._showSwitchTip(a, b);
					c.switchinterval && clearTimeout(c.switchinterval),
					c.switchinterval = setTimeout(function () {
							e.fadeOut(300, function () {
								FX.Utils.applyFunc(c, d.onSwitchData, [a, b], !1)
							})
						}, 500),
					a < 1 || a > d.dataCount || (this.dataIndex = a)
				}
			},
			_getPrintData: function () {
				var b = this,
				c = this.options,
				d = {};
				FX.Utils.forEach(c.fields, function (a, b) {
					b.tag && b.name && (d[b.tag] = b.name)
				});
				var e = {};
				FX.Utils.forEach(this.header, function (a, c) {
					c.widget && (c = FX.Utils.getFieldAttr(c)),
					c && b._dealPrintField(c, e, d)
				});
				var f = {};
				FX.Utils.forEach(c.data, function (c, g) {
					d[c] && (c = d[c]),
					a.extend(f, b._dealPrintData(c, g, e))
				});
				var g = [];
				return FX.Utils.forEach(c.comments, function (a, b) {
					FX.Utils.isEmpty(b.comment) || g.push(b.flowName + " " + b.operator + "" + b.comment + "(" + FX.Utils.date2Str(new Date(b.createTime), "yyyy-MM-dd HH:mm") + ")")
				}),
				a.extend(f, {
					flow_comment: g.join("\n")
				}),
				f
			},
			_dealPrintField: function (a, b, c) {
				var d = this,
				e = a.name;
				switch (a.tag && (e = c[a.tag]), b[e] = a, a.type) {
				case "subform":
					FX.Utils.forEach(a.items, function (a, c) {
						d._dealPrintField(c, b)
					});
					break;
				case "linkdata":
					FX.Utils.forEach(a.linkFields, function (a, c) {
						d._dealPrintField(c, b)
					})
				}
			},
			_dealPrintData: function (a, b, c) {
				var d = this,
				e = {};
				if (!c[a])
					return e;
				var f = c[a].type;
				switch (f) {
				case "subform":
					var g = {};
					FX.Utils.forEach(b, function (b, e) {
						FX.Utils.forEach(e, function (b, e) {
							c[b] && FX.Utils.forEach(d._dealPrintData(b, e, c), function (b, c) {
								var d = [a, b].join(".");
								g[d] ? g[d].push(c) : g[d] = [c]
							})
						})
					}),
					FX.Utils.forEach(g, function (a, b) {
						e[a] = b
					});
					break;
				case "linkdata":
					FX.Utils.forEach(c[a].linkFields, function (f, g) {
						var h = g.name;
						c[h] && FX.Utils.forEach(d._dealPrintData(h, b[h], c), function (b, c) {
							e[[a, b].join("->")] = c
						})
					});
					break;
				default:
					e[a] = d._formatData(c[a], b)
				}
				return e
			},
			_doPrint: function () {
				var b = this,
				c = this.options;
				if (!this.isPrinting) {
					if (!c.hasCustomPrint)
						return void this._doSystemPrint();
					var d = FX.Utils.isSupportPdf();
					this.isPrinting = !0,
					FX.Utils.dataAjax({
						url: "/data/print",
						data: {
							data: this._getPrintData(),
							formId: c.entryId,
							isAttachment: !d,
							groupId: c.authGroupId,
							flowId: c.flow && c.flow.flowId,
							flowVer: c.flow && c.flow.version,
							dataId: c.data._id
						}
					}, function (c) {
						if ("system" === c.printType)
							b._doSystemPrint();
						else if ("template" === c.printType)
							if (d) {
								var e = new FX.Slider({
										title: "PDF",
										content: a('<embed src="' + c.url + '" width="100%" height="100%" style="position: absolute" type="application/pdf"/>')
									});
								e.show()
							} else
								FX.Utils.redirectTo(c.url)
					}, null, function () {
						b.isPrinting = !1
					})
				}
			},
			_doSystemPrint: function () {
				var a = this.options,
				b = new FX.FormPrint({
						title: a.title,
						header: this.header,
						comments: a.comments,
						layout: a.layout,
						data: a.data
					});
				FX.Utils.doPrint(b.element)
			},
			_createFlowStatePane: function (a) {
				var b = this.options,
				c = this;
				this.flowStatePane || (this.flowStatePane = new FX.FlowStatePane({
							renderEl: a,
							appId: FX.STATIC.APPID,
							entryId: b.entryId,
							dataId: b.data._id,
							flow: null,
							hasTransfer: b.ignoreVisible,
							hasTitle: !1,
							isAnimate: !1,
							onChangeState: function () {
								c.stateChanged = !0
							}
						}))
			},
			_getLinkData: function (b, c, d) {
				if (b.linkForm && c && c.id) {
					var e = this;
					this.nameMap || (this.nameMap = {});
					var f = {
						formId: c.entryId || b.linkForm,
						linkId: c.id
					},
					g = c.appId || b.refAppId || b.appId;
					g && g !== FX.STATIC.APPID && (f.refAppId = g),
					FX.Utils.dataAjax({
						url: "/data/read_link",
						data: f
					}, function (b, f) {
						a.extend(e.nameMap, b.nameMap),
						a.extend(c, b.data),
						d && d(c)
					})
				}
			},
			_formatData: function (a, b) {
				if (!a)
					return b;
				var c = a.cellFmt && a.cellFmt.data || a.format;
				switch (a.type) {
				case "datetime":
					c = c || "yyyy-MM-dd",
					c && b && (b = FX.Utils.date2Str(new Date(b), c));
					break;
				case "address":
				case "location":
					c = c ? c : "pcda",
					b = FX.Utils.address2Str(b, "", c);
					break;
				case "number":
				case "formula":
					c && (b = FX.Utils.num2Str(b, c));
					break;
				default:
					b = FX.Utils.isNull(b) ? "" : b
				}
				return b
			},
			_dealWidgetData: function (b, c, d) {
				var e = this,
				f = this.options,
				g = a('<div class="widget-data"/>').appendTo(d);
				switch (c = this._formatData(b, c), b.type) {
				case "image":
				case "upload":
					new FX.FileUpload({
						mode: "preview",
						renderEl: g,
						files: c,
						enable: !1
					});
					break;
				case "subform":
					var h = [];
					FX.Utils.forEach(b.items, function (a, b) {
						FX.Utils.isValueWidget(b.type) && h.push(b)
					}),
					this._createSubformItem(h, c, g);
					break;
				case "combocheck":
				case "checkboxgroup":
					var i = a("<ul/>").appendTo(g);
					FX.Utils.forEach(c, function (b, c) {
						i.append(a("<li/>").text(c))
					});
					break;
				case "textarea":
					c && g.append(a("<pre/>").text(c));
					break;
				case "text":
					if (c = FX.Utils.isNull(c) ? "" : c, b.regex && new RegExp(b.regex).test(c)) {
						var j = FX.CONST.TEXT_TYPE_REGEXP;
						if (b.regex === j.email) {
							a("<a/>").attr("href", "mailto:" + c).text(c).appendTo(g);
							break
						}
					}
					g.text(c);
					break;
				case "flowState":
					switch (c) {
					case FX.CONST.WORKFLOW.FLOWSTATE.INPROCESS:
						g.text("");
						break;
					case FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE:
						g.text("")
					}
					break;
				case "chargers":
					var k = {},
					l = {};
					FX.Utils.forEach(c, function (a, b) {
						b.flowName && (k[b.flowName] || (k[b.flowName] = !0), l[b.userNickname] || (l[b.userNickname] = !0))
					});
					var m = [];
					"node" === b.show ? FX.Utils.forEach(k, function (a) {
						m.push(a)
					}) : FX.Utils.forEach(l, function (a) {
						m.push(a)
					}),
					g.text(m);
					break;
				case "user":
				case "dept":
					this._getMemberName(c, function () {
						var d = c;
						/[0-9a-f]{24}/.test(c) ? d = e.nameMap[c] : c.name && (d = c.name);
						var h = {};
						h[b.name] = d,
						a.extend(f.data, h),
						g.text(d)
					});
					break;
				case "usergroup":
				case "deptgroup":
					this._getMemberName(c, function () {
						var d = [];
						FX.Utils.forEach(c, function (a, b) {
							/[0-9a-f]{24}/.test(b) ? b = e.nameMap[b] : b.name && (b = b.name),
							d.push(b)
						});
						var h = {};
						h[b.name] = d,
						a.extend(f.data, h),
						g.text(d)
					});
					break;
				default:
					c = FX.Utils.isNull(c) ? "" : c,
					g.text(c)
				}
			},
			_getMemberName: function (b, c) {
				var d = this,
				e = [];
				if (this.nameMap || (this.nameMap = {}), !FX.Utils.isNull(b))
					return FX.Utils.isArray(b) || (b = [b]), FX.Utils.forEach(b, function (a, b) {
						!d.nameMap[b] && /[0-9a-f]{24}/.test(b) && e.push(b)
					}), FX.Utils.isObjectEmpty(e) ? c() : void FX.Utils.ajax({
						url: "/corp/list_member_name",
						data: {
							members: e
						}
					}, function (b, e) {
						var f = {};
						FX.Utils.forEach(b.users, function (a, b) {
							f[b._id] = b.nickname
						}),
						FX.Utils.forEach(b.departments, function (a, b) {
							f[b._id] = b.name
						}),
						a.extend(d.nameMap, f),
						c()
					})
			},
			_dealLinkField: function (b, c) {
				var d = this,
				e = c[b.name];
				switch (b.type) {
				case "subform":
					FX.Utils.forEach(b.items, function (b, c) {
						a.extend(c, FX.Utils.getFieldAttr(c))
					});
					break;
				case "user":
					c[b.name] = this.nameMap[e];
					break;
				case "usergroup":
					FX.Utils.forEach(e, function (a, b) {
						e[a] = d.nameMap[b]
					})
				}
			},
			_isItemValid: function (a) {
				switch (a.type) {
				case "formula":
				case "flowState":
				case "chargers":
					return !0;
				default:
					return FX.Utils.isValueWidget(a.type) || a.isJoined || /_join_/.test(a.name)
				}
			},
			_createItem: function (b, c, d, e, f) {
				var g = this;
				this.options;
				if (this._isItemValid(b)) {
					if (d && "linkdata" === b.type) {
						var h = a("<ul/>").appendTo(e);
						return this._getLinkData(b, d, function (c) {
							FX.Utils.forEach(b.linkFields, function (b, d) {
								var e = a("<li/>").appendTo(h);
								g._dealLinkField(d, c),
								g._createItem(d, d.text, c[d.name], e, !0)
							})
						}),
						e
					}
					if ("chargers" === b.type && !b.show) {
						var i = a("<ul/>").appendTo(e);
						return g._createItem(a.extend({
								show: "node"
							}, b), "", d, a("<li/>").appendTo(i), !0),
						g._createItem(a.extend({
								show: "user"
							}, b), "", d, a("<li/>").appendTo(i), !0),
						e
					}
					return c && a('<div class="widget-label"/>').appendTo(e).append(a('<span class="label-title"/>').text(c)),
					FX.Utils.isNull(d) && !f || this._dealWidgetData(b, d, e),
					e
				}
			},
			_createSubformItem: function (b, c, d) {
				var e = this,
				f = (this.options, a('<table class="widget-subform"/>').appendTo(d)),
				g = a("<tr/>").appendTo(a('<thead class="widget-label"/>').appendTo(f));
				FX.Utils.forEach(b, function (b, c) {
					if (c.visible !== !1)
						if ("linkdata" === c.type)
							FX.Utils.forEach(c.linkFields, function (b, c) {
								var d = a('<td class="widget-item"/>').appendTo(g);
								e._createItem(c, c.text, null, d)
							});
						else {
							var d = a('<td class="widget-item"/>').appendTo(g);
							e._createItem(c, c.text, null, d)
						}
				});
				var h = a('<tbody class="widget-data"/>').appendTo(f);
				FX.Utils.forEach(c, function (c, d) {
					var f = a("<tr/>").appendTo(h);
					FX.Utils.forEach(b, function (b, c) {
						if (c.visible !== !1)
							if ("linkdata" === c.type) {
								var g = {};
								FX.Utils.forEach(c.linkFields, function (b, c) {
									g[c.name] = a('<td class="widget-item"/>').appendTo(f)
								}),
								e._getLinkData(c, d[c.name], function (b) {
									a.extend(d, b),
									FX.Utils.forEach(c.linkFields, function (a, c) {
										e._dealWidgetData(c, b[c.name], g[c.name])
									})
								})
							} else {
								var h = a('<td class="widget-item"/>').appendTo(f);
								e._dealWidgetData(c, d[c.name], h)
							}
					})
				})
			},
			doResize: function () {
				FX.FormData.superclass.doResize.apply(this, arguments);
				var a = this.options;
				FX.Utils.isEmpty(a.height) ? this.element.addClass("relative-height") : a.hasFooter && this.$footer && this.$wrapper.css({
					bottom: this.$footer.outerHeight()
				})
			}
		}),
	a.shortcut("formdata", FX.FormData)
}
(jQuery), function (a) {
	FX.Report = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Report.superclass._defaultConfig.apply(), {
					baseCls: "fui-report",
					appId: null,
					entryId: null,
					supportExport: !0,
					hasLazyLoad: !1,
					scrollView: null,
					margin: 30
				})
			},
			_init: function () {
				FX.Report.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				FX.STATIC.ENTRYID = b.entryId,
				b.resultWidgets = {},
				this.lastBottomHeight = 0;
				var d = this.element.width() - b.margin;
				if (this.$content = a('<div class="content"/>').width(d).appendTo(this.element), b.parameter) {
					var e = a('<div class="parameter-content"/>').appendTo(this.$content);
					this.parameter = new FX.Parameter(a.extend({
								renderEl: a("<div/>").appendTo(e),
								onStopEdit: function (a) {
									c._findWidgetByForm(a, function (a) {
										a.reload()
									})
								}
							}, b.parameter))
				}
				this.$widgetWrapper = a('<div class="report-content"/>').appendTo(this.$content);
				var f = 1;
				b.layout && b.layout.width && (f = d / b.layout.width),
				FX.Utils.forEach(b.items, function (d, e) {
					var g = e.y / e.x,
					h = e.height / e.width,
					i = e.width,
					j = e.x;
					e.width = Math.ceil(i * f),
					e.height = Math.ceil(i * f * h),
					e.x = Math.ceil(j * f),
					e.y = Math.ceil(j * f * g),
					e.renderEl = a("<div/>").css({
							position: "absolute",
							left: e.x,
							top: e.y
						}).appendTo(c.$widgetWrapper),
					c.lastBottomHeight = Math.max(c.lastBottomHeight, e.height + e.y),
					e.onAfterHeadCreate = function (a) {
						this.createHeadTools()
					},
					e.onItemClick = function (a) {
						FX.Utils.forEach(this.options.linkWidgets, function (b, d) {
							var e = c.getWidgetByName(d);
							e && e.reload(a)
						})
					},
					e.onDataFilter = function () {
						return c.parameter ? c.parameter.getValue() : null
					},
					b.supportExport || (e.exportable = !1),
					e.allowDataLoad = !b.hasLazyLoad;
					var k = FX.createWidget(e);
					b.resultWidgets[e.widgetName] = k
				}),
				this._bindLazyLoadEvt()
			},
			_bindLazyLoadEvt: function () {
				var b = this.options,
				c = this;
				if (b.hasLazyLoad) {
					this.doLazyLoad();
					var d = this.element;
					b.scrollView && (d = a(b.scrollView)),
					d.unbind("scroll.lazy"),
					d.bind("scroll.lazy", function () {
						c.doLazyLoad()
					}),
					a(window).unbind("resize.report_lazy_load"),
					a(window).bind("resize.report_lazy_load", function () {
						c.lazyTimer && clearTimeout(c.lazyTimer),
						c.lazyTimer = setTimeout(function () {
								c && c.element.closest("body").length > 0 ? c.doLazyLoad() : a(window).unbind("resize.report_lazy_load")
							}, 500)
					})
				}
			},
			doLazyLoad: function () {
				var b = this.options;
				b.hasLazyLoad && FX.Utils.forEach(b.resultWidgets, function (b, c) {
					if (c && !c.isAllowDataLoad()) {
						var d = a(c.element).offset().top;
						d <= document.body.clientHeight && (c.setAllowDataLoad(!0), c.reload())
					}
				})
			},
			_findWidgetByForm: function (a, b) {
				if (!FX.Utils.isEmpty(a))
					for (var c in this.options.resultWidgets) {
						var d = this.options.resultWidgets[c];
						d.options.forms.indexOf(a) > -1 && b(d)
					}
			},
			doResize: function (a) {
				FX.Report.superclass.doResize.apply(this, arguments);
				var b = this.options;
				FX.Utils.isEmpty(b.height) && this.$widgetWrapper && this.$widgetWrapper.css({
					height: this.lastBottomHeight + 10
				})
			}
		}),
	a.shortcut("report", FX.Report)
}
(jQuery), function (a) {
	FX.DateLimit = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DateLimit.superclass._defaultConfig.apply(), {
					baseCls: "fui_date_limit",
					format: "yyyy-MM-dd",
					wrap: !1,
					width4date: 150
				})
			},
			_init: function () {
				FX.DateLimit.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.startDate = FX.createWidget({
						type: "datetime",
						renderEl: a('<div class="limit-item"/>').appendTo(this.element),
						format: b.format,
						onStopEdit: function () {
							FX.Utils.applyFunc(c, b.onStopEdit, arguments, !1)
						},
						value: null,
						width: b.width4date
					}),
				this.endDate = FX.createWidget({
						type: "datetime",
						renderEl: a('<div class="limit-item"/>').appendTo(this.element),
						format: b.format,
						onStopEdit: function () {
							FX.Utils.applyFunc(c, b.onStopEdit, arguments, !1)
						},
						value: null,
						width: b.width4date
					}),
				b.wrap ? (a('<div class="limit-wrap"/>').append(a('<div class="limit-item item-title"/>').text("")).append(this.startDate.element).appendTo(this.element), a('<div class="limit-wrap"/>').append(a('<div class="limit-item item-title"/>').text("")).append(this.endDate.element).appendTo(this.element)) : a('<div class="limit-item limit-to"/>').text("~").insertBefore(this.endDate.element)
			},
			setValue: function (a) {
				a ? (FX.Utils.isNull(a.max) ? this.endDate.setValue(null) : this.endDate.setValue(a.max), FX.Utils.isNull(a.min) ? this.startDate.setValue(null) : this.startDate.setValue(a.min)) : (this.endDate.setValue(null), this.startDate.setValue(null))
			},
			getValue: function () {
				var a = this.startDate.getValue(),
				b = this.endDate.getValue(),
				c = {};
				if (!FX.Utils.isNull(a)) {
					var d = new Date(a);
					d.setHours(0, 0, 0, 0),
					c.min = d.getTime()
				}
				if (!FX.Utils.isNull(b)) {
					var e = new Date(b);
					e.setHours(23, 59, 59, 999),
					c.max = e.getTime()
				}
				return c
			}
		}),
	a.shortcut("datelimit", FX.DateLimit)
}
(jQuery), function (a) {
	FX.NumberLimit = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.NumberLimit.superclass._defaultConfig.apply(), {
					baseCls: "fui_number_limit",
					width4number: 150
				})
			},
			_init: function () {
				FX.NumberLimit.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.minNumber = FX.createWidget({
						type: "number",
						renderEl: a('<div class="limit-item"/>').appendTo(this.element),
						allowDecimals: !0,
						onStopEdit: function (a, d) {
							FX.Utils.applyFunc(c, b.onStopEdit, [a, d], !1)
						},
						width: b.width4number
					}),
				a('<div class="limit-item limit-to"/>').text("~").appendTo(this.element),
				this.maxNumber = FX.createWidget({
						type: "number",
						renderEl: a('<div class="limit-item"/>').appendTo(this.element),
						allowDecimals: !0,
						onStopEdit: function (a, d) {
							FX.Utils.applyFunc(c, b.onStopEdit, [a, d], !1)
						},
						width: b.width4number
					})
			},
			checkValidate: function () {
				return this.maxNumber.checkValidate() && this.minNumber.checkValidate()
			},
			setValue: function (a) {
				a ? (FX.Utils.isNull(a.max) ? this.maxNumber.setValue(null) : this.maxNumber.setValue(a.max), FX.Utils.isNull(a.min) ? this.minNumber.setValue(null) : this.minNumber.setValue(a.min)) : (this.maxNumber.setValue(null), this.minNumber.setValue(null))
			},
			getValue: function () {
				var a = this.maxNumber.getValue(),
				b = this.minNumber.getValue(),
				c = {};
				return FX.Utils.isNull(b) || (c.min = b),
				FX.Utils.isNull(a) || (c.max = a),
				c
			}
		}),
	a.shortcut("numberlimit", FX.NumberLimit)
}
(jQuery), function ($) {
	FX.DomTree = FX.extend(FX.Widget, {
			setting: {
				treeId: "tree",
				treeObj: null,
				view: {
					addDiyDom: null,
					autoCancelSelected: !0,
					dblClickExpand: !1,
					expandSpeed: "fast",
					fontCss: {},
					nameIsHTML: !1,
					selectedMulti: !1,
					showIcon: !1,
					showLine: !1,
					showTitle: !0,
					txtSelectedEnable: !1
				},
				data: {
					key: {
						children: "children",
						name: "name",
						title: "",
						url: "url",
						checked: "checked"
					},
					simpleData: {
						enable: !1,
						idKey: "id",
						pIdKey: "pId",
						rootPId: null
					},
					keep: {
						parent: !1,
						leaf: !1
					}
				},
				async: {
					enable: !1,
					contentType: "application/x-www-form-urlencoded",
					type: "post",
					dataType: "text",
					url: "",
					autoParam: [],
					otherParam: [],
					dataFilter: null
				},
				callback: {
					beforeAsync: null,
					beforeNodeCreate: null,
					beforeClick: null,
					beforeDblClick: null,
					beforeRightClick: null,
					beforeMouseDown: null,
					beforeMouseUp: null,
					beforeExpand: null,
					beforeCollapse: null,
					beforeRemove: null,
					beforeCheck: null,
					onAsyncError: null,
					onAsyncSuccess: null,
					onNodeCreated: null,
					onClick: null,
					onDblClick: null,
					onRightClick: null,
					onMouseDown: null,
					onMouseUp: null,
					onExpand: null,
					onCollapse: null,
					onRemove: null,
					onCheck: null
				},
				consts: {
					className: {
						BUTTON: "button",
						LEVEL: "level",
						ICO_LOADING: "ico_loading",
						SWITCH: "switch"
					},
					event: {
						NODECREATED: "tree_nodeCreated",
						CLICK: "tree_click",
						EXPAND: "tree_expand",
						COLLAPSE: "tree_collapse",
						ASYNC_SUCCESS: "tree_async_success",
						ASYNC_ERROR: "tree_async_error",
						CHECK: "tree_check"
					},
					id: {
						A: "_a",
						ICON: "_ico",
						SPAN: "_span",
						SWITCH: "_switch",
						UL: "_ul",
						CHECK: "_check"
					},
					line: {
						ROOT: "root",
						ROOTS: "roots",
						CENTER: "center",
						BOTTOM: "bottom",
						NOLINE: "noline",
						LINE: "line"
					},
					folder: {
						OPEN: "open",
						CLOSE: "close",
						DOCU: "docu"
					},
					node: {
						CURSELECTED: "curSelectedNode"
					},
					checkbox: {
						STYLE: "x-check",
						DEFAULT: "x-tree-check",
						DISABLED: "disable",
						FALSE: "",
						TRUE: "select",
						FULL: "full",
						PART: "part",
						FOCUS: "focus"
					},
					radio: {
						STYLE: "radio",
						TYPE_ALL: "all",
						TYPE_LEVEL: "level"
					}
				},
				check: {
					enable: !1,
					autoCheckTrigger: !1,
					chkStyle: "x-check",
					nocheckInherit: !1,
					chkDisabledInherit: !1,
					radioType: "level",
					chkboxType: {
						Y: "ps",
						N: "ps"
					}
				}
			},
			getDOMBySelector: function (a, b, c) {
				return b && "string" != typeof b && (c = b, b = ""),
				"string" == typeof a ? $(a, c ? c.treeObj.get(0).ownerDocument : null) : $("#" + a.tId + b, c ? c.treeObj : null)
			},
			makeUlLineClass: function (a, b) {
				return a.view.showLine && !b.isLastNode ? a.consts.line.LINE : ""
			},
			makeUlHtml: function (a, b, c, d) {
				c.push("<ul id='", b.tId, a.consts.id.UL, "' class='", a.consts.className.LEVEL, b.level, " ", this.makeUlLineClass(a, b), "' style='display:", b.open ? "block" : "none", "'>"),
				c.push(d),
				c.push("</ul>")
			},
			appendParentULDom: function (a, b) {
				var c = [],
				d = this.getDOMBySelector(b, a);
				!d.get(0) && b.parentTId && (this.appendParentULDom(a, b.getParentNode()), d = this.getDOMBySelector(b, a));
				var e = this.getDOMBySelector(b, a.consts.id.UL, a);
				e.get(0) && e.remove();
				var f = a.data.key.children,
				g = this.appendNodes(a, b.level + 1, b[f], b, !1, !0);
				this.makeUlHtml(a, b, c, g.join("")),
				d.append(c.join(""))
			},
			makeNodeIcoStyle: function (a, b) {
				var c = [];
				if (!b.isAjaxing) {
					var d = b.isParent && b.iconOpen && b.iconClose ? b.open ? b.iconOpen : b.iconClose : b.icon;
					d && c.push("background:url(", d, ") 0 0 no-repeat;"),
					a.view.showIcon !== !1 && FX.Utils.applyFunc(this, a.view.showIcon, [b], !0) || c.push("width:0px;height:0px;")
				}
				return c.join("")
			},
			makeNodeLineClass: function (a, b) {
				var c = [],
				d = a.consts;
				return a.view.showLine ? 0 === b.level && b.isFirstNode && b.isLastNode ? c.push(d.line.ROOT) : 0 === b.level && b.isFirstNode ? c.push(d.line.ROOTS) : b.isLastNode ? c.push(d.line.BOTTOM) : c.push(d.line.CENTER) : c.push(d.line.NOLINE),
				b.isParent ? c.push(b.open ? a.consts.folder.OPEN : a.consts.folder.CLOSE) : c.push(d.folder.DOCU),
				this.makeNodeLineClassEx(a, b) + c.join("_")
			},
			makeNodeLineClassEx: function (a, b) {
				return a.consts.className.BUTTON + " " + a.consts.className.LEVEL + b.level + " " + a.consts.className.SWITCH + " x-iconfont "
			},
			setNodeLineIcos: function (a, b) {
				if (b) {
					var c = this.getDOMBySelector(b, a.consts.id.SWITCH, a),
					d = this.getDOMBySelector(b, a.consts.id.UL, a),
					e = this.getDOMBySelector(b, a.consts.id.ICON, a),
					f = this.makeUlLineClass(a, b);
					0 === f.length ? d.removeClass(a.consts.line.LINE) : d.addClass(f),
					c.attr("class", this.makeNodeLineClass(a, b)),
					b.isParent ? c.removeAttr("disabled") : c.attr("disabled", "disabled"),
					e.removeAttr("style"),
					e.attr("style", this.makeNodeIcoStyle(a, b)),
					e.attr("class", this.makeNodeIcoClass(a, b))
				}
			},
			cancelPreSelectedNode: function (a, b) {
				for (var c = this.root.curSelectedList, d = 0, e = c.length - 1; e >= d; e--)
					if ((!b || b === c[e]) && (this.getDOMBySelector(c[e], a.consts.id.A, a).removeClass(a.consts.node.CURSELECTED), b)) {
						this.removeSelectedNode(a, b);
						break
					}
				b || (this.root.curSelectedList = [])
			},
			getNodeMainDom: function (a) {
				return $(a).parent("li").get(0) || $(a).parentsUntil("li").parent().get(0)
			},
			getMDom: function (a, b, c) {
				if (!b)
					return null;
				for (; b && b.id !== a.treeId; ) {
					for (var d = 0, e = c.length; b.tagName && d < e; d++)
						if (b.tagName == c[d].tagName && null !== b.getAttribute(c[d].attrName))
							return b;
					b = b.parentNode
				}
				return null
			},
			getNodeName: function (a, b) {
				var c = a.data.key.name;
				return "" + b[c]
			},
			getNodeTitle: function (a, b) {
				var c = "" === a.data.key.title ? a.data.key.name : a.data.key.title;
				return "" + b[c]
			},
			makeDOMNodeIcon: function (a, b, c) {
				var d = this.getNodeName(b, c),
				e = b.view.nameIsHTML ? d : d.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
				a.push("<i id='", c.tId, b.consts.id.ICON, "' title='' treeNode", b.consts.id.ICON, " class='", this.makeNodeIcoClass(b, c), "' style='", this.makeNodeIcoStyle(b, c), "'></i><span id='", c.tId, b.consts.id.SPAN, "'>", e, "</span>")
			},
			makeDOMNodeLine: function (a, b, c) {
				a.push("<i id='", c.tId, b.consts.id.SWITCH, "' title='' class='", this.makeNodeLineClass(b, c), "' treeNode", b.consts.id.SWITCH, "></i>")
			},
			makeDOMNodeMainAfter: function (a, b, c) {
				a.push("</li>")
			},
			makeDOMNodeMainBefore: function (a, b, c) {
				a.push("<li id='", c.tId, "' class='", b.consts.className.LEVEL, c.level, "' tabindex='0' hidefocus='true' treenode>")
			},
			makeDOMNodeNameAfter: function (a, b, c) {
				a.push("</a>")
			},
			makeDOMNodeNameBefore: function (a, b, c) {
				var d = this.getNodeTitle(b, c),
				e = this.makeNodeUrl(b, c),
				f = this.makeNodeFontCss(b, c),
				g = [];
				for (var h in f)
					g.push(h, ":", f[h], ";");
				a.push("<a id='", c.tId, b.consts.id.A, "' class='", b.consts.className.LEVEL, c.level, "' treeNode", b.consts.id.A, ' onclick="', c.click || "", '" ', null != e && e.length > 0 ? "href='" + e + "'" : "", " target='", this.makeNodeTarget(c), "' style='", g.join(""), "'"),
				FX.Utils.applyFunc(this, b.view.showTitle, [c], b.view.showTitle) && d && a.push("title='", d.replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), "'"),
				a.push(">")
			},
			makeNodeFontCss: function (a, b) {
				var c = FX.Utils.applyFunc(this, a.view.fontCss, [b], a.view.fontCss);
				return c && "function" != typeof c ? c : {}
			},
			makeNodeIcoClass: function (a, b) {
				var c = ["ico"];
				return b.isAjaxing || (c[0] = (b.iconSkin ? b.iconSkin + "_" : "") + c[0], b.isParent ? c.push(b.open ? a.consts.folder.OPEN : a.consts.folder.CLOSE) : c.push(a.consts.folder.DOCU)),
				a.consts.className.BUTTON + " " + c.join("_") + " x-iconfont"
			},
			makeNodeTarget: function (a) {
				return a.target || "_blank"
			},
			makeNodeUrl: function (a, b) {
				var c = a.data.key.url;
				return b[c] ? b[c] : null
			},
			setFirstNode: function (a, b) {
				var c = a.data.key.children,
				d = b[c].length;
				d > 0 && (b[c][0].isFirstNode = !0)
			},
			setLastNode: function (a, b) {
				var c = a.data.key.children,
				d = b[c].length;
				d > 0 && (b[c][d - 1].isLastNode = !0)
			},
			removeNode: function (a, b) {
				var c = a.data.key.children,
				d = b.parentTId ? b.getParentNode() : null;
				if (b.isFirstNode = !1, b.isLastNode = !1, b.getPreNode = function () {
					return null
				}, b.getNextNode = function () {
					return null
				}, this.getNodeCache(b.tId)) {
					this.removeNodeCache(a, b),
					this.removeSelectedNode(a, b);
					for (var e = 0, f = d[c].length; e < f; e++)
						if (d[c][e].tId == b.tId) {
							d[c].splice(e, 1);
							break
						}
					var g = this.getDOMBySelector(b, "");
					g && g.length > 0 && g.remove()
				}
			},
			replaceIcoClass: function (a, b, c) {
				if (b && !a.isAjaxing) {
					var d = b.attr("class");
					if (void 0 != d) {
						var e = d.split("_"),
						f = this.options.setting;
						switch (c) {
						case f.consts.folder.OPEN:
						case f.consts.folder.CLOSE:
						case f.consts.folder.DOCU:
							e[e.length - 1] = c
						}
						b.attr("class", e.join("_") + " x-iconfont")
					}
				}
			},
			replaceSwitchClass: function (a, b, c) {
				if (b) {
					var d = b.attr("class");
					if (void 0 != d) {
						var e = d.split("_"),
						f = this.options.setting;
						switch (c) {
						case f.consts.line.ROOT:
						case f.consts.line.ROOTS:
						case f.consts.line.CENTER:
						case f.consts.line.BOTTOM:
						case f.consts.line.NOLINE:
							e[0] = this.makeNodeLineClassEx(a) + c;
							break;
						case f.consts.folder.OPEN:
						case f.consts.folder.CLOSE:
						case f.consts.folder.DOCU:
							e[1] = c
						}
						b.attr("class", e.join("_")),
						c !== f.consts.folder.DOCU ? b.removeAttr("disabled") : b.attr("disabled", "disabled")
					}
				}
			},
			selectNode: function (a, b) {
				var c = this.options.setting;
				b || this.cancelPreSelectedNode(c),
				this.getDOMBySelector(a, c.consts.id.A, c).addClass(c.consts.node.CURSELECTED),
				this.addSelectedNode(c, a)
			},
			setNodeFontCss: function (a, b) {
				var c = this.getDOMBySelector(b, a.consts.id.A, a),
				d = this.makeNodeFontCss(a, b);
				d && c.css(d)
			},
			setNodeName: function (a, b) {
				var c = this.getNodeTitle(a, b),
				d = this.getDOMBySelector(b, a.consts.id.SPAN, a);
				if (d.empty(), a.view.nameIsHTML ? d.html(this.getNodeName(a, b)) : d.text(this.getNodeName(a, b)), FX.Utils.applyFunc(this, a.view.showTitle, [b], a.view.showTitle)) {
					var e = this.getDOMBySelector(b, a.consts.id.A, a);
					e.attr("title", c ? c : "")
				}
			},
			setNodeTarget: function (a, b) {
				var c = this.getDOMBySelector(b, a.consts.id.A, a);
				c.attr("target", this.makeNodeTarget(b))
			},
			setNodeUrl: function (a, b) {
				var c = this.getDOMBySelector(b, a.consts.id.A, a),
				d = this.makeNodeUrl(a, b);
				null == d || 0 === d.length ? c.removeAttr("href") : c.attr("href", d)
			},
			switchNode: function (a, b) {
				if (b.open || !this.canAsync(a, b))
					this.expandCollapseNode(a, b, !b.open);
				else if (a.async.enable) {
					if (!this.asyncNode(a, b))
						return void this.expandCollapseNode(a, b, !b.open)
				} else
					b && this.expandCollapseNode(a, b, !b.open)
			}
		}),
	FX.EventTree = FX.extend(FX.DomTree, {
			bindTree: function (a) {
				var b = this.element,
				c = this;
				a.view.txtSelectedEnable || b.bind("selectstart", function (a) {
					var b = a.originalEvent.srcElement.nodeName.toLowerCase();
					return "input" === b || "textarea" === b
				}).css({
					"-mo-user-select": "-mo-none"
				});
				var d = function (a) {
					var b = c.doProxy(a),
					d = !0;
					return b && (b.nodeEventCallback && (d = b.nodeEventCallback.apply(c, [a, b.node]) && d), b.treeEventCallback && (d = b.treeEventCallback.apply(c, [a, b.node]) && d)),
					d
				};
				b.bind("click", d).bind("dblclick", d).bind("mouseover", d).bind("mouseout", d).bind("mousedown", d).bind("mouseup", d).bind("contextmenu", d)
			},
			doProxy: function (a) {
				var b = a.target,
				c = this.options.setting,
				d = "",
				e = null,
				f = "",
				g = "",
				h = null,
				i = null,
				j = null;
				if ("mousedown" == a.type ? g = "mousedown" : "mouseup" == a.type ? g = "mouseup" : "contextmenu" == a.type ? g = "contextmenu" : "click" == a.type ? "I" != b.tagName && "SPAN" != b.tagName || null === b.getAttribute("treeNode" + c.consts.id.SWITCH) ? (j = this.getMDom(c, b, [{
											tagName: "A",
											attrName: "treeNode" + c.consts.id.A
										}
									]), j && (d = this.getNodeMainDom(j).id, f = "clickNode")) : (d = this.getNodeMainDom(b).id, f = "switchNode") : "dblclick" == a.type && (g = "dblclick", j = this.getMDom(c, b, [{
											tagName: "A",
											attrName: "treeNode" + c.consts.id.A
										}
									]), j && (d = this.getNodeMainDom(j).id, f = "switchNode")), g.length > 0 && 0 === d.length && (j = this.getMDom(c, b, [{
										tagName: "A",
										attrName: "treeNode" + c.consts.id.A
									}
								]), j && (d = this.getNodeMainDom(j).id)),
					d.length > 0)
					switch (e = this.getNodeCache(d), f) {
					case "switchNode":
						e.isParent && ("click" == a.type || "dblclick" == a.type && FX.Utils.applyFunc(this, c.view.dblClickExpand, [e], c.view.dblClickExpand)) ? h = this.onSwitchNode : f = "";
						break;
					case "clickNode":
						h = this.onClickNode
					}
				switch (g) {
				case "mousedown":
					i = this.onTreeMousedown;
					break;
				case "mouseup":
					i = this.onTreeMouseup;
					break;
				case "dblclick":
					i = this.onTreeDblclick;
					break;
				case "contextmenu":
					i = this.onTreeContextmenu
				}
				var k = {
					node: e,
					nodeEventType: f,
					nodeEventCallback: h,
					treeEventType: g,
					treeEventCallback: i
				};
				return k
			},
			bindEvent: function (a) {
				var b = this.element,
				c = a.consts.event,
				d = this;
				b.bind(c.NODECREATED, function (b, c) {
					FX.Utils.applyFunc(d, a.callback.onNodeCreated, [b, c])
				}),
				b.bind(c.CLICK, function (b, c, e, f) {
					FX.Utils.applyFunc(d, a.callback.onClick, [c, e, f])
				}),
				b.bind(c.EXPAND, function (b, c) {
					FX.Utils.applyFunc(d, a.callback.onExpand, [b, c])
				}),
				b.bind(c.COLLAPSE, function (b, c) {
					FX.Utils.applyFunc(d, a.callback.onCollapse, [b, c])
				}),
				b.bind(c.ASYNC_SUCCESS, function (b, c, e) {
					FX.Utils.applyFunc(d, a.callback.onAsyncSuccess, [b, c, e])
				}),
				b.bind(c.ASYNC_ERROR, function (b, c, e, f, g) {
					FX.Utils.applyFunc(d, a.callback.onAsyncError, [b, c, e, f, g])
				})
			},
			unbindTree: function () {
				var a = this.element,
				b = this.options.setting.consts.event;
				a.unbind("click").unbind("dblclick").unbind("mouseover").unbind("mouseout").unbind("mousedown").unbind("mouseup").unbind("contextmenu").unbind(b.NODECREATED).unbind(b.CLICK).unbind(b.EXPAND).unbind(b.COLLAPSE).unbind(b.ASYNC_SUCCESS).unbind(b.ASYNC_ERROR).unbind(b.CHECK)
			},
			onSwitchNode: function (a, b) {
				var c = this.options.setting;
				if (b.open) {
					if (FX.Utils.applyFunc(this, c.callback.beforeCollapse, [b], !0) === !1)
						return !0
				} else if (FX.Utils.applyFunc(this, c.callback.beforeExpand, [b], !0) === !1)
					return !0;
				return this.root.expandTriggerFlag = !0,
				this.switchNode(c, b),
				!0
			},
			onClickNode: function (a, b) {
				var c = this.options.setting,
				d = c.view.autoCancelSelected && (a.ctrlKey || a.metaKey) && this.isSelectedNode(c, b) ? 0 : c.view.autoCancelSelected && (a.ctrlKey || a.metaKey) && c.view.selectedMulti ? 2 : 1;
				return FX.Utils.applyFunc(this, c.callback.beforeClick, [b, d], !0) === !1 || (0 === d ? this.cancelPreSelectedNode(c, b) : this.selectNode(b, 2 === d), c.treeObj.trigger(c.consts.event.CLICK, [a, b, d]), !0)
			},
			onTreeMousedown: function (a, b) {
				var c = this.options.setting;
				return FX.Utils.applyFunc(this, c.callback.beforeMouseDown, [b], !0) && FX.Utils.applyFunc(this, c.callback.onMouseDown, [a, b]),
				!0
			},
			onTreeMouseup: function (a, b) {
				var c = this.options.setting;
				return FX.Utils.applyFunc(this, c.callback.beforeMouseUp, [b], !0) && FX.Utils.applyFunc(this, c.callback.onMouseUp, [a, b]),
				!0
			},
			onTreeDblclick: function (a, b) {
				var c = this.options.setting;
				return FX.Utils.applyFunc(this, c.callback.beforeDblClick, [b], !0) && FX.Utils.applyFunc(this, c.callback.onDblClick, [a, b]),
				!0
			},
			onTreeContextmenu: function (a, b) {
				var c = this.options.setting;
				return FX.Utils.applyFunc(this, c.callback.beforeRightClick, [b], !0) && FX.Utils.applyFunc(this, c.callback.onRightClick, [a, b]),
				"function" != typeof c.callback.onRightClick
			},
			createNodeCallback: function (a) {
				if (a.callback.onNodeCreated || a.view.addDiyDom)
					for (var b = this.root; b.createdNodes.length > 0; ) {
						var c = b.createdNodes.shift();
						FX.Utils.applyFunc(this, a.view.addDiyDom, [c]),
						a.callback.onNodeCreated && a.treeObj.trigger(a.consts.event.NODECREATED, [c])
					}
			},
			getAfterA: function (a, b, c) {
				this.afterA && this.afterA.apply(this, arguments)
			},
			getBeforeA: function (a, b, c) {
				this.beforeA && this.beforeA.apply(this, arguments)
			},
			getInnerAfterA: function (a, b, c) {
				this.innerAfterA && this.innerAfterA.apply(this, arguments)
			},
			getInnerBeforeA: function (a, b, c) {
				this.innerBeforeA && this.innerBeforeA.apply(this, arguments)
			}
		}),
	FX.DataTree = FX.extend(FX.EventTree, {
			addNodeCache: function (a, b) {
				this.cache.nodes[this.getNodeCacheId(b.tId)] = b
			},
			getNodeCacheId: function (a) {
				return a.substring(a.lastIndexOf("_") + 1)
			},
			getNodeCache: function (a) {
				if (!a)
					return null;
				var b = this.cache.nodes[this.getNodeCacheId(a)];
				return b ? b : null
			},
			canAsync: function (a, b) {
				var c = a.data.key.children;
				return a.async.enable && b && b.isParent && !(b.Async || b[c] && b[c].length > 0)
			},
			asyncNode: function (setting, node, isSilent, callback) {
				var i,
				l,
				self = this;
				if (node && !node.isParent)
					return FX.Utils.applyFunc(this, callback), !1;
				if (node && node.isAjaxing)
					return !1;
				if (FX.Utils.applyFunc(this, setting.callback.beforeasyncNode, [node], !0) === !1)
					return FX.Utils.applyFunc(this, callback), !1;
				if (node) {
					node.isAjaxing = !0;
					var icoObj = this.getDOMBySelector(node, setting.consts.id.ICON, setting);
					icoObj.attr({
						style: "",
						class: setting.consts.className.BUTTON + " " + setting.consts.className.ICO_LOADING + " x-iconfont"
					})
				}
				var tmpParam = {};
				for (i = 0, l = setting.async.autoParam.length; node && i < l; i++) {
					var pKey = setting.async.autoParam[i].split("="),
					spKey = pKey;
					pKey.length > 1 && (spKey = pKey[1], pKey = pKey[0]),
					tmpParam[spKey] = node[pKey]
				}
				if (FX.Utils.isArray(setting.async.otherParam))
					for (i = 0, l = setting.async.otherParam.length; i < l; i += 2)
						tmpParam[setting.async.otherParam[i]] = setting.async.otherParam[i + 1];
				else
					for (var p in setting.async.otherParam)
						tmpParam[p] = setting.async.otherParam[p];
				var _tmpV = this.root._ver;
				return FX.Utils.ajax({
					url: FX.Utils.applyFunc(this, setting.async.url, [node], setting.async.url),
					data: tmpParam
				}, function (msg) {
					if (_tmpV == self.root._ver) {
						var newNodes = [];
						try {
							newNodes = msg && 0 !== msg.length ? "string" == typeof msg ? eval("(" + msg + ")") : msg : []
						} catch (a) {
							newNodes = msg
						}
						node && (node.isAjaxing = null, node.Async = !0),
						self.setNodeLineIcos(setting, node),
						newNodes && "" !== newNodes ? (newNodes = FX.Utils.applyFunc(this, setting.async.dataFilter, [node, newNodes], newNodes), self.addNodes(setting, node, newNodes ? newNodes.slice(0) : [], !!isSilent)) : self.addNodes(setting, node, [], !!isSilent),
						setting.treeObj.trigger(setting.consts.event.ASYNC_SUCCESS, [node, msg]),
						FX.Utils.applyFunc(this, callback)
					}
				}, function (a, b, c) {
					_tmpV == self.root._ver && (node && (node.isAjaxing = null), self.setNodeLineIcos(setting, node), setting.treeObj.trigger(setting.consts.event.ASYNC_ERROR, [node, a, b, c]))
				}),
				!0
			},
			addNodesData: function (a, b, c) {
				var d = a.data.key.children;
				b[d] || (b[d] = []),
				b[d].length > 0 && (b[d][b[d].length - 1].isLastNode = !1, this.setNodeLineIcos(a, b[d][b[d].length - 1])),
				b.isParent = !0,
				b[d] = b[d].concat(c)
			},
			addSelectedNode: function (a, b) {
				var c = this.root;
				this.isSelectedNode(a, b) || c.curSelectedList.push(b)
			},
			addCreatedNode: function (a, b) {
				(a.callback.onNodeCreated || a.view.addDiyDom) && this.root.createdNodes.push(b)
			},
			fixPIdKeyValue: function (a, b) {
				a.data.simpleData.enable && (b[a.data.simpleData.pIdKey] = b.parentTId ? b.getParentNode()[a.data.simpleData.idKey] : a.data.simpleData.rootPId)
			},
			getNextNode: function (a, b) {
				if (!b)
					return null;
				for (var c = a.data.key.children, d = b.parentTId ? b.getParentNode() : this.root, e = 0, f = d[c].length - 1; e <= f; e++)
					if (d[c][e] === b)
						return e == f ? null : d[c][e + 1];
				return null
			},
			getNodeByParam: function (a, b, c, d) {
				if (!b || !c)
					return null;
				for (var e = a.data.key.children, f = 0, g = b.length; f < g; f++) {
					if (b[f][c] == d)
						return b[f];
					var h = this.getNodeByParam(a, b[f][e], c, d);
					if (h)
						return h
				}
				return null
			},
			getNodesByParam: function (a, b, c, d) {
				if (!b || !c)
					return [];
				for (var e = a.data.key.children, f = [], g = 0, h = b.length; g < h; g++)
					b[g][c] == d && f.push(b[g]), f = f.concat(this.getNodesByParam(a, b[g][e], c, d));
				return f
			},
			getNodes: function () {
				return this.root[this.options.setting.data.key.children]
			},
			getNodesByParamFuy: function (a, b, c, d) {
				if (!b || !c)
					return [];
				var e = a.data.key.children,
				f = [];
				d = d.toLowerCase();
				for (var g = 0, h = b.length; g < h; g++)
					"string" == typeof b[g][c] && b[g][c].toLowerCase().indexOf(d) > -1 && f.push(b[g]), f = f.concat(this.getNodesByParamFuy(a, b[g][e], c, d));
				return f
			},
			getNodesByFilter: function (a, b, c, d, e) {
				if (!b)
					return d ? null : [];
				for (var f = a.data.key.children, g = d ? null : [], h = 0, i = b.length; h < i; h++) {
					if (FX.Utils.applyFunc(this, c, [b[h], e], !1)) {
						if (d)
							return b[h];
						g.push(b[h])
					}
					var j = this.getNodesByFilter(a, b[h][f], c, d, e);
					if (d && j)
						return j;
					g = d ? j : g.concat(j)
				}
				return g
			},
			getPreNode: function (a, b) {
				if (!b)
					return null;
				for (var c = a.data.key.children, d = b.parentTId ? b.getParentNode() : this.root, e = 0, f = d[c].length; e < f; e++)
					if (d[c][e] === b)
						return 0 === e ? null : d[c][e - 1];
				return null
			},
			isSelectedNode: function (a, b) {
				for (var c = this.root, d = 0, e = c.curSelectedList.length; d < e; d++)
					if (b === c.curSelectedList[d])
						return !0;
				return !1
			},
			removeNodeCache: function (a, b) {
				var c = a.data.key.children;
				if (b[c])
					for (var d = 0, e = b[c].length; d < e; d++)
						arguments.callee(a, b[c][d]);
				this.cache.nodes[this.getNodeCacheId(b.tId)] = null
			},
			removeSelectedNode: function (a, b) {
				for (var c = this.root, d = 0, e = c.curSelectedList.length; d < e; d++)
					b !== c.curSelectedList[d] && this.getNodeCache(c.curSelectedList[d].tId) || (c.curSelectedList.splice(d, 1), d--, e--)
			},
			expandAll: function (a) {
				return a = !!a,
				this.expandCollapseSonNode(setting, null, a, !0),
				a
			},
			expandNode: function (a, b, c, d, e) {
				var f = this.options.setting;
				return a && a.isParent ? (b !== !0 && b !== !1 && (b = !a.open), e = !!e, e && b && FX.Utils.applyFunc(this, f.callback.beforeExpand, [a], !0) === !1 ? null : e && !b && FX.Utils.applyFunc(this, f.callback.beforeCollapse, [a], !0) === !1 ? null : (b && a.parentTId && this.expandCollapseParentNode(f, a.getParentNode(), b, !1), b !== a.open || c ? (this.root.expandTriggerFlag = e, !this.canAsync(f, a) && c ? this.expandCollapseSonNode(f, a, b, !0, function () {}) : (a.open = !b, this.switchNode(this.options.setting, a)), b) : null)) : null
			},
			getNodeByTId: function (a) {
				return this.getNodeCache(a)
			},
			getNodeIndex: function (a) {
				if (!a)
					return null;
				for (var b = this.options.setting.data.key.children, c = a.parentTId ? a.getParentNode() : this.root, d = 0, e = c[b].length; d < e; d++)
					if (c[b][d] == a)
						return d;
				return -1
			},
			getSelectedNodes: function () {
				for (var a = [], b = this.root.curSelectedList, c = 0, d = b.length; c < d; c++)
					a.push(b[c]);
				return a
			},
			reAsyncChildNodes: function (a, b, c) {
				if (this.options.setting.async.enable) {
					var d = !a,
					e = this.options.setting;
					if (d && (a = this.root), "refresh" == b) {
						for (var f = this.options.setting.data.key.children, g = 0, h = a[f] ? a[f].length : 0; g < h; g++)
							this.removeNodeCache(e, a[f][g]);
						if (this.removeSelectedNode(e), a[f] = [], d)
							this.options.setting.treeObj.empty();
						else {
							var i = this.getDOMBySelector(a, e.consts.id.UL, e);
							i.empty()
						}
					}
					this.asyncNode(this.options.setting, d ? null : a, !!c)
				}
			},
			refresh: function () {
				this.options.setting.treeObj.empty();
				var a = this.root,
				b = this.options.setting,
				c = a[b.data.key.children];
				this.initRoot(b),
				a[b.data.key.children] = c,
				this.initCache(),
				this.createNodes(b, 0, a[b.data.key.children])
			},
			updateNode: function (a, b) {
				if (a) {
					var c = this.options.setting,
					d = this.getDOMBySelector(a, c);
					d.get(0) && (this.setNodeName(c, a), this.setNodeTarget(c, a), this.setNodeUrl(c, a), this.setNodeLineIcos(c, a), this.setNodeFontCss(c, a))
				}
			},
			transformToArrayFormat: function (a, b) {
				if (!b)
					return [];
				var c = a.data.key.children,
				d = [];
				if (FX.Utils.isArray(b))
					for (var e = 0, f = b.length; e < f; e++)
						d.push(b[e]), b[e][c] && (d = d.concat(this.transformToArrayFormat(a, b[e][c])));
				else
					d.push(b), b[c] && (d = d.concat(this.transformToArrayFormat(a, b[c])));
				return d
			},
			transformToTreeFormat: function (a, b) {
				var c,
				d,
				e = a.data.simpleData.idKey,
				f = a.data.simpleData.pIdKey,
				g = a.data.key.children;
				if (!e || "" == e || !b)
					return [];
				if (FX.Utils.isArray(b)) {
					var h = [],
					i = [];
					for (c = 0, d = b.length; c < d; c++)
						i[b[c][e]] = b[c];
					for (c = 0, d = b.length; c < d; c++)
						i[b[c][f]] && b[c][e] != b[c][f] ? (i[b[c][f]][g] || (i[b[c][f]][g] = []), i[b[c][f]][g].push(b[c])) : h.push(b[c]);
					return h
				}
				return [b]
			}
		}),
	FX.BaseTree = FX.extend(FX.DataTree, {
			_defaultConfig: function () {
				return $.extend(FX.BaseTree.superclass._defaultConfig.apply(), {
					baseCls: "fui_tree"
				})
			},
			_init: function () {
				FX.BaseTree.superclass._init.apply(this, arguments);
				var a = this.options;
				a.setting = this._doSettingConfig(),
				this._createRoot(a.setting);
				var b = a.setting;
				this.root = this.initRoot(b);
				var c = b.data.key.children,
				d = [];
				a.Nodes && (d = FX.Utils.isArray(a.Nodes) ? a.Nodes.slice(0) : [a.Nodes].slice(0)),
				a.setting.data.simpleData.enable ? this.root[c] = this.transformToTreeFormat(b, d) : this.root[c] = d,
				this.initCache(),
				this.bindTree(b),
				this.bindEvent(b),
				this.root[c] && this.root[c].length > 0 ? this.createNodes(b, 0, this.root[c]) : b.async.enable && b.async.url && "" !== b.async.url && this.asyncNode(b)
			},
			_doSettingConfig: function () {
				var a = this.options;
				return a.setting = $.extend(!0, {}, this.setting, a.setting),
				a.setting
			},
			_createRoot: function (a) {
				var b = $('<ul id="' + a.treeId + '" class="tree"/>').appendTo(this.element);
				a.treeObj = b
			},
			initRoot: function (a) {
				var b = a ? this.root : null;
				return b || (b = {}),
				b[a.data.key.children] = [],
				b.expandTriggerFlag = !1,
				b.curSelectedList = [],
				b.noSelection = !0,
				b.createdNodes = [],
				b.radioCheckedList = [],
				b.Id = 0,
				b._ver = (new Date).getTime(),
				b
			},
			initCache: function () {
				this.cache = this.cache || {},
				this.cache.nodes = [],
				this.cache.doms = []
			},
			initNode: function (a, b, c, d, e, f, g) {
				if (c) {
					var h = this.root,
					i = a.data.key.children,
					j = this;
					c.level = b,
					c.tId = a.treeId + "_" + ++h.Id,
					c.parentTId = d ? d.tId : null,
					c.open = "string" == typeof c.open ? "true" == c.open.toLowerCase() : !!c.open,
					c[i] && c[i].length > 0 ? (c.isParent = !0, c.Async = !0) : (c.isParent = "string" == typeof c.isParent ? "true" == c.isParent.toLowerCase() : !!c.isParent, c.open = !(!c.isParent || a.async.enable) && c.open, c.Async = !c.isParent),
					c.isFirstNode = e,
					c.isLastNode = f,
					c.getParentNode = function () {
						return j.getNodeCache(c.parentTId)
					},
					c.getPreNode = function () {
						return j.getPreNode(a, c)
					},
					c.getNextNode = function () {
						return j.getNextNode(a, c)
					},
					c.isAjaxing = !1,
					this.fixPIdKeyValue(a, c)
				}
			},
			addNodes: function (a, b, c, d) {
				if (!a.data.keep.leaf || !b || b.isParent)
					if (FX.Utils.isArray(c) || (c = [c]), a.data.simpleData.enable && (c = this.transformToTreeFormat(a, c)), b) {
						var e = this.getDOMBySelector(b, a.consts.id.SWITCH, a),
						f = this.getDOMBySelector(b, a.consts.id.ICON, a),
						g = this.getDOMBySelector(b, a.consts.id.UL, a);
						b.open || (this.replaceSwitchClass(b, e, a.consts.folder.CLOSE), this.replaceIcoClass(b, f, a.consts.folder.CLOSE), b.open = !1, g.css({
								display: "none"
							})),
						this.addNodesData(a, b, c),
						this.createNodes(a, b.level + 1, c, b),
						d || this.expandCollapseParentNode(a, b, !0)
					} else
						this.addNodesData(a, this.root, c), this.createNodes(a, 0, c, null)
			},
			appendNodes: function (a, b, c, d, e, f) {
				if (!c)
					return [];
				for (var g = [], h = a.data.key.children, i = 0, j = c.length; i < j; i++) {
					var k = c[i];
					if (FX.Utils.applyFunc(this, a.callback.beforeNodeCreate, [k], !0), e) {
						var l = d ? d : this.root,
						m = l[h],
						n = m.length == c.length && 0 === i,
						o = i == c.length - 1;
						this.initNode(a, b, k, d, n, o, f),
						this.addNodeCache(a, k)
					}
					var p = [];
					k[h] && k[h].length > 0 && (p = this.appendNodes(a, b + 1, k[h], k, e, f && k.open)),
					f && (this.makeDOMNodeMainBefore(g, a, k), this.getBeforeA(a, k, g), this.makeDOMNodeNameBefore(g, a, k), this.makeDOMNodeLine(g, a, k), this.getInnerBeforeA(a, k, g), this.makeDOMNodeIcon(g, a, k), this.getInnerAfterA(a, k, g), this.makeDOMNodeNameAfter(g, a, k), this.getAfterA(a, k, g), k.isParent && k.open && this.makeUlHtml(a, k, g, p.join("")), this.makeDOMNodeMainAfter(g, a, k), this.addCreatedNode(a, k))
				}
				return g
			},
			createNodes: function (a, b, c, d) {
				if (c && 0 !== c.length) {
					var e = this.root,
					f = a.data.key.children,
					g = !d || d.open || !!this.getDOMBySelector(d[f][0], a).get(0);
					e.createdNodes = [];
					var h = this.appendNodes(a, b, c, d, !0, g);
					if (d) {
						var i = this.getDOMBySelector(d, a.consts.id.UL, a);
						i.get(0) && i.append(h.join(""))
					} else
						a.treeObj.append(h.join(""));
					this.createNodeCallback(a)
				}
			},
			expandCollapseNode: function (a, b, c, d, e) {
				var f = this.root,
				g = a.data.key.children;
				if (!b)
					return void FX.Utils.applyFunc(this, e, []);
				if (f.expandTriggerFlag) {
					var h = e;
					e = function () {
						h && h(),
						b.open ? a.treeObj.trigger(a.consts.event.EXPAND, [b]) : a.treeObj.trigger(a.consts.event.COLLAPSE, [b])
					},
					f.expandTriggerFlag = !1
				}
				if (!b.open && b.isParent && (!this.getDOMBySelector(b, a.consts.id.UL, a).get(0) || b[g] && b[g].length > 0 && !this.getDOMBySelector(b[g][0], a).get(0)) && (this.appendParentULDom(a, b), this.createNodeCallback(a)), b.open == c)
					return void FX.Utils.applyFunc(this, e, []);
				var i = this.getDOMBySelector(b, a.consts.id.UL, a),
				j = this.getDOMBySelector(b, a.consts.id.SWITCH, a),
				k = this.getDOMBySelector(b, a.consts.id.ICON, a);
				b.isParent ? (b.open = !b.open, b.iconOpen && b.iconClose && k.attr("style", this.makeNodeIcoStyle(a, b)), b.open ? (this.replaceSwitchClass(b, j, a.consts.folder.OPEN), this.replaceIcoClass(b, k, a.consts.folder.OPEN), d === !1 || "" == a.view.expandSpeed ? (i.show(), FX.Utils.applyFunc(this, e, [])) : b[g] && b[g].length > 0 ? i.slideDown(a.view.expandSpeed, e) : (i.show(), FX.Utils.applyFunc(this, e, []))) : (this.replaceSwitchClass(b, j, a.consts.folder.CLOSE), this.replaceIcoClass(b, k, a.consts.folder.CLOSE), d !== !1 && "" != a.view.expandSpeed && b[g] && b[g].length > 0 ? i.slideUp(a.view.expandSpeed, e) : (i.hide(), FX.Utils.applyFunc(this, e, [])))) : FX.Utils.applyFunc(this, e, [])
			},
			expandCollapseParentNode: function (a, b, c, d, e) {
				if (b) {
					if (!b.parentTId)
						return void this.expandCollapseNode(a, b, c, d, e);
					this.expandCollapseNode(a, b, c, d),
					b.parentTId && this.expandCollapseParentNode(a, b.getParentNode(), c, d, e)
				}
			},
			expandCollapseSonNode: function (a, b, c, d, e) {
				var f = a.data.key.children,
				g = b ? b[f] : this.root[f],
				h = !b && d,
				i = this.root.expandTriggerFlag;
				if (this.root.expandTriggerFlag = !1, g)
					for (var j = 0, k = g.length; j < k; j++)
						g[j] && this.expandCollapseSonNode(a, g[j], c, h);
				this.root.expandTriggerFlag = i,
				this.expandCollapseNode(a, b, c, d, e)
			},
			destroy: function (a) {
				a && (this.initCache(), this.initRoot(a), this.unbindTree(a), a.treeObj.empty(), delete a)
			}
		})
}
(jQuery), function (a) {
	FX.Tree = FX.extend(FX.BaseTree, {
			initRoot: function (a) {
				var b = FX.Tree.superclass.initRoot.apply(this, arguments);
				return b.radioCheckedList = [],
				b
			},
			bindEvent: function (a) {
				FX.Tree.superclass.bindEvent.apply(this, arguments);
				var b = this.element,
				c = a.consts.event,
				d = this;
				b.bind(c.CHECK, function (b, c, e) {
					FX.Utils.applyFunc(d, a.callback.onCheck, [c ? c : b, e])
				})
			},
			unbindTree: function (a) {
				FX.Tree.superclass.unbindTree.apply(this, arguments);
				var b = this.element,
				c = this.options.setting.consts.event;
				b.unbind(c.CHECK)
			},
			doProxy: function (a) {
				var b = a.target.parentNode,
				c = this.options.setting,
				d = "",
				e = null,
				f = "",
				g = "",
				h = null,
				i = null;
				if (c.check.enable && ("mouseover" == a.type ? "SPAN" == b.tagName && null !== b.getAttribute("treeNode" + c.consts.id.CHECK) && (d = this.getNodeMainDom(b).id, f = "mouseoverCheck") : "mouseout" == a.type ? "SPAN" == b.tagName && null !== b.getAttribute("treeNode" + c.consts.id.CHECK) && (d = this.getNodeMainDom(b).id, f = "mouseoutCheck") : "click" == a.type && "SPAN" == b.tagName && null !== b.getAttribute("treeNode" + c.consts.id.CHECK) && (d = this.getNodeMainDom(b).id, f = "checkNode")), d.length > 0)
					switch (e = this.getNodeCache(d), f) {
					case "checkNode":
						h = this.onCheckNode;
						break;
					case "mouseoverCheck":
						h = this.onMouseoverCheck;
						break;
					case "mouseoutCheck":
						h = this.onMouseoutCheck
					}
				return "" !== f ? {
					node: e,
					nodeEventType: f,
					nodeEventCallback: h,
					treeEventType: g,
					treeEventCallback: i
				}
				 : FX.Tree.superclass.doProxy.apply(this, arguments)
			},
			initNode: function (a, b, c, d, e, f, g) {
				if (FX.Tree.superclass.initNode.apply(this, arguments), c) {
					var h = a.data.key.checked;
					"string" == typeof c[h] && (c[h] = "true" == c[h].toLowerCase()),
					c[h] = !!c[h],
					c.checkedOld = c[h],
					"string" == typeof c.nocheck && (c.nocheck = "true" == c.nocheck.toLowerCase()),
					c.nocheck = !!c.nocheck || a.check.nocheckInherit && d && !!d.nocheck,
					"string" == typeof c.chkDisabled && (c.chkDisabled = "true" == c.chkDisabled.toLowerCase()),
					c.chkDisabled = !!c.chkDisabled || a.check.chkDisabledInherit && d && !!d.chkDisabled,
					"string" == typeof c.halfCheck && (c.halfCheck = "true" == c.halfCheck.toLowerCase()),
					c.halfCheck = !!c.halfCheck,
					c.check_Child_State = -1,
					c.check_Focus = !1,
					c.getCheckStatus = function () {
						return this.getCheckStatus(a, c)
					},
					a.check.chkStyle == a.consts.radio.STYLE && a.check.radioType == a.consts.radio.TYPE_ALL && c[h] && this.root.radioCheckedList.push(c)
				}
			},
			makeDOMNodeLine: function (a, b, c) {
				FX.Tree.superclass.makeDOMNodeLine.apply(this, arguments),
				b.check.enable && (this.makeChkFlag(b, c), a.push("<span ID='", c.tId, b.consts.id.CHECK, "' class='", this.makeChkClass(b, c), "' treeNode", b.consts.id.CHECK, c.nocheck === !0 ? " style='display:none;'" : "", "><i class='x-iconfont'></i></span>"))
			},
			getRadioCheckedList: function (a) {
				for (var b = this.root.radioCheckedList, c = 0, d = b.length; c < d; c++)
					this.getNodeCache(a, b[c].tId) || (b.splice(c, 1), c--, d--);
				return b
			},
			getCheckStatus: function (a, b) {
				if (!a.check.enable || b.nocheck || b.chkDisabled)
					return null;
				var c = a.data.key.checked;
				return {
					checked: b[c],
					half: b.halfCheck ? b.halfCheck : a.check.chkStyle == a.consts.radio.STYLE ? 2 === b.check_Child_State : b[c] ? b.check_Child_State > -1 && b.check_Child_State < 2 : b.check_Child_State > 0
				}
			},
			getTreeCheckedNodes: function (a, b, c, d) {
				if (!b)
					return [];
				var e = a.data.key.children,
				f = a.data.key.checked,
				g = c && a.check.chkStyle == a.consts.radio.STYLE && a.check.radioType == a.consts.radio.TYPE_ALL;
				d = d ? d : [];
				for (var h = 0, i = b.length; h < i && (b[h].nocheck === !0 || b[h].chkDisabled === !0 || b[h][f] != c || (d.push(b[h]), !g)) && (this.getTreeCheckedNodes(a, b[h][e], c, d), !(g && d.length > 0)); h++);
				return d
			},
			getTreeChangeCheckedNodes: function (a, b, c) {
				if (!b)
					return [];
				var d = a.data.key.children,
				e = a.data.key.checked;
				c = c ? c : [];
				for (var f = 0, g = b.length; f < g; f++)
					b[f].nocheck !== !0 && b[f].chkDisabled !== !0 && b[f][e] != b[f].checkedOld && c.push(b[f]), this.getTreeChangeCheckedNodes(a, b[f][d], c);
				return c
			},
			makeChkFlag: function (a, b) {
				if (b) {
					var c = a.data.key.children,
					d = a.data.key.checked,
					e = -1;
					if (b[c])
						for (var f = 0, g = b[c].length; f < g; f++) {
							var h = b[c][f],
							i = -1;
							if (a.check.chkStyle == a.consts.radio.STYLE) {
								if (i = h.nocheck === !0 || h.chkDisabled === !0 ? h.check_Child_State : h.halfCheck === !0 ? 2 : h[d] ? 2 : h.check_Child_State > 0 ? 2 : 0, 2 === i) {
									e = 2;
									break
								}
								0 === i && (e = 0)
							} else if (a.check.chkStyle == a.consts.checkbox.STYLE) {
								if (i = h.nocheck === !0 || h.chkDisabled === !0 ? h.check_Child_State : h.halfCheck === !0 ? 1 : h[d] ? h.check_Child_State === -1 || 2 === h.check_Child_State ? 2 : 1 : h.check_Child_State > 0 ? 1 : 0, 1 === i) {
									e = 1;
									break
								}
								if (2 === i && e > -1 && f > 0 && i !== e) {
									e = 1;
									break
								}
								if (2 === e && i > -1 && i < 2) {
									e = 1;
									break
								}
								i > -1 && (e = i)
							}
						}
					b.check_Child_State = e
				}
			},
			checkNode: function (a, b, c, d) {
				var e = this.options.setting,
				f = e.data.key.checked;
				if (a.chkDisabled !== !0 && (b !== !0 && b !== !1 && (b = !a[f]), d = !!d, (a[f] !== b || c) && (!d || FX.Utils.applyFunc(this, e.callback.beforeCheck, [a], !0) !== !1) && e.check.enable && a.nocheck !== !0)) {
					a[f] = b;
					var g = this.getDOMBySelector(a, e.consts.id.CHECK, e);
					(c || e.check.chkStyle === e.consts.radio.STYLE) && this.checkNodeRelation(e, a),
					this.setChkClass(e, g, a),
					this.repairParentChkClassWithSelf(e, a),
					d && e.treeObj.trigger(e.consts.event.CHECK, [null, a])
				}
			},
			checkAllNodes: function (a) {
				this.repairAllChk(this.options.setting, !!a)
			},
			getCheckedNodes: function (a) {
				var b = this.options.setting.data.key.children;
				return a = a !== !1,
				this.getTreeCheckedNodes(this.options.setting, this.root[b], a)
			},
			getChangeCheckedNodes: function () {
				var a = this.options.setting.data.key.children;
				return this.getTreeChangeCheckedNodes(this.options.setting, this.root[a])
			},
			setChkDisabled: function (a, b, c, d) {
				b = !!b,
				c = !!c,
				d = !!d,
				this.repairSonChkDisabled(this.options.setting, a, b, d),
				this.repairParentChkDisabled(this.options.setting, a.getParentNode(), b, c)
			},
			onCheckNode: function (a, b) {
				if (b.chkDisabled === !0)
					return !1;
				var c = this.options.setting,
				d = c.data.key.checked;
				if (FX.Utils.applyFunc(this, c.callback.beforeCheck, [b], !0) === !1)
					return !0;
				b[d] = !b[d],
				this.checkNodeRelation(c, b);
				var e = this.getDOMBySelector(b, c.consts.id.CHECK, c);
				return this.setChkClass(c, e, b),
				this.repairParentChkClassWithSelf(c, b),
				c.treeObj.trigger(c.consts.event.CHECK, [a, b]),
				!0
			},
			onMouseoverCheck: function (a, b) {
				if (b.chkDisabled === !0)
					return !1;
				var c = this.options.setting,
				d = this.getDOMBySelector(b, c.consts.id.CHECK, c);
				return b.check_Focus = !0,
				this.setChkClass(c, d, b),
				!0
			},
			onMouseoutCheck: function (a, b) {
				if (b.chkDisabled === !0)
					return !1;
				var c = this.options.setting,
				d = this.getDOMBySelector(b, c.consts.id.CHECK, c);
				return b.check_Focus = !1,
				this.setChkClass(c, d, b),
				!0
			},
			checkNodeRelation: function (a, b) {
				var c,
				d,
				e,
				f = a.data.key.children,
				g = a.data.key.checked,
				h = a.consts.radio;
				if (a.check.chkStyle == h.STYLE) {
					var i = this.getRadioCheckedList(a);
					if (b[g])
						if (a.check.radioType == h.TYPE_ALL) {
							for (d = i.length - 1; d >= 0; d--)
								c = i[d], c[g] = !1, i.splice(d, 1), this.setChkClass(a, this.getDOMBySelector(c, a.consts.id.CHECK, a), c), c.parentTId != b.parentTId && this.repairParentChkClassWithSelf(a, c);
							i.push(b)
						} else {
							var j = b.parentTId ? b.getParentNode() : this.root;
							for (d = 0, e = j[f].length; d < e; d++)
								c = j[f][d], c[g] && c != b && (c[g] = !1, this.setChkClass(a, this.getDOMBySelector(c, a.consts.id.CHECK, a), c))
						}
					else if (a.check.radioType == h.TYPE_ALL)
						for (d = 0, e = i.length; d < e; d++)
							if (b == i[d]) {
								i.splice(d, 1);
								break
							}
				} else
					b[g] && (!b[f] || 0 === b[f].length || a.check.chkboxType.Y.indexOf("s") > -1) && this.setSonNodeCheckBox(a, b, !0), b[g] || b[f] && 0 !== b[f].length && !(a.check.chkboxType.N.indexOf("s") > -1) || this.setSonNodeCheckBox(a, b, !1), b[g] && a.check.chkboxType.Y.indexOf("p") > -1 && this.setParentNodeCheckBox(a, b, !0), !b[g] && a.check.chkboxType.N.indexOf("p") > -1 && this.setParentNodeCheckBox(a, b, !1)
			},
			makeChkClass: function (a, b) {
				var c = a.data.key.checked,
				d = a.consts.checkbox,
				e = a.consts.radio,
				f = "";
				f = b.chkDisabled === !0 ? d.DISABLED : b.halfCheck ? d.PART : a.check.chkStyle == e.STYLE ? b.check_Child_State < 1 ? d.FULL : d.PART : b[c] ? 2 === b.check_Child_State || b.check_Child_State === -1 ? d.FULL : d.PART : b.check_Child_State < 1 ? d.FULL : d.PART;
				var g = a.check.chkStyle + " " + (b[c] ? d.TRUE : d.FALSE) + " " + f;
				return g = b.check_Focus && b.chkDisabled !== !0 ? g + "_" + d.FOCUS : g,
				a.consts.className.BUTTON + " " + d.DEFAULT + " " + g
			},
			repairAllChk: function (a, b) {
				if (a.check.enable && a.check.chkStyle === a.consts.checkbox.STYLE)
					for (var c = a.data.key.checked, d = a.data.key.children, e = this.root, f = 0, g = e[d].length; f < g; f++) {
						var h = e[d][f];
						h.nocheck !== !0 && h.chkDisabled !== !0 && (h[c] = b),
						this.setSonNodeCheckBox(a, h, b)
					}
			},
			repairChkClass: function (a, b) {
				if (b && (this.makeChkFlag(a, b), b.nocheck !== !0)) {
					var c = this.getDOMBySelector(b, a.consts.id.CHECK, a);
					this.setChkClass(a, c, b)
				}
			},
			repairParentChkClass: function (a, b) {
				if (b && b.parentTId) {
					var c = b.getParentNode();
					this.repairChkClass(a, c),
					this.repairParentChkClass(a, c)
				}
			},
			repairParentChkClassWithSelf: function (a, b) {
				if (b) {
					var c = a.data.key.children;
					b[c] && b[c].length > 0 ? this.repairParentChkClass(a, b[c][0]) : this.repairParentChkClass(a, b)
				}
			},
			repairSonChkDisabled: function (a, b, c, d) {
				if (b) {
					var e = a.data.key.children;
					if (b.chkDisabled != c && (b.chkDisabled = c), this.repairChkClass(a, b), b[e] && d)
						for (var f = 0, g = b[e].length; f < g; f++) {
							var h = b[e][f];
							this.repairSonChkDisabled(a, h, c, d)
						}
				}
			},
			repairParentChkDisabled: function (a, b, c, d) {
				b && (b.chkDisabled != c && d && (b.chkDisabled = c), this.repairChkClass(a, b), this.repairParentChkDisabled(a, b.getParentNode(), c, d))
			},
			setChkClass: function (a, b, c) {
				b && (c.nocheck === !0 ? b.hide() : b.show(), b.removeClass(), b.addClass(this.makeChkClass(a, c)))
			},
			setParentNodeCheckBox: function (a, b, c, d) {
				var e = a.data.key.children,
				f = a.data.key.checked,
				g = this.getDOMBySelector(b, a.consts.id.CHECK, a);
				if (d || (d = b), this.makeChkFlag(a, b), b.nocheck !== !0 && b.chkDisabled !== !0 && (b[f] = c, this.setChkClass(a, g, b), a.check.autoCheckTrigger && b != d && a.treeObj.trigger(a.consts.event.CHECK, [null, b])), b.parentTId) {
					var h = !0;
					if (!c)
						for (var i = b.getParentNode()[e], j = 0, k = i.length; j < k; j++)
							if (i[j].nocheck !== !0 && i[j].chkDisabled !== !0 && i[j][f] || (i[j].nocheck === !0 || i[j].chkDisabled === !0) && i[j].check_Child_State > 0) {
								h = !1;
								break
							}
					h && this.setParentNodeCheckBox(a, b.getParentNode(), c, d)
				}
			},
			setSonNodeCheckBox: function (a, b, c, d) {
				if (b) {
					var e = a.data.key.children,
					f = a.data.key.checked,
					g = this.getDOMBySelector(b, a.consts.id.CHECK, a);
					d || (d = b);
					var h = !1;
					if (b[e])
						for (var i = 0, j = b[e].length; i < j && b.chkDisabled !== !0; i++) {
							var k = b[e][i];
							this.setSonNodeCheckBox(a, k, c, d),
							k.chkDisabled === !0 && (h = !0)
						}
					b != this.root && b.chkDisabled !== !0 && (h && b.nocheck !== !0 && this.makeChkFlag(a, b), b.nocheck !== !0 && b.chkDisabled !== !0 ? (b[f] = c, h || (b.check_Child_State = b[e] && b[e].length > 0 ? c ? 2 : 0 : -1)) : b.check_Child_State = -1, this.setChkClass(a, g, b), a.check.autoCheckTrigger && b != d && b.nocheck !== !0 && b.chkDisabled !== !0 && a.treeObj.trigger(a.consts.event.CHECK, [null, b]))
				}
			},
			updateNode: function (a, b) {
				FX.Tree.superclass.updateNode.apply(this, arguments);
				var c = this.options.setting;
				if (a && c.check.enable) {
					var d = this.getDOMBySelector(a, c);
					if (d.get(0)) {
						var e = this.getDOMBySelector(a, c.consts.id.CHECK, c);
						b !== !0 && c.check.chkStyle !== c.consts.radio.STYLE || this.checkNodeRelation(c, a),
						this.setChkClass(c, e, a),
						this.repairParentChkClassWithSelf(c, a)
					}
				}
			},
			createNodes: function (a, b, c, d) {
				FX.Tree.superclass.createNodes.apply(this, arguments),
				c && this.repairParentChkClassWithSelf(a, d)
			},
			removeNode: function (a, b) {
				var c = b.getParentNode();
				FX.Tree.superclass.removeNode.apply(this, arguments),
				b && c && (this.repairChkClass(a, c), this.repairParentChkClass(a, c))
			},
			appendNodes: function (a, b, c, d, e, f) {
				var g = FX.Tree.superclass.appendNodes.apply(this, arguments);
				return d && this.makeChkFlag(a, d),
				g
			}
		}),
	a.shortcut("tree", FX.Tree)
}
(jQuery), function (a) {
	FX.Segment = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Segment.superclass._defaultConfig.apply(), {
					baseCls: "fui_segment",
					onAfterItemSelect: null,
					items: []
				})
			},
			_init: function () {
				FX.Segment.superclass._init.apply(this, arguments);
				for (var b = this.options, c = 0, d = b.items.length; c < d; c++) {
					var e = b.items[c],
					f = a('<div class="fui_segment_item"/>').data("item", e).append(a("<span/>").text(e.text)).appendTo(this.element);
					e.iconCls && f.prepend(a("<i/>").addClass(e.iconCls))
				}
				this._bindEvts(),
				b.text ? this.setText(b.text) : b.value && this.setValue(b.value)
			},
			_bindEvts: function () {
				var b = this,
				c = this.options,
				d = function (d) {
					if (b.isEnabled()) {
						var e = a(d.target).closest(".fui_segment_item");
						if (e && e.length > 0) {
							var f = d.type;
							"click" === f && (a(".selected", b.element).removeClass("selected"), b._setItemSelected(e), FX.Utils.applyFunc(b, c.onAfterItemSelect, null, !1))
						}
					}
				};
				this.element.unbind(),
				this.element.bind("click", d).bind("mouseout", d)
			},
			_setItemSelected: function (a) {
				var b = this.options;
				if (a && !a.hasClass("selected")) {
					a.addClass("selected");
					var c = a.data("item");
					b.value = c.value,
					b.text = c.text
				}
			},
			checkValidate: function () {
				return !(!this.options.allowBlank && FX.Utils.isEmpty(this.getValue()))
			},
			getValue: function () {
				return this.options.value
			},
			getText: function () {
				return this.options.text
			},
			setValue: function (b) {
				var c = this.options,
				d = this;
				a(".selected", d.element).removeClass("selected"),
				FX.Utils.isNull(b) && (c.value = null, c.text = null),
				c.items && a.each(c.items, function (a, c) {
					if (b == c.value) {
						var e = d.element.children().eq(a);
						d._setItemSelected(e)
					}
				})
			},
			setText: function (b) {
				var c = this.options,
				d = this;
				a(".selected", d.element).removeClass("selected"),
				FX.Utils.isNull(b) && (c.value = null, c.text = null),
				c.items && a.each(c.items, function (a, c) {
					if (b == c.text) {
						var e = d.element.children().eq(a);
						d._setItemSelected(e)
					}
				})
			}
		}),
	a.shortcut("segment", FX.Segment)
}
(jQuery), function (a) {
	FX.Progress = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Progress.superclass._defaultConfig.apply(), {
					baseCls: "fui_progress",
					width: 200,
					valueMin: 0,
					valueMax: 100,
					valueNow: 0,
					style: "info",
					message: "",
					isAnimate: !0,
					isStriped: !0
				})
			},
			_init: function () {
				FX.Progress.superclass._init.apply(this, arguments);
				var b = this.options;
				this.$bar = a('<div class="progress-bar" />').addClass("progress-bar-" + b.style).appendTo(this.element),
				b.isAnimate && this.$bar.addClass("active"),
				b.isStriped && this.$bar.addClass("progress-bar-striped"),
				this.$message = a('<span class="progress-message" />').css({
						"line-height": b.height + "px"
					}).appendTo(this.element),
				this.setProgress(),
				this.setMessage()
			},
			setProgress: function (a) {
				var b = this.options;
				FX.Utils.isNull(a) || (b.valueNow = a);
				var c = parseInt((b.valueNow - b.valueMin) / (b.valueMax - b.valueMin) * 100);
				c > 60 ? this.$message.addClass("bright") : c <= 60 && this.$message.removeClass("bright"),
				100 === c && b.isAnimate && this.$bar.removeClass("active"),
				this.$bar.css({
					width: c + "%"
				})
			},
			setMessage: function (a) {
				var b = this.options;
				FX.Utils.isBlank(a) || (b.message = a),
				this.$message.text(b.message)
			}
		}),
	a.shortcut("progress", FX.Progress)
}
(jQuery), function (a) {
	FX.FilePreview = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FilePreview.superclass._defaultConfig.apply(), {
					renderEl: a("<div/>").appendTo("body"),
					baseCls: "fui_file_preview",
					autoClose: !0,
					files: [],
					scale: .1,
					currentItem: 0,
					duration: 150
				})
			},
			_init: function () {
				FX.FilePreview.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.element.addClass("x-window-mask modal dark").css({
					"z-index": FX.STATIC.zIndex++
				}),
				b.autoClose && this.element.click(function (b) {
					a(b.target).hasClass("x-window-mask") && c.destroy()
				}),
				this.$fileWrapper = a("<div/>").appendTo(this.element),
				this._createNaviBtns(),
				b.files && (this.totalPage = b.files.length, b.files.map(function (b) {
						a('<div class="file-item"/>').appendTo(c.$fileWrapper)
					}), this._viewFileAt(b.currentItem))
			},
			_viewFileAt: function (b) {
				var c = this.options,
				d = this;
				this.currentPage = b,
				this.$pageIndex && this.$pageIndex.text(b + 1 + " / " + this.totalPage);
				var e = c.files[b];
				if (e)
					if (this.$fileWrapper.children(".file-item").hide(), this.$currentView = this.$fileWrapper.children(".file-item").eq(b), this.$currentView.show(), this.$currentView.children() && 0 !== this.$currentView.children().length)
						d._bindDownloadEvent(d.$download, d.$currentView.data("url"), e.name);
					else {
						var f = a.extend({
								down: !0
							}, c.files[b]);
						if (e.downloadURL ? (d._bindDownloadEvent(d.$download, url, e.name), d.$currentView.data("url", e.downloadURL)) : FX.Utils.getFileDownloadURL(f, function (a) {
								d._bindDownloadEvent(d.$download, a, e.name),
								d.$currentView.data("url", a)
							}), e.mime && FX.Utils.startWith(e.mime, "image"))
							e.previewURL ? a("<img/>").attr("src", e.previewURL).appendTo(d.$currentView) : FX.Utils.getFileDownloadURL(a.extend({
									thumb: {
										mode: 2,
										width: 1200,
										height: 1200
									}
								}, e), function (b) {
								var c,
								e,
								f,
								g,
								h = !1;
								a("<img/>").attr("src", b).on("mousedown", function (b) {
									h = !0,
									c = b.pageX,
									e = b.pageY,
									f = parseInt(a(b.currentTarget).css("left").replace("px", "")),
									g = parseInt(a(b.currentTarget).css("top").replace("px", ""))
								}).on("mousemove", function (b) {
									if (h) {
										var d = a(b.currentTarget);
										document.onmousemove = function (a) {
											var b = a.pageX - c,
											h = a.pageY - e;
											d.css({
												top: h + g,
												left: b + f
											}),
											a.preventDefault()
										}
									}
								}).on("mouseup", function (a) {
									h = !1,
									document.onmousemove = function (a) {
										return a.preventDefault(),
										!1
									}
								}).on("wheel", function (b) {
									b.originalEvent.deltaY > 0 ? d._scaleImg(a(b.currentTarget), !1, .02, 0) : d._scaleImg(a(b.currentTarget), !0, .02, 0)
								}).appendTo(d.$currentView)
							});
						else {
							var g = a('<div class="file-detail-wrapper"/>').appendTo(d.$currentView),
							h = e.name || "";
							a('<div class="file-ico"/>').append(a('<i class="icon-file"/>')).append(a('<span class="file-type"/>').text(h.split(".").pop())).appendTo(g),
							a("<div/>").text(h).appendTo(g),
							a("<div/>").text(FX.Utils.formatFileSize(e.size)).appendTo(g),
							e.uploadTime && a("<div/>").text(FX.Utils.date2Str(new Date(e.uploadTime), "yyyy-MM-dd HH:mm:ss")).appendTo(g)
						}
					}
			},
			_createNaviBtns: function () {
				var b = this,
				c = this.options;
				a('<i class="icon-close-normal file-nav close">').click(function () {
					b.destroy()
				}).appendTo(this.element),
				this.$download = a('<a target="_blank" class="file-nav download"/>').append(a('<i class="icon-download">')).appendTo(this.element),
				this.options.files.length > 1 && (this.$pageIndex = a('<span class="file-counter"/>').appendTo(this.element), a('<i class="icon-angleright file-nav next"/>').click(function () {
						b._viewFileAt((b.currentPage + 1) % b.totalPage)
					}).appendTo(this.element), a('<i class="icon-angleleft file-nav prev"/>').click(function () {
						b._viewFileAt((b.totalPage + b.currentPage - 1) % b.totalPage)
					}).appendTo(this.element)),
				a('<i class="icon-enlargement file-nav enlargement">').on("click", function () {
					var a = b.$currentView.children("img");
					a.length > 0 && b._scaleImg(a, !0, c.scale, c.duration)
				}).appendTo(this.element),
				a('<i class="icon-narrow file-nav narrow">').on("click", function () {
					var a = b.$currentView.children("img");
					a.length > 0 && b._scaleImg(a, !1, c.scale, c.duration)
				}).appendTo(this.element)
			},
			_scaleImg: function (a, b, c, d) {
				var e = (this.options, parseInt(a.css("width").replace("px", ""))),
				f = parseInt(a.css("height").replace("px", ""));
				b ? a.animate({
					width: e * (1 + c),
					height: f * (1 + c)
				}, d) : a.animate({
					width: e * (1 - c),
					height: f * (1 - c)
				}, d)
			},
			_bindDownloadEvent: function (a, b, c) {
				a.click(function () {
					FX.Utils.fileDownload(b, c)
				})
			}
		}),
	a.shortcut("filepreview", FX.FilePreview)
}
(jQuery), function (a) {
	FX.InputGroup = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.InputGroup.superclass._defaultConfig.apply(), {
					baseCls: "fui-input-group",
					prevEl: null,
					inputEl: {
						type: "text"
					},
					nextEl: null,
					height: 30
				})
			},
			_init: function () {
				FX.InputGroup.superclass._init.apply(this, arguments);
				var b = this.options;
				if (b.prevEl) {
					var c = a('<div class="addon" />').appendTo(this.element);
					FX.createWidget(a.extend({}, b.prevEl, {
							renderEl: c,
							customCls: "mask"
						}))
				}
				var d = a('<div class="addon" />').appendTo(this.element);
				if (this.inputEl = FX.createWidget(a.extend({}, b.inputEl, {
								renderEl: d,
								height: b.height
							})), b.nextEl) {
					var e = a('<div class="addon" />').appendTo(this.element);
					FX.createWidget(a.extend({}, b.nextEl, {
							renderEl: e,
							customCls: "mask"
						}))
				}
			},
			getValue: function () {
				return this.inputEl.getValue()
			},
			setValue: function (a) {
				this.inputEl.setValue(a)
			},
			checkValidate: function () {
				return this.inputEl.checkValidate()
			},
			showErrorMsg: function (a) {
				this.inputEl.showErrorMsg(a)
			}
		}),
	a.shortcut("inputgroup", FX.InputGroup)
}
(jQuery), function (a) {
	FX.DeptSelect = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DeptSelect.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_dept_select",
					width: 240,
					height: 30,
					value: {
						items: []
					},
					hasSelectEmpty: !0,
					dynamicType: "select",
					emptyId: "0",
					limit: {},
					onStopEdit: null,
					edge: {
						width: 300,
						height: 300
					}
				})
			},
			_init: function () {
				FX.DeptSelect.superclass._init.apply(this, arguments)
			},
			_initData: function () {
				var a = this;
				if (FX.Utils.isObjectEmpty(this.value) && (this.value = {
							items: []
						}), FX.Utils.isObjectEmpty(this.value.items))
					return this.items = [], void this._initSelectPane();
				var b = FX.Utils.createMask(this.element, {
						isLight: !0,
						hasLoader: !0
					});
				FX.Utils.ajax({
					url: "/corp/list_member_name",
					data: {
						isDepartmentOnly: !0,
						members: this.value.items
					}
				}, function (c) {
					var d = [];
					FX.Utils.forEach(c.departments, function (a, b) {
						d.push({
							_id: b._id,
							name: b.name
						})
					}),
					a.items = d,
					a._initSelectPane(),
					b.remove()
				})
			},
			_getDynamicFields: function () {
				var a = this.options,
				b = [];
				return "set" === a.dynamicType && b.push({
					_id: FX.CONST.DEPT_ID.CURRENT,
					name: ""
				}),
				a.hasSelectEmpty && b.push({
					_id: a.emptyId,
					name: ""
				}),
				b
			},
			_initSelectPane: function () {
				var a = this.options,
				b = this;
				if (this.value.hasEmpty && this.items.unshift({
						_id: a.emptyId,
						name: ""
					}), this.value.hasCurrentDept) {
					if ("set" !== a.dynamicType)
						return void FX.Utils.dataAjax({
							url: "/data/member/current_departments"
						}, function (a) {
							var c = [];
							FX.Utils.forEach(a.departmentList, function (a, b) {
								c.push({
									_id: b._id,
									name: b.name
								})
							}),
							b.items = c.concat(b.items),
							b._createSelectList(),
							b._bindEditEvent(),
							b.value = b.getValue()
						});
					this.items.unshift({
						_id: FX.CONST.DEPT_ID.CURRENT,
						name: ""
					})
				}
				this._createSelectList(),
				this._bindEditEvent()
			},
			_bindEditEvent: function () {
				var b = this;
				this.$selectList.unbind("click"),
				this.$selectList.bind("click", function (c) {
					var d = a(c.target).closest(".remove-btn");
					if (d.length > 0) {
						var e = a(c.target).closest(".select-item"),
						f = e.data("item");
						f && b._removeSelectItem(f)
					}
					b.$selectPane ? b._showSelectPane() : (b.$selectPane = a('<div class="dept-select-pane x-dropdown"/>').appendTo("body"), b._createSelectPane(), b._showSelectPane()),
					b.$input.children("input").focus()
				}),
				this.$input.unbind("keydown"),
				this.$input.bind("keydown", function (a) {
					if (FX.Utils.isEmpty(b.$input.children("input").val())) {
						switch (a.keyCode) {
						case 37:
							var c = b.$input.prev(".select-item");
							c.length > 0 && b.$input.insertBefore(c);
							break;
						case 39:
							var d = b.$input.next(".select-item");
							d.length > 0 && b.$input.insertAfter(d);
							break;
						case 8:
							var e = b.$input.prev(".select-item");
							e.length > 0 && b._removeSelectItem(e.data("item"))
						}
						b.$input.children("input").focus()
					}
				}),
				this.$input.unbind("keyup"),
				this.$input.bind("keyup", function () {
					var a = b.$input.children("input").val();
					b._createSelectPane(a)
				})
			},
			_createSelectPane: function (b) {
				var c = this;
				this.$selectPane.children(".select-search").remove(),
				this._createDynamicList(),
				FX.Utils.isEmpty(b) ? this.departmentTree ? this.departmentTree.setVisible(!0) : FX.Utils.dataAjax({
					url: "/data/member/departments"
				}, function (b) {
					c.departments = a.extend(!0, [], b.departments),
					c.departments[0] && !c.departments[0]._id && c.departments.shift(),
					c._createDepartmentList()
				}) : (this.departmentTree && this.departmentTree.setVisible(!1), this._createSearchList(b))
			},
			_calSelectPanePos: function () {
				var a = {
					"z-Index": FX.STATIC.zIndex++
				},
				b = this.element.offset(),
				c = this.options.edge,
				d = document.body.clientWidth - b.left;
				d < c.width ? (a.right = d - this.element.outerWidth(), a.left = "auto") : (a.right = "auto", a.left = b.left);
				var e = document.body.clientHeight + document.body.scrollTop - b.top - this.element.outerHeight();
				return e < c.height ? (a.top = "auto", a.bottom = document.body.clientHeight - b.top) : (a.top = b.top + this.element.outerHeight(), a.bottom = "auto"),
				a
			},
			_showSelectPane: function () {
				var b = this;
				this.$selectPane.is(":visible") || (this.$selectPane.css(this._calSelectPanePos()), this.$selectPane.slideDown("fast"), a(document).bind("mousedown.hide", function (c) {
						a(c.target).closest(".dept-select-pane,.fx_dept_select").length > 0 || b._hideSelectPane()
					}))
			},
			_hideSelectPane: function () {
				var b = this.options;
				this.$input.children("input").val(""),
				this.$selectPane.slideUp("fast"),
				a(document).unbind("mousedown.hide"),
				FX.Utils.applyFunc(this, b.onStopEdit, [], !1)
			},
			_createSelectList: function () {
				var b = this;
				this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element),
				this.$input = a('<li class="select-input"/>').append('<input placeholder=""/>').appendTo(this.$selectList),
				FX.Utils.forEach(this.items, function (a, c) {
					b._createSelectItem(c)
				})
			},
			_addSelectItem: function (a) {
				this._createSelectItem(a),
				this.value = this.getValue(),
				this.refresh()
			},
			_removeSelectItem: function (b) {
				a("#" + b._id, this.$selectList).remove(),
				this.value = this.getValue(),
				this.refresh()
			},
			_createSelectItem: function (b) {
				if (b) {
					if (a("#" + b._id, this.$selectList).length > 0)
						return;
					a('<li class="select-item"><i class="select-icon icon-department"/><span>' + b.name + '</span><span class="remove-btn"><i class="icon-close-large"/></span></li>').attr("id", b._id).data("item", b).insertBefore(this.$input)
				}
			},
			_doSelectItem: function (a) {
				if (this._checkLimit(a)) {
					var b = {
						name: a.name,
						_id: a._id
					};
					this.value.items.indexOf(b._id) > -1 ? this._removeSelectItem(b) : this._addSelectItem(b)
				}
			},
			_createDepartmentList: function () {
				var b = this;
				this.departmentTree = new FX.Tree({
						renderEl: a("<div/>").appendTo(this.$selectPane),
						customCls: "x-department-tree select-department",
						Nodes: a.extend(!0, [], this.departments),
						setting: {
							view: {
								expandSpeed: 100
							},
							data: {
								simpleData: {
									enable: !0,
									idKey: "departmentId",
									pIdKey: "parentId"
								}
							},
							callback: {
								onCheck: function (a, c) {
									b._doSelectItem(c)
								},
								onClick: function (a, c) {
									b._doSelectItem(c)
								},
								beforeNodeCreate: function (a) {
									b._checkLimit(a) || (a.nocheck = !0),
									a.checked = b._checkSelectState(a)
								},
								onNodeCreated: function (a, c) {
									c.isParent && !c.open && c.level < 1 && this.expandNode(c, !0),
									c.departmentId == b.currentDepartment && this.selectNode(c)
								}
							},
							check: {
								enable: !0,
								chkboxType: {
									Y: "",
									N: ""
								}
							}
						}
					})
			},
			_createDepartmentItem: function (b) {
				var c = this,
				d = a("<li/>").append(a("<span/>").text(b.name)).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).data("item", b).click(function () {
						var a = d.children(".select-btn");
						if (a.hasClass("select"))
							a.removeClass("select"), c._removeSelectItem(d.data("item"));
						else {
							a.addClass("select");
							var b = d.data("item");
							c._addSelectItem(b)
						}
					});
				return this._checkSelectState(b) && d.children(".select-btn").addClass("select"),
				d
			},
			_checkSelectState: function (a) {
				var b = this.options;
				switch (a._id) {
				case b.emptyId:
					return this.value.hasEmpty;
				case FX.CONST.DEPT_ID.CURRENT:
					return this.value.hasCurrentDept;
				default:
					return this.value.items.indexOf(a._id) > -1
				}
			},
			_createDynamicList: function () {
				var b = this;
				this.options;
				this.$dynamicList ? this.$dynamicList.show() : (this.$dynamicList = a('<ul class="department-list"/>').appendTo(this.$selectPane), FX.Utils.forEach(this._getDynamicFields(), function (a, c) {
						b.$dynamicList.append(b._createDepartmentItem(c))
					}))
			},
			_createSearchList: function (b) {
				var c = this,
				d = [],
				e = a('<div class="select-search"/>').appendTo(this.$selectPane),
				f = new RegExp(b);
				FX.Utils.forEach(this.departments, function (a, b) {
					f.test(b.name) && d.push(b)
				}),
				d.length <= 0 ? e.append(a('<div class="search-empty"/>').text(" ")) : (this.$searchList = a('<ul class="department-list"/>').appendTo(e), FX.Utils.forEach(d, function (a, b) {
						c._checkLimit(b) && c.$searchList.append(c._createDepartmentItem(b))
					}))
			},
			_checkLimit: function () {
				return !0
			},
			getItems: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).data("item"))
				}),
				b
			},
			setValue: function (a) {
				this.value = a,
				this._initData()
			},
			getValue: function () {
				var b = this.options,
				c = {
					items: []
				};
				return this.$selectList ? a(".select-item", this.$selectList).each(function (a, d) {
					switch (d.id) {
					case b.emptyId:
						c.hasEmpty = !0;
						break;
					case FX.CONST.DEPT_ID.CURRENT:
						c.hasCurrentDept = !0;
						break;
					default:
						c.items.push(d.id)
					}
				}) : c = this.value,
				c
			},
			_refreshDepartmentList: function (b) {
				var c = this;
				a("li", b).each(function (b, d) {
					var e = a(d).data("item");
					e && (c._checkSelectState(e) ? a(d).children(".select-btn").addClass("select") : a(d).children(".select-btn").removeClass("select"))
				})
			},
			refresh: function () {
				this.departmentTree && this.departmentTree.refresh(),
				this.$dynamicList && this._refreshDepartmentList(this.$dynamicList),
				this.$searchList && this._refreshDepartmentList(this.$searchList)
			},
			rebuild: function (a) {
				this.value = a,
				this._initData(),
				this.refresh()
			}
		}),
	a.shortcut("deptselect", FX.DeptSelect)
}
(jQuery), function (a) {
	FX.Slider = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Slider.superclass._defaultConfig.apply(this, arguments), {
					renderEl: a("<div />").appendTo("body"),
					baseCls: "x-slider",
					title: "",
					contentWidget: {},
					content: null,
					onCreate: null,
					onClose: null,
					btn4Left: null,
					closeDuration: 218,
					shouldCloseConfirm: !1,
					confirmMsg: null
				})
			},
			_init: function () {
				FX.Slider.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.element.css({
					"z-index": FX.STATIC.zIndex++
				});
				var d = a('<div class="slider-body"/>').appendTo(this.element),
				e = a('<div class="slider-header"/>').append(a('<span class="title"/>').text(b.title)).appendTo(d);
				FX.Utils.isNull(b.btn4Left) || a('<div class="header-btn"/>').text(b.btn4Left.text).on("click", function () {
					FX.Utils.applyFunc(this, b.btn4Left.onClick, [], !1)
				}).appendTo(e),
				a('<i class="icon-close-large"/>').click(function () {
					b.shouldCloseConfirm ? FX.Msg.alert({
						msg: b.confirmMsg,
						onOk: function () {
							c.close()
						}
					}) : c.close()
				}).appendTo(e);
				var f = a('<div class="slider-main"/>').appendTo(d);
				this._createContent(f)
			},
			_createContent: function (b) {
				var c = this.options,
				d = this;
				FX.Utils.applyFunc(this, c.onContentCreate, [b], !1) === !1 && (FX.Utils.isObjectEmpty(c.contentWidget) ? b.append(c.content) : d.contentWidget = FX.createWidget(a.extend({
								renderEl: a("<div/>").appendTo(b)
							}, c.contentWidget)))
			},
			getContentWidget: function () {
				return this.contentWidget
			},
			show: function () {
				var a = this;
				setTimeout(function () {
					a.element.addClass("fadein")
				}, 0)
			},
			close: function () {
				var a = this.options,
				b = this;
				this.element.removeClass("fadein"),
				setTimeout(function () {
					b.element.remove(),
					FX.Utils.applyFunc(b, a.onClose, [], !1)
				}, a.closeDuration)
			}
		})
}
(jQuery), function (a) {
	FX.Banner = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Button.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "x-banner",
					width: null,
					text: ""
				})
			},
			_init: function () {
				FX.Banner.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				a('<span class="msg" />').text(c.text).appendTo(this.element),
				a('<i class="icon-close-large" />').click(function () {
					b.element.fadeOut()
				}).appendTo(this.element)
			}
		})
}
(jQuery), function (a) {
	FX.Pagination = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Button.superclass._defaultConfig.apply(), {
					baseCls: "x-pagination",
					limit: 10,
					count: 1,
					curPage: 1,
					onChangePage: null,
					hasTurnLast: !1
				})
			},
			_init: function () {
				FX.Pagination.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.curPage = c.curPage;
				var d = Math.ceil(c.count / c.limit) || 1,
				e = a('<div class="page-turn"/>').appendTo(this.element);
				b.$pre = a('<button class="page-btn pre" />').append('<i class="icon-angleleft" />').appendTo(e),
				b.$next = a('<button class="page-btn next" />').append('<i class="icon-angleright" />').appendTo(e);
				var f = a('<div class="page-jump" />').appendTo(this.element);
				b.$pageInput = new FX.Number({
						renderEl: a('<div class="page-input" />').keyup(function (b) {
							var c = b.keyCode || b.which;
							c === FX.Keys.ENTER && a(this).children(".x-input-focus").blur()
						}).appendTo(f),
						value: this.curPage,
						width: 30,
						onStopEdit: function (a) {
							if (a) {
								var e = this.getValue();
								if (e < 1 || e > d)
									return void this.setState(FX.States.ERROR);
								b.curPage = e,
								FX.Utils.applyFunc(b, c.onChangePage, [b.curPage, c.limit], !1)
							}
						}
					}),
				a('<span class="total"/>').text(" / " + d).appendTo(f),
				c.hasTurnLast && (b.$first = a('<button class="page-btn first" />').append('<i class="icon-firstpage" />').prependTo(e), b.$last = a('<button class="page-btn last" />').append('<i class="icon-lastpage" />').appendTo(e)),
				b._checkTurnPage(),
				this._bindEvents()
			},
			_bindEvents: function () {
				var b = this,
				c = this.options,
				d = function (d) {
					var e = d.target,
					f = d.type,
					g = a(e).closest(".page-btn");
					if (g.length && "click" === f) {
						if (g.hasClass("disabled"))
							return;
						g.hasClass("next") ? b.curPage += 1 : g.hasClass("pre") ? b.curPage -= 1 : g.hasClass("first") ? b.curPage = 1 : g.hasClass("last") && (b.curPage = Math.ceil(c.count / c.limit) || 1),
						b.$pageInput.setValue(b.curPage),
						b._checkTurnPage(),
						FX.Utils.applyFunc(b, c.onChangePage, [b.curPage, c.limit], !1)
					}
				};
				a(this.element).unbind(".pagination"),
				a(this.element).bind("click.pagination", d)
			},
			_checkTurnPage: function () {
				var b = this,
				c = this.options,
				d = Math.ceil(c.count / c.limit) || 1;
				a(".page-btn", this.element).removeClass("disabled"),
				1 === b.curPage && (b.$pre.addClass("disabled"), b.$first && b.$first.addClass("disabled")),
				b.curPage === d && (b.$next.addClass("disabled"), b.$last && b.$last.addClass("disabled"))
			}
		})
}
(jQuery), function (a) {
	FX.Navigator = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Navigator.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "x-navigator",
					items: [],
					currentMenuId: null,
					onMenuClick: null,
					delay: 218,
					edge: 5,
					enable: !0,
					menuKey: null
				})
			},
			_init: function () {
				FX.Navigator.superclass._init.apply(this, arguments),
				this._createItems(),
				this._bindEvent()
			},
			_createItems: function () {
				var b = this,
				c = this.options,
				d = c.items.slice(0, c.edge);
				FX.Utils.forEach(d, function (d, e) {
					var f = e[c.menuKey] === c.currentMenuId ? "active" : "";
					a('<div class="menu-item ' + f + '"/>').text(e.name).data("menuId", e[c.menuKey]).appendTo(b.element)
				}),
				c.items.length > c.edge && (this.wrapperItems = c.items.slice(c.edge, c.items.length + 1), FX.Utils.forEach(this.wrapperItems, function (a, d) {
						if (d[c.menuKey] === c.currentMenuId)
							return b._changeWrapperItem(a, d), !1
					}), a('<div class="menu-item menu-icon"><i class="icon-lastpage"></i></div>').appendTo(this.element))
			},
			_changeWrapperItem: function (b, c) {
				var d = this.options,
				e = a(this.element).children(".menu-item").eq(d.edge - 1),
				f = {
					name: e.text()
				};
				f[d.menuKey] = e.data("menuId"),
				this.wrapperItems.splice(b, 1, f),
				e.text(c.name).data("menuId", c[d.menuKey]).addClass("active").siblings().removeClass("active")
			},
			_createMenuWrapper: function () {
				var b = this,
				c = this.options,
				d = a('<div class="x-navigator-wrapper"/>');
				return FX.Utils.forEach(this.wrapperItems, function (e, f) {
					a('<div class="menu-item"/>').text(f.name).data("menuId", f[c.menuKey]).on("click", function (d) {
						if (!c.enable)
							return d.preventDefault(), !1;
						var g = a(d.currentTarget);
						b.bubble.close(),
						b._changeWrapperItem(e, f),
						FX.Utils.applyFunc(b, c.onMenuClick, [g.data("menuId")], !1)
					}).appendTo(d)
				}),
				d
			},
			_bindEvent: function () {
				var b = this,
				c = this.options;
				this.element.click(function (d) {
					if (!c.enable)
						return d.preventDefault(), !1;
					var e = a(d.target).closest(".menu-item");
					e.length > 0 && (e.hasClass("active") || e.hasClass("menu-icon") ? e.hasClass("menu-icon") && (b.bubble = FX.Msg.bubble({
									anchor: e,
									text4Cancel: null,
									text4Ok: null,
									contentHTML: b._createMenuWrapper(),
									minWidth: 170,
									contentPadding: 0,
									hAdjust: 20,
									dockPosition: "right"
								})) : (e.addClass("active").siblings().removeClass("active"), FX.Utils.applyFunc(b, c.onMenuClick, [e.data("menuId")], !1)))
				})
			},
			refresh: function (b) {
				a(this.element).empty(),
				this.options = a.extend(this.options, b),
				this._createItems()
			},
			empty: function () {
				var b = this.options,
				c = this;
				a(this.element).addClass("fade-out"),
				setTimeout(function () {
					a(c.element).remove()
				}, b.delay)
			}
		})
}
(jQuery), function (a) {
	FX.FlowBtn = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowBtn.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_btn",
					flow: {},
					onSubmit: null,
					onCancel: null
				})
			},
			_init: function () {
				FX.FlowBtn.superclass._init.apply(this, arguments),
				this._initBtn()
			},
			_initBtn: function () {
				var b = this.options,
				c = this,
				d = 0;
				b.flow.print && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.print.text,
						width: 120,
						style: "green",
						onClick: function () {
							FX.Utils.applyFunc(c, b.onSubmit, ["print", !0], !1)
						}
					})),
				b.flow.forward && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.forward.text,
						width: 120,
						style: "green",
						onClick: function () {
							FX.Utils.applyFunc(c, b.onSubmit, ["forward", !0], !1)
						}
					})),
				b.flow.save && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.save.text,
						width: 120,
						onClick: function () {
							FX.Utils.applyFunc(c, b.onSubmit, ["save"], !1)
						}
					})),
				b.flow.back && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.back.text,
						style: "white",
						width: 120,
						onClick: function () {
							FX.Utils.applyFunc(c, b.onSubmit, ["back"], !1)
						}
					})),
				b.flow.revoke && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.revoke.text,
						style: "white",
						width: 120,
						onClick: function () {
							FX.Utils.applyFunc(c, b.onSubmit, ["revoke"], !1)
						}
					})),
				b.flow.close && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.close.text,
						style: "white",
						width: 120,
						onClick: function () {
							FX.Utils.applyFunc(c, b.onSubmit, ["close"], !1)
						}
					})),
				b.flow.cancel && (d++, new FX.Button({
						renderEl: a('<div class="flow-btn"/>').appendTo(this.element),
						text: b.flow.cancel.text,
						style: "white",
						width: 120,
						onClick: function () {
							FX.STATIC.DATAID = null,
							FX.Utils.applyFunc(c, b.onCancel, [!1], !0)
						}
					})),
				this.element.width(140 * d)
			}
		}),
	a.shortcut("flowbtn", FX.FlowBtn)
}
(jQuery), function (a) {
	FX.Msg = {
		bubble: function (b) {
			var c = a.extend({
					anchor: null,
					msg: "",
					minWidth: null,
					contentWidget: null,
					contentHTML: null,
					contentPadding: 10,
					onContentCreate: null,
					onCancel: null,
					onOk: null,
					type: "info",
					width4Btn: 100,
					text4Cancel: "",
					text4Ok: "",
					dockPosition: "left",
					edge: 150,
					onShow: null,
					onClose: null,
					animation: !0,
					scrollObj: null,
					hAdjust: 0
				}, b);
			if (c.anchor) {
				var d = a('<div class="x-msg-bubble"/>').addClass(c.type);
				c.animation && d.addClass("animation"),
				c.minWidth && d.css({
					"min-width": c.minWidth
				});
				var e,
				f = a('<div class="content"/>').css({
						padding: c.contentPadding
					}).appendTo(d);
				FX.Utils.isEmpty(c.msg) ? c.contentWidget ? (c.contentWidget.renderEl = a("<div/>").appendTo(f), e = FX.createWidget(c.contentWidget)) : c.contentHTML && c.contentHTML.appendTo(f) : a("<span/>").text(c.msg).appendTo(f);
				var g = !1;
				if (c.text4Cancel && (g = !0, new FX.Button({
							renderEl: a("<div/>").appendTo(d),
							customCls: "navi-btn-cancel",
							style: "white",
							text: c.text4Cancel,
							width: c.width4Btn,
							onClick: function (a) {
								FX.Utils.applyFunc(this, c.onCancel, [e, a], !0) !== !1 && o()
							}
						})), c.text4Ok) {
					g = !0;
					var h = "green";
					"error" === c.type && (h = "red"),
					new FX.Button({
						renderEl: a("<div/>").appendTo(d),
						customCls: "navi-btn-ok",
						style: h,
						text: c.text4Ok,
						width: c.width4Btn,
						onClick: function (a) {
							FX.Utils.applyFunc(this, c.onOk, [e, a], !0) !== !1 && o()
						}
					})
				}
				g && f.css({
					"padding-bottom": c.contentPadding + 50
				});
				var i = a('<div class="triangle-up"/>').appendTo(d),
				j = c.anchor.offset(),
				k = j.top + c.anchor.height() + 8 - a("body").offset().top,
				l = {
					"z-index": FX.STATIC.zIndex++
				},
				m = Math.min(c.edge, document.body.clientHeight / 2);
				document.body.clientHeight + document.body.scrollTop - k <= m ? (l.top = "auto", l.bottom = document.body.clientHeight - j.top + 8, d.addClass("dock-bottom")) : (l.top = k, l.bottom = "auto", d.addClass("dock-top"));
				var n = c.hAdjust || 0;
				switch (c.dockPosition) {
				case "left":
					d.addClass("dock-left"),
					l.left = j.left + c.anchor.width() / 2 - 8 - n,
					i.css({
						left: n
					});
					break;
				case "right":
					d.addClass("dock-right"),
					l.right = document.body.clientWidth - j.left - c.anchor.width() / 2 - 8 - n,
					i.css({
						right: n
					})
				}
				var o = function () {
					FX.Utils.applyFunc(this, c.onClose, arguments, !1) === !1 && (d.removeClass("active"), a(document).unbind("mousedown.bubble"), c.scrollObj && a(c.scrollObj).unbind("scroll.bubble"), setTimeout(function () {
							d.remove()
						}, c.animation ? 500 : 0))
				};
				return d.css(l).appendTo("body"),
				setTimeout(function () {
					d.addClass("active"),
					FX.Utils.applyFunc(this, c.onShow, [e], !1);
					var b = function (b) {
						var c = a(b.target).closest(".x-msg-bubble,.x-dropdown");
						0 === c.length && o()
					};
					a(document).bind("mousedown.bubble", b),
					c.scrollObj && a(c.scrollObj).bind("scroll.bubble", b)
				}, 0), {
					close: o
				}
			}
		},
		toast: function (b) {
			var c = a.extend({
					dockPosition: "topcenter",
					msg: "",
					type: "info",
					onShow: null,
					onClose: null,
					timeout: 300,
					duration: 3e3
				}, b);
			if (!(a(".x-msg-toast").length > 0 || FX.Utils.isEmpty(c.msg))) {
				var d = a('<div class="x-msg-toast"/>').addClass(c.dockPosition).appendTo("body"),
				e = a('<div class="content"/>').addClass(c.type).appendTo(d),
				f = a('<div class="toast-icon"/>').append(a('<i class="icon-toast-type"/>')).appendTo(e);
				a("<div/>").text(c.msg).appendTo(e),
				f.css("line-height", d.height() + "px"),
				d.fadeIn(c.timeout, function () {
					var a = setTimeout(function () {
							d.fadeOut(c.timeout, function () {
								d.remove()
							})
						}, c.duration);
					d.click(function () {
						clearTimeout(a),
						d.fadeOut(c.timeout, function () {
							d.remove()
						})
					})
				})
			}
		},
		alert: function (b) {
			var c = a.extend({
					title: "",
					msg: "",
					type: "warning",
					content: null,
					text4Ok: "",
					text4Cancel: "",
					width4Btn: 100,
					onOk: null,
					onCancel: null,
					enable4Ok: !0,
					enable4Cancel: !0
				}, b);
			if (!(a(".x-msg-alert").length > 0)) {
				var d = function () {
					e.fadeOut(function () {
						e.remove()
					}),
					f.removeClass("showAlert"),
					f.addClass("hideAlert"),
					f.remove()
				},
				e = a('<div class="x-window-mask modal light" tabIndex="-1"/>').css({
						"z-index": FX.STATIC.zIndex++
					}).appendTo("body"),
				f = a('<div class="x-msg-alert"/>').appendTo("body"),
				g = a('<div class="icon"/>').append(a('<i class="icon-toast-type"/>')).appendTo(f);
				g.addClass(c.type),
				c.title && f.append(a('<div class="title" />').text(c.title)),
				c.msg && f.append(a('<div class="text" />').text(c.msg)),
				c.content && f.append(c.content);
				var h,
				i,
				j = a('<div class="btn-container"/>').appendTo(f);
				if (c.text4Cancel && (i = new FX.Button({
								renderEl: a("<div/>").appendTo(j.addClass("double")),
								customCls: "navi-btn-cancel",
								style: "white",
								text: c.text4Cancel,
								width: c.width4Btn,
								enable: c.enable4Cancel,
								onClick: function () {
									FX.Utils.applyFunc(this, c.onCancel, [], !0) !== !1 && d()
								}
							})), c.text4Ok) {
					var k = "blue";
					"error" !== c.type && "warning" !== c.type || (k = "red"),
					h = new FX.Button({
							renderEl: a("<div/>").appendTo(j),
							customCls: "navi-btn-ok",
							style: k,
							text: c.text4Ok,
							width: c.width4Btn,
							enable: c.enable4Ok,
							onClick: function () {
								FX.Utils.applyFunc(this, c.onOk, [], !0) !== !1 && d()
							}
						})
				}
				return f.addClass("showAlert"),
				e.fadeIn(),
				f.show(), {
					okBtn: h,
					cancelBtn: i
				}
			}
		},
		broadcast: function (b) {
			var c = a.extend({
					msg: "",
					url: "",
					text4Ok: "",
					onOk: null,
					onClose: null
				}, b),
			d = this;
			if (!(a(".x-msg-broadcast").length > 0 || FX.Utils.isEmpty(c.msg))) {
				a("html").addClass("broadcast-html");
				var e = a('<div class="x-msg-broadcast"/>').prependTo("body");
				setTimeout(function () {
					e.addClass("translate-in"),
					a("html").addClass("translate-in")
				});
				var f = a('<a class="broadcast-content"/>').text(c.msg).appendTo(e);
				c.url && f.attr("href", c.url),
				c.text4Ok && a('<a class="broadcast-btn"/>').text(c.text4Ok).on("click", function () {
					FX.Utils.applyFunc(this, b.onOk, [], !1)
				}).appendTo(e),
				a('<i class="icon-close-large"/>').on("click", function () {
					d.closeBroadcast(),
					FX.Utils.applyFunc(this, b.onClose, [], !1)
				}).appendTo(e)
			}
		},
		closeBroadcast: function () {
			var b = a(".x-msg-broadcast");
			b.length > 0 && (b.removeClass("translate-in"), a("html").removeClass("translate-in"), setTimeout(function () {
					a("html").removeClass("broadcast-html"),
					b.remove()
				}, 218))
		}
	}
}
(jQuery), function (a) {
	FX.ViewFormMixin = FX.ViewFormMixin || {},
	a.extend(FX.ViewFormMixin, {
		loadForm: function () {
			var a = this;
			FX.Utils.dataAjax({
				url: "/dashboard/app/" + this.appId + "/entry/" + this.entryId
			}, function (b) {
				FX.Vip.showUpgradeTip(b.bufferState);
				var c = b.entry;
				a._createForm(c)
			})
		},
		_createForm: function (b) {
			var c = this,
			d = a(".content", ".form");
			FX.STATIC.ENTRYID = this.entryId,
			new FX.Form(a.extend(b.content, {
					renderEl: a('<div class = "form"/>').appendTo(d),
					appId: c.appId,
					entryId: c.entryId,
					submitText: "",
					title: b.name,
					extParam: c.extParam,
					buttonPosition: "middle",
					onSuccess: function (a) {
						var b = d.empty();
						c._showSuccessInfo(b.addClass("form-success"), a, function () {
							location.reload()
						})
					}
				}))
		},
		_showSuccessInfo: function (b, c, d) {
			var e = this,
			f = a('<div class="success-pane"/>').appendTo(b);
			a("<div/>").append(a('<i class="img-icon"/>')).appendTo(f),
			a('<span class="msg-title"/>').text("").appendTo(f),
			FX.Utils.isEmpty(c.check_msg) || a("<div>" + c.check_msg + "</div>").appendTo(f);
			var g = a('<div class="button-pane"/>').appendTo(f);
			d && new FX.Button({
				renderEl: a('<div class="button-style"/>').appendTo(g),
				text: " ",
				width: 120,
				style: "green",
				onClick: function () {
					FX.Utils.applyFunc(e, d, [], !1)
				}
			})
		}
	})
}
(jQuery), function (a) {
	FX.QueryFormMixin = FX.QueryFormMixin || {},
	a.extend(FX.QueryFormMixin, {
		loadQueryForm: function () {
			var a = this;
			FX.Utils.dataAjax({
				url: "/dashboard/app/" + this.appId + "/form/" + this.entryId + "/query_content"
			}, function (b) {
				a.form = b,
				a._initFields(),
				a._createParameterPane(),
				a._createQueryBtn(),
				a._initQRCode && a._initQRCode()
			})
		},
		_initFields: function () {
			var a = this;
			this.filterFields = [],
			this.queryFields = [],
			FX.Utils.forEach(this.form.fields, function (b, c) {
				var d = a.form.queryFields.indexOf(c.name);
				d > -1 && a.queryFields.push(c),
				d = a.form.filterFields.indexOf(c.name),
				d > -1 && a.filterFields.push(c)
			})
		},
		_createParameterPane: function () {
			this.parameter = new FX.Parameter({
					renderEl: a("<div/>").appendTo(this.$parameter),
					hasHeader: !1,
					hasBorder: !1,
					allowBlank: !1,
					fields: this.filterFields,
					onBeforeConvertField: function (a, b) {
						return "text" === b.type && (a.type = "text", a.width = 150, !0)
					}
				})
		},
		_createQueryBtn: function () {
			var b = this;
			new FX.Button({
				renderEl: a("<div />").appendTo(a('<div class="query-btn-pane"/>').appendTo(this.$parameter)),
				style: "green",
				text: "",
				width: 120,
				onClick: function () {
					return b.parameter.checkValidate() ? (b.$parameter.hide(), b.$qrcode && b.$qrcode.hide(), b.$form.addClass("wide-form"), b.$content.show(), void(b.table ? b.table.reload(b.parameter.getValue()) : (b._createTable(), b._createResetBtn()))) : void b._showQueryAlert()
				}
			})
		},
		_showQueryAlert: function () {},
		_createResetBtn: function () {
			var b = this;
			new FX.Button({
				renderEl: a("<div />").appendTo(a('<div class="query-btn-pane"/>').appendTo(this.$content)),
				style: "green",
				text: "",
				width: 120,
				onClick: function () {
					b.$content.hide(),
					b.$form.removeClass("wide-form"),
					b.$parameter.show(),
					b.$qrcode && b.$qrcode.show()
				}
			})
		}
	})
}
(jQuery), function (a) {
	FX.FormEditPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormEditPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_form_edit_pane",
					dataId: null,
					entryId: null,
					flowType: null,
					flowId: null,
					onSuccess: null,
					onFail: null,
					onCancel: null,
					hasFlowBtn: !0
				})
			},
			_init: function () {
				FX.FormEditPane.superclass._init.apply(this, arguments);
				var a = this.options;
				FX.STATIC.ENTRYID = a.entryId,
				this._fetchForm(a.dataId, a.entryId, a.flowType, a.flowId)
			},
			_fetchForm: function (a, b, c, d) {
				var e = this,
				f = this.options;
				FX.STATIC.DATAID = a,
				FX.Utils.dataAjax({
					url: "/data/read",
					data: {
						entryId: b,
						formId: b,
						dataId: a,
						flowId: d
					}
				}, function (d) {
					var f = d.currentFlowId,
					g = FX.Utils.getFlowOption(d, c);
					if (g.isEditable) {
						var h = e._createOpt({
								res: d,
								flow: g,
								flowId: f,
								title: e._createTitle(d, g),
								dataId: a,
								entryId: b,
								flowType: c
							});
						e.form = new FX.Form(h)
					} else
						g.flowType = c, e._showFormData(d, g)
				}, function () {
					return FX.Utils.applyFunc(e, f.onFail, [], !1),
					!1
				})
			},
			_showFormData: function (a, b, c) {
				var d = this,
				e = this.options,
				f = [].concat(a.form.items),
				g = a.data,
				h = null;
				a.form && "grid-2" === a.form.layout && (h = {}, FX.Utils.forEach(f, function (a, b) {
						h[b.widget.widgetName] = b.lineWidth
					})),
				new FX.FormData({
					renderEl: this.element.empty(),
					appId: FX.STATIC.APPID,
					entryId: g.entryId,
					width: e.width,
					height: e.height,
					title: [a.formName, a.flowName].join("-"),
					layout: h,
					header: f,
					data: g,
					flow: b,
					optAuth: a.optAuth,
					hasFlowBtn: e.hasFlowBtn && !c,
					hasFooter: !0,
					hasCustomPrint: !0,
					ignoreVisible: !1,
					onClose: function (a) {
						c ? c() : a ? FX.Utils.applyFunc(d, e.onSuccess, [], !1) : FX.Utils.applyFunc(d, e.onCancel, [], !1)
					},
					onFlowNodeClick: function (a, c, e) {
						d._fetchForm(c, a, b.flowType, e)
					}
				})
			},
			_createTitle: function (a, b) {
				var c = a.formName;
				return 1 === b.flowNodes.length && (c += "  " + b.flowNodes[0].name),
				c
			},
			_createOpt: function (b) {
				var c = this,
				d = this.options;
				return a.extend(b.res.form, {
					renderEl: this.element.empty(),
					appId: FX.STATIC.APPID,
					entryId: b.entryId,
					dataId: b.dataId,
					submitUrl: "/data/update",
					submitData: {
						dataId: b.dataId,
						flowId: b.flowId
					},
					title: b.title,
					width: d.width,
					height: d.height,
					widgetOptAuth: b.res.optAuth,
					buttonPosition: "middle",
					editValue: b.res.data,
					mode: "edit",
					flow: b.flow,
					onSuccess: function (d, e, f) {
						if (f) {
							var g = FX.Utils.getFlowOption(d, "print");
							g.flowId = b.flow.flowId,
							c._showFormData(a.extend(b.res, d), g, function () {
								c._handleSubmitSuccess(a.extend(b, {
										flowAction: e
									}))
							})
						} else
							c._handleSubmitSuccess(a.extend(b, {
									flowAction: e
								}))
					},
					onAfterCancel: function () {
						FX.Utils.applyFunc(c, d.onCancel, [], !1)
					},
					onFlowNodeClick: function (a, d, e) {
						c._fetchForm(d, a, b.flowType, e)
					}
				})
			},
			_handleSubmitSuccess: function (a) {
				var b = this,
				c = this.options;
				switch (FX.STATIC.ENTRYID = null, a.flowAction) {
				case "forward":
				case "save":
				case "back":
					if (a.flow.flowNodes.length > 1)
						if (a.flow.flowNodes.slice(-1)[0].flowId === a.flowId)
							FX.Utils.applyFunc(b, c.onSuccess, [], !1);
						else {
							var d = "";
							FX.Utils.forEach(a.flow.flowNodes, function (b, c) {
								if (c.flowId === a.flowId) {
									var e = a.flow.flowNodes[b + 1];
									d = e ? e.flowId : a.flow.flowNodes[b - 1].flowId
								}
							}),
							b._fetchForm(a.dataId, a.entryId, a.flowType, d)
						}
					else
						FX.Utils.applyFunc(b, c.onSuccess, [], !1);
					break;
				default:
					FX.Utils.applyFunc(b, c.onCancel, [], !1)
				}
			},
			doResize: function (a) {
				this.form && this.form.doResize(a)
			}
		})
}
(jQuery), function (a) {
	FX.MenuTree = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.MenuTree.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fs-menutree",
					nodes: [],
					indent: 0,
					onNodeClick: null,
					onNodeCreate: null,
					onNodeExpand: null,
					onNodeCollapse: null,
					onDisplayNodes: null
				})
			},
			_init: function () {
				FX.MenuTree.superclass._init.apply(this, arguments);
				var a = this.options,
				b = {
					type: "group",
					child: a.nodes,
					level: 0
				};
				this.expandNode(b, null, this.element),
				this._bindEvts()
			},
			_bindEvts: function () {
				var b = this,
				c = function (c) {
					var d = c.target,
					e = a(d).closest("a.menutree-node");
					if (e && e.length > 0) {
						var f = c.type;
						if ("mouseover" === f)
							e.addClass("fui-seb fui-fht");
						else if ("mouseout" === f)
							e.hasClass("select") || e.removeClass("fui-seb fui-fht");
						else if ("click" === f) {
							var g = e.data("NODE");
							b.clickNode(g, e)
						}
					}
				};
				this.element.bind("mouseover", c).bind("mouseout", c).bind("click", c)
			},
			createIconFont: function (b) {
				return a("<i/>").addClass(b).addClass("entry-icon")
			},
			_onNodeCreate: function (b, c) {
				var d = this.options,
				e = a('<a class="menutree-node"/>').data("NODE", b).attr("data-id", b.id);
				return FX.Utils.applyFunc(this, d.onNodeCreate, [b, e, c], !1) === !1 ? "group" === b.type ? (e.addClass("fs-menu-item").attr("title", b.text).appendTo(c), this.createIconFont("icon-tree-group").appendTo(e), a('<span class="menutree-text"/>').text(b.text).appendTo(e)) : (e.addClass("fs-menu-item menutree-child").attr("title", b.text).appendTo(c), d.indent && e.css({
						"padding-left": (b.level - 1) * d.indent + 20
					}), a('<i class="tree-icon"/>').addClass("icon-tree-leaf " + b.icon).appendTo(e), a('<span class="menutree-text"/>').text(b.text).appendTo(e)) : c.remove(),
				e
			},
			clickNode: function (a, b) {
				var c = this.options,
				d = b.parent("li");
				FX.Utils.applyFunc(this, c.onNodeClick, [a, b, d], !1) === !1 && (this.selectNode(b), "group" === a.type && (a.isexpand ? this.collapseNode(a, b, d) : this.expandNode(a, b, d)))
			},
			selectNode: function (b) {
				a(".fs-menu-item.select", this.element).removeClass("select fui-seb fui-fht"),
				b.addClass("select fui-seb fui-fht")
			},
			expandNode: function (b, c, d) {
				var e = this,
				f = this.options;
				b.level;
				if (FX.Utils.applyFunc(this, f.onNodeExpand, [b, c, d], !1) === !1 && "group" === b.type) {
					if (b.isLoaded)
						d.children("ul").slideDown("fast");
					else {
						var g = a("<ul/>").appendTo(d);
						FX.Utils.forEach(b.child, function (c, d) {
							d.level = b.level + 1,
							d.parent = b;
							var f = a("<li/>").appendTo(g),
							h = e._onNodeCreate(d, f);
							d.isexpand && e.expandNode(d, h, f)
						}),
						b.isLoaded = !0
					}
					d.addClass("group-open")
				}
				b.isexpand = !0
			},
			collapseNode: function (a, b, c) {
				var d = this.options;
				FX.Utils.applyFunc(this, d.onNodeCollapse, [a, b, c], !1) === !1 && (c.children("ul").slideUp("fast"), c.removeClass("group-open")),
				a.isexpand = !1
			},
			loadNode: function (b, c) {
				var d = this,
				e = this.options,
				f = a('a[data-id="' + b + '"]', this.element);
				0 === f.length && FX.Utils.forEach(e.nodes, function (c, e) {
					"group" === e.type && FX.Utils.forEach(e.child, function (c, g) {
						if (g.id === b) {
							var h = a('a[data-id="' + e.id + '"]', d.element);
							return d.expandNode(h.data("NODE"), h, h.closest("li")),
							f = a('a[data-id="' + b + '"]', d.element),
							!1
						}
					})
				}),
				this.selectNode(f);
				var g = f.data("NODE");
				return FX.Utils.applyFunc(d, c, [g, f], !1),
				f
			}
		})
}
(jQuery), function (a) {
	FX.Platform = FX.extend(FX.Widget, {
			CONSTS: {},
			NAV: {
				MESSAGE: 1,
				ACCOUNT: 2,
				FAVORITE: 3
			},
			THEME: {
				config4frame: {
					resizable: !0,
					north: {
						visible: !0
					},
					south: {
						visible: !1
					},
					east: {}
				},
				config4Gallery: {
					region: null
				},
				config4MenuTree: {
					region: "west"
				},
				config4tabPane: {
					style: "alpha",
					region: "east",
					isCollapsible: !1,
					hasHomepageBtn: !0
				}
			},
			_defaultConfig: function () {
				return a.extend(FX.Platform.superclass._defaultConfig.apply(), {
					baseCls: "fui_platform",
					appId: "",
					onMenuSelect: null
				})
			},
			_init: function () {
				FX.Platform.superclass._init.apply(this, arguments);
				var a = this.options;
				FX.STATIC.APPID = a.appId,
				this._initFrame(this.THEME.config4frame),
				this._initMenu()
			},
			_initMenu: function () {
				var a = this;
				this.options;
				FX.Utils.dataAjax({
					url: "/dashboard/app/" + FX.STATIC.APPID
				}, function (b) {
					FX.Vip.showUpgradeTip(b.bufferState),
					a.isOwner = b.isOwner,
					a.entryMap = b.entryMap,
					a.treeNodes = a._sortEntryList(b.entryList, a.entryMap),
					a._initEmptyTip(),
					a._initMenuTree(a.THEME.config4MenuTree)
				})
			},
			_initFrame: function () {
				this.$body = a('<div class="fs-frame-body"/>').appendTo(this.element),
				this.$menu = a('<div class="fs-frame-menu"/>').appendTo(this.$body),
				this.$content = a('<div class="fs-frame-content"/>').appendTo(this.$body),
				this.$path = a('<div class="fs-frame-path"/>').appendTo(this.$content),
				this.$entryContent = a('<div class="fs-frame-entry-content"/>').appendTo(this.$content),
				this.CONSTS.Regions = {
					west: this.$menu,
					east: this.$content
				},
				this._initBreadCrumb()
			},
			_initBreadCrumb: function () {
				a('<ul class="breadcrumb"><li><i class="icon-home-line"/></li></ul>').appendTo(this.$path)
			},
			_initEmptyTip: function () {
				var b = '<div class="content-empty"><div class="empty-img"/><div class="empty-title"></div>';
				b += this.isOwner ? "<span> </span>" : "<span>/</span>",
				b += "</div>",
				a(b).appendTo(this.$entryContent)
			},
			_sortEntryList: function (a, b) {
				return a.sort(function (a, c) {
					var d = b[a.id] && b[a.id].seq,
					e = b[c.id] && b[c.id].seq;
					if (d !== e)
						return d - e;
					var f = b[a.id] && b[a.id].entryId,
					g = b[c.id] && b[c.id].entryId,
					h = 0;
					return f > g ? h = 1 : f < g && (h = -1),
					h
				}),
				a
			},
			_initMenuTree: function (b) {
				if (!FX.Utils.isEmpty(b.region)) {
					var c = this,
					d = this.CONSTS.Regions[b.region],
					e = this.options,
					f = a('<div class="fs-frame-scroll"/>').appendTo(d);
					this.menu = new FX.MenuTree(a.extend({
								renderEl: a("<div/>").appendTo(f),
								indent: 20,
								nodes: c.treeNodes,
								onNodeClick: function (a, b) {
									return FX.Utils.applyFunc(c, e.onMenuSelect, [a], !0) && (a && "flow" === a.type ? c.loadContentByFlow(a, b) : c.loadContentByEntry(a)),
									!1
								},
								onNodeCreate: function (b, d) {
									return a.extend(b, c.entryMap[b.id]),
									"flow" === b.type ? b.icon = "icon-" + b.type + "-" + b.id : b.icon = "icon-" + b.type,
									c.selectedNode || (b.child && b.child.length > 0 ? b.isexpand = !0 : c.selectedNode = b),
									!1
								}
							}, b)),
					c.selectedNode ? c.loadNode(c.selectedNode.id, c.selectedNode.type) : a(".content-empty").show()
				}
			},
			loadNode: function (a, b) {
				var c = this;
				return this.treeNodes ? void this.menu.loadNode(a, function (a, d) {
					"flow" === b ? c.loadContentByFlow(a, d) : c.loadContentByEntry(a)
				}) : void(this.selectedNode = {
						id: a,
						type: b
					})
			},
			loadContentByFlow: function (b, c) {
				this.$entryContent.empty(),
				this._createPath(b),
				"query" === b.id ? new FX.FlowQueryPane({
					renderEl: a('<div class="flow-pane"/>').appendTo(this.$entryContent),
					itemsPerPage: 20
				}) : new FX.FlowListPane({
					renderEl: a('<div class="flow-pane"/>').appendTo(this.$entryContent),
					itemsPerPage: 20,
					listType: b.id,
					onAsyncSuccess: function (d) {
						"todo" === b.id && (c.children(".flow-count").remove(), d.count && c.append(a('<div class="flow-count"/>').text(d.count)))
					}
				})
			},
			loadContentByEntry: function (b) {
				var c = this;
				if (b && "group" !== b.type) {
					var d = b.type,
					e = FX.STATIC.APPID;
					"group" !== d && FX.Utils.dataAjax({
						url: "/dashboard/app/" + e + "/entry/" + b.id
					}, function (f, g) {
						c.$entryContent.empty();
						var h = f.entry;
						if (h)
							if (c._createPath(b), "form" === d)
								c._createFormViewSelector(h, f.authGroups);
							else if ("report" === d) {
								var i = h.content;
								new FX.Report(a.extend(i, {
										renderEl: a("<div/>").appendTo(c.$entryContent),
										appId: e,
										entryId: b.id,
										width: "100%",
										height: "100%",
										hasLazyLoad: !0
									}))
							}
					})
				}
			},
			showSuccessInfo: function (b, c, d) {
				var e = this,
				f = a('<div class="success-pane"/>').appendTo(b);
				a("<div/>").append(a('<i class="img-icon"/>')).appendTo(f),
				a('<span class="msg-title"/>').text("").appendTo(f),
				FX.Utils.isEmpty(c.check_msg) || a("<div>" + c.check_msg + "</div>").appendTo(f);
				var g = a('<div class="button-pane"/>').appendTo(f);
				d && new FX.Button({
					renderEl: a('<div class="button-style"/>').appendTo(g),
					text: " ",
					width: 120,
					style: "green",
					onClick: function () {
						FX.Utils.applyFunc(e, d, [], !1)
					}
				})
			},
			_createPath: function (b) {
				for (var c = this.$path.children(".breadcrumb").empty(), d = b; d && d.level > 0; ) {
					var e = a("<li/>").prependTo(c);
					a('<i class="icon-angleright">').appendTo(e),
					a("<a/>").text(d.text).appendTo(e),
					d = d.parent
				}
				var f = a("<li/>").prependTo(c);
				a('<i class="icon-home-line"/>').appendTo(f)
			},
			_createFormView: function (b) {
				var c = this;
				FX.STATIC.ENTRYID = b.entryId,
				new FX.Form(a.extend(b.content, {
						renderEl: a("<div/>").appendTo(this.$entryContent.empty()),
						appId: b.appId,
						entryId: b.entryId,
						width: "100%",
						hasHeader: !1,
						height: "100%",
						submitText: "",
						printText: b.hasFlowPrint ? "" : null,
						buttonPosition: "left",
						onSuccess: function (a, d, e) {
							c.$entryContent.empty(),
							c.showSuccessInfo(c.$entryContent, a, function () {
								c._createFormView(b)
							}),
							e && c._showFormPrint(a.data)
						}
					}))
			},
			_showFormPrint: function (b) {
				var c = FX.Utils.createMask(a("body"), {
						isLight: !0,
						isModal: !0
					});
				new FX.FormEditPane({
					renderEl: a('<div class="x-shadow-content"/>').appendTo(c),
					width: 920,
					height: "100%",
					dataId: b._id,
					entryId: b.entryId,
					flowType: "print",
					flowId: 0,
					hasFlowBtn: !1,
					onCancel: function () {
						c.remove()
					}
				})
			},
			_setFormView: function (b, c, d) {
				var e = this;
				switch (b) {
				case -1:
					e._createFormView(d);
					break;
				default:
					var f = c[b];
					if (!f)
						return;
					var g = FX.Store.getKey("paramFields", {
							appId: FX.STATIC.APPID,
							entryId: d.entryId,
							groupId: b
						}),
					h = FX.Store.getKey("showFields", {
							appId: FX.STATIC.APPID,
							entryId: d.entryId,
							groupId: b
						}),
					i = FX.Store.getKey("metaFields", {
							appId: FX.STATIC.APPID,
							entryId: d.entryId,
							groupId: b
						});
					new FX.DataManagePane({
						renderEl: a("<div/>").appendTo(e.$entryContent.empty()),
						appId: d.appId,
						entryId: d.entryId,
						formName: d.name,
						formItems: d.content.items,
						formAttr: {
							submitRule: d.content.submitRule,
							layout: d.content.layout,
							validators: d.content.validators
						},
						hasExtParams: d.hasExtParams,
						dataPerms: f.dataPerms,
						optAuth: f.optAuth,
						authGroupId: b,
						showFieldsFilter: FX.Store.get(g),
						showFields: FX.Store.get(h),
						showFieldsMeta: FX.Store.get(i),
						onParamFieldSelect: function (a) {
							FX.Store.set(g, a)
						},
						onDataFieldSelect: function (a) {
							FX.Store.set(h, a)
						},
						onDataFieldMetaChange: function (a) {
							FX.Store.set(i, a)
						}
					})
				}
			},
			_createFormViewSelector: function (b, c) {
				var d = this;
				if (FX.Utils.isObjectEmpty(c))
					return void this._createFormView(b);
				var e = {},
				f = [];
				FX.Utils.forEach(c, function (a, b) {
					b.groupId >= 0 && f.push({
						text: b.name,
						value: b.groupId
					}),
					e[b.groupId] = b
				});
				var g = [],
				h = {
					"-1": "",
					"-4": "",
					"-3": "",
					"-2": ""
				};
				FX.Utils.forEach(h, function (a, b) {
					var c = e[a];
					c && g.push({
						text: b,
						value: c.groupId
					})
				}),
				f = g.concat(f);
				var i = f[0].value,
				j = FX.Store.getKey("authGroup", {
						appId: FX.STATIC.APPID,
						entryId: b.entryId
					}),
				k = FX.Store.get(j);
				FX.Utils.isNull(k) || (e[k] ? i = k : FX.Store.remove(j)),
				d._setFormView(i, e, b),
				f.length <= 1 && FX.CONST.AUTH_GROUP.SUBMIT == i || new FX.ComboBox({
					renderEl: a('<div class="form-view"/>').appendTo(this.$path.children(".breadcrumb")),
					allowBlank: !1,
					width: 162,
					items: f,
					value: i,
					onAfterItemSelect: function () {
						var a = this.getValue();
						d._setFormView(a, e, b),
						FX.Store.set(j, a)
					}
				})
			}
		})
}
(jQuery), function (a) {
	FX.FormPrint = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormPrint.superclass._defaultConfig.apply(), {
					baseCls: "fx_system_print_pane",
					title: "",
					header: [],
					data: {},
					comments: null,
					layout: null,
					MAX_SUBFORM_COLS: 7
				})
			},
			_init: function () {
				FX.FormPrint.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options,
				d = c.header,
				e = ["creator", "createTime", "updateTime"];
				this.systemFields = e,
				this._createMetaInfo(),
				this._appendTable(),
				this._setCursor(a("<tr />").appendTo(this.$table), a("<tr />").appendTo(this.$table), 0),
				FX.Utils.forEach(d, function (a, d) {
					if (d.widget && (d = FX.Utils.getFieldAttr(d)), d && e.indexOf(d.name) < 0) {
						var f = d.tag || d.name;
						b._dealWidget(d, c.data[f])
					}
				}),
				this._appendComments(c.comments),
				this._processLastRow()
			},
			_createMetaInfo: function () {
				var b = this.options,
				c = b.data,
				d = this.systemFields;
				a('<div class="print-title"/>').text(b.title).appendTo(this.element);
				var e = a('<div class="print-info" />').appendTo(this.element),
				f = 0;
				FX.Utils.forEach(d, function (d, g) {
					var h;
					if (FX.Utils.forEach(b.header, function (a, b) {
							if (b.name === g)
								return h = b, !1
						}), h) {
						var i = h.tag || h.name,
						j = c[i];
						["createTime", "updateTime"].indexOf(g) > -1 && (j = FX.Utils.date2Str(new Date(j), "yyyy-MM-dd HH:mm:ss")),
						a('<div class="info-item" />').append(a('<span class="info-label" />').text(h.text)).append(a('<span class="info-text" />').text(j)).appendTo(e),
						f++
					}
				}),
				e.addClass("with-item-" + f)
			},
			_dealWidget: function (b, c) {
				var d = this;
				if (this._isWidgetValid(b))
					switch (b.type) {
					case "linkdata":
						FX.Utils.forEach(b.linkFields, function (a, b) {
							d._dealWidget(b, c && c[b.name])
						});
						break;
					case "subform":
						this._appendSubform(b, c);
						break;
					case "chargers":
						this._appendChargers(b, c);
						break;
					default:
						var e = a("<td />").text(b.text),
						f = this._createDataCell(b, c);
						this._appendWidget(e, f, b.name)
					}
			},
			_appendWidget: function (b, c, d) {
				var e = this.options.layout,
				f = this.$table,
				g = this.cursor;
				e ? 12 === e[d] ? (g.colspan < 4 && this._processLastRow(), this._appendWidget2NewRow(b, c, 4)) : g.colspan <= 2 ? (g.$tr1.append(b.attr("colspan", 2)), g.$tr2.append(c.attr("colspan", 2)), g.colspan += 2) : this._appendWidget2NewRow(b, c, 2) : a("<tr />").append(b.attr("colspan", 1)).append(c.attr("colspan", 3)).appendTo(f)
			},
			_appendWidget2NewRow: function (b, c, d) {
				var e = this.cursor,
				f = this.$table;
				e.$tr1 = a("<tr />").appendTo(f),
				e.$tr2 = a("<tr />").appendTo(f),
				e.$tr1.append(b.attr("colspan", d)),
				e.$tr2.append(c.attr("colspan", d)),
				e.colspan = d
			},
			_createDataCell: function (b, c) {
				var d = a("<td />").attr("colspan", 1);
				switch (c = this._formatData(b, c), b.type) {
				case "image":
				case "upload":
					new FX.FileUpload({
						renderEl: d,
						mode: "print",
						files: c,
						enable: !1
					});
					break;
				case "textarea":
					c && d.append(a("<pre />").text(c));
					break;
				case "flowState":
					var e = "";
					switch (c) {
					case FX.CONST.WORKFLOW.FLOWSTATE.INPROCESS:
						e = "";
						break;
					case FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE:
						e = ""
					}
					d.text(e);
					break;
				default:
					FX.Utils.isNull(c) && (c = ""),
					d.text(c)
				}
				return d
			},
			_isWidgetValid: function (a) {
				return ["formula", "flowState", "chargers"].indexOf(a.type) > -1 || (FX.Utils.isValueWidget(a.type) || a.isJoined || /_join_/.test(a.name))
			},
			_formatData: function (a, b) {
				if (!a)
					return b;
				var c = a.cellFmt && a.cellFmt.data || a.format;
				switch (a.type) {
				case "datetime":
					c = c || "yyyy-MM-dd",
					c && b && (b = FX.Utils.date2Str(new Date(b), c));
					break;
				case "address":
				case "location":
					c = c ? c : "pcda",
					b = FX.Utils.address2Str(b, "", c);
					break;
				case "number":
				case "formula":
					c = c || "",
					b = FX.Utils.num2Str(b, c);
					break;
				default:
					b = FX.Utils.isNull(b) ? "" : b
				}
				return b
			},
			_appendSubform: function (b, c) {
				var d,
				e = this,
				f = this.options;
				this._processLastRow(),
				FX.Utils.forEach(b.items, function (a, c) {
					"linkdata" === c.type && (b.items.splice(a, 1), FX.Utils.forEach(c.linkFields, function (c, d) {
							b.items.splice(a + c, 0, d)
						}))
				});
				var g = e._chunkSubform(b.items);
				FX.Utils.forEach(g, function (g, h) {
					var i = e._appendTable(!0);
					if (0 === g) {
						var j = Math.min(b.items.length, f.MAX_SUBFORM_COLS);
						a("<tr />").append(a('<td class="print-center" />').attr("colspan", j).text(b.text)).appendTo(i)
					}
					var k = a("<tr />").appendTo(i);
					FX.Utils.forEach(h, function (b, c) {
						k.append(a("<td />").text(c.text))
					}),
					FX.Utils.forEach(c, function (b, c) {
						d = a("<tr />").appendTo(i),
						FX.Utils.forEach(h, function (b, f) {
							var g = e._formatData(f, c[f.name]);
							d.append(a("<td />").text(g))
						})
					})
				}),
				this._appendTable(),
				this._setCursor(a("<tr />").appendTo(this.$table), a("<tr />").appendTo(this.$table), 0)
			},
			_chunkSubform: function (a) {
				var b = [],
				c = FX.Utils.chunkArray(a, 14);
				return FX.Utils.forEach(c, function (a, c) {
					c.length <= 7 ? b.push(c) : c.length <= 11 ? (b.push(c.splice(0, c.length - 4)), b.push(c)) : (b.push(c.splice(0, 7)), b.push(c))
				}),
				b
			},
			_appendTable: function (b) {
				return this.$table = a("<table />").appendTo(this.element),
				b || this.$table.addClass("print-body"),
				this.$table
			},
			_appendChargers: function (b, c) {
				var d = {},
				e = {},
				f = [],
				g = [];
				FX.Utils.forEach(c, function (a, b) {
					d[b.userNickname] = !0,
					e[b.flowName] = !0
				}),
				FX.Utils.forEach(d, function (a) {
					f.push(a)
				}),
				FX.Utils.forEach(e, function (a) {
					g.push(a)
				}),
				this._appendWidget(a("<td />").text(""), a("<td />").text(g.join(", "))),
				this._appendWidget(a("<td />").text(""), a("<td />").text(f.join(", ")))
			},
			_appendComments: function (b) {
				var c = this,
				d = !1;
				c._processLastRow(),
				FX.Utils.forEach(b, function (b, e) {
					if (e.comment) {
						d || (a("<div></div>").appendTo(c.element), c._appendTable(!0), d = !0);
						var f = e.operator + "" + e.comment + "(" + FX.Utils.date2Str(new Date(e.createTime), "yyyy-MM-dd HH:mm") + ")";
						a("<tr />").append(a('<td class="comment-label"/>').text(e.flowName)).append(a('<td class="comment-text"/>').text(f)).appendTo(c.$table)
					}
				})
			},
			_processLastRow: function () {
				var b,
				c = this.cursor,
				d = c.$tr1.find("td"),
				e = c.$tr2.find("td");
				if (d.length) {
					b = a(d[d.length - 1]);
					var f = parseInt(b.attr("colspan") || 1) + (4 - c.colspan);
					b.attr("colspan", f),
					b = a(e[e.length - 1]),
					b.attr("colspan", f),
					c.colspan = 4
				}
			},
			_setCursor: function (a, b, c) {
				this.cursor = {
					$tr1: a,
					$tr2: b,
					colspan: c
				}
			}
		})
}
(jQuery), function (a) {
	FX.TeamManagePane = FX.extend(FX.Widget, {
			MEMBER_TYPES: {
				OWNER: 0,
				ADMIN: 1,
				MEMBER: 2,
				UNACCEPTED: -1
			},
			_defaultConfig: function () {
				return a.extend(FX.TeamManagePane.superclass._defaultConfig.apply(), {
					baseCls: "fx_teammanage",
					teamId: "",
					isCorpSuiteAdmin: !1
				})
			},
			_init: function () {
				FX.TeamManagePane.superclass._init.apply(this, arguments),
				this.currentDepartment = 1,
				this.cache = {},
				this._initPage(),
				this._initContainer(),
				this._createDepartmentTree(),
				this._createMemberGrid(),
				this._bindDepartmentEditEvent(),
				this._bindEvent()
			},
			_initPage: function () {
				this.element.append(a('<div class="member-head"><div class="member-btn-pane" /></div><div class="member-body"><div class="member-menu"><div class="member-search"><div class="search-info"><span></span><i class="icon-search member-search-icon" /></div><div class="search-input"><input class="member-search-input" /><i class="icon-search" /></div></div><div class="member-tree" /></div><div class="member-grid" /></div>'))
			},
			_initContainer: function () {
				this.$departmentTree = a(".member-tree", this.element),
				this.$memberGrid = a(".member-grid", this.element)
			},
			_createDepartmentTree: function () {
				var b = this,
				c = this.options;
				FX.Utils.ajax({
					url: "/corp/department/list"
				}, function (d) {
					b.cache.departments = a.extend(!0, [], d.departments),
					b.departmentTree = new FX.Tree({
							renderEl: a('<div class="department-tree"/>').appendTo(b.$departmentTree),
							customCls: "x-department-tree",
							Nodes: d.departments,
							setting: {
								view: {
									expandSpeed: 100,
									addDiyDom: function (b) {
										if (!c.isCorpSuiteAdmin) {
											var d = this.getDOMBySelector(b, "_a", this.options.setting);
											d.append(a('<i class="icon-edit nav nav-department-edit"/>'))
										}
									}
								},
								data: {
									simpleData: {
										enable: !0,
										idKey: "departmentId",
										pIdKey: "parentId"
									}
								},
								callback: {
									onNodeCreated: function (a, b) {
										b.isParent && !b.open && b.level < 1 && this.expandNode(b, !0)
									},
									onClick: function (a, c) {
										b.currentDepartment = c.departmentId,
										b.memberGrid.options.async = {
											url: b._getDepartmentOpBaseURL() + "/list_member",
											data: {
												hasCount: !0
											}
										},
										b.memberGrid.page = 0,
										b.memberGrid.refresh()
									}
								}
							}
						})
				})
			},
			_createMemberGrid: function () {
				var b = this,
				c = this.options;
				this.memberGrid = new FX.Grid({
						renderEl: this.$memberGrid,
						customCls: "member-grid",
						async: {
							url: this._getDepartmentOpBaseURL() + "/list_member",
							data: {
								hasCount: !0
							}
						},
						multiSelect: !c.isCorpSuiteAdmin,
						hasPagination: !0,
						columnsConfig: [{
								width: 200,
								key: "nickname",
								value: ""
							}, {
								width: 220,
								key: "email",
								value: ""
							}, {
								value: "",
								onCellCreate: function (c, d, e, f) {
									var g,
									h = "db-member-unknown",
									i = b.MEMBER_TYPES;
									switch (e.category) {
									case i.OWNER:
										g = "",
										h = "db-member-creator";
										break;
									case i.ADMIN:
										g = "",
										h = "db-member-admin";
										break;
									case i.MEMBER:
										g = "",
										h = "db-member-user";
										break;
									case i.UNACCEPTED:
										g = "",
										h = "db-member-invited";
										break;
									default:
										g = "",
										h = "db-member-user"
									}
									return a('<div class="cell"/>').css({
										width: "100%"
									}).append(a("<span/>").addClass(h).text(g))
								}
							}, {
								width: 30,
								onCellCreate: function (d, e, f) {
									if (!c.isCorpSuiteAdmin)
										return a('<div class="cell x-btn department-btn">').append(a('<i class="icon-department"/>').attr("title", "")).click(function () {
											b._createSetDepartmentBubble(f, a(this))
										})
								}
							}, {
								width: 30,
								onCellCreate: function (d, e, f) {
									if (!c.isCorpSuiteAdmin)
										return a('<div class="cell x-btn remove-btn"/>').append(a('<i class="icon-remove"/>').attr("title", "")).click(function () {
											b._removeMembers([f._id])
										})
								}
							}
						],
						onAsyncSuccess: function (a, b) {
							this.options.items = a.users
						},
						onAsyncError: function (a, b) {
							this.options.items = [],
							FX.Msg.toast({
								type: "error",
								msg: ""
							})
						}
					})
			},
			_getDepartmentOpBaseURL: function () {
				return "/corp/department/" + this.currentDepartment
			},
			_bindDepartmentEditEvent: function () {
				var b = this,
				c = this.options,
				d = function (d) {
					var e = d.target,
					f = d.type,
					g = a(e).closest(".nav-department-edit");
					if (g && g.length > 0 && "click" === f) {
						var h = g.parent();
						h.addClass("edit");
						var i = h.attr("id").replace("_a", ""),
						j = b.departmentTree.getNodeByTId(i),
						k = new FX.TableContainer({
								rowSize: [26, 26, 26],
								colSize: [120],
								vgap: 5,
								items: [[{
											type: "button",
											text: " ",
											style: "white",
											onClick: function () {
												b._createDepartmentEditDialog({
													corpId: c.corpId,
													parentId: j.departmentId
												}, j)
											}
										}
									], [{
											type: "button",
											text: "",
											style: "white",
											onClick: function () {
												b._createDepartmentEditDialog(j, j.getParentNode())
											}
										}
									], [{
											type: "button",
											text: " ",
											style: "red",
											onClick: function () {
												b._removeDepartment(j)
											}
										}
									]]
							});
						1 === j.departmentId && k.setRowVisible([1, 2], !1),
						j.level >= 14 && k.setRowVisible([0], !1),
						FX.Msg.bubble({
							anchor: g,
							text4Cancel: null,
							text4Ok: null,
							dockPosition: "left",
							minWidth: 120,
							contentHTML: k.element,
							onClose: function () {
								return h.removeClass("edit"),
								!1
							}
						})
					}
				};
				this.$departmentTree.unbind(".department-edit"),
				this.$departmentTree.bind({
					"click.department-edit": d
				})
			},
			_createDepartmentEditDialog: function (b, c) {
				var d = this,
				e = (this.options, !!b._id),
				f = new FX.ConfirmDialog({
						title: e ? "" : "",
						width: 340,
						height: 170,
						contentWidget: {
							rowSize: [30],
							colSize: [300],
							padding: 20,
							items: [[{
										type: "text",
										widgetName: "departmentName",
										value: b.name,
										waterMark: "",
										allowBlank: !1
									}
								]]
						},
						onOk: function () {
							var g = this.getWidgetByName("departmentName");
							if (g.checkValidate()) {
								var h = {
									name: g.getValue(),
									departmentId: b.departmentId
								};
								e || (h = a.extend(b, {
											name: g.getValue()
										})),
								FX.Utils.ajax({
									url: e ? d._getDepartmentOpBaseURL() + "/edit" : "/corp/department/create",
									data: h
								}, function (g, h) {
									var i = g,
									j = d.departmentTree;
									e ? (b.name = i.name, j.updateNode(b), FX.Utils.forEach(d.cache.departments, function (a, b) {
											if (b.departmentId === d.currentDepartment)
												return b.name = i.name, !1
										})) : (j.addNodes(j.options.setting, c, [i], !0), d.cache.departments.push(a.extend({}, i)), j.expandNode(c, !0)),
									f.close()
								}, function (a, b) {
									var c = a.responseJSON || {};
									return 6e3 === c.code ? void g.showErrorMsg(c.msg) : (FX.Msg.toast({
											type: "warning",
											msg: c.msg
										}), void f.close())
								})
							}
						}
					});
				f.show()
			},
			_removeDepartment: function (a) {
				var b = this,
				c = this.departmentTree;
				FX.Msg.alert({
					title: " ",
					msg: "   ",
					type: "warning",
					onOk: function () {
						FX.Utils.ajax({
							url: b._getDepartmentOpBaseURL() + "/remove"
						}, function (d, e) {
							c.removeNode(c.options.setting, a);
							var f = -1;
							FX.Utils.forEach(b.cache.departments, function (a, c) {
								if (c.departmentId === b.currentDepartment)
									return f = a, !1
							}),
							f > -1 && b.cache.departments.splice(f, 1)
						}, function (a) {
							var b = a.responseJSON || {};
							FX.Msg.toast({
								type: "warning",
								msg: b.msg
							})
						})
					}
				})
			},
			_getDepartmentList: function () {
				if (!this.departmentList) {
					var a = {},
					b = [];
					FX.Utils.forEach(this.cache.departments, function (c, d) {
						var e = {
							id: d.departmentId,
							name: d.name,
							children: []
						};
						a[d.departmentId] = e,
						a[d.parentId] ? a[d.parentId].children.push(e) : b.push(e)
					}),
					this.departmentList = b
				}
				return this.departmentList
			},
			_createInviteDialog: function () {
				var a = this,
				b = new FX.ConfirmDialog({
						title: "",
						height: 460,
						width: 480,
						text4Ok: "",
						contentWidget: {
							rowSize: [340],
							colSize: [450],
							padding: 15,
							items: [[{
										widgetName: "inviteEmail",
										type: "textarea",
										waterMark: " (,) (;) ",
										allowBlank: !1
									}
								]]
						},
						onOk: function () {
							var c = b.getWidgetByName("inviteEmail").getValue(),
							d = c.split(/[,;\n]+/),
							e = "",
							f = [];
							return FX.Utils.forEach(d, function (a, b) {
								return FX.Utils.validateEmail(b) ? (b = b.trim(), void("" !== b && f.push(b))) : (e = b, !1)
							}),
							!(f.length <= 0) && (FX.Utils.isEmpty(e) ? (FX.Utils.ajax({
										url: "/corp/member/invite",
										data: {
											mails: f
										}
									}, function (b, c) {
										FX.Msg.toast({
											type: "success",
											msg: "!"
										}),
										a.memberGrid.refresh()
									}, function (a) {
										FX.Vip.showUpgradeTip(a.responseJSON, "!")
									}), !1) : void FX.Msg.toast({
									msg: '"' + e + '"',
									type: "warning"
								}))
						}
					});
				b.show()
			},
			_createSetDepartmentBubble: function (b, c) {
				var d = this;
				b && this._getUserDepartments(b, function (e) {
					FX.Msg.bubble({
						anchor: c,
						dockPosition: "right",
						edge: 370,
						contentWidget: {
							widgetName: "departmentTree",
							type: "tree",
							customCls: "x-department-tree member-department-tree",
							Nodes: a.extend(!0, [], d.cache.departments),
							setting: {
								view: {
									expandSpeed: 0
								},
								data: {
									key: {
										checked: "selected"
									},
									simpleData: {
										enable: !0,
										idKey: "departmentId",
										pIdKey: "parentId"
									}
								},
								callback: {
									beforeNodeCreate: function (a) {
										a.selected = e.indexOf(a.departmentId) > -1
									},
									onNodeCreated: function (a, b) {
										b.isParent && !b.open && b.level < 1 && this.expandNode(b, !0)
									}
								},
								check: {
									enable: !0,
									chkboxType: {
										Y: "",
										N: ""
									}
								}
							}
						},
						onOk: function (c) {
							var d = [];
							FX.Utils.forEach(c.getCheckedNodes(), function (a, b) {
								d.push(b.departmentId)
							}),
							FX.Utils.ajax({
								url: "/corp/member/" + b._id + "/set_department",
								data: {
									add: a(d).not(e).get(),
									remove: a(e).not(d).get()
								}
							}, function () {
								FX.Msg.toast({
									msg: "",
									type: "success"
								})
							})
						}
					})
				})
			},
			_createChangeDepartmentBubble: function (b, c) {
				if (!b || b.length <= 0)
					return void FX.Msg.toast({
						type: "warning",
						msg: ""
					});
				var d,
				e = this;
				new FX.Msg.bubble({
					anchor: c,
					contentWidget: {
						widgetName: "departmentTree",
						type: "tree",
						customCls: "x-department-tree member-department-tree",
						Nodes: a.extend(!0, [], e.cache.departments),
						setting: {
							view: {
								expandSpeed: 0
							},
							data: {
								key: {
									checked: "selected"
								},
								simpleData: {
									enable: !0,
									idKey: "departmentId",
									pIdKey: "parentId"
								}
							},
							callback: {
								onNodeCreated: function (a, b) {
									b.isParent && !b.open && b.level < 1 && this.expandNode(b, !0)
								},
								onClick: function (a, b) {
									d = b.departmentId
								}
							}
						}
					},
					onOk: function () {
						if (e.currentDepartment !== d) {
							var a = [];
							FX.Utils.forEach(b, function (b, c) {
								a.push(c._id)
							}),
							FX.Utils.ajax({
								url: "/corp/change_department",
								data: {
									members: a,
									add: d,
									remove: e.currentDepartment
								}
							}, function () {
								FX.Msg.toast({
									msg: "",
									type: "success"
								}),
								e.memberGrid.refresh()
							}, function () {
								FX.Msg.toast({
									msg: "",
									type: "success"
								})
							})
						}
					}
				})
			},
			_getUserDepartments: function (a, b) {
				this.options;
				FX.Utils.ajax({
					url: "/corp/member/" + a._id + "/list_department"
				}, function (a) {
					return b(a.departments)
				})
			},
			_removeMembers: function (a) {
				var b = this,
				c = this.options;
				return a && 0 !== a.length ? void FX.Msg.alert({
					title: " ",
					msg: "   ",
					type: "warning",
					onOk: function () {
						FX.Utils.ajax({
							url: "/manager/team/" + c.teamId + "/delete",
							data: {
								members: a
							}
						}, function (a, c) {
							FX.Msg.toast({
								type: "success",
								msg: " "
							}),
							b.memberGrid.refresh()
						}, function () {
							FX.Msg.toast({
								type: "error",
								msg: " "
							})
						})
					}
				}) : void FX.Msg.toast({
					type: "warning",
					msg: " "
				})
			},
			_doSearch: function (a) {
				this.memberGrid.options.async = {
					url: this._getDepartmentOpBaseURL() + "/list_member",
					data: {
						hasCount: !0,
						filter: a
					}
				},
				this.memberGrid.page = 0,
				this.memberGrid.refresh()
			},
			_closeSearch: function () {
				this.memberGrid.options.async = {
					url: this._getDepartmentOpBaseURL() + "/list_member",
					data: {
						hasCount: !0
					}
				}
			},
			_bindEvent: function () {
				var b = this,
				c = this.options;
				a(".member-search-icon", this.element).click(function () {
					return a(".search-info", b.element).hide(),
					a(".search-input", b.element).animate({
						width: "100%"
					}, function () {
						a(".member-search-input", b.element).keydown(function (c) {
							13 === c.keyCode && b._doSearch(a(this).val())
						}).focus()
					}).show(),
					a(document).bind("click.search", function (c) {
						var d = c.target,
						e = a(d).closest(".search-input"),
						f = a(d).closest(".icon-search");
						f.length && b._doSearch(a(".member-search-input").val()),
						0 === e.length && (a(".search-info", b.element).show(), a(".search-input", b.element).animate({
								width: 0
							}, function () {
								a(".search-input", b.element).hide()
							}), b._closeSearch(), a(document).unbind("click.search"))
					}),
					!1
				});
				var d = a(".member-btn-pane", this.element);
				if (c.isCorpSuiteAdmin) {
					var e = new FX.Button({
							renderEl: a("<div/>").appendTo(d),
							text: "",
							style: "white",
							onClick: function () {
								this.setEnable(!1);
								var c = FX.Utils.createMask(a(".member-body", this.element), {
										isLight: !0,
										hasLoader: !0
									});
								FX.Utils.ajax({
									url: "/corp/suite/user_sync"
								}, function () {
									b.memberGrid.refresh(),
									b.departmentTree.destroy(b.departmentTree.options.setting),
									b.$departmentTree.empty(),
									b._createDepartmentTree(),
									FX.Msg.toast({
										type: "success",
										msg: ""
									})
								}, function (a) {
									FX.Vip.showUpgradeTip(a.responseJSON, "")
								}, function () {
									e.setEnable(!0),
									c.remove()
								})
							}
						});
					FX.Utils.isWpsWebView() || FX.Utils.ajax({
						url: "/corp/suite/get_cron_sync"
					}, function (b) {
						var c = a('<div class="auto-sync-pane"/>').appendTo(d);
						c.append("<span></span>"),
						new FX.Switch({
							renderEl: a('<div class="sync-btn"/>').appendTo(c),
							value: b.enable,
							onSwitch: function (a) {
								var b = this;
								FX.Utils.ajax({
									url: "/corp/suite/set_cron_sync",
									data: {
										enable: a
									}
								}, function () {
									FX.Msg.toast({
										type: "success",
										msg: ""
									})
								}, function (c) {
									var d = c.responseJSON || {};
									b.setValue(!a),
									7101 === d.code && FX.Msg.alert({
										title: "",
										msg: d.msg,
										type: "warning",
										text4Ok: "",
										text4Cancel: "",
										onOk: function () {
											return FX.Utils.redirectTo("/profile#/vip"),
											!1
										}
									})
								})
							}
						})
					})
				} else
					new FX.Button({
						renderEl: a("<div/>").appendTo(d),
						text: "",
						iconCls: "icon-member-add",
						style: "white",
						onClick: function () {
							b._createInviteDialog()
						}
					}), new FX.Button({
						renderEl: a("<div/>").appendTo(d),
						text: "",
						iconCls: "icon-member-move",
						style: "white",
						onClick: function () {
							var a = b.memberGrid.getSelectedData();
							b._createChangeDepartmentBubble(a, this.element)
						}
					}), new FX.Button({
						renderEl: a("<div/>").appendTo(d),
						text: " ",
						iconCls: "icon-trasho",
						style: "white",
						onClick: function () {
							var a = b.memberGrid.getSelectedData(),
							c = [];
							FX.Utils.forEach(a, function (a, b) {
								c.push(b._id)
							}),
							b._removeMembers(c)
						}
					})
			}
		})
}
(jQuery), function (a) {
	FX.MessagePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.MessagePane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_message"
				})
			},
			_init: function () {
				FX.MessagePane.superclass._init.apply(this, arguments),
				this._initPage(),
				this._initGrid(),
				this._initBtns()
			},
			_initPage: function () {
				a('<div class="message-btn"><a class="btn-status btn-unread selected"></a><a class="btn-status btn-read"></a><a class="btn-read-all"> </a></div>').appendTo(this.element)
			},
			_initGrid: function () {
				var b = this;
				this.msgGrid = new FX.Grid({
						renderEl: a("<div/>").appendTo(this.element),
						multiSelect: !1,
						async: {
							url: "/manager/message/list",
							data: {
								isRead: !1
							}
						},
						itemsPerPage: 10,
						hasPagination: !0,
						onRowClick: function (a, c) {
							b.createMessageDetailPane(c._id)
						},
						columnsConfig: [{
								value: "",
								width: 200,
								onCellCreate: function (b, c, d) {
									var e = a.grep(this.options.senders, function (a) {
											return a._id === d.from
										});
									return e = e.length > 0 ? e[0].nickname : "",
									a('<div class="cell"/>').append(a("<a/>").text(e))
								}
							}, {
								value: "",
								key: "subject"
							}, {
								value: "",
								width: 200,
								onCellCreate: function (b, c, d) {
									var e = new Date(d.sendTime);
									return a('<div class="cell"/>').append(a("<a/>").text(FX.Utils.date2Str(e, "yyyy-MM-dd HH:mm")))
								}
							}
						],
						onAsyncSuccess: function (a, b) {
							this.options.items = a.messages,
							this.options.senders = a.senders,
							this.options.hasNext = a.hasNext
						}
					})
			},
			_initBtns: function () {
				var b = this,
				c = a(".btn-status.btn-unread", this.element).click(function () {
						var c = b.msgGrid.options.async;
						c.data.isRead = !1,
						b.msgGrid.refresh(),
						a(this).addClass("selected"),
						d.removeClass("selected"),
						e.show()
					}),
				d = a(".btn-status.btn-read", this.element).click(function () {
						var d = b.msgGrid.options.async;
						d.data.isRead = !0,
						b.msgGrid.refresh(),
						a(this).addClass("selected"),
						c.removeClass("selected"),
						e.hide()
					}),
				e = a(".btn-read-all", this.element).click(function () {
						var a = [];
						FX.Utils.forEach(b.msgGrid.options.items, function (b, c) {
							a.push(c._id)
						}),
						FX.Utils.ajax({
							url: "/manager/message/set_read",
							data: {
								messages: a
							}
						}, function () {
							b.msgGrid.refresh()
						})
					})
			},
			createMessageDetailPane: function (b) {
				var c = a("<div />"),
				d = new FX.Slider({
						title: "",
						content: c
					});
				new FX.MessageDetailPane({
					messageId: b,
					renderEl: c
				}),
				d.show()
			}
		})
}
(jQuery), FX.MessageDetailPane = FX.extend(FX.Widget, {
		_defaultConfig: function () {
			return $.extend(FX.MessageDetailPane.superclass._defaultConfig.apply(this, arguments), {
				baseCls: "fx_message_detail"
			})
		},
		_init: function () {
			FX.MessageDetailPane.superclass._init.apply(this, arguments),
			this._initPage(),
			this._initMessage()
		},
		_initPage: function () {
			$('<div class="detail-row"><label> </label><a class="message-subject" /></div><div class="detail-row"><label></label><a class="message-sender" /></div><div class="detail-row"><label></label><div class="msg-content" /></div>').appendTo(this.element)
		},
		_initMessage: function () {
			var a = this,
			b = this.options;
			FX.Utils.ajax({
				url: "/manager/message/" + b.messageId + "/get"
			}, function (b) {
				$(".message-subject", a.element).text(b.message.subject),
				$(".message-sender", a.element).text(b.sender.nickname),
				$(".msg-content", a.element).html(b.message.content)
			})
		}
	}), function (a) {
	FX.VipCenter = FX.extend(FX.Widget, {
			btns: {
				trail: {
					text: "",
					color: "blue"
				},
				renew: {
					text: "",
					color: "blue",
					url: "/profile/order/create?type=renew"
				},
				upgrade: {
					text: "",
					url: "/profile/packs",
					color: "green"
				},
				addusers: {
					text: "",
					color: "green",
					url: "/profile/order/create?type=upgrade&level=user"
				},
				buypack: {
					text: "",
					url: "/profile/packs",
					color: "blue"
				},
				upgradepack: {
					text: "",
					url: "/profile/packs"
				},
				buysilver: {
					text: "",
					url: "/profile/order/create?type=upgrade&addon=service"
				},
				buygold: {
					text: "",
					url: "/profile/order/create?type=upgrade&addon=service"
				},
				getpack: {
					text: "",
					url: "/profile/packs"
				},
				removelogo: {
					text: "",
					url: "/profile/order/create?type=upgrade&addon=logo"
				},
				concatus: {
					text: "",
					url: "http://q.url.cn/s/mXZUtym"
				}
			},
			serviceItems: [{
					key: "service",
					icon: "icon-service-medal",
					color: "grey",
					info: "",
					basic: {
						name: "",
						content: "7X24",
						btn: {
							free: ["getpack"],
							lite: ["upgradepack", "buysilver"],
							logo: ["getpack"]
						}
					},
					silver: {
						name: "",
						content: {
							normal: "7X24",
							special: "7X24",
							rare: "7X24"
						},
						btn: {
							lite: ["upgradepack"],
							std: ["upgradepack", "buygold"],
							pro: ["upgradepack", "buygold"],
							user: ["buygold"],
							oem: ["concatus"]
						}
					},
					gold: {
						name: "",
						content: "",
						btn: {
							lite: ["concatus"],
							std: ["concatus"],
							pro: ["concatus"],
							ent: ["concatus"],
							user: ["concatus"],
							oem: ["concatus"]
						}
					}
				}, {
					key: "logo",
					icon: "icon-vip-center-logo",
					color: "blue",
					info: "LOGO",
					content: {
						normal: " Logo",
						trail: "",
						used: "Logo"
					}
				}, {
					key: "aggregate",
					icon: "icon-vip-center-aggregate",
					color: "blue-lighter",
					info: "",
					content: {
						normal: function (a) {
							return "" + a + ""
						},
						trail: "  ",
						used: function (a) {
							return "" + a + ""
						}
					}
				}, {
					key: "formData",
					icon: "icon-vip-center-form-data",
					color: "purple",
					info: "",
					content: {
						normal: function (a) {
							return "" + a + ""
						},
						trail: "2 ",
						used: function (a) {
							return "" + a + ""
						}
					}
				}, {
					key: "singleFile",
					icon: "icon-vip-center-single-file",
					color: "yellow",
					info: "",
					content: {
						normal: function (a) {
							return "" + a + "M "
						},
						trail: "5M ",
						used: function (a) {
							return "" + a + "M"
						}
					}
				}, {
					key: "excelImport",
					icon: "icon-vip-center-excel-import",
					color: "red-lighter",
					info: "Excel",
					content: {
						normal: function (a) {
							return "Excel" + a + "MExcel"
						},
						trail: "Excel2M ",
						used: function (a) {
							return "Excel" + a + "M"
						}
					}
				}, {
					key: "dataBackup",
					icon: "icon-vip-center-data-backup",
					color: "green",
					info: "",
					content: {
						invalid: " ",
						normal: function (a) {
							return " " + a + ""
						},
						trail: " ",
						used: function (a) {
							return " " + a + ""
						}
					}
				}, {
					key: "appBridge",
					icon: "icon-vip-center-app-bridge",
					color: "yellow-lighter",
					info: "",
					content: {
						normal: " ",
						trail: " ",
						used: ""
					}
				}, {
					key: "userSync",
					icon: "icon-vip-center-user-async",
					color: "blue-deep",
					info: "",
					content: {
						normal: " ",
						trail: " ",
						used: ""
					}
				}, {
					key: "print",
					icon: "icon-vip-center-print",
					color: "green-deep",
					info: "",
					content: {
						normal: " ",
						trail: " ",
						used: "  ",
						limit: "  "
					}
				}
			],
			_defaultConfig: function () {
				return a.extend(FX.VipCenter.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_vip_center",
					trail: !1,
					buffer: !1,
					warnCritical: .6,
					errorCritical: .9,
					upgrade: !1,
					renew: !1,
					freePack: {}
				})
			},
			_init: function () {
				FX.VipCenter.superclass._init.apply(this, arguments),
				a(this.element).append(this._createVersion()).append(this._createPrivilege()).append(this._createService())
			},
			_createVersion: function () {
				var b,
				c = this.options,
				d = FX.CONST.VIP_ORDER.PACK[c.pack.name],
				e = this.btns,
				f = a('<div  class="version"/>');
				b = c.trail ? "" : c.buffer ? d.name + "" : d.name,
				f.append('<div class="version-name"><span class="name-tip">' + b + "</span></div>");
				var g = a('<ul class="version-line"/>').appendTo(f);
				if (c.start) {
					var h = c.start ? FX.Utils.date2Str(new Date(c.start), "yyyy-MM-dd HH:mm:ss") : "";
					g.append('<li class="line-item">' + h + "</li>")
				}
				if (c.expire && !c.buffer) {
					var i = parseInt((new Date(c.expire).getTime() - (new Date).getTime()) / 864e5),
					j = i <= 30 ? "" : "";
					g.append('<li class="line-item">' + FX.Utils.date2Str(new Date(+new Date(c.expire) - 1e3), "yyyy-MM-dd HH:mm:ss") + "<span>" + j + "</span></li>")
				}
				var k = a('<div class="version-btn-wrapper"/>').appendTo(f),
				l = [];
				return c.renew && l.push("renew"),
				c.upgrade && l.push("upgrade"),
				"user" === c.pack.name && l.push("addusers"),
				"free" !== c.pack.name || c.trailDate || l.push("trail"),
				FX.Utils.forEach(l, function (b, d) {
					e[d].url ? k.append('<a  onclick="FX.Utils.dt(FX.CONST.TRACKER.VIP_CENTER_PACK)" href="' + e[d].url + '" class="version-btn ' + e[d].color + '">' + e[d].text + "</a>") : a('<div class="version-btn ' + e[d].color + '">' + e[d].text + "</div>").on("click", function () {
						"free" !== c.pack.name || c.trailDate || FX.Utils.getVipTrail()
					}).appendTo(k)
				}),
				f
			},
			_createPrivilege: function () {
				var b = this.options,
				c = b.totalUsers < 0 ? "" : b.totalUsers + "",
				d = b.users > b.totalUsers && b.totalUsers > 0 ? "" : "hide",
				e = b.totalUsers < 0 ? .5 : b.users / b.totalUsers,
				f = "";
				e > b.errorCritical ? f = "danger" : e > b.warnCritical && (f = "warning");
				var g = this._formatFile(b.usedFiles),
				h = this._formatFile(b.totalFiles),
				i = b.usedFiles > b.totalFiles ? "" : "hide",
				j = "";
				b.trail && b.usedFiles > b.freePack.file_upload && (j = "", i = "");
				var k = b.usedFiles / b.totalFiles,
				l = "";
				k > b.errorCritical ? l = "danger" : e > b.warnCritical && (l = "warning");
				var m = b.usedData > b.totalData ? "" : "hide",
				n = b.usedData / b.totalData,
				o = "";
				n > b.errorCritical ? o = "danger" : n > b.warnCritical && (o = "warning");
				var p = "";
				b.trail && b.usedData > b.freePack.data && (p = "", m = "");
				var q = a('<div class="version-privilege"/>');
				q.append('<div class="privilege-name"></div>');
				var r = a('<div class="privilege-row"/>').appendTo(q);
				r.append('<div class="row-name-wrapper"><i class="name-icon green icon-vip-center-total-user"></i><span class="name-text"></span></div>'),
				new FX.Progress({
					renderEl: a('<div class="row-progress"/>').appendTo(r),
					width: null,
					valueNow: 100 * e,
					height: 10,
					isAnimate: !1,
					isStriped: !1,
					style: f
				}),
				r.append('<div class="row-content"><div class="content-item">' + b.users + '</div><div class="content-item">' + c + '</div><div class="content-item-right  ' + d + '"></div></div>');
				var s = a('<div class="privilege-row"/>').appendTo(q);
				s.append('<div class="row-name-wrapper"><i class="name-icon yellow icon-vip-center-single-file-block"></i><span class="name-text"> </span></div>'),
				new FX.Progress({
					renderEl: a('<div class="row-progress"/>').appendTo(s),
					width: null,
					valueNow: 100 * k,
					height: 10,
					isAnimate: !1,
					isStriped: !1,
					style: l
				}),
				s.append('<div class="row-content"><div class="content-item">' + g + '</div><div class="content-item">' + h + '</div><div class="content-item-right  ' + i + '">' + j + "</div></div>");
				var t = a('<div class="privilege-row"/>').appendTo(q);
				t.append('<div class="row-name-wrapper"><i class="name-icon blue icon-vip-center-total-data"></i><span class="name-text"></span></div>'),
				new FX.Progress({
					renderEl: a('<div class="row-progress"/>').appendTo(t),
					width: null,
					valueNow: 100 * n,
					height: 10,
					isAnimate: !1,
					isStriped: !1,
					style: o
				});
				var u = "free" === b.pack.name || "oem" === b.pack.name || "logo" === b.pack.name ? "x-hide" : "";
				return t.append('<div class="row-content"><div class="content-item">' + this._formatDataCount(b.usedData) + '</div><div class="content-item">' + this._formatDataCount(b.totalData) + '</div><a class="content-item button ' + u + ' " href="/profile/order/create?type=upgrade&addon=data"></a><div class="content-item-right  ' + m + '">' + p + "</div></div>"),
				q
			},
			_formatDataCount: function (a) {
				return a > 1e4 ? a / 1e4 + "" : a < 0 ? "0" : a + ""
			},
			_formatFile: function (a) {
				var b = ["bytes", "KB", "MB", "GB"],
				c = 1024,
				d = 0;
				a = a < 0 ? 0 : a;
				for (var e = 0; e < b.length && (d = e, !(a < Math.pow(c, e + 1))); e++);
				var f = (a / Math.pow(c, d)).toFixed(0),
				g = 0 === d ? "" : b[d];
				return f + " " + g
			},
			_createService: function () {
				var b = a('<div class="version-service"/>'),
				c = this;
				return FX.Utils.forEach(this.serviceItems, function (a, d) {
					b.append(c._createServiceItem(d))
				}),
				b
			},
			_createServiceItem: function (b) {
				var c = this.options,
				d = this.btns,
				e = a('<div class="service-item"/>');
				e.append('<i class="item-icon ' + b.icon + " " + b.color + '"></i>');
				var f,
				g;
				switch (b.key) {
				case "service":
					var h = c.service,
					i = b[h],
					j = c.pack.name;
					e.append('<div class="item-name">' + i.name + "</div>"),
					e.append('<div class="item-info">' + b.info + "</div>"),
					g = a('<div class="item-wrapper"/>').appendTo(e),
					"silver" === h ? ("lite" === j ? g.text(i.content.special) : "user" === j ? g.text(i.content.rare) : g.text(i.content.normal), g.prepend('<div>QQ<a href="http://q.url.cn/s/mXZUtym">2852203489</a></div>')) : g.text(i.content),
					"gold" === h && e.children("i").addClass("gold"),
					f = a('<div class="footer-btn-wrapper"/>').appendTo(g);
					var k = i.btn[j];
					FX.Utils.forEach(k, function (b, c) {
						a('<a href="' + d[c].url + '" class="wrapper-btn col-' + k.length + '">' + d[c].text + "</a>").appendTo(f)
					});
					break;
				case "logo":
					this._createServiceItemWrapper(c.pack.logo, b, d, e, !0, !1);
					break;
				case "aggregate":
					var l = c.pack.aggregate;
					e.append('<div class="item-name">' + l + "/</div>"),
					c.aggregateTable > l ? e.append('<div class="item-info error">' + c.aggregateTable + "/</div>") : c.trail && c.aggregateTable > c.freePack.aggregate ? e.append('<div class="item-info warning">' + c.aggregateTable + "/</div>") : e.append('<div class="item-info">' + b.info + "</div>"),
					"free" === c.pack.name || "logo" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(c.trail ? b.content.trail : b.content.normal(l)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(f)) : "user" !== c.pack.name && "ent" !== c.pack.name && "oem" !== c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(b.content.normal(l)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.upgradepack.url + '">' + d.upgradepack.text + "</a>").appendTo(f)) : a('<div class="item-wrapper"><div class="wrapper-center-text">' + b.content.used(l) + "</div></div>").appendTo(e);
					break;
				case "formData":
					var m = c.pack.form_data;
					e.append('<div class="item-name">' + m / 1e4 + "</div>"),
					c.dataEntry > m ? e.append('<div class="item-info error">' + c.dataEntry / 1e4 + "</div>") : c.trail && c.dataEntry > c.freePack.form_data ? e.append('<div class="item-info warning">' + c.dataEntry / 1e4 + "</div>") : e.append('<div class="item-info">' + b.info + "</div>"),
					"free" === c.pack.name || "logo" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(c.trail ? b.content.trail : b.content.normal(m / 1e4)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(f)) : "user" !== c.pack.name && "ent" !== c.pack.name && "oem" !== c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(b.content.normal(m / 1e4)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.upgradepack.url + '">' + d.upgradepack.text + "</a>").appendTo(f)) : a('<div class="item-wrapper"><div class="wrapper-center-text">' + b.content.used(m / 1e4) + "</div></div>").appendTo(e);
					break;
				case "singleFile":
					var n = c.pack.single_file;
					e.append('<div class="item-name">' + n / 1048576 + "M</div>"),
					e.append('<div class="item-info">' + b.info + "</div>"),
					"free" === c.pack.name || "logo" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(c.trail ? b.content.trail : b.content.normal(n / 1048576)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(f)) : "lite" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(b.content.normal(n / 1048576)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.upgradepack.url + '">' + d.upgradepack.text + "</a>").appendTo(f)) : a('<div class="item-wrapper"><div class="wrapper-center-text">' + b.content.used(n / 1048576) + "</div></div>").appendTo(e);
					break;
				case "excelImport":
					var o = c.pack.excel_import;
					e.append('<div class="item-name">' + o / 1048576 + "M</div>"),
					e.append('<div class="item-info">' + b.info + "</div>"),
					"free" === c.pack.name || "logo" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(c.trail ? b.content.trail : b.content.normal(o / 1048576)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(f)) : "lite" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(b.content.normal(o / 1048576)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<div class="wrapper-btn col-1" href="' + d.upgradepack.url + '">' + d.upgradepack.text + "</div>").appendTo(f)) : a('<div class="item-wrapper"><div class="wrapper-center-text">' + b.content.used(o / 1048576) + "</div></div>").appendTo(e);
					break;
				case "dataBackup":
					var p = c.pack.data_backup;
					if (0 === p) {
						e.append('<div class="item-name"></div>'),
						e.append('<div class="item-info">' + b.info + "</div>"),
						g = a('<div class="item-wrapper"/>').appendTo(e),
						g.text(b.content.invalid),
						f = a('<div class="footer-btn-wrapper"/>').appendTo(g);
						var q = "free" === c.pack.name || "logo" === c.pack.name ? "getpack" : "upgradepack";
						a('<a class="wrapper-btn col-1" href="' + d[q].url + '">' + d[q].text + "</a>").appendTo(f)
					} else
						e.append('<div class="item-name">' + p + "</div>"), e.append('<div class="item-info">' + b.info + "</div>"), "free" === c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(b.content.trail), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(f)) : "user" !== c.pack.name && "ent" !== c.pack.name && "oem" !== c.pack.name ? (g = a('<div class="item-wrapper"/>').appendTo(e), g.text(b.content.normal(p)), f = a('<div class="footer-btn-wrapper"/>').appendTo(g), a('<a class="wrapper-btn col-1" href="' + d.upgradepack.url + '">' + d.upgradepack.text + "</a>").appendTo(f)) : a('<div class="item-wrapper"><div class="wrapper-center-text">' + b.content.used(p) + "</div></div>").appendTo(e);
					break;
				case "appBridge":
					this._createServiceItemWrapper(c.pack.app_bridge, b, d, e, !1, !0);
					break;
				case "userSync":
					c.pack.user_sync;
					this._createServiceItemWrapper(c.pack.user_sync, b, d, e, !1, !0);
					break;
				case "print":
					var r,
					s,
					t,
					u = c.pack.print;
					switch (u) {
					case -1:
						r = " ",
						c.trail && c.print > c.freePack.print ? (s = "" + c.print + "", t = "warning") : s = b.info;
						break;
					case 0:
						r = "",
						c.print > u ? (s = "" + c.print + "", t = "error") : s = b.info;
						break;
					default:
						r = u + "",
						c.print > u ? (s = "" + c.print + "", t = "error") : s = b.info
					}
					if (e.append('<div class="item-name">' + r + "</div>"), e.append('<div class="item-info ' + t + '">' + s + "</div>"), "free" === c.pack.name) {
						g = a('<div class="item-wrapper"/>').appendTo(e);
						var v = c.trail ? b.content.trail : b.content.normal;
						g.text(v),
						f = a('<div class="footer-btn-wrapper"/>').appendTo(g),
						a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(f)
					} else {
						var v = u === -1 ? b.content.used : b.content.limit;
						a('<div class="item-wrapper"><div class="wrapper-center-text">' + v + "</div></div>").appendTo(e)
					}
				}
				return e
			},
			_createServiceItemWrapper: function (b, c, d, e, f, g) {
				var h,
				i,
				j = this.options;
				if (0 === b) {
					e.append('<div class="item-name"></div>'),
					e.append('<div class="item-info">' + c.info + "</div>"),
					h = a('<div class="item-wrapper"/>').appendTo(e);
					var k = f && j.trail ? c.content.trail : c.content.normal;
					h.text(k),
					i = a('<div class="footer-btn-wrapper"/>').appendTo(h);
					var l = "free" === j.pack.name || "logo" === j.pack.name ? "getpack" : "upgradepack";
					a('<a class="wrapper-btn col-1" href="' + d[l].url + '">' + d[l].text + "</a>").appendTo(i)
				} else
					e.append('<div class="item-name"></div>'), e.append('<div class="item-info">' + c.info + "</div>"), g && "free" === j.pack.name ? (h = a('<div class="item-wrapper"/>').appendTo(e), h.text(c.content.trail), i = a('<div class="footer-btn-wrapper"/>').appendTo(h), a('<a class="wrapper-btn col-1" href="' + d.getpack.url + '">' + d.getpack.text + "</a>").appendTo(i)) : a('<div class="item-wrapper"><div class="wrapper-center-text">' + c.content.used + "</div></div>").appendTo(e)
			}
		})
}
(jQuery), function (a) {
	FX.K12Form = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.K12Form.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_k12form_pane",
					hasFilled: !1,
					hasResult: !1,
					pass: !1,
					items: [{
							label: "",
							widget: {
								type: "text",
								width: 400,
								allowBlank: !1,
								widgetName: "contact_name"
							}
						}, {
							label: "",
							widget: {
								type: "radiogroup",
								width: 400,
								allowBlank: !1,
								items: [{
										text: "",
										value: 1,
										selected: !0
									}, {
										text: "",
										value: 0
									}
								],
								value: 1,
								widgetName: "contact_sex"
							}
						}, {
							label: " ",
							widget: {
								type: "text",
								width: 400,
								allowBlank: !1,
								regex: "^((\\(\\d{2,3}\\))|(\\d{3}\\-))?1\\d{10}$",
								noRepeat: !1,
								widgetName: "contact_phone"
							}
						}
					],
					steps: ["", " 3~5", " "]
				})
			},
			_init: function () {
				FX.K12Form.superclass._init.apply(this, arguments);
				var a = this.options;
				a.hasFilled ? this._renderStep() : this._renderForm()
			},
			_renderForm: function () {
				var b = this,
				c = this.options;
				this.element.append('<div class="title-bar"></div>'),
				this.element.append('<div class="title-info"></div>');
				var d = a('<div class="k12-container"/>').appendTo(this.element);
				this.widgets = {},
				c.items.map(function (a) {
					d.append(b._createFormItem(a))
				}),
				a('<div class="form-submit"></div>').on("click", function () {
					var c = !0,
					d = {};
					FX.Utils.forEach(b.widgets, function (b, e) {
						var f = a(e.element).next(".error-msg");
						if (e.checkValidate())
							f.hide();
						else {
							c = !1;
							var g = "*";
							switch (e.options.invalidateType) {
							case "blank":
								g = "*";
								break;
							case "regex":
								g = "* "
							}
							f.text(g).show()
						}
						d[e.getWidgetName()] = e.getValue()
					}),
					c && FX.Utils.ajax({
						url: "/profile/corp_verify/submit",
						data: d
					}, function () {
						window.location.reload()
					})
				}).appendTo(d)
			},
			_createFormItem: function (b) {
				var c = a('<div class="container-row"/>');
				c.append('<div class="col-3 label-info">' + b.label + "</div>");
				var d = a('<div class="col-9 form-item"/>').appendTo(c),
				e = FX.createWidget(a.extend({
							renderEl: a("<div/>").appendTo(d)
						}, b.widget)),
				f = e.getWidgetName();
				return this.widgets[f] = e,
				a('<div class="error-msg"/>').hide().appendTo(d),
				c
			},
			_renderStep: function () {
				var b = this.options,
				c = a('<div class="k12-container large"/>').appendTo(this.element),
				d = a('<div class="container-row"/>').appendTo(c),
				e = b.hasResult ? 2 : 1;
				b.steps.map(function (b, c) {
					var f = c <= e ? "active" : "",
					g = a('<div class="col-4 step-item"/>').appendTo(d);
					g.append('<div class="item-icon ' + f + '">' + (c + 1) + "</div>"),
					g.append('<div class="item-info">' + b + "</div>")
				});
				var f;
				f = b.hasResult ? b.pass ? " 6 " : "" : " 3~5 ",
				a('<div class="form-info">' + f + "</div>").appendTo(c),
				b.pass && a('<a href="/profile/packs" class="form-submit"></a>').appendTo(c)
			}
		})
}
(jQuery), !function () {
	function a(a) {
		return a && (a.ownerDocument || a.document || a).documentElement
	}
	function b(a) {
		return a && (a.ownerDocument && a.ownerDocument.defaultView || a.document && a || a.defaultView)
	}
	function c(a, b) {
		return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN
	}
	function d(a) {
		return null === a ? NaN : +a
	}
	function e(a) {
		return !isNaN(a)
	}
	function f(a) {
		return {
			left: function (b, c, d, e) {
				for (arguments.length < 3 && (d = 0), arguments.length < 4 && (e = b.length); d < e; ) {
					var f = d + e >>> 1;
					a(b[f], c) < 0 ? d = f + 1 : e = f
				}
				return d
			},
			right: function (b, c, d, e) {
				for (arguments.length < 3 && (d = 0), arguments.length < 4 && (e = b.length); d < e; ) {
					var f = d + e >>> 1;
					a(b[f], c) > 0 ? e = f : d = f + 1
				}
				return d
			}
		}
	}
	function g(a) {
		return a.length
	}
	function h(a) {
		for (var b = 1; a * b % 1; )
			b *= 10;
		return b
	}
	function i(a, b) {
		for (var c in b)
			Object.defineProperty(a.prototype, c, {
				value: b[c],
				enumerable: !1
			})
	}
	function j() {
		this._ = Object.create(null)
	}
	function k(a) {
		return (a += "") === mg || a[0] === ng ? ng + a : a
	}
	function l(a) {
		return (a += "")[0] === ng ? a.slice(1) : a
	}
	function m(a) {
		return k(a)in this._
	}
	function n(a) {
		return (a = k(a))in this._ && delete this._[a]
	}
	function o() {
		var a = [];
		for (var b in this._)
			a.push(l(b));
		return a
	}
	function p() {
		var a = 0;
		for (var b in this._)
			++a;
		return a
	}
	function q() {
		for (var a in this._)
			return !1;
		return !0
	}
	function r() {
		this._ = Object.create(null)
	}
	function s(a) {
		return a
	}
	function t(a, b, c) {
		return function () {
			var d = c.apply(b, arguments);
			return d === b ? a : d
		}
	}
	function u(a, b) {
		if (b in a)
			return b;
		b = b.charAt(0).toUpperCase() + b.slice(1);
		for (var c = 0, d = og.length; c < d; ++c) {
			var e = og[c] + b;
			if (e in a)
				return e
		}
	}
	function v() {}
	function w() {}
	function x(a) {
		function b() {
			for (var b, d = c, e = -1, f = d.length; ++e < f; )
				(b = d[e].on) && b.apply(this, arguments);
			return a
		}
		var c = [],
		d = new j;
		return b.on = function (b, e) {
			var f,
			g = d.get(b);
			return arguments.length < 2 ? g && g.on : (g && (g.on = null, c = c.slice(0, f = c.indexOf(g)).concat(c.slice(f + 1)), d.remove(b)), e && c.push(d.set(b, {
						on: e
					})), a)
		},
		b
	}
	function y() {
		bg.event.preventDefault()
	}
	function z() {
		for (var a, b = bg.event; a = b.sourceEvent; )
			b = a;
		return b
	}
	function A(a) {
		for (var b = new w, c = 0, d = arguments.length; ++c < d; )
			b[arguments[c]] = x(b);
		return b.of = function (c, d) {
			return function (e) {
				try {
					var f = e.sourceEvent = bg.event;
					e.target = a,
					bg.event = e,
					b[e.type].apply(c, d)
				}
				finally {
					bg.event = f
				}
			}
		},
		b
	}
	function B(a) {
		return qg(a, ug),
		a
	}
	function C(a) {
		return "function" == typeof a ? a : function () {
			return rg(a, this)
		}
	}
	function D(a) {
		return "function" == typeof a ? a : function () {
			return sg(a, this)
		}
	}
	function E(a, b) {
		function c() {
			this.removeAttribute(a)
		}
		function d() {
			this.removeAttributeNS(a.space, a.local)
		}
		function e() {
			this.setAttribute(a, b)
		}
		function f() {
			this.setAttributeNS(a.space, a.local, b)
		}
		function g() {
			var c = b.apply(this, arguments);
			null == c ? this.removeAttribute(a) : this.setAttribute(a, c)
		}
		function h() {
			var c = b.apply(this, arguments);
			null == c ? this.removeAttributeNS(a.space, a.local) : this.setAttributeNS(a.space, a.local, c)
		}
		return a = bg.ns.qualify(a),
		null == b ? a.local ? d : c : "function" == typeof b ? a.local ? h : g : a.local ? f : e
	}
	function F(a) {
		return a.trim().replace(/\s+/g, " ")
	}
	function G(a) {
		return new RegExp("(?:^|\\s+)" + bg.requote(a) + "(?:\\s+|$)", "g")
	}
	function H(a) {
		return (a + "").trim().split(/^|\s+/)
	}
	function I(a, b) {
		function c() {
			for (var c = -1; ++c < e; )
				a[c](this, b)
		}
		function d() {
			for (var c = -1, d = b.apply(this, arguments); ++c < e; )
				a[c](this, d)
		}
		a = H(a).map(J);
		var e = a.length;
		return "function" == typeof b ? d : c
	}
	function J(a) {
		var b = G(a);
		return function (c, d) {
			if (e = c.classList)
				return d ? e.add(a) : e.remove(a);
			var e = c.getAttribute("class") || "";
			d ? (b.lastIndex = 0, b.test(e) || c.setAttribute("class", F(e + " " + a))) : c.setAttribute("class", F(e.replace(b, " ")))
		}
	}
	function K(a, b, c) {
		function d() {
			this.style.removeProperty(a)
		}
		function e() {
			this.style.setProperty(a, b, c)
		}
		function f() {
			var d = b.apply(this, arguments);
			null == d ? this.style.removeProperty(a) : this.style.setProperty(a, d, c)
		}
		return null == b ? d : "function" == typeof b ? f : e
	}
	function L(a, b) {
		function c() {
			delete this[a]
		}
		function d() {
			this[a] = b
		}
		function e() {
			var c = b.apply(this, arguments);
			null == c ? delete this[a] : this[a] = c
		}
		return null == b ? c : "function" == typeof b ? e : d
	}
	function M(a) {
		function b() {
			var b = this.ownerDocument,
			c = this.namespaceURI;
			return c ? b.createElementNS(c, a) : b.createElement(a)
		}
		function c() {
			return this.ownerDocument.createElementNS(a.space, a.local)
		}
		return "function" == typeof a ? a : (a = bg.ns.qualify(a)).local ? c : b
	}
	function N() {
		var a = this.parentNode;
		a && a.removeChild(this)
	}
	function O(a) {
		return {
			__data__: a
		}
	}
	function P(a) {
		return function () {
			return tg(this, a)
		}
	}
	function Q(a) {
		return arguments.length || (a = c),
		function (b, c) {
			return b && c ? a(b.__data__, c.__data__) : !b - !c
		}
	}
	function R(a, b) {
		for (var c = 0, d = a.length; c < d; c++)
			for (var e, f = a[c], g = 0, h = f.length; g < h; g++)
				(e = f[g]) && b(e, g, c);
		return a
	}
	function S(a) {
		return qg(a, wg),
		a
	}
	function T(a) {
		var b,
		c;
		return function (d, e, f) {
			var g,
			h = a[f].update,
			i = h.length;
			for (f != c && (c = f, b = 0), e >= b && (b = e + 1); !(g = h[b]) && ++b < i; );
			return g
		}
	}
	function U(a, b, c) {
		function d() {
			var b = this[g];
			b && (this.removeEventListener(a, b, b.$), delete this[g])
		}
		function e() {
			var e = i(b, dg(arguments));
			d.call(this),
			this.addEventListener(a, this[g] = e, e.$ = c),
			e._ = b
		}
		function f() {
			var b,
			c = new RegExp("^__on([^.]+)" + bg.requote(a) + "$");
			for (var d in this)
				if (b = d.match(c)) {
					var e = this[d];
					this.removeEventListener(b[1], e, e.$),
					delete this[d]
				}
		}
		var g = "__on" + a,
		h = a.indexOf("."),
		i = V;
		h > 0 && (a = a.slice(0, h));
		var j = xg.get(a);
		return j && (a = j, i = W),
		h ? b ? e : d : b ? v : f
	}
	function V(a, b) {
		return function (c) {
			var d = bg.event;
			bg.event = c,
			b[0] = this.__data__;
			try {
				a.apply(this, b)
			}
			finally {
				bg.event = d
			}
		}
	}
	function W(a, b) {
		var c = V(a, b);
		return function (a) {
			var b = this,
			d = a.relatedTarget;
			d && (d === b || 8 & d.compareDocumentPosition(b)) || c.call(b, a)
		}
	}
	function X(c) {
		var d = ".dragsuppress-" + ++zg,
		e = "click" + d,
		f = bg.select(b(c)).on("touchmove" + d, y).on("dragstart" + d, y).on("selectstart" + d, y);
		if (null == yg && (yg = !("onselectstart" in c) && u(c.style, "userSelect")), yg) {
			var g = a(c).style,
			h = g[yg];
			g[yg] = "none"
		}
		return function (a) {
			if (f.on(d, null), yg && (g[yg] = h), a) {
				var b = function () {
					f.on(e, null)
				};
				f.on(e, function () {
					y(),
					b()
				}, !0),
				setTimeout(b, 0)
			}
		}
	}
	function Y(a, c) {
		c.changedTouches && (c = c.changedTouches[0]);
		var d = a.ownerSVGElement || a;
		if (d.createSVGPoint) {
			var e = d.createSVGPoint();
			if (Ag < 0) {
				var f = b(a);
				if (f.scrollX || f.scrollY) {
					d = bg.select("body").append("svg").style({
							position: "absolute",
							top: 0,
							left: 0,
							margin: 0,
							padding: 0,
							border: "none"
						}, "important");
					var g = d[0][0].getScreenCTM();
					Ag = !(g.f || g.e),
					d.remove()
				}
			}
			return Ag ? (e.x = c.pageX, e.y = c.pageY) : (e.x = c.clientX, e.y = c.clientY),
			e = e.matrixTransform(a.getScreenCTM().inverse()),
			[e.x, e.y]
		}
		var h = a.getBoundingClientRect();
		return [c.clientX - h.left - a.clientLeft, c.clientY - h.top - a.clientTop]
	}
	function Z() {
		return bg.event.changedTouches[0].identifier
	}
	function $(a) {
		return a > 0 ? 1 : a < 0 ? -1 : 0
	}
	function _(a, b, c) {
		return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0])
	}
	function aa(a) {
		return a > 1 ? 0 : a < -1 ? Dg : Math.acos(a)
	}
	function ba(a) {
		return a > 1 ? Gg : a < -1 ? -Gg : Math.asin(a)
	}
	function ca(a) {
		return ((a = Math.exp(a)) - 1 / a) / 2
	}
	function da(a) {
		return ((a = Math.exp(a)) + 1 / a) / 2
	}
	function ea(a) {
		return ((a = Math.exp(2 * a)) - 1) / (a + 1)
	}
	function fa(a) {
		return (a = Math.sin(a / 2)) * a
	}
	function ga() {}
	function ha(a, b, c) {
		return this instanceof ha ? (this.h = +a, this.s = +b, void(this.l = +c)) : arguments.length < 2 ? a instanceof ha ? new ha(a.h, a.s, a.l) : va("" + a, wa, ha) : new ha(a, b, c)
	}
	function ia(a, b, c) {
		function d(a) {
			return a > 360 ? a -= 360 : a < 0 && (a += 360),
			a < 60 ? f + (g - f) * a / 60 : a < 180 ? g : a < 240 ? f + (g - f) * (240 - a) / 60 : f
		}
		function e(a) {
			return Math.round(255 * d(a))
		}
		var f,
		g;
		return a = isNaN(a) ? 0 : (a %= 360) < 0 ? a + 360 : a,
		b = isNaN(b) ? 0 : b < 0 ? 0 : b > 1 ? 1 : b,
		c = c < 0 ? 0 : c > 1 ? 1 : c,
		g = c <= .5 ? c * (1 + b) : c + b - c * b,
		f = 2 * c - g,
		new ra(e(a + 120), e(a), e(a - 120))
	}
	function ja(a, b, c) {
		return this instanceof ja ? (this.h = +a, this.c = +b, void(this.l = +c)) : arguments.length < 2 ? a instanceof ja ? new ja(a.h, a.c, a.l) : a instanceof la ? na(a.l, a.a, a.b) : na((a = xa((a = bg.rgb(a)).r, a.g, a.b)).l, a.a, a.b) : new ja(a, b, c)
	}
	function ka(a, b, c) {
		return isNaN(a) && (a = 0),
		isNaN(b) && (b = 0),
		new la(c, Math.cos(a *= Hg) * b, Math.sin(a) * b)
	}
	function la(a, b, c) {
		return this instanceof la ? (this.l = +a, this.a = +b, void(this.b = +c)) : arguments.length < 2 ? a instanceof la ? new la(a.l, a.a, a.b) : a instanceof ja ? ka(a.h, a.c, a.l) : xa((a = ra(a)).r, a.g, a.b) : new la(a, b, c)
	}
	function ma(a, b, c) {
		var d = (a + 16) / 116,
		e = d + b / 500,
		f = d - c / 200;
		return e = oa(e) * Sg,
		d = oa(d) * Tg,
		f = oa(f) * Ug,
		new ra(qa(3.2404542 * e - 1.5371385 * d - .4985314 * f), qa( - .969266 * e + 1.8760108 * d + .041556 * f), qa(.0556434 * e - .2040259 * d + 1.0572252 * f))
	}
	function na(a, b, c) {
		return a > 0 ? new ja(Math.atan2(c, b) * Ig, Math.sqrt(b * b + c * c), a) : new ja(NaN, NaN, a)
	}
	function oa(a) {
		return a > .206893034 ? a * a * a : (a - 4 / 29) / 7.787037
	}
	function pa(a) {
		return a > .008856 ? Math.pow(a, 1 / 3) : 7.787037 * a + 4 / 29
	}
	function qa(a) {
		return Math.round(255 * (a <= .00304 ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - .055))
	}
	function ra(a, b, c) {
		return this instanceof ra ? (this.r = ~~a, this.g = ~~b, void(this.b = ~~c)) : arguments.length < 2 ? a instanceof ra ? new ra(a.r, a.g, a.b) : va("" + a, ra, ia) : new ra(a, b, c)
	}
	function sa(a) {
		return new ra(a >> 16, a >> 8 & 255, 255 & a)
	}
	function ta(a) {
		return sa(a) + ""
	}
	function ua(a) {
		return a < 16 ? "0" + Math.max(0, a).toString(16) : Math.min(255, a).toString(16)
	}
	function va(a, b, c) {
		var d,
		e,
		f,
		g = 0,
		h = 0,
		i = 0;
		if (d = /([a-z]+)\((.*)\)/i.exec(a))
			switch (e = d[2].split(","), d[1]) {
			case "hsl":
				return c(parseFloat(e[0]), parseFloat(e[1]) / 100, parseFloat(e[2]) / 100);
			case "rgb":
				return b(za(e[0]), za(e[1]), za(e[2]))
			}
		return (f = Xg.get(a.toLowerCase())) ? b(f.r, f.g, f.b) : (null == a || "#" !== a.charAt(0) || isNaN(f = parseInt(a.slice(1), 16)) || (4 === a.length ? (g = (3840 & f) >> 4, g = g >> 4 | g, h = 240 & f, h = h >> 4 | h, i = 15 & f, i = i << 4 | i) : 7 === a.length && (g = (16711680 & f) >> 16, h = (65280 & f) >> 8, i = 255 & f)), b(g, h, i))
	}
	function wa(a, b, c) {
		var d,
		e,
		f = Math.min(a /= 255, b /= 255, c /= 255),
		g = Math.max(a, b, c),
		h = g - f,
		i = (g + f) / 2;
		return h ? (e = i < .5 ? h / (g + f) : h / (2 - g - f), d = a == g ? (b - c) / h + (b < c ? 6 : 0) : b == g ? (c - a) / h + 2 : (a - b) / h + 4, d *= 60) : (d = NaN, e = i > 0 && i < 1 ? 0 : d),
		new ha(d, e, i)
	}
	function xa(a, b, c) {
		a = ya(a),
		b = ya(b),
		c = ya(c);
		var d = pa((.4124564 * a + .3575761 * b + .1804375 * c) / Sg),
		e = pa((.2126729 * a + .7151522 * b + .072175 * c) / Tg),
		f = pa((.0193339 * a + .119192 * b + .9503041 * c) / Ug);
		return la(116 * e - 16, 500 * (d - e), 200 * (e - f))
	}
	function ya(a) {
		return (a /= 255) <= .04045 ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
	}
	function za(a) {
		var b = parseFloat(a);
		return "%" === a.charAt(a.length - 1) ? Math.round(2.55 * b) : b
	}
	function Aa(a) {
		return "function" == typeof a ? a : function () {
			return a
		}
	}
	function Ba(a) {
		return function (b, c, d) {
			return 2 === arguments.length && "function" == typeof c && (d = c, c = null),
			Ca(b, c, a, d)
		}
	}
	function Ca(a, b, c, d) {
		function e() {
			var a,
			b = i.status;
			if (!b && Ea(i) || b >= 200 && b < 300 || 304 === b) {
				try {
					a = c.call(f, i)
				} catch (a) {
					return void g.error.call(f, a)
				}
				g.load.call(f, a)
			} else
				g.error.call(f, i)
		}
		var f = {},
		g = bg.dispatch("beforesend", "progress", "load", "error"),
		h = {},
		i = new XMLHttpRequest,
		j = null;
		return !this.XDomainRequest || "withCredentials" in i || !/^(http(s)?:)?\/\//.test(a) || (i = new XDomainRequest),
		"onload" in i ? i.onload = i.onerror = e : i.onreadystatechange = function () {
			i.readyState > 3 && e()
		},
		i.onprogress = function (a) {
			var b = bg.event;
			bg.event = a;
			try {
				g.progress.call(f, i)
			}
			finally {
				bg.event = b
			}
		},
		f.header = function (a, b) {
			return a = (a + "").toLowerCase(),
			arguments.length < 2 ? h[a] : (null == b ? delete h[a] : h[a] = b + "", f)
		},
		f.mimeType = function (a) {
			return arguments.length ? (b = null == a ? null : a + "", f) : b
		},
		f.responseType = function (a) {
			return arguments.length ? (j = a, f) : j
		},
		f.response = function (a) {
			return c = a,
			f
		},
		["get", "post"].forEach(function (a) {
			f[a] = function () {
				return f.send.apply(f, [a].concat(dg(arguments)))
			}
		}),
		f.send = function (c, d, e) {
			if (2 === arguments.length && "function" == typeof d && (e = d, d = null), i.open(c, a, !0), null == b || "accept" in h || (h.accept = b + ",*/*"), i.setRequestHeader)
				for (var k in h)
					i.setRequestHeader(k, h[k]);
			return null != b && i.overrideMimeType && i.overrideMimeType(b),
			null != j && (i.responseType = j),
			null != e && f.on("error", e).on("load", function (a) {
				e(null, a)
			}),
			g.beforesend.call(f, i),
			i.send(null == d ? null : d),
			f
		},
		f.abort = function () {
			return i.abort(),
			f
		},
		bg.rebind(f, g, "on"),
		null == d ? f : f.get(Da(d))
	}
	function Da(a) {
		return 1 === a.length ? function (b, c) {
			a(null == b ? c : null)
		}
		 : a
	}
	function Ea(a) {
		var b = a.responseType;
		return b && "text" !== b ? a.response : a.responseText
	}
	function Fa() {
		var a = Ga(),
		b = Ha() - a;
		b > 24 ? (isFinite(b) && (clearTimeout(_g), _g = setTimeout(Fa, b)), $g = 0) : ($g = 1, bh(Fa))
	}
	function Ga() {
		var a = Date.now();
		for (ah = Yg; ah; )
			a >= ah.t && (ah.f = ah.c(a - ah.t)), ah = ah.n;
		return a
	}
	function Ha() {
		for (var a, b = Yg, c = 1 / 0; b; )
			b.f ? b = a ? a.n = b.n : Yg = b.n : (b.t < c && (c = b.t), b = (a = b).n);
		return Zg = a,
		c
	}
	function Ia(a, b) {
		return b - (a ? Math.ceil(Math.log(a) / Math.LN10) : 1)
	}
	function Ja(a, b) {
		var c = Math.pow(10, 3 * lg(8 - b));
		return {
			scale: b > 8 ? function (a) {
				return a / c
			}
			 : function (a) {
				return a * c
			},
			symbol: a
		}
	}
	function Ka(a) {
		var b = a.decimal,
		c = a.thousands,
		d = a.grouping,
		e = a.currency,
		f = d && c ? function (a, b) {
			for (var e = a.length, f = [], g = 0, h = d[0], i = 0; e > 0 && h > 0 && (i + h + 1 > b && (h = Math.max(1, b - i)), f.push(a.substring(e -= h, e + h)), !((i += h + 1) > b)); )
				h = d[g = (g + 1) % d.length];
			return f.reverse().join(c)
		}
		 : s;
		return function (a) {
			var c = dh.exec(a),
			d = c[1] || " ",
			g = c[2] || ">",
			h = c[3] || "-",
			i = c[4] || "",
			j = c[5],
			k = +c[6],
			l = c[7],
			m = c[8],
			n = c[9],
			o = 1,
			p = "",
			q = "",
			r = !1,
			s = !0;
			switch (m && (m = +m.substring(1)), (j || "0" === d && "=" === g) && (j = d = "0", g = "="), n) {
			case "n":
				l = !0,
				n = "g";
				break;
			case "%":
				o = 100,
				q = "%",
				n = "f";
				break;
			case "p":
				o = 100,
				q = "%",
				n = "r";
				break;
			case "b":
			case "o":
			case "x":
			case "X":
				"#" === i && (p = "0" + n.toLowerCase());
			case "c":
				s = !1;
			case "d":
				r = !0,
				m = 0;
				break;
			case "s":
				o = -1,
				n = "r"
			}
			"$" === i && (p = e[0], q = e[1]),
			"r" != n || m || (n = "g"),
			null != m && ("g" == n ? m = Math.max(1, Math.min(21, m)) : "e" != n && "f" != n || (m = Math.max(0, Math.min(20, m)))),
			n = eh.get(n) || La;
			var t = j && l;
			return function (a) {
				var c = q;
				if (r && a % 1)
					return "";
				var e = a < 0 || 0 === a && 1 / a < 0 ? (a = -a, "-") : "-" === h ? "" : h;
				if (o < 0) {
					var i = bg.formatPrefix(a, m);
					a = i.scale(a),
					c = i.symbol + q
				} else
					a *= o;
				a = n(a, m);
				var u,
				v,
				w = a.lastIndexOf(".");
				if (w < 0) {
					var x = s ? a.lastIndexOf("e") : -1;
					x < 0 ? (u = a, v = "") : (u = a.substring(0, x), v = a.substring(x))
				} else
					u = a.substring(0, w), v = b + a.substring(w + 1);
				!j && l && (u = f(u, 1 / 0));
				var y = p.length + u.length + v.length + (t ? 0 : e.length),
				z = y < k ? new Array(y = k - y + 1).join(d) : "";
				return t && (u = f(z + u, z.length ? k - v.length : 1 / 0)),
				e += p,
				a = u + v,
				("<" === g ? e + a + z : ">" === g ? z + e + a : "^" === g ? z.substring(0, y >>= 1) + e + a + z.substring(y) : e + (t ? a : z + a)) + c
			}
		}
	}
	function La(a) {
		return a + ""
	}
	function Ma() {
		this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
	}
	function Na(a, b, c) {
		function d(b) {
			var c = a(b),
			d = f(c, 1);
			return b - c < d - b ? c : d
		}
		function e(c) {
			return b(c = a(new gh(c - 1)), 1),
			c
		}
		function f(a, c) {
			return b(a = new gh(+a), c),
			a
		}
		function g(a, d, f) {
			var g = e(a),
			h = [];
			if (f > 1)
				for (; g < d; )
					c(g) % f || h.push(new Date(+g)), b(g, 1);
			else
				for (; g < d; )
					h.push(new Date(+g)), b(g, 1);
			return h
		}
		function h(a, b, c) {
			try {
				gh = Ma;
				var d = new Ma;
				return d._ = a,
				g(d, b, c)
			}
			finally {
				gh = Date
			}
		}
		a.floor = a,
		a.round = d,
		a.ceil = e,
		a.offset = f,
		a.range = g;
		var i = a.utc = Oa(a);
		return i.floor = i,
		i.round = Oa(d),
		i.ceil = Oa(e),
		i.offset = Oa(f),
		i.range = h,
		a
	}
	function Oa(a) {
		return function (b, c) {
			try {
				gh = Ma;
				var d = new Ma;
				return d._ = b,
				a(d, c)._;
			}
			finally {
				gh = Date
			}
		}
	}
	function Pa(a) {
		function b(a) {
			function b(b) {
				for (var c, e, f, g = [], h = -1, i = 0; ++h < d; )
					37 === a.charCodeAt(h) && (g.push(a.slice(i, h)), null != (e = ih[c = a.charAt(++h)]) && (c = a.charAt(++h)), (f = C[c]) && (c = f(b, null == e ? "e" === c ? " " : "0" : e)), g.push(c), i = h + 1);
				return g.push(a.slice(i, h)),
				g.join("")
			}
			var d = a.length;
			return b.parse = function (b) {
				var d = {
					y: 1900,
					m: 0,
					d: 1,
					H: 0,
					M: 0,
					S: 0,
					L: 0,
					Z: null
				},
				e = c(d, a, b, 0);
				if (e != b.length)
					return null;
				"p" in d && (d.H = d.H % 12 + 12 * d.p);
				var f = null != d.Z && gh !== Ma,
				g = new(f ? Ma : gh);
				return "j" in d ? g.setFullYear(d.y, 0, d.j) : "w" in d && ("W" in d || "U" in d) ? (g.setFullYear(d.y, 0, 1), g.setFullYear(d.y, 0, "W" in d ? (d.w + 6) % 7 + 7 * d.W - (g.getDay() + 5) % 7 : d.w + 7 * d.U - (g.getDay() + 6) % 7)) : g.setFullYear(d.y, d.m, d.d),
				g.setHours(d.H + (d.Z / 100 | 0), d.M + d.Z % 100, d.S, d.L),
				f ? g._ : g
			},
			b.toString = function () {
				return a
			},
			b
		}
		function c(a, b, c, d) {
			for (var e, f, g, h = 0, i = b.length, j = c.length; h < i; ) {
				if (d >= j)
					return -1;
				if (e = b.charCodeAt(h++), 37 === e) {
					if (g = b.charAt(h++), f = D[g in ih ? b.charAt(h++) : g], !f || (d = f(a, c, d)) < 0)
						return -1
				} else if (e != c.charCodeAt(d++))
					return -1
			}
			return d
		}
		function d(a, b, c) {
			w.lastIndex = 0;
			var d = w.exec(b.slice(c));
			return d ? (a.w = x.get(d[0].toLowerCase()), c + d[0].length) : -1
		}
		function e(a, b, c) {
			u.lastIndex = 0;
			var d = u.exec(b.slice(c));
			return d ? (a.w = v.get(d[0].toLowerCase()), c + d[0].length) : -1
		}
		function f(a, b, c) {
			A.lastIndex = 0;
			var d = A.exec(b.slice(c));
			return d ? (a.m = B.get(d[0].toLowerCase()), c + d[0].length) : -1
		}
		function g(a, b, c) {
			y.lastIndex = 0;
			var d = y.exec(b.slice(c));
			return d ? (a.m = z.get(d[0].toLowerCase()), c + d[0].length) : -1
		}
		function h(a, b, d) {
			return c(a, C.c.toString(), b, d)
		}
		function i(a, b, d) {
			return c(a, C.x.toString(), b, d)
		}
		function j(a, b, d) {
			return c(a, C.X.toString(), b, d)
		}
		function k(a, b, c) {
			var d = t.get(b.slice(c, c += 2).toLowerCase());
			return null == d ? -1 : (a.p = d, c)
		}
		var l = a.dateTime,
		m = a.date,
		n = a.time,
		o = a.periods,
		p = a.days,
		q = a.shortDays,
		r = a.months,
		s = a.shortMonths;
		b.utc = function (a) {
			function c(a) {
				try {
					gh = Ma;
					var b = new gh;
					return b._ = a,
					d(b)
				}
				finally {
					gh = Date
				}
			}
			var d = b(a);
			return c.parse = function (a) {
				try {
					gh = Ma;
					var b = d.parse(a);
					return b && b._
				}
				finally {
					gh = Date
				}
			},
			c.toString = d.toString,
			c
		},
		b.multi = b.utc.multi = hb;
		var t = bg.map(),
		u = Ra(p),
		v = Sa(p),
		w = Ra(q),
		x = Sa(q),
		y = Ra(r),
		z = Sa(r),
		A = Ra(s),
		B = Sa(s);
		o.forEach(function (a, b) {
			t.set(a.toLowerCase(), b)
		});
		var C = {
			a: function (a) {
				return q[a.getDay()]
			},
			A: function (a) {
				return p[a.getDay()]
			},
			b: function (a) {
				return s[a.getMonth()]
			},
			B: function (a) {
				return r[a.getMonth()]
			},
			c: b(l),
			d: function (a, b) {
				return Qa(a.getDate(), b, 2)
			},
			e: function (a, b) {
				return Qa(a.getDate(), b, 2)
			},
			H: function (a, b) {
				return Qa(a.getHours(), b, 2)
			},
			I: function (a, b) {
				return Qa(a.getHours() % 12 || 12, b, 2)
			},
			j: function (a, b) {
				return Qa(1 + fh.dayOfYear(a), b, 3)
			},
			L: function (a, b) {
				return Qa(a.getMilliseconds(), b, 3)
			},
			m: function (a, b) {
				return Qa(a.getMonth() + 1, b, 2)
			},
			M: function (a, b) {
				return Qa(a.getMinutes(), b, 2)
			},
			p: function (a) {
				return o[ + (a.getHours() >= 12)]
			},
			S: function (a, b) {
				return Qa(a.getSeconds(), b, 2)
			},
			U: function (a, b) {
				return Qa(fh.sundayOfYear(a), b, 2)
			},
			w: function (a) {
				return a.getDay()
			},
			W: function (a, b) {
				return Qa(fh.mondayOfYear(a), b, 2)
			},
			x: b(m),
			X: b(n),
			y: function (a, b) {
				return Qa(a.getFullYear() % 100, b, 2)
			},
			Y: function (a, b) {
				return Qa(a.getFullYear() % 1e4, b, 4)
			},
			Z: fb,
			"%": function () {
				return "%"
			}
		},
		D = {
			a: d,
			A: e,
			b: f,
			B: g,
			c: h,
			d: _a,
			e: _a,
			H: bb,
			I: bb,
			j: ab,
			L: eb,
			m: $a,
			M: cb,
			p: k,
			S: db,
			U: Ua,
			w: Ta,
			W: Va,
			x: i,
			X: j,
			y: Xa,
			Y: Wa,
			Z: Ya,
			"%": gb
		};
		return b
	}
	function Qa(a, b, c) {
		var d = a < 0 ? "-" : "",
		e = (d ? -a : a) + "",
		f = e.length;
		return d + (f < c ? new Array(c - f + 1).join(b) + e : e)
	}
	function Ra(a) {
		return new RegExp("^(?:" + a.map(bg.requote).join("|") + ")", "i")
	}
	function Sa(a) {
		for (var b = new j, c = -1, d = a.length; ++c < d; )
			b.set(a[c].toLowerCase(), c);
		return b
	}
	function Ta(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 1));
		return d ? (a.w = +d[0], c + d[0].length) : -1
	}
	function Ua(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c));
		return d ? (a.U = +d[0], c + d[0].length) : -1
	}
	function Va(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c));
		return d ? (a.W = +d[0], c + d[0].length) : -1
	}
	function Wa(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 4));
		return d ? (a.y = +d[0], c + d[0].length) : -1
	}
	function Xa(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 2));
		return d ? (a.y = Za(+d[0]), c + d[0].length) : -1
	}
	function Ya(a, b, c) {
		return /^[+-]\d{4}$/.test(b = b.slice(c, c + 5)) ? (a.Z = -b, c + 5) : -1
	}
	function Za(a) {
		return a + (a > 68 ? 1900 : 2e3)
	}
	function $a(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 2));
		return d ? (a.m = d[0] - 1, c + d[0].length) : -1
	}
	function _a(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 2));
		return d ? (a.d = +d[0], c + d[0].length) : -1
	}
	function ab(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 3));
		return d ? (a.j = +d[0], c + d[0].length) : -1
	}
	function bb(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 2));
		return d ? (a.H = +d[0], c + d[0].length) : -1
	}
	function cb(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 2));
		return d ? (a.M = +d[0], c + d[0].length) : -1
	}
	function db(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 2));
		return d ? (a.S = +d[0], c + d[0].length) : -1
	}
	function eb(a, b, c) {
		jh.lastIndex = 0;
		var d = jh.exec(b.slice(c, c + 3));
		return d ? (a.L = +d[0], c + d[0].length) : -1
	}
	function fb(a) {
		var b = a.getTimezoneOffset(),
		c = b > 0 ? "-" : "+",
		d = lg(b) / 60 | 0,
		e = lg(b) % 60;
		return c + Qa(d, "0", 2) + Qa(e, "0", 2)
	}
	function gb(a, b, c) {
		kh.lastIndex = 0;
		var d = kh.exec(b.slice(c, c + 1));
		return d ? c + d[0].length : -1
	}
	function hb(a) {
		for (var b = a.length, c = -1; ++c < b; )
			a[c][0] = this(a[c][0]);
		return function (b) {
			for (var c = 0, d = a[c]; !d[1](b); )
				d = a[++c];
			return d[0](b)
		}
	}
	function ib() {}
	function jb(a, b, c) {
		var d = c.s = a + b,
		e = d - a,
		f = d - e;
		c.t = a - f + (b - e)
	}
	function kb(a, b) {
		a && oh.hasOwnProperty(a.type) && oh[a.type](a, b)
	}
	function lb(a, b, c) {
		var d,
		e = -1,
		f = a.length - c;
		for (b.lineStart(); ++e < f; )
			d = a[e], b.point(d[0], d[1], d[2]);
		b.lineEnd()
	}
	function mb(a, b) {
		var c = -1,
		d = a.length;
		for (b.polygonStart(); ++c < d; )
			lb(a[c], b, 1);
		b.polygonEnd()
	}
	function nb() {
		function a(a, b) {
			a *= Hg,
			b = b * Hg / 2 + Dg / 4;
			var c = a - d,
			g = c >= 0 ? 1 : -1,
			h = g * c,
			i = Math.cos(b),
			j = Math.sin(b),
			k = f * j,
			l = e * i + k * Math.cos(h),
			m = k * g * Math.sin(h);
			qh.add(Math.atan2(m, l)),
			d = a,
			e = i,
			f = j
		}
		var b,
		c,
		d,
		e,
		f;
		rh.point = function (g, h) {
			rh.point = a,
			d = (b = g) * Hg,
			e = Math.cos(h = (c = h) * Hg / 2 + Dg / 4),
			f = Math.sin(h)
		},
		rh.lineEnd = function () {
			a(b, c)
		}
	}
	function ob(a) {
		var b = a[0],
		c = a[1],
		d = Math.cos(c);
		return [d * Math.cos(b), d * Math.sin(b), Math.sin(c)]
	}
	function pb(a, b) {
		return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]
	}
	function qb(a, b) {
		return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]
	}
	function rb(a, b) {
		a[0] += b[0],
		a[1] += b[1],
		a[2] += b[2]
	}
	function sb(a, b) {
		return [a[0] * b, a[1] * b, a[2] * b]
	}
	function tb(a) {
		var b = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);
		a[0] /= b,
		a[1] /= b,
		a[2] /= b
	}
	function ub(a) {
		return [Math.atan2(a[1], a[0]), ba(a[2])]
	}
	function vb(a, b) {
		return lg(a[0] - b[0]) < Bg && lg(a[1] - b[1]) < Bg
	}
	function wb(a, b) {
		a *= Hg;
		var c = Math.cos(b *= Hg);
		xb(c * Math.cos(a), c * Math.sin(a), Math.sin(b))
	}
	function xb(a, b, c) {
		++sh,
		uh += (a - uh) / sh,
		vh += (b - vh) / sh,
		wh += (c - wh) / sh
	}
	function yb() {
		function a(a, e) {
			a *= Hg;
			var f = Math.cos(e *= Hg),
			g = f * Math.cos(a),
			h = f * Math.sin(a),
			i = Math.sin(e),
			j = Math.atan2(Math.sqrt((j = c * i - d * h) * j + (j = d * g - b * i) * j + (j = b * h - c * g) * j), b * g + c * h + d * i);
			th += j,
			xh += j * (b + (b = g)),
			yh += j * (c + (c = h)),
			zh += j * (d + (d = i)),
			xb(b, c, d)
		}
		var b,
		c,
		d;
		Dh.point = function (e, f) {
			e *= Hg;
			var g = Math.cos(f *= Hg);
			b = g * Math.cos(e),
			c = g * Math.sin(e),
			d = Math.sin(f),
			Dh.point = a,
			xb(b, c, d)
		}
	}
	function zb() {
		Dh.point = wb
	}
	function Ab() {
		function a(a, b) {
			a *= Hg;
			var c = Math.cos(b *= Hg),
			g = c * Math.cos(a),
			h = c * Math.sin(a),
			i = Math.sin(b),
			j = e * i - f * h,
			k = f * g - d * i,
			l = d * h - e * g,
			m = Math.sqrt(j * j + k * k + l * l),
			n = d * g + e * h + f * i,
			o = m && -aa(n) / m,
			p = Math.atan2(m, n);
			Ah += o * j,
			Bh += o * k,
			Ch += o * l,
			th += p,
			xh += p * (d + (d = g)),
			yh += p * (e + (e = h)),
			zh += p * (f + (f = i)),
			xb(d, e, f)
		}
		var b,
		c,
		d,
		e,
		f;
		Dh.point = function (g, h) {
			b = g,
			c = h,
			Dh.point = a,
			g *= Hg;
			var i = Math.cos(h *= Hg);
			d = i * Math.cos(g),
			e = i * Math.sin(g),
			f = Math.sin(h),
			xb(d, e, f)
		},
		Dh.lineEnd = function () {
			a(b, c),
			Dh.lineEnd = zb,
			Dh.point = wb
		}
	}
	function Bb(a, b) {
		function c(c, d) {
			return c = a(c, d),
			b(c[0], c[1])
		}
		return a.invert && b.invert && (c.invert = function (c, d) {
			return c = b.invert(c, d),
			c && a.invert(c[0], c[1])
		}),
		c
	}
	function Cb() {
		return !0
	}
	function Db(a, b, c, d, e) {
		var f = [],
		g = [];
		if (a.forEach(function (a) {
				if (!((b = a.length - 1) <= 0)) {
					var b,
					c = a[0],
					d = a[b];
					if (vb(c, d)) {
						e.lineStart();
						for (var h = 0; h < b; ++h)
							e.point((c = a[h])[0], c[1]);
							return void e.lineEnd()
						}
						var i = new Fb(c, a, null, !0),
						j = new Fb(c, null, i, !1);
						i.o = j,
						f.push(i),
						g.push(j),
						i = new Fb(d, a, null, !1),
						j = new Fb(d, null, i, !0),
						i.o = j,
						f.push(i),
						g.push(j)
					}
				}), g.sort(b), Eb(f), Eb(g), f.length) {
				for (var h = 0, i = c, j = g.length; h < j; ++h)
					g[h].e = i = !i;
				for (var k, l, m = f[0]; ; ) {
					for (var n = m, o = !0; n.v; )
						if ((n = n.n) === m)
							return;
					k = n.z,
					e.lineStart();
					do {
						if (n.v = n.o.v = !0, n.e) {
							if (o)
								for (var h = 0, j = k.length; h < j; ++h)
									e.point((l = k[h])[0], l[1]);
							else
								d(n.x, n.n.x, 1, e);
							n = n.n
						} else {
							if (o) {
								k = n.p.z;
								for (var h = k.length - 1; h >= 0; --h)
									e.point((l = k[h])[0], l[1])
							} else
								d(n.x, n.p.x, -1, e);
							n = n.p
						}
						n = n.o,
						k = n.z,
						o = !o
					} while (!n.v);
					e.lineEnd()
				}
			}
	}
	function Eb(a) {
		if (b = a.length) {
			for (var b, c, d = 0, e = a[0]; ++d < b; )
				e.n = c = a[d], c.p = e, e = c;
			e.n = c = a[0],
			c.p = e
		}
	}
	function Fb(a, b, c, d) {
		this.x = a,
		this.z = b,
		this.o = c,
		this.e = d,
		this.v = !1,
		this.n = this.p = null
	}
	function Gb(a, b, c, d) {
		return function (e, f) {
			function g(b, c) {
				var d = e(b, c);
				a(b = d[0], c = d[1]) && f.point(b, c)
			}
			function h(a, b) {
				var c = e(a, b);
				q.point(c[0], c[1])
			}
			function i() {
				s.point = h,
				q.lineStart()
			}
			function j() {
				s.point = g,
				q.lineEnd()
			}
			function k(a, b) {
				p.push([a, b]);
				var c = e(a, b);
				u.point(c[0], c[1])
			}
			function l() {
				u.lineStart(),
				p = []
			}
			function m() {
				k(p[0][0], p[0][1]),
				u.lineEnd();
				var a,
				b = u.clean(),
				c = t.buffer(),
				d = c.length;
				if (p.pop(), o.push(p), p = null, d)
					if (1 & b) {
						a = c[0];
						var e,
						d = a.length - 1,
						g = -1;
						if (d > 0) {
							for (v || (f.polygonStart(), v = !0), f.lineStart(); ++g < d; )
								f.point((e = a[g])[0], e[1]);
							f.lineEnd()
						}
					} else
						d > 1 && 2 & b && c.push(c.pop().concat(c.shift())), n.push(c.filter(Hb))
			}
			var n,
			o,
			p,
			q = b(f),
			r = e.invert(d[0], d[1]),
			s = {
				point: g,
				lineStart: i,
				lineEnd: j,
				polygonStart: function () {
					s.point = k,
					s.lineStart = l,
					s.lineEnd = m,
					n = [],
					o = []
				},
				polygonEnd: function () {
					s.point = g,
					s.lineStart = i,
					s.lineEnd = j,
					n = bg.merge(n);
					var a = Nb(r, o);
					n.length ? (v || (f.polygonStart(), v = !0), Db(n, Jb, a, c, f)) : a && (v || (f.polygonStart(), v = !0), f.lineStart(), c(null, null, 1, f), f.lineEnd()),
					v && (f.polygonEnd(), v = !1),
					n = o = null
				},
				sphere: function () {
					f.polygonStart(),
					f.lineStart(),
					c(null, null, 1, f),
					f.lineEnd(),
					f.polygonEnd()
				}
			},
			t = Ib(),
			u = b(t),
			v = !1;
			return s
		}
	}
	function Hb(a) {
		return a.length > 1
	}
	function Ib() {
		var a,
		b = [];
		return {
			lineStart: function () {
				b.push(a = [])
			},
			point: function (b, c) {
				a.push([b, c])
			},
			lineEnd: v,
			buffer: function () {
				var c = b;
				return b = [],
				a = null,
				c
			},
			rejoin: function () {
				b.length > 1 && b.push(b.pop().concat(b.shift()))
			}
		}
	}
	function Jb(a, b) {
		return ((a = a.x)[0] < 0 ? a[1] - Gg - Bg : Gg - a[1]) - ((b = b.x)[0] < 0 ? b[1] - Gg - Bg : Gg - b[1])
	}
	function Kb(a) {
		var b,
		c = NaN,
		d = NaN,
		e = NaN;
		return {
			lineStart: function () {
				a.lineStart(),
				b = 1
			},
			point: function (f, g) {
				var h = f > 0 ? Dg : -Dg,
				i = lg(f - c);
				lg(i - Dg) < Bg ? (a.point(c, d = (d + g) / 2 > 0 ? Gg : -Gg), a.point(e, d), a.lineEnd(), a.lineStart(), a.point(h, d), a.point(f, d), b = 0) : e !== h && i >= Dg && (lg(c - e) < Bg && (c -= e * Bg), lg(f - h) < Bg && (f -= h * Bg), d = Lb(c, d, f, g), a.point(e, d), a.lineEnd(), a.lineStart(), a.point(h, d), b = 0),
				a.point(c = f, d = g),
				e = h
			},
			lineEnd: function () {
				a.lineEnd(),
				c = d = NaN
			},
			clean: function () {
				return 2 - b
			}
		}
	}
	function Lb(a, b, c, d) {
		var e,
		f,
		g = Math.sin(a - c);
		return lg(g) > Bg ? Math.atan((Math.sin(b) * (f = Math.cos(d)) * Math.sin(c) - Math.sin(d) * (e = Math.cos(b)) * Math.sin(a)) / (e * f * g)) : (b + d) / 2
	}
	function Mb(a, b, c, d) {
		var e;
		if (null == a)
			e = c * Gg, d.point(-Dg, e), d.point(0, e), d.point(Dg, e), d.point(Dg, 0), d.point(Dg, -e), d.point(0, -e), d.point(-Dg, -e), d.point(-Dg, 0), d.point(-Dg, e);
		else if (lg(a[0] - b[0]) > Bg) {
			var f = a[0] < b[0] ? Dg : -Dg;
			e = c * f / 2,
			d.point(-f, e),
			d.point(0, e),
			d.point(f, e)
		} else
			d.point(b[0], b[1])
	}
	function Nb(a, b) {
		var c = a[0],
		d = a[1],
		e = [Math.sin(c), -Math.cos(c), 0],
		f = 0,
		g = 0;
		qh.reset();
		for (var h = 0, i = b.length; h < i; ++h) {
			var j = b[h],
			k = j.length;
			if (k)
				for (var l = j[0], m = l[0], n = l[1] / 2 + Dg / 4, o = Math.sin(n), p = Math.cos(n), q = 1; ; ) {
					q === k && (q = 0),
					a = j[q];
					var r = a[0],
					s = a[1] / 2 + Dg / 4,
					t = Math.sin(s),
					u = Math.cos(s),
					v = r - m,
					w = v >= 0 ? 1 : -1,
					x = w * v,
					y = x > Dg,
					z = o * t;
					if (qh.add(Math.atan2(z * w * Math.sin(x), p * u + z * Math.cos(x))), f += y ? v + w * Eg : v, y ^ m >= c ^ r >= c) {
						var A = qb(ob(l), ob(a));
						tb(A);
						var B = qb(e, A);
						tb(B);
						var C = (y ^ v >= 0 ? -1 : 1) * ba(B[2]);
						(d > C || d === C && (A[0] || A[1])) && (g += y ^ v >= 0 ? 1 : -1)
					}
					if (!q++)
						break;
					m = r,
					o = t,
					p = u,
					l = a
				}
		}
		return (f < -Bg || f < Bg && qh < 0) ^ 1 & g
	}
	function Ob(a) {
		function b(a, b) {
			return Math.cos(a) * Math.cos(b) > f
		}
		function c(a) {
			var c,
			f,
			i,
			j,
			k;
			return {
				lineStart: function () {
					j = i = !1,
					k = 1
				},
				point: function (l, m) {
					var n,
					o = [l, m],
					p = b(l, m),
					q = g ? p ? 0 : e(l, m) : p ? e(l + (l < 0 ? Dg : -Dg), m) : 0;
					if (!c && (j = i = p) && a.lineStart(), p !== i && (n = d(c, o), (vb(c, n) || vb(o, n)) && (o[0] += Bg, o[1] += Bg, p = b(o[0], o[1]))), p !== i)
						k = 0, p ? (a.lineStart(), n = d(o, c), a.point(n[0], n[1])) : (n = d(c, o), a.point(n[0], n[1]), a.lineEnd()), c = n;
					else if (h && c && g ^ p) {
						var r;
						q & f || !(r = d(o, c, !0)) || (k = 0, g ? (a.lineStart(), a.point(r[0][0], r[0][1]), a.point(r[1][0], r[1][1]), a.lineEnd()) : (a.point(r[1][0], r[1][1]), a.lineEnd(), a.lineStart(), a.point(r[0][0], r[0][1])))
					}
					!p || c && vb(c, o) || a.point(o[0], o[1]),
					c = o,
					i = p,
					f = q
				},
				lineEnd: function () {
					i && a.lineEnd(),
					c = null
				},
				clean: function () {
					return k | (j && i) << 1
				}
			}
		}
		function d(a, b, c) {
			var d = ob(a),
			e = ob(b),
			g = [1, 0, 0],
			h = qb(d, e),
			i = pb(h, h),
			j = h[0],
			k = i - j * j;
			if (!k)
				return !c && a;
			var l = f * i / k,
			m = -f * j / k,
			n = qb(g, h),
			o = sb(g, l),
			p = sb(h, m);
			rb(o, p);
			var q = n,
			r = pb(o, q),
			s = pb(q, q),
			t = r * r - s * (pb(o, o) - 1);
			if (!(t < 0)) {
				var u = Math.sqrt(t),
				v = sb(q, (-r - u) / s);
				if (rb(v, o), v = ub(v), !c)
					return v;
				var w,
				x = a[0],
				y = b[0],
				z = a[1],
				A = b[1];
				y < x && (w = x, x = y, y = w);
				var B = y - x,
				C = lg(B - Dg) < Bg,
				D = C || B < Bg;
				if (!C && A < z && (w = z, z = A, A = w), D ? C ? z + A > 0 ^ v[1] < (lg(v[0] - x) < Bg ? z : A) : z <= v[1] && v[1] <= A : B > Dg ^ (x <= v[0] && v[0] <= y)) {
					var E = sb(q, (-r + u) / s);
					return rb(E, o),
					[v, ub(E)]
				}
			}
		}
		function e(b, c) {
			var d = g ? a : Dg - a,
			e = 0;
			return b < -d ? e |= 1 : b > d && (e |= 2),
			c < -d ? e |= 4 : c > d && (e |= 8),
			e
		}
		var f = Math.cos(a),
		g = f > 0,
		h = lg(f) > Bg,
		i = nc(a, 6 * Hg);
		return Gb(b, c, i, g ? [0, -a] : [-Dg, a - Dg])
	}
	function Pb(a, b, c, d) {
		return function (e) {
			var f,
			g = e.a,
			h = e.b,
			i = g.x,
			j = g.y,
			k = h.x,
			l = h.y,
			m = 0,
			n = 1,
			o = k - i,
			p = l - j;
			if (f = a - i, o || !(f > 0)) {
				if (f /= o, o < 0) {
					if (f < m)
						return;
					f < n && (n = f)
				} else if (o > 0) {
					if (f > n)
						return;
					f > m && (m = f)
				}
				if (f = c - i, o || !(f < 0)) {
					if (f /= o, o < 0) {
						if (f > n)
							return;
						f > m && (m = f)
					} else if (o > 0) {
						if (f < m)
							return;
						f < n && (n = f)
					}
					if (f = b - j, p || !(f > 0)) {
						if (f /= p, p < 0) {
							if (f < m)
								return;
							f < n && (n = f)
						} else if (p > 0) {
							if (f > n)
								return;
							f > m && (m = f)
						}
						if (f = d - j, p || !(f < 0)) {
							if (f /= p, p < 0) {
								if (f > n)
									return;
								f > m && (m = f)
							} else if (p > 0) {
								if (f < m)
									return;
								f < n && (n = f)
							}
							return m > 0 && (e.a = {
									x: i + m * o,
									y: j + m * p
								}),
							n < 1 && (e.b = {
									x: i + n * o,
									y: j + n * p
								}),
							e
						}
					}
				}
			}
		}
	}
	function Qb(a, b, c, d) {
		function e(d, e) {
			return lg(d[0] - a) < Bg ? e > 0 ? 0 : 3 : lg(d[0] - c) < Bg ? e > 0 ? 2 : 1 : lg(d[1] - b) < Bg ? e > 0 ? 1 : 0 : e > 0 ? 3 : 2
		}
		function f(a, b) {
			return g(a.x, b.x)
		}
		function g(a, b) {
			var c = e(a, 1),
			d = e(b, 1);
			return c !== d ? c - d : 0 === c ? b[1] - a[1] : 1 === c ? a[0] - b[0] : 2 === c ? a[1] - b[1] : b[0] - a[0]
		}
		return function (h) {
			function i(a) {
				for (var b = 0, c = q.length, d = a[1], e = 0; e < c; ++e)
					for (var f, g = 1, h = q[e], i = h.length, j = h[0]; g < i; ++g)
						f = h[g], j[1] <= d ? f[1] > d && _(j, f, a) > 0 && ++b : f[1] <= d && _(j, f, a) < 0 && --b, j = f;
				return 0 !== b
			}
			function j(f, h, i, j) {
				var k = 0,
				l = 0;
				if (null == f || (k = e(f, i)) !== (l = e(h, i)) || g(f, h) < 0 ^ i > 0) {
					do
						j.point(0 === k || 3 === k ? a : c, k > 1 ? d : b);
					while ((k = (k + i + 4) % 4) !== l)
				} else
					j.point(h[0], h[1])
			}
			function k(e, f) {
				return a <= e && e <= c && b <= f && f <= d
			}
			function l(a, b) {
				k(a, b) && h.point(a, b)
			}
			function m() {
				D.point = o,
				q && q.push(r = []),
				y = !0,
				x = !1,
				v = w = NaN
			}
			function n() {
				p && (o(s, t), u && x && B.rejoin(), p.push(B.buffer())),
				D.point = l,
				x && h.lineEnd()
			}
			function o(a, b) {
				a = Math.max(-Fh, Math.min(Fh, a)),
				b = Math.max(-Fh, Math.min(Fh, b));
				var c = k(a, b);
				if (q && r.push([a, b]), y)
					s = a, t = b, u = c, y = !1, c && (h.lineStart(), h.point(a, b));
				else if (c && x)
					h.point(a, b);
				else {
					var d = {
						a: {
							x: v,
							y: w
						},
						b: {
							x: a,
							y: b
						}
					};
					C(d) ? (x || (h.lineStart(), h.point(d.a.x, d.a.y)), h.point(d.b.x, d.b.y), c || h.lineEnd(), z = !1) : c && (h.lineStart(), h.point(a, b), z = !1)
				}
				v = a,
				w = b,
				x = c
			}
			var p,
			q,
			r,
			s,
			t,
			u,
			v,
			w,
			x,
			y,
			z,
			A = h,
			B = Ib(),
			C = Pb(a, b, c, d),
			D = {
				point: l,
				lineStart: m,
				lineEnd: n,
				polygonStart: function () {
					h = B,
					p = [],
					q = [],
					z = !0
				},
				polygonEnd: function () {
					h = A,
					p = bg.merge(p);
					var b = i([a, d]),
					c = z && b,
					e = p.length;
					(c || e) && (h.polygonStart(), c && (h.lineStart(), j(null, null, 1, h), h.lineEnd()), e && Db(p, f, b, j, h), h.polygonEnd()),
					p = q = r = null
				}
			};
			return D
		}
	}
	function Rb(a) {
		var b = 0,
		c = Dg / 3,
		d = fc(a),
		e = d(b, c);
		return e.parallels = function (a) {
			return arguments.length ? d(b = a[0] * Dg / 180, c = a[1] * Dg / 180) : [b / Dg * 180, c / Dg * 180]
		},
		e
	}
	function Sb(a, b) {
		function c(a, b) {
			var c = Math.sqrt(f - 2 * e * Math.sin(b)) / e;
			return [c * Math.sin(a *= e), g - c * Math.cos(a)]
		}
		var d = Math.sin(a),
		e = (d + Math.sin(b)) / 2,
		f = 1 + d * (2 * e - d),
		g = Math.sqrt(f) / e;
		return c.invert = function (a, b) {
			var c = g - b;
			return [Math.atan2(a, c) / e, ba((f - (a * a + c * c) * e * e) / (2 * e))]
		},
		c
	}
	function Tb() {
		function a(a, b) {
			Hh += e * a - d * b,
			d = a,
			e = b
		}
		var b,
		c,
		d,
		e;
		Mh.point = function (f, g) {
			Mh.point = a,
			b = d = f,
			c = e = g
		},
		Mh.lineEnd = function () {
			a(b, c)
		}
	}
	function Ub(a, b) {
		a < Ih && (Ih = a),
		a > Kh && (Kh = a),
		b < Jh && (Jh = b),
		b > Lh && (Lh = b)
	}
	function Vb() {
		function a(a, b) {
			g.push("M", a, ",", b, f)
		}
		function b(a, b) {
			g.push("M", a, ",", b),
			h.point = c
		}
		function c(a, b) {
			g.push("L", a, ",", b)
		}
		function d() {
			h.point = a
		}
		function e() {
			g.push("Z")
		}
		var f = Wb(4.5),
		g = [],
		h = {
			point: a,
			lineStart: function () {
				h.point = b
			},
			lineEnd: d,
			polygonStart: function () {
				h.lineEnd = e
			},
			polygonEnd: function () {
				h.lineEnd = d,
				h.point = a
			},
			pointRadius: function (a) {
				return f = Wb(a),
				h
			},
			result: function () {
				if (g.length) {
					var a = g.join("");
					return g = [],
					a
				}
			}
		};
		return h
	}
	function Wb(a) {
		return "m0," + a + "a" + a + "," + a + " 0 1,1 0," + -2 * a + "a" + a + "," + a + " 0 1,1 0," + 2 * a + "z"
	}
	function Xb(a, b) {
		uh += a,
		vh += b,
		++wh
	}
	function Yb() {
		function a(a, d) {
			var e = a - b,
			f = d - c,
			g = Math.sqrt(e * e + f * f);
			xh += g * (b + a) / 2,
			yh += g * (c + d) / 2,
			zh += g,
			Xb(b = a, c = d)
		}
		var b,
		c;
		Oh.point = function (d, e) {
			Oh.point = a,
			Xb(b = d, c = e)
		}
	}
	function Zb() {
		Oh.point = Xb
	}
	function $b() {
		function a(a, b) {
			var c = a - d,
			f = b - e,
			g = Math.sqrt(c * c + f * f);
			xh += g * (d + a) / 2,
			yh += g * (e + b) / 2,
			zh += g,
			g = e * a - d * b,
			Ah += g * (d + a),
			Bh += g * (e + b),
			Ch += 3 * g,
			Xb(d = a, e = b)
		}
		var b,
		c,
		d,
		e;
		Oh.point = function (f, g) {
			Oh.point = a,
			Xb(b = d = f, c = e = g)
		},
		Oh.lineEnd = function () {
			a(b, c)
		}
	}
	function _b(a) {
		function b(b, c) {
			a.moveTo(b + g, c),
			a.arc(b, c, g, 0, Eg)
		}
		function c(b, c) {
			a.moveTo(b, c),
			h.point = d
		}
		function d(b, c) {
			a.lineTo(b, c)
		}
		function e() {
			h.point = b
		}
		function f() {
			a.closePath()
		}
		var g = 4.5,
		h = {
			point: b,
			lineStart: function () {
				h.point = c
			},
			lineEnd: e,
			polygonStart: function () {
				h.lineEnd = f
			},
			polygonEnd: function () {
				h.lineEnd = e,
				h.point = b
			},
			pointRadius: function (a) {
				return g = a,
				h
			},
			result: v
		};
		return h
	}
	function ac(a) {
		function b(a) {
			return (h ? d : c)(a)
		}
		function c(b) {
			return dc(b, function (c, d) {
				c = a(c, d),
				b.point(c[0], c[1])
			})
		}
		function d(b) {
			function c(c, d) {
				c = a(c, d),
				b.point(c[0], c[1])
			}
			function d() {
				t = NaN,
				y.point = f,
				b.lineStart()
			}
			function f(c, d) {
				var f = ob([c, d]),
				g = a(c, d);
				e(t, u, s, v, w, x, t = g[0], u = g[1], s = c, v = f[0], w = f[1], x = f[2], h, b),
				b.point(t, u)
			}
			function g() {
				y.point = c,
				b.lineEnd()
			}
			function i() {
				d(),
				y.point = j,
				y.lineEnd = k
			}
			function j(a, b) {
				f(l = a, m = b),
				n = t,
				o = u,
				p = v,
				q = w,
				r = x,
				y.point = f
			}
			function k() {
				e(t, u, s, v, w, x, n, o, l, p, q, r, h, b),
				y.lineEnd = g,
				g()
			}
			var l,
			m,
			n,
			o,
			p,
			q,
			r,
			s,
			t,
			u,
			v,
			w,
			x,
			y = {
				point: c,
				lineStart: d,
				lineEnd: g,
				polygonStart: function () {
					b.polygonStart(),
					y.lineStart = i
				},
				polygonEnd: function () {
					b.polygonEnd(),
					y.lineStart = d
				}
			};
			return y
		}
		function e(b, c, d, h, i, j, k, l, m, n, o, p, q, r) {
			var s = k - b,
			t = l - c,
			u = s * s + t * t;
			if (u > 4 * f && q--) {
				var v = h + n,
				w = i + o,
				x = j + p,
				y = Math.sqrt(v * v + w * w + x * x),
				z = Math.asin(x /= y),
				A = lg(lg(x) - 1) < Bg || lg(d - m) < Bg ? (d + m) / 2 : Math.atan2(w, v),
				B = a(A, z),
				C = B[0],
				D = B[1],
				E = C - b,
				F = D - c,
				G = t * E - s * F;
				(G * G / u > f || lg((s * E + t * F) / u - .5) > .3 || h * n + i * o + j * p < g) && (e(b, c, d, h, i, j, C, D, A, v /= y, w /= y, x, q, r), r.point(C, D), e(C, D, A, v, w, x, k, l, m, n, o, p, q, r))
			}
		}
		var f = .5,
		g = Math.cos(30 * Hg),
		h = 16;
		return b.precision = function (a) {
			return arguments.length ? (h = (f = a * a) > 0 && 16, b) : Math.sqrt(f)
		},
		b
	}
	function bc(a) {
		var b = ac(function (b, c) {
				return a([b * Ig, c * Ig])
			});
		return function (a) {
			return gc(b(a))
		}
	}
	function cc(a) {
		this.stream = a
	}
	function dc(a, b) {
		return {
			point: b,
			sphere: function () {
				a.sphere()
			},
			lineStart: function () {
				a.lineStart()
			},
			lineEnd: function () {
				a.lineEnd()
			},
			polygonStart: function () {
				a.polygonStart()
			},
			polygonEnd: function () {
				a.polygonEnd()
			}
		}
	}
	function ec(a) {
		return fc(function () {
			return a
		})()
	}
	function fc(a) {
		function b(a) {
			return a = h(a[0] * Hg, a[1] * Hg),
			[a[0] * m + i, j - a[1] * m]
		}
		function c(a) {
			return a = h.invert((a[0] - i) / m, (j - a[1]) / m),
			a && [a[0] * Ig, a[1] * Ig]
		}
		function d() {
			h = Bb(g = jc(r, t, u), f);
			var a = f(p, q);
			return i = n - a[0] * m,
			j = o + a[1] * m,
			e()
		}
		function e() {
			return k && (k.valid = !1, k = null),
			b
		}
		var f,
		g,
		h,
		i,
		j,
		k,
		l = ac(function (a, b) {
				return a = f(a, b),
				[a[0] * m + i, j - a[1] * m]
			}),
		m = 150,
		n = 480,
		o = 250,
		p = 0,
		q = 0,
		r = 0,
		t = 0,
		u = 0,
		v = Eh,
		w = s,
		x = null,
		y = null;
		return b.stream = function (a) {
			return k && (k.valid = !1),
			k = gc(v(g, l(w(a)))),
			k.valid = !0,
			k
		},
		b.clipAngle = function (a) {
			return arguments.length ? (v = null == a ? (x = a, Eh) : Ob((x = +a) * Hg), e()) : x
		},
		b.clipExtent = function (a) {
			return arguments.length ? (y = a, w = a ? Qb(a[0][0], a[0][1], a[1][0], a[1][1]) : s, e()) : y
		},
		b.scale = function (a) {
			return arguments.length ? (m = +a, d()) : m
		},
		b.translate = function (a) {
			return arguments.length ? (n = +a[0], o = +a[1], d()) : [n, o]
		},
		b.center = function (a) {
			return arguments.length ? (p = a[0] % 360 * Hg, q = a[1] % 360 * Hg, d()) : [p * Ig, q * Ig]
		},
		b.rotate = function (a) {
			return arguments.length ? (r = a[0] % 360 * Hg, t = a[1] % 360 * Hg, u = a.length > 2 ? a[2] % 360 * Hg : 0, d()) : [r * Ig, t * Ig, u * Ig]
		},
		bg.rebind(b, l, "precision"),
		function () {
			return f = a.apply(this, arguments),
			b.invert = f.invert && c,
			d()
		}
	}
	function gc(a) {
		return dc(a, function (b, c) {
			a.point(b * Hg, c * Hg)
		})
	}
	function hc(a, b) {
		return [a, b]
	}
	function ic(a, b) {
		return [a > Dg ? a - Eg : a < -Dg ? a + Eg : a, b]
	}
	function jc(a, b, c) {
		return a ? b || c ? Bb(lc(a), mc(b, c)) : lc(a) : b || c ? mc(b, c) : ic
	}
	function kc(a) {
		return function (b, c) {
			return b += a,
			[b > Dg ? b - Eg : b < -Dg ? b + Eg : b, c]
		}
	}
	function lc(a) {
		var b = kc(a);
		return b.invert = kc(-a),
		b
	}
	function mc(a, b) {
		function c(a, b) {
			var c = Math.cos(b),
			h = Math.cos(a) * c,
			i = Math.sin(a) * c,
			j = Math.sin(b),
			k = j * d + h * e;
			return [Math.atan2(i * f - k * g, h * d - j * e), ba(k * f + i * g)]
		}
		var d = Math.cos(a),
		e = Math.sin(a),
		f = Math.cos(b),
		g = Math.sin(b);
		return c.invert = function (a, b) {
			var c = Math.cos(b),
			h = Math.cos(a) * c,
			i = Math.sin(a) * c,
			j = Math.sin(b),
			k = j * f - i * g;
			return [Math.atan2(i * f + j * g, h * d + k * e), ba(k * d - h * e)]
		},
		c
	}
	function nc(a, b) {
		var c = Math.cos(a),
		d = Math.sin(a);
		return function (e, f, g, h) {
			var i = g * b;
			null != e ? (e = oc(c, e), f = oc(c, f), (g > 0 ? e < f : e > f) && (e += g * Eg)) : (e = a + g * Eg, f = a - .5 * i);
			for (var j, k = e; g > 0 ? k > f : k < f; k -= i)
				h.point((j = ub([c, -d * Math.cos(k), -d * Math.sin(k)]))[0], j[1])
		}
	}
	function oc(a, b) {
		var c = ob(b);
		c[0] -= a,
		tb(c);
		var d = aa(-c[1]);
		return ((-c[2] < 0 ? -d : d) + 2 * Math.PI - Bg) % (2 * Math.PI)
	}
	function pc(a, b, c) {
		var d = bg.range(a, b - Bg, c).concat(b);
		return function (a) {
			return d.map(function (b) {
				return [a, b]
			})
		}
	}
	function qc(a, b, c) {
		var d = bg.range(a, b - Bg, c).concat(b);
		return function (a) {
			return d.map(function (b) {
				return [b, a]
			})
		}
	}
	function rc(a) {
		return a.source
	}
	function sc(a) {
		return a.target
	}
	function tc(a, b, c, d) {
		var e = Math.cos(b),
		f = Math.sin(b),
		g = Math.cos(d),
		h = Math.sin(d),
		i = e * Math.cos(a),
		j = e * Math.sin(a),
		k = g * Math.cos(c),
		l = g * Math.sin(c),
		m = 2 * Math.asin(Math.sqrt(fa(d - b) + e * g * fa(c - a))),
		n = 1 / Math.sin(m),
		o = m ? function (a) {
			var b = Math.sin(a *= m) * n,
			c = Math.sin(m - a) * n,
			d = c * i + b * k,
			e = c * j + b * l,
			g = c * f + b * h;
			return [Math.atan2(e, d) * Ig, Math.atan2(g, Math.sqrt(d * d + e * e)) * Ig]
		}
		 : function () {
			return [a * Ig, b * Ig]
		};
		return o.distance = m,
		o
	}
	function uc() {
		function a(a, e) {
			var f = Math.sin(e *= Hg),
			g = Math.cos(e),
			h = lg((a *= Hg) - b),
			i = Math.cos(h);
			Ph += Math.atan2(Math.sqrt((h = g * Math.sin(h)) * h + (h = d * f - c * g * i) * h), c * f + d * g * i),
			b = a,
			c = f,
			d = g
		}
		var b,
		c,
		d;
		Qh.point = function (e, f) {
			b = e * Hg,
			c = Math.sin(f *= Hg),
			d = Math.cos(f),
			Qh.point = a
		},
		Qh.lineEnd = function () {
			Qh.point = Qh.lineEnd = v
		}
	}
	function vc(a, b) {
		function c(b, c) {
			var d = Math.cos(b),
			e = Math.cos(c),
			f = a(d * e);
			return [f * e * Math.sin(b), f * Math.sin(c)]
		}
		return c.invert = function (a, c) {
			var d = Math.sqrt(a * a + c * c),
			e = b(d),
			f = Math.sin(e),
			g = Math.cos(e);
			return [Math.atan2(a * f, d * g), Math.asin(d && c * f / d)]
		},
		c
	}
	function wc(a, b) {
		function c(a, b) {
			g > 0 ? b < -Gg + Bg && (b = -Gg + Bg) : b > Gg - Bg && (b = Gg - Bg);
			var c = g / Math.pow(e(b), f);
			return [c * Math.sin(f * a), g - c * Math.cos(f * a)]
		}
		var d = Math.cos(a),
		e = function (a) {
			return Math.tan(Dg / 4 + a / 2)
		},
		f = a === b ? Math.sin(a) : Math.log(d / Math.cos(b)) / Math.log(e(b) / e(a)),
		g = d * Math.pow(e(a), f) / f;
		return f ? (c.invert = function (a, b) {
			var c = g - b,
			d = $(f) * Math.sqrt(a * a + c * c);
			return [Math.atan2(a, c) / f, 2 * Math.atan(Math.pow(g / d, 1 / f)) - Gg]
		}, c) : yc
	}
	function xc(a, b) {
		function c(a, b) {
			var c = f - b;
			return [c * Math.sin(e * a), f - c * Math.cos(e * a)]
		}
		var d = Math.cos(a),
		e = a === b ? Math.sin(a) : (d - Math.cos(b)) / (b - a),
		f = d / e + a;
		return lg(e) < Bg ? hc : (c.invert = function (a, b) {
			var c = f - b;
			return [Math.atan2(a, c) / e, f - $(e) * Math.sqrt(a * a + c * c)]
		}, c)
	}
	function yc(a, b) {
		return [a, Math.log(Math.tan(Dg / 4 + b / 2))]
	}
	function zc(a) {
		var b,
		c = ec(a),
		d = c.scale,
		e = c.translate,
		f = c.clipExtent;
		return c.scale = function () {
			var a = d.apply(c, arguments);
			return a === c ? b ? c.clipExtent(null) : c : a
		},
		c.translate = function () {
			var a = e.apply(c, arguments);
			return a === c ? b ? c.clipExtent(null) : c : a
		},
		c.clipExtent = function (a) {
			var g = f.apply(c, arguments);
			if (g === c) {
				if (b = null == a) {
					var h = Dg * d(),
					i = e();
					f([[i[0] - h, i[1] - h], [i[0] + h, i[1] + h]])
				}
			} else
				b && (g = null);
			return g
		},
		c.clipExtent(null)
	}
	function Ac(a, b) {
		return [Math.log(Math.tan(Dg / 4 + b / 2)), -a]
	}
	function Bc(a) {
		return a[0]
	}
	function Cc(a) {
		return a[1]
	}
	function Dc(a) {
		for (var b = a.length, c = [0, 1], d = 2, e = 2; e < b; e++) {
			for (; d > 1 && _(a[c[d - 2]], a[c[d - 1]], a[e]) <= 0; )
				--d;
			c[d++] = e
		}
		return c.slice(0, d)
	}
	function Ec(a, b) {
		return a[0] - b[0] || a[1] - b[1]
	}
	function Fc(a, b, c) {
		return (c[0] - b[0]) * (a[1] - b[1]) < (c[1] - b[1]) * (a[0] - b[0])
	}
	function Gc(a, b, c, d) {
		var e = a[0],
		f = c[0],
		g = b[0] - e,
		h = d[0] - f,
		i = a[1],
		j = c[1],
		k = b[1] - i,
		l = d[1] - j,
		m = (h * (i - j) - l * (e - f)) / (l * g - h * k);
		return [e + m * g, i + m * k]
	}
	function Hc(a) {
		var b = a[0],
		c = a[a.length - 1];
		return !(b[0] - c[0] || b[1] - c[1])
	}
	function Ic() {
		bd(this),
		this.edge = this.site = this.circle = null
	}
	function Jc(a) {
		var b = ai.pop() || new Ic;
		return b.site = a,
		b
	}
	function Kc(a) {
		Uc(a),
		Zh.remove(a),
		ai.push(a),
		bd(a)
	}
	function Lc(a) {
		var b = a.circle,
		c = b.x,
		d = b.cy,
		e = {
			x: c,
			y: d
		},
		f = a.P,
		g = a.N,
		h = [a];
		Kc(a);
		for (var i = f; i.circle && lg(c - i.circle.x) < Bg && lg(d - i.circle.cy) < Bg; )
			f = i.P, h.unshift(i), Kc(i), i = f;
		h.unshift(i),
		Uc(i);
		for (var j = g; j.circle && lg(c - j.circle.x) < Bg && lg(d - j.circle.cy) < Bg; )
			g = j.N, h.push(j), Kc(j), j = g;
		h.push(j),
		Uc(j);
		var k,
		l = h.length;
		for (k = 1; k < l; ++k)
			j = h[k], i = h[k - 1], $c(j.edge, i.site, j.site, e);
		i = h[0],
		j = h[l - 1],
		j.edge = Yc(i.site, j.site, null, e),
		Tc(i),
		Tc(j)
	}
	function Mc(a) {
		for (var b, c, d, e, f = a.x, g = a.y, h = Zh._; h; )
			if (d = Nc(h, g) - f, d > Bg)
				h = h.L;
			else {
				if (e = f - Oc(h, g), !(e > Bg)) {
					d > -Bg ? (b = h.P, c = h) : e > -Bg ? (b = h, c = h.N) : b = c = h;
					break
				}
				if (!h.R) {
					b = h;
					break
				}
				h = h.R
			}
		var i = Jc(a);
		if (Zh.insert(b, i), b || c) {
			if (b === c)
				return Uc(b), c = Jc(b.site), Zh.insert(i, c), i.edge = c.edge = Yc(b.site, i.site), Tc(b), void Tc(c);
			if (!c)
				return void(i.edge = Yc(b.site, i.site));
			Uc(b),
			Uc(c);
			var j = b.site,
			k = j.x,
			l = j.y,
			m = a.x - k,
			n = a.y - l,
			o = c.site,
			p = o.x - k,
			q = o.y - l,
			r = 2 * (m * q - n * p),
			s = m * m + n * n,
			t = p * p + q * q,
			u = {
				x: (q * s - n * t) / r + k,
				y: (m * t - p * s) / r + l
			};
			$c(c.edge, j, o, u),
			i.edge = Yc(j, a, null, u),
			c.edge = Yc(a, o, null, u),
			Tc(b),
			Tc(c)
		}
	}
	function Nc(a, b) {
		var c = a.site,
		d = c.x,
		e = c.y,
		f = e - b;
		if (!f)
			return d;
		var g = a.P;
		if (!g)
			return  - (1 / 0);
		c = g.site;
		var h = c.x,
		i = c.y,
		j = i - b;
		if (!j)
			return h;
		var k = h - d,
		l = 1 / f - 1 / j,
		m = k / j;
		return l ? (-m + Math.sqrt(m * m - 2 * l * (k * k / (-2 * j) - i + j / 2 + e - f / 2))) / l + d : (d + h) / 2
	}
	function Oc(a, b) {
		var c = a.N;
		if (c)
			return Nc(c, b);
		var d = a.site;
		return d.y === b ? d.x : 1 / 0
	}
	function Pc(a) {
		this.site = a,
		this.edges = []
	}
	function Qc(a) {
		for (var b, c, d, e, f, g, h, i, j, k, l = a[0][0], m = a[1][0], n = a[0][1], o = a[1][1], p = Yh, q = p.length; q--; )
			if (f = p[q], f && f.prepare())
				for (h = f.edges, i = h.length, g = 0; g < i; )
					k = h[g].end(), d = k.x, e = k.y, j = h[++g % i].start(), b = j.x, c = j.y, (lg(d - b) > Bg || lg(e - c) > Bg) && (h.splice(g, 0, new _c(Zc(f.site, k, lg(d - l) < Bg && o - e > Bg ? {
									x: l,
									y: lg(b - l) < Bg ? c : o
								}
									 : lg(e - o) < Bg && m - d > Bg ? {
									x: lg(c - o) < Bg ? b : m,
									y: o
								}
									 : lg(d - m) < Bg && e - n > Bg ? {
									x: m,
									y: lg(b - m) < Bg ? c : n
								}
									 : lg(e - n) < Bg && d - l > Bg ? {
									x: lg(c - n) < Bg ? b : l,
									y: n
								}
									 : null), f.site, null)), ++i)
	}
	function Rc(a, b) {
		return b.angle - a.angle
	}
	function Sc() {
		bd(this),
		this.x = this.y = this.arc = this.site = this.cy = null
	}
	function Tc(a) {
		var b = a.P,
		c = a.N;
		if (b && c) {
			var d = b.site,
			e = a.site,
			f = c.site;
			if (d !== f) {
				var g = e.x,
				h = e.y,
				i = d.x - g,
				j = d.y - h,
				k = f.x - g,
				l = f.y - h,
				m = 2 * (i * l - j * k);
				if (!(m >= -Cg)) {
					var n = i * i + j * j,
					o = k * k + l * l,
					p = (l * n - j * o) / m,
					q = (i * o - k * n) / m,
					l = q + h,
					r = bi.pop() || new Sc;
					r.arc = a,
					r.site = e,
					r.x = p + g,
					r.y = l + Math.sqrt(p * p + q * q),
					r.cy = l,
					a.circle = r;
					for (var s = null, t = _h._; t; )
						if (r.y < t.y || r.y === t.y && r.x <= t.x) {
							if (!t.L) {
								s = t.P;
								break
							}
							t = t.L
						} else {
							if (!t.R) {
								s = t;
								break
							}
							t = t.R
						}
					_h.insert(s, r),
					s || ($h = r)
				}
			}
		}
	}
	function Uc(a) {
		var b = a.circle;
		b && (b.P || ($h = b.N), _h.remove(b), bi.push(b), bd(b), a.circle = null)
	}
	function Vc(a) {
		for (var b, c = Xh, d = Pb(a[0][0], a[0][1], a[1][0], a[1][1]), e = c.length; e--; )
			b = c[e], (!Wc(b, a) || !d(b) || lg(b.a.x - b.b.x) < Bg && lg(b.a.y - b.b.y) < Bg) && (b.a = b.b = null, c.splice(e, 1))
	}
	function Wc(a, b) {
		var c = a.b;
		if (c)
			return !0;
		var d,
		e,
		f = a.a,
		g = b[0][0],
		h = b[1][0],
		i = b[0][1],
		j = b[1][1],
		k = a.l,
		l = a.r,
		m = k.x,
		n = k.y,
		o = l.x,
		p = l.y,
		q = (m + o) / 2,
		r = (n + p) / 2;
		if (p === n) {
			if (q < g || q >= h)
				return;
			if (m > o) {
				if (f) {
					if (f.y >= j)
						return
				} else
					f = {
						x: q,
						y: i
					};
				c = {
					x: q,
					y: j
				}
			} else {
				if (f) {
					if (f.y < i)
						return
				} else
					f = {
						x: q,
						y: j
					};
				c = {
					x: q,
					y: i
				}
			}
		} else if (d = (m - o) / (p - n), e = r - d * q, d < -1 || d > 1)
			if (m > o) {
				if (f) {
					if (f.y >= j)
						return
				} else
					f = {
						x: (i - e) / d,
						y: i
					};
				c = {
					x: (j - e) / d,
					y: j
				}
			} else {
				if (f) {
					if (f.y < i)
						return
				} else
					f = {
						x: (j - e) / d,
						y: j
					};
				c = {
					x: (i - e) / d,
					y: i
				}
			}
		else if (n < p) {
			if (f) {
				if (f.x >= h)
					return
			} else
				f = {
					x: g,
					y: d * g + e
				};
			c = {
				x: h,
				y: d * h + e
			}
		} else {
			if (f) {
				if (f.x < g)
					return
			} else
				f = {
					x: h,
					y: d * h + e
				};
			c = {
				x: g,
				y: d * g + e
			}
		}
		return a.a = f,
		a.b = c,
		!0
	}
	function Xc(a, b) {
		this.l = a,
		this.r = b,
		this.a = this.b = null
	}
	function Yc(a, b, c, d) {
		var e = new Xc(a, b);
		return Xh.push(e),
		c && $c(e, a, b, c),
		d && $c(e, b, a, d),
		Yh[a.i].edges.push(new _c(e, a, b)),
		Yh[b.i].edges.push(new _c(e, b, a)),
		e
	}
	function Zc(a, b, c) {
		var d = new Xc(a, null);
		return d.a = b,
		d.b = c,
		Xh.push(d),
		d
	}
	function $c(a, b, c, d) {
		a.a || a.b ? a.l === c ? a.b = d : a.a = d : (a.a = d, a.l = b, a.r = c)
	}
	function _c(a, b, c) {
		var d = a.a,
		e = a.b;
		this.edge = a,
		this.site = b,
		this.angle = c ? Math.atan2(c.y - b.y, c.x - b.x) : a.l === b ? Math.atan2(e.x - d.x, d.y - e.y) : Math.atan2(d.x - e.x, e.y - d.y)
	}
	function ad() {
		this._ = null
	}
	function bd(a) {
		a.U = a.C = a.L = a.R = a.P = a.N = null
	}
	function cd(a, b) {
		var c = b,
		d = b.R,
		e = c.U;
		e ? e.L === c ? e.L = d : e.R = d : a._ = d,
		d.U = e,
		c.U = d,
		c.R = d.L,
		c.R && (c.R.U = c),
		d.L = c
	}
	function dd(a, b) {
		var c = b,
		d = b.L,
		e = c.U;
		e ? e.L === c ? e.L = d : e.R = d : a._ = d,
		d.U = e,
		c.U = d,
		c.L = d.R,
		c.L && (c.L.U = c),
		d.R = c
	}
	function ed(a) {
		for (; a.L; )
			a = a.L;
		return a
	}
	function fd(a, b) {
		var c,
		d,
		e,
		f = a.sort(gd).pop();
		for (Xh = [], Yh = new Array(a.length), Zh = new ad, _h = new ad; ; )
			if (e = $h, f && (!e || f.y < e.y || f.y === e.y && f.x < e.x))
				f.x === c && f.y === d || (Yh[f.i] = new Pc(f), Mc(f), c = f.x, d = f.y), f = a.pop();
			else {
				if (!e)
					break;
				Lc(e.arc)
			}
		b && (Vc(b), Qc(b));
		var g = {
			cells: Yh,
			edges: Xh
		};
		return Zh = _h = Xh = Yh = null,
		g
	}
	function gd(a, b) {
		return b.y - a.y || b.x - a.x
	}
	function hd(a, b, c) {
		return (a.x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y)
	}
	function id(a) {
		return a.x
	}
	function jd(a) {
		return a.y
	}
	function kd() {
		return {
			leaf: !0,
			nodes: [],
			point: null,
			x: null,
			y: null
		}
	}
	function ld(a, b, c, d, e, f) {
		if (!a(b, c, d, e, f)) {
			var g = .5 * (c + e),
			h = .5 * (d + f),
			i = b.nodes;
			i[0] && ld(a, i[0], c, d, g, h),
			i[1] && ld(a, i[1], g, d, e, h),
			i[2] && ld(a, i[2], c, h, g, f),
			i[3] && ld(a, i[3], g, h, e, f)
		}
	}
	function md(a, b, c, d, e, f, g) {
		var h,
		i = 1 / 0;
		return function a(j, k, l, m, n) {
			if (!(k > f || l > g || m < d || n < e)) {
				if (o = j.point) {
					var o,
					p = b - j.x,
					q = c - j.y,
					r = p * p + q * q;
					if (r < i) {
						var s = Math.sqrt(i = r);
						d = b - s,
						e = c - s,
						f = b + s,
						g = c + s,
						h = o
					}
				}
				for (var t = j.nodes, u = .5 * (k + m), v = .5 * (l + n), w = b >= u, x = c >= v, y = x << 1 | w, z = y + 4; y < z; ++y)
					if (j = t[3 & y])
						switch (3 & y) {
						case 0:
							a(j, k, l, u, v);
							break;
						case 1:
							a(j, u, l, m, v);
							break;
						case 2:
							a(j, k, v, u, n);
							break;
						case 3:
							a(j, u, v, m, n)
						}
			}
		}
		(a, d, e, f, g),
		h
	}
	function nd(a, b) {
		a = bg.rgb(a),
		b = bg.rgb(b);
		var c = a.r,
		d = a.g,
		e = a.b,
		f = b.r - c,
		g = b.g - d,
		h = b.b - e;
		return function (a) {
			return "#" + ua(Math.round(c + f * a)) + ua(Math.round(d + g * a)) + ua(Math.round(e + h * a))
		}
	}
	function od(a, b) {
		var c,
		d = {},
		e = {};
		for (c in a)
			c in b ? d[c] = rd(a[c], b[c]) : e[c] = a[c];
		for (c in b)
			c in a || (e[c] = b[c]);
		return function (a) {
			for (c in d)
				e[c] = d[c](a);
			return e
		}
	}
	function pd(a, b) {
		return a = +a,
		b = +b,
		function (c) {
			return a * (1 - c) + b * c
		}
	}
	function qd(a, b) {
		var c,
		d,
		e,
		f = di.lastIndex = ei.lastIndex = 0,
		g = -1,
		h = [],
		i = [];
		for (a += "", b += ""; (c = di.exec(a)) && (d = ei.exec(b)); )
			(e = d.index) > f && (e = b.slice(f, e), h[g] ? h[g] += e : h[++g] = e), (c = c[0]) === (d = d[0]) ? h[g] ? h[g] += d : h[++g] = d : (h[++g] = null, i.push({
						i: g,
						x: pd(c, d)
					})), f = ei.lastIndex;
		return f < b.length && (e = b.slice(f), h[g] ? h[g] += e : h[++g] = e),
		h.length < 2 ? i[0] ? (b = i[0].x, function (a) {
			return b(a) + ""
		}) : function () {
			return b
		}
		 : (b = i.length, function (a) {
			for (var c, d = 0; d < b; ++d)
				h[(c = i[d]).i] = c.x(a);
			return h.join("")
		})
	}
	function rd(a, b) {
		for (var c, d = bg.interpolators.length; --d >= 0 && !(c = bg.interpolators[d](a, b)); );
		return c
	}
	function sd(a, b) {
		var c,
		d = [],
		e = [],
		f = a.length,
		g = b.length,
		h = Math.min(a.length, b.length);
		for (c = 0; c < h; ++c)
			d.push(rd(a[c], b[c]));
		for (; c < f; ++c)
			e[c] = a[c];
		for (; c < g; ++c)
			e[c] = b[c];
		return function (a) {
			for (c = 0; c < h; ++c)
				e[c] = d[c](a);
			return e
		}
	}
	function td(a) {
		return function (b) {
			return b <= 0 ? 0 : b >= 1 ? 1 : a(b)
		}
	}
	function ud(a) {
		return function (b) {
			return 1 - a(1 - b)
		}
	}
	function vd(a) {
		return function (b) {
			return .5 * (b < .5 ? a(2 * b) : 2 - a(2 - 2 * b))
		}
	}
	function wd(a) {
		return a * a
	}
	function xd(a) {
		return a * a * a
	}
	function yd(a) {
		if (a <= 0)
			return 0;
		if (a >= 1)
			return 1;
		var b = a * a,
		c = b * a;
		return 4 * (a < .5 ? c : 3 * (a - b) + c - .75)
	}
	function zd(a) {
		return function (b) {
			return Math.pow(b, a)
		}
	}
	function Ad(a) {
		return 1 - Math.cos(a * Gg)
	}
	function Bd(a) {
		return Math.pow(2, 10 * (a - 1))
	}
	function Cd(a) {
		return 1 - Math.sqrt(1 - a * a)
	}
	function Dd(a, b) {
		var c;
		return arguments.length < 2 && (b = .45),
		arguments.length ? c = b / Eg * Math.asin(1 / a) : (a = 1, c = b / 4),
		function (d) {
			return 1 + a * Math.pow(2, -10 * d) * Math.sin((d - c) * Eg / b)
		}
	}
	function Ed(a) {
		return a || (a = 1.70158),
		function (b) {
			return b * b * ((a + 1) * b - a)
		}
	}
	function Fd(a) {
		return a < 1 / 2.75 ? 7.5625 * a * a : a < 2 / 2.75 ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : a < 2.5 / 2.75 ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
	}
	function Gd(a, b) {
		a = bg.hcl(a),
		b = bg.hcl(b);
		var c = a.h,
		d = a.c,
		e = a.l,
		f = b.h - c,
		g = b.c - d,
		h = b.l - e;
		return isNaN(g) && (g = 0, d = isNaN(d) ? b.c : d),
		isNaN(f) ? (f = 0, c = isNaN(c) ? b.h : c) : f > 180 ? f -= 360 : f < -180 && (f += 360),
		function (a) {
			return ka(c + f * a, d + g * a, e + h * a) + ""
		}
	}
	function Hd(a, b) {
		a = bg.hsl(a),
		b = bg.hsl(b);
		var c = a.h,
		d = a.s,
		e = a.l,
		f = b.h - c,
		g = b.s - d,
		h = b.l - e;
		return isNaN(g) && (g = 0, d = isNaN(d) ? b.s : d),
		isNaN(f) ? (f = 0, c = isNaN(c) ? b.h : c) : f > 180 ? f -= 360 : f < -180 && (f += 360),
		function (a) {
			return ia(c + f * a, d + g * a, e + h * a) + ""
		}
	}
	function Id(a, b) {
		a = bg.lab(a),
		b = bg.lab(b);
		var c = a.l,
		d = a.a,
		e = a.b,
		f = b.l - c,
		g = b.a - d,
		h = b.b - e;
		return function (a) {
			return ma(c + f * a, d + g * a, e + h * a) + ""
		}
	}
	function Jd(a, b) {
		return b -= a,
		function (c) {
			return Math.round(a + b * c)
		}
	}
	function Kd(a) {
		var b = [a.a, a.b],
		c = [a.c, a.d],
		d = Md(b),
		e = Ld(b, c),
		f = Md(Nd(c, b, -e)) || 0;
		b[0] * c[1] < c[0] * b[1] && (b[0] *= -1, b[1] *= -1, d *= -1, e *= -1),
		this.rotate = (d ? Math.atan2(b[1], b[0]) : Math.atan2(-c[0], c[1])) * Ig,
		this.translate = [a.e, a.f],
		this.scale = [d, f],
		this.skew = f ? Math.atan2(e, f) * Ig : 0
	}
	function Ld(a, b) {
		return a[0] * b[0] + a[1] * b[1]
	}
	function Md(a) {
		var b = Math.sqrt(Ld(a, a));
		return b && (a[0] /= b, a[1] /= b),
		b
	}
	function Nd(a, b, c) {
		return a[0] += c * b[0],
		a[1] += c * b[1],
		a
	}
	function Od(a, b) {
		var c,
		d = [],
		e = [],
		f = bg.transform(a),
		g = bg.transform(b),
		h = f.translate,
		i = g.translate,
		j = f.rotate,
		k = g.rotate,
		l = f.skew,
		m = g.skew,
		n = f.scale,
		o = g.scale;
		return h[0] != i[0] || h[1] != i[1] ? (d.push("translate(", null, ",", null, ")"), e.push({
				i: 1,
				x: pd(h[0], i[0])
			}, {
				i: 3,
				x: pd(h[1], i[1])
			})) : i[0] || i[1] ? d.push("translate(" + i + ")") : d.push(""),
		j != k ? (j - k > 180 ? k += 360 : k - j > 180 && (j += 360), e.push({
				i: d.push(d.pop() + "rotate(", null, ")") - 2,
				x: pd(j, k)
			})) : k && d.push(d.pop() + "rotate(" + k + ")"),
		l != m ? e.push({
			i: d.push(d.pop() + "skewX(", null, ")") - 2,
			x: pd(l, m)
		}) : m && d.push(d.pop() + "skewX(" + m + ")"),
		n[0] != o[0] || n[1] != o[1] ? (c = d.push(d.pop() + "scale(", null, ",", null, ")"), e.push({
				i: c - 4,
				x: pd(n[0], o[0])
			}, {
				i: c - 2,
				x: pd(n[1], o[1])
			})) : 1 == o[0] && 1 == o[1] || d.push(d.pop() + "scale(" + o + ")"),
		c = e.length,
		function (a) {
			for (var b, f = -1; ++f < c; )
				d[(b = e[f]).i] = b.x(a);
			return d.join("")
		}
	}
	function Pd(a, b) {
		return b = (b -= a = +a) || 1 / b,
		function (c) {
			return (c - a) / b
		}
	}
	function Qd(a, b) {
		return b = (b -= a = +a) || 1 / b,
		function (c) {
			return Math.max(0, Math.min(1, (c - a) / b))
		}
	}
	function Rd(a) {
		for (var b = a.source, c = a.target, d = Td(b, c), e = [b]; b !== d; )
			b = b.parent, e.push(b);
		for (var f = e.length; c !== d; )
			e.splice(f, 0, c), c = c.parent;
		return e
	}
	function Sd(a) {
		for (var b = [], c = a.parent; null != c; )
			b.push(a), a = c, c = c.parent;
		return b.push(a),
		b
	}
	function Td(a, b) {
		if (a === b)
			return a;
		for (var c = Sd(a), d = Sd(b), e = c.pop(), f = d.pop(), g = null; e === f; )
			g = e, e = c.pop(), f = d.pop();
		return g
	}
	function Ud(a) {
		a.fixed |= 2
	}
	function Vd(a) {
		a.fixed &= -7
	}
	function Wd(a) {
		a.fixed |= 4,
		a.px = a.x,
		a.py = a.y
	}
	function Xd(a) {
		a.fixed &= -5
	}
	function Yd(a, b, c) {
		var d = 0,
		e = 0;
		if (a.charge = 0, !a.leaf)
			for (var f, g = a.nodes, h = g.length, i = -1; ++i < h; )
				f = g[i], null != f && (Yd(f, b, c), a.charge += f.charge, d += f.charge * f.cx, e += f.charge * f.cy);
		if (a.point) {
			a.leaf || (a.point.x += Math.random() - .5, a.point.y += Math.random() - .5);
			var j = b * c[a.point.index];
			a.charge += a.pointCharge = j,
			d += j * a.point.x,
			e += j * a.point.y
		}
		a.cx = d / a.charge,
		a.cy = e / a.charge
	}
	function Zd(a, b) {
		return bg.rebind(a, b, "sort", "children", "value"),
		a.nodes = a,
		a.links = de,
		a
	}
	function $d(a, b) {
		for (var c = [a]; null != (a = c.pop()); )
			if (b(a), (e = a.children) && (d = e.length))
				for (var d, e; --d >= 0; )
					c.push(e[d])
	}
	function _d(a, b) {
		for (var c = [a], d = []; null != (a = c.pop()); )
			if (d.push(a), (f = a.children) && (e = f.length))
				for (var e, f, g = -1; ++g < e; )
					c.push(f[g]);
		for (; null != (a = d.pop()); )
			b(a)
	}
	function ae(a) {
		return a.children
	}
	function be(a) {
		return a.value
	}
	function ce(a, b) {
		return b.value - a.value
	}
	function de(a) {
		return bg.merge(a.map(function (a) {
				return (a.children || []).map(function (b) {
					return {
						source: a,
						target: b
					}
				})
			}))
	}
	function ee(a) {
		return a.x
	}
	function fe(a) {
		return a.y
	}
	function ge(a, b, c) {
		a.y0 = b,
		a.y = c
	}
	function he(a) {
		return bg.range(a.length)
	}
	function ie(a) {
		for (var b = -1, c = a[0].length, d = []; ++b < c; )
			d[b] = 0;
		return d
	}
	function je(a) {
		for (var b, c = 1, d = 0, e = a[0][1], f = a.length; c < f; ++c)
			(b = a[c][1]) > e && (d = c, e = b);
		return d
	}
	function ke(a) {
		return a.reduce(le, 0)
	}
	function le(a, b) {
		return a + b[1]
	}
	function me(a, b) {
		return ne(a, Math.ceil(Math.log(b.length) / Math.LN2 + 1))
	}
	function ne(a, b) {
		for (var c = -1, d = +a[0], e = (a[1] - d) / b, f = []; ++c <= b; )
			f[c] = e * c + d;
		return f
	}
	function oe(a) {
		return [bg.min(a), bg.max(a)]
	}
	function pe(a, b) {
		return a.value - b.value
	}
	function qe(a, b) {
		var c = a._pack_next;
		a._pack_next = b,
		b._pack_prev = a,
		b._pack_next = c,
		c._pack_prev = b
	}
	function re(a, b) {
		a._pack_next = b,
		b._pack_prev = a
	}
	function se(a, b) {
		var c = b.x - a.x,
		d = b.y - a.y,
		e = a.r + b.r;
		return .999 * e * e > c * c + d * d
	}
	function te(a) {
		function b(a) {
			k = Math.min(a.x - a.r, k),
			l = Math.max(a.x + a.r, l),
			m = Math.min(a.y - a.r, m),
			n = Math.max(a.y + a.r, n)
		}
		if ((c = a.children) && (j = c.length)) {
			var c,
			d,
			e,
			f,
			g,
			h,
			i,
			j,
			k = 1 / 0,
			l =  - (1 / 0),
			m = 1 / 0,
			n =  - (1 / 0);
			if (c.forEach(ue), d = c[0], d.x = -d.r, d.y = 0, b(d), j > 1 && (e = c[1], e.x = e.r, e.y = 0, b(e), j > 2))
				for (f = c[2], xe(d, e, f), b(f), qe(d, f), d._pack_prev = f, qe(f, e), e = d._pack_next, g = 3; g < j; g++) {
					xe(d, e, f = c[g]);
					var o = 0,
					p = 1,
					q = 1;
					for (h = e._pack_next; h !== e; h = h._pack_next, p++)
						if (se(h, f)) {
							o = 1;
							break
						}
					if (1 == o)
						for (i = d._pack_prev; i !== h._pack_prev && !se(i, f); i = i._pack_prev, q++);
					o ? (p < q || p == q && e.r < d.r ? re(d, e = h) : re(d = i, e), g--) : (qe(d, f), e = f, b(f))
				}
			var r = (k + l) / 2,
			s = (m + n) / 2,
			t = 0;
			for (g = 0; g < j; g++)
				f = c[g], f.x -= r, f.y -= s, t = Math.max(t, f.r + Math.sqrt(f.x * f.x + f.y * f.y));
			a.r = t,
			c.forEach(ve)
		}
	}
	function ue(a) {
		a._pack_next = a._pack_prev = a
	}
	function ve(a) {
		delete a._pack_next,
		delete a._pack_prev
	}
	function we(a, b, c, d) {
		var e = a.children;
		if (a.x = b += d * a.x, a.y = c += d * a.y, a.r *= d, e)
			for (var f = -1, g = e.length; ++f < g; )
				we(e[f], b, c, d)
	}
	function xe(a, b, c) {
		var d = a.r + c.r,
		e = b.x - a.x,
		f = b.y - a.y;
		if (d && (e || f)) {
			var g = b.r + c.r,
			h = e * e + f * f;
			g *= g,
			d *= d;
			var i = .5 + (d - g) / (2 * h),
			j = Math.sqrt(Math.max(0, 2 * g * (d + h) - (d -= h) * d - g * g)) / (2 * h);
			c.x = a.x + i * e + j * f,
			c.y = a.y + i * f - j * e
		} else
			c.x = a.x + d, c.y = a.y
	}
	function ye(a, b) {
		return a.parent == b.parent ? 1 : 2
	}
	function ze(a) {
		var b = a.children;
		return b.length ? b[0] : a.t
	}
	function Ae(a) {
		var b,
		c = a.children;
		return (b = c.length) ? c[b - 1] : a.t
	}
	function Be(a, b, c) {
		var d = c / (b.i - a.i);
		b.c -= d,
		b.s += c,
		a.c += d,
		b.z += c,
		b.m += c
	}
	function Ce(a) {
		for (var b, c = 0, d = 0, e = a.children, f = e.length; --f >= 0; )
			b = e[f], b.z += c, b.m += c, c += b.s + (d += b.c)
	}
	function De(a, b, c) {
		return a.a.parent === b.parent ? a.a : c
	}
	function Ee(a) {
		return 1 + bg.max(a, function (a) {
			return a.y
		})
	}
	function Fe(a) {
		return a.reduce(function (a, b) {
			return a + b.x
		}, 0) / a.length
	}
	function Ge(a) {
		var b = a.children;
		return b && b.length ? Ge(b[0]) : a
	}
	function He(a) {
		var b,
		c = a.children;
		return c && (b = c.length) ? He(c[b - 1]) : a
	}
	function Ie(a) {
		return {
			x: a.x,
			y: a.y,
			dx: a.dx,
			dy: a.dy
		}
	}
	function Je(a, b) {
		var c = a.x + b[3],
		d = a.y + b[0],
		e = a.dx - b[1] - b[3],
		f = a.dy - b[0] - b[2];
		return e < 0 && (c += e / 2, e = 0),
		f < 0 && (d += f / 2, f = 0), {
			x: c,
			y: d,
			dx: e,
			dy: f
		}
	}
	function Ke(a) {
		var b = a[0],
		c = a[a.length - 1];
		return b < c ? [b, c] : [c, b]
	}
	function Le(a) {
		return a.rangeExtent ? a.rangeExtent() : Ke(a.range())
	}
	function Me(a, b, c, d) {
		var e = c(a[0], a[1]),
		f = d(b[0], b[1]);
		return function (a) {
			return f(e(a))
		}
	}
	function Ne(a, b) {
		var c,
		d = 0,
		e = a.length - 1,
		f = a[d],
		g = a[e];
		return g < f && (c = d, d = e, e = c, c = f, f = g, g = c),
		a[d] = b.floor(f),
		a[e] = b.ceil(g),
		a
	}
	function Oe(a) {
		return a ? {
			floor: function (b) {
				return Math.floor(b / a) * a
			},
			ceil: function (b) {
				return Math.ceil(b / a) * a
			}
		}
		 : pi
	}
	function Pe(a, b, c, d) {
		var e = [],
		f = [],
		g = 0,
		h = Math.min(a.length, b.length) - 1;
		for (a[h] < a[0] && (a = a.slice().reverse(), b = b.slice().reverse()); ++g <= h; )
			e.push(c(a[g - 1], a[g])), f.push(d(b[g - 1], b[g]));
		return function (b) {
			var c = bg.bisect(a, b, 1, h) - 1;
			return f[c](e[c](b))
		}
	}
	function Qe(a, b, c, d) {
		function e() {
			var e = Math.min(a.length, b.length) > 2 ? Pe : Me,
			i = d ? Qd : Pd;
			return g = e(a, b, i, c),
			h = e(b, a, i, rd),
			f
		}
		function f(a) {
			return g(a)
		}
		var g,
		h;
		return f.invert = function (a) {
			return h(a)
		},
		f.domain = function (b) {
			return arguments.length ? (a = b.map(Number), e()) : a
		},
		f.range = function (a) {
			return arguments.length ? (b = a, e()) : b
		},
		f.rangeRound = function (a) {
			return f.range(a).interpolate(Jd)
		},
		f.clamp = function (a) {
			return arguments.length ? (d = a, e()) : d
		},
		f.interpolate = function (a) {
			return arguments.length ? (c = a, e()) : c
		},
		f.ticks = function (b) {
			return Ue(a, b)
		},
		f.tickFormat = function (b, c) {
			return Ve(a, b, c)
		},
		f.nice = function (b) {
			return Se(a, b),
			e()
		},
		f.copy = function () {
			return Qe(a, b, c, d)
		},
		e()
	}
	function Re(a, b) {
		return bg.rebind(a, b, "range", "rangeRound", "interpolate", "clamp")
	}
	function Se(a, b) {
		return Ne(a, Oe(Te(a, b)[2]))
	}
	function Te(a, b) {
		null == b && (b = 10);
		var c = Ke(a),
		d = c[1] - c[0],
		e = Math.pow(10, Math.floor(Math.log(d / b) / Math.LN10)),
		f = b / d * e;
		return f <= .15 ? e *= 10 : f <= .35 ? e *= 5 : f <= .75 && (e *= 2),
		c[0] = Math.ceil(c[0] / e) * e,
		c[1] = Math.floor(c[1] / e) * e + .5 * e,
		c[2] = e,
		c
	}
	function Ue(a, b) {
		return bg.range.apply(bg, Te(a, b))
	}
	function Ve(a, b, c) {
		var d = Te(a, b);
		if (c) {
			var e = dh.exec(c);
			if (e.shift(), "s" === e[8]) {
				var f = bg.formatPrefix(Math.max(lg(d[0]), lg(d[1])));
				return e[7] || (e[7] = "." + We(f.scale(d[2]))),
				e[8] = "f",
				c = bg.format(e.join("")),
				function (a) {
					return c(f.scale(a)) + f.symbol
				}
			}
			e[7] || (e[7] = "." + Xe(e[8], d)),
			c = e.join("")
		} else
			c = ",." + We(d[2]) + "f";
		return bg.format(c)
	}
	function We(a) {
		return -Math.floor(Math.log(a) / Math.LN10 + .01)
	}
	function Xe(a, b) {
		var c = We(b[2]);
		return a in qi ? Math.abs(c - We(Math.max(lg(b[0]), lg(b[1])))) +  + ("e" !== a) : c - 2 * ("%" === a)
	}
	function Ye(a, b, c, d) {
		function e(a) {
			return (c ? Math.log(a < 0 ? 0 : a) : -Math.log(a > 0 ? 0 : -a)) / Math.log(b)
		}
		function f(a) {
			return c ? Math.pow(b, a) : -Math.pow(b, -a)
		}
		function g(b) {
			return a(e(b))
		}
		return g.invert = function (b) {
			return f(a.invert(b))
		},
		g.domain = function (b) {
			return arguments.length ? (c = b[0] >= 0, a.domain((d = b.map(Number)).map(e)), g) : d
		},
		g.base = function (c) {
			return arguments.length ? (b = +c, a.domain(d.map(e)), g) : b
		},
		g.nice = function () {
			var b = Ne(d.map(e), c ? Math : si);
			return a.domain(b),
			d = b.map(f),
			g
		},
		g.ticks = function () {
			var a = Ke(d),
			g = [],
			h = a[0],
			i = a[1],
			j = Math.floor(e(h)),
			k = Math.ceil(e(i)),
			l = b % 1 ? 2 : b;
			if (isFinite(k - j)) {
				if (c) {
					for (; j < k; j++)
						for (var m = 1; m < l; m++)
							g.push(f(j) * m);
					g.push(f(j))
				} else
					for (g.push(f(j)); j++ < k; )
						for (var m = l - 1; m > 0; m--)
							g.push(f(j) * m);
				for (j = 0; g[j] < h; j++);
				for (k = g.length; g[k - 1] > i; k--);
				g = g.slice(j, k)
			}
			return g
		},
		g.tickFormat = function (a, b) {
			if (!arguments.length)
				return ri;
			arguments.length < 2 ? b = ri : "function" != typeof b && (b = bg.format(b));
			var d,
			h = Math.max(.1, a / g.ticks().length),
			i = c ? (d = 1e-12, Math.ceil) : (d = -1e-12, Math.floor);
			return function (a) {
				return a / f(i(e(a) + d)) <= h ? b(a) : ""
			}
		},
		g.copy = function () {
			return Ye(a.copy(), b, c, d)
		},
		Re(g, a)
	}
	function Ze(a, b, c) {
		function d(b) {
			return a(e(b))
		}
		var e = $e(b),
		f = $e(1 / b);
		return d.invert = function (b) {
			return f(a.invert(b))
		},
		d.domain = function (b) {
			return arguments.length ? (a.domain((c = b.map(Number)).map(e)), d) : c
		},
		d.ticks = function (a) {
			return Ue(c, a)
		},
		d.tickFormat = function (a, b) {
			return Ve(c, a, b)
		},
		d.nice = function (a) {
			return d.domain(Se(c, a))
		},
		d.exponent = function (g) {
			return arguments.length ? (e = $e(b = g), f = $e(1 / b), a.domain(c.map(e)), d) : b
		},
		d.copy = function () {
			return Ze(a.copy(), b, c)
		},
		Re(d, a)
	}
	function $e(a) {
		return function (b) {
			return b < 0 ? -Math.pow(-b, a) : Math.pow(b, a)
		}
	}
	function _e(a, b) {
		function c(c) {
			return f[((e.get(c) || ("range" === b.t ? e.set(c, a.push(c)) : NaN)) - 1) % f.length]
		}
		function d(b, c) {
			return bg.range(a.length).map(function (a) {
				return b + c * a
			})
		}
		var e,
		f,
		g;
		return c.domain = function (d) {
			if (!arguments.length)
				return a;
			a = [],
			e = new j;
			for (var f, g = -1, h = d.length; ++g < h; )
				e.has(f = d[g]) || e.set(f, a.push(f));
			return c[b.t].apply(c, b.a)
		},
		c.range = function (a) {
			return arguments.length ? (f = a, g = 0, b = {
					t: "range",
					a: arguments
				}, c) : f
		},
		c.rangePoints = function (e, h) {
			arguments.length < 2 && (h = 0);
			var i = e[0],
			j = e[1],
			k = a.length < 2 ? (i = (i + j) / 2, 0) : (j - i) / (a.length - 1 + h);
			return f = d(i + k * h / 2, k),
			g = 0,
			b = {
				t: "rangePoints",
				a: arguments
			},
			c
		},
		c.rangeRoundPoints = function (e, h) {
			arguments.length < 2 && (h = 0);
			var i = e[0],
			j = e[1],
			k = a.length < 2 ? (i = j = Math.round((i + j) / 2), 0) : (j - i) / (a.length - 1 + h) | 0;
			return f = d(i + Math.round(k * h / 2 + (j - i - (a.length - 1 + h) * k) / 2), k),
			g = 0,
			b = {
				t: "rangeRoundPoints",
				a: arguments
			},
			c
		},
		c.rangeBands = function (e, h, i) {
			arguments.length < 2 && (h = 0),
			arguments.length < 3 && (i = h);
			var j = e[1] < e[0],
			k = e[j - 0],
			l = e[1 - j],
			m = (l - k) / (a.length - h + 2 * i);
			return f = d(k + m * i, m),
			j && f.reverse(),
			g = m * (1 - h),
			b = {
				t: "rangeBands",
				a: arguments
			},
			c
		},
		c.rangeRoundBands = function (e, h, i) {
			arguments.length < 2 && (h = 0),
			arguments.length < 3 && (i = h);
			var j = e[1] < e[0],
			k = e[j - 0],
			l = e[1 - j],
			m = Math.floor((l - k) / (a.length - h + 2 * i));
			return f = d(k + Math.round((l - k - (a.length - h) * m) / 2), m),
			j && f.reverse(),
			g = Math.round(m * (1 - h)),
			b = {
				t: "rangeRoundBands",
				a: arguments
			},
			c
		},
		c.rangeBand = function () {
			return g
		},
		c.rangeExtent = function () {
			return Ke(b.a[0])
		},
		c.copy = function () {
			return _e(a, b)
		},
		c.domain(a)
	}
	function af(a, b) {
		function f() {
			var c = 0,
			d = b.length;
			for (h = []; ++c < d; )
				h[c - 1] = bg.quantile(a, c / d);
			return g
		}
		function g(a) {
			if (!isNaN(a = +a))
				return b[bg.bisect(h, a)]
		}
		var h;
		return g.domain = function (b) {
			return arguments.length ? (a = b.map(d).filter(e).sort(c), f()) : a
		},
		g.range = function (a) {
			return arguments.length ? (b = a, f()) : b
		},
		g.quantiles = function () {
			return h
		},
		g.invertExtent = function (c) {
			return c = b.indexOf(c),
			c < 0 ? [NaN, NaN] : [c > 0 ? h[c - 1] : a[0], c < h.length ? h[c] : a[a.length - 1]]
		},
		g.copy = function () {
			return af(a, b)
		},
		f()
	}
	function bf(a, b, c) {
		function d(b) {
			return c[Math.max(0, Math.min(g, Math.floor(f * (b - a))))]
		}
		function e() {
			return f = c.length / (b - a),
			g = c.length - 1,
			d
		}
		var f,
		g;
		return d.domain = function (c) {
			return arguments.length ? (a = +c[0], b = +c[c.length - 1], e()) : [a, b]
		},
		d.range = function (a) {
			return arguments.length ? (c = a, e()) : c
		},
		d.invertExtent = function (b) {
			return b = c.indexOf(b),
			b = b < 0 ? NaN : b / f + a,
			[b, b + 1 / f]
		},
		d.copy = function () {
			return bf(a, b, c)
		},
		e()
	}
	function cf(a, b) {
		function c(c) {
			if (c <= c)
				return b[bg.bisect(a, c)]
		}
		return c.domain = function (b) {
			return arguments.length ? (a = b, c) : a
		},
		c.range = function (a) {
			return arguments.length ? (b = a, c) : b
		},
		c.invertExtent = function (c) {
			return c = b.indexOf(c),
			[a[c - 1], a[c]]
		},
		c.copy = function () {
			return cf(a, b)
		},
		c
	}
	function df(a) {
		function b(a) {
			return +a
		}
		return b.invert = b,
		b.domain = b.range = function (c) {
			return arguments.length ? (a = c.map(b), b) : a
		},
		b.ticks = function (b) {
			return Ue(a, b)
		},
		b.tickFormat = function (b, c) {
			return Ve(a, b, c)
		},
		b.copy = function () {
			return df(a)
		},
		b
	}
	function ef() {
		return 0
	}
	function ff(a) {
		return a.innerRadius
	}
	function gf(a) {
		return a.outerRadius
	}
	function hf(a) {
		return a.startAngle
	}
	function jf(a) {
		return a.endAngle
	}
	function kf(a) {
		return a && a.padAngle
	}
	function lf(a, b, c, d) {
		return (a - c) * b - (b - d) * a > 0 ? 0 : 1
	}
	function mf(a, b, c, d, e) {
		var f = a[0] - b[0],
		g = a[1] - b[1],
		h = (e ? d : -d) / Math.sqrt(f * f + g * g),
		i = h * g,
		j = -h * f,
		k = a[0] + i,
		l = a[1] + j,
		m = b[0] + i,
		n = b[1] + j,
		o = (k + m) / 2,
		p = (l + n) / 2,
		q = m - k,
		r = n - l,
		s = q * q + r * r,
		t = c - d,
		u = k * n - m * l,
		v = (r < 0 ? -1 : 1) * Math.sqrt(t * t * s - u * u),
		w = (u * r - q * v) / s,
		x = (-u * q - r * v) / s,
		y = (u * r + q * v) / s,
		z = (-u * q + r * v) / s,
		A = w - o,
		B = x - p,
		C = y - o,
		D = z - p;
		return A * A + B * B > C * C + D * D && (w = y, x = z),
		[[w - i, x - j], [w * c / t, x * c / t]]
	}
	function nf(a) {
		function b(b) {
			function g() {
				j.push("M", f(a(k), h))
			}
			for (var i, j = [], k = [], l = -1, m = b.length, n = Aa(c), o = Aa(d); ++l < m; )
				e.call(this, i = b[l], l) ? k.push([+n.call(this, i, l), +o.call(this, i, l)]) : k.length && (g(), k = []);
			return k.length && g(),
			j.length ? j.join("") : null
		}
		var c = Bc,
		d = Cc,
		e = Cb,
		f = of,
		g = f.key,
		h = .7;
		return b.x = function (a) {
			return arguments.length ? (c = a, b) : c
		},
		b.y = function (a) {
			return arguments.length ? (d = a, b) : d
		},
		b.defined = function (a) {
			return arguments.length ? (e = a, b) : e
		},
		b.interpolate = function (a) {
			return arguments.length ? (g = "function" == typeof a ? f = a : (f = yi.get(a) || of).key, b) : g
		},
		b.tension = function (a) {
			return arguments.length ? (h = a, b) : h
		},
		b
	}
	function of(a) {
		return a.join("L")
	}
	function pf(a) {
		return of(a) + "Z"
	}
	function qf(a) {
		for (var b = 0, c = a.length, d = a[0], e = [d[0], ",", d[1]]; ++b < c; )
			e.push("H", (d[0] + (d = a[b])[0]) / 2, "V", d[1]);
		return c > 1 && e.push("H", d[0]),
		e.join("")
	}
	function rf(a) {
		for (var b = 0, c = a.length, d = a[0], e = [d[0], ",", d[1]]; ++b < c; )
			e.push("V", (d = a[b])[1], "H", d[0]);
		return e.join("")
	}
	function sf(a) {
		for (var b = 0, c = a.length, d = a[0], e = [d[0], ",", d[1]]; ++b < c; )
			e.push("H", (d = a[b])[0], "V", d[1]);
		return e.join("")
	}
	function tf(a, b) {
		return a.length < 4 ? of(a) : a[1] + wf(a.slice(1, -1), xf(a, b))
	}
	function uf(a, b) {
		return a.length < 3 ? of(a) : a[0] + wf((a.push(a[0]), a), xf([a[a.length - 2]].concat(a, [a[1]]), b))
	}
	function vf(a, b) {
		return a.length < 3 ? of(a) : a[0] + wf(a, xf(a, b))
	}
	function wf(a, b) {
		if (b.length < 1 || a.length != b.length && a.length != b.length + 2)
			return of(a);
		var c = a.length != b.length,
		d = "",
		e = a[0],
		f = a[1],
		g = b[0],
		h = g,
		i = 1;
		if (c && (d += "Q" + (f[0] - 2 * g[0] / 3) + "," + (f[1] - 2 * g[1] / 3) + "," + f[0] + "," + f[1], e = a[1], i = 2), b.length > 1) {
			h = b[1],
			f = a[i],
			i++,
			d += "C" + (e[0] + g[0]) + "," + (e[1] + g[1]) + "," + (f[0] - h[0]) + "," + (f[1] - h[1]) + "," + f[0] + "," + f[1];
			for (var j = 2; j < b.length; j++, i++)
				f = a[i], h = b[j], d += "S" + (f[0] - h[0]) + "," + (f[1] - h[1]) + "," + f[0] + "," + f[1]
		}
		if (c) {
			var k = a[i];
			d += "Q" + (f[0] + 2 * h[0] / 3) + "," + (f[1] + 2 * h[1] / 3) + "," + k[0] + "," + k[1]
		}
		return d
	}
	function xf(a, b) {
		for (var c, d = [], e = (1 - b) / 2, f = a[0], g = a[1], h = 1, i = a.length; ++h < i; )
			c = f, f = g, g = a[h], d.push([e * (g[0] - c[0]), e * (g[1] - c[1])]);
		return d
	}
	function yf(a) {
		if (a.length < 3)
			return of(a);
		var b = 1,
		c = a.length,
		d = a[0],
		e = d[0],
		f = d[1],
		g = [e, e, e, (d = a[1])[0]],
		h = [f, f, f, d[1]],
		i = [e, ",", f, "L", Cf(Bi, g), ",", Cf(Bi, h)];
		for (a.push(a[c - 1]); ++b <= c; )
			d = a[b], g.shift(), g.push(d[0]), h.shift(), h.push(d[1]), Df(i, g, h);
		return a.pop(),
		i.push("L", d),
		i.join("")
	}
	function zf(a) {
		if (a.length < 4)
			return of(a);
		for (var b, c = [], d = -1, e = a.length, f = [0], g = [0]; ++d < 3; )
			b = a[d], f.push(b[0]), g.push(b[1]);
		for (c.push(Cf(Bi, f) + "," + Cf(Bi, g)), --d; ++d < e; )
			b = a[d], f.shift(), f.push(b[0]), g.shift(), g.push(b[1]), Df(c, f, g);
		return c.join("")
	}
	function Af(a) {
		for (var b, c, d = -1, e = a.length, f = e + 4, g = [], h = []; ++d < 4; )
			c = a[d % e], g.push(c[0]), h.push(c[1]);
		for (b = [Cf(Bi, g), ",", Cf(Bi, h)], --d; ++d < f; )
			c = a[d % e], g.shift(), g.push(c[0]), h.shift(), h.push(c[1]), Df(b, g, h);
		return b.join("")
	}
	function Bf(a, b) {
		var c = a.length - 1;
		if (c)
			for (var d, e, f = a[0][0], g = a[0][1], h = a[c][0] - f, i = a[c][1] - g, j = -1; ++j <= c; )
				d = a[j], e = j / c, d[0] = b * d[0] + (1 - b) * (f + e * h), d[1] = b * d[1] + (1 - b) * (g + e * i);
		return yf(a)
	}
	function Cf(a, b) {
		return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3]
	}
	function Df(a, b, c) {
		a.push("C", Cf(zi, b), ",", Cf(zi, c), ",", Cf(Ai, b), ",", Cf(Ai, c), ",", Cf(Bi, b), ",", Cf(Bi, c))
	}
	function Ef(a, b) {
		return (b[1] - a[1]) / (b[0] - a[0])
	}
	function Ff(a) {
		for (var b = 0, c = a.length - 1, d = [], e = a[0], f = a[1], g = d[0] = Ef(e, f); ++b < c; )
			d[b] = (g + (g = Ef(e = f, f = a[b + 1]))) / 2;
		return d[b] = g,
		d
	}
	function Gf(a) {
		for (var b, c, d, e, f = [], g = Ff(a), h = -1, i = a.length - 1; ++h < i; )
			b = Ef(a[h], a[h + 1]), lg(b) < Bg ? g[h] = g[h + 1] = 0 : (c = g[h] / b, d = g[h + 1] / b, e = c * c + d * d, e > 9 && (e = 3 * b / Math.sqrt(e), g[h] = e * c, g[h + 1] = e * d));
		for (h = -1; ++h <= i; )
			e = (a[Math.min(i, h + 1)][0] - a[Math.max(0, h - 1)][0]) / (6 * (1 + g[h] * g[h])), f.push([e || 0, g[h] * e || 0]);
		return f
	}
	function Hf(a) {
		return a.length < 3 ? of(a) : a[0] + wf(a, Gf(a))
	}
	function If(a) {
		for (var b, c, d, e = -1, f = a.length; ++e < f; )
			b = a[e], c = b[0], d = b[1] - Gg, b[0] = c * Math.cos(d), b[1] = c * Math.sin(d);
		return a
	}
	function Jf(a) {
		function b(b) {
			function i() {
				p.push("M", h(a(r), l), k, j(a(q.reverse()), l), "Z")
			}
			for (var m, n, o, p = [], q = [], r = [], s = -1, t = b.length, u = Aa(c), v = Aa(e), w = c === d ? function () {
				return n
			}
				 : Aa(d), x = e === f ? function () {
				return o
			}
				 : Aa(f); ++s < t; )
				g.call(this, m = b[s], s) ? (q.push([n = +u.call(this, m, s), o = +v.call(this, m, s)]), r.push([+w.call(this, m, s), +x.call(this, m, s)])) : q.length && (i(), q = [], r = []);
			return q.length && i(),
			p.length ? p.join("") : null
		}
		var c = Bc,
		d = Bc,
		e = 0,
		f = Cc,
		g = Cb,
		h = of,
		i = h.key,
		j = h,
		k = "L",
		l = .7;
		return b.x = function (a) {
			return arguments.length ? (c = d = a, b) : d
		},
		b.x0 = function (a) {
			return arguments.length ? (c = a, b) : c
		},
		b.x1 = function (a) {
			return arguments.length ? (d = a, b) : d
		},
		b.y = function (a) {
			return arguments.length ? (e = f = a, b) : f
		},
		b.y0 = function (a) {
			return arguments.length ? (e = a, b) : e
		},
		b.y1 = function (a) {
			return arguments.length ? (f = a, b) : f
		},
		b.defined = function (a) {
			return arguments.length ? (g = a, b) : g
		},
		b.interpolate = function (a) {
			return arguments.length ? (i = "function" == typeof a ? h = a : (h = yi.get(a) || of).key, j = h.reverse || h, k = h.closed ? "M" : "L", b) : i
		},
		b.tension = function (a) {
			return arguments.length ? (l = a, b) : l
		},
		b
	}
	function Kf(a) {
		return a.radius
	}
	function Lf(a) {
		return [a.x, a.y]
	}
	function Mf(a) {
		return function () {
			var b = a.apply(this, arguments),
			c = b[0],
			d = b[1] - Gg;
			return [c * Math.cos(d), c * Math.sin(d)]
		}
	}
	function Nf() {
		return 64
	}
	function Of() {
		return "circle"
	}
	function Pf(a) {
		var b = Math.sqrt(a / Dg);
		return "M0," + b + "A" + b + "," + b + " 0 1,1 0," + -b + "A" + b + "," + b + " 0 1,1 0," + b + "Z"
	}
	function Qf(a) {
		return function () {
			var b,
			c;
			(b = this[a]) && (c = b[b.active]) && (--b.count ? delete b[b.active] : delete this[a], b.active += .5, c.event && c.event.interrupt.call(this, this.__data__, c.index))
		}
	}
	function Rf(a, b, c) {
		return qg(a, Ii),
		a.namespace = b,
		a.id = c,
		a
	}
	function Sf(a, b, c, d) {
		var e = a.id,
		f = a.namespace;
		return R(a, "function" == typeof c ? function (a, g, h) {
			a[f][e].tween.set(b, d(c.call(a, a.__data__, g, h)))
		}
			 : (c = d(c), function (a) {
				a[f][e].tween.set(b, c)
			}))
	}
	function Tf(a) {
		return null == a && (a = ""),
		function () {
			this.textContent = a
		}
	}
	function Uf(a) {
		return null == a ? "__transition__" : "__transition_" + a + "__"
	}
	function Vf(a, b, c, d, e) {
		var f = a[c] || (a[c] = {
					active: 0,
					count: 0
				}),
		g = f[d];
		if (!g) {
			var h = e.time;
			g = f[d] = {
				tween: new j,
				time: h,
				delay: e.delay,
				duration: e.duration,
				ease: e.ease,
				index: b
			},
			e = null,
			++f.count,
			bg.timer(function (e) {
				function i(c) {
					if (f.active > d)
						return k();
					var e = f[f.active];
					e && (--f.count, delete f[f.active], e.event && e.event.interrupt.call(a, a.__data__, e.index)),
					f.active = d,
					g.event && g.event.start.call(a, a.__data__, b),
					g.tween.forEach(function (c, d) {
						(d = d.call(a, a.__data__, b)) && p.push(d)
					}),
					m = g.ease,
					l = g.duration,
					bg.timer(function () {
						return o.c = j(c || 1) ? Cb : j,
						1
					}, 0, h)
				}
				function j(c) {
					if (f.active !== d)
						return 1;
					for (var e = c / l, h = m(e), i = p.length; i > 0; )
						p[--i].call(a, h);
					return e >= 1 ? (g.event && g.event.end.call(a, a.__data__, b), k()) : void 0
				}
				function k() {
					return --f.count ? delete f[d] : delete a[c],
					1
				}
				var l,
				m,
				n = g.delay,
				o = ah,
				p = [];
				return o.t = n + h,
				n <= e ? i(e - n) : void(o.c = i)
			}, 0, h)
		}
	}
	function Wf(a, b, c) {
		a.attr("transform", function (a) {
			var d = b(a);
			return "translate(" + (isFinite(d) ? d : c(a)) + ",0)"
		})
	}
	function Xf(a, b, c) {
		a.attr("transform", function (a) {
			var d = b(a);
			return "translate(0," + (isFinite(d) ? d : c(a)) + ")"
		})
	}
	function Yf(a) {
		return a.toISOString()
	}
	function Zf(a, b, c) {
		function d(b) {
			return a(b)
		}
		function e(a, c) {
			var d = a[1] - a[0],
			e = d / c,
			f = bg.bisect(Ri, e);
			return f == Ri.length ? [b.year, Te(a.map(function (a) {
						return a / 31536e6
					}), c)[2]] : f ? b[e / Ri[f - 1] < Ri[f] / e ? f - 1 : f] : [Ui, Te(a, c)[2]]
		}
		return d.invert = function (b) {
			return $f(a.invert(b))
		},
		d.domain = function (b) {
			return arguments.length ? (a.domain(b), d) : a.domain().map($f)
		},
		d.nice = function (a, b) {
			function c(c) {
				return !isNaN(c) && !a.range(c, $f(+c + 1), b).length
			}
			var f = d.domain(),
			g = Ke(f),
			h = null == a ? e(g, 10) : "number" == typeof a && e(g, a);
			return h && (a = h[0], b = h[1]),
			d.domain(Ne(f, b > 1 ? {
					floor: function (b) {
						for (; c(b = a.floor(b)); )
							b = $f(b - 1);
						return b
					},
					ceil: function (b) {
						for (; c(b = a.ceil(b)); )
							b = $f(+b + 1);
						return b
					}
				}
					 : a))
		},
		d.ticks = function (a, b) {
			var c = Ke(d.domain()),
			f = null == a ? e(c, 10) : "number" == typeof a ? e(c, a) : !a.range && [{
						range: a
					}, b];
			return f && (a = f[0], b = f[1]),
			a.range(c[0], $f(+c[1] + 1), b < 1 ? 1 : b)
		},
		d.tickFormat = function () {
			return c
		},
		d.copy = function () {
			return Zf(a.copy(), b, c)
		},
		Re(d, a)
	}
	function $f(a) {
		return new Date(a)
	}
	function _f(a) {
		return JSON.parse(a.responseText)
	}
	function ag(a) {
		var b = eg.createRange();
		return b.selectNode(eg.body),
		b.createContextualFragment(a.responseText)
	}
	var bg = {
		version: "3.5.5"
	},
	cg = [].slice,
	dg = function (a) {
		return cg.call(a)
	},
	eg = this.document;
	if (eg)
		try {
			dg(eg.documentElement.childNodes)[0].nodeType
		} catch (a) {
			dg = function (a) {
				for (var b = a.length, c = new Array(b); b--; )
					c[b] = a[b];
				return c
			}
		}
	if (Date.now || (Date.now = function () {
			return +new Date
		}), eg)
		try {
			eg.createElement("DIV").style.setProperty("opacity", 0, "")
		} catch (a) {
			var fg = this.Element.prototype,
			gg = fg.setAttribute,
			hg = fg.setAttributeNS,
			ig = this.CSSStyleDeclaration.prototype,
			jg = ig.setProperty;
			fg.setAttribute = function (a, b) {
				gg.call(this, a, b + "")
			},
			fg.setAttributeNS = function (a, b, c) {
				hg.call(this, a, b, c + "")
			},
			ig.setProperty = function (a, b, c) {
				jg.call(this, a, b + "", c)
			}
		}
	bg.ascending = c,
	bg.descending = function (a, b) {
		return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN
	},
	bg.min = function (a, b) {
		var c,
		d,
		e = -1,
		f = a.length;
		if (1 === arguments.length) {
			for (; ++e < f; )
				if (null != (d = a[e]) && d >= d) {
					c = d;
					break
				}
			for (; ++e < f; )
				null != (d = a[e]) && c > d && (c = d)
		} else {
			for (; ++e < f; )
				if (null != (d = b.call(a, a[e], e)) && d >= d) {
					c = d;
					break
				}
			for (; ++e < f; )
				null != (d = b.call(a, a[e], e)) && c > d && (c = d)
		}
		return c
	},
	bg.max = function (a, b) {
		var c,
		d,
		e = -1,
		f = a.length;
		if (1 === arguments.length) {
			for (; ++e < f; )
				if (null != (d = a[e]) && d >= d) {
					c = d;
					break
				}
			for (; ++e < f; )
				null != (d = a[e]) && d > c && (c = d)
		} else {
			for (; ++e < f; )
				if (null != (d = b.call(a, a[e], e)) && d >= d) {
					c = d;
					break
				}
			for (; ++e < f; )
				null != (d = b.call(a, a[e], e)) && d > c && (c = d)
		}
		return c
	},
	bg.extent = function (a, b) {
		var c,
		d,
		e,
		f = -1,
		g = a.length;
		if (1 === arguments.length) {
			for (; ++f < g; )
				if (null != (d = a[f]) && d >= d) {
					c = e = d;
					break
				}
			for (; ++f < g; )
				null != (d = a[f]) && (c > d && (c = d), e < d && (e = d))
		} else {
			for (; ++f < g; )
				if (null != (d = b.call(a, a[f], f)) && d >= d) {
					c = e = d;
					break
				}
			for (; ++f < g; )
				null != (d = b.call(a, a[f], f)) && (c > d && (c = d), e < d && (e = d))
		}
		return [c, e]
	},
	bg.sum = function (a, b) {
		var c,
		d = 0,
		f = a.length,
		g = -1;
		if (1 === arguments.length)
			for (; ++g < f; )
				e(c = +a[g]) && (d += c);
		else
			for (; ++g < f; )
				e(c = +b.call(a, a[g], g)) && (d += c);
		return d
	},
	bg.mean = function (a, b) {
		var c,
		f = 0,
		g = a.length,
		h = -1,
		i = g;
		if (1 === arguments.length)
			for (; ++h < g; )
				e(c = d(a[h])) ? f += c : --i;
		else
			for (; ++h < g; )
				e(c = d(b.call(a, a[h], h))) ? f += c : --i;
		if (i)
			return f / i
	},
	bg.quantile = function (a, b) {
		var c = (a.length - 1) * b + 1,
		d = Math.floor(c),
		e = +a[d - 1],
		f = c - d;
		return f ? e + f * (a[d] - e) : e
	},
	bg.median = function (a, b) {
		var f,
		g = [],
		h = a.length,
		i = -1;
		if (1 === arguments.length)
			for (; ++i < h; )
				e(f = d(a[i])) && g.push(f);
		else
			for (; ++i < h; )
				e(f = d(b.call(a, a[i], i))) && g.push(f);
		if (g.length)
			return bg.quantile(g.sort(c), .5)
	},
	bg.variance = function (a, b) {
		var c,
		f,
		g = a.length,
		h = 0,
		i = 0,
		j = -1,
		k = 0;
		if (1 === arguments.length)
			for (; ++j < g; )
				e(c = d(a[j])) && (f = c - h, h += f / ++k, i += f * (c - h));
		else
			for (; ++j < g; )
				e(c = d(b.call(a, a[j], j))) && (f = c - h, h += f / ++k, i += f * (c - h));
		if (k > 1)
			return i / (k - 1)
	},
	bg.deviation = function () {
		var a = bg.variance.apply(this, arguments);
		return a ? Math.sqrt(a) : a
	};
	var kg = f(c);
	bg.bisectLeft = kg.left,
	bg.bisect = bg.bisectRight = kg.right,
	bg.bisector = function (a) {
		return f(1 === a.length ? function (b, d) {
			return c(a(b), d)
		}
			 : a)
	},
	bg.shuffle = function (a, b, c) {
		(f = arguments.length) < 3 && (c = a.length, f < 2 && (b = 0));
		for (var d, e, f = c - b; f; )
			e = Math.random() * f-- | 0, d = a[f + b], a[f + b] = a[e + b], a[e + b] = d;
		return a
	},
	bg.permute = function (a, b) {
		for (var c = b.length, d = new Array(c); c--; )
			d[c] = a[b[c]];
		return d
	},
	bg.pairs = function (a) {
		for (var b, c = 0, d = a.length - 1, e = a[0], f = new Array(d < 0 ? 0 : d); c < d; )
			f[c] = [b = e, e = a[++c]];
		return f
	},
	bg.zip = function () {
		if (!(d = arguments.length))
			return [];
		for (var a = -1, b = bg.min(arguments, g), c = new Array(b); ++a < b; )
			for (var d, e = -1, f = c[a] = new Array(d); ++e < d; )
				f[e] = arguments[e][a];
		return c
	},
	bg.transpose = function (a) {
		return bg.zip.apply(bg, a)
	},
	bg.keys = function (a) {
		var b = [];
		for (var c in a)
			b.push(c);
		return b
	},
	bg.values = function (a) {
		var b = [];
		for (var c in a)
			b.push(a[c]);
		return b
	},
	bg.entries = function (a) {
		var b = [];
		for (var c in a)
			b.push({
				key: c,
				value: a[c]
			});
		return b
	},
	bg.merge = function (a) {
		for (var b, c, d, e = a.length, f = -1, g = 0; ++f < e; )
			g += a[f].length;
		for (c = new Array(g); --e >= 0; )
			for (d = a[e], b = d.length; --b >= 0; )
				c[--g] = d[b];
		return c
	};
	var lg = Math.abs;
	bg.range = function (a, b, c) {
		if (arguments.length < 3 && (c = 1, arguments.length < 2 && (b = a, a = 0)), (b - a) / c === 1 / 0)
			throw new Error("infinite range");
		var d,
		e = [],
		f = h(lg(c)),
		g = -1;
		if (a *= f, b *= f, c *= f, c < 0)
			for (; (d = a + c * ++g) > b; )
				e.push(d / f);
		else
			for (; (d = a + c * ++g) < b; )
				e.push(d / f);
		return e
	},
	bg.map = function (a, b) {
		var c = new j;
		if (a instanceof j)
			a.forEach(function (a, b) {
				c.set(a, b)
			});
		else if (Array.isArray(a)) {
			var d,
			e = -1,
			f = a.length;
			if (1 === arguments.length)
				for (; ++e < f; )
					c.set(e, a[e]);
			else
				for (; ++e < f; )
					c.set(b.call(a, d = a[e], e), d)
		} else
			for (var g in a)
				c.set(g, a[g]);
		return c
	};
	var mg = "__proto__",
	ng = "\0";
	i(j, {
		has: m,
		get: function (a) {
			return this._[k(a)]
		},
		set: function (a, b) {
			return this._[k(a)] = b
		},
		remove: n,
		keys: o,
		values: function () {
			var a = [];
			for (var b in this._)
				a.push(this._[b]);
			return a
		},
		entries: function () {
			var a = [];
			for (var b in this._)
				a.push({
					key: l(b),
					value: this._[b]
				});
			return a
		},
		size: p,
		empty: q,
		forEach: function (a) {
			for (var b in this._)
				a.call(this, l(b), this._[b])
		}
	}),
	bg.nest = function () {
		function a(b, g, h) {
			if (h >= f.length)
				return d ? d.call(e, g) : c ? g.sort(c) : g;
			for (var i, k, l, m, n = -1, o = g.length, p = f[h++], q = new j; ++n < o; )
				(m = q.get(i = p(k = g[n]))) ? m.push(k) : q.set(i, [k]);
			return b ? (k = b(), l = function (c, d) {
				k.set(c, a(b, d, h))
			}) : (k = {}, l = function (c, d) {
				k[c] = a(b, d, h)
			}),
			q.forEach(l),
			k
		}
		function b(a, c) {
			if (c >= f.length)
				return a;
			var d = [],
			e = g[c++];
			return a.forEach(function (a, e) {
				d.push({
					key: a,
					values: b(e, c)
				})
			}),
			e ? d.sort(function (a, b) {
				return e(a.key, b.key)
			}) : d
		}
		var c,
		d,
		e = {},
		f = [],
		g = [];
		return e.map = function (b, c) {
			return a(c, b, 0)
		},
		e.entries = function (c) {
			return b(a(bg.map, c, 0), 0)
		},
		e.key = function (a) {
			return f.push(a),
			e
		},
		e.sortKeys = function (a) {
			return g[f.length - 1] = a,
			e
		},
		e.sortValues = function (a) {
			return c = a,
			e
		},
		e.rollup = function (a) {
			return d = a,
			e
		},
		e
	},
	bg.set = function (a) {
		var b = new r;
		if (a)
			for (var c = 0, d = a.length; c < d; ++c)
				b.add(a[c]);
		return b
	},
	i(r, {
		has: m,
		add: function (a) {
			return this._[k(a += "")] = !0,
			a
		},
		remove: n,
		values: o,
		size: p,
		empty: q,
		forEach: function (a) {
			for (var b in this._)
				a.call(this, l(b))
		}
	}),
	bg.behavior = {},
	bg.rebind = function (a, b) {
		for (var c, d = 1, e = arguments.length; ++d < e; )
			a[c = arguments[d]] = t(a, b, b[c]);
		return a
	};
	var og = ["webkit", "ms", "moz", "Moz", "o", "O"];
	bg.dispatch = function () {
		for (var a = new w, b = -1, c = arguments.length; ++b < c; )
			a[arguments[b]] = x(a);
		return a
	},
	w.prototype.on = function (a, b) {
		var c = a.indexOf("."),
		d = "";
		if (c >= 0 && (d = a.slice(c + 1), a = a.slice(0, c)), a)
			return arguments.length < 2 ? this[a].on(d) : this[a].on(d, b);
		if (2 === arguments.length) {
			if (null == b)
				for (a in this)
					this.hasOwnProperty(a) && this[a].on(d, null);
			return this
		}
	},
	bg.event = null,
	bg.requote = function (a) {
		return a.replace(pg, "\\$&")
	};
	var pg = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
	qg = {}
	.__proto__ ? function (a, b) {
		a.__proto__ = b
	}
	 : function (a, b) {
		for (var c in b)
			a[c] = b[c]
	},
	rg = function (a, b) {
		return b.querySelector(a)
	},
	sg = function (a, b) {
		return b.querySelectorAll(a)
	},
	tg = function (a, b) {
		var c = a.matches || a[u(a, "matchesSelector")];
		return (tg = function (a, b) {
			return c.call(a, b)
		})(a, b)
	};
	"function" == typeof Sizzle && (rg = function (a, b) {
		return Sizzle(a, b)[0] || null
	}, sg = Sizzle, tg = Sizzle.matchesSelector),
	bg.selection = function () {
		return bg.select(eg.documentElement)
	};
	var ug = bg.selection.prototype = [];
	ug.select = function (a) {
		var b,
		c,
		d,
		e,
		f = [];
		a = C(a);
		for (var g = -1, h = this.length; ++g < h; ) {
			f.push(b = []),
			b.parentNode = (d = this[g]).parentNode;
			for (var i = -1, j = d.length; ++i < j; )
				(e = d[i]) ? (b.push(c = a.call(e, e.__data__, i, g)), c && "__data__" in e && (c.__data__ = e.__data__)) : b.push(null)
		}
		return B(f)
	},
	ug.selectAll = function (a) {
		var b,
		c,
		d = [];
		a = D(a);
		for (var e = -1, f = this.length; ++e < f; )
			for (var g = this[e], h = -1, i = g.length; ++h < i; )
				(c = g[h]) && (d.push(b = dg(a.call(c, c.__data__, h, e))), b.parentNode = c);
		return B(d)
	};
	var vg = {
		svg: "http://www.w3.org/2000/svg",
		xhtml: "http://www.w3.org/1999/xhtml",
		xlink: "http://www.w3.org/1999/xlink",
		xml: "http://www.w3.org/XML/1998/namespace",
		xmlns: "http://www.w3.org/2000/xmlns/"
	};
	bg.ns = {
		prefix: vg,
		qualify: function (a) {
			var b = a.indexOf(":"),
			c = a;
			return b >= 0 && (c = a.slice(0, b), a = a.slice(b + 1)),
			vg.hasOwnProperty(c) ? {
				space: vg[c],
				local: a
			}
			 : a
		}
	},
	ug.attr = function (a, b) {
		if (arguments.length < 2) {
			if ("string" == typeof a) {
				var c = this.node();
				return a = bg.ns.qualify(a),
				a.local ? c.getAttributeNS(a.space, a.local) : c.getAttribute(a)
			}
			for (b in a)
				this.each(E(b, a[b]));
			return this
		}
		return this.each(E(a, b))
	},
	ug.classed = function (a, b) {
		if (arguments.length < 2) {
			if ("string" == typeof a) {
				var c = this.node(),
				d = (a = H(a)).length,
				e = -1;
				if (b = c.classList) {
					for (; ++e < d; )
						if (!b.contains(a[e]))
							return !1
				} else
					for (b = c.getAttribute("class"); ++e < d; )
						if (!G(a[e]).test(b))
							return !1;
				return !0
			}
			for (b in a)
				this.each(I(b, a[b]));
			return this
		}
		return this.each(I(a, b))
	},
	ug.style = function (a, c, d) {
		var e = arguments.length;
		if (e < 3) {
			if ("string" != typeof a) {
				e < 2 && (c = "");
				for (d in a)
					this.each(K(d, a[d], c));
				return this
			}
			if (e < 2) {
				var f = this.node();
				return b(f).getComputedStyle(f, null).getPropertyValue(a)
			}
			d = ""
		}
		return this.each(K(a, c, d))
	},
	ug.property = function (a, b) {
		if (arguments.length < 2) {
			if ("string" == typeof a)
				return this.node()[a];
			for (b in a)
				this.each(L(b, a[b]));
			return this
		}
		return this.each(L(a, b))
	},
	ug.text = function (a) {
		return arguments.length ? this.each("function" == typeof a ? function () {
			var b = a.apply(this, arguments);
			this.textContent = null == b ? "" : b
		}
			 : null == a ? function () {
			this.textContent = ""
		}
			 : function () {
			this.textContent = a
		}) : this.node().textContent
	},
	ug.html = function (a) {
		return arguments.length ? this.each("function" == typeof a ? function () {
			var b = a.apply(this, arguments);
			this.innerHTML = null == b ? "" : b
		}
			 : null == a ? function () {
			this.innerHTML = ""
		}
			 : function () {
			this.innerHTML = a
		}) : this.node().innerHTML
	},
	ug.append = function (a) {
		return a = M(a),
		this.select(function () {
			return this.appendChild(a.apply(this, arguments))
		})
	},
	ug.insert = function (a, b) {
		return a = M(a),
		b = C(b),
		this.select(function () {
			return this.insertBefore(a.apply(this, arguments), b.apply(this, arguments) || null)
		})
	},
	ug.remove = function () {
		return this.each(N)
	},
	ug.data = function (a, b) {
		function c(a, c) {
			var d,
			e,
			f,
			g = a.length,
			l = c.length,
			m = Math.min(g, l),
			n = new Array(l),
			o = new Array(l),
			p = new Array(g);
			if (b) {
				var q,
				r = new j,
				s = new Array(g);
				for (d = -1; ++d < g; )
					r.has(q = b.call(e = a[d], e.__data__, d)) ? p[d] = e : r.set(q, e), s[d] = q;
				for (d = -1; ++d < l; )
					(e = r.get(q = b.call(c, f = c[d], d))) ? e !== !0 && (n[d] = e, e.__data__ = f) : o[d] = O(f), r.set(q, !0);
				for (d = -1; ++d < g; )
					r.get(s[d]) !== !0 && (p[d] = a[d])
			} else {
				for (d = -1; ++d < m; )
					e = a[d], f = c[d], e ? (e.__data__ = f, n[d] = e) : o[d] = O(f);
				for (; d < l; ++d)
					o[d] = O(c[d]);
				for (; d < g; ++d)
					p[d] = a[d]
			}
			o.update = n,
			o.parentNode = n.parentNode = p.parentNode = a.parentNode,
			h.push(o),
			i.push(n),
			k.push(p)
		}
		var d,
		e,
		f = -1,
		g = this.length;
		if (!arguments.length) {
			for (a = new Array(g = (d = this[0]).length); ++f < g; )
				(e = d[f]) && (a[f] = e.__data__);
			return a
		}
		var h = S([]),
		i = B([]),
		k = B([]);
		if ("function" == typeof a)
			for (; ++f < g; )
				c(d = this[f], a.call(d, d.parentNode.__data__, f));
		else
			for (; ++f < g; )
				c(d = this[f], a);
		return i.enter = function () {
			return h
		},
		i.exit = function () {
			return k
		},
		i
	},
	ug.datum = function (a) {
		return arguments.length ? this.property("__data__", a) : this.property("__data__")
	},
	ug.filter = function (a) {
		var b,
		c,
		d,
		e = [];
		"function" != typeof a && (a = P(a));
		for (var f = 0, g = this.length; f < g; f++) {
			e.push(b = []),
			b.parentNode = (c = this[f]).parentNode;
			for (var h = 0, i = c.length; h < i; h++)
				(d = c[h]) && a.call(d, d.__data__, h, f) && b.push(d);
		}
		return B(e)
	},
	ug.order = function () {
		for (var a = -1, b = this.length; ++a < b; )
			for (var c, d = this[a], e = d.length - 1, f = d[e]; --e >= 0; )
				(c = d[e]) && (f && f !== c.nextSibling && f.parentNode.insertBefore(c, f), f = c);
		return this
	},
	ug.sort = function (a) {
		a = Q.apply(this, arguments);
		for (var b = -1, c = this.length; ++b < c; )
			this[b].sort(a);
		return this.order()
	},
	ug.each = function (a) {
		return R(this, function (b, c, d) {
			a.call(b, b.__data__, c, d)
		})
	},
	ug.call = function (a) {
		var b = dg(arguments);
		return a.apply(b[0] = this, b),
		this
	},
	ug.empty = function () {
		return !this.node()
	},
	ug.node = function () {
		for (var a = 0, b = this.length; a < b; a++)
			for (var c = this[a], d = 0, e = c.length; d < e; d++) {
				var f = c[d];
				if (f)
					return f
			}
		return null
	},
	ug.size = function () {
		var a = 0;
		return R(this, function () {
			++a
		}),
		a
	};
	var wg = [];
	bg.selection.enter = S,
	bg.selection.enter.prototype = wg,
	wg.append = ug.append,
	wg.empty = ug.empty,
	wg.node = ug.node,
	wg.call = ug.call,
	wg.size = ug.size,
	wg.select = function (a) {
		for (var b, c, d, e, f, g = [], h = -1, i = this.length; ++h < i; ) {
			d = (e = this[h]).update,
			g.push(b = []),
			b.parentNode = e.parentNode;
			for (var j = -1, k = e.length; ++j < k; )
				(f = e[j]) ? (b.push(d[j] = c = a.call(e.parentNode, f.__data__, j, h)), c.__data__ = f.__data__) : b.push(null)
		}
		return B(g)
	},
	wg.insert = function (a, b) {
		return arguments.length < 2 && (b = T(this)),
		ug.insert.call(this, a, b)
	},
	bg.select = function (b) {
		var c;
		return "string" == typeof b ? (c = [rg(b, eg)], c.parentNode = eg.documentElement) : (c = [b], c.parentNode = a(b)),
		B([c])
	},
	bg.selectAll = function (a) {
		var b;
		return "string" == typeof a ? (b = dg(sg(a, eg)), b.parentNode = eg.documentElement) : (b = a, b.parentNode = null),
		B([b])
	},
	ug.on = function (a, b, c) {
		var d = arguments.length;
		if (d < 3) {
			if ("string" != typeof a) {
				d < 2 && (b = !1);
				for (c in a)
					this.each(U(c, a[c], b));
				return this
			}
			if (d < 2)
				return (d = this.node()["__on" + a]) && d._;
			c = !1
		}
		return this.each(U(a, b, c))
	};
	var xg = bg.map({
			mouseenter: "mouseover",
			mouseleave: "mouseout"
		});
	eg && xg.forEach(function (a) {
		"on" + a in eg && xg.remove(a)
	});
	var yg,
	zg = 0;
	bg.mouse = function (a) {
		return Y(a, z())
	};
	var Ag = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;
	bg.touch = function (a, b, c) {
		if (arguments.length < 3 && (c = b, b = z().changedTouches), b)
			for (var d, e = 0, f = b.length; e < f; ++e)
				if ((d = b[e]).identifier === c)
					return Y(a, d)
	},
	bg.behavior.drag = function () {
		function a() {
			this.on("mousedown.drag", f).on("touchstart.drag", g)
		}
		function c(a, b, c, f, g) {
			return function () {
				function h() {
					var a,
					c,
					d = b(m, p);
					d && (a = d[0] - t[0], c = d[1] - t[1], o |= a | c, t = d, n({
							type: "drag",
							x: d[0] + j[0],
							y: d[1] + j[1],
							dx: a,
							dy: c
						}))
				}
				function i() {
					b(m, p) && (r.on(f + q, null).on(g + q, null), s(o && bg.event.target === l), n({
							type: "dragend"
						}))
				}
				var j,
				k = this,
				l = bg.event.target,
				m = k.parentNode,
				n = d.of(k, arguments),
				o = 0,
				p = a(),
				q = ".drag" + (null == p ? "" : "-" + p),
				r = bg.select(c(l)).on(f + q, h).on(g + q, i),
				s = X(l),
				t = b(m, p);
				e ? (j = e.apply(k, arguments), j = [j.x - t[0], j.y - t[1]]) : j = [0, 0],
				n({
					type: "dragstart"
				})
			}
		}
		var d = A(a, "drag", "dragstart", "dragend"),
		e = null,
		f = c(v, bg.mouse, b, "mousemove", "mouseup"),
		g = c(Z, bg.touch, s, "touchmove", "touchend");
		return a.origin = function (b) {
			return arguments.length ? (e = b, a) : e
		},
		bg.rebind(a, d, "on")
	},
	bg.touches = function (a, b) {
		return arguments.length < 2 && (b = z().touches),
		b ? dg(b).map(function (b) {
			var c = Y(a, b);
			return c.identifier = b.identifier,
			c
		}) : []
	};
	var Bg = 1e-6,
	Cg = Bg * Bg,
	Dg = Math.PI,
	Eg = 2 * Dg,
	Fg = Eg - Bg,
	Gg = Dg / 2,
	Hg = Dg / 180,
	Ig = 180 / Dg,
	Jg = Math.SQRT2,
	Kg = 2,
	Lg = 4;
	bg.interpolateZoom = function (a, b) {
		function c(a) {
			var b = a * s;
			if (r) {
				var c = da(p),
				g = f / (Kg * m) * (c * ea(Jg * b + p) - ca(p));
				return [d + g * j, e + g * k, f * c / da(Jg * b + p)]
			}
			return [d + a * j, e + a * k, f * Math.exp(Jg * b)]
		}
		var d = a[0],
		e = a[1],
		f = a[2],
		g = b[0],
		h = b[1],
		i = b[2],
		j = g - d,
		k = h - e,
		l = j * j + k * k,
		m = Math.sqrt(l),
		n = (i * i - f * f + Lg * l) / (2 * f * Kg * m),
		o = (i * i - f * f - Lg * l) / (2 * i * Kg * m),
		p = Math.log(Math.sqrt(n * n + 1) - n),
		q = Math.log(Math.sqrt(o * o + 1) - o),
		r = q - p,
		s = (r || Math.log(i / f)) / Jg;
		return c.duration = 1e3 * s,
		c
	},
	bg.behavior.zoom = function () {
		function a(a) {
			a.on(F, l).on(Ng + ".zoom", n).on("dblclick.zoom", o).on(I, m)
		}
		function c(a) {
			return [(a[0] - z.x) / z.k, (a[1] - z.y) / z.k]
		}
		function d(a) {
			return [a[0] * z.k + z.x, a[1] * z.k + z.y]
		}
		function e(a) {
			z.k = Math.max(C[0], Math.min(C[1], a))
		}
		function f(a, b) {
			b = d(b),
			z.x += a[0] - b[0],
			z.y += a[1] - b[1]
		}
		function g(b, c, d, g) {
			b.__chart__ = {
				x: z.x,
				y: z.y,
				k: z.k
			},
			e(Math.pow(2, g)),
			f(q = c, d),
			b = bg.select(b),
			D > 0 && (b = b.transition().duration(D)),
			b.call(a.event)
		}
		function h() {
			v && v.domain(u.range().map(function (a) {
					return (a - z.x) / z.k
				}).map(u.invert)),
			x && x.domain(w.range().map(function (a) {
					return (a - z.y) / z.k
				}).map(w.invert))
		}
		function i(a) {
			E++ || a({
				type: "zoomstart"
			})
		}
		function j(a) {
			h(),
			a({
				type: "zoom",
				scale: z.k,
				translate: [z.x, z.y]
			})
		}
		function k(a) {
			--E || a({
				type: "zoomend"
			}),
			q = null
		}
		function l() {
			function a() {
				l = 1,
				f(bg.mouse(e), n),
				j(h)
			}
			function d() {
				m.on(G, null).on(H, null),
				o(l && bg.event.target === g),
				k(h)
			}
			var e = this,
			g = bg.event.target,
			h = J.of(e, arguments),
			l = 0,
			m = bg.select(b(e)).on(G, a).on(H, d),
			n = c(bg.mouse(e)),
			o = X(e);
			Hi.call(e),
			i(h)
		}
		function m() {
			function a() {
				var a = bg.touches(o);
				return n = z.k,
				a.forEach(function (a) {
					a.identifier in q && (q[a.identifier] = c(a))
				}),
				a
			}
			function b() {
				var b = bg.event.target;
				bg.select(b).on(u, d).on(v, h),
				w.push(b);
				for (var c = bg.event.changedTouches, e = 0, f = c.length; e < f; ++e)
					q[c[e].identifier] = null;
				var i = a(),
				j = Date.now();
				if (1 === i.length) {
					if (j - t < 500) {
						var k = i[0];
						g(o, k, q[k.identifier], Math.floor(Math.log(z.k) / Math.LN2) + 1),
						y()
					}
					t = j
				} else if (i.length > 1) {
					var k = i[0],
					l = i[1],
					m = k[0] - l[0],
					n = k[1] - l[1];
					r = m * m + n * n
				}
			}
			function d() {
				var a,
				b,
				c,
				d,
				g = bg.touches(o);
				Hi.call(o);
				for (var h = 0, i = g.length; h < i; ++h, d = null)
					if (c = g[h], d = q[c.identifier]) {
						if (b)
							break;
						a = c,
						b = d
					}
				if (d) {
					var k = (k = c[0] - a[0]) * k + (k = c[1] - a[1]) * k,
					l = r && Math.sqrt(k / r);
					a = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2],
					b = [(b[0] + d[0]) / 2, (b[1] + d[1]) / 2],
					e(l * n)
				}
				t = null,
				f(a, b),
				j(p)
			}
			function h() {
				if (bg.event.touches.length) {
					for (var b = bg.event.changedTouches, c = 0, d = b.length; c < d; ++c)
						delete q[b[c].identifier];
					for (var e in q)
						return void a()
				}
				bg.selectAll(w).on(s, null),
				x.on(F, l).on(I, m),
				A(),
				k(p)
			}
			var n,
			o = this,
			p = J.of(o, arguments),
			q = {},
			r = 0,
			s = ".zoom-" + bg.event.changedTouches[0].identifier,
			u = "touchmove" + s,
			v = "touchend" + s,
			w = [],
			x = bg.select(o),
			A = X(o);
			b(),
			i(p),
			x.on(F, null).on(I, b)
		}
		function n() {
			var a = J.of(this, arguments);
			s ? clearTimeout(s) : (p = c(q = r || bg.mouse(this)), Hi.call(this), i(a)),
			s = setTimeout(function () {
					s = null,
					k(a)
				}, 50),
			y(),
			e(Math.pow(2, .002 * Mg()) * z.k),
			f(q, p),
			j(a)
		}
		function o() {
			var a = bg.mouse(this),
			b = Math.log(z.k) / Math.LN2;
			g(this, a, c(a), bg.event.shiftKey ? Math.ceil(b) - 1 : Math.floor(b) + 1)
		}
		var p,
		q,
		r,
		s,
		t,
		u,
		v,
		w,
		x,
		z = {
			x: 0,
			y: 0,
			k: 1
		},
		B = [960, 500],
		C = Og,
		D = 250,
		E = 0,
		F = "mousedown.zoom",
		G = "mousemove.zoom",
		H = "mouseup.zoom",
		I = "touchstart.zoom",
		J = A(a, "zoomstart", "zoom", "zoomend");
		return Ng || (Ng = "onwheel" in eg ? (Mg = function () {
					return -bg.event.deltaY * (bg.event.deltaMode ? 120 : 1)
				}, "wheel") : "onmousewheel" in eg ? (Mg = function () {
					return bg.event.wheelDelta
				}, "mousewheel") : (Mg = function () {
					return -bg.event.detail
				}, "MozMousePixelScroll")),
		a.event = function (a) {
			a.each(function () {
				var a = J.of(this, arguments),
				b = z;
				Fi ? bg.select(this).transition().each("start.zoom", function () {
					z = this.__chart__ || {
						x: 0,
						y: 0,
						k: 1
					},
					i(a)
				}).tween("zoom:zoom", function () {
					var c = B[0],
					d = B[1],
					e = q ? q[0] : c / 2,
					f = q ? q[1] : d / 2,
					g = bg.interpolateZoom([(e - z.x) / z.k, (f - z.y) / z.k, c / z.k], [(e - b.x) / b.k, (f - b.y) / b.k, c / b.k]);
					return function (b) {
						var d = g(b),
						h = c / d[2];
						this.__chart__ = z = {
							x: e - d[0] * h,
							y: f - d[1] * h,
							k: h
						},
						j(a)
					}
				}).each("interrupt.zoom", function () {
					k(a)
				}).each("end.zoom", function () {
					k(a)
				}) : (this.__chart__ = z, i(a), j(a), k(a))
			})
		},
		a.translate = function (b) {
			return arguments.length ? (z = {
					x: +b[0],
					y: +b[1],
					k: z.k
				}, h(), a) : [z.x, z.y]
		},
		a.scale = function (b) {
			return arguments.length ? (z = {
					x: z.x,
					y: z.y,
					k: +b
				}, h(), a) : z.k
		},
		a.scaleExtent = function (b) {
			return arguments.length ? (C = null == b ? Og : [+b[0], +b[1]], a) : C
		},
		a.center = function (b) {
			return arguments.length ? (r = b && [+b[0], +b[1]], a) : r
		},
		a.size = function (b) {
			return arguments.length ? (B = b && [+b[0], +b[1]], a) : B
		},
		a.duration = function (b) {
			return arguments.length ? (D = +b, a) : D
		},
		a.x = function (b) {
			return arguments.length ? (v = b, u = b.copy(), z = {
					x: 0,
					y: 0,
					k: 1
				}, a) : v
		},
		a.y = function (b) {
			return arguments.length ? (x = b, w = b.copy(), z = {
					x: 0,
					y: 0,
					k: 1
				}, a) : x
		},
		bg.rebind(a, J, "on")
	};
	var Mg,
	Ng,
	Og = [0, 1 / 0];
	bg.color = ga,
	ga.prototype.toString = function () {
		return this.rgb() + ""
	},
	bg.hsl = ha;
	var Pg = ha.prototype = new ga;
	Pg.brighter = function (a) {
		return a = Math.pow(.7, arguments.length ? a : 1),
		new ha(this.h, this.s, this.l / a)
	},
	Pg.darker = function (a) {
		return a = Math.pow(.7, arguments.length ? a : 1),
		new ha(this.h, this.s, a * this.l)
	},
	Pg.rgb = function () {
		return ia(this.h, this.s, this.l)
	},
	bg.hcl = ja;
	var Qg = ja.prototype = new ga;
	Qg.brighter = function (a) {
		return new ja(this.h, this.c, Math.min(100, this.l + Rg * (arguments.length ? a : 1)))
	},
	Qg.darker = function (a) {
		return new ja(this.h, this.c, Math.max(0, this.l - Rg * (arguments.length ? a : 1)))
	},
	Qg.rgb = function () {
		return ka(this.h, this.c, this.l).rgb()
	},
	bg.lab = la;
	var Rg = 18,
	Sg = .95047,
	Tg = 1,
	Ug = 1.08883,
	Vg = la.prototype = new ga;
	Vg.brighter = function (a) {
		return new la(Math.min(100, this.l + Rg * (arguments.length ? a : 1)), this.a, this.b)
	},
	Vg.darker = function (a) {
		return new la(Math.max(0, this.l - Rg * (arguments.length ? a : 1)), this.a, this.b)
	},
	Vg.rgb = function () {
		return ma(this.l, this.a, this.b)
	},
	bg.rgb = ra;
	var Wg = ra.prototype = new ga;
	Wg.brighter = function (a) {
		a = Math.pow(.7, arguments.length ? a : 1);
		var b = this.r,
		c = this.g,
		d = this.b,
		e = 30;
		return b || c || d ? (b && b < e && (b = e), c && c < e && (c = e), d && d < e && (d = e), new ra(Math.min(255, b / a), Math.min(255, c / a), Math.min(255, d / a))) : new ra(e, e, e)
	},
	Wg.darker = function (a) {
		return a = Math.pow(.7, arguments.length ? a : 1),
		new ra(a * this.r, a * this.g, a * this.b)
	},
	Wg.hsl = function () {
		return wa(this.r, this.g, this.b)
	},
	Wg.toString = function () {
		return "#" + ua(this.r) + ua(this.g) + ua(this.b)
	};
	var Xg = bg.map({
			aliceblue: 15792383,
			antiquewhite: 16444375,
			aqua: 65535,
			aquamarine: 8388564,
			azure: 15794175,
			beige: 16119260,
			bisque: 16770244,
			black: 0,
			blanchedalmond: 16772045,
			blue: 255,
			blueviolet: 9055202,
			brown: 10824234,
			burlywood: 14596231,
			cadetblue: 6266528,
			chartreuse: 8388352,
			chocolate: 13789470,
			coral: 16744272,
			cornflowerblue: 6591981,
			cornsilk: 16775388,
			crimson: 14423100,
			cyan: 65535,
			darkblue: 139,
			darkcyan: 35723,
			darkgoldenrod: 12092939,
			darkgray: 11119017,
			darkgreen: 25600,
			darkgrey: 11119017,
			darkkhaki: 12433259,
			darkmagenta: 9109643,
			darkolivegreen: 5597999,
			darkorange: 16747520,
			darkorchid: 10040012,
			darkred: 9109504,
			darksalmon: 15308410,
			darkseagreen: 9419919,
			darkslateblue: 4734347,
			darkslategray: 3100495,
			darkslategrey: 3100495,
			darkturquoise: 52945,
			darkviolet: 9699539,
			deeppink: 16716947,
			deepskyblue: 49151,
			dimgray: 6908265,
			dimgrey: 6908265,
			dodgerblue: 2003199,
			firebrick: 11674146,
			floralwhite: 16775920,
			forestgreen: 2263842,
			fuchsia: 16711935,
			gainsboro: 14474460,
			ghostwhite: 16316671,
			gold: 16766720,
			goldenrod: 14329120,
			gray: 8421504,
			green: 32768,
			greenyellow: 11403055,
			grey: 8421504,
			honeydew: 15794160,
			hotpink: 16738740,
			indianred: 13458524,
			indigo: 4915330,
			ivory: 16777200,
			khaki: 15787660,
			lavender: 15132410,
			lavenderblush: 16773365,
			lawngreen: 8190976,
			lemonchiffon: 16775885,
			lightblue: 11393254,
			lightcoral: 15761536,
			lightcyan: 14745599,
			lightgoldenrodyellow: 16448210,
			lightgray: 13882323,
			lightgreen: 9498256,
			lightgrey: 13882323,
			lightpink: 16758465,
			lightsalmon: 16752762,
			lightseagreen: 2142890,
			lightskyblue: 8900346,
			lightslategray: 7833753,
			lightslategrey: 7833753,
			lightsteelblue: 11584734,
			lightyellow: 16777184,
			lime: 65280,
			limegreen: 3329330,
			linen: 16445670,
			magenta: 16711935,
			maroon: 8388608,
			mediumaquamarine: 6737322,
			mediumblue: 205,
			mediumorchid: 12211667,
			mediumpurple: 9662683,
			mediumseagreen: 3978097,
			mediumslateblue: 8087790,
			mediumspringgreen: 64154,
			mediumturquoise: 4772300,
			mediumvioletred: 13047173,
			midnightblue: 1644912,
			mintcream: 16121850,
			mistyrose: 16770273,
			moccasin: 16770229,
			navajowhite: 16768685,
			navy: 128,
			oldlace: 16643558,
			olive: 8421376,
			olivedrab: 7048739,
			orange: 16753920,
			orangered: 16729344,
			orchid: 14315734,
			palegoldenrod: 15657130,
			palegreen: 10025880,
			paleturquoise: 11529966,
			palevioletred: 14381203,
			papayawhip: 16773077,
			peachpuff: 16767673,
			peru: 13468991,
			pink: 16761035,
			plum: 14524637,
			powderblue: 11591910,
			purple: 8388736,
			rebeccapurple: 6697881,
			red: 16711680,
			rosybrown: 12357519,
			royalblue: 4286945,
			saddlebrown: 9127187,
			salmon: 16416882,
			sandybrown: 16032864,
			seagreen: 3050327,
			seashell: 16774638,
			sienna: 10506797,
			silver: 12632256,
			skyblue: 8900331,
			slateblue: 6970061,
			slategray: 7372944,
			slategrey: 7372944,
			snow: 16775930,
			springgreen: 65407,
			steelblue: 4620980,
			tan: 13808780,
			teal: 32896,
			thistle: 14204888,
			tomato: 16737095,
			turquoise: 4251856,
			violet: 15631086,
			wheat: 16113331,
			white: 16777215,
			whitesmoke: 16119285,
			yellow: 16776960,
			yellowgreen: 10145074
		});
	Xg.forEach(function (a, b) {
		Xg.set(a, sa(b))
	}),
	bg.functor = Aa,
	bg.xhr = Ba(s),
	bg.dsv = function (a, b) {
		function c(a, c, f) {
			arguments.length < 3 && (f = c, c = null);
			var g = Ca(a, b, null == c ? d : e(c), f);
			return g.row = function (a) {
				return arguments.length ? g.response(null == (c = a) ? d : e(a)) : c
			},
			g
		}
		function d(a) {
			return c.parse(a.responseText)
		}
		function e(a) {
			return function (b) {
				return c.parse(b.responseText, a)
			}
		}
		function f(b) {
			return b.map(g).join(a)
		}
		function g(a) {
			return h.test(a) ? '"' + a.replace(/\"/g, '""') + '"' : a
		}
		var h = new RegExp('["' + a + "\n]"),
		i = a.charCodeAt(0);
		return c.parse = function (a, b) {
			var d;
			return c.parseRows(a, function (a, c) {
				if (d)
					return d(a, c - 1);
				var e = new Function("d", "return {" + a.map(function (a, b) {
							return JSON.stringify(a) + ": d[" + b + "]"
						}).join(",") + "}");
				d = b ? function (a, c) {
					return b(e(a), c)
				}
				 : e
			})
		},
		c.parseRows = function (a, b) {
			function c() {
				if (k >= j)
					return g;
				if (e)
					return e = !1, f;
				var b = k;
				if (34 === a.charCodeAt(b)) {
					for (var c = b; c++ < j; )
						if (34 === a.charCodeAt(c)) {
							if (34 !== a.charCodeAt(c + 1))
								break;
							++c
						}
					k = c + 2;
					var d = a.charCodeAt(c + 1);
					return 13 === d ? (e = !0, 10 === a.charCodeAt(c + 2) && ++k) : 10 === d && (e = !0),
					a.slice(b + 1, c).replace(/""/g, '"')
				}
				for (; k < j; ) {
					var d = a.charCodeAt(k++),
					h = 1;
					if (10 === d)
						e = !0;
					else if (13 === d)
						e = !0, 10 === a.charCodeAt(k) && (++k, ++h);
					else if (d !== i)
						continue;
					return a.slice(b, k - h)
				}
				return a.slice(b)
			}
			for (var d, e, f = {}, g = {}, h = [], j = a.length, k = 0, l = 0; (d = c()) !== g; ) {
				for (var m = []; d !== f && d !== g; )
					m.push(d), d = c();
				b && null == (m = b(m, l++)) || h.push(m)
			}
			return h
		},
		c.format = function (b) {
			if (Array.isArray(b[0]))
				return c.formatRows(b);
			var d = new r,
			e = [];
			return b.forEach(function (a) {
				for (var b in a)
					d.has(b) || e.push(d.add(b))
			}),
			[e.map(g).join(a)].concat(b.map(function (b) {
					return e.map(function (a) {
						return g(b[a])
					}).join(a)
				})).join("\n")
		},
		c.formatRows = function (a) {
			return a.map(f).join("\n")
		},
		c
	},
	bg.csv = bg.dsv(",", "text/csv"),
	bg.tsv = bg.dsv("\t", "text/tab-separated-values");
	var Yg,
	Zg,
	$g,
	_g,
	ah,
	bh = this[u(this, "requestAnimationFrame")] || function (a) {
		setTimeout(a, 17)
	};
	bg.timer = function (a, b, c) {
		var d = arguments.length;
		d < 2 && (b = 0),
		d < 3 && (c = Date.now());
		var e = c + b,
		f = {
			c: a,
			t: e,
			f: !1,
			n: null
		};
		Zg ? Zg.n = f : Yg = f,
		Zg = f,
		$g || (_g = clearTimeout(_g), $g = 1, bh(Fa))
	},
	bg.timer.flush = function () {
		Ga(),
		Ha()
	},
	bg.round = function (a, b) {
		return b ? Math.round(a * (b = Math.pow(10, b))) / b : Math.round(a)
	};
	var ch = ["y", "z", "a", "f", "p", "n", "?", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(Ja);
	bg.formatPrefix = function (a, b) {
		var c = 0;
		return a && (a < 0 && (a *= -1), b && (a = bg.round(a, Ia(a, b))), c = 1 + Math.floor(1e-12 + Math.log(a) / Math.LN10), c = Math.max(-24, Math.min(24, 3 * Math.floor((c - 1) / 3)))),
		ch[8 + c / 3]
	};
	var dh = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
	eh = bg.map({
			b: function (a) {
				return a.toString(2)
			},
			c: function (a) {
				return String.fromCharCode(a)
			},
			o: function (a) {
				return a.toString(8)
			},
			x: function (a) {
				return a.toString(16)
			},
			X: function (a) {
				return a.toString(16).toUpperCase()
			},
			g: function (a, b) {
				return a.toPrecision(b)
			},
			e: function (a, b) {
				return a.toExponential(b)
			},
			f: function (a, b) {
				return a.toFixed(b)
			},
			r: function (a, b) {
				return (a = bg.round(a, Ia(a, b))).toFixed(Math.max(0, Math.min(20, Ia(a * (1 + 1e-15), b))))
			}
		}),
	fh = bg.time = {},
	gh = Date;
	Ma.prototype = {
		getDate: function () {
			return this._.getUTCDate()
		},
		getDay: function () {
			return this._.getUTCDay()
		},
		getFullYear: function () {
			return this._.getUTCFullYear()
		},
		getHours: function () {
			return this._.getUTCHours()
		},
		getMilliseconds: function () {
			return this._.getUTCMilliseconds()
		},
		getMinutes: function () {
			return this._.getUTCMinutes()
		},
		getMonth: function () {
			return this._.getUTCMonth()
		},
		getSeconds: function () {
			return this._.getUTCSeconds()
		},
		getTime: function () {
			return this._.getTime()
		},
		getTimezoneOffset: function () {
			return 0
		},
		valueOf: function () {
			return this._.valueOf()
		},
		setDate: function () {
			hh.setUTCDate.apply(this._, arguments)
		},
		setDay: function () {
			hh.setUTCDay.apply(this._, arguments)
		},
		setFullYear: function () {
			hh.setUTCFullYear.apply(this._, arguments)
		},
		setHours: function () {
			hh.setUTCHours.apply(this._, arguments)
		},
		setMilliseconds: function () {
			hh.setUTCMilliseconds.apply(this._, arguments)
		},
		setMinutes: function () {
			hh.setUTCMinutes.apply(this._, arguments)
		},
		setMonth: function () {
			hh.setUTCMonth.apply(this._, arguments)
		},
		setSeconds: function () {
			hh.setUTCSeconds.apply(this._, arguments)
		},
		setTime: function () {
			hh.setTime.apply(this._, arguments)
		}
	};
	var hh = Date.prototype;
	fh.year = Na(function (a) {
			return a = fh.day(a),
			a.setMonth(0, 1),
			a
		}, function (a, b) {
			a.setFullYear(a.getFullYear() + b)
		}, function (a) {
			return a.getFullYear()
		}),
	fh.years = fh.year.range,
	fh.years.utc = fh.year.utc.range,
	fh.day = Na(function (a) {
			var b = new gh(2e3, 0);
			return b.setFullYear(a.getFullYear(), a.getMonth(), a.getDate()),
			b
		}, function (a, b) {
			a.setDate(a.getDate() + b)
		}, function (a) {
			return a.getDate() - 1
		}),
	fh.days = fh.day.range,
	fh.days.utc = fh.day.utc.range,
	fh.dayOfYear = function (a) {
		var b = fh.year(a);
		return Math.floor((a - b - 6e4 * (a.getTimezoneOffset() - b.getTimezoneOffset())) / 864e5)
	},
	["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function (a, b) {
		b = 7 - b;
		var c = fh[a] = Na(function (a) {
				return (a = fh.day(a)).setDate(a.getDate() - (a.getDay() + b) % 7),
				a
			}, function (a, b) {
				a.setDate(a.getDate() + 7 * Math.floor(b))
			}, function (a) {
				var c = fh.year(a).getDay();
				return Math.floor((fh.dayOfYear(a) + (c + b) % 7) / 7) - (c !== b)
			});
		fh[a + "s"] = c.range,
		fh[a + "s"].utc = c.utc.range,
		fh[a + "OfYear"] = function (a) {
			var c = fh.year(a).getDay();
			return Math.floor((fh.dayOfYear(a) + (c + b) % 7) / 7)
		}
	}),
	fh.week = fh.sunday,
	fh.weeks = fh.sunday.range,
	fh.weeks.utc = fh.sunday.utc.range,
	fh.weekOfYear = fh.sundayOfYear;
	var ih = {
		"-": "",
		_: " ",
		0: "0"
	},
	jh = /^\s*\d+/,
	kh = /^%/;
	bg.locale = function (a) {
		return {
			numberFormat: Ka(a),
			timeFormat: Pa(a)
		}
	};
	var lh = bg.locale({
			decimal: ".",
			thousands: ",",
			grouping: [3],
			currency: ["$", ""],
			dateTime: "%a %b %e %X %Y",
			date: "%m/%d/%Y",
			time: "%H:%M:%S",
			periods: ["AM", "PM"],
			days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
			shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
			months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
			shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
		});
	bg.format = lh.numberFormat,
	bg.geo = {},
	ib.prototype = {
		s: 0,
		t: 0,
		add: function (a) {
			jb(a, this.t, mh),
			jb(mh.s, this.s, this),
			this.s ? this.t += mh.t : this.s = mh.t
		},
		reset: function () {
			this.s = this.t = 0
		},
		valueOf: function () {
			return this.s
		}
	};
	var mh = new ib;
	bg.geo.stream = function (a, b) {
		a && nh.hasOwnProperty(a.type) ? nh[a.type](a, b) : kb(a, b)
	};
	var nh = {
		Feature: function (a, b) {
			kb(a.geometry, b)
		},
		FeatureCollection: function (a, b) {
			for (var c = a.features, d = -1, e = c.length; ++d < e; )
				kb(c[d].geometry, b)
		}
	},
	oh = {
		Sphere: function (a, b) {
			b.sphere()
		},
		Point: function (a, b) {
			a = a.coordinates,
			b.point(a[0], a[1], a[2])
		},
		MultiPoint: function (a, b) {
			for (var c = a.coordinates, d = -1, e = c.length; ++d < e; )
				a = c[d], b.point(a[0], a[1], a[2])
		},
		LineString: function (a, b) {
			lb(a.coordinates, b, 0)
		},
		MultiLineString: function (a, b) {
			for (var c = a.coordinates, d = -1, e = c.length; ++d < e; )
				lb(c[d], b, 0)
		},
		Polygon: function (a, b) {
			mb(a.coordinates, b)
		},
		MultiPolygon: function (a, b) {
			for (var c = a.coordinates, d = -1, e = c.length; ++d < e; )
				mb(c[d], b)
		},
		GeometryCollection: function (a, b) {
			for (var c = a.geometries, d = -1, e = c.length; ++d < e; )
				kb(c[d], b)
		}
	};
	bg.geo.area = function (a) {
		return ph = 0,
		bg.geo.stream(a, rh),
		ph
	};
	var ph,
	qh = new ib,
	rh = {
		sphere: function () {
			ph += 4 * Dg
		},
		point: v,
		lineStart: v,
		lineEnd: v,
		polygonStart: function () {
			qh.reset(),
			rh.lineStart = nb
		},
		polygonEnd: function () {
			var a = 2 * qh;
			ph += a < 0 ? 4 * Dg + a : a,
			rh.lineStart = rh.lineEnd = rh.point = v
		}
	};
	bg.geo.bounds = function () {
		function a(a, b) {
			t.push(u = [k = a, m = a]),
			b < l && (l = b),
			b > n && (n = b)
		}
		function b(b, c) {
			var d = ob([b * Hg, c * Hg]);
			if (r) {
				var e = qb(r, d),
				f = [e[1], -e[0], 0],
				g = qb(f, e);
				tb(g),
				g = ub(g);
				var i = b - o,
				j = i > 0 ? 1 : -1,
				p = g[0] * Ig * j,
				q = lg(i) > 180;
				if (q ^ (j * o < p && p < j * b)) {
					var s = g[1] * Ig;
					s > n && (n = s)
				} else if (p = (p + 360) % 360 - 180, q ^ (j * o < p && p < j * b)) {
					var s = -g[1] * Ig;
					s < l && (l = s)
				} else
					c < l && (l = c), c > n && (n = c);
				q ? b < o ? h(k, b) > h(k, m) && (m = b) : h(b, m) > h(k, m) && (k = b) : m >= k ? (b < k && (k = b), b > m && (m = b)) : b > o ? h(k, b) > h(k, m) && (m = b) : h(b, m) > h(k, m) && (k = b)
			} else
				a(b, c);
			r = d,
			o = b
		}
		function c() {
			v.point = b
		}
		function d() {
			u[0] = k,
			u[1] = m,
			v.point = a,
			r = null
		}
		function e(a, c) {
			if (r) {
				var d = a - o;
				s += lg(d) > 180 ? d + (d > 0 ? 360 : -360) : d
			} else
				p = a, q = c;
			rh.point(a, c),
			b(a, c)
		}
		function f() {
			rh.lineStart()
		}
		function g() {
			e(p, q),
			rh.lineEnd(),
			lg(s) > Bg && (k =  - (m = 180)),
			u[0] = k,
			u[1] = m,
			r = null
		}
		function h(a, b) {
			return (b -= a) < 0 ? b + 360 : b
		}
		function i(a, b) {
			return a[0] - b[0]
		}
		function j(a, b) {
			return b[0] <= b[1] ? b[0] <= a && a <= b[1] : a < b[0] || b[1] < a
		}
		var k,
		l,
		m,
		n,
		o,
		p,
		q,
		r,
		s,
		t,
		u,
		v = {
			point: a,
			lineStart: c,
			lineEnd: d,
			polygonStart: function () {
				v.point = e,
				v.lineStart = f,
				v.lineEnd = g,
				s = 0,
				rh.polygonStart()
			},
			polygonEnd: function () {
				rh.polygonEnd(),
				v.point = a,
				v.lineStart = c,
				v.lineEnd = d,
				qh < 0 ? (k =  - (m = 180), l =  - (n = 90)) : s > Bg ? n = 90 : s < -Bg && (l = -90),
				u[0] = k,
				u[1] = m
			}
		};
		return function (a) {
			n = m =  - (k = l = 1 / 0),
			t = [],
			bg.geo.stream(a, v);
			var b = t.length;
			if (b) {
				t.sort(i);
				for (var c, d = 1, e = t[0], f = [e]; d < b; ++d)
					c = t[d], j(c[0], e) || j(c[1], e) ? (h(e[0], c[1]) > h(e[0], e[1]) && (e[1] = c[1]), h(c[0], e[1]) > h(e[0], e[1]) && (e[0] = c[0])) : f.push(e = c);
				for (var g, c, o =  - (1 / 0), b = f.length - 1, d = 0, e = f[b]; d <= b; e = c, ++d)
					c = f[d], (g = h(e[1], c[0])) > o && (o = g, k = c[0], m = e[1])
			}
			return t = u = null,
			k === 1 / 0 || l === 1 / 0 ? [[NaN, NaN], [NaN, NaN]] : [[k, l], [m, n]]
		}
	}
	(),
	bg.geo.centroid = function (a) {
		sh = th = uh = vh = wh = xh = yh = zh = Ah = Bh = Ch = 0,
		bg.geo.stream(a, Dh);
		var b = Ah,
		c = Bh,
		d = Ch,
		e = b * b + c * c + d * d;
		return e < Cg && (b = xh, c = yh, d = zh, th < Bg && (b = uh, c = vh, d = wh), e = b * b + c * c + d * d, e < Cg) ? [NaN, NaN] : [Math.atan2(c, b) * Ig, ba(d / Math.sqrt(e)) * Ig]
	};
	var sh,
	th,
	uh,
	vh,
	wh,
	xh,
	yh,
	zh,
	Ah,
	Bh,
	Ch,
	Dh = {
		sphere: v,
		point: wb,
		lineStart: yb,
		lineEnd: zb,
		polygonStart: function () {
			Dh.lineStart = Ab
		},
		polygonEnd: function () {
			Dh.lineStart = yb
		}
	},
	Eh = Gb(Cb, Kb, Mb, [-Dg, -Dg / 2]),
	Fh = 1e9;
	bg.geo.clipExtent = function () {
		var a,
		b,
		c,
		d,
		e,
		f,
		g = {
			stream: function (a) {
				return e && (e.valid = !1),
				e = f(a),
				e.valid = !0,
				e
			},
			extent: function (h) {
				return arguments.length ? (f = Qb(a = +h[0][0], b = +h[0][1], c = +h[1][0], d = +h[1][1]), e && (e.valid = !1, e = null), g) : [[a, b], [c, d]]
			}
		};
		return g.extent([[0, 0], [960, 500]])
	},
	(bg.geo.conicEqualArea = function () {
		return Rb(Sb)
	}).raw = Sb,
	bg.geo.albers = function () {
		return bg.geo.conicEqualArea().rotate([96, 0]).center([ - .6, 38.7]).parallels([29.5, 45.5]).scale(1070)
	},
	bg.geo.albersUsa = function () {
		function a(a) {
			var f = a[0],
			g = a[1];
			return b = null,
			c(f, g),
			b || (d(f, g), b) || e(f, g),
			b
		}
		var b,
		c,
		d,
		e,
		f = bg.geo.albers(),
		g = bg.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]),
		h = bg.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]),
		i = {
			point: function (a, c) {
				b = [a, c]
			}
		};
		return a.invert = function (a) {
			var b = f.scale(),
			c = f.translate(),
			d = (a[0] - c[0]) / b,
			e = (a[1] - c[1]) / b;
			return (e >= .12 && e < .234 && d >=  - .425 && d <  - .214 ? g : e >= .166 && e < .234 && d >=  - .214 && d <  - .115 ? h : f).invert(a)
		},
		a.stream = function (a) {
			var b = f.stream(a),
			c = g.stream(a),
			d = h.stream(a);
			return {
				point: function (a, e) {
					b.point(a, e),
					c.point(a, e),
					d.point(a, e)
				},
				sphere: function () {
					b.sphere(),
					c.sphere(),
					d.sphere()
				},
				lineStart: function () {
					b.lineStart(),
					c.lineStart(),
					d.lineStart()
				},
				lineEnd: function () {
					b.lineEnd(),
					c.lineEnd(),
					d.lineEnd()
				},
				polygonStart: function () {
					b.polygonStart(),
					c.polygonStart(),
					d.polygonStart()
				},
				polygonEnd: function () {
					b.polygonEnd(),
					c.polygonEnd(),
					d.polygonEnd()
				}
			}
		},
		a.precision = function (b) {
			return arguments.length ? (f.precision(b), g.precision(b), h.precision(b), a) : f.precision()
		},
		a.scale = function (b) {
			return arguments.length ? (f.scale(b), g.scale(.35 * b), h.scale(b), a.translate(f.translate())) : f.scale()
		},
		a.translate = function (b) {
			if (!arguments.length)
				return f.translate();
			var j = f.scale(),
			k = +b[0],
			l = +b[1];
			return c = f.translate(b).clipExtent([[k - .455 * j, l - .238 * j], [k + .455 * j, l + .238 * j]]).stream(i).point,
			d = g.translate([k - .307 * j, l + .201 * j]).clipExtent([[k - .425 * j + Bg, l + .12 * j + Bg], [k - .214 * j - Bg, l + .234 * j - Bg]]).stream(i).point,
			e = h.translate([k - .205 * j, l + .212 * j]).clipExtent([[k - .214 * j + Bg, l + .166 * j + Bg], [k - .115 * j - Bg, l + .234 * j - Bg]]).stream(i).point,
			a
		},
		a.scale(1070)
	};
	var Gh,
	Hh,
	Ih,
	Jh,
	Kh,
	Lh,
	Mh = {
		point: v,
		lineStart: v,
		lineEnd: v,
		polygonStart: function () {
			Hh = 0,
			Mh.lineStart = Tb
		},
		polygonEnd: function () {
			Mh.lineStart = Mh.lineEnd = Mh.point = v,
			Gh += lg(Hh / 2)
		}
	},
	Nh = {
		point: Ub,
		lineStart: v,
		lineEnd: v,
		polygonStart: v,
		polygonEnd: v
	},
	Oh = {
		point: Xb,
		lineStart: Yb,
		lineEnd: Zb,
		polygonStart: function () {
			Oh.lineStart = $b
		},
		polygonEnd: function () {
			Oh.point = Xb,
			Oh.lineStart = Yb,
			Oh.lineEnd = Zb
		}
	};
	bg.geo.path = function () {
		function a(a) {
			return a && ("function" == typeof h && f.pointRadius(+h.apply(this, arguments)), g && g.valid || (g = e(f)), bg.geo.stream(a, g)),
			f.result()
		}
		function b() {
			return g = null,
			a
		}
		var c,
		d,
		e,
		f,
		g,
		h = 4.5;
		return a.area = function (a) {
			return Gh = 0,
			bg.geo.stream(a, e(Mh)),
			Gh
		},
		a.centroid = function (a) {
			return uh = vh = wh = xh = yh = zh = Ah = Bh = Ch = 0,
			bg.geo.stream(a, e(Oh)),
			Ch ? [Ah / Ch, Bh / Ch] : zh ? [xh / zh, yh / zh] : wh ? [uh / wh, vh / wh] : [NaN, NaN]
		},
		a.bounds = function (a) {
			return Kh = Lh =  - (Ih = Jh = 1 / 0),
			bg.geo.stream(a, e(Nh)),
			[[Ih, Jh], [Kh, Lh]]
		},
		a.projection = function (a) {
			return arguments.length ? (e = (c = a) ? a.stream || bc(a) : s, b()) : c
		},
		a.context = function (a) {
			return arguments.length ? (f = null == (d = a) ? new Vb : new _b(a), "function" != typeof h && f.pointRadius(h), b()) : d
		},
		a.pointRadius = function (b) {
			return arguments.length ? (h = "function" == typeof b ? b : (f.pointRadius(+b), +b), a) : h
		},
		a.projection(bg.geo.albersUsa()).context(null)
	},
	bg.geo.transform = function (a) {
		return {
			stream: function (b) {
				var c = new cc(b);
				for (var d in a)
					c[d] = a[d];
				return c
			}
		}
	},
	cc.prototype = {
		point: function (a, b) {
			this.stream.point(a, b)
		},
		sphere: function () {
			this.stream.sphere()
		},
		lineStart: function () {
			this.stream.lineStart()
		},
		lineEnd: function () {
			this.stream.lineEnd()
		},
		polygonStart: function () {
			this.stream.polygonStart()
		},
		polygonEnd: function () {
			this.stream.polygonEnd()
		}
	},
	bg.geo.projection = ec,
	bg.geo.projectionMutator = fc,
	(bg.geo.equirectangular = function () {
		return ec(hc)
	}).raw = hc.invert = hc,
	bg.geo.rotation = function (a) {
		function b(b) {
			return b = a(b[0] * Hg, b[1] * Hg),
			b[0] *= Ig,
			b[1] *= Ig,
			b
		}
		return a = jc(a[0] % 360 * Hg, a[1] * Hg, a.length > 2 ? a[2] * Hg : 0),
		b.invert = function (b) {
			return b = a.invert(b[0] * Hg, b[1] * Hg),
			b[0] *= Ig,
			b[1] *= Ig,
			b
		},
		b
	},
	ic.invert = hc,
	bg.geo.circle = function () {
		function a() {
			var a = "function" == typeof d ? d.apply(this, arguments) : d,
			b = jc(-a[0] * Hg, -a[1] * Hg, 0).invert,
			e = [];
			return c(null, null, 1, {
				point: function (a, c) {
					e.push(a = b(a, c)),
					a[0] *= Ig,
					a[1] *= Ig
				}
			}), {
				type: "Polygon",
				coordinates: [e]
			}
		}
		var b,
		c,
		d = [0, 0],
		e = 6;
		return a.origin = function (b) {
			return arguments.length ? (d = b, a) : d
		},
		a.angle = function (d) {
			return arguments.length ? (c = nc((b = +d) * Hg, e * Hg), a) : b
		},
		a.precision = function (d) {
			return arguments.length ? (c = nc(b * Hg, (e = +d) * Hg), a) : e
		},
		a.angle(90)
	},
	bg.geo.distance = function (a, b) {
		var c,
		d = (b[0] - a[0]) * Hg,
		e = a[1] * Hg,
		f = b[1] * Hg,
		g = Math.sin(d),
		h = Math.cos(d),
		i = Math.sin(e),
		j = Math.cos(e),
		k = Math.sin(f),
		l = Math.cos(f);
		return Math.atan2(Math.sqrt((c = l * g) * c + (c = j * k - i * l * h) * c), i * k + j * l * h)
	},
	bg.geo.graticule = function () {
		function a() {
			return {
				type: "MultiLineString",
				coordinates: b()
			}
		}
		function b() {
			return bg.range(Math.ceil(f / q) * q, e, q).map(m).concat(bg.range(Math.ceil(j / r) * r, i, r).map(n)).concat(bg.range(Math.ceil(d / o) * o, c, o).filter(function (a) {
					return lg(a % q) > Bg
				}).map(k)).concat(bg.range(Math.ceil(h / p) * p, g, p).filter(function (a) {
					return lg(a % r) > Bg
				}).map(l))
		}
		var c,
		d,
		e,
		f,
		g,
		h,
		i,
		j,
		k,
		l,
		m,
		n,
		o = 10,
		p = o,
		q = 90,
		r = 360,
		s = 2.5;
		return a.lines = function () {
			return b().map(function (a) {
				return {
					type: "LineString",
					coordinates: a
				}
			})
		},
		a.outline = function () {
			return {
				type: "Polygon",
				coordinates: [m(f).concat(n(i).slice(1), m(e).reverse().slice(1), n(j).reverse().slice(1))]
			}
		},
		a.extent = function (b) {
			return arguments.length ? a.majorExtent(b).minorExtent(b) : a.minorExtent()
		},
		a.majorExtent = function (b) {
			return arguments.length ? (f = +b[0][0], e = +b[1][0], j = +b[0][1], i = +b[1][1], f > e && (b = f, f = e, e = b), j > i && (b = j, j = i, i = b), a.precision(s)) : [[f, j], [e, i]]
		},
		a.minorExtent = function (b) {
			return arguments.length ? (d = +b[0][0], c = +b[1][0], h = +b[0][1], g = +b[1][1], d > c && (b = d, d = c, c = b), h > g && (b = h, h = g, g = b), a.precision(s)) : [[d, h], [c, g]]
		},
		a.step = function (b) {
			return arguments.length ? a.majorStep(b).minorStep(b) : a.minorStep()
		},
		a.majorStep = function (b) {
			return arguments.length ? (q = +b[0], r = +b[1], a) : [q, r]
		},
		a.minorStep = function (b) {
			return arguments.length ? (o = +b[0], p = +b[1], a) : [o, p]
		},
		a.precision = function (b) {
			return arguments.length ? (s = +b, k = pc(h, g, 90), l = qc(d, c, s), m = pc(j, i, 90), n = qc(f, e, s), a) : s
		},
		a.majorExtent([[-180, -90 + Bg], [180, 90 - Bg]]).minorExtent([[-180, -80 - Bg], [180, 80 + Bg]])
	},
	bg.geo.greatArc = function () {
		function a() {
			return {
				type: "LineString",
				coordinates: [b || d.apply(this, arguments), c || e.apply(this, arguments)]
			}
		}
		var b,
		c,
		d = rc,
		e = sc;
		return a.distance = function () {
			return bg.geo.distance(b || d.apply(this, arguments), c || e.apply(this, arguments))
		},
		a.source = function (c) {
			return arguments.length ? (d = c, b = "function" == typeof c ? null : c, a) : d
		},
		a.target = function (b) {
			return arguments.length ? (e = b, c = "function" == typeof b ? null : b, a) : e
		},
		a.precision = function () {
			return arguments.length ? a : 0
		},
		a
	},
	bg.geo.interpolate = function (a, b) {
		return tc(a[0] * Hg, a[1] * Hg, b[0] * Hg, b[1] * Hg)
	},
	bg.geo.length = function (a) {
		return Ph = 0,
		bg.geo.stream(a, Qh),
		Ph
	};
	var Ph,
	Qh = {
		sphere: v,
		point: v,
		lineStart: uc,
		lineEnd: v,
		polygonStart: v,
		polygonEnd: v
	},
	Rh = vc(function (a) {
			return Math.sqrt(2 / (1 + a))
		}, function (a) {
			return 2 * Math.asin(a / 2)
		});
	(bg.geo.azimuthalEqualArea = function () {
		return ec(Rh)
	}).raw = Rh;
	var Sh = vc(function (a) {
			var b = Math.acos(a);
			return b && b / Math.sin(b)
		}, s);
	(bg.geo.azimuthalEquidistant = function () {
		return ec(Sh)
	}).raw = Sh,
	(bg.geo.conicConformal = function () {
		return Rb(wc)
	}).raw = wc,
	(bg.geo.conicEquidistant = function () {
		return Rb(xc)
	}).raw = xc;
	var Th = vc(function (a) {
			return 1 / a
		}, Math.atan);
	(bg.geo.gnomonic = function () {
		return ec(Th)
	}).raw = Th,
	yc.invert = function (a, b) {
		return [a, 2 * Math.atan(Math.exp(b)) - Gg]
	},
	(bg.geo.mercator = function () {
		return zc(yc)
	}).raw = yc;
	var Uh = vc(function () {
			return 1
		}, Math.asin);
	(bg.geo.orthographic = function () {
		return ec(Uh)
	}).raw = Uh;
	var Vh = vc(function (a) {
			return 1 / (1 + a)
		}, function (a) {
			return 2 * Math.atan(a)
		});
	(bg.geo.stereographic = function () {
		return ec(Vh)
	}).raw = Vh,
	Ac.invert = function (a, b) {
		return [-b, 2 * Math.atan(Math.exp(a)) - Gg]
	},
	(bg.geo.transverseMercator = function () {
		var a = zc(Ac),
		b = a.center,
		c = a.rotate;
		return a.center = function (a) {
			return a ? b([-a[1], a[0]]) : (a = b(), [a[1], -a[0]])
		},
		a.rotate = function (a) {
			return a ? c([a[0], a[1], a.length > 2 ? a[2] + 90 : 90]) : (a = c(), [a[0], a[1], a[2] - 90])
		},
		c([0, 0, 90])
	}).raw = Ac,
	bg.geom = {},
	bg.geom.hull = function (a) {
		function b(a) {
			if (a.length < 3)
				return [];
			var b,
			e = Aa(c),
			f = Aa(d),
			g = a.length,
			h = [],
			i = [];
			for (b = 0; b < g; b++)
				h.push([+e.call(this, a[b], b), +f.call(this, a[b], b), b]);
			for (h.sort(Ec), b = 0; b < g; b++)
				i.push([h[b][0], -h[b][1]]);
			var j = Dc(h),
			k = Dc(i),
			l = k[0] === j[0],
			m = k[k.length - 1] === j[j.length - 1],
			n = [];
			for (b = j.length - 1; b >= 0; --b)
				n.push(a[h[j[b]][2]]);
			for (b = +l; b < k.length - m; ++b)
				n.push(a[h[k[b]][2]]);
			return n
		}
		var c = Bc,
		d = Cc;
		return arguments.length ? b(a) : (b.x = function (a) {
			return arguments.length ? (c = a, b) : c
		}, b.y = function (a) {
			return arguments.length ? (d = a, b) : d
		}, b)
	},
	bg.geom.polygon = function (a) {
		return qg(a, Wh),
		a
	};
	var Wh = bg.geom.polygon.prototype = [];
	Wh.area = function () {
		for (var a, b = -1, c = this.length, d = this[c - 1], e = 0; ++b < c; )
			a = d, d = this[b], e += a[1] * d[0] - a[0] * d[1];
		return .5 * e
	},
	Wh.centroid = function (a) {
		var b,
		c,
		d = -1,
		e = this.length,
		f = 0,
		g = 0,
		h = this[e - 1];
		for (arguments.length || (a = -1 / (6 * this.area())); ++d < e; )
			b = h, h = this[d], c = b[0] * h[1] - h[0] * b[1], f += (b[0] + h[0]) * c, g += (b[1] + h[1]) * c;
		return [f * a, g * a]
	},
	Wh.clip = function (a) {
		for (var b, c, d, e, f, g, h = Hc(a), i = -1, j = this.length - Hc(this), k = this[j - 1]; ++i < j; ) {
			for (b = a.slice(), a.length = 0, e = this[i], f = b[(d = b.length - h) - 1], c = -1; ++c < d; )
				g = b[c], Fc(g, k, e) ? (Fc(f, k, e) || a.push(Gc(f, g, k, e)), a.push(g)) : Fc(f, k, e) && a.push(Gc(f, g, k, e)), f = g;
			h && a.push(a[0]),
			k = e
		}
		return a
	};
	var Xh,
	Yh,
	Zh,
	$h,
	_h,
	ai = [],
	bi = [];
	Pc.prototype.prepare = function () {
		for (var a, b = this.edges, c = b.length; c--; )
			a = b[c].edge, a.b && a.a || b.splice(c, 1);
		return b.sort(Rc),
		b.length
	},
	_c.prototype = {
		start: function () {
			return this.edge.l === this.site ? this.edge.a : this.edge.b
		},
		end: function () {
			return this.edge.l === this.site ? this.edge.b : this.edge.a
		}
	},
	ad.prototype = {
		insert: function (a, b) {
			var c,
			d,
			e;
			if (a) {
				if (b.P = a, b.N = a.N, a.N && (a.N.P = b), a.N = b, a.R) {
					for (a = a.R; a.L; )
						a = a.L;
					a.L = b
				} else
					a.R = b;
				c = a
			} else
				this._ ? (a = ed(this._), b.P = null, b.N = a, a.P = a.L = b, c = a) : (b.P = b.N = null, this._ = b, c = null);
			for (b.L = b.R = null, b.U = c, b.C = !0, a = b; c && c.C; )
				d = c.U, c === d.L ? (e = d.R, e && e.C ? (c.C = e.C = !1, d.C = !0, a = d) : (a === c.R && (cd(this, c), a = c, c = a.U), c.C = !1, d.C = !0, dd(this, d))) : (e = d.L, e && e.C ? (c.C = e.C = !1, d.C = !0, a = d) : (a === c.L && (dd(this, c), a = c, c = a.U), c.C = !1, d.C = !0, cd(this, d))), c = a.U;
			this._.C = !1
		},
		remove: function (a) {
			a.N && (a.N.P = a.P),
			a.P && (a.P.N = a.N),
			a.N = a.P = null;
			var b,
			c,
			d,
			e = a.U,
			f = a.L,
			g = a.R;
			if (c = f ? g ? ed(g) : f : g, e ? e.L === a ? e.L = c : e.R = c : this._ = c, f && g ? (d = c.C, c.C = a.C, c.L = f, f.U = c, c !== g ? (e = c.U, c.U = a.U, a = c.R, e.L = a, c.R = g, g.U = c) : (c.U = e, e = c, a = c.R)) : (d = a.C, a = c), a && (a.U = e), !d) {
				if (a && a.C)
					return void(a.C = !1);
				do {
					if (a === this._)
						break;
					if (a === e.L) {
						if (b = e.R, b.C && (b.C = !1, e.C = !0, cd(this, e), b = e.R), b.L && b.L.C || b.R && b.R.C) {
							b.R && b.R.C || (b.L.C = !1, b.C = !0, dd(this, b), b = e.R),
							b.C = e.C,
							e.C = b.R.C = !1,
							cd(this, e),
							a = this._;
							break
						}
					} else if (b = e.L, b.C && (b.C = !1, e.C = !0, dd(this, e), b = e.L), b.L && b.L.C || b.R && b.R.C) {
						b.L && b.L.C || (b.R.C = !1, b.C = !0, cd(this, b), b = e.L),
						b.C = e.C,
						e.C = b.L.C = !1,
						dd(this, e),
						a = this._;
						break;
					}
					b.C = !0,
					a = e,
					e = e.U
				} while (!a.C);
				a && (a.C = !1)
			}
		}
	},
	bg.geom.voronoi = function (a) {
		function b(a) {
			var b = new Array(a.length),
			d = h[0][0],
			e = h[0][1],
			f = h[1][0],
			g = h[1][1];
			return fd(c(a), h).cells.forEach(function (c, h) {
				var i = c.edges,
				j = c.site,
				k = b[h] = i.length ? i.map(function (a) {
						var b = a.start();
						return [b.x, b.y]
					}) : j.x >= d && j.x <= f && j.y >= e && j.y <= g ? [[d, g], [f, g], [f, e], [d, e]] : [];
				k.point = a[h]
			}),
			b
		}
		function c(a) {
			return a.map(function (a, b) {
				return {
					x: Math.round(f(a, b) / Bg) * Bg,
					y: Math.round(g(a, b) / Bg) * Bg,
					i: b
				}
			})
		}
		var d = Bc,
		e = Cc,
		f = d,
		g = e,
		h = ci;
		return a ? b(a) : (b.links = function (a) {
			return fd(c(a)).edges.filter(function (a) {
				return a.l && a.r
			}).map(function (b) {
				return {
					source: a[b.l.i],
					target: a[b.r.i]
				}
			})
		}, b.triangles = function (a) {
			var b = [];
			return fd(c(a)).cells.forEach(function (c, d) {
				for (var e, f, g = c.site, h = c.edges.sort(Rc), i = -1, j = h.length, k = h[j - 1].edge, l = k.l === g ? k.r : k.l; ++i < j; )
					e = k, f = l, k = h[i].edge, l = k.l === g ? k.r : k.l, d < f.i && d < l.i && hd(g, f, l) < 0 && b.push([a[d], a[f.i], a[l.i]])
			}),
			b
		}, b.x = function (a) {
			return arguments.length ? (f = Aa(d = a), b) : d
		}, b.y = function (a) {
			return arguments.length ? (g = Aa(e = a), b) : e
		}, b.clipExtent = function (a) {
			return arguments.length ? (h = null == a ? ci : a, b) : h === ci ? null : h
		}, b.size = function (a) {
			return arguments.length ? b.clipExtent(a && [[0, 0], a]) : h === ci ? null : h && h[1]
		}, b)
	};
	var ci = [[-1e6, -1e6], [1e6, 1e6]];
	bg.geom.delaunay = function (a) {
		return bg.geom.voronoi().triangles(a)
	},
	bg.geom.quadtree = function (a, b, c, d, e) {
		function f(a) {
			function f(a, b, c, d, e, f, g, h) {
				if (!isNaN(c) && !isNaN(d))
					if (a.leaf) {
						var i = a.x,
						k = a.y;
						if (null != i)
							if (lg(i - c) + lg(k - d) < .01)
								j(a, b, c, d, e, f, g, h);
							else {
								var l = a.point;
								a.x = a.y = a.point = null,
								j(a, l, i, k, e, f, g, h),
								j(a, b, c, d, e, f, g, h)
							}
						else
							a.x = c, a.y = d, a.point = b
					} else
						j(a, b, c, d, e, f, g, h)
			}
			function j(a, b, c, d, e, g, h, i) {
				var j = .5 * (e + h),
				k = .5 * (g + i),
				l = c >= j,
				m = d >= k,
				n = m << 1 | l;
				a.leaf = !1,
				a = a.nodes[n] || (a.nodes[n] = kd()),
				l ? e = j : h = j,
				m ? g = k : i = k,
				f(a, b, c, d, e, g, h, i)
			}
			var k,
			l,
			m,
			n,
			o,
			p,
			q,
			r,
			s,
			t = Aa(h),
			u = Aa(i);
			if (null != b)
				p = b, q = c, r = d, s = e;
			else if (r = s =  - (p = q = 1 / 0), l = [], m = [], o = a.length, g)
				for (n = 0; n < o; ++n)
					k = a[n], k.x < p && (p = k.x), k.y < q && (q = k.y), k.x > r && (r = k.x), k.y > s && (s = k.y), l.push(k.x), m.push(k.y);
			else
				for (n = 0; n < o; ++n) {
					var v = +t(k = a[n], n),
					w = +u(k, n);
					v < p && (p = v),
					w < q && (q = w),
					v > r && (r = v),
					w > s && (s = w),
					l.push(v),
					m.push(w)
				}
			var x = r - p,
			y = s - q;
			x > y ? s = q + x : r = p + y;
			var z = kd();
			if (z.add = function (a) {
				f(z, a, +t(a, ++n), +u(a, n), p, q, r, s)
			}, z.visit = function (a) {
				ld(a, z, p, q, r, s)
			}, z.find = function (a) {
				return md(z, a[0], a[1], p, q, r, s)
			}, n = -1, null == b) {
				for (; ++n < o; )
					f(z, a[n], l[n], m[n], p, q, r, s);
				--n
			} else
				a.forEach(z.add);
			return l = m = a = k = null,
			z
		}
		var g,
		h = Bc,
		i = Cc;
		return (g = arguments.length) ? (h = id, i = jd, 3 === g && (e = c, d = b, c = b = 0), f(a)) : (f.x = function (a) {
			return arguments.length ? (h = a, f) : h
		}, f.y = function (a) {
			return arguments.length ? (i = a, f) : i
		}, f.extent = function (a) {
			return arguments.length ? (null == a ? b = c = d = e = null : (b = +a[0][0], c = +a[0][1], d = +a[1][0], e = +a[1][1]), f) : null == b ? null : [[b, c], [d, e]]
		}, f.size = function (a) {
			return arguments.length ? (null == a ? b = c = d = e = null : (b = c = 0, d = +a[0], e = +a[1]), f) : null == b ? null : [d - b, e - c]
		}, f)
	},
	bg.interpolateRgb = nd,
	bg.interpolateObject = od,
	bg.interpolateNumber = pd,
	bg.interpolateString = qd;
	var di = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
	ei = new RegExp(di.source, "g");
	bg.interpolate = rd,
	bg.interpolators = [function (a, b) {
			var c = typeof b;
			return ("string" === c ? Xg.has(b) || /^(#|rgb\(|hsl\()/.test(b) ? nd : qd : b instanceof ga ? nd : Array.isArray(b) ? sd : "object" === c && isNaN(b) ? od : pd)(a, b)
		}
	],
	bg.interpolateArray = sd;
	var fi = function () {
		return s
	},
	gi = bg.map({
			linear: fi,
			poly: zd,
			quad: function () {
				return wd
			},
			cubic: function () {
				return xd
			},
			sin: function () {
				return Ad
			},
			exp: function () {
				return Bd
			},
			circle: function () {
				return Cd
			},
			elastic: Dd,
			back: Ed,
			bounce: function () {
				return Fd
			}
		}),
	hi = bg.map({
			in: s,
			out: ud,
			"in-out": vd,
			"out-in": function (a) {
				return vd(ud(a))
			}
		});
	bg.ease = function (a) {
		var b = a.indexOf("-"),
		c = b >= 0 ? a.slice(0, b) : a,
		d = b >= 0 ? a.slice(b + 1) : "in";
		return c = gi.get(c) || fi,
		d = hi.get(d) || s,
		td(d(c.apply(null, cg.call(arguments, 1))))
	},
	bg.interpolateHcl = Gd,
	bg.interpolateHsl = Hd,
	bg.interpolateLab = Id,
	bg.interpolateRound = Jd,
	bg.transform = function (a) {
		var b = eg.createElementNS(bg.ns.prefix.svg, "g");
		return (bg.transform = function (a) {
			if (null != a) {
				b.setAttribute("transform", a);
				var c = b.transform.baseVal.consolidate()
			}
			return new Kd(c ? c.matrix : ii)
		})(a)
	},
	Kd.prototype.toString = function () {
		return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
	};
	var ii = {
		a: 1,
		b: 0,
		c: 0,
		d: 1,
		e: 0,
		f: 0
	};
	bg.interpolateTransform = Od,
	bg.layout = {},
	bg.layout.bundle = function () {
		return function (a) {
			for (var b = [], c = -1, d = a.length; ++c < d; )
				b.push(Rd(a[c]));
			return b
		}
	},
	bg.layout.chord = function () {
		function a() {
			var a,
			j,
			l,
			m,
			n,
			o = {},
			p = [],
			q = bg.range(f),
			r = [];
			for (c = [], d = [], a = 0, m = -1; ++m < f; ) {
				for (j = 0, n = -1; ++n < f; )
					j += e[m][n];
				p.push(j),
				r.push(bg.range(f)),
				a += j
			}
			for (g && q.sort(function (a, b) {
					return g(p[a], p[b])
				}), h && r.forEach(function (a, b) {
					a.sort(function (a, c) {
						return h(e[b][a], e[b][c])
					})
				}), a = (Eg - k * f) / a, j = 0, m = -1; ++m < f; ) {
				for (l = j, n = -1; ++n < f; ) {
					var s = q[m],
					t = r[s][n],
					u = e[s][t],
					v = j,
					w = j += u * a;
					o[s + "-" + t] = {
						index: s,
						subindex: t,
						startAngle: v,
						endAngle: w,
						value: u
					}
				}
				d[s] = {
					index: s,
					startAngle: l,
					endAngle: j,
					value: (j - l) / a
				},
				j += k
			}
			for (m = -1; ++m < f; )
				for (n = m - 1; ++n < f; ) {
					var x = o[m + "-" + n],
					y = o[n + "-" + m];
					(x.value || y.value) && c.push(x.value < y.value ? {
						source: y,
						target: x
					}
						 : {
						source: x,
						target: y
					})
				}
			i && b()
		}
		function b() {
			c.sort(function (a, b) {
				return i((a.source.value + a.target.value) / 2, (b.source.value + b.target.value) / 2)
			})
		}
		var c,
		d,
		e,
		f,
		g,
		h,
		i,
		j = {},
		k = 0;
		return j.matrix = function (a) {
			return arguments.length ? (f = (e = a) && e.length, c = d = null, j) : e
		},
		j.padding = function (a) {
			return arguments.length ? (k = a, c = d = null, j) : k
		},
		j.sortGroups = function (a) {
			return arguments.length ? (g = a, c = d = null, j) : g
		},
		j.sortSubgroups = function (a) {
			return arguments.length ? (h = a, c = null, j) : h
		},
		j.sortChords = function (a) {
			return arguments.length ? (i = a, c && b(), j) : i
		},
		j.chords = function () {
			return c || a(),
			c
		},
		j.groups = function () {
			return d || a(),
			d
		},
		j
	},
	bg.layout.force = function () {
		function a(a) {
			return function (b, c, d, e) {
				if (b.point !== a) {
					var f = b.cx - a.x,
					g = b.cy - a.y,
					h = e - c,
					i = f * f + g * g;
					if (h * h / q < i) {
						if (i < o) {
							var j = b.charge / i;
							a.px -= f * j,
							a.py -= g * j
						}
						return !0
					}
					if (b.point && i && i < o) {
						var j = b.pointCharge / i;
						a.px -= f * j,
						a.py -= g * j
					}
				}
				return !b.charge
			}
		}
		function b(a) {
			a.px = bg.event.x,
			a.py = bg.event.y,
			h.resume()
		}
		var c,
		d,
		e,
		f,
		g,
		h = {},
		i = bg.dispatch("start", "tick", "end"),
		j = [1, 1],
		k = .9,
		l = ji,
		m = ki,
		n = -30,
		o = li,
		p = .1,
		q = .64,
		r = [],
		t = [];
		return h.tick = function () {
			if ((d *= .99) < .005)
				return i.end({
					type: "end",
					alpha: d = 0
				}), !0;
			var b,
			c,
			h,
			l,
			m,
			o,
			q,
			s,
			u,
			v = r.length,
			w = t.length;
			for (c = 0; c < w; ++c)
				h = t[c], l = h.source, m = h.target, s = m.x - l.x, u = m.y - l.y, (o = s * s + u * u) && (o = d * f[c] * ((o = Math.sqrt(o)) - e[c]) / o, s *= o, u *= o, m.x -= s * (q = l.weight / (m.weight + l.weight)), m.y -= u * q, l.x += s * (q = 1 - q), l.y += u * q);
			if ((q = d * p) && (s = j[0] / 2, u = j[1] / 2, c = -1, q))
				for (; ++c < v; )
					h = r[c], h.x += (s - h.x) * q, h.y += (u - h.y) * q;
			if (n)
				for (Yd(b = bg.geom.quadtree(r), d, g), c = -1; ++c < v; )
					(h = r[c]).fixed || b.visit(a(h));
			for (c = -1; ++c < v; )
				h = r[c], h.fixed ? (h.x = h.px, h.y = h.py) : (h.x -= (h.px - (h.px = h.x)) * k, h.y -= (h.py - (h.py = h.y)) * k);
			i.tick({
				type: "tick",
				alpha: d
			})
		},
		h.nodes = function (a) {
			return arguments.length ? (r = a, h) : r
		},
		h.links = function (a) {
			return arguments.length ? (t = a, h) : t
		},
		h.size = function (a) {
			return arguments.length ? (j = a, h) : j
		},
		h.linkDistance = function (a) {
			return arguments.length ? (l = "function" == typeof a ? a : +a, h) : l
		},
		h.distance = h.linkDistance,
		h.linkStrength = function (a) {
			return arguments.length ? (m = "function" == typeof a ? a : +a, h) : m
		},
		h.friction = function (a) {
			return arguments.length ? (k = +a, h) : k
		},
		h.charge = function (a) {
			return arguments.length ? (n = "function" == typeof a ? a : +a, h) : n
		},
		h.chargeDistance = function (a) {
			return arguments.length ? (o = a * a, h) : Math.sqrt(o)
		},
		h.gravity = function (a) {
			return arguments.length ? (p = +a, h) : p
		},
		h.theta = function (a) {
			return arguments.length ? (q = a * a, h) : Math.sqrt(q)
		},
		h.alpha = function (a) {
			return arguments.length ? (a = +a, d ? d = a > 0 ? a : 0 : a > 0 && (i.start({
							type: "start",
							alpha: d = a
						}), bg.timer(h.tick)), h) : d
		},
		h.start = function () {
			function a(a, d) {
				if (!c) {
					for (c = new Array(i), h = 0; h < i; ++h)
						c[h] = [];
					for (h = 0; h < k; ++h) {
						var e = t[h];
						c[e.source.index].push(e.target),
						c[e.target.index].push(e.source)
					}
				}
				for (var f, g = c[b], h = -1, j = g.length; ++h < j; )
					if (!isNaN(f = g[h][a]))
						return f;
				return Math.random() * d
			}
			var b,
			c,
			d,
			i = r.length,
			k = t.length,
			o = j[0],
			p = j[1];
			for (b = 0; b < i; ++b)
				(d = r[b]).index = b, d.weight = 0;
			for (b = 0; b < k; ++b)
				d = t[b], "number" == typeof d.source && (d.source = r[d.source]), "number" == typeof d.target && (d.target = r[d.target]), ++d.source.weight, ++d.target.weight;
			for (b = 0; b < i; ++b)
				d = r[b], isNaN(d.x) && (d.x = a("x", o)), isNaN(d.y) && (d.y = a("y", p)), isNaN(d.px) && (d.px = d.x), isNaN(d.py) && (d.py = d.y);
			if (e = [], "function" == typeof l)
				for (b = 0; b < k; ++b)
					e[b] = +l.call(this, t[b], b);
			else
				for (b = 0; b < k; ++b)
					e[b] = l;
			if (f = [], "function" == typeof m)
				for (b = 0; b < k; ++b)
					f[b] = +m.call(this, t[b], b);
			else
				for (b = 0; b < k; ++b)
					f[b] = m;
			if (g = [], "function" == typeof n)
				for (b = 0; b < i; ++b)
					g[b] = +n.call(this, r[b], b);
			else
				for (b = 0; b < i; ++b)
					g[b] = n;
			return h.resume()
		},
		h.resume = function () {
			return h.alpha(.1)
		},
		h.stop = function () {
			return h.alpha(0)
		},
		h.drag = function () {
			return c || (c = bg.behavior.drag().origin(s).on("dragstart.force", Ud).on("drag.force", b).on("dragend.force", Vd)),
			arguments.length ? void this.on("mouseover.force", Wd).on("mouseout.force", Xd).call(c) : c
		},
		bg.rebind(h, i, "on")
	};
	var ji = 20,
	ki = 1,
	li = 1 / 0;
	bg.layout.hierarchy = function () {
		function a(e) {
			var f,
			g = [e],
			h = [];
			for (e.depth = 0; null != (f = g.pop()); )
				if (h.push(f), (j = c.call(a, f, f.depth)) && (i = j.length)) {
					for (var i, j, k; --i >= 0; )
						g.push(k = j[i]), k.parent = f, k.depth = f.depth + 1;
					d && (f.value = 0),
					f.children = j
				} else
					d && (f.value = +d.call(a, f, f.depth) || 0), delete f.children;
			return _d(e, function (a) {
				var c,
				e;
				b && (c = a.children) && c.sort(b),
				d && (e = a.parent) && (e.value += a.value)
			}),
			h
		}
		var b = ce,
		c = ae,
		d = be;
		return a.sort = function (c) {
			return arguments.length ? (b = c, a) : b
		},
		a.children = function (b) {
			return arguments.length ? (c = b, a) : c
		},
		a.value = function (b) {
			return arguments.length ? (d = b, a) : d
		},
		a.revalue = function (b) {
			return d && ($d(b, function (a) {
					a.children && (a.value = 0)
				}), _d(b, function (b) {
					var c;
					b.children || (b.value = +d.call(a, b, b.depth) || 0),
					(c = b.parent) && (c.value += b.value)
				})),
			b
		},
		a
	},
	bg.layout.partition = function () {
		function a(b, c, d, e) {
			var f = b.children;
			if (b.x = c, b.y = b.depth * e, b.dx = d, b.dy = e, f && (g = f.length)) {
				var g,
				h,
				i,
				j = -1;
				for (d = b.value ? d / b.value : 0; ++j < g; )
					a(h = f[j], c, i = h.value * d, e), c += i
			}
		}
		function b(a) {
			var c = a.children,
			d = 0;
			if (c && (e = c.length))
				for (var e, f = -1; ++f < e; )
					d = Math.max(d, b(c[f]));
			return 1 + d
		}
		function c(c, f) {
			var g = d.call(this, c, f);
			return a(g[0], 0, e[0], e[1] / b(g[0])),
			g
		}
		var d = bg.layout.hierarchy(),
		e = [1, 1];
		return c.size = function (a) {
			return arguments.length ? (e = a, c) : e
		},
		Zd(c, d)
	},
	bg.layout.pie = function () {
		function a(g) {
			var h,
			i = g.length,
			j = g.map(function (c, d) {
					return +b.call(a, c, d)
				}),
			k =  + ("function" == typeof d ? d.apply(this, arguments) : d),
			l = ("function" == typeof e ? e.apply(this, arguments) : e) - k,
			m = Math.min(Math.abs(l) / i,  + ("function" == typeof f ? f.apply(this, arguments) : f)),
			n = m * (l < 0 ? -1 : 1),
			o = (l - i * n) / bg.sum(j),
			p = bg.range(i),
			q = [];
			return null != c && p.sort(c === mi ? function (a, b) {
				return j[b] - j[a]
			}
				 : function (a, b) {
				return c(g[a], g[b])
			}),
			p.forEach(function (a) {
				q[a] = {
					data: g[a],
					value: h = j[a],
					startAngle: k,
					endAngle: k += h * o + n,
					padAngle: m
				}
			}),
			q
		}
		var b = Number,
		c = mi,
		d = 0,
		e = Eg,
		f = 0;
		return a.value = function (c) {
			return arguments.length ? (b = c, a) : b
		},
		a.sort = function (b) {
			return arguments.length ? (c = b, a) : c
		},
		a.startAngle = function (b) {
			return arguments.length ? (d = b, a) : d
		},
		a.endAngle = function (b) {
			return arguments.length ? (e = b, a) : e
		},
		a.padAngle = function (b) {
			return arguments.length ? (f = b, a) : f
		},
		a
	};
	var mi = {};
	bg.layout.stack = function () {
		function a(h, i) {
			if (!(m = h.length))
				return h;
			var j = h.map(function (c, d) {
					return b.call(a, c, d)
				}),
			k = j.map(function (b) {
					return b.map(function (b, c) {
						return [f.call(a, b, c), g.call(a, b, c)]
					})
				}),
			l = c.call(a, k, i);
			j = bg.permute(j, l),
			k = bg.permute(k, l);
			var m,
			n,
			o,
			p,
			q = d.call(a, k, i),
			r = j[0].length;
			for (o = 0; o < r; ++o)
				for (e.call(a, j[0][o], p = q[o], k[0][o][1]), n = 1; n < m; ++n)
					e.call(a, j[n][o], p += k[n - 1][o][1], k[n][o][1]);
			return h
		}
		var b = s,
		c = he,
		d = ie,
		e = ge,
		f = ee,
		g = fe;
		return a.values = function (c) {
			return arguments.length ? (b = c, a) : b
		},
		a.order = function (b) {
			return arguments.length ? (c = "function" == typeof b ? b : ni.get(b) || he, a) : c
		},
		a.offset = function (b) {
			return arguments.length ? (d = "function" == typeof b ? b : oi.get(b) || ie, a) : d
		},
		a.x = function (b) {
			return arguments.length ? (f = b, a) : f
		},
		a.y = function (b) {
			return arguments.length ? (g = b, a) : g
		},
		a.out = function (b) {
			return arguments.length ? (e = b, a) : e
		},
		a
	};
	var ni = bg.map({
			"inside-out": function (a) {
				var b,
				c,
				d = a.length,
				e = a.map(je),
				f = a.map(ke),
				g = bg.range(d).sort(function (a, b) {
						return e[a] - e[b]
					}),
				h = 0,
				i = 0,
				j = [],
				k = [];
				for (b = 0; b < d; ++b)
					c = g[b], h < i ? (h += f[c], j.push(c)) : (i += f[c], k.push(c));
				return k.reverse().concat(j)
			},
			reverse: function (a) {
				return bg.range(a.length).reverse()
			},
		default:
			he
		}),
	oi = bg.map({
			silhouette: function (a) {
				var b,
				c,
				d,
				e = a.length,
				f = a[0].length,
				g = [],
				h = 0,
				i = [];
				for (c = 0; c < f; ++c) {
					for (b = 0, d = 0; b < e; b++)
						d += a[b][c][1];
					d > h && (h = d),
					g.push(d)
				}
				for (c = 0; c < f; ++c)
					i[c] = (h - g[c]) / 2;
				return i
			},
			wiggle: function (a) {
				var b,
				c,
				d,
				e,
				f,
				g,
				h,
				i,
				j,
				k = a.length,
				l = a[0],
				m = l.length,
				n = [];
				for (n[0] = i = j = 0, c = 1; c < m; ++c) {
					for (b = 0, e = 0; b < k; ++b)
						e += a[b][c][1];
					for (b = 0, f = 0, h = l[c][0] - l[c - 1][0]; b < k; ++b) {
						for (d = 0, g = (a[b][c][1] - a[b][c - 1][1]) / (2 * h); d < b; ++d)
							g += (a[d][c][1] - a[d][c - 1][1]) / h;
						f += g * a[b][c][1]
					}
					n[c] = i -= e ? f / e * h : 0,
					i < j && (j = i)
				}
				for (c = 0; c < m; ++c)
					n[c] -= j;
				return n
			},
			expand: function (a) {
				var b,
				c,
				d,
				e = a.length,
				f = a[0].length,
				g = 1 / e,
				h = [];
				for (c = 0; c < f; ++c) {
					for (b = 0, d = 0; b < e; b++)
						d += a[b][c][1];
					if (d)
						for (b = 0; b < e; b++)
							a[b][c][1] /= d;
					else
						for (b = 0; b < e; b++)
							a[b][c][1] = g
				}
				for (c = 0; c < f; ++c)
					h[c] = 0;
				return h
			},
			zero: ie
		});
	bg.layout.histogram = function () {
		function a(a, f) {
			for (var g, h, i = [], j = a.map(c, this), k = d.call(this, j, f), l = e.call(this, k, j, f), f = -1, m = j.length, n = l.length - 1, o = b ? 1 : 1 / m; ++f < n; )
				g = i[f] = [], g.dx = l[f + 1] - (g.x = l[f]), g.y = 0;
			if (n > 0)
				for (f = -1; ++f < m; )
					h = j[f], h >= k[0] && h <= k[1] && (g = i[bg.bisect(l, h, 1, n) - 1], g.y += o, g.push(a[f]));
			return i
		}
		var b = !0,
		c = Number,
		d = oe,
		e = me;
		return a.value = function (b) {
			return arguments.length ? (c = b, a) : c
		},
		a.range = function (b) {
			return arguments.length ? (d = Aa(b), a) : d
		},
		a.bins = function (b) {
			return arguments.length ? (e = "number" == typeof b ? function (a) {
				return ne(a, b)
			}
				 : Aa(b), a) : e
		},
		a.frequency = function (c) {
			return arguments.length ? (b = !!c, a) : b
		},
		a
	},
	bg.layout.pack = function () {
		function a(a, f) {
			var g = c.call(this, a, f),
			h = g[0],
			i = e[0],
			j = e[1],
			k = null == b ? Math.sqrt : "function" == typeof b ? b : function () {
				return b
			};
			if (h.x = h.y = 0, _d(h, function (a) {
					a.r = +k(a.value)
				}), _d(h, te), d) {
				var l = d * (b ? 1 : Math.max(2 * h.r / i, 2 * h.r / j)) / 2;
				_d(h, function (a) {
					a.r += l
				}),
				_d(h, te),
				_d(h, function (a) {
					a.r -= l
				})
			}
			return we(h, i / 2, j / 2, b ? 1 : 1 / Math.max(2 * h.r / i, 2 * h.r / j)),
			g
		}
		var b,
		c = bg.layout.hierarchy().sort(pe),
		d = 0,
		e = [1, 1];
		return a.size = function (b) {
			return arguments.length ? (e = b, a) : e
		},
		a.radius = function (c) {
			return arguments.length ? (b = null == c || "function" == typeof c ? c : +c, a) : b
		},
		a.padding = function (b) {
			return arguments.length ? (d = +b, a) : d
		},
		Zd(a, c)
	},
	bg.layout.tree = function () {
		function a(a, e) {
			var k = g.call(this, a, e),
			l = k[0],
			m = b(l);
			if (_d(m, c), m.parent.m = -m.z, $d(m, d), j)
				$d(l, f);
			else {
				var n = l,
				o = l,
				p = l;
				$d(l, function (a) {
					a.x < n.x && (n = a),
					a.x > o.x && (o = a),
					a.depth > p.depth && (p = a)
				});
				var q = h(n, o) / 2 - n.x,
				r = i[0] / (o.x + h(o, n) / 2 + q),
				s = i[1] / (p.depth || 1);
				$d(l, function (a) {
					a.x = (a.x + q) * r,
					a.y = a.depth * s
				})
			}
			return k
		}
		function b(a) {
			for (var b, c = {
					A: null,
					children: [a]
				}, d = [c]; null != (b = d.pop()); )
				for (var e, f = b.children, g = 0, h = f.length; g < h; ++g)
					d.push((f[g] = e = {
								_: f[g],
								parent: b,
								children: (e = f[g].children) && e.slice() || [],
								A: null,
								a: null,
								z: 0,
								m: 0,
								c: 0,
								s: 0,
								t: null,
								i: g
							}).a = e);
			return c.children[0]
		}
		function c(a) {
			var b = a.children,
			c = a.parent.children,
			d = a.i ? c[a.i - 1] : null;
			if (b.length) {
				Ce(a);
				var f = (b[0].z + b[b.length - 1].z) / 2;
				d ? (a.z = d.z + h(a._, d._), a.m = a.z - f) : a.z = f
			} else
				d && (a.z = d.z + h(a._, d._));
			a.parent.A = e(a, d, a.parent.A || c[0])
		}
		function d(a) {
			a._.x = a.z + a.parent.m,
			a.m += a.parent.m
		}
		function e(a, b, c) {
			if (b) {
				for (var d, e = a, f = a, g = b, i = e.parent.children[0], j = e.m, k = f.m, l = g.m, m = i.m; g = Ae(g), e = ze(e), g && e; )
					i = ze(i), f = Ae(f), f.a = a, d = g.z + l - e.z - j + h(g._, e._), d > 0 && (Be(De(g, a, c), a, d), j += d, k += d), l += g.m, j += e.m, m += i.m, k += f.m;
				g && !Ae(f) && (f.t = g, f.m += l - k),
				e && !ze(i) && (i.t = e, i.m += j - m, c = a)
			}
			return c
		}
		function f(a) {
			a.x *= i[0],
			a.y = a.depth * i[1]
		}
		var g = bg.layout.hierarchy().sort(null).value(null),
		h = ye,
		i = [1, 1],
		j = null;
		return a.separation = function (b) {
			return arguments.length ? (h = b, a) : h
		},
		a.size = function (b) {
			return arguments.length ? (j = null == (i = b) ? f : null, a) : j ? null : i
		},
		a.nodeSize = function (b) {
			return arguments.length ? (j = null == (i = b) ? null : f, a) : j ? i : null
		},
		Zd(a, g)
	},
	bg.layout.cluster = function () {
		function a(a, f) {
			var g,
			h = b.call(this, a, f),
			i = h[0],
			j = 0;
			_d(i, function (a) {
				var b = a.children;
				b && b.length ? (a.x = Fe(b), a.y = Ee(b)) : (a.x = g ? j += c(a, g) : 0, a.y = 0, g = a)
			});
			var k = Ge(i),
			l = He(i),
			m = k.x - c(k, l) / 2,
			n = l.x + c(l, k) / 2;
			return _d(i, e ? function (a) {
				a.x = (a.x - i.x) * d[0],
				a.y = (i.y - a.y) * d[1]
			}
				 : function (a) {
				a.x = (a.x - m) / (n - m) * d[0],
				a.y = (1 - (i.y ? a.y / i.y : 1)) * d[1]
			}),
			h
		}
		var b = bg.layout.hierarchy().sort(null).value(null),
		c = ye,
		d = [1, 1],
		e = !1;
		return a.separation = function (b) {
			return arguments.length ? (c = b, a) : c
		},
		a.size = function (b) {
			return arguments.length ? (e = null == (d = b), a) : e ? null : d
		},
		a.nodeSize = function (b) {
			return arguments.length ? (e = null != (d = b), a) : e ? d : null
		},
		Zd(a, b)
	},
	bg.layout.treemap = function () {
		function a(a, b) {
			for (var c, d, e = -1, f = a.length; ++e < f; )
				d = (c = a[e]).value * (b < 0 ? 0 : b), c.area = isNaN(d) || d <= 0 ? 0 : d
		}
		function b(c) {
			var f = c.children;
			if (f && f.length) {
				var g,
				h,
				i,
				j = l(c),
				k = [],
				m = f.slice(),
				o = 1 / 0,
				p = "slice" === n ? j.dx : "dice" === n ? j.dy : "slice-dice" === n ? 1 & c.depth ? j.dy : j.dx : Math.min(j.dx, j.dy);
				for (a(m, j.dx * j.dy / c.value), k.area = 0; (i = m.length) > 0; )
					k.push(g = m[i - 1]), k.area += g.area, "squarify" !== n || (h = d(k, p)) <= o ? (m.pop(), o = h) : (k.area -= k.pop().area, e(k, p, j, !1), p = Math.min(j.dx, j.dy), k.length = k.area = 0, o = 1 / 0);
				k.length && (e(k, p, j, !0), k.length = k.area = 0),
				f.forEach(b)
			}
		}
		function c(b) {
			var d = b.children;
			if (d && d.length) {
				var f,
				g = l(b),
				h = d.slice(),
				i = [];
				for (a(h, g.dx * g.dy / b.value), i.area = 0; f = h.pop(); )
					i.push(f), i.area += f.area, null != f.z && (e(i, f.z ? g.dx : g.dy, g, !h.length), i.length = i.area = 0);
				d.forEach(c)
			}
		}
		function d(a, b) {
			for (var c, d = a.area, e = 0, f = 1 / 0, g = -1, h = a.length; ++g < h; )
				(c = a[g].area) && (c < f && (f = c), c > e && (e = c));
			return d *= d,
			b *= b,
			d ? Math.max(b * e * o / d, d / (b * f * o)) : 1 / 0
		}
		function e(a, b, c, d) {
			var e,
			f = -1,
			g = a.length,
			h = c.x,
			j = c.y,
			k = b ? i(a.area / b) : 0;
			if (b == c.dx) {
				for ((d || k > c.dy) && (k = c.dy); ++f < g; )
					e = a[f], e.x = h, e.y = j, e.dy = k, h += e.dx = Math.min(c.x + c.dx - h, k ? i(e.area / k) : 0);
				e.z = !0,
				e.dx += c.x + c.dx - h,
				c.y += k,
				c.dy -= k
			} else {
				for ((d || k > c.dx) && (k = c.dx); ++f < g; )
					e = a[f], e.x = h, e.y = j, e.dx = k, j += e.dy = Math.min(c.y + c.dy - j, k ? i(e.area / k) : 0);
				e.z = !1,
				e.dy += c.y + c.dy - j,
				c.x += k,
				c.dx -= k
			}
		}
		function f(d) {
			var e = g || h(d),
			f = e[0];
			return f.x = 0,
			f.y = 0,
			f.dx = j[0],
			f.dy = j[1],
			g && h.revalue(f),
			a([f], f.dx * f.dy / f.value),
			(g ? c : b)(f),
			m && (g = e),
			e
		}
		var g,
		h = bg.layout.hierarchy(),
		i = Math.round,
		j = [1, 1],
		k = null,
		l = Ie,
		m = !1,
		n = "squarify",
		o = .5 * (1 + Math.sqrt(5));
		return f.size = function (a) {
			return arguments.length ? (j = a, f) : j
		},
		f.padding = function (a) {
			function b(b) {
				var c = a.call(f, b, b.depth);
				return null == c ? Ie(b) : Je(b, "number" == typeof c ? [c, c, c, c] : c)
			}
			function c(b) {
				return Je(b, a)
			}
			if (!arguments.length)
				return k;
			var d;
			return l = null == (k = a) ? Ie : "function" == (d = typeof a) ? b : "number" === d ? (a = [a, a, a, a], c) : c,
			f
		},
		f.round = function (a) {
			return arguments.length ? (i = a ? Math.round : Number, f) : i != Number
		},
		f.sticky = function (a) {
			return arguments.length ? (m = a, g = null, f) : m
		},
		f.ratio = function (a) {
			return arguments.length ? (o = a, f) : o
		},
		f.mode = function (a) {
			return arguments.length ? (n = a + "", f) : n
		},
		Zd(f, h)
	},
	bg.random = {
		normal: function (a, b) {
			var c = arguments.length;
			return c < 2 && (b = 1),
			c < 1 && (a = 0),
			function () {
				var c,
				d,
				e;
				do
					c = 2 * Math.random() - 1, d = 2 * Math.random() - 1, e = c * c + d * d;
				while (!e || e > 1);
				return a + b * c * Math.sqrt(-2 * Math.log(e) / e)
			}
		},
		logNormal: function () {
			var a = bg.random.normal.apply(bg, arguments);
			return function () {
				return Math.exp(a())
			}
		},
		bates: function (a) {
			var b = bg.random.irwinHall(a);
			return function () {
				return b() / a
			}
		},
		irwinHall: function (a) {
			return function () {
				for (var b = 0, c = 0; c < a; c++)
					b += Math.random();
				return b
			}
		}
	},
	bg.scale = {};
	var pi = {
		floor: s,
		ceil: s
	};
	bg.scale.linear = function () {
		return Qe([0, 1], [0, 1], rd, !1)
	};
	var qi = {
		s: 1,
		g: 1,
		p: 1,
		r: 1,
		e: 1
	};
	bg.scale.log = function () {
		return Ye(bg.scale.linear().domain([0, 1]), 10, !0, [1, 10])
	};
	var ri = bg.format(".0e"),
	si = {
		floor: function (a) {
			return -Math.ceil(-a)
		},
		ceil: function (a) {
			return -Math.floor(-a)
		}
	};
	bg.scale.pow = function () {
		return Ze(bg.scale.linear(), 1, [0, 1])
	},
	bg.scale.sqrt = function () {
		return bg.scale.pow().exponent(.5)
	},
	bg.scale.ordinal = function () {
		return _e([], {
			t: "range",
			a: [[]]
		})
	},
	bg.scale.category10 = function () {
		return bg.scale.ordinal().range(ti)
	},
	bg.scale.category20 = function () {
		return bg.scale.ordinal().range(ui)
	},
	bg.scale.category20b = function () {
		return bg.scale.ordinal().range(vi)
	},
	bg.scale.category20c = function () {
		return bg.scale.ordinal().range(wi)
	};
	var ti = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(ta),
	ui = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(ta),
	vi = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(ta),
	wi = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(ta);
	bg.scale.quantile = function () {
		return af([], [])
	},
	bg.scale.quantize = function () {
		return bf(0, 1, [0, 1])
	},
	bg.scale.threshold = function () {
		return cf([.5], [0, 1])
	},
	bg.scale.identity = function () {
		return df([0, 1])
	},
	bg.svg = {},
	bg.svg.arc = function () {
		function a() {
			var a = Math.max(0, +e.apply(this, arguments)),
			l = Math.max(0, +f.apply(this, arguments)),
			m = i.apply(this, arguments) - Gg,
			n = j.apply(this, arguments) - Gg,
			o = Math.abs(n - m),
			p = m > n ? 0 : 1;
			if (l < a && (q = l, l = a, a = q), o >= Fg)
				return b(l, p) + (a ? b(a, 1 - p) : "") + "Z";
			var q,
			r,
			s,
			t,
			u,
			v,
			w,
			x,
			y,
			z,
			A,
			B,
			C = 0,
			D = 0,
			E = [];
			if ((t = (+k.apply(this, arguments) || 0) / 2) && (s = h === xi ? Math.sqrt(a * a + l * l) : +h.apply(this, arguments), p || (D *= -1), l && (D = ba(s / l * Math.sin(t))), a && (C = ba(s / a * Math.sin(t)))), l) {
				u = l * Math.cos(m + D),
				v = l * Math.sin(m + D),
				w = l * Math.cos(n - D),
				x = l * Math.sin(n - D);
				var F = Math.abs(n - m - 2 * D) <= Dg ? 0 : 1;
				if (D && lf(u, v, w, x) === p ^ F) {
					var G = (m + n) / 2;
					u = l * Math.cos(G),
					v = l * Math.sin(G),
					w = x = null
				}
			} else
				u = v = 0;
			if (a) {
				y = a * Math.cos(n - C),
				z = a * Math.sin(n - C),
				A = a * Math.cos(m + C),
				B = a * Math.sin(m + C);
				var H = Math.abs(m - n + 2 * C) <= Dg ? 0 : 1;
				if (C && lf(y, z, A, B) === 1 - p ^ H) {
					var I = (m + n) / 2;
					y = a * Math.cos(I),
					z = a * Math.sin(I),
					A = B = null
				}
			} else
				y = z = 0;
			if ((q = Math.min(Math.abs(l - a) / 2, +g.apply(this, arguments))) > .001) {
				r = a < l ^ p ? 0 : 1;
				var J = null == A ? [y, z] : null == w ? [u, v] : Gc([u, v], [A, B], [w, x], [y, z]),
				K = u - J[0],
				L = v - J[1],
				M = w - J[0],
				N = x - J[1],
				O = 1 / Math.sin(Math.acos((K * M + L * N) / (Math.sqrt(K * K + L * L) * Math.sqrt(M * M + N * N))) / 2),
				P = Math.sqrt(J[0] * J[0] + J[1] * J[1]);
				if (null != w) {
					var Q = Math.min(q, (l - P) / (O + 1)),
					R = mf(null == A ? [y, z] : [A, B], [u, v], l, Q, p),
					S = mf([w, x], [y, z], l, Q, p);
					q === Q ? E.push("M", R[0], "A", Q, ",", Q, " 0 0,", r, " ", R[1], "A", l, ",", l, " 0 ", 1 - p ^ lf(R[1][0], R[1][1], S[1][0], S[1][1]), ",", p, " ", S[1], "A", Q, ",", Q, " 0 0,", r, " ", S[0]) : E.push("M", R[0], "A", Q, ",", Q, " 0 1,", r, " ", S[0])
				} else
					E.push("M", u, ",", v);
				if (null != A) {
					var T = Math.min(q, (a - P) / (O - 1)),
					U = mf([u, v], [A, B], a, -T, p),
					V = mf([y, z], null == w ? [u, v] : [w, x], a, -T, p);
					q === T ? E.push("L", V[0], "A", T, ",", T, " 0 0,", r, " ", V[1], "A", a, ",", a, " 0 ", p ^ lf(V[1][0], V[1][1], U[1][0], U[1][1]), ",", 1 - p, " ", U[1], "A", T, ",", T, " 0 0,", r, " ", U[0]) : E.push("L", V[0], "A", T, ",", T, " 0 0,", r, " ", U[0])
				} else
					c && E.push("L", y, ",", z)
			} else
				E.push("M", u, ",", v), null != w && E.push("A", l, ",", l, " 0 ", F, ",", p, " ", w, ",", x), c && E.push("L", y, ",", z), null != A && E.push("A", a, ",", a, " 0 ", H, ",", 1 - p, " ", A, ",", B);
			return d && E.push("Z"),
			E.join("")
		}
		function b(a, b) {
			return "M0," + a + "A" + a + "," + a + " 0 1," + b + " 0," + -a + "A" + a + "," + a + " 0 1," + b + " 0," + a
		}
		var c = !0,
		d = !0,
		e = ff,
		f = gf,
		g = ef,
		h = xi,
		i = hf,
		j = jf,
		k = kf;
		return a.toCenter = function (b) {
			return arguments.length ? (c = !!b, a) : c
		},
		a.closePath = function (b) {
			return arguments.length ? (d = !!b, a) : d
		},
		a.innerRadius = function (b) {
			return arguments.length ? (e = Aa(b), a) : e
		},
		a.outerRadius = function (b) {
			return arguments.length ? (f = Aa(b), a) : f
		},
		a.cornerRadius = function (b) {
			return arguments.length ? (g = Aa(b), a) : g
		},
		a.padRadius = function (b) {
			return arguments.length ? (h = b == xi ? xi : Aa(b), a) : h
		},
		a.startAngle = function (b) {
			return arguments.length ? (i = Aa(b), a) : i
		},
		a.endAngle = function (b) {
			return arguments.length ? (j = Aa(b), a) : j
		},
		a.padAngle = function (b) {
			return arguments.length ? (k = Aa(b), a) : k
		},
		a.centroid = function () {
			var a = (+e.apply(this, arguments) + +f.apply(this, arguments)) / 2,
			b = (+i.apply(this, arguments) + +j.apply(this, arguments)) / 2 - Gg;
			return [Math.cos(b) * a, Math.sin(b) * a]
		},
		a
	};
	var xi = "auto";
	bg.svg.line = function () {
		return nf(s)
	};
	var yi = bg.map({
			linear: of,
			"linear-closed": pf,
			step: qf,
			"step-before": rf,
			"step-after": sf,
			basis: yf,
			"basis-open": zf,
			"basis-closed": Af,
			bundle: Bf,
			cardinal: vf,
			"cardinal-open": tf,
			"cardinal-closed": uf,
			monotone: Hf
		});
	yi.forEach(function (a, b) {
		b.key = a,
		b.closed = /-closed$/.test(a)
	});
	var zi = [0, 2 / 3, 1 / 3, 0],
	Ai = [0, 1 / 3, 2 / 3, 0],
	Bi = [0, 1 / 6, 2 / 3, 1 / 6];
	bg.svg.line.radial = function () {
		var a = nf(If);
		return a.radius = a.x,
		delete a.x,
		a.angle = a.y,
		delete a.y,
		a
	},
	rf.reverse = sf,
	sf.reverse = rf,
	bg.svg.area = function () {
		return Jf(s)
	},
	bg.svg.area.radial = function () {
		var a = Jf(If);
		return a.radius = a.x,
		delete a.x,
		a.innerRadius = a.x0,
		delete a.x0,
		a.outerRadius = a.x1,
		delete a.x1,
		a.angle = a.y,
		delete a.y,
		a.startAngle = a.y0,
		delete a.y0,
		a.endAngle = a.y1,
		delete a.y1,
		a
	},
	bg.svg.chord = function () {
		function a(a, h) {
			var i = b(this, f, a, h),
			j = b(this, g, a, h);
			return "M" + i.p0 + d(i.r, i.p1, i.a1 - i.a0) + (c(i, j) ? e(i.r, i.p1, i.r, i.p0) : e(i.r, i.p1, j.r, j.p0) + d(j.r, j.p1, j.a1 - j.a0) + e(j.r, j.p1, i.r, i.p0)) + "Z"
		}
		function b(a, b, c, d) {
			var e = b.call(a, c, d),
			f = h.call(a, e, d),
			g = i.call(a, e, d) - Gg,
			k = j.call(a, e, d) - Gg;
			return {
				r: f,
				a0: g,
				a1: k,
				p0: [f * Math.cos(g), f * Math.sin(g)],
				p1: [f * Math.cos(k), f * Math.sin(k)]
			}
		}
		function c(a, b) {
			return a.a0 == b.a0 && a.a1 == b.a1
		}
		function d(a, b, c) {
			return "A" + a + "," + a + " 0 " +  + (c > Dg) + ",1 " + b
		}
		function e(a, b, c, d) {
			return "Q 0,0 " + d
		}
		var f = rc,
		g = sc,
		h = Kf,
		i = hf,
		j = jf;
		return a.radius = function (b) {
			return arguments.length ? (h = Aa(b), a) : h
		},
		a.source = function (b) {
			return arguments.length ? (f = Aa(b), a) : f
		},
		a.target = function (b) {
			return arguments.length ? (g = Aa(b), a) : g
		},
		a.startAngle = function (b) {
			return arguments.length ? (i = Aa(b), a) : i
		},
		a.endAngle = function (b) {
			return arguments.length ? (j = Aa(b), a) : j
		},
		a
	},
	bg.svg.diagonal = function () {
		function a(a, e) {
			var f = b.call(this, a, e),
			g = c.call(this, a, e),
			h = (f.y + g.y) / 2,
			i = [f, {
					x: f.x,
					y: h
				}, {
					x: g.x,
					y: h
				}, g];
			return i = i.map(d),
			"M" + i[0] + "C" + i[1] + " " + i[2] + " " + i[3]
		}
		var b = rc,
		c = sc,
		d = Lf;
		return a.source = function (c) {
			return arguments.length ? (b = Aa(c), a) : b
		},
		a.target = function (b) {
			return arguments.length ? (c = Aa(b), a) : c
		},
		a.projection = function (b) {
			return arguments.length ? (d = b, a) : d
		},
		a
	},
	bg.svg.diagonal.radial = function () {
		var a = bg.svg.diagonal(),
		b = Lf,
		c = a.projection;
		return a.projection = function (a) {
			return arguments.length ? c(Mf(b = a)) : b
		},
		a
	},
	bg.svg.symbol = function () {
		function a(a, d) {
			return (Ci.get(b.call(this, a, d)) || Pf)(c.call(this, a, d))
		}
		var b = Of,
		c = Nf;
		return a.type = function (c) {
			return arguments.length ? (b = Aa(c), a) : b
		},
		a.size = function (b) {
			return arguments.length ? (c = Aa(b), a) : c
		},
		a
	};
	var Ci = bg.map({
			circle: Pf,
			cross: function (a) {
				var b = Math.sqrt(a / 5) / 2;
				return "M" + -3 * b + "," + -b + "H" + -b + "V" + -3 * b + "H" + b + "V" + -b + "H" + 3 * b + "V" + b + "H" + b + "V" + 3 * b + "H" + -b + "V" + b + "H" + -3 * b + "Z"
			},
			diamond: function (a) {
				var b = Math.sqrt(a / (2 * Ei)),
				c = b * Ei;
				return "M0," + -b + "L" + c + ",0 0," + b + " " + -c + ",0Z"
			},
			square: function (a) {
				var b = Math.sqrt(a) / 2;
				return "M" + -b + "," + -b + "L" + b + "," + -b + " " + b + "," + b + " " + -b + "," + b + "Z"
			},
			"triangle-down": function (a) {
				var b = Math.sqrt(a / Di),
				c = b * Di / 2;
				return "M0," + c + "L" + b + "," + -c + " " + -b + "," + -c + "Z"
			},
			"triangle-up": function (a) {
				var b = Math.sqrt(a / Di),
				c = b * Di / 2;
				return "M0," + -c + "L" + b + "," + c + " " + -b + "," + c + "Z"
			}
		});
	bg.svg.symbolTypes = Ci.keys();
	var Di = Math.sqrt(3),
	Ei = Math.tan(30 * Hg);
	ug.transition = function (a) {
		for (var b, c, d = Fi || ++Ji, e = Uf(a), f = [], g = Gi || {
				time: Date.now(),
				ease: yd,
				delay: 0,
				duration: 250
			}, h = -1, i = this.length; ++h < i; ) {
			f.push(b = []);
			for (var j = this[h], k = -1, l = j.length; ++k < l; )
				(c = j[k]) && Vf(c, k, e, d, g), b.push(c)
		}
		return Rf(f, e, d)
	},
	ug.interrupt = function (a) {
		return this.each(null == a ? Hi : Qf(Uf(a)))
	};
	var Fi,
	Gi,
	Hi = Qf(Uf()),
	Ii = [],
	Ji = 0;
	Ii.call = ug.call,
	Ii.empty = ug.empty,
	Ii.node = ug.node,
	Ii.size = ug.size,
	bg.transition = function (a, b) {
		return a && a.transition ? Fi ? a.transition(b) : a : bg.selection().transition(a)
	},
	bg.transition.prototype = Ii,
	Ii.select = function (a) {
		var b,
		c,
		d,
		e = this.id,
		f = this.namespace,
		g = [];
		a = C(a);
		for (var h = -1, i = this.length; ++h < i; ) {
			g.push(b = []);
			for (var j = this[h], k = -1, l = j.length; ++k < l; )
				(d = j[k]) && (c = a.call(d, d.__data__, k, h)) ? ("__data__" in d && (c.__data__ = d.__data__), Vf(c, k, f, e, d[f][e]), b.push(c)) : b.push(null)
		}
		return Rf(g, f, e)
	},
	Ii.selectAll = function (a) {
		var b,
		c,
		d,
		e,
		f,
		g = this.id,
		h = this.namespace,
		i = [];
		a = D(a);
		for (var j = -1, k = this.length; ++j < k; )
			for (var l = this[j], m = -1, n = l.length; ++m < n; )
				if (d = l[m]) {
					f = d[h][g],
					c = a.call(d, d.__data__, m, j),
					i.push(b = []);
					for (var o = -1, p = c.length; ++o < p; )
						(e = c[o]) && Vf(e, o, h, g, f), b.push(e)
				}
		return Rf(i, h, g)
	},
	Ii.filter = function (a) {
		var b,
		c,
		d,
		e = [];
		"function" != typeof a && (a = P(a));
		for (var f = 0, g = this.length; f < g; f++) {
			e.push(b = []);
			for (var c = this[f], h = 0, i = c.length; h < i; h++)
				(d = c[h]) && a.call(d, d.__data__, h, f) && b.push(d)
		}
		return Rf(e, this.namespace, this.id)
	},
	Ii.tween = function (a, b) {
		var c = this.id,
		d = this.namespace;
		return arguments.length < 2 ? this.node()[d][c].tween.get(a) : R(this, null == b ? function (b) {
			b[d][c].tween.remove(a)
		}
			 : function (e) {
			e[d][c].tween.set(a, b)
		})
	},
	Ii.attr = function (a, b) {
		function c() {
			this.removeAttribute(h)
		}
		function d() {
			this.removeAttributeNS(h.space, h.local)
		}
		function e(a) {
			return null == a ? c : (a += "", function () {
				var b,
				c = this.getAttribute(h);
				return c !== a && (b = g(c, a), function (a) {
					this.setAttribute(h, b(a))
				})
			})
		}
		function f(a) {
			return null == a ? d : (a += "", function () {
				var b,
				c = this.getAttributeNS(h.space, h.local);
				return c !== a && (b = g(c, a), function (a) {
					this.setAttributeNS(h.space, h.local, b(a))
				})
			})
		}
		if (arguments.length < 2) {
			for (b in a)
				this.attr(b, a[b]);
			return this
		}
		var g = "transform" == a ? Od : rd,
		h = bg.ns.qualify(a);
		return Sf(this, "attr." + a, b, h.local ? f : e)
	},
	Ii.attrTween = function (a, b) {
		function c(a, c) {
			var d = b.call(this, a, c, this.getAttribute(e));
			return d && function (a) {
				this.setAttribute(e, d(a))
			}
		}
		function d(a, c) {
			var d = b.call(this, a, c, this.getAttributeNS(e.space, e.local));
			return d && function (a) {
				this.setAttributeNS(e.space, e.local, d(a))
			}
		}
		var e = bg.ns.qualify(a);
		return this.tween("attr." + a, e.local ? d : c)
	},
	Ii.style = function (a, c, d) {
		function e() {
			this.style.removeProperty(a)
		}
		function f(c) {
			return null == c ? e : (c += "", function () {
				var e,
				f = b(this).getComputedStyle(this, null).getPropertyValue(a);
				return f !== c && (e = rd(f, c), function (b) {
					this.style.setProperty(a, e(b), d)
				})
			})
		}
		var g = arguments.length;
		if (g < 3) {
			if ("string" != typeof a) {
				g < 2 && (c = "");
				for (d in a)
					this.style(d, a[d], c);
				return this
			}
			d = ""
		}
		return Sf(this, "style." + a, c, f)
	},
	Ii.styleTween = function (a, c, d) {
		function e(e, f) {
			var g = c.call(this, e, f, b(this).getComputedStyle(this, null).getPropertyValue(a));
			return g && function (b) {
				this.style.setProperty(a, g(b), d)
			}
		}
		return arguments.length < 3 && (d = ""),
		this.tween("style." + a, e)
	},
	Ii.text = function (a) {
		return Sf(this, "text", a, Tf)
	},
	Ii.remove = function () {
		var a = this.namespace;
		return this.each("end.transition", function () {
			var b;
			this[a].count < 2 && (b = this.parentNode) && b.removeChild(this)
		})
	},
	Ii.ease = function (a) {
		var b = this.id,
		c = this.namespace;
		return arguments.length < 1 ? this.node()[c][b].ease : ("function" != typeof a && (a = bg.ease.apply(bg, arguments)), R(this, function (d) {
				d[c][b].ease = a
			}))
	},
	Ii.delay = function (a) {
		var b = this.id,
		c = this.namespace;
		return arguments.length < 1 ? this.node()[c][b].delay : R(this, "function" == typeof a ? function (d, e, f) {
			d[c][b].delay = +a.call(d, d.__data__, e, f)
		}
			 : (a = +a, function (d) {
				d[c][b].delay = a
			}))
	},
	Ii.duration = function (a) {
		var b = this.id,
		c = this.namespace;
		return arguments.length < 1 ? this.node()[c][b].duration : R(this, "function" == typeof a ? function (d, e, f) {
			d[c][b].duration = Math.max(1, a.call(d, d.__data__, e, f))
		}
			 : (a = Math.max(1, a), function (d) {
				d[c][b].duration = a
			}))
	},
	Ii.each = function (a, b) {
		var c = this.id,
		d = this.namespace;
		if (arguments.length < 2) {
			var e = Gi,
			f = Fi;
			try {
				Fi = c,
				R(this, function (b, e, f) {
					Gi = b[d][c],
					a.call(b, b.__data__, e, f)
				})
			}
			finally {
				Gi = e,
				Fi = f
			}
		} else
			R(this, function (e) {
				var f = e[d][c];
				(f.event || (f.event = bg.dispatch("start", "end", "interrupt"))).on(a, b)
			});
		return this
	},
	Ii.transition = function () {
		for (var a, b, c, d, e = this.id, f = ++Ji, g = this.namespace, h = [], i = 0, j = this.length; i < j; i++) {
			h.push(a = []);
			for (var b = this[i], k = 0, l = b.length; k < l; k++)
				(c = b[k]) && (d = c[g][e], Vf(c, k, g, f, {
						time: d.time,
						ease: d.ease,
						delay: d.delay + d.duration,
						duration: d.duration
					})), a.push(c)
		}
		return Rf(h, g, f)
	},
	bg.svg.axis = function () {
		function a(a) {
			a.each(function () {
				var a,
				j = bg.select(this),
				k = this.__chart__ || c,
				l = this.__chart__ = c.copy(),
				m = null == i ? l.ticks ? l.ticks.apply(l, h) : l.domain() : i,
				n = null == b ? l.tickFormat ? l.tickFormat.apply(l, h) : s : b,
				o = j.selectAll(".tick").data(m, l),
				p = o.enter().insert("g", ".domain").attr("class", "tick").style("opacity", Bg),
				q = bg.transition(o.exit()).style("opacity", Bg).remove(),
				r = bg.transition(o.order()).style("opacity", 1),
				t = Math.max(e, 0) + g,
				u = Le(l),
				v = j.selectAll(".domain").data([0]),
				w = (v.enter().append("path").attr("class", "domain"), bg.transition(v));
				p.append("line"),
				p.append("text");
				var x,
				y,
				z,
				A,
				B = p.select("line"),
				C = r.select("line"),
				D = o.select("text").text(n),
				E = p.select("text"),
				F = r.select("text"),
				G = "top" === d || "left" === d ? -1 : 1;
				if ("bottom" === d || "top" === d ? (a = Wf, x = "x", z = "y", y = "x2", A = "y2", D.attr("dy", G < 0 ? "0em" : ".71em").style("text-anchor", "middle"), w.attr("d", "M" + u[0] + "," + G * f + "V0H" + u[1] + "V" + G * f)) : (a = Xf, x = "y", z = "x", y = "y2", A = "x2", D.attr("dy", ".32em").style("text-anchor", G < 0 ? "end" : "start"), w.attr("d", "M" + G * f + "," + u[0] + "H0V" + u[1] + "H" + G * f)), B.attr(A, G * e), E.attr(z, G * t), C.attr(y, 0).attr(A, G * e), F.attr(x, 0).attr(z, G * t), l.rangeBand) {
					var H = l,
					I = H.rangeBand() / 2;
					k = l = function (a) {
						return H(a) + I
					}
				} else
					k.rangeBand ? k = l : q.call(a, l, k);
				p.call(a, k, l),
				r.call(a, l, l)
			})
		}
		var b,
		c = bg.scale.linear(),
		d = Ki,
		e = 6,
		f = 6,
		g = 3,
		h = [10],
		i = null;
		return a.scale = function (b) {
			return arguments.length ? (c = b, a) : c
		},
		a.orient = function (b) {
			return arguments.length ? (d = b in Li ? b + "" : Ki, a) : d
		},
		a.ticks = function () {
			return arguments.length ? (h = arguments, a) : h
		},
		a.tickValues = function (b) {
			return arguments.length ? (i = b, a) : i
		},
		a.tickFormat = function (c) {
			return arguments.length ? (b = c, a) : b
		},
		a.tickSize = function (b) {
			var c = arguments.length;
			return c ? (e = +b, f = +arguments[c - 1], a) : e
		},
		a.innerTickSize = function (b) {
			return arguments.length ? (e = +b, a) : e
		},
		a.outerTickSize = function (b) {
			return arguments.length ? (f = +b, a) : f
		},
		a.tickPadding = function (b) {
			return arguments.length ? (g = +b, a) : g
		},
		a.tickSubdivide = function () {
			return arguments.length && a
		},
		a
	};
	var Ki = "bottom",
	Li = {
		top: 1,
		right: 1,
		bottom: 1,
		left: 1
	};
	bg.svg.brush = function () {
		function a(b) {
			b.each(function () {
				var b = bg.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", f).on("touchstart.brush", f),
				g = b.selectAll(".background").data([0]);
				g.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"),
				b.selectAll(".extent").data([0]).enter().append("rect").attr("class", "extent").style("cursor", "move");
				var h = b.selectAll(".resize").data(p, s);
				h.exit().remove(),
				h.enter().append("g").attr("class", function (a) {
					return "resize " + a
				}).style("cursor", function (a) {
					return Mi[a]
				}).append("rect").attr("x", function (a) {
					return /[ew]$/.test(a) ? -3 : null
				}).attr("y", function (a) {
					return /^[ns]/.test(a) ? -3 : null
				}).attr("width", 6).attr("height", 6).style("visibility", "hidden"),
				h.style("display", a.empty() ? "none" : null);
				var i,
				l = bg.transition(b),
				m = bg.transition(g);
				j && (i = Le(j), m.attr("x", i[0]).attr("width", i[1] - i[0]), d(l)),
				k && (i = Le(k), m.attr("y", i[0]).attr("height", i[1] - i[0]), e(l)),
				c(l)
			})
		}
		function c(a) {
			a.selectAll(".resize").attr("transform", function (a) {
				return "translate(" + l[ + /e$/.test(a)] + "," + m[ + /^s/.test(a)] + ")"
			})
		}
		function d(a) {
			a.select(".extent").attr("x", l[0]),
			a.selectAll(".extent,.n>rect,.s>rect").attr("width", l[1] - l[0])
		}
		function e(a) {
			a.select(".extent").attr("y", m[0]),
			a.selectAll(".extent,.e>rect,.w>rect").attr("height", m[1] - m[0])
		}
		function f() {
			function f() {
				32 == bg.event.keyCode && (D || (t = null, F[0] -= l[1], F[1] -= m[1], D = 2), y())
			}
			function p() {
				32 == bg.event.keyCode && 2 == D && (F[0] += l[1], F[1] += m[1], D = 0, y())
			}
			function q() {
				var a = bg.mouse(v),
				b = !1;
				u && (a[0] += u[0], a[1] += u[1]),
				D || (bg.event.altKey ? (t || (t = [(l[0] + l[1]) / 2, (m[0] + m[1]) / 2]), F[0] = l[ + (a[0] < t[0])], F[1] = m[ + (a[1] < t[1])]) : t = null),
				B && r(a, j, 0) && (d(z), b = !0),
				C && r(a, k, 1) && (e(z), b = !0),
				b && (c(z), x({
						type: "brush",
						mode: D ? "move" : "resize"
					}))
			}
			function r(a, b, c) {
				var d,
				e,
				f = Le(b),
				i = f[0],
				j = f[1],
				k = F[c],
				p = c ? m : l,
				q = p[1] - p[0];
				if (D && (i -= k, j -= q + k), d = (c ? o : n) ? Math.max(i, Math.min(j, a[c])) : a[c], D ? e = (d += k) + q : (t && (k = Math.max(i, Math.min(j, 2 * t[c] - d))), k < d ? (e = d, d = k) : e = k), p[0] != d || p[1] != e)
					return c ? h = null : g = null, p[0] = d, p[1] = e, !0
			}
			function s() {
				q(),
				z.style("pointer-events", "all").selectAll(".resize").style("display", a.empty() ? "none" : null),
				bg.select("body").style("cursor", null),
				G.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null),
				E(),
				x({
					type: "brushend"
				})
			}
			var t,
			u,
			v = this,
			w = bg.select(bg.event.target),
			x = i.of(v, arguments),
			z = bg.select(v),
			A = w.datum(),
			B = !/^(n|s)$/.test(A) && j,
			C = !/^(e|w)$/.test(A) && k,
			D = w.classed("extent"),
			E = X(v),
			F = bg.mouse(v),
			G = bg.select(b(v)).on("keydown.brush", f).on("keyup.brush", p);
			if (bg.event.changedTouches ? G.on("touchmove.brush", q).on("touchend.brush", s) : G.on("mousemove.brush", q).on("mouseup.brush", s), z.interrupt().selectAll("*").interrupt(), D)
				F[0] = l[0] - F[0], F[1] = m[0] - F[1];
			else if (A) {
				var H =  + /w$/.test(A),
				I =  + /^n/.test(A);
				u = [l[1 - H] - F[0], m[1 - I] - F[1]],
				F[0] = l[H],
				F[1] = m[I]
			} else
				bg.event.altKey && (t = F.slice());
			z.style("pointer-events", "none").selectAll(".resize").style("display", null),
			bg.select("body").style("cursor", w.style("cursor")),
			x({
				type: "brushstart"
			}),
			q()
		}
		var g,
		h,
		i = A(a, "brushstart", "brush", "brushend"),
		j = null,
		k = null,
		l = [0, 0],
		m = [0, 0],
		n = !0,
		o = !0,
		p = Ni[0];
		return a.event = function (a) {
			a.each(function () {
				var a = i.of(this, arguments),
				b = {
					x: l,
					y: m,
					i: g,
					j: h
				},
				c = this.__chart__ || b;
				this.__chart__ = b,
				Fi ? bg.select(this).transition().each("start.brush", function () {
					g = c.i,
					h = c.j,
					l = c.x,
					m = c.y,
					a({
						type: "brushstart"
					})
				}).tween("brush:brush", function () {
					var c = sd(l, b.x),
					d = sd(m, b.y);
					return g = h = null,
					function (e) {
						l = b.x = c(e),
						m = b.y = d(e),
						a({
							type: "brush",
							mode: "resize"
						})
					}
				}).each("end.brush", function () {
					g = b.i,
					h = b.j,
					a({
						type: "brush",
						mode: "resize"
					}),
					a({
						type: "brushend"
					})
				}) : (a({
						type: "brushstart"
					}), a({
						type: "brush",
						mode: "resize"
					}), a({
						type: "brushend"
					}))
			})
		},
		a.x = function (b) {
			return arguments.length ? (j = b, p = Ni[!j << 1 | !k], a) : j
		},
		a.y = function (b) {
			return arguments.length ? (k = b, p = Ni[!j << 1 | !k], a) : k
		},
		a.clamp = function (b) {
			return arguments.length ? (j && k ? (n = !!b[0], o = !!b[1]) : j ? n = !!b : k && (o = !!b), a) : j && k ? [n, o] : j ? n : k ? o : null
		},
		a.extent = function (b) {
			var c,
			d,
			e,
			f,
			i;
			return arguments.length ? (j && (c = b[0], d = b[1], k && (c = c[0], d = d[0]), g = [c, d], j.invert && (c = j(c), d = j(d)), d < c && (i = c, c = d, d = i), c == l[0] && d == l[1] || (l = [c, d])), k && (e = b[0], f = b[1], j && (e = e[1], f = f[1]), h = [e, f], k.invert && (e = k(e), f = k(f)), f < e && (i = e, e = f, f = i), e == m[0] && f == m[1] || (m = [e, f])), a) : (j && (g ? (c = g[0], d = g[1]) : (c = l[0], d = l[1], j.invert && (c = j.invert(c), d = j.invert(d)), d < c && (i = c, c = d, d = i))), k && (h ? (e = h[0], f = h[1]) : (e = m[0], f = m[1], k.invert && (e = k.invert(e), f = k.invert(f)), f < e && (i = e, e = f, f = i))), j && k ? [[c, e], [d, f]] : j ? [c, d] : k && [e, f])
		},
		a.clear = function () {
			return a.empty() || (l = [0, 0], m = [0, 0], g = h = null),
			a
		},
		a.empty = function () {
			return !!j && l[0] == l[1] || !!k && m[0] == m[1]
		},
		bg.rebind(a, i, "on")
	};
	var Mi = {
		n: "ns-resize",
		e: "ew-resize",
		s: "ns-resize",
		w: "ew-resize",
		nw: "nwse-resize",
		ne: "nesw-resize",
		se: "nwse-resize",
		sw: "nesw-resize"
	},
	Ni = [["n", "e", "s", "w", "nw", "ne", "se", "sw"], ["e", "w"], ["n", "s"], []],
	Oi = fh.format = lh.timeFormat,
	Pi = Oi.utc,
	Qi = Pi("%Y-%m-%dT%H:%M:%S.%LZ");
	Oi.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? Yf : Qi,
	Yf.parse = function (a) {
		var b = new Date(a);
		return isNaN(b) ? null : b
	},
	Yf.toString = Qi.toString,
	fh.second = Na(function (a) {
			return new gh(1e3 * Math.floor(a / 1e3))
		}, function (a, b) {
			a.setTime(a.getTime() + 1e3 * Math.floor(b))
		}, function (a) {
			return a.getSeconds()
		}),
	fh.seconds = fh.second.range,
	fh.seconds.utc = fh.second.utc.range,
	fh.minute = Na(function (a) {
			return new gh(6e4 * Math.floor(a / 6e4))
		}, function (a, b) {
			a.setTime(a.getTime() + 6e4 * Math.floor(b))
		}, function (a) {
			return a.getMinutes()
		}),
	fh.minutes = fh.minute.range,
	fh.minutes.utc = fh.minute.utc.range,
	fh.hour = Na(function (a) {
			var b = a.getTimezoneOffset() / 60;
			return new gh(36e5 * (Math.floor(a / 36e5 - b) + b))
		}, function (a, b) {
			a.setTime(a.getTime() + 36e5 * Math.floor(b))
		}, function (a) {
			return a.getHours()
		}),
	fh.hours = fh.hour.range,
	fh.hours.utc = fh.hour.utc.range,
	fh.month = Na(function (a) {
			return a = fh.day(a),
			a.setDate(1),
			a
		}, function (a, b) {
			a.setMonth(a.getMonth() + b)
		}, function (a) {
			return a.getMonth()
		}),
	fh.months = fh.month.range,
	fh.months.utc = fh.month.utc.range;
	var Ri = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6],
	Si = [[fh.second, 1], [fh.second, 5], [fh.second, 15], [fh.second, 30], [fh.minute, 1], [fh.minute, 5], [fh.minute, 15], [fh.minute, 30], [fh.hour, 1], [fh.hour, 3], [fh.hour, 6], [fh.hour, 12], [fh.day, 1], [fh.day, 2], [fh.week, 1], [fh.month, 1], [fh.month, 3], [fh.year, 1]],
	Ti = Oi.multi([[".%L", function (a) {
						return a.getMilliseconds()
					}
				], [":%S", function (a) {
						return a.getSeconds()
					}
				], ["%I:%M", function (a) {
						return a.getMinutes()
					}
				], ["%I %p", function (a) {
						return a.getHours()
					}
				], ["%a %d", function (a) {
						return a.getDay() && 1 != a.getDate()
					}
				], ["%b %d", function (a) {
						return 1 != a.getDate()
					}
				], ["%B", function (a) {
						return a.getMonth()
					}
				], ["%Y", Cb]]),
	Ui = {
		range: function (a, b, c) {
			return bg.range(Math.ceil(a / c) * c, +b, c).map($f)
		},
		floor: s,
		ceil: s
	};
	Si.year = fh.year,
	fh.scale = function () {
		return Zf(bg.scale.linear(), Si, Ti)
	};
	var Vi = Si.map(function (a) {
			return [a[0].utc, a[1]]
		}),
	Wi = Pi.multi([[".%L", function (a) {
						return a.getUTCMilliseconds()
					}
				], [":%S", function (a) {
						return a.getUTCSeconds()
					}
				], ["%I:%M", function (a) {
						return a.getUTCMinutes()
					}
				], ["%I %p", function (a) {
						return a.getUTCHours()
					}
				], ["%a %d", function (a) {
						return a.getUTCDay() && 1 != a.getUTCDate()
					}
				], ["%b %d", function (a) {
						return 1 != a.getUTCDate()
					}
				], ["%B", function (a) {
						return a.getUTCMonth()
					}
				], ["%Y", Cb]]);
	Vi.year = fh.year.utc,
	fh.scale.utc = function () {
		return Zf(bg.scale.linear(), Vi, Wi)
	},
	bg.text = Ba(function (a) {
			return a.responseText
		}),
	bg.json = function (a, b) {
		return Ca(a, "application/json", _f, b)
	},
	bg.html = function (a, b) {
		return Ca(a, "text/html", ag, b)
	},
	bg.xml = Ba(function (a) {
			return a.responseXML
		}),
	"function" == typeof define && define.amd ? define(bg) : "object" == typeof module && module.exports && (module.exports = bg),
	this.d3 = bg
}
(), !function (a, b) {
	"function" == typeof define && define.amd ? define([], b) : a.VanCharts = b()
}
(this, function () {
	var a,
	b,
	c;
	!function (d) {
		function e(a, b) {
			return u.call(a, b)
		}
		function f(a, b) {
			var c,
			d,
			e,
			f,
			g,
			h,
			i,
			j,
			k,
			l,
			m,
			n = b && b.split("/"),
			o = s.map,
			p = o && o["*"] || {};
			if (a && "." === a.charAt(0))
				if (b) {
					for (a = a.split("/"), g = a.length - 1, s.nodeIdCompat && w.test(a[g]) && (a[g] = a[g].replace(w, "")), a = n.slice(0, n.length - 1).concat(a), k = 0; k < a.length; k += 1)
						if (m = a[k], "." === m)
							a.splice(k, 1), k -= 1;
						else if (".." === m) {
							if (1 === k && (".." === a[2] || ".." === a[0]))
								break;
							k > 0 && (a.splice(k - 1, 2), k -= 2)
						}
					a = a.join("/")
				} else
					0 === a.indexOf("./") && (a = a.substring(2));
			if ((n || p) && o) {
				for (c = a.split("/"), k = c.length; k > 0; k -= 1) {
					if (d = c.slice(0, k).join("/"), n)
						for (l = n.length; l > 0; l -= 1)
							if (e = o[n.slice(0, l).join("/")], e && (e = e[d])) {
								f = e,
								h = k;
								break
							}
					if (f)
						break;
					!i && p && p[d] && (i = p[d], j = k)
				}
				!f && i && (f = i, h = j),
				f && (c.splice(0, h, f), a = c.join("/"))
			}
			return a
		}
		function g(a, b) {
			return function () {
				var c = v.call(arguments, 0);
				return "string" != typeof c[0] && 1 === c.length && c.push(null),
				n.apply(d, c.concat([a, b]))
			}
		}
		function h(a) {
			return function (b) {
				return f(b, a)
			}
		}
		function i(a) {
			return function (b) {
				q[a] = b
			}
		}
		function j(a) {
			if (e(r, a)) {
				var b = r[a];
				delete r[a],
				t[a] = !0,
				m.apply(d, b)
			}
			if (!e(q, a) && !e(t, a))
				throw new Error("No " + a);
			return q[a]
		}
		function k(a) {
			var b,
			c = a ? a.indexOf("!") : -1;
			return c > -1 && (b = a.substring(0, c), a = a.substring(c + 1, a.length)),
			[b, a]
		}
		function l(a) {
			return function () {
				return s && s.config && s.config[a] || {}
			}
		}
		var m,
		n,
		o,
		p,
		q = {},
		r = {},
		s = {},
		t = {},
		u = Object.prototype.hasOwnProperty,
		v = [].slice,
		w = /\.js$/;
		o = function (a, b) {
			var c,
			d = k(a),
			e = d[0];
			return a = d[1],
			e && (e = f(e, b), c = j(e)),
			e ? a = c && c.normalize ? c.normalize(a, h(b)) : f(a, b) : (a = f(a, b), d = k(a), e = d[0], a = d[1], e && (c = j(e))), {
				f: e ? e + "!" + a : a,
				n: a,
				pr: e,
				p: c
			}
		},
		p = {
			require: function (a) {
				return g(a)
			},
			exports: function (a) {
				var b = q[a];
				return "undefined" != typeof b ? b : q[a] = {}
			},
			module: function (a) {
				return {
					id: a,
					uri: "",
					exports: q[a],
					config: l(a)
				}
			}
		},
		m = function (a, b, c, f) {
			var h,
			k,
			l,
			m,
			n,
			s,
			u = [],
			v = typeof c;
			if (f = f || a, "undefined" === v || "function" === v) {
				for (b = !b.length && c.length ? ["require", "exports", "module"] : b, n = 0; n < b.length; n += 1)
					if (m = o(b[n], f), k = m.f, "require" === k)
						u[n] = p.require(a);
					else if ("exports" === k)
						u[n] = p.exports(a), s = !0;
					else if ("module" === k)
						h = u[n] = p.module(a);
					else if (e(q, k) || e(r, k) || e(t, k))
						u[n] = j(k);
					else {
						if (!m.p)
							throw new Error(a + " missing " + k);
						m.p.load(m.n, g(f, !0), i(k), {}),
						u[n] = q[k]
					}
				l = c ? c.apply(q[a], u) : void 0,
				a && (h && h.exports !== d && h.exports !== q[a] ? q[a] = h.exports : l === d && s || (q[a] = l))
			} else
				a && (q[a] = c)
		},
		a = b = n = function (a, b, c, e, f) {
			if ("string" == typeof a)
				return p[a] ? p[a](b) : j(o(a, b).f);
			if (!a.splice) {
				if (s = a, s.deps && n(s.deps, s.callback), !b)
					return;
				b.splice ? (a = b, b = c, c = null) : a = d
			}
			return b = b || function () {},
			"function" == typeof c && (c = e, e = f),
			e ? m(d, a, b, c) : setTimeout(function () {
				m(d, a, b, c)
			}, 4),
			n
		},
		n.config = function (a) {
			return n(a)
		},
		a._defined = q,
		c = function (a, b, c) {
			if ("string" != typeof a)
				throw new Error("See almond README: incorrect module build, no module name");
			b.splice || (c = b, b = []),
			e(q, a) || e(r, a) || (r[a] = [a, b, c])
		},
		c.amd = {
			jQuery: !0
		}
	}
	(),
	c("almond", function () {}),
	c("Constants", [], function () {
		return {
			INSTANCES_KEY: "vancharts_index_",
			SELECT_ANIMATION: "select",
			CHART_HIDE: "vancharts-chart-hide",
			EXPORT_HIDE: "vancharts-export-hide",
			GEO: "geographic_co_sys",
			PLANE: "plane_co_sys",
			BAR_CHART: "bar",
			COLUMN_CHART: "column",
			LINE_CHART: "line",
			AREA_CHART: "area",
			PIE_CHART: "pie",
			MULTIPIE_CHART: "multiPie",
			SCATTER_CHART: "scatter",
			BUBBLE_CHART: "bubble",
			GAUGE_CHART: "gauge",
			RADAR_CHART: "radar",
			MAP_CHART: "map",
			POINT_MAP: "pointMap",
			AREA_MAP: "areaMap",
			GEO_COMPONENT: "geo",
			X_AXIS_COMPONENT: "xAxis",
			Y_AXIS_COMPONENT: "yAxis",
			POLAR_COMPONENT: "polar",
			RADIUS_AXIS_COMPONENT: "radiusAxis",
			ANGLE_AXIS_COMPONENT: "angleAxis",
			GAUGE_AXIS_COMPONENT: "gaugeAxis",
			VALUE_AXIS_COMPONENT: "value",
			CATEGORY_AXIS_COMPONENT: "category",
			DATE_AXIS_COMPONENT: "datetime",
			DATA_SHEET_COMPONENT: "dataSheet",
			LEGEND_COMPONENT: "legend",
			TITLE_COMPONENT: "title",
			AXIS_COMPONENT: "axis",
			TOOLTIP_COMPONENT: "tooltip",
			TOOLBAR_COMPONENT: "tools",
			ZOOM_COMPONENT: "zoom",
			RANGE_LEGEND_COMPONENT: "rangeLegend",
			DRILL_TOOLS: "dTools",
			VANCHART: "vanchart",
			MAX_ICON: "vancharts-icon-max",
			MIN_ICON: "vancharts-icon-min",
			MENU_ICON: "vancharts-icon-menu",
			REFRESH_ICON: "vancharts-icon-refresh",
			DECREASE_ICON: "vancharts-icon-decrease",
			INCREASE_ICON: "vancharts-icon-increase",
			EXPORT_ICON: "vancharts-icon-export",
			AXIS_GROUP: "vanchart-axis-group",
			BOTTOM: "bottom",
			TOP: "top",
			LEFT: "left",
			RIGHT: "right",
			RIGHT_TOP: "right-top",
			LEFT_TO_RIGHT: "left-to-right",
			RIGHT_TO_LEFT: "right-to-right",
			BOTTOM_TO_TOP: "bottom-to-top",
			TOP_TO_BOTTOM: "top-to-botttom",
			NULL_MARKER: "null_marker",
			CIRCLE: "circle",
			SQUARE: "square",
			DIAMOND: "diamond",
			TRIANGLE: "triangle",
			CIRCLE_HOLLOW: "circle_hollow",
			SQUARE_HOLLOW: "square_hollow",
			DIAMOND_HOLLOW: "diamond_hollow",
			TRIANGLE_HOLLOW: "triangle_hollow",
			NORMAL_ICON: "normal-legend-icon",
			PIE_ICON: "pie-legend-icon",
			DONUT_ICON: "donut-legend-icon",
			BUBBLE_ICON: "bubble-legend-icon",
			SCATTER_ICON: "scatter-legend-icon",
			DASH_TYPE: {
				Solid: "0,0",
				Dash: "8,6"
			},
			SAME_ARC: "sameArc",
			DIFFERENT_ARC: "differentArc",
			DISORDER: "disorder",
			DESCENDING: "descending",
			ASCENDING: "ascending",
			STATE_INIT: "init-state",
			STATE_RESTORE_REFRESH: "restore-refresh-state",
			STATE_CHANGE_DATA_REFRESH: "change-data-refresh-state",
			STATE_ZOOM_REFRESH: "zoom-refresh-state",
			OUTSIDE: "outside",
			INSIDE: "inside",
			CENTER: "center",
			VANCHART_SVG: "vanchart-svg-render",
			VANCHART_VML: "vanchart-vml-render",
			PIE_SVG: "pie-svg-render",
			PIE_VML: "pie-vml-render",
			MULTIPIE_SVG: "multiPie-svg-render",
			MULTIPIE_VML: "multiPie-vml-render",
			BAR_SVG: "bar-svg-render",
			BAR_VML: "bar-vml-render",
			LINE_SVG: "line-svg-render",
			LINE_VML: "line-vml-render",
			AREA_SVG: "area-svg-render",
			AREA_VML: "area-vml-render",
			GAUGE_SVG: "gauge-svg-render",
			GAUGE_VML: "gauge-vml-render",
			RADAR_SVG: "radar-svg-render",
			RADAR_VML: "radar-vml-render",
			BUBBLE_SVG: "bubble-svg-render",
			BUBBLE_VML: "bubble-vml-render",
			SCATTER_SVG: "scatter-svg-render",
			SCATTER_VML: "scatter-vml-render",
			MAP_SVG: "map-svg-render",
			MAP_VML: "map-vml-render",
			TITLE_SVG: "title-svg-render",
			TITLE_VML: "title-vml-render",
			LEGEND_SVG: "legend-svg-render",
			LEGEND_VML: "legend-vml-render",
			RANGE_LEGEND_SVG: "range-legend-svg-render",
			RANGE_LEGEND_VML: "range-legend-vml-render",
			TOOLBAR_SVG: "toolbar-svg-render",
			TOOLBAR_VML: "toolbar-vml-render",
			DRILL_TOOLS_SVG: "dTools-svg-render",
			DRILL_TOOLS_VML: "dTools-vml-render",
			ZOOM_SVG: "zoom-svg-render",
			DATA_SHEET_SVG: "data-sheet-svg-render",
			DATA_SHEET_VML: "data-sheet-vml-render",
			AXIS_RENDER: "axis-render",
			RADIUS_AXIS_RENDER: "radius-axis-render",
			ANGLE_AXIS_RENDER: "angle-axis-render",
			CATEGORY_AXIS_SVG: "category-axis-svg-render",
			CATEGORY_AXIS_VML: "category-axis-vml-render",
			VALUE_AXIS_SVG: "value-axis-svg-render",
			VALUE_AXIS_VML: "value-axis-vml-render",
			DATE_AXIS_SVG: "date-axis-svg-render",
			DATE_AXIS_VML: "date-axis-vml-render",
			RADIUS_AXIS_SVG: "radius-axis-svg-render",
			RADIUS_AXIS_VML: "radius-axis-vml-render",
			ANGLE_AXIS_SVG: "angle-axis-svg-render",
			ANGLE_AXIS_VML: "angle-axis-vml-render",
			STYLE_GRADUAL: "gradual",
			GAUGE_POINTER: "pointer",
			GAUGE_POINTER_SEMI: "pointer_semi",
			GAUGE_SLOT: "slot",
			GAUGE_THERMOMETER: "thermometer",
			GAUGE_RING: "ring",
			HORIZONTAL_LAYOUT: "horizontal",
			VERTICAL_LAYOUT: "vertical",
			POLYGON_RADAR: "polygon",
			CIRCLE_RADAR: "circle",
			SIZE_BY_AREA: "area",
			SIZE_BY_WIDTH: "width",
			GRADUAL_LIGHTER: "lighter",
			GRADUAL_DARKER: "darker",
			TOOLTIP_CATEGORY_STYLE: '<span style="font-size:16px;font-family:Verdana;color:white;">',
			TOOLTIP_SERIES_STYLE: '<span style="font-size:14px;font-family:Verdana;color:white">',
			TOOLTIP_VALUE_STYLE: '<span style="font-size:14px;font-family:Verdana;font-weight:bold;color:white">'
		}
	}),
	c("utils/ColorUtils", [], function () {
		function a(a) {
			return String(a).replace(/\s+/g, "")
		}
		function b(a, b) {
			return a <= b[0] ? a = b[0] : a >= b[1] && (a = b[1]),
			a
		}
		function c(a, b) {
			if ("function" != typeof b)
				throw new TypeError;
			for (var c = a ? a.length : 0, d = 0; c > d; d++)
				a[d] = b(a[d]);
			return a
		}
		function d(d) {
			if (r[d] && (d = r[d]), d = a(d), /^#[\da-f]{3}$/i.test(d)) {
				d = parseInt(d.slice(1), 16);
				var e = (3840 & d) << 8,
				f = (240 & d) << 4,
				g = 15 & d;
				d = "#" + ((1 << 24) + (e << 4) + e + (f << 4) + f + (g << 4) + g).toString(16).slice(1)
			}
			var h,
			i,
			j,
			e = d.match(s),
			k = [];
			if (e[2])
				h = e[2].replace("#", "").split(""), j = [h[0] + h[1], h[2] + h[3], h[4] + h[5]], k = c(j, function (a) {
						return b(parseInt(a, 16), [0, 255])
					});
			else if (e[4]) {
				var l = e[4].split(",");
				i = l[3],
				j = l.slice(0, 3),
				k = c(j, function (a) {
						return a = Math.floor(a.indexOf("%") > 0 ? 2.55 * parseInt(a, 0) : a),
						b(a, [0, 255])
					}),
				"undefined" != typeof i && k.push(b(parseFloat(i), [0, 1]))
			}
			return 3 == k.length && k.push(1),
			k
		}
		function e(a, d) {
			if (d = d || "rgb", a && (3 === a.length || 4 === a.length)) {
				if (a = c(a, function (a) {
							return a > 1 ? Math.ceil(a) : a
						}), d.indexOf("hex") > -1)
					return "#" + ((1 << 24) + (a[0] << 16) + (a[1] << 8) + +a[2]).toString(16).slice(1);
				if (d.indexOf("hs") > -1) {
					var e = c(a.slice(1, 3), function (a) {
							return a + "%"
						});
					a[1] = e[0],
					a[2] = e[1]
				}
				return d.indexOf("a") > -1 ? (3 === a.length && a.push(1), a[3] = b(a[3], [0, 1]), d + "(" + a.slice(0, 4).join(",") + ")") : d + "(" + a.slice(0, 3).join(",") + ")"
			}
		}
		function f(a) {
			for (var c = d(a), f = [], g = 0; 3 > g; g++) {
				var h = c[g];
				128 >= h ? f.push(b(h - (255 - h) * (255 - 2 * h) / (2 * h), [0, 255])) : f.push(b(h + h * (2 * h - 255) / (2 * (255 - h)), [0, 255]))
			}
			var i = [];
			for (g = 0; 3 > g; g++)
				i.push(Math.round(.65 * c[g] + .35 * f[g]));
			return i.push(c[3]),
			e(i, "rgba")
		}
		function g(a, b) {
			for (var c = d(a), f = 0; 3 > f; f++)
				c[f] /= b;
			return e(c, "rgba")
		}
		function h(a) {
			for (var b = d(a), c = 0; 3 > c; c++)
				b[c] *= .95;
			return e(b, "rgba")
		}
		function i(a, b) {
			var c = d(a);
			return c[3] = b,
			e(c, "rgba")
		}
		function j(a, b, c, f) {
			var g = d(a),
			h = m(g[0], g[1], g[2]);
			h[0] += b,
			h[1] += c,
			h[2] += f;
			var i = k(h[0], h[1], h[2]);
			return e(i, "rgb")
		}
		function k(a, b, c) {
			b = Math.min(1, Math.max(0, b)),
			c = Math.min(1, Math.max(0, c));
			var d = 0,
			e = 0,
			f = 0;
			if (0 === b)
				d = e = f = 255 * c + .5;
			else {
				var g = 6 * (a - Math.floor(a)),
				h = g - Math.floor(g),
				i = c * (1 - b),
				j = c * (1 - b * h),
				k = c * (1 - b * (1 - h));
				switch (Math.floor(g)) {
				case 0:
					d = 255 * c + .5,
					e = 255 * k + .5,
					f = 255 * i + .5;
					break;
				case 1:
					d = 255 * j + .5,
					e = 255 * c + .5,
					f = 255 * i + .5;
					break;
				case 2:
					d = 255 * i + .5,
					e = 255 * c + .5,
					f = 255 * k + .5;
					break;
				case 3:
					d = 255 * i + .5,
					e = 255 * j + .5,
					f = 255 * c + .5;
					break;
				case 4:
					d = 255 * k + .5,
					e = 255 * i + .5,
					f = 255 * c + .5;
					break;
				case 5:
					d = 255 * c + .5,
					e = 255 * i + .5,
					f = 255 * j + .5
				}
			}
			var l = [];
			return l.push(Math.floor(d)),
			l.push(Math.floor(e)),
			l.push(Math.floor(f)),
			l
		}
		function l(a, b) {
			a = a || "blue",
			b = b || 1;
			for (var c = d(a), f = m(c[0], c[1], c[2]), g = [], h = f[0], i = f[1], j = f[2], l = 0; b > l; l++) {
				var n = i * (1 - l / b),
				o = j + l * (1 - j) / b;
				g.push(e(k(h, n, o)))
			}
			return g
		}
		function m(a, b, c) {
			var d,
			e,
			f,
			g = [3],
			h = a > b ? a : b;
			c > h && (h = c);
			var i = b > a ? a : b;
			if (i > c && (i = c), f = h / 255, e = 0 !== h ? (h - i) / h : 0, 0 === e)
				d = 0;
			else {
				var j = (h - a) / (h - i),
				k = (h - b) / (h - i),
				l = (h - c) / (h - i);
				d = a == h ? l - k : b == h ? 2 + j - l : 4 + k - j,
				d /= 6,
				0 > d && (d += 1)
			}
			return g[0] = d,
			g[1] = e,
			g[2] = f,
			g
		}
		function n(a) {
			return a && "string" == typeof a && -1 != a.indexOf("rgba") ? d(a)[3] : 1
		}
		function o(a) {
			return a && "string" == typeof a && -1 != a.indexOf("rgba") ? n(a) : void 0
		}
		function p(a) {
			return q(a).hex
		}
		function q(a) {
			var b,
			c,
			f,
			g,
			h = e(d(a), "rgba"),
			i = /rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([.\d]+))?\)/,
			j = h.replace(/\s+/g, "").match(i);
			return b = (+j[1]).toString(16),
			b = 1 === b.length ? "0" + b : b,
			c = (+j[2]).toString(16),
			c = 1 === c.length ? "0" + c : c,
			f = (+j[3]).toString(16),
			f = 1 === f.length ? "0" + f : f,
			g = 100 *  + (j[5] ? j[5] : 1), {
				hex: "#" + b + c + f,
				alpha: Math.ceil(g)
			}
		}
		var r = {
			aliceblue: "#f0f8ff",
			antiquewhite: "#faebd7",
			aqua: "#0ff",
			aquamarine: "#7fffd4",
			azure: "#f0ffff",
			beige: "#f5f5dc",
			bisque: "#ffe4c4",
			black: "#000",
			blanchedalmond: "#ffebcd",
			blue: "#00f",
			blueviolet: "#8a2be2",
			brown: "#a52a2a",
			burlywood: "#deb887",
			cadetblue: "#5f9ea0",
			chartreuse: "#7fff00",
			chocolate: "#d2691e",
			coral: "#ff7f50",
			cornflowerblue: "#6495ed",
			cornsilk: "#fff8dc",
			crimson: "#dc143c",
			cyan: "#0ff",
			darkblue: "#00008b",
			darkcyan: "#008b8b",
			darkgoldenrod: "#b8860b",
			darkgray: "#a9a9a9",
			darkgrey: "#a9a9a9",
			darkgreen: "#006400",
			darkkhaki: "#bdb76b",
			darkmagenta: "#8b008b",
			darkolivegreen: "#556b2f",
			darkorange: "#ff8c00",
			darkorchid: "#9932cc",
			darkred: "#8b0000",
			darksalmon: "#e9967a",
			darkseagreen: "#8fbc8f",
			darkslateblue: "#483d8b",
			darkslategray: "#2f4f4f",
			darkslategrey: "#2f4f4f",
			darkturquoise: "#00ced1",
			darkviolet: "#9400d3",
			deeppink: "#ff1493",
			deepskyblue: "#00bfff",
			dimgray: "#696969",
			dimgrey: "#696969",
			dodgerblue: "#1e90ff",
			firebrick: "#b22222",
			floralwhite: "#fffaf0",
			forestgreen: "#228b22",
			fuchsia: "#f0f",
			gainsboro: "#dcdcdc",
			ghostwhite: "#f8f8ff",
			gold: "#ffd700",
			goldenrod: "#daa520",
			gray: "#808080",
			grey: "#808080",
			green: "#008000",
			greenyellow: "#adff2f",
			honeydew: "#f0fff0",
			hotpink: "#ff69b4",
			indianred: "#cd5c5c",
			indigo: "#4b0082",
			ivory: "#fffff0",
			khaki: "#f0e68c",
			lavender: "#e6e6fa",
			lavenderblush: "#fff0f5",
			lawngreen: "#7cfc00",
			lemonchiffon: "#fffacd",
			lightblue: "#add8e6",
			lightcoral: "#f08080",
			lightcyan: "#e0ffff",
			lightgoldenrodyellow: "#fafad2",
			lightgray: "#d3d3d3",
			lightgrey: "#d3d3d3",
			lightgreen: "#90ee90",
			lightpink: "#ffb6c1",
			lightsalmon: "#ffa07a",
			lightseagreen: "#20b2aa",
			lightskyblue: "#87cefa",
			lightslategray: "#789",
			lightslategrey: "#789",
			lightsteelblue: "#b0c4de",
			lightyellow: "#ffffe0",
			lime: "#0f0",
			limegreen: "#32cd32",
			linen: "#faf0e6",
			magenta: "#f0f",
			maroon: "#800000",
			mediumaquamarine: "#66cdaa",
			mediumblue: "#0000cd",
			mediumorchid: "#ba55d3",
			mediumpurple: "#9370d8",
			mediumseagreen: "#3cb371",
			mediumslateblue: "#7b68ee",
			mediumspringgreen: "#00fa9a",
			mediumturquoise: "#48d1cc",
			mediumvioletred: "#c71585",
			midnightblue: "#191970",
			mintcream: "#f5fffa",
			mistyrose: "#ffe4e1",
			moccasin: "#ffe4b5",
			navajowhite: "#ffdead",
			navy: "#000080",
			oldlace: "#fdf5e6",
			olive: "#808000",
			olivedrab: "#6b8e23",
			orange: "#ffa500",
			orangered: "#ff4500",
			orchid: "#da70d6",
			palegoldenrod: "#eee8aa",
			palegreen: "#98fb98",
			paleturquoise: "#afeeee",
			palevioletred: "#d87093",
			papayawhip: "#ffefd5",
			peachpuff: "#ffdab9",
			peru: "#cd853f",
			pink: "#ffc0cb",
			plum: "#dda0dd",
			powderblue: "#b0e0e6",
			purple: "#800080",
			red: "#f00",
			rosybrown: "#bc8f8f",
			royalblue: "#4169e1",
			saddlebrown: "#8b4513",
			salmon: "#fa8072",
			sandybrown: "#f4a460",
			seagreen: "#2e8b57",
			seashell: "#fff5ee",
			sienna: "#a0522d",
			silver: "#c0c0c0",
			skyblue: "#87ceeb",
			slateblue: "#6a5acd",
			slategray: "#708090",
			slategrey: "#708090",
			snow: "#fffafa",
			springgreen: "#00ff7f",
			steelblue: "#4682b4",
			tan: "#d2b48c",
			teal: "#008080",
			thistle: "#d8bfd8",
			tomato: "#ff6347",
			turquoise: "#40e0d0",
			violet: "#ee82ee",
			wheat: "#f5deb3",
			white: "#fff",
			whitesmoke: "#f5f5f5",
			yellow: "#ff0",
			yellowgreen: "#9acd32"
		},
		s = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
		t = {
			toColor: e,
			hsb2rgb: k,
			rgb2hsb: m,
			createColorsWithHsb: l,
			getRGBAColorArray: d,
			mixColorWithHSB: j,
			getHighLightColor: f,
			getColorWithDivider: g,
			mixColorWithAlpha: i,
			getColorOpacity: n,
			getColorOpacityWithoutDefault: o,
			colorToHex: p,
			colorToHexAlpha: q,
			getClickColor: h
		};
		return window.ColorUtils = t,
		t
	}),
	c("utils/QueryUtils", ["require", "./BaseUtils"], function (a) {
		function b(a, b) {
			if (a && b) {
				b = b.split(".");
				for (var c = 0, d = b.length; d > c; c++)
					if (a = a[b[c]], void 0 == a)
						return;
				return a
			}
		}
		function c(a, c) {
			if (a && a.length && c)
				for (var d = 0; d < a.length; d++) {
					var e = b(a[d], c);
					if (void 0 != e)
						return e
				}
		}
		function d(a, b, c) {
			for (var e in b)
				if (b.hasOwnProperty(e)) {
					var f = a[e];
					"object" == typeof f ? d(a[e], b[e], c) : !c && e in a || (a[e] = b[e])
				}
			return a
		}
		function e(a, c) {
			if (a && a.length && c) {
				for (var e, g = 0, h = a.length; h > g; g++) {
					var i = b(a[g], c);
					void 0 == e ? e = f.clone(i) : d(e, i)
				}
				return e
			}
		}
		var f = a("./BaseUtils");
		return {
			mergeList: e,
			queryList: c,
			query: b,
			merge: d
		}
	}),
	c("utils/Class", ["require", "./QueryUtils"], function (a) {
		function b() {}
		var c = a("./QueryUtils");
		return b.extend = function (a) {
			var b = function () {
				this.initialize && this.initialize.apply(this, arguments),
				this.callInitHooks()
			},
			d = b.__super__ = this.prototype,
			e = Object.create(d);
			e.constructor = b,
			b.prototype = e;
			for (var f in this)
				this.hasOwnProperty(f) && "prototype" !== f && (b[f] = this[f]);
			return c.merge(e, a, !0),
			e._initHooks = [],
			e.callInitHooks = function () {
				if (!this._initHooksCalled) {
					d.callInitHooks && d.callInitHooks.call(this),
					this._initHooksCalled = !0;
					for (var a = 0, b = e._initHooks.length; b > a; a++)
						e._initHooks[a].call(this)
				}
			},
			b
		},
		b.addInitHook = function (a) {
			var b = Array.prototype.slice.call(arguments, 1),
			c = "function" == typeof a ? a : function () {
				this[a].apply(this, b)
			};
			return this.prototype._initHooks = this.prototype._initHooks || [],
			this.prototype._initHooks.push(c),
			this
		},
		b
	}),
	c("ComponentLibrary", [], function () {
		function a(a) {
			return c[a]
		}
		function b(a, b) {
			c[a] = b
		}
		var c = Object.create(null);
		return {
			get: a,
			register: b
		}
	}),
	c("ChartLibrary", [], function () {
		function a(a) {
			return c[a]
		}
		function b(a, b) {
			c[a] = b
		}
		var c = {};
		return {
			get: a,
			register: b
		}
	}),
	c("render/RenderLibrary", [], function () {
		function a(a) {
			return d[a]
		}
		function b(b, c) {
			var d = a(b);
			return d ? new d(c) : void 0
		}
		function c(a, b) {
			d[a] = b
		}
		var d = Object.create(null);
		return {
			get: a,
			getRender: b,
			register: c
		}
	}),
	c("render/RenderFactory", ["require", "./RenderLibrary", "../Constants", "../utils/BaseUtils"], function (a) {
		function b(a, b) {
			var d = e.isSupportSVG() ? f[a] : g[a];
			return c.getRender(d, b)
		}
		var c = a("./RenderLibrary"),
		d = a("../Constants"),
		e = a("../utils/BaseUtils"),
		f = {};
		f[d.VANCHART] = d.VANCHART_SVG,
		f[d.PIE_CHART] = d.PIE_SVG,
		f[d.MULTIPIE_CHART] = d.MULTIPIE_SVG,
		f[d.BAR_CHART] = d.BAR_SVG,
		f[d.COLUMN_CHART] = d.BAR_SVG,
		f[d.LINE_CHART] = d.LINE_SVG,
		f[d.AREA_CHART] = d.AREA_SVG,
		f[d.GAUGE_CHART] = d.GAUGE_SVG,
		f[d.RADAR_CHART] = d.RADAR_SVG,
		f[d.BUBBLE_CHART] = d.BUBBLE_SVG,
		f[d.SCATTER_CHART] = d.SCATTER_SVG,
		f[d.MAP_CHART] = d.MAP_SVG,
		f[d.TITLE_COMPONENT] = d.TITLE_SVG,
		f[d.DRILL_TOOLS] = d.DRILL_TOOLS_SVG,
		f[d.LEGEND_COMPONENT] = d.LEGEND_SVG,
		f[d.TOOLBAR_COMPONENT] = d.TOOLBAR_SVG,
		f[d.X_AXIS_COMPONENT] = d.AXIS_RENDER,
		f[d.Y_AXIS_COMPONENT] = d.AXIS_RENDER,
		f[d.RADIUS_AXIS_COMPONENT] = d.AXIS_RENDER,
		f[d.ANGLE_AXIS_COMPONENT] = d.AXIS_RENDER,
		f[d.RADIUS_AXIS_RENDER] = d.RADIUS_AXIS_SVG,
		f[d.ANGLE_AXIS_RENDER] = d.ANGLE_AXIS_SVG,
		f[d.CATEGORY_AXIS_COMPONENT] = d.CATEGORY_AXIS_SVG,
		f[d.VALUE_AXIS_COMPONENT] = d.VALUE_AXIS_SVG,
		f[d.DATE_AXIS_COMPONENT] = d.DATE_AXIS_SVG,
		f[d.ZOOM_COMPONENT] = d.ZOOM_SVG,
		f[d.DATA_SHEET_COMPONENT] = d.DATA_SHEET_SVG,
		f[d.RANGE_LEGEND_COMPONENT] = d.RANGE_LEGEND_SVG;
		var g = {};
		return g[d.VANCHART] = d.VANCHART_VML,
		g[d.PIE_CHART] = d.PIE_VML,
		g[d.MULTIPIE_CHART] = d.MULTIPIE_VML,
		g[d.BAR_CHART] = d.BAR_VML,
		g[d.COLUMN_CHART] = d.BAR_VML,
		g[d.LINE_CHART] = d.LINE_VML,
		g[d.AREA_CHART] = d.AREA_VML,
		g[d.GAUGE_CHART] = d.GAUGE_VML,
		g[d.RADAR_CHART] = d.RADAR_VML,
		g[d.BUBBLE_CHART] = d.BUBBLE_VML,
		g[d.SCATTER_CHART] = d.SCATTER_VML,
		g[d.MAP_CHART] = d.MAP_VML,
		g[d.TITLE_COMPONENT] = d.TITLE_VML,
		g[d.DRILL_TOOLS] = d.DRILL_TOOLS_VML,
		g[d.LEGEND_COMPONENT] = d.LEGEND_VML,
		g[d.TOOLBAR_COMPONENT] = d.TOOLBAR_VML,
		g[d.X_AXIS_COMPONENT] = d.AXIS_RENDER,
		g[d.Y_AXIS_COMPONENT] = d.AXIS_RENDER,
		g[d.RADIUS_AXIS_COMPONENT] = d.AXIS_RENDER,
		g[d.ANGLE_AXIS_COMPONENT] = d.AXIS_RENDER,
		g[d.RADIUS_AXIS_RENDER] = d.RADIUS_AXIS_VML,
		g[d.ANGLE_AXIS_RENDER] = d.ANGLE_AXIS_VML,
		g[d.CATEGORY_AXIS_COMPONENT] = d.CATEGORY_AXIS_VML,
		g[d.VALUE_AXIS_COMPONENT] = d.VALUE_AXIS_VML,
		g[d.DATE_AXIS_COMPONENT] = d.DATE_AXIS_VML,
		g[d.DATA_SHEET_COMPONENT] = d.DATA_SHEET_VML,
		g[d.RANGE_LEGEND_COMPONENT] = d.RANGE_LEGEND_VML, {
			getRender: b
		}
	}),
	c("dom/Browser", ["require"], function (a) {
		var b = navigator.userAgent.toLowerCase(),
		c = document.documentElement,
		d = "ActiveXObject" in window,
		e = -1 !== b.indexOf("webkit"),
		f = -1 !== b.indexOf("phantom"),
		g = -1 !== b.search("android [23]"),
		h = -1 !== b.indexOf("chrome"),
		i = -1 !== b.indexOf("gecko") && !e && !window.opera && !d,
		j = "undefined" != typeof orientation || -1 !== b.indexOf("mobile"),
		k = !window.PointerEvent && window.MSPointerEvent,
		l = window.PointerEvent || k,
		m = d && "transition" in c.style,
		n = "WebKitCSSMatrix" in window && "m11" in new window.WebKitCSSMatrix && !g,
		o = "MozPerspective" in c.style,
		p = "OTransition" in c.style,
		q = !window.L_NO_TOUCH && (l || "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch);
		return {
			ie: d,
			ielt9: d && !document.addEventListener,
			edge: "msLaunchUri" in navigator && !("documentMode" in document),
			webkit: e,
			gecko: i,
			android: -1 !== b.indexOf("android"),
			android23: g,
			chrome: h,
			safari: !h && -1 !== b.indexOf("safari"),
			ie3d: m,
			webkit3d: n,
			gecko3d: o,
			opera12: p,
			any3d: !window.L_DISABLE_3D && (m || n || o) && !p && !f,
			mobile: j,
			mobileWebkit: j && e,
			mobileWebkit3d: j && n,
			mobileOpera: j && window.opera,
			mobileGecko: j && i,
			touch: !!q,
			msPointer: !!k,
			pointer: !!l,
			retina: (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI) > 1
		}
	}),
	c("dom/DomEvent", ["require", "../utils/BaseUtils", "./Browser"], function (a) {
		var b = "_vanchart_events",
		c = a("../utils/BaseUtils"),
		d = a("./Browser"),
		e = {
			on: function (a, b, d, e) {
				if ("object" == typeof b)
					for (var f in b)
						this._on(a, f, b[f], d);
				else {
					b = c.splitWords(b);
					for (var g = 0, h = b.length; h > g; g++)
						this._on(a, b[g], d, e)
				}
				return this
			},
			off: function (a, b, d, e) {
				if (b)
					if ("object" == typeof b)
						for (var f in b)
							this._off(a, f, b[f], d);
					else {
						b = c.splitWords(b);
						for (var g = 0, h = b.length; h > g; g++)
							this._off(a, b[g], d, e)
					}
				else
					delete this._events;
				return this
			},
			_on: function (a, f, g, h) {
				var i = f + c.stamp(g) + (h ? "_" + c.stamp(h) : "");
				if (a[b] && a[b][i])
					return this;
				var j = function (b) {
					return g.call(h || a, b || window.event)
				},
				k = j;
				return "addEventListener" in a ? "mousewheel" === f ? a.addEventListener("onwheel" in a ? "wheel" : "mousewheel", j, !1) : "mouseenter" === f || "mouseleave" === f ? (j = function (b) {
					b = b || window.event,
					e._isExternalTarget(a, b) && k(b)
				}, a.addEventListener("mouseenter" === f ? "mouseover" : "mouseout", j, !1)) : ("click" === f && d.android && (j = function (a) {
						return e._filterClick(a, k)
					}), a.addEventListener(f, j, !1)) : "attachEvent" in a && a.attachEvent("on" + f, j),
				a[b] = a[b] || {},
				a[b][i] = j,
				this
			},
			_off: function (a, d, e, f) {
				var g = d + c.stamp(e) + (f ? "_" + c.stamp(f) : ""),
				h = a[b] && a[b][g];
				return h ? ("removeEventListener" in a ? "mousewheel" === d ? a.removeEventListener("onwheel" in a ? "wheel" : "mousewheel", h, !1) : a.removeEventListener("mouseenter" === d ? "mouseover" : "mouseleave" === d ? "mouseout" : d, h, !1) : "detachEvent" in a && a.detachEvent("on" + d, h), a[b][g] = null, this) : this
			},
			stopPropagation: function (a) {
				return a.stopPropagation ? a.stopPropagation() : a.originalEvent ? a.originalEvent._stopped = !0 : a.cancelBubble = !0,
				e._skipped(a),
				this
			},
			disableScrollPropagation: function (a) {
				return e.on(a, "mousewheel", e.stopPropagation)
			},
			disableClickPropagation: function (a) {
				var b = e.stopPropagation;
				return e.on(a, Draggable.START.join(" "), b),
				e.on(a, {
					click: e._fakeStop,
					dblclick: b
				})
			},
			preventDefault: function (a) {
				return a.preventDefault ? a.preventDefault() : a.returnValue = !1,
				this
			},
			stop: function (a) {
				return e.preventDefault(a).stopPropagation(a)
			},
			getWheelDelta: function (a) {
				return a.deltaY && 0 === a.deltaMode ? -a.deltaY : a.deltaY && 1 === a.deltaMode ? 18 * -a.deltaY : a.deltaY && 2 === a.deltaMode ? 52 * -a.deltaY : a.deltaX || a.deltaZ ? 0 : a.wheelDelta ? (a.wheelDeltaY || a.wheelDelta) / 2 : a.detail && Math.abs(a.detail) < 32765 ? 18 * -a.detail : a.detail ? a.detail / -32765 * 52 : 0
			},
			_skipEvents: {},
			_fakeStop: function (a) {
				e._skipEvents[a.type] = !0
			},
			_skipped: function (a) {
				var b = this._skipEvents[a.type];
				return this._skipEvents[a.type] = !1,
				b
			},
			_isExternalTarget: function (a, b) {
				var c = b.relatedTarget;
				if (!c)
					return !0;
				try {
					for (; c && c !== a; )
						c = c.parentNode
				} catch (a) {
					return !1
				}
				return c !== a
			},
			_filterClick: function (a, b) {
				var c = a.timeStamp || a.originalEvent && a.originalEvent.timeStamp,
				d = e._lastClick && c - e._lastClick;
				return d && d > 100 && 500 > d || a.target._simulatedClick && !a._simulated ? void e.stop(a) : (e._lastClick = c, void b(a))
			}
		};
		return e.addListener = e.on,
		e.removeListener = e.off,
		e
	}),
	c("dom/Evented", ["require", "../utils/QueryUtils", "../utils/BaseUtils"], function (a) {
		var b = (a("../utils/QueryUtils"), a("../utils/BaseUtils"));
		return {
			on: function (a, c, d) {
				if ("object" == typeof a)
					for (var e in a)
						this._on(e, a[e], c);
				else {
					a = b.splitWords(a);
					for (var f = 0, g = a.length; g > f; f++)
						this._on(a[f], c, d)
				}
				return this
			},
			off: function (a, c, d) {
				if (a)
					if ("object" == typeof a)
						for (var e in a)
							this._off(e, a[e], c);
					else {
						a = b.splitWords(a);
						for (var f = 0, g = a.length; g > f; f++)
							this._off(a[f], c, d)
					}
				else
					delete this._events;
				return this
			},
			_on: function (a, c, d) {
				var e = this._events = this._events || {},
				f = d && d !== this && b.stamp(d);
				if (f) {
					var g = a + "_idx",
					h = a + "_len",
					i = e[g] = e[g] || {},
					j = b.stamp(c) + "_" + f;
					i[j] || (i[j] = {
							fn: c,
							ctx: d
						}, e[h] = (e[h] || 0) + 1)
				} else
					e[a] = e[a] || [], e[a].push({
						fn: c
					})
			},
			_off: function (a, c, d) {
				var e = this._events,
				f = a + "_idx",
				g = a + "_len";
				if (e) {
					if (!c)
						return delete e[a], delete e[f], void delete e[g];
					var h,
					i,
					j,
					k,
					l,
					m = d && d !== this && b.stamp(d);
					if (m)
						l = b.stamp(c) + "_" + m, h = e[f], h && h[l] && (k = h[l], delete h[l], e[g]--);
					else if (h = e[a])
						for (i = 0, j = h.length; j > i; i++)
							if (h[i].fn === c) {
								k = h[i],
								h.splice(i, 1);
								break
							}
					k && (k.fn = b.falseFn)
				}
			},
			fire: function (a, c, d) {
				if (!this.listens(a, d))
					return this;
				var e = b.extend({}, c, {
						type: a,
						target: this
					}),
				f = this._events;
				if (f) {
					var g,
					h,
					i,
					j,
					k = f[a + "_idx"];
					if (f[a])
						for (i = f[a].slice(), g = 0, h = i.length; h > g; g++)
							i[g].fn.call(this, e);
					for (j in k)
						k[j].fn.call(k[j].ctx, e)
				}
				return d && this._propagateEvent(e),
				this
			},
			listens: function (a, b) {
				var c = this._events;
				if (c && (c[a] || c[a + "_len"]))
					return !0;
				if (b)
					for (var d in this._eventParents)
						if (this._eventParents[d].listens(a, b))
							return !0;
				return !1
			},
			addEventParent: function (a) {
				return this._eventParents = this._eventParents || {},
				this._eventParents[b.stamp(a)] = a,
				this
			},
			removeEventParent: function (a) {
				return this._eventParents && delete this._eventParents[b.stamp(a)],
				this
			},
			_propagateEvent: function (a) {
				for (var c in this._eventParents)
					this._eventParents[c].fire(a.type, b.extend({
							layer: a.target
						}, a), !0)
			}
		}
	}),
	c("Handler", ["require", "./utils/BaseUtils", "./Constants", "./dom/DomEvent", "./dom/Evented"], function (a) {
		function b(a, b) {
			this.vanchart = a,
			this._container = b,
			this._targets = {},
			!a._leaflet && this._initEvents()
		}
		var c = 5,
		d = a("./utils/BaseUtils"),
		e = a("./Constants"),
		f = a("./dom/DomEvent"),
		g = a("./dom/Evented");
		return b.prototype = {
			_initEvents: function () {
				d.extend(this, g),
				this.initTargets(),
				d.hasTouch() ? (this.on({
						touchstart: this._onContainerMouseMove,
						touchend: this._onContainerMouseUp
					}, this), f.on(this._container, "touchstart touchend", this._handleDOMEvent, this)) : (this.on({
						mousemove: this._onContainerMouseMove,
						mousedown: this._onContainerMouseDown,
						mouseup: this._onContainerMouseUp,
						mouseout: this._onContainerMouseOut
					}, this), f.on(this._container, "click dblclick mousedown mouseup mouseout mouseover mousemove contextmenu keypress", this._handleDOMEvent, this))
			},
			offEvents: function () {
				d.hasTouch() ? f.off(this._container, "touchstart touchend", this._handleDOMEvent, this) : f.off(this._container, "click dblclick mousedown mouseup mouseout mouseover mousemove contextmenu keypress", this._handleDOMEvent, this)
			},
			initTargets: function () {
				this._targets = {},
				this._targets[d.stamp(this._container)] = this
			},
			_handleDOMEvent: function (a) {
				if (!f._skipped(a)) {
					var b = "keypress" === a.type && 13 === a.keyCode ? "click" : a.type;
					this._fireDOMEvent(a, b)
				}
			},
			_fireDOMEvent: function (a, b, c) {
				if (!a._stopped && (c = (c || []).concat(this._findEventTargets(a, b)), c.length)) {
					var e = c[0];
					"contextmenu" === b && e.listens(b, !0) && f.preventDefault(a);
					var g = {
						originalEvent: a
					};
					"keypress" !== a.type && (g.containerPoint = d.getMousePos(a, this._container));
					for (var h = 0; h < c.length; h++)
						if (c[h].fire(b, g, !0), g.originalEvent._stopped)
							return
				}
			},
			_findEventTargets: function (a, b) {
				for (var c, e = [], g = "mouseout" === b || "mouseover" === b || "touchstart" == b || "touchend" == b, h = a.target || a.srcElement, i = !1; h; ) {
					if (c = this._targets[d.stamp(h)], c && ("click" === b || "preclick" === b) && !a._simulated) {
						i = !0;
						break
					}
					if (c && c.listens(b, !0)) {
						if (g && !f._isExternalTarget(h, a))
							break;
						if (e.push(c), g)
							break
					}
					if (h === this._container)
						break;
					h = h.parentNode
				}
				return e.length || i || g || !f._isExternalTarget(h, a) || (e = [this]),
				e
			},
			addInteractiveTarget: function (a, b, c) {
				d.extend(a, g);
				var e = d.isSupportSVG() ? a.node() : a.node,
				f = a.datum();
				this._targets[d.stamp(e)] = a,
				this._targets[d.stamp(f)] = a,
				a.on(b, c)
			},
			fireEventByData: function (a, b, c) {
				var e = a ? this._targets[d.stamp(a)] : null;
				e && e.fire(b, c)
			},
			_onContainerMouseOut: function () {
				var a = this.vanchart.getTooltip();
				a && a.hide()
			},
			_onContainerMouseDown: function (a) {
				var b = this.vanchart,
				c = this.vanchart.hoverPoint,
				e = a.containerPoint,
				f = b.getPlotBounds(),
				g = b.getTooltip();
				if (b.isMouseDown = !0, b.downPos = e, g.immediateHide(), c) {
					var h = c.series.chart;
					this._draggingTarget = h.findDraggingTarget && h.findDraggingTarget(a)
				}
				this.selectRect && (this.selectRect.remove(), this.selectRect = null),
				!this._draggingTarget && this._supportCoordinateZoom() && d.containsPoint(f, e) && (this.selectRect = this.vanchart.render.getRenderRoot().append("rect"))
			},
			_onContainerMouseUp: function (a) {
				var b = this.vanchart,
				f = b.components,
				g = a.containerPoint;
				if (this.selectRect) {
					if (b.downPos && g && d.distance(b.downPos, g) > c && (b.dealAxisZoom(b.downPos, g), f[e.TOOLBAR_COMPONENT])) {
						var h = f[e.TOOLBAR_COMPONENT];
						h.showRefreshIconWhenZoom()
					}
					this.selectRect.remove(),
					this.selectRect = null
				}
				b.isMouseDown && this._draggingTarget && (this._draggingTarget.dragEnd(a), this._draggingTarget = null),
				b.hoverPoint && this.validClick(g) && b.hoverPoint.onClick(a.originalEvent),
				b.isMouseDown = !1,
				b.downPos = null
			},
			_onContainerMouseMove: function (a) {
				var b = this.vanchart,
				c = a.containerPoint,
				f = this.vanchart.hoverPoint,
				g = this.vanchart.getPlotBounds(),
				h = this.vanchart.getOptions(),
				i = b.getSharedAxis();
				if (this.selectRect) {
					var j = h.zoom.zoomType,
					k = Math.min(c[0], b.downPos[0]),
					l = Math.min(c[1], b.downPos[1]),
					m = Math.abs(c[0] - b.downPos[0]),
					n = Math.abs(c[1] - b.downPos[1]),
					o = -1 != j.indexOf("x"),
					p = -1 != j.indexOf("y");
					o && !p ? (l = g.y, n = g.height) : p && !o && (k = g.x, m = g.width),
					this.selectRect.attr("x", k).attr("y", l).attr("width", m).attr("height", n).style({
						fill: "rgba(69,114,167,0.25)"
					})
				}
				var q = this.vanchart.getTooltip(),
				r = d.containsPoint(g, c);
				if (r) {
					if (f && !f.series.supportSharedTooltip)
						i && i.getRender().removeHighlightBand(), this._setCoveredKey(null, a);
					else if (i && i.type === e.CATEGORY_AXIS_COMPONENT && 0 !== this._getCoveredPointsByPos(c).length)
						this._highlightShared(a);
					else if (f) {
						var s = f.series.chart,
						t = s.getClosestPoint(c);
						if (!t || t.tooltip && t.tooltip.shared) {
							if (i && -1 !== [e.VALUE_AXIS_COMPONENT, e.DATE_AXIS_COMPONENT].indexOf(i.type)) {
								var u = t || f;
								this._highlightShared(a, u)
							}
						} else
							i && i.getRender().removeHighlightBand(), this._setCoveredKey(null), t != f && (this.fireEventByData(f, "mouseout", a), this.fireEventByData(t, "mouseover", a))
					}
					var v = b.getChart(e.SCATTER_CHART) || b.getChart(e.BUBBLE_CHART);
					v && v.isLargeMode() && (b.hoverPoint = v.getClosestPoint(c))
				}
				this.vanchart.coveredKey || q.showWithPoint(b.hoverPoint, a.originalEvent),
				(!r && this.vanchart.coveredKey || this._draggingTarget) && (q.hide(), f && this.fireEventByData(f, "mouseout", a), i && i.getRender().removeHighlightBand(), this._setCoveredKey(null)),
				b.isMouseDown && this._draggingTarget && this._draggingTarget.onDrag(a)
			},
			_getCoveredPointsByPos: function (a, b) {
				b = b || this.vanchart.getSharedAxis();
				var c = b.getIndexByPosition(a),
				d = b.type === e.CATEGORY_AXIS_COMPONENT ? b.scale.domain()[c] : c;
				return this._getCoveredPointsByKey(d)
			},
			_getCoveredPointsByKey: function (a, b) {
				return b = b || this.vanchart.getSharedAxis(),
				a && b && b.sharedPoints[a] || []
			},
			_setCoveredKey: function (a, b) {
				if (null === a) {
					if (d.isNull(this.vanchart.coveredKey))
						return;
					var c = this._getCoveredPointsByKey(this.vanchart.coveredKey);
					c.map(function (a) {
						this.fireEventByData(a, "leave", b)
					}, this)
				} else {
					if ("string" != typeof a && isNaN(a))
						throw new TypeError(a);
					if (this.vanchart.coveredKey === a)
						return;
					this._setCoveredKey(null, b);
					var e = this._getCoveredPointsByKey(a);
					e.map(function (a) {
						this.fireEventByData(a, "cover", b)
					}, this)
				}
				this.vanchart.coveredKey = a
			},
			_highlightShared: function (a, b) {
				var c = this.vanchart.getSharedAxis();
				if (c) {
					var f,
					g = this.vanchart.getParentDom(),
					h = d.getMousePos(a, g),
					i = this.vanchart.getTooltip();
					if (b)
						f = b.category;
					else {
						var j = c.getIndexByPosition(h);
						f = c.type === e.CATEGORY_AXIS_COMPONENT ? c.scale.domain()[j] : j
					}
					0 !== this._getCoveredPointsByKey(f).length ? (c.getRender().drawHighlightBand(h), this._setCoveredKey(f, a), this.fireEventByData(this.vanchart.hoverSeries, "forceMouseOut", a), i.showWithSharedPoints(this._getCoveredPointsByKey(this.vanchart.coveredKey), a.originalEvent)) : (c.getRender().removeHighlightBand(), i.hide())
				}
			},
			_supportCoordinateZoom: function () {
				var a = this.vanchart.getOptions(),
				b = this.vanchart.hoverPoint;
				return b && b.series.chart.isUpdateWithForce() ? void 0 : d.isSupportSVG() && a.zoom && a.zoom.zoomType
			},
			validClick: function (a) {
				return !this.vanchart.downPos || d.distance(this.vanchart.downPos, a) < c
			}
		},
		b
	}),
	c("utils/Formatter", ["require", "./BaseUtils"], function (a) {
		function b(a, b) {
			return b = c.getFormatterFunction(b),
			b ? b.bind(a)(a) : a
		}
		var c = a("./BaseUtils");
		return {
			format: b
		}
	}),
	c("theme/options", ["require", "../Constants"], function (a) {
		var b = a("../Constants"),
		c = {};
		return c[b.PIE_CHART] = {
			plotOptions: {}
		},
		c[b.MULTIPIE_CHART] = {
			innerRadiusPct: 2 / 3,
			plotOptions: {
				borderWidth: 1,
				borderColor: "rgb(255,255,255)",
				rotatable: !0,
				gradual: "lighter",
				center: [],
				innerRadius: 0,
				startAngle: 0,
				endAngle: 360,
				drilldown: !0
			}
		},
		c[b.COLUMN_CHART] = {
			plotOptions: {
				categoryGap: "20%",
				gap: "20%"
			}
		},
		c[b.BAR_CHART] = {
			plotOptions: {}
		},
		c[b.LINE_CHART] = c[b.AREA_CHART] = {
			plotOptions: {
				large: !1,
				marker: {
					symbol: "null_marker"
				},
				dataLabels: {
					enabled: !1,
					align: "outside"
				}
			}
		},
		c[b.GAUGE_CHART] = {
			plotOptions: {}
		},
		c[b.RADAR_CHART] = {
			plotOptions: {
				columnType: !1,
				marker: {
					symbol: "null_marker"
				},
				borderWidth: 1,
				borderColor: "white",
				lineWidth: 1,
				shape: "circle"
			}
		},
		c[b.SCATTER_CHART] = {
			plotOptions: {
				fillColorOpacity: 1,
				opacity: 1
			}
		},
		c[b.BUBBLE_CHART] = {
			plotOptions: {
				fillColorOpacity: .75,
				opacity: .75
			}
		},
		c[b.AREA_MAP] = {
			plotOptions: {
				fillColor: "#cccccc",
				fillColorOpacity: .75,
				borderColor: "#ffffff",
				borderWidth: 1,
				borderOpacity: 1
			}
		},
		c[b.POINT_MAP] = {
			plotOptions: {
				icon: {
					iconUrl: "../../doc/example/marker-icon.png",
					iconSize: [25, 41]
				}
			}
		},
		c
	}),
	c("component/Point", ["require", "../utils/QueryUtils", "../utils/BaseUtils", "../utils/ColorUtils", "../utils/Formatter", "../Constants", "../theme/options"], function (a) {
		function b(a, b, c) {
			a && b && (this.series = a, this.index = c, this.pointOption = b, this.updateClassName(c), this._init(b))
		}
		var c = a("../utils/QueryUtils"),
		d = a("../utils/BaseUtils"),
		e = a("../utils/ColorUtils"),
		f = a("../utils/Formatter"),
		g = a("../Constants"),
		h = a("../theme/options"),
		i = "CATEGORY",
		j = "SERIES",
		k = "VALUE",
		l = "PERCENT",
		m = "NAME",
		n = 2;
		return b.prototype = {
			constructor: b,
			isPoint: !0,
			_init: function (a) {
				var b = this.series,
				f = this.series.chart,
				i = [a, b.seriesOption, b.chart.option.plotOptions[b.type], b.chart.option.plotOptions, h[b.type].plotOptions],
				j = c.queryList(i, "dataLabels"),
				k = c.queryList(i, "tooltip"),
				l = d.pick(a.y, a.value, a.size),
				m = b.valueAxis ? b.valueAxis.getValueFromData(a) : l,
				n = "-" === m || void 0 === m || null == m;
				b.valueAxis && b.valueAxis.componentOption.log && (n = 0 >= m),
				m = n ? 0 : m;
				var o = b.baseAxis && !b.chart.isForceBubble() ? b.baseAxis.getValueFromData(a, this.index) : d.pick(a.x, a.name, b.seriesOption.name),
				p = b.name;
				if ((b.type === g.PIE_CHART || b.type === g.GAUGE_CHART) && (p = [o, o = p][0], p = d.isNull(p) ? "SeriesX" + this.index : p), b.type === g.GAUGE_CHART || this.index < 0)
					var q = "#000";
				else if (b.type === g.MULTIPIE_CHART)
					var q = f.vanchart.getDefaultSeriesColor(a.name);
				else
					var q = f.vanchart.getDefaultSeriesColor(p);
				var r = q,
				s = f.vanchart.getComponent(g.RANGE_LEGEND_COMPONENT);
				if (n && b.type == g.AREA_MAP)
					q = c.queryList(i, "fillColor");
				else if (s) {
					var t = d.pick(c.queryList(i, "size"), 0);
					t = f.isForceBubble() ? a.y : t,
					t = b.type == g.AREA_MAP || b.type == g.POINT_MAP ? m : t,
					q = s.getColorWithSize(t) || q
				}
				q = c.queryList(i, "color") || q,
				q = b._getBandsColor(this) || q;
				var u = e.getClickColor(q),
				v = c.queryList(i, "mouseOverColor") || e.getHighLightColor(q);
				c.merge(this, {
					value: m,
					y: m,
					y0: b.valueAxis ? b.valueAxis.getStartPosValue() : 0,
					category: o,
					seriesName: p,
					visible: d.pick(a.visible, !0),
					name: a.name,
					lnglat: a.lnglat,
					drill: c.queryList(i, "drilldown"),
					opacity: c.queryList(i, "opacity"),
					isNull: n,
					style: b.style,
					color: q,
					_color: r,
					clickColor: u,
					hyperlink: c.queryList(i, "hyperlink"),
					jsonHyperlink: c.queryList(i, "jsonHyperlink"),
					click: c.queryList(i, "click"),
					borderWidth: c.queryList(i, "borderWidth") || 0,
					borderColor: c.queryList(i, "borderColor") || "white",
					borderRadius: c.queryList(i, "borderRadius") || 0,
					image: c.queryList(i, "image"),
					imageWidth: c.queryList(i, "imageWidth") || 0,
					imageHeight: c.queryList(i, "imageHeight") || 0,
					dataLabels: n ? null : j,
					tooltip: k,
					mouseOverColor: v
				}, !0),
				f.mergeDataPointAttributes(this)
			},
			updateClassName: function (a) {
				this.className = "vancharts-dataPoint-series" + this.series.index + "point" + a
			},
			setPercentage: function (a) {
				this.percentage = a,
				this.dataLabels && this.dataLabels.enabled && c.merge(this, this._calculateLabelInfo(this.dataLabels), !0)
			},
			_calculateLabelInfo: function (a) {
				var b = a || {},
				c = b.formatter,
				e = b.useHtml;
				if (!c)
					return {};
				var g = [];
				if ("object" == typeof c) {
					var h = c.identifier,
					n = [];
					if (-1 != h.indexOf(m)) {
						var o = f.format(this.name, c.nameFormat);
						n.push(o)
					}
					if (-1 != h.indexOf(i)) {
						var p = f.format(this.category, c.categoryFormat);
						n.push(p)
					}
					if (-1 != h.indexOf(j)) {
						var q = f.format(this.seriesName, c.seriesFormat);
						n.push(q)
					}
					if (n.length) {
						var r = n.join(" "),
						s = this.getCategorySeriesStyle(b),
						t = d.getTextDimension(r, s, e);
						g.push({
							text: r,
							style: s,
							dim: t
						})
					}
					if (-1 != h.indexOf(k) || -1 != h.indexOf(l)) {
						var u = f.format(this.value, c.valueFormat),
						v = f.format(this.percentage, c.percentFormat),
						r = "";
						r = -1 != h.indexOf(k) && -1 != h.indexOf(l) ? u + " " + v : -1 != h.indexOf(k) ? u : v;
						var s = this.getValuePercentageStyle(b),
						t = d.getTextDimension(r, s, e);
						g.push({
							text: r,
							style: s,
							dim: t
						})
					}
				} else
					this.pushCustomLabelContent(c, b, e, g);
				var w = this.calculateTextDim(g);
				return {
					labelContent: g,
					labelDim: w
				}
			},
			pushCustomLabelContent: function (a, b, c, e, f) {
				var g = d.getFormatterFunction(a).call(this),
				h = this.getValuePercentageStyle(b, f),
				i = d.getTextDimension(g, h, c);
				b.useHtml && (i.width = isNaN(parseFloat(b.labelWidth)) ? i.width : parseFloat(b.labelWidth), i.height = isNaN(parseFloat(b.labelHeight)) ? i.height : parseFloat(b.labelHeight)),
				e.push({
					text: g,
					style: h,
					dim: i
				})
			},
			calculateTextDim: function (a) {
				var b = 0,
				c = 0;
				if (a && a.length) {
					for (var d = 0, e = a.length; e > d; d++) {
						var f = a[d].dim;
						b = Math.max(b, f.width),
						c += f.height
					}
					c += (e - 1) * n
				}
				return {
					width: b,
					height: c
				}
			},
			getCategorySeriesStyle: function (a, b) {
				if (a && a.style)
					return a.style;
				var c = b || (this.columnType ? g.INSIDE : a.align || g.OUTSIDE),
				d = c === g.OUTSIDE ? .1 : .15;
				return {
					color: c == g.OUTSIDE ? e.colorToHex(this.color) : "#ffffff",
					fontSize: "12px",
					fontFamily: "Verdana",
					textShadow: "1px 1px 1px rgba(0,0,0," + d + ")",
					fontWeight: "bold"
				}
			},
			getValuePercentageStyle: function (a, b) {
				if (a && a.style)
					return a.style;
				var c = b || (this.columnType ? g.INSIDE : a.align || g.OUTSIDE);
				return {
					fontSize: "12px",
					fontFamily: "Verdana",
					textShadow: "1px 1px 1px rgba(0,0,0,0.15)",
					color: c == g.OUTSIDE ? e.colorToHex(this.color) : "#ffffff"
				}
			},
			onClick: function (a) {
				if (this.click)
					this.click.call(this, a);
				else if (this.hyperlink) {
					a = a.touches ? a.touches.length ? a.touches.item(0) : a.changedTouches[0] : a;
					var b = this.hyperlink;
					b && window.FR && FR.doHyperlink(a, new Function("return " + b)(), !0)
				}
			}
		},
		b
	}),
	c("component/Series", ["require", "../utils/BaseUtils", "../utils/QueryUtils", "../Constants", "./Point", "../theme/options"], function (a) {
		function b(a, b) {
			this.chart = a,
			this._init(b)
		}
		var c = a("../utils/BaseUtils"),
		d = a("../utils/QueryUtils"),
		e = a("../Constants"),
		f = a("./Point"),
		g = a("../theme/options");
		return b.prototype = {
			constructor: b,
			isSeries: !0,
			_init: function (a) {
				var b = this.chart.vanchart,
				h = this.chart.option.plotOptions;
				this.type = a.type,
				this.index = b.totalSeriesCount++;
				var i = [a, h[this.type], h, g[this.type].plotOptions];
				this.seriesOption = a,
				this.name = c.pick(a.name, "Series" + this.index),
				this.className = "vancharts-series-" + this.index,
				-1 === [e.PIE_CHART, e.GAUGE_CHART, e.MULTIPIE_CHART].indexOf(this.type) && (this.color = d.queryList(i, "color") || this.chart._getDefaultSeriesColor(this.name)),
				this.visible = d.queryList(i, "visible"),
				this.stack = d.queryList(i, "stack"),
				this.stackByPercent = d.queryList(i, "stackByPercent"),
				this.style = d.queryList(i, "style"),
				this.trendLine = d.queryList(i, "trendLine"),
				this.bands = d.queryList(i, "bands"),
				this.image = d.queryList(i, "image"),
				this.tooltip = d.queryList(i, "tooltip"),
				this.fillColorOpacity = d.queryList(i, "fillColorOpacity"),
				this.supportSharedTooltip = !1,
				-1 !== [e.BAR_CHART, e.COLUMN_CHART, e.LINE_CHART, e.AREA_CHART, e.RADAR_CHART].indexOf(this.type) && (this.supportSharedTooltip = !0);
				var j = c.clone(d.queryList(i, "marker"));
				switch (this.marker = j, this.type) {
				case e.PIE_CHART:
				case e.MULTIPIE_CHART:
					break;
				case e.GAUGE_CHART:
					this.gaugeAxis = b.gaugeAxis(d.queryList(i, "gaugeAxis"));
					break;
				case e.RADAR_CHART:
					var k = d.queryList(i, "columnType");
					k && (this.stack = e.RADAR_CHART),
					this.polar = b.polar(d.queryList(i, "polar")),
					this.polar.shape = d.queryList(i, "shape"),
					this.radiusAxis = this.polar.radiusAxis,
					this.angleAxis = this.polar.angleAxis,
					this.radiusAxis && this.angleAxis && (this.baseAxis = this.angleAxis, this.baseAxis.isBaseAxis = !0, this.valueAxis = this.radiusAxis);
					break;
				default:
					this.xAxis = b.xAxis(d.queryList(i, "xAxis")),
					this.yAxis = b.yAxis(d.queryList(i, "yAxis")),
					this.xAxis && this.yAxis && (this.baseAxis = this._getBaseAxis(), this.baseAxis.isBaseAxis = !0, this.valueAxis = this._getValueAxis())
				}
				this.chart.mergeSeriesAttributes(this),
				this.points = [],
				this.visiblePoints = [];
				var l = a.data,
				m = this;
				this.points = l.map(function (a, b) {
						return new f(m, a, b)
					}),
				this.updateVisiblePoints()
			},
			updateVisiblePoints: function () {
				this.visiblePoints = this.points.filter(function (a) {
						return a.visible
					})
			},
			updateClassName: function () {
				if (this.baseAxis && this.baseAxis.type == e.CATEGORY_AXIS_COMPONENT) {
					var a = this.baseAxis.categories,
					b = [];
					this.points.forEach(function (e) {
						var g = d.merge(new f, e);
						g.updateClassName(c.indexInArray(a, e.category)),
						b.push(g)
					}),
					this.points = b,
					this.originalPoints && (this.originalPoints = this.points)
				}
			},
			getDataPointCount: function () {
				return this.seriesOption.data.length
			},
			getSeryTotalValue: function () {
				var a = 0;
				return this.points.forEach(function (b) {
					a += b.value
				}),
				a
			},
			getLocation: function () {
				return this.baseAxis ? this.baseAxis.getPosition() : e.BOTTOM
			},
			isValueAxisBased: function () {
				var a = e.CATEGORY_AXIS_COMPONENT;
				return this.xAxis && this.xAxis.type != a && this.yAxis && this.yAxis.type != a
			},
			_getBaseAxis: function () {
				var a = e.CATEGORY_AXIS_COMPONENT;
				return this.xAxis.type == a ? this.xAxis : this.yAxis.type == a ? this.yAxis : this.type == e.BAR_CHART ? this.yAxis : this.xAxis
			},
			_getValueAxis: function () {
				var a = e.CATEGORY_AXIS_COMPONENT;
				return this.xAxis.type == a ? this.yAxis : this.yAxis.type == a ? this.xAxis : this.type == e.BAR_CHART ? this.xAxis : this.yAxis
			},
			_getBandsColor: function (a) {
				var b = this.bands;
				if (b) {
					b = c.isArray(b) ? b : [b];
					for (var d = 0, f = b.length; f > d; d++) {
						var g = b[d];
						if (g.axis) {
							var h = "x" == g.axis ? this.xAxis : this.yAxis,
							i = h.getValueFromData(a.pointOption),
							j = g.from,
							k = g.to;
							h.type == e.CATEGORY_AXIS_COMPONENT && (i = h.indexOfLabel(i), j = j ? h.indexOfLabel(j) : j, k = k ? h.indexOfLabel(j) : k);
							var l = !c.hasDefined(j) || i >= j,
							m = !c.hasDefined(k) || k >= i;
							if (l && m)
								return g.color
						} else {
							var j = Math.min(g.from, g.to),
							k = Math.max(g.from, g.to);
							if (a.value >= j && a.value < k)
								return g.color
						}
					}
					if (c.hasDefined(a.valueInDomain))
						for (var d = 0, n = b.length; n > d; d++) {
							var g = b[d],
							j = Math.min(g.from, g.to),
							k = Math.max(g.from, g.to);
							if (a.valueInDomain >= j && a.valueInDomain <= k)
								return g.color
						}
				}
			}
		},
		b
	}),
	c("component/CoordinateSystem", ["require", "../utils/Class", "../Constants"], function (a) {
		var b = a("../utils/Class"),
		c = a("../Constants"),
		d = b.extend({
				initialize: function (a) {
					this.type = a || c.PLANE
				},
				setType: function (a) {
					this.type = a
				},
				accept: function (a) {
					var b = -1 != a.toLowerCase().indexOf("axis");
					return b && this.type != c.GEO || !b
				}
			});
		return d
	}),
	c("render/LegendIconFactory", ["require", "../Constants"], function (a) {
		function b(a) {
			return f[a]
		}
		function c(a) {
			return g[a] ? g[a] : g[e.NORMAL_ICON]
		}
		function d(a) {
			return f[a]
		}
		var e = a("../Constants"),
		f = {},
		g = {};
		return f[e.PIE_ICON] = "M15.795,7.943L7.909,12.5L0.205,8.052C1.756,5.333,4.68,3.5,8.032,3.5C11.338,3.5,14.23,5.287,15.795,7.943z",
		g[e.PIE_ICON] = {
			width: 16,
			height: 16
		},
		f[e.DONUT_ICON] = "M8.945,11.107c1.671,0,3.181,0.684,4.269,1.786l4.271-4.271c-4.686-4.686-12.284-4.686-16.971,0l4.216,4.216C5.815,11.768,7.302,11.107,8.945,11.107z",
		g[e.DONUT_ICON] = {
			width: 18,
			height: 18
		},
		f[e.NORMAL_ICON] = "M0,0L12,0L12,12L0,12Z",
		g[e.NORMAL_ICON] = {
			width: 12,
			height: 12
		},
		f[e.BUBBLE_ICON] = "M6,11.5c-1.47,0-2.851-0.572-3.889-1.611C1.072,8.851,0.5,7.47,0.5,6s0.572-2.851,1.611-3.889C3.149,1.072,4.53,0.5,6,0.5s2.851,0.572,3.889,1.611C10.928,3.149,11.5,4.53,11.5,6s-0.572,2.851-1.611,3.889C8.851,10.928,7.47,11.5,6,11.5z",
		g[e.BUBBLE_ICON] = {
			width: 11,
			height: 11
		},
		f[e.NULL_MARKER] = "M1,8L1,8c0-0.552,0.448-1,1-1h12c0.552,0,1,0.448,1,1v0c0,0.552-0.448,1-1,1H2C1.448,9,1,8.552,1,8z",
		g[e.NULL_MARKER] = {
			width: 16,
			height: 16
		},
		f[e.CIRCLE] = "M11,8c0,1.657-1.343,3-3,3S5,9.657,5,8s1.343-3,3-3S11,6.343,11,8z M14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,8c0-0.347,0.058-0.678,0.142-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.142C4.058,8.678,4,8.347,4,8z",
		g[e.CIRCLE] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.NULL_MARKER] = "M0,0L12,0L12,12L0,12Z",
		g[e.SCATTER_ICON + e.NULL_MARKER] = {
			width: 12,
			height: 12
		},
		f[e.SCATTER_ICON + e.NORMAL_ICON] = "M0,0L12,0L12,12L0,12Z",
		g[e.SCATTER_ICON + e.NORMAL_ICON] = {
			width: 12,
			height: 12
		},
		f[e.SCATTER_ICON + e.CIRCLE] = "M4,8C2.897,8,1.897,7.551,1.173,6.827S0,5.103,0,4s0.449-2.103,1.173-2.827S2.897,0,4,0s2.103,0.449,2.827,1.173S8,2.897,8,4S7.551,6.103,6.827,6.827S5.103,8,4,8",
		g[e.SCATTER_ICON + e.CIRCLE] = {
			width: 8,
			height: 8
		},
		f[e.SQUARE] = "M11,11H5V5h6V11z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2V7z",
		g[e.SQUARE] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.SQUARE] = "M0,0h8c0,0,0,3.889,0,8C4,8,0,8,0,8V0z",
		g[e.SCATTER_ICON + e.SQUARE] = {
			width: 8,
			height: 8
		},
		f[e.DIAMOND] = "M8,11L5,8l3-3l3,3L8,11z M14,7h-2.586l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M3.586,8l1-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.586L3.586,8z",
		g[e.DIAMOND] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.DIAMOND] = "M0,4.5L4.502,0l4.5,4.5c0,0,0,0-4.5,4.5C0,4.5,0,4.5,0,4.5z",
		g[e.SCATTER_ICON + e.DIAMOND] = {
			width: 9,
			height: 9
		},
		f[e.TRIANGLE] = "M5,10l3-5.196L11,10H5z M14,7h-3.577l1.155,2H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M5.577,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.423L5.577,7z",
		g[e.TRIANGLE] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.TRIANGLE] = "M4.5,0L9,8c0,0-4.617,0-9,0L4.5,0z",
		g[e.SCATTER_ICON + e.TRIANGLE] = {
			width: 9,
			height: 8
		},
		f[e.CIRCLE_HOLLOW] = "M4.142,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.142C4.058,7.322,4,7.653,4,8S4.058,8.678,4.142,9zM14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,7C7.449,7,7,7.449,7,8s0.449,1,1,1s1-0.449,1-1S8.551,7,8,7 M8,5c1.657,0,3,1.343,3,3s-1.343,3-3,3S5,9.657,5,8S6.343,5,8,5L8,5z",
		g[e.CIRCLE_HOLLOW] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.CIRCLE_HOLLOW] = "M4,2c1.102,0,2,0.898,2,2S5.102,6,4,6S2,5.102,2,4S2.898,2,4,2 M4,0C1.791,0,0,1.791,0,4s1.791,4,4,4s4-1.791,4-4S6.209,0,4,0",
		g[e.SCATTER_ICON + e.CIRCLE_HOLLOW] = {
			width: 8,
			height: 8
		},
		f[e.SQUARE_HOLLOW] = "M4,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2V9z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M9,7H7v2h2V7 M11,5v6H5V5H11L11,5z",
		g[e.SQUARE_HOLLOW] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.SQUARE_HOLLOW] = "M6,6H2V2h4V6z M8,0H0v8h8V0z",
		g[e.SCATTER_ICON + e.SQUARE_HOLLOW] = {
			width: 8,
			height: 8
		},
		f[e.DIAMOND_HOLLOW] = "M4.157,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.157l-1,1L4.157,9z M14,7h-2.157l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,5.986L5.986,8L8,10.014L10.014,8L8,5.986 M8,4.571L11.429,8L8,11.429L4.571,8L8,4.571L8,4.571z",
		g[e.DIAMOND_HOLLOW] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.DIAMOND_HOLLOW] = "M2.121,4.999L5,2.121l2.878,2.878L5,7.879L2.121,4.999z M5,0L0,4.999L5,10l4.999-5.001L5,0z",
		g[e.SCATTER_ICON + e.DIAMOND_HOLLOW] = {
			width: 10,
			height: 10
		},
		f[e.TRIANGLE_HOLLOW] = "M4.5,9H2C1.448,9,1,8.552,1,8s0.448-1,1-1h3.655L4.5,9z M14,7h-3.655L11.5,9H14c0.552,0,1-0.448,1-1S14.552,7,14,7z M8,6.938L6.232,10h3.536L8,6.938 M8,4.938L11.5,11h-7L8,4.938L8,4.938z",
		g[e.TRIANGLE_HOLLOW] = {
			width: 16,
			height: 16
		},
		f[e.SCATTER_ICON + e.TRIANGLE_HOLLOW] = "M5.001,3.34L7.402,7.5H2.598L5.001,3.34z M5.001,0.34L0,9h10L5.001,0.34z",
		g[e.SCATTER_ICON + e.TRIANGLE_HOLLOW] = {
			width: 10,
			height: 9
		}, {
			getLegendIconPath: b,
			getLegendIconSize: c,
			hasIcon: d
		}
	}),
	c("component/Base", ["require", "../utils/BaseUtils", "../utils/ColorUtils", "../Constants", "../render/RenderFactory", "../utils/QueryUtils", "../utils/Formatter", "../render/LegendIconFactory", "../utils/Class"], function (a) {
		var b = a("../utils/BaseUtils"),
		c = a("../utils/ColorUtils"),
		d = a("../Constants"),
		e = a("../render/RenderFactory"),
		f = (a("../utils/QueryUtils"), a("../utils/Formatter")),
		g = (a("../render/LegendIconFactory"), a("../utils/Class")),
		h = 2,
		i = "CATEGORY",
		j = "SERIES",
		k = "VALUE",
		l = "PERCENT",
		m = 4.5,
		n = g.extend({
				initialize: function (a, b, c, f) {
					this.vanchart = a,
					this.option = b,
					this.componentType = c,
					this.componentOption = f || b[c];
					var g;
					if (this.type)
						switch (c) {
						case d.RADIUS_AXIS_COMPONENT:
							g = d.RADIUS_AXIS_RENDER;
							break;
						case d.ANGLE_AXIS_COMPONENT:
							g = d.ANGLE_AXIS_RENDER;
							break;
						default:
							g = this.type
						}
					else
						g = c;
					this.render = e.getRender(g, this),
					this.isFloat = !1,
					this._needLayout = !0,
					this._floatX = 0,
					this._floatY = 0,
					this.bounds = {
						x: 0,
						y: 0,
						width: 0,
						height: 0
					},
					this.refresh(b, this.componentOption)
				},
				refresh: function (a, b) {
					a && (this.option = a, this.componentOption = b ? b : a[this.componentType]),
					b = this.componentOption,
					b && (this.isFloat = b.floating, this._floatX = this._getPercentValue(b.x, this.vanchart.chartWidth()), this._floatY = this._getPercentValue(b.y, this.vanchart.chartHeight())),
					this._refresh && this._refresh()
				},
				doLayout: function () {},
				fixBoundsByPlot: function () {},
				initAttributesWithSeries: function () {},
				remove: function () {
					this.render && this.render.remove()
				},
				groupDataByClassName: function () {
					return b.pick(this.option.byClassName, !0)
				},
				getMaxBubbleRadius: function () {
					var a = 0,
					b = this.vanchart.series;
					return b.forEach(function (b) {
						b.visible && b.type == d.BUBBLE_CHART && (a = Math.max(a, b.maxSize))
					}),
					a / 2
				},
				_getDefaultSeriesColor: function (a) {
					return this.vanchart.getDefaultSeriesColor(a)
				},
				_getLegendType: function (a) {
					var c = a.marker,
					e = "";
					switch (a.type) {
					case d.MULTIPIE_CHART:
					case d.PIE_CHART:
						e = a.innerRadius && parseFloat(a.innerRadius) > 0 ? d.DONUT_ICON : d.PIE_ICON;
						break;
					case d.RADAR_CHART:
						a.columnType && (e = d.NORMAL_ICON);
						break;
					case d.BUBBLE_CHART:
						e = d.BUBBLE_ICON;
						break;
					default:
						e = d.NORMAL_ICON
					}
					return c ? (e = c.symbol, a.type != d.SCATTER_CHART || b.isImageMarker(e) || (e = d.SCATTER_ICON + c.symbol)) : a.type == d.POINT_MAP && a.icon ? e = a.icon.iconUrl : a.image && (e = a.image),
					e
				},
				_getPercentValue: function (a, b) {
					return a ? (a += "", -1 != a.indexOf("%") && (a = parseFloat(a) * b / 100), parseFloat(a)) : 0
				},
				_setComponentBounds: function (a, b) {
					this.isFloat ? this._updateFloatBounds(a, b) : this._updateComponentBounds(a, b)
				},
				_updateFloatBounds: function (a, b) {
					b = Math.ceil(b);
					var c = this.vanchart.getPlotBounds(),
					e = this._floatX,
					f = this._floatY,
					g = c.x + c.width - e,
					h = c.y + c.height - f;
					switch (a) {
					case d.TOP:
						this.bounds = {
							x: e,
							y: f,
							width: g,
							height: b
						};
						break;
					case d.BOTTOM:
						this.bounds = {
							x: e,
							y: f,
							width: g,
							height: b
						};
						break;
					case d.LEFT:
						this.bounds = {
							x: e,
							y: f,
							width: b,
							height: h
						};
						break;
					case d.RIGHT_TOP:
					case d.RIGHT:
						this.bounds = {
							x: e,
							y: f,
							width: b,
							height: h
						}
					}
				},
				_updateComponentBounds: function (a, b) {
					b = Math.ceil(b);
					var c = this.vanchart.getPlotBounds(),
					e = c.x,
					f = c.y,
					g = c.width,
					h = c.height;
					switch (a) {
					case d.TOP:
						this.bounds = {
							x: e,
							y: f,
							width: g,
							height: b
						};
						break;
					case d.BOTTOM:
						this.bounds = {
							x: e,
							y: f + h - b,
							width: g,
							height: b
						};
						break;
					case d.LEFT:
						this.bounds = {
							x: e,
							y: f,
							width: b,
							height: h
						};
						break;
					case d.RIGHT_TOP:
					case d.RIGHT:
						this.bounds = {
							x: e + g - b,
							y: f,
							width: b,
							height: h
						}
					}
					this.vanchart.setPlotBounds(c),
					this._clipPlotBounds(a, b)
				},
				_clipPlotBounds: function (a, b) {
					b = Math.ceil(b);
					var c = this.vanchart.getPlotBounds(),
					e = c.x,
					f = c.y,
					g = c.width,
					h = c.height;
					switch (a) {
					case d.TOP:
						c = {
							x: e,
							y: f + b,
							width: g,
							height: h - b
						};
						break;
					case d.BOTTOM:
						c = {
							x: e,
							y: f,
							width: g,
							height: h - b
						};
						break;
					case d.LEFT:
						c = {
							x: e + b,
							y: f,
							width: g - b,
							height: h
						};
						break;
					case d.RIGHT_TOP:
					case d.RIGHT:
						c = {
							x: e,
							y: f,
							width: g - b,
							height: h
						}
					}
					this.vanchart.setPlotBounds(c)
				},
				_getBackgroundColor: function () {
					var a = this.option,
					b = "string" == typeof a.plotBackgroundColor,
					d = "string" == typeof a.backgroundColor,
					e = b ? a.plotBackgroundColor : d ? a.backgroundColor : "white";
					return c.colorToHex(e)
				},
				getPosition: function () {
					return this.componentOption.position
				},
				isHorizontal: function () {
					return this.getPosition() == d.TOP || this.getPosition() == d.BOTTOM
				},
				getMousePos: function (a) {
					var c = this.vanchart.getParentDom();
					return b.getMousePos(a, c)
				},
				isLargeMode: function () {
					return this.option.plotOptions.large
				},
				_maxHeight: function (a) {
					var b = this.vanchart.chartHeight();
					return a || this.componentOption.maxHeight ? this._getPercentValue(this.componentOption.maxHeight, b) : b
				},
				_maxWidth: function (a) {
					var b = this.vanchart.chartWidth();
					return a || this.componentOption.maxWidth ? this._getPercentValue(this.componentOption.maxWidth, b) : b
				},
				_calculateSingleLineLabelContent: function (a, c) {
					if (!a)
						return "";
					if ("object" == typeof a) {
						var d = "",
						e = a.identifier,
						g = f.format(c.category, a.categoryFormat),
						h = f.format(c.seriesName, a.seriesFormat);
						if ((-1 != e.indexOf(i) || -1 != e.indexOf(j)) && (d += -1 != e.indexOf(i) && -1 != e.indexOf(j) ? g + " " + h : -1 != e.indexOf(i) ? g : h), -1 != e.indexOf(k) || -1 != e.indexOf(l)) {
							b.isEmpty(d) || (d += ":");
							var m = f.format(c.value, a.valueFormat),
							n = f.format(c.percentage, a.percentFormat);
							d += -1 != e.indexOf(k) && -1 != e.indexOf(l) ? m + " " + n : -1 != e.indexOf(k) ? m : n
						}
						return d
					}
					return b.getFormatterFunction(a).call(c)
				},
				_createMultiLineLabelContent: function (a, c) {
					if (!a)
						return [];
					if ("object" == typeof a) {
						var d = [],
						e = a.identifier,
						g = f.format(c.category, a.categoryFormat),
						h = f.format(c.seriesName, a.seriesFormat),
						m = f.format(c.value, a.valueFormat),
						n = f.format(c.percentage, a.percentFormat);
						return -1 != e.indexOf(i) && d.push(g),
						-1 != e.indexOf(j) && d.push(h),
						-1 != e.indexOf(k) && d.push(m),
						-1 != e.indexOf(l) && d.push(n),
						d
					}
					return [b.getFormatterFunction(a).call(c)]
				},
				_getTickContent: function (a, b) {
					return b ? f.format(a, b) : a
				},
				getLabelGap: function () {
					return h
				},
				getDefaultMarkerRadius: function () {
					return m
				},
				getPlotBounds: function () {
					return this.vanchart.getPlotBounds()
				},
				getChartBounds: function () {
					return this.vanchart.getChartBounds()
				},
				getVanchartRender: function () {
					return this.vanchart.getRender()
				},
				getRender: function () {
					return this.render
				},
				getParentDom: function () {
					return this.vanchart.getParentDom()
				},
				getDivParentDom: function () {
					return this.vanchart.getDivParentDom()
				},
				getTooltipComponent: function () {
					return this.vanchart.components.tooltip
				}
			});
		return n
	}),
	c("component/Title", ["require", "./Base", "../utils/BaseUtils", "../Constants", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = .2,
		f = 5,
		g = b.extend({
				_refresh: function () {
					this.initBarWidth = null,
					this.render && this.render.remove()
				},
				doLayout: function () {
					var a,
					b = this.componentOption,
					e = this.vanchart.getPlotBounds(),
					g = e.width,
					h = e.height;
					if (this.isFloat ? (g -= this._floatX - e.x, h -= this._floatY - e.y) : (this.initBarWidth = c.pick(this.initBarWidth, this.vanchart.getToolbarWidth()), g -= this.initBarWidth, "center" === b.align && (g -= this.initBarWidth)), g -= 2 * f, h -= 2 * f, a = c.getTextWrapDimension(b.text, b.style, b.useHtml), a.width > g) {
						var i = c.clone(b.style);
						i.width = g + "px",
						a = c.getTextWrapDimension(b.text, i, b.useHtml)
					} else
						a.width += .5;
					if (a.height = Math.min(this._maxHeight(), h, a.height), this.isFloat)
						this.bounds = {
							x: this._floatX,
							y: this._floatY,
							width: a.width + 2 * f,
							height: a.height + 2 * f
						};
					else {
						var j = a.height + 2 * f;
						this._setComponentBounds(d.TOP, j),
						"center" !== b.align && (a.width = g)
					}
					this.textDim = a
				},
				getPadding: function () {
					return f
				},
				getLineGapPercent: function () {
					return e
				},
				translateX: function (a) {
					this.render.translateX(a)
				},
				changeTextRightSpace: function (a) {
					this.render.changeTextRightSpace(a)
				}
			});
		return a("../ComponentLibrary").register(d.TITLE_COMPONENT, g),
		g
	}),
	c("component/DrillTools", ["require", "./Base", "../utils/BaseUtils", "../utils/ColorUtils", "../Constants", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/ColorUtils"),
		e = a("../Constants"),
		f = .417,
		g = .583,
		h = .25,
		i = .333,
		j = .1665,
		k = b.extend({
				_refresh: function () {
					this.iconData = []
				},
				doLayout: function () {
					var a = this.componentOption;
					this._setComponentBounds(e.TOP, c.getTextHeight(a.style) * (2 * j + 1))
				},
				addIconData: function (a) {
					this.iconData.push(a),
					a.aniStart = this.getMarkAnimationStartPos(a),
					a.aniEnd = this.getMarkPos(a)
				},
				deleteIconData: function (a) {
					for (var b; (b = this.iconData[this.iconData.length - 1]) && b.series != a; )
						this.iconData.pop()
				},
				getIconData: function () {
					return this.iconData
				},
				getBookMarkPath: function (a) {
					var b = this.componentOption.style,
					d = c.getTextDimension(a.geo.geoName, b),
					e = a.layerIndex,
					k = (0 == e ? f : g) + h;
					k = d.height * k + d.width;
					var l = d.height * i,
					m = (1 + 2 * j) * d.height,
					n = [0, 0],
					o = [k, 0],
					p = [k + l, m / 2],
					q = [k, m],
					r = [0, m];
					return "M" + n + "L" + o + "L" + p + "L" + q + "L" + r + "Z"
				},
				isCurrent: function (a) {
					return this.iconData[this.iconData.length - 1] == a
				},
				textColor: function (a) {
					var b = this.componentOption;
					return this.isCurrent(a) ? b.currentColor : b.style.color
				},
				mouseOverColor: function (a) {
					var b;
					if (!(b = this.componentOption.mouseOverColor)) {
						var c = this.textColor(a),
						e = d.getRGBAColorArray(c),
						f = d.rgb2hsb(e[0], e[1], e[2]),
						g = d.hsb2rgb(f[0], f[1] / 2, (f[2] + 1) / 2);
						b = d.toColor(g, "rgb")
					}
					return b
				},
				leftPadding: function (a) {
					return 0 == a.layerIndex ? f : g
				},
				topPadding: function () {
					return j
				},
				calculateExitAnimation: function (a) {
					a.reverse();
					for (var b = 600, c = 0, d = a.length; d > c; c++)
						a[c].time = b, b = Math.max(b - 100, 0);
					var e = 0;
					for (c = d - 1; c >= 0; c--)
						a[c].time ? (a[c].delay = e, e += 200) : a[c].delay = 0;
				},
				getMarkPos: function (a) {
					for (var b = 0, c = 0; c < a.layerIndex; c++)
						b += this.getBookMarkLength(this.iconData[c], c);
					return b
				},
				getMarkAnimationStartPos: function (a) {
					var b = a.layerIndex;
					return 0 == b ? 0 : this.getMarkPos(this.iconData[b - 1]) - this.getBookMarkLength(a, b)
				},
				getBookMarkLength: function (a, b) {
					var d = this.componentOption,
					e = c.getTextHeight(d.style),
					i = c.getTextDimension(a.geo.geoName, d.style).width,
					j = (0 == b ? f : g) + h;
					return i + j * e
				}
			});
		return a("../ComponentLibrary").register(e.DRILL_TOOLS, k),
		k
	}),
	c("utils/BoundsManager", ["require", "./BaseUtils"], function (a) {
		function b() {
			this.addedBounds = []
		}
		var c = a("./BaseUtils");
		return b.prototype = {
			constructor: b,
			addBounds: function (a) {
				this.addedBounds.push(a)
			},
			isOverlapped: function (a) {
				for (var b = 0, d = this.addedBounds.length; d > b; b++)
					if (c.rectangleOverlapped(a, this.addedBounds[b]))
						return !0;
				return !1
			},
			isEmpty: function () {
				return 0 == this.addedBounds.length
			}
		},
		b
	}),
	c("utils/BezierEasing", [], function () {
		function a(a, b) {
			return 1 - 3 * b + 3 * a
		}
		function b(a, b) {
			return 3 * b - 6 * a
		}
		function c(a) {
			return 3 * a
		}
		function d(d, e, f) {
			return ((a(e, f) * d + b(e, f)) * d + c(e)) * d
		}
		function e(d, e, f) {
			return 3 * a(e, f) * d * d + 2 * b(e, f) * d + c(e)
		}
		function f(a, b, c, e, f) {
			var g,
			h,
			i = 0;
			do
				h = b + (c - b) / 2, g = d(h, e, f) - a, g > 0 ? c = h : b = h;
			while (Math.abs(g) > k && ++i < l);
			return h
		}
		function g(a, b, c, g) {
			function h(b, f) {
				for (var g = 0; i > g; ++g) {
					var h = e(f, a, c);
					if (0 === h)
						return f;
					var j = d(f, a, c) - b;
					f -= j / h
				}
				return f
			}
			function k() {
				for (var b = 0; m > b; ++b)
					r[b] = d(b * n, a, c)
			}
			function l(b) {
				for (var d = 0, g = 1, i = m - 1; g != i && r[g] <= b; ++g)
					d += n;
				--g;
				var k = (b - r[g]) / (r[g + 1] - r[g]),
				l = d + k * n,
				o = e(l, a, c);
				return o >= j ? h(b, l) : 0 === o ? l : f(b, d, d + n, a, c)
			}
			function p() {
				s = !0,
				(a != b || c != g) && k()
			}
			if (4 !== arguments.length)
				throw new Error("BezierEasing requires 4 arguments.");
			for (var q = 0; 4 > q; ++q)
				if ("number" != typeof arguments[q] || isNaN(arguments[q]) || !isFinite(arguments[q]))
					throw new Error("BezierEasing arguments should be integers.");
			if (0 > a || a > 1 || 0 > c || c > 1)
				throw new Error("BezierEasing x values must be in [0, 1] range.");
			var r = o ? new Float32Array(m) : new Array(m),
			s = !1,
			t = function (e) {
				return s || p(),
				a === b && c === g ? e : 0 === e ? 0 : 1 === e ? 1 : d(l(e), b, g)
			};
			t.getControlPoints = function () {
				return [{
						x: a,
						y: b
					}, {
						x: c,
						y: g
					}
				]
			};
			var u = [a, b, c, g],
			v = "BezierEasing(" + u + ")";
			return t.toString = function () {
				return v
			},
			t
		}
		var h = this,
		i = 4,
		j = .001,
		k = 1e-7,
		l = 10,
		m = 11,
		n = 1 / (m - 1),
		o = "Float32Array" in h;
		return g.css = {
			ease: g(.25, .1, .25, 1),
			linear: g(0, 0, 1, 1),
			"ease-in": g(.42, 0, 1, 1),
			"ease-out": g(0, 0, .58, 1),
			"ease-in-out": g(.42, 0, .58, 1),
			swing: g(.02, .01, .47, 1),
			"ease-in-quart": g(.895, .03, .685, .22),
			"ease-out-back": g(.175, .885, .32, 1.275)
		},
		g
	}),
	c("component/BaseAxis", ["require", "../Constants", "../utils/BaseUtils", "../utils/QueryUtils", "../utils/Formatter", "../utils/BoundsManager", "./Base", "../utils/BezierEasing"], function (a) {
		var b = a("../Constants"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/QueryUtils"),
		e = (a("../utils/Formatter"), a("../utils/BoundsManager")),
		f = a("./Base"),
		g = (a("../utils/BezierEasing"), 3),
		h = 5,
		i = 5,
		j = 5,
		k = 4,
		l = 100,
		m = 10,
		n = "radar-top",
		o = "radar-bottom",
		p = "radar-left",
		q = "radar-right",
		r = f.extend({
				init: function () {
					this.sharedPoints = {}
				},
				getSharedPointsFromSeries: function (a) {
					if (this.isBaseAxis) {
						this.sharedPoints = {};
						var c = this;
						a.map(function (a) {
							a.baseAxis === c && a.tooltip && a.tooltip.shared && c._isSeriesVisible(a) && ((a.type === b.BAR_CHART || a.type === b.COLUMN_CHART || a.stack === b.RADAR_CHART) && (c.highlightType = "band"), a.points.map(function (a) {
									c._getSharedPoints(a)
								}))
						})
					}
				},
				_getSharedPoints: function (a) {
					var b = a.series;
					b.supportSharedTooltip && b.visible && b.tooltip && b.tooltip.shared && !a.isNull && a.visible && (this.sharedPoints[a.category] || (this.sharedPoints[a.category] = []), this.sharedPoints[a.category].push(a))
				},
				doLayout: function () {
					switch (this.componentType) {
					case b.X_AXIS_COMPONENT:
					case b.Y_AXIS_COMPONENT:
						this._updateAxisBounds();
						break;
					case b.RADIUS_AXIS_COMPONENT:
					case b.ANGLE_AXIS_COMPONENT:
						this._updatePolarBounds()
					}
					this.getSharedPointsFromSeries(this.vanchart.series)
				},
				refreshPolar: function (a, c) {
					switch (this.refresh(a, c), this.componentType) {
					case b.RADIUS_AXIS_COMPONENT:
						this.polar = this.vanchart.polar(c.axisIndex),
						this.polar.radiusAxis = this;
						break;
					case b.ANGLE_AXIS_COMPONENT:
						this.polar = this.vanchart.polar(c.axisIndex),
						this.polar.angleAxis = this
					}
				},
				_updatePolarBounds: function () {
					if (this.componentType == b.ANGLE_AXIS_COMPONENT && !this.polar.radius) {
						var a = this.vanchart.getPlotBounds(),
						c = this.polar.center,
						d = [c[1] - a.y, a.x + a.width - c[0], a.y + a.height - c[1], c[0] - a.x],
						e = Math.min.apply(null, d);
						e -= m;
						var f = {
							x: -d[3],
							y: -d[0],
							width: a.width,
							height: a.height
						};
						this.componentOption.showLabel && (this._testRadius(e, f) || (e = this._findNiceRadius(f), this._testRadius(e, f))),
						this.polar.setRadius(e)
					}
				},
				_updateAxisBounds: function () {
					var a = this.componentOption,
					c = this.getPosition();
					this.tickLabelLength = this._getTickLabelLength();
					var d = this._getAxisTitleLength() + i,
					e = this.tickLabelLength + d,
					f = 0,
					g = 0,
					h = this.isHorizontal(),
					j = this.vanchart.isInverted();
					if (this.tickData && this.tickData.length > 1) {
						var k,
						l;
						this.isAxisReversed() ? (k = this.tickData[this.tickData.length - 1].tickDim, l = this.tickData[0].tickDim) : (k = this.tickData[0].tickDim, l = this.tickData[this.tickData.length - 1].tickDim),
						f = h ? k.width : k.height,
						g = h ? l.width : k.height
					}
					if (h) {
						var m = j ? a.maxWidth : a.maxHeight;
						e = m ? Math.min(this._maxHeight(m), e) : e
					} else {
						var m = j ? a.maxHeight : a.maxWidth;
						e = m ? Math.min(this._maxWidth(m), e) : e
					}
					if (a.onZero) {
						var n = this.componentType == b.X_AXIS_COMPONENT ? b.Y_AXIS_COMPONENT : b.X_AXIS_COMPONENT;
						n = this.vanchart[n](),
						a.position = j ^ n.isHorizontal() ? b.RIGHT : b.BOTTOM,
						this._updateFloatBounds(c, e)
					} else
						this.getRender() && this._setComponentBounds(c, e);
					var o = this.vanchart.getPlotBounds(),
					p = this.vanchart.chartHeight();
					if (!h) {
						var q = Math.round(g / 2),
						r = Math.round(f / 2);
						r = Math.max(r - (p - o.y - o.height), 0),
						this._clipPlotBounds(b.TOP, q),
						this._clipPlotBounds(b.BOTTOM, r)
					}
				},
				dealOnZero: function () {
					var a = this.componentOption;
					if (a.onZero) {
						var c = a.onZero === !0 ? 0 : a.onZero,
						d = this.componentType == b.X_AXIS_COMPONENT ? b.Y_AXIS_COMPONENT : b.X_AXIS_COMPONENT;
						d = this.vanchart.getComponent(d).getAxis(c);
						var e;
						e = d.type === b.CATEGORY_AXIS_COMPONENT ? 0 : d.scale(0);
						var f,
						g,
						h,
						i,
						j = this.vanchart.getPlotBounds();
						this.isHorizontal() ? (f = j.x, g = e + j.y, h = j.width, i = this.bounds.height) : (f = e + j.x, g = j.y, h = this.bounds.width, i = j.height),
						this.bounds = {
							x: f,
							y: g,
							width: h,
							height: i
						}
					}
				},
				_getTickLabelLength: function () {
					var a = this.componentOption,
					b = a.tickPadding || g;
					a.enableTick && (b += a.tickLength || h);
					var c = this.isHorizontal(),
					d = 0;
					return a.showLabel && this.tickData.length && this.tickData.forEach(function (a) {
						var b = a.tickDim;
						d = Math.max(d, c ? b.height : b.width)
					}),
					b + d
				},
				_updateOriginTickData: function () {
					var a = this._getTickValues(),
					b = this.componentOption,
					d = b.formatter;
					this.tickData = [];
					for (var e = 0, f = a.length; f > e; e++) {
						var g = a[e],
						h = this._getTickContent(g, d),
						i = c.getTextDimensionWithRotation(h, b.labelStyle, b.useHtml, b.labelRotation);
						b.useHtml && (i.width = isNaN(parseFloat(b.labelWidth)) ? i.width : parseFloat(b.labelWidth), i.height = isNaN(parseFloat(b.labelHeight)) ? i.height : parseFloat(b.labelHeight)),
						this.tickData.push({
							tickValue: g,
							tickContent: h,
							tickDim: i
						})
					}
					if (b.min && b.min !== a[0]) {
						var g = b.min,
						h = "",
						i = c.getTextDimensionWithRotation(h, b.labelStyle, b.useHtml, b.labelRotation);
						b.useHtml && (i.width = isNaN(parseFloat(b.labelWidth)) ? i.width : parseFloat(b.labelWidth), i.height = isNaN(parseFloat(b.labelHeight)) ? i.height : parseFloat(b.labelHeight)),
						this.tickData.unshift({
							tickValue: g,
							tickContent: h,
							tickDim: i
						})
					}
				},
				_calculateTickData: function () {
					if (this.componentType === b.ANGLE_AXIS_COMPONENT) {
						var a = this.polar.radius;
						this.tickData.map(function (b) {
							this._getCateLabelBounds(a, b)
						}, this)
					} else
						this._updateTickContent();
					var c = this._getStartIndex(),
					d = this._getEndIndex() + 1;
					this.usedTickData = [];
					for (var e = c; d > e; e++)
						this.usedTickData.push(this.tickData[e]);
					this.minorTickData = [],
					this.componentOption.enableMinorTick && this.usedTickData.length && (this.type == b.CATEGORY_AXIS_COMPONENT ? this._updateCategoryMinorTickData() : this._updateValueMinorTickData())
				},
				_getAxisTitleLength: function () {
					var a = this.componentOption.title,
					b = 0;
					if (a) {
						var d = c.getTextDimensionWithRotation(a.text, a.style, a.useHtml, a.rotation);
						b = this.isHorizontal() ? d.height : d.width
					}
					return b
				},
				getAxisTitleBounds: function () {
					var a = this.bounds,
					c = this.tickLabelLength + i,
					d = this.getPosition(),
					e = a.x,
					f = a.y,
					g = a.width,
					h = a.height;
					switch (d) {
					case b.LEFT:
						g -= c;
						break;
					case b.BOTTOM:
						f += c,
						h -= c;
						break;
					case b.RIGHT:
						e += c,
						g -= c;
						break;
					case b.TOP:
						h -= c
					}
					return {
						x: e,
						y: f,
						width: Math.max(g, 0),
						height: Math.max(h, 0)
					}
				},
				_updateRange: function () {
					this.scale.rangeRound(this._getRange())
				},
				_updateDomainWhenSizeFixed: function () {},
				_getRange: function () {
					switch (this.componentType) {
					case b.RADIUS_AXIS_COMPONENT:
						return [0, this.polar.radius];
					default:
						var a = this.vanchart.getPlotBounds();
						return this.isHorizontal() ? this.isAxisReversed() ? [a.width, 0] : [0, a.width] : this.isAxisReversed() ? [0, a.height] : [a.height, 0]
					}
				},
				_preCalculatePlotLines: function () {
					var a = this.componentOption.plotLines || [],
					d = this.getPosition(),
					e = this.vanchart.getPlotBounds(),
					f = this.bounds,
					h = this.scale,
					i = this.type == b.DATE_AXIS_COMPONENT,
					j = [];
					return a.forEach(function (a) {
						var k,
						l,
						m = h(i ? c.object2date(a.value) : a.value) + (h.rangeBand ? h.rangeBand() / 2 : 0);
						if (m = c.lineSubPixelOpt(m, a.width), this.isOnZero())
							this.isHorizontal() ? (k = {
									x: m,
									y: 0
								}, l = {
									x: m,
									y: e.height
								}) : (k = {
									x: e.width,
									y: m
								}, l = {
									x: 0,
									y: m
								});
						else
							switch (d) {
							case b.TOP:
								k = {
									x: m,
									y: f.y + f.height - e.y
								},
								l = {
									x: m,
									y: e.height
								};
								break;
							case b.BOTTOM:
								k = {
									x: m,
									y: 0
								},
								l = {
									x: m,
									y: f.y - e.y
								};
								break;
							case b.LEFT:
								k = {
									x: f.x + f.width - e.x,
									y: m
								},
								l = {
									x: e.width,
									y: m
								};
								break;
							case b.RIGHT:
								k = {
									x: f.x - e.x,
									y: m
								},
								l = {
									x: 0,
									y: m
								}
							}
						var n,
						o,
						p,
						q;
						n = o = 0,
						p = "",
						q = {};
						var r = Math.min(k.x, l.x),
						s = Math.max(k.x, l.x),
						t = Math.min(k.y, l.y),
						u = Math.max(k.y, l.y);
						if (d == b.TOP || d == b.BOTTOM) {
							if (0 > r || s > e.width)
								return
						} else if (0 > t || u > e.height)
							return;
						if (a.label && a.label.text && a.label.style) {
							q = a.label.style,
							p = a.label.text;
							var v = a.label.align,
							w = c.getTextDimension(p, q, a.label.useHtml);
							switch (a.label.useHtml && (w.width = c.pick(a.label.labelWidth, w.width), w.height = c.pick(a.label.labelHeight, w.height)), v) {
							case b.TOP:
								n = r - w.width,
								o = t;
								break;
							case b.BOTTOM:
								n = r - w.width,
								o = u - w.height;
								break;
							case b.LEFT:
								n = r,
								o = t - w.height - g;
								break;
							case b.RIGHT:
								n = s - w.width,
								o = t - w.height - g
							}
						}
						j.push({
							color: a.color,
							startPos: k,
							endPos: l,
							width: a.width,
							dataArray: b.DASH_TYPE[a.dashStyle],
							text: p,
							textDim: w,
							style: q,
							textX: n,
							textY: o
						})
					}, this),
					j
				},
				_preCalculatePlotBands: function () {
					var a = this._getPlotBands(),
					b = this.scale,
					c = !!b.rangeBand,
					d = c ? b.rangeBand() : 0,
					e = [],
					f = this.vanchart.getPlotBounds(),
					g = this;
					return this.scale.domain(),
					a.forEach(function (a) {
						var c,
						h,
						i = b(a.from),
						j = b(a.to);
						c = Math.min(i, j),
						h = Math.max(i, j),
						h += d;
						var k = 0,
						l = 0,
						m = f.width,
						n = f.height;
						g.isHorizontal() ? (c = Math.max(k, c), h = Math.min(m + k, h), k = c, m = h - c) : (c = Math.max(l, c), h = Math.min(n + l, h), l = c, n = h - c),
						0 >= m || 0 >= n || e.push({
							x: k,
							y: l,
							width: m,
							height: n,
							color: a.color
						})
					}),
					e
				},
				_getPlotBands: function () {
					var a = this.componentOption.plotBands,
					b = this.scale,
					d = !!b.rangeBand;
					if ("string" == typeof a) {
						var e = a;
						a = [];
						for (var f = this._getTickValuesWithEndValue(), g = d ? -1 : 0, h = f.length - 1; h > g; h -= 2)
							a.push({
								color: e,
								from: d ? f[h] : f[h - 1],
								to: f[h]
							})
					} else {
						a = a || [];
						for (var i = [], j = 0, k = a.length; k > j; j++) {
							var l = a[j];
							c.hasDefined(l.from) && c.hasDefined(l.to) && i.push(l)
						}
						a = i
					}
					return a
				},
				_getTickValues: function () {
					return []
				},
				_getTickInterval: function () {
					return this.valueList.length > 2 ? c.accAdd(this.valueList[2], -this.valueList[1]) : c.accAdd(this.valueList[1], -this.valueList[0])
				},
				_getTickValuesWithEndValue: function () {
					return this._getTickValues()
				},
				getTickData: function () {
					return this.usedTickData
				},
				getMaxTickWidth: function () {
					var a = 0;
					return this.usedTickData.forEach(function (b) {
						a = Math.max(a, b.tickDim.width)
					}),
					a
				},
				getTickHeight: function () {
					return this.componentOption.labelStyle ? c.getTextHeight(this.componentOption.labelStyle) : 0
				},
				getMinorTickData: function () {
					return this.minorTickData
				},
				getMainTickData: function () {
					var a = this.componentOption,
					d = !a.log && !this.byPercent && this.type == b.VALUE_AXIS_COMPONENT;
					if (d) {
						var e = this._getTickInterval();
						if (this.usedTickData.length > 3) {
							var f = this.usedTickData[1].tickValue,
							g = this.usedTickData[this.usedTickData.length - 2].tickValue,
							h = 0,
							i = this.usedTickData.length;
							c.hasDefined(a.min) && c.accAdd(f, -e) < a.min && (h += 1),
							c.hasDefined(a.max) && c.accAdd(g, e) > a.max && (i -= 1);
							for (var j = [], k = h; i > k; k++)
								j.push(this.usedTickData[k]);
							return j
						}
					}
					return this.getTickData()
				},
				_updateCategoryMinorTickData: function () {
					var a = Math.round(this.getTickLength() / 5),
					b = this.usedTickData.length;
					b = this.scale.rangeBand ? b : b - 1;
					for (var c = 0; b > c; c++)
						for (var d = this.usedTickData[c].tickPos, e = 1; 5 > e; e++)
							this.minorTickData.push(d + a * e)
				},
				_updateValueMinorTickData: function () {
					for (var a = this.componentOption, b = this._getTickInterval(), d = a.minorTickInterval ? a.minorTickInterval : b / 5, e = 0, f = this.usedTickData.length; f - 1 > e; e++) {
						var g = this.usedTickData[e].tickValue,
						h = this.usedTickData[e + 1].tickValue,
						i = g instanceof Date && h instanceof Date;
						if (g = i ? c.date2int(g) : g, h = i ? c.date2int(h) : h, 0 == e)
							for (var j = c.accAdd(h, -d); j > g; j = c.accAdd(j, -d))
								this.minorTickData.push(i ? c.int2date(j) : j);
						else
							for (var j = c.accAdd(g, d); h > j; j = c.accAdd(j, d))
								this.minorTickData.push(i ? c.int2date(j) : j)
					}
					var k = this.tickData[this.tickData.length - 1].tickValue,
					l = this.scale.domain()[1],
					i = k instanceof Date && l instanceof Date;
					if (k = i ? c.date2int(k) : k, l = i ? c.date2int(l) : l, l > k)
						for (var j = k + d; l >= j; j += d)
							this.minorTickData.push(i ? c.int2date(j) : j)
				},
				_updateTickContent: function () {
					var a = this.componentOption,
					b = this.scale,
					d = b.rangeBand ? b.rangeBand() / 2 : 0;
					if (this.tickData.forEach(function (a) {
							a.tickPos = b(a.tickValue),
							a.tickLabelPos = a.tickPos + d
						}), a.showLabel)
						if (a.step) {
							var f = 0;
							this.tickData.forEach(function (b) {
								f++ % a.step && (b.tickContent = "")
							})
						} else {
							var g = new e,
							h = this.isHorizontal(),
							i = 1,
							j = 1;
							this.tickData.forEach(function (a) {
								var d = h ? {
									x: b(a.tickValue),
									y: 0
								}
								 : {
									x: 0,
									y: b(a.tickValue)
								},
								e = c.makeBounds(d, a.tickDim);
								g.isOverlapped(e) ? (i++, j = Math.max(j, i)) : (i = 1, g.addBounds(e))
							});
							var f = 0;
							this.tickData.forEach(function (a) {
								f++ % j && (a.tickContent = "")
							})
						}
					else
						this.tickData.forEach(function (a) {
							a.tickContent = ""
						})
				},
				_getStartIndex: function () {
					return c.pick(this.componentOption.startIndex, 0)
				},
				_getEndIndex: function () {
					return c.pick(this.componentOption.endIndex, this.tickData.length - 1)
				},
				_getOriginDet: function () {
					var a = this._getPlotOriginPoint(),
					b = this._getAxisOriginPoint();
					return {
						x: a.x - b.x,
						y: a.y - b.y
					}
				},
				_getPlotOriginPoint: function () {
					var a,
					c,
					d = this.vanchart.getPlotBounds(),
					e = this.getPosition();
					switch (e) {
					case b.TOP:
						a = d.x,
						c = d.y;
						break;
					case b.BOTTOM:
						a = d.x,
						c = d.y + d.height;
						break;
					case b.LEFT:
						a = d.x,
						c = d.y;
						break;
					case b.RIGHT:
						a = d.x + d.width,
						c = d.y
					}
					return {
						x: a,
						y: c
					}
				},
				_getAxisOriginPoint: function () {
					var a,
					c,
					d = this.bounds,
					e = this.getPosition();
					switch (e) {
					case b.TOP:
						a = d.x,
						c = d.y + d.height;
						break;
					case b.BOTTOM:
						a = d.x,
						c = d.y;
						break;
					case b.LEFT:
						a = d.x + d.width,
						c = d.y;
						break;
					case b.RIGHT:
						a = d.x,
						c = d.y
					}
					return {
						x: a,
						y: c
					}
				},
				getTickScale: function () {
					return this.scale
				},
				axisZoom: function (a, b) {},
				_initZoomStatus: function () {},
				getPosition: function () {
					if (!this.vanchart.isInverted() || -1 === [b.X_AXIS_COMPONENT, b.Y_AXIS_COMPONENT].indexOf(this.componentType))
						return this.componentOption.position;
					switch (this.componentOption.position) {
					case b.TOP:
						return b.RIGHT;
					case b.RIGHT:
						return b.BOTTOM;
					case b.BOTTOM:
						return b.LEFT;
					case b.LEFT:
						return b.TOP
					}
				},
				isAxisReversed: function () {
					return this.componentType === b.X_AXIS_COMPONENT && this.vanchart.isInverted() ? !this.componentOption.reversed : this.componentOption.reversed
				},
				isOnZero: function () {
					return this.componentOption.onZero
				},
				getLineWidth: function () {
					return this.componentOption.lineWidth
				},
				showArrow: function () {
					return this.componentOption.showArrow
				},
				getTitleAlign: function () {
					var a = this.componentOption.title;
					if (!a)
						return null;
					if (this.vanchart.isInverted())
						switch (a.align) {
						case b.TOP:
							return b.RIGHT;
						case b.RIGHT:
							return b.BOTTOM;
						case b.BOTTOM:
							return b.LEFT;
						case b.LEFT:
							return b.TOP
						}
					return this.isHorizontal() ? a.align || b.LEFT : a.align || b.TOP
				},
				getTitleLabelGap: function () {
					return i
				},
				getAxisIndex: function () {
					return this.componentOption.axisIndex
				},
				_calculateValueNiceDomain: function (a, d, e, f, g) {
					var h = this.type == b.VALUE_AXIS_COMPONENT,
					i = this.componentOption;
					a = h ? Math.min(0, a) : a,
					a = c.hasDefined(e) ? e : a,
					d = c.hasDefined(f) ? f : d,
					a >= d && (d = a + l * (this.type === b.DATE_AXIS_COMPONENT ? 1e3 : 1));
					var j = i.tickInterval || this._linearTickInterval(a, d),
					k = this._linearNiceDomain(a, d, j);
					a = c.hasDefined(e) ? e : k[0],
					d = c.hasDefined(f) ? f : k[1],
					a >= d && (d = a + l * (this.type === b.DATE_AXIS_COMPONENT ? 1e3 : 1));
					var m = k[0];
					if (c.hasDefined(e)) {
						var n = c.accMul(Math.ceil(c.accDiv(c.accAdd(e, -m), j)), j);
						m = c.accAdd(m, n)
					}
					for (this.valueList = []; d >= m; m = c.accAdd(m, j))
						this.valueList.push(m);
					return this.lastScale = this.scale && this.scale.copy(),
					this.scale = this.scale ? this.scale.domain([a, d]) : d3.scale.linear().domain([a, d]), {
						minValue: a,
						maxValue: d
					}
				},
				_linearTickInterval: function (a, b, c) {
					c = c || this._getDefaultTickCount();
					var d = b - a,
					e = Math.pow(10, Math.floor(Math.log(d / c) / Math.LN10)),
					f = c / d * e;
					return .15 >= f ? e *= 10 : .35 >= f ? e *= 5 : .75 >= f && (e *= 2),
					e
				},
				_linearNiceDomain: function (a, b, d) {
					return a = c.accMul(Math.floor(a / d), d),
					b = c.accMul(Math.ceil(b / d), d),
					[a, b]
				},
				_getDefaultTickCount: function () {
					return this.option.chartType == b.RADAR_CHART ? k : j
				},
				_isSeriesVisible: function (a) {
					var b = [a, this.option.plotOptions[a.type], this.option.plotOptions];
					return c.pick(d.queryList(b, "visible"), !0)
				},
				getRender: function () {
					var a = this.option.chartType;
					return a === b.GAUGE_CHART || this.option.plotOptions.force ? null : this.render
				},
				getPolarInitPoint: function () {
					return c.getArcPoint(this.polar.radius, 0)
				},
				getRadiusPlotBands: function () {
					var a = this._getPlotBands(),
					b = [],
					c = this;
					return a.forEach(function (a) {
						b.push({
							path: c._getRadiusPlotBandsPath(a.from, a.to),
							color: a.color
						})
					}),
					b
				},
				_getRadiusPlotBandsPath: function (a, c) {
					var d = this.polar.shape;
					if (d === b.POLYGON_RADAR)
						return this._getRadiusGridPath(Math.min(a, c)) + this._getRadiusGridPath(Math.max(a, c), !0);
					var e = d3.svg.arc().startAngle(0).endAngle(2 * Math.PI);
					return e.innerRadius(this.scale(Math.min(a, c))).outerRadius(this.scale(Math.max(a, c)))()
				},
				getPlotLines: function () {
					var a = this.componentOption.plotLines || [],
					c = this,
					d = [];
					return a.forEach(function (a) {
						var e,
						f,
						g;
						a.label && a.label.text && a.label.style && (e = a.label.text, f = a.label.style, g = a.label.align),
						d.push({
							color: a.color,
							value: a.value,
							width: a.width,
							dataArray: b.DASH_TYPE[a.dashStyle],
							text: e,
							baseY: -c.scale(a.value),
							textAnchor: g == b.LEFT ? "end" : "start",
							style: f
						})
					}),
					d
				},
				_getRadiusGridPath: function (a, b) {
					var c = this._getRadiusGridData(a, b);
					return this._getRadiusGridPathByData(c)
				},
				_getRadiusGridData: function (a, d, e) {
					var f = e || this.scale,
					g = this.polar.angleAxis,
					h = this.polar.shape;
					if (h === b.POLYGON_RADAR) {
						var i = [],
						j = g.scale,
						k = j.domain();
						return k.forEach(function (b) {
							var d = j(b) * g.piece,
							e = f(a);
							i.push(c.getArcPoint(e, d))
						}),
						d && i.reverse(),
						i
					}
					return f(a)
				},
				_getRadiusGridPathByData: function (a) {
					if (c.isArray(a)) {
						var b = "";
						if (a.length) {
							for (var d = 0, e = a.length; e > d; d++) {
								var f = d ? "L" : "M";
								b += f + c.dealFloatPrecision(a[d][0]) + "," + c.dealFloatPrecision(a[d][1])
							}
							b += "Z"
						}
						return b
					}
					var g = d3.svg.arc().startAngle(0).endAngle(2 * Math.PI).innerRadius(0);
					return g.outerRadius(a)()
				},
				getAngleGridLineData: function () {
					var a = [],
					b = this.polar.angleAxis,
					d = b.scale.domain(),
					e = this;
					return d.forEach(function (d) {
						var f = b.scale(d) * b.piece,
						g = e.polar.radius;
						a.push(c.getArcPoint(g, f))
					}),
					a = a.length ? a : [c.getArcPoint(this.polar.radius, 0)]
				},
				_testRadius: function (a, b) {
					for (var d = 0, e = this.tickData.length; e > d; d++) {
						var f = this.tickData[d],
						g = this._getCateLabelBounds(a, f);
						if (!c.containsRect(b, g))
							return !1
					}
				},
				_getCateLabelBounds: function (a, b) {
					var d,
					e = b.tickValue,
					f = b.tickDim,
					g = this.scale.domain(),
					h = g.indexOf(e),
					i = c.getArcPoint(a + m, h * this.piece),
					j = this._getPolarPosition(e);
					switch (j) {
					case n:
						d = {
							x: -f.width / 2,
							y: -a - .65 * f.height - m
						};
						break;
					case q:
						d = {
							x: i[0],
							y: i[1] - f.height / 2
						};
						break;
					case o:
						d = {
							x: -f.width / 2,
							y: a + m
						};
						break;
					case p:
						d = {
							x: i[0] - f.width,
							y: i[1] - f.height / 2
						}
					}
					return b.tickPos = d,
					c.makeBounds(d, f)
				},
				_getPolarPosition: function (a) {
					var b = this.scale.domain(),
					c = b.indexOf(a),
					d = b.length / 2;
					return 0 == c ? n : c > 0 && d > c ? q : c == d ? o : c > d ? p : void 0
				},
				_findNiceRadius: function (a) {
					var b = [-a.y, a.width - a.x, a.height + a.y, -a.x],
					c = Math.min.apply(null, b),
					d = this.scale.domain(),
					e = this;
					return this.tickData.forEach(function (a) {
						if (a.tickContent) {
							var f,
							g = a.tickValue,
							h = a.tickDim,
							i = d.indexOf(g),
							j = e._getPolarPosition(g);
							switch (j) {
							case n:
								f = b[0] - h.height;
								break;
							case q:
								f = (b[1] - h.width) / Math.abs(Math.sin(i * e.piece));
								break;
							case o:
								f = b[2] - h.height;
								break;
							case p:
								f = (b[3] - h.width) / Math.abs(Math.sin(i * e.piece))
							}
							c = Math.min(c, f)
						}
					}),
					c - m
				},
				getIndexByPosition: function (a) {
					var d,
					e = this.getPlotBounds(),
					f = this.scale,
					g = f(this.isAxisReversed() ? f.domain()[f.domain().length - 1] : f.domain()[0]);
					d = this.isHorizontal() ? a[0] - e.x - g : a[1] - e.y - g;
					var h;
					switch (this.type) {
					case b.DATE_AXIS_COMPONENT:
						h = c.date2int(f.invert(d));
						break;
					default:
						h = f.invert(d)
					}
					return h = Math.round(h)
				}
			});
		return r.addInitHook(r.prototype.init),
		r
	}),
	c("component/CategoryAxis", ["require", "./Base", "./BaseAxis", "../utils/BaseUtils", "../Constants", "../ComponentLibrary"], function (a) {
		var b = (a("./Base"), a("./BaseAxis")),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = b.extend({
				type: d.CATEGORY_AXIS_COMPONENT,
				init: function () {
					this.isRangePoints = null,
					this.piece = null,
					this.highlightType = null
				},
				initAttributesWithSeries: function () {
					var a = this.componentOption,
					b = this.vanchart.series,
					e = {},
					f = this.isBaseAxis,
					g = a.categories || [];
					g.forEach(function (a) {
						e[a] = !0
					}),
					this.isRangePoints = !0,
					this.highlightType = "line";
					for (var h = 0, i = b.length; i > h; h++) {
						var j = b[h],
						k = j[this.componentType];
						if (k == this) {
							var l = j.originalPoints || j.points;
							if (l.forEach(function (a) {
									if (!a.isNull) {
										var b = f ? a.category : a.value;
										c.isNull(b) || e[b] || (g.push(b), e[b] = !0)
									}
								}), !this._isSeriesVisible(j))
								continue;
							j.type !== d.AREA_CHART && (this.isRangePoints = !1)
						}
					}
					switch (this.categories = g, this.scale = d3.scale.ordinal().domain(this.categories), this.componentType) {
					case d.ANGLE_AXIS_COMPONENT:
						this.isRangePoints = !0,
						this.piece = 2 * Math.PI / Math.max(g.length, 1)
					}
					this._updateOriginTickData()
				},
				updateCategories: function (a) {
					this.categories = a,
					this.scale.domain(a),
					this._updateOriginTickData()
				},
				_updateIndex: function (a, b) {
					this.componentOption.startIndex = a,
					this.componentOption.endIndex = b
				},
				getCategoryCount: function () {
					return this.categories.length
				},
				indexOfLabel: function (a) {
					return c.indexInArray(this.categories, a)
				},
				getTickLength: function () {
					var a = this.scale.domain(),
					b = this.scale.rangeExtent(),
					c = Math.abs(b[1] - b[0]);
					return this.isRangePoints && a.length <= 1 ? c : this.isRangePoints ? c / (a.length - 1) : this.scale.rangeBand()
				},
				_updateRange: function () {
					this.updateAxisScale(this._getStartIndex(), this._getEndIndex())
				},
				getValueFromData: function (a, b) {
					var d = this.componentOption.categories,
					e = this.isBaseAxis ? 0 : 1,
					f = {
						xAxis: "x",
						yAxis: "y",
						angleAxis: "x",
						radiusAxis: "y",
						gaugeAxis: "y"
					},
					g = f[this.componentType],
					h = c.isArray(a) ? a[e] : a[g];
					return c.hasDefined(h) ? h : d[b]
				},
				_getTickValues: function () {
					return this.scale.domain()
				},
				getCategories: function () {
					return this.scale.domain()
				},
				axisZoom: function (a, b) {
					var d,
					e,
					f = this.vanchart.getPlotBounds();
					this.isHorizontal() ? (d = Math.min(a[0], b[0]) - f.x, e = Math.max(a[0], b[0]) - f.x) : (d = Math.min(a[1], b[1]) - f.y, e = Math.max(a[1], b[1]) - f.y);
					var g = this.scale.domain(),
					h = this.scale.rangeExtent();
					h = this._getRangeWithMinMax(h[0], h[1]);
					var i = d3.scale.quantize().domain(h).range(g),
					j = c.indexInArray(this.categories, i(d)),
					k = c.indexInArray(this.categories, i(e));
					this.updateAxisScale(Math.min(j, k), Math.max(j, k))
				},
				updateAxisScale: function (a, b) {
					var c = this.scale.domain();
					if (-1 != a && -1 != b) {
						var e;
						if (this.componentType === d.ANGLE_AXIS_COMPONENT)
							e = [0, this.categories.length - 1];
						else {
							for (var f = [], g = a; b >= g; g++)
								f.push(c[g]);
							this._updateIndex(a, b);
							var h,
							i = this._getRange();
							h = this.isRangePoints ? Math.abs(i[0] - i[1]) / Math.max(f.length - 1, 1) : Math.abs(i[0] - i[1]) / f.length;
							var j = Math.min(i[0], i[1]),
							k = Math.max(i[0], i[1]),
							l = a,
							m = b;
							if (this.isAxisReversed()) {
								var n = this.categories.length - 1;
								l = Math.min(n - a, n - b),
								m = Math.max(n - a, n - b)
							}
							this.isHorizontal() ? (j -= l * h, k += (this.categories.length - m - 1) * h) : (j -= (this.categories.length - m - 1) * h, k += l * h),
							e = this._getRangeWithMinMax(j, k)
						}
						this.isRangePoints ? this.scale.rangePoints(e) : this.scale.rangeBands(e),
						this._updateOriginTickData(),
						this._calculateTickData()
					}
				},
				_getRangeWithMinMax: function (a, b) {
					var c = this.isAxisReversed();
					return this.isHorizontal() ? c ? [b, a] : [a, b] : c ? [a, b] : [b, a]
				},
				_initZoomStatus: function () {
					var a = this.vanchart.getComponent(d.ZOOM_COMPONENT);
					if (a && a.zoomToolEnabled() && c.isSupportSVG())
						if (this.vanchart.isInitOrRestoreState()) {
							var b = 0,
							e = this.categories.length - 1,
							f = a.componentOption.zoomTool;
							f.from && -1 != c.indexInArray(this.categories, f.from) && (b = c.indexInArray(this.categories, f.from)),
							f.to && -1 != c.indexInArray(this.categories, f.to) && (e = c.indexInArray(this.categories, f.to)),
							this.updateAxisScale(Math.min(b, e), Math.max(b, e))
						} else
							this.updateAxisScale(this._getStartIndex(), this._getEndIndex())
				},
				getHighlightType: function () {
					return this.highlightType
				},
				getIndexByPosition: function (a) {
					switch (this.componentType) {
					case d.X_AXIS_COMPONENT:
					case d.Y_AXIS_COMPONENT:
						return this._getIndexByXYCoordinate(a);
					case d.ANGLE_AXIS_COMPONENT:
						return this._getIndexByPolarCoordinate(a)
					}
				},
				_getIndexByPolarCoordinate: function (a) {
					var b = this.polar.center,
					d = this.polar.radius,
					e = this.isAxisReversed(),
					f = a[0] - b[0],
					g = b[1] - a[1];
					if (f * f + g * g > d * d)
						return -1;
					var h,
					i = c.getArcByPoint(f, g),
					j = this.getCategories();
					if (j.length > 1) {
						var k = 2 * Math.PI / j.length;
						h = e ? j.length - 1 - i / k : i / k
					} else
						h = 0;
					return h = Math.round(h),
					h %= j.length
				},
				_getIndexByXYCoordinate: function (a) {
					var b,
					c = this.getPlotBounds(),
					d = this.scale,
					e = this.isHorizontal(),
					f = this.isAxisReversed() ^ !e,
					g = d(f ? d.domain()[d.domain().length - 1] : d.domain()[0]);
					b = e ? a[0] - c.x - g : a[1] - c.y - g;
					var h,
					i = this.getCategories();
					if (i.length > 1) {
						var j = Math.abs(d(d.domain()[1]) - d(d.domain()[0]));
						h = f ? i.length - 1 - b / j : b / j
					} else
						h = 0;
					return h = "line" === this.getHighlightType() && this.isRangePoints ? Math.round(h) : f ? Math.ceil(h) : Math.floor(h)
				},
				_getBandByIndex: function (a) {
					switch (this.componentType) {
					case d.X_AXIS_COMPONENT:
					case d.Y_AXIS_COMPONENT:
						return this._getXYBandByIndex(a);
					case d.ANGLE_AXIS_COMPONENT:
						return this._getPolarBandByIndex(a)
					}
				},
				_getPolarBandByIndex: function (a) {
					var b,
					d = this.scale,
					e = d.domain(),
					f = this.polar.radius,
					g = (this.polar.center, d(e[a]) / e.length * 2 * Math.PI);
					if ("line" === this.getHighlightType()) {
						var h = c.getArcPoint(f, g);
						b = {
							x: h[0],
							y: h[1]
						}
					} else {
						var i = 1 / e.length * 2 * Math.PI * .5,
						j = g - i,
						k = g + i,
						l = d3.svg.arc().innerRadius(0).outerRadius(f).startAngle(j).endAngle(k);
						b = {
							d: l()
						}
					}
					return b
				},
				_getXYBandByIndex: function (a) {
					var b,
					c,
					d = this.getPlotBounds(),
					e = this._getTickValuesWithEndValue(),
					f = this.scale,
					g = f.domain(),
					h = this.isHorizontal(),
					i = this.isAxisReversed() ^ !h;
					b = f(g[a]);
					var j = h ? d.width : d.height;
					switch (this.getHighlightType()) {
					case "band":
						c = i ? 0 === a ? j : f(g[a - 1]) : a + 1 === e.length ? j : f(g[a + 1]);
						break;
					case "line":
					default:
						var k = this.isRangePoints ? 0 : f.rangeBand() / 2;
						b += k,
						c = b
					}
					var l;
					return l = h ? {
						x: d.x + b,
						y: d.y,
						width: Math.abs(c - b),
						height: d.height
					}
					 : {
						x: d.x,
						y: d.y + b,
						width: d.width,
						height: Math.abs(c - b)
					}
				},
				_getBandByPosition: function (a) {
					var b = this.getIndexByPosition(a);
					return this._getBandByIndex(b)
				}
			});
		return e.addInitHook(e.prototype.init),
		a("../ComponentLibrary").register(d.CATEGORY_AXIS_COMPONENT, e),
		e
	}),
	c("component/ValueAxis", ["require", "./Base", "./BaseAxis", "../utils/BaseUtils", "../utils/QueryUtils", "../Constants", "../Constants", "../ComponentLibrary"], function (a) {
		var b = (a("./Base"), a("./BaseAxis")),
		c = a("../utils/BaseUtils"),
		d = (a("../utils/QueryUtils"), a("../Constants")),
		d = a("../Constants"),
		e = b.extend({
				type: d.VALUE_AXIS_COMPONENT,
				initAttributesWithSeries: function () {
					this._hasInited = !0;
					var a = this.vanchart.series;
					this.byPercent = !1;
					for (var b = 0, c = a.length; c > b && !this.byPercent; b++) {
						var d = a[b],
						e = d[this.componentType];
						e == this && d.visible && (this.byPercent = d.stackByPercent && !this.isBaseAxis)
					}
					var f = this._calculateMinMaxValue(),
					g = this.componentOption;
					this.originalDomain = this._calculateNiceDomain(f.minValue, f.maxValue, g.min, g.max),
					this._updateOriginTickData()
				},
				_updateDomainWhenSizeFixed: function () {
					var a = this.getMaxBubbleRadius();
					if (a && this.type == d.VALUE_AXIS_COMPONENT && this._hasInited) {
						this._hasInited = !1;
						var b = this.scale,
						c = b.domain(),
						e = b.range(),
						f = this._calculateMinMaxValue(),
						g = Math.abs(a * (c[0] - c[1]) / (e[1] - e[0])),
						h = f.minValue - g,
						i = f.maxValue + g,
						j = this.componentOption;
						this.originalDomain = this._calculateNiceDomain(h, i, j.min, j.max),
						this._updateOriginTickData()
					}
				},
				_calculateNiceDomain: function (a, b, c, d, e) {
					var f = this.componentOption;
					return f.log && 1 != f.log ? this._calculateLogNiceDomain(a, b) : this.byPercent ? this._calculatePercentValueDomain() : this._calculateValueNiceDomain(a, b, c, d, e)
				},
				_calculateLogNiceDomain: function (a, b, d) {
					var e = this.componentOption,
					f = e.log,
					g = parseInt(c.pick(e.tickInterval, 1));
					this.valueList = [],
					a = a >= 1 ? 1 : a,
					a = 0 >= a ? 1 : a,
					a = d ? a : c.pick(e.min, a),
					b = d ? b : c.pick(e.max, b),
					a = Math.pow(f, Math.floor(c.log(f, a))),
					b = Math.pow(f, Math.ceil(c.log(f, b))),
					this.scale = this.scale ? this.scale.domain([a, b]) : d3.scale.log().base(f).domain([a, b]);
					for (var h = 0; a * Math.pow(f, h) <= b; )
						this.valueList.push(a * Math.pow(f, h)), h += g;
					return {
						minValue: a,
						maxValue: b
					}
				},
				_calculatePercentValueDomain: function () {
					var a = this.componentOption,
					b = c.pick(a.min, 0),
					d = c.pick(a.max, 1),
					e = c.pick(a.tickInterval, .25);
					this.valueList = [];
					for (var f = b; d >= f; f = c.accAdd(f, e))
						this.valueList.push(f);
					return this.scale = this.scale ? this.scale.domain([b, d]) : d3.scale.linear().domain([b, d]), {
						minValue: b,
						maxValue: d
					}
				},
				_calculateMinMaxValue: function () {
					for (var a = Number.MAX_VALUE, b = -a, c = !0, d = this.vanchart.series, e = {}, f = 0, g = d.length; g > f; f++) {
						var h = d[f],
						i = h[this.componentType];
						i == this && h.visible && this._getSeriesValue(e, h)
					}
					for (var j in e)
						for (var k = e[j], l = 0, m = k.length; m > l; l++)
							isNaN(k[l]) || this.componentOption.log && k[l] <= 0 || (a = Math.min(a, k[l]), b = Math.max(b, k[l]), c = !1);
					return c && (a = 0, b = 100), {
						minValue: a,
						maxValue: b
					}
				},
				_getSeriesValue: function (a, b) {
					var d = b.name || "",
					e = this.isBaseAxis;
					if (c.hasNotDefined(b.stack) || e)
						a[d] = a[d] || [], b.points.forEach(function (b) {
							a[d].push(e ? b.category : b.value)
						});
					else {
						var f = b.stack + b.type + "STACK_POSITIVE",
						g = b.stack + b.type + "STACK_NEGATIVE";
						a[f] = a[f] || [],
						a[g] = a[g] || [],
						b.points.forEach(function (b, c) {
							var d = e ? b.category : b.value;
							d > 0 ? null != a[f][c] && void 0 != a[f][c] ? a[f][c] += d : a[f][c] = d : null != a[g][c] && void 0 != a[g][c] ? a[g][c] += d : a[g][c] = d
						})
					}
				},
				getValueFromData: function (a) {
					var b = this.componentType == d.X_AXIS_COMPONENT ? 0 : 1,
					e = this.componentType == d.X_AXIS_COMPONENT ? "x" : "y",
					f = c.isArray(a) ? a[b] : a[e];
					return f = c.pick(f, a),
					f = +f,
					isNaN(f) ? "-" : f
				},
				getStartPos: function () {
					return this.scale(this.getStartPosValue())
				},
				getStartPosValue: function () {
					var a = this.componentOption;
					return a.log && 1 != a.log ? Number.MIN_VALUE : 0
				},
				getOriginalDomain: function () {
					return this.originalDomain
				},
				_getTickValues: function () {
					return this.valueList
				},
				_getTickValuesWithEndValue: function () {
					var a = c.clone(this.valueList),
					b = this.scale.domain()[1];
					return a.length && a[a.length - 1] < b && a.push(b),
					a
				},
				axisZoom: function (a, b) {
					var c,
					d,
					e = this.vanchart.getPlotBounds();
					this.isHorizontal() ? (c = Math.min(a[0], b[0]) - e.x, d = Math.max(a[0], b[0]) - e.x, c = Math.max(c, 0), d = Math.min(d, e.width)) : (c = Math.min(a[1], b[1]) - e.y, d = Math.max(a[1], b[1]) - e.y, c = Math.max(c, 0), d = Math.min(d, e.height));
					var f = this.scale.invert(c),
					g = this.scale.invert(d);
					this.updateAxisScale(Math.min(f, g), Math.max(f, g), !0)
				},
				updateAxisScale: function (a, b, c) {
					var d = this.componentOption,
					e = this._calculateNiceDomain(a, b, this.isBaseAxis ? a : d.min, this.isBaseAxis ? b : d.max, c && this.isBaseAxis);
					this.isBaseAxis && (this.componentOption.min = e.minValue, this.componentOption.max = e.maxValue),
					this._updateOriginTickData(),
					this._calculateTickData()
				},
				_initZoomStatus: function () {
					var a = this.vanchart.getComponent(d.ZOOM_COMPONENT);
					if (a && a.zoomToolEnabled() && c.isSupportSVG() && this.isBaseAxis && this.vanchart.isInitOrRestoreState()) {
						var b = a.getRevisedDomain(),
						e = this.scale.domain(),
						f = e[0],
						g = e[1];
						b.from && (f = parseFloat(b.from)),
						b.to && (g = parseFloat(b.to)),
						this.updateAxisScale(f, g)
					}
				}
			});
		return a("../ComponentLibrary").register(d.VALUE_AXIS_COMPONENT, e),
		e
	}),
	c("component/DateAxis", ["require", "./Base", "./BaseAxis", "../utils/BaseUtils", "../Constants", "../utils/Formatter", "../ComponentLibrary"], function (a) {
		var b = (a("./Base"), a("./BaseAxis")),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/Formatter"),
		f = 864e5,
		g = 31 * f,
		h = b.extend({
				type: d.DATE_AXIS_COMPONENT,
				initAttributesWithSeries: function () {
					this.scale = d3.time.scale();
					var a = this._calculateMinMaxValue(),
					b = a.minValue,
					d = a.maxValue,
					e = this.componentOption,
					f = this._calculateValueNiceDomain(b, d, e.min, e.max);
					b = c.int2date(f.minValue),
					d = c.int2date(f.maxValue),
					this.originalDomain = {
						minValue: b,
						maxValue: d
					},
					this.scale = this.scale ? this.scale.domain([b, d]) : d3.time.scale().domain([b, d]),
					this._calculateDateFormat(),
					this._updateOriginTickData()
				},
				getOriginalDomain: function () {
					return this.originalDomain
				},
				_calculateDateFormat: function () {
					var a = this._getTickInterval(),
					b = "Dyyyy-MM-dd";
					b = f > a ? "Dyyyy-M-d H:mm" : g > a ? "Dyyyy-M-d" : "Dyyyy-MM",
					this.dateFormat = b
				},
				_getTickContent: function (a, b) {
					if (!b || "function(){return arguments[0]}" == b) {
						var c = this.dateFormat;
						b = function () {
							return window.FR ? FR.contentFormat(arguments[0], c) : arguments[0]
						}
					}
					return e.format(a, b)
				},
				_getTickValues: function () {
					var a = [];
					return this.valueList.forEach(function (b) {
						a.push(c.int2date(b))
					}),
					a
				},
				_calculateMinMaxValue: function () {
					for (var a = Math.ceil(Number.MAX_VALUE), b = -a, d = this.vanchart.series, e = !1, f = 0, g = d.length; g > f; f++) {
						var h = d[f],
						i = h[this.componentType];
						if (i == this && this._isSeriesVisible(h))
							for (var j = h.seriesOption.data, f = 0, g = j.length; g > f; f++) {
								var k = this.getValueFromData(j[f]);
								k.getTime && (e = !0, k = c.date2int(k), a = Math.min(a, k), b = Math.max(b, k))
							}
					}
					return e || (a = b = (new Date).getTime()),
					b = a >= b ? a + 1e3 : b, {
						minValue: a,
						maxValue: b
					}
				},
				getValueFromData: function (a) {
					var b = this.componentType == d.X_AXIS_COMPONENT ? 0 : 1,
					e = this.componentType == d.X_AXIS_COMPONENT ? "x" : "y",
					f = c.isArray(a) ? a[b] : a[e];
					return c.object2date(f)
				},
				axisZoom: function (a, b) {
					var d,
					e,
					f = this.vanchart.getPlotBounds();
					this.isHorizontal() ? (d = Math.min(a[0], b[0]) - f.x, e = Math.max(a[0], b[0]) - f.x) : (d = Math.min(a[1], b[1]) - f.y, e = Math.max(a[1], b[1]) - f.y);
					var g = this.scale.invert(d),
					h = this.scale.invert(e);
					g = c.date2int(g),
					h = c.date2int(h);
					var i = Math.min(g, h),
					j = Math.max(g, h);
					this._updateDomain(i, j, !0)
				},
				_updateDomain: function (a, b, d) {
					var e = this._calculateValueNiceDomain(a, b, a, b, d),
					f = c.int2date(e.minValue),
					g = c.int2date(e.maxValue);
					this.scale = this.scale ? this.scale.domain([f, g]) : d3.time.scale().domain([f, g]),
					this._calculateDateFormat(),
					this._updateOriginTickData()
				},
				updateAxisScale: function (a, b, d) {
					a = c.date2int(a),
					b = c.date2int(b),
					this.componentOption.min = a,
					this.componentOption.max = b,
					this._updateDomain(a, b, d)
				},
				_initZoomStatus: function () {
					var a = this.vanchart.getComponent(d.ZOOM_COMPONENT);
					if (a && a.zoomToolEnabled() && c.isSupportSVG() && this.isBaseAxis && this.vanchart.isInitOrRestoreState()) {
						var b = a.getRevisedDomain(),
						e = this.scale.domain(),
						f = c.date2int(e[0]),
						g = c.date2int(e[1]);
						b.from && (f = c.object2date(b.from), f = c.date2int(f)),
						b.to && (g = c.object2date(b.to), g = c.date2int(g)),
						this._updateDomain(f, g)
					}
				}
			});
		return a("../ComponentLibrary").register(d.DATE_AXIS_COMPONENT, h),
		h
	}),
	c("component/Polar", ["require", "../Constants", "../utils/BaseUtils", "../utils/QueryUtils", "../utils/Formatter", "../utils/BoundsManager", "./Base", "../utils/BezierEasing", "../theme/options", "../ComponentLibrary"], function (a) {
		var b = a("../Constants"),
		c = (a("../utils/BaseUtils"), a("../utils/QueryUtils")),
		d = (a("../utils/Formatter"), a("../utils/BoundsManager"), a("./Base")),
		e = (a("../utils/BezierEasing"), a("../theme/options")),
		f = d.extend({
				doLayout: function () {
					var a = this.componentOption,
					d = a.radius,
					f = a.center;
					if (!f || 0 === f.length) {
						var g = this.vanchart.getPlotBounds();
						f = [g.width / 2 + g.x, g.height / 2 + g.y]
					}
					this.setRadius(d),
					this.setCenter(f);
					var h = [this.option.plotOptions[b.RADAR_CHART], this.option.plotOptions, e[b.RADAR_CHART].plotOptions];
					this.shape = this.shape || c.queryList(h, "shape")
				},
				setRadius: function (a) {
					a && (this.radius = this._numPctHelper(a, Math.min(this.vanchart.chartWidth(), this.vanchart.chartHeight()) / 2), this.radiusAxis && this.radiusAxis._updateRange())
				},
				setCenter: function (a) {
					a && (this.center = [], this.center[0] = this._numPctHelper(a[0], this.vanchart.chartWidth()), this.center[1] = this._numPctHelper(a[1], this.vanchart.chartHeight()))
				},
				_numPctHelper: function (a, b) {
					return a && b ? isNaN(a) ? "string" == typeof a && -1 != a.indexOf("%") ? this._getPercentValue(a, b) : null : a : null
				}
			});
		return a("../ComponentLibrary").register(b.POLAR_COMPONENT, f),
		f
	}),
	c("utils/PathUtils", ["require"], function (a) {
		function b(a) {
			var b = /([clmz]),?([^clmz]*)/gi,
			c = {
				M: "m",
				L: "l",
				C: "c",
				Z: "x",
				m: "t",
				l: "r",
				c: "v",
				z: "x"
			},
			d = /[ahqstv]/gi,
			f = i;
			if (String(a).match(d) && (f = e), d = /[clmz]/g, f == i && !String(a).match(d)) {
				var g = String(a).replace(b, function (a, b, d) {
						var e = [],
						f = "m" == b.toLowerCase(),
						g = c[b];
						return d.replace(x, function (a) {
							f && 2 == e.length && (g += e + c["m" == b ? "l" : "L"], e = []),
							e.push(s(a * A))
						}),
						g + e
					});
				return g
			}
			var h,
			j,
			k = f(a);
			g = [];
			for (var l = 0, m = k.length; m > l; l++) {
				h = k[l],
				j = k[l][0].toLowerCase(),
				"z" == j && (j = "x");
				for (var n = 1, o = h.length; o > n; n++)
					j += s(h[n] * A) + (n != o - 1 ? "," : z);
				g.push(j)
			}
			return g.join(y)
		}
		function c(a) {
			if (!a && "string" != typeof a)
				return null;
			var b = {
				a: 7,
				c: 6,
				h: 1,
				l: 2,
				m: 2,
				r: 4,
				q: 4,
				s: 4,
				t: 2,
				v: 1,
				z: 0
			},
			c = [];
			return String(a).replace(l, function (a, d, e) {
				var f = [],
				g = d.toLowerCase();
				if (e.replace(m, function (a, b) {
						b && f.push(+b)
					}), "m" == g && f.length > 2 && (c.push([d][n](f.splice(0, 2))), g = "l", d = "m" == d ? "l" : "L"), "r" == g)
					c.push([d][n](f));
				else
					for (; f.length >= b[g] && (c.push([d][n](f.splice(0, b[g]))), b[g]); );
			}),
			c.toString = d,
			c
		}
		function d() {
			return this.join(",").replace(w, "$1")
		}
		function e(a, b) {
			for (var c = i(a), d = b && i(b), e = {
					x: 0,
					y: 0,
					bx: 0,
					by: 0,
					X: 0,
					Y: 0,
					qx: null,
					qy: null
				}, j = {
					x: 0,
					y: 0,
					bx: 0,
					by: 0,
					X: 0,
					Y: 0,
					qx: null,
					qy: null
				}, k = (function (a, b, c) {
					var d,
					e,
					i = {
						T: 1,
						Q: 1
					};
					if (!a)
						return ["C", b.x, b.y, b.x, b.y, b.x, b.y];
					switch (!(a[0]in i) && (b.qx = b.qy = null), a[0]) {
					case "M":
						b.X = a[1],
						b.Y = a[2];
						break;
					case "A":
						a = ["C"][n](h[o](0, [b.x, b.y][n](a.slice(1))));
						break;
					case "S":
						"C" == c || "S" == c ? (d = 2 * b.x - b.bx, e = 2 * b.y - b.by) : (d = b.x, e = b.y),
						a = ["C", d, e][n](a.slice(1));
						break;
					case "T":
						"Q" == c || "T" == c ? (b.qx = 2 * b.x - b.qx, b.qy = 2 * b.y - b.qy) : (b.qx = b.x, b.qy = b.y),
						a = ["C"][n](f(b.x, b.y, b.qx, b.qy, a[1], a[2]));
						break;
					case "Q":
						b.qx = a[1],
						b.qy = a[2],
						a = ["C"][n](f(b.x, b.y, a[1], a[2], a[3], a[4]));
						break;
					case "L":
						a = ["C"][n](g(b.x, b.y, a[1], a[2]));
						break;
					case "H":
						a = ["C"][n](g(b.x, b.y, a[1], b.y));
						break;
					case "V":
						a = ["C"][n](g(b.x, b.y, b.x, a[1]));
						break;
					case "Z":
						a = ["C"][n](g(b.x, b.y, b.X, b.Y))
					}
					return a
				}), l = function (a, b) {
				if (a[b].length > 7) {
					a[b].shift();
					for (var e = a[b]; e.length; )
						p[b] = "A", d && (r[b] = "A") , a.splice(b++, 0, ["C"][n](e.splice(0, 6)));
						a.splice(b, 1),
						v = q(c.length, d && d.length || 0)
					}
				}, m = function (a, b, e, f, g) {
					a && b && "M" == a[g][0] && "M" != b[g][0] && (b.splice(g, 0, ["M", f.x, f.y]), e.bx = 0, e.by = 0, e.x = a[g][1], e.y = a[g][2], v = q(c.length, d && d.length || 0))
				}, p = [], r = [], s = "", t = "", u = 0, v = Math.max(c.length, d && d.length || 0); v > u; u++) {
					c[u] && (s = c[u][0]),
					"C" != s && (p[u] = s, u && (t = p[u - 1])),
					c[u] = k(c[u], e, t),
					"A" != p[u] && "C" == s && (p[u] = "C"),
					l(c, u),
					d && (d[u] && (s = d[u][0]), "C" != s && (r[u] = s, u && (t = r[u - 1])), d[u] = k(d[u], j, t), "A" != r[u] && "C" == s && (r[u] = "C"), l(d, u)),
					m(c, d, e, j, u),
					m(d, c, j, e, u);
					var w = c[u],
					x = d && d[u],
					y = w.length,
					z = d && x.length;
					e.x = w[y - 2],
					e.y = w[y - 1],
					e.bx = parseFloat(w[y - 4]) || e.x,
					e.by = parseFloat(w[y - 3]) || e.y,
					j.bx = d && (parseFloat(x[z - 4]) || j.x),
					j.by = d && (parseFloat(x[z - 3]) || j.y),
					j.x = d && x[z - 2],
					j.y = d && x[z - 1]
				}
			return d ? [c, d] : c
		}
		function f(a, b, c, d, e, f) {
			var g = 1 / 3,
			h = 2 / 3;
			return [g * a + h * c, g * b + h * d, g * e + h * c, g * f + h * d, e, f]
		}
		function g(a, b, c, d) {
			return [a, b, c, d, c, d]
		}
		function h(a, b, c, d, e, f, g, i, j, k) {
			var l,
			m = 120 * t / 180,
			o = t / 180 * (+e || 0),
			p = [],
			q = function (a, b, c) {
				var d = a * r.cos(c) - b * r.sin(c),
				e = a * r.sin(c) + b * r.cos(c);
				return {
					x: d,
					y: e
				}
			};
			if (k)
				D = k[0], E = k[1], B = k[2], C = k[3];
			else {
				l = q(a, b, -o),
				a = l.x,
				b = l.y,
				l = q(i, j, -o),
				i = l.x,
				j = l.y;
				var s = (r.cos(t / 180 * e), r.sin(t / 180 * e), (a - i) / 2),
				w = (b - j) / 2,
				x = s * s / (c * c) + w * w / (d * d);
				x > 1 && (x = r.sqrt(x), c = x * c, d = x * d);
				var y = c * c,
				z = d * d,
				A = (f == g ? -1 : 1) * r.sqrt(u((y * z - y * w * w - z * s * s) / (y * w * w + z * s * s))),
				B = A * c * w / d + (a + i) / 2,
				C = A * -d * s / c + (b + j) / 2,
				D = r.asin(((b - C) / d).toFixed(9)),
				E = r.asin(((j - C) / d).toFixed(9));
				D = B > a ? t - D : D,
				E = B > i ? t - E : E,
				0 > D && (D = 2 * t + D),
				0 > E && (E = 2 * t + E),
				g && D > E && (D -= 2 * t),
				!g && E > D && (E -= 2 * t)
			}
			var F = E - D;
			if (u(F) > m) {
				var G = E,
				H = i,
				I = j;
				E = D + m * (g && E > D ? 1 : -1),
				i = B + c * r.cos(E),
				j = C + d * r.sin(E),
				p = h(i, j, c, d, e, 0, g, H, I, [E, G, B, C])
			}
			F = E - D;
			var J = r.cos(D),
			K = r.sin(D),
			L = r.cos(E),
			M = r.sin(E),
			N = r.tan(F / 4),
			O = 4 / 3 * c * N,
			P = 4 / 3 * d * N,
			Q = [a, b],
			R = [a + O * K, b - P * J],
			S = [i + O * M, j - P * L],
			T = [i, j];
			if (R[0] = 2 * Q[0] - R[0], R[1] = 2 * Q[1] - R[1], k)
				return [R, S, T][n](p);
			p = [R, S, T][n](p).join()[v](",");
			for (var U = [], V = 0, W = p.length; W > V; V++)
				U[V] = V % 2 ? q(p[V - 1], p[V], o).y : q(p[V], p[V + 1], o).x;
			return U
		}
		function i(a) {
			if ("string" == typeof a && (a = c(a)), !a || !a.length)
				return [["M", 0, 0]];
			var b = [],
			e = 0,
			f = 0,
			g = 0,
			h = 0,
			i = 0;
			"M" == a[0][0] && (e = +a[0][1], f = +a[0][2], g = e, h = f, i++, b[0] = ["M", e, f]);
			for (var k, l, m = 3 == a.length && "M" == a[0][0] && "R" == a[1][0].toUpperCase() && "Z" == a[2][0].toUpperCase(), o = i, q = a.length; q > o; o++) {
				if (b.push(k = []), l = a[o], l[0] != p.call(l[0]))
					switch (k[0] = p.call(l[0]), k[0]) {
					case "A":
						k[1] = l[1],
						k[2] = l[2],
						k[3] = l[3],
						k[4] = l[4],
						k[5] = l[5],
						k[6] =  + (l[6] + e),
						k[7] =  + (l[7] + f);
						break;
					case "V":
						k[1] = +l[1] + f;
						break;
					case "H":
						k[1] = +l[1] + e;
						break;
					case "R":
						for (var r = [e, f][n](l.slice(1)), s = 2, t = r.length; t > s; s++)
							r[s] = +r[s] + e, r[++s] = +r[s] + f;
						b.pop(),
						b = b[n](j(r, m));
						break;
					case "M":
						g = +l[1] + e,
						h = +l[2] + f;
					default:
						for (s = 1, t = l.length; t > s; s++)
							k[s] = +l[s] + (s % 2 ? e : f)
					}
				else if ("R" == l[0])
					r = [e, f][n](l.slice(1)), b.pop(), b = b[n](j(r, m)), k = ["R"][n](l.slice(-2));
				else
					for (var u = 0, v = l.length; v > u; u++)
						k[u] = l[u];
				switch (k[0]) {
				case "Z":
					e = g,
					f = h;
					break;
				case "H":
					e = k[1];
					break;
				case "V":
					f = k[1];
					break;
				case "M":
					g = k[k.length - 2],
					h = k[k.length - 1];
				default:
					e = k[k.length - 2],
					f = k[k.length - 1]
				}
			}
			return b.toString = d,
			b
		}
		function j(a, b) {
			for (var c = [], d = 0, e = a.length; e - 2 * !b > d; d += 2) {
				var f = [{
						x: +a[d - 2],
						y: +a[d - 1]
					}, {
						x: +a[d],
						y: +a[d + 1]
					}, {
						x: +a[d + 2],
						y: +a[d + 3]
					}, {
						x: +a[d + 4],
						y: +a[d + 5]
					}
				];
				b ? d ? e - 4 == d ? f[3] = {
					x: +a[0],
					y: +a[1]
				}
				 : e - 2 == d && (f[2] = {
						x: +a[0],
						y: +a[1]
					}, f[3] = {
						x: +a[2],
						y: +a[3]
					}) : f[0] = {
					x: +a[e - 2],
					y: +a[e - 1]
				}
				 : e - 4 == d ? f[3] = f[2] : d || (f[0] = {
							x: +a[d],
							y: +a[d + 1]
						}),
				c.push(["C", (-f[0].x + 6 * f[1].x + f[2].x) / 6, (-f[0].y + 6 * f[1].y + f[2].y) / 6, (f[1].x + 6 * f[2].x - f[3].x) / 6, (f[1].y + 6 * f[2].y - f[3].y) / 6, f[2].x, f[2].y])
			}
			return c
		}
		function k(a, b, c, d, e) {
			return e ? [["M", a + e, b], ["l", c - 2 * e, 0], ["a", e, e, 0, 0, 1, e, e], ["l", 0, d - 2 * e], ["a", e, e, 0, 0, 1, -e, e], ["l", 2 * e - c, 0], ["a", e, e, 0, 0, 1, -e, -e], ["l", 0, 2 * e - d], ["a", e, e, 0, 0, 1, e, -e], ["z"]] : [["M", a, b], ["l", c, 0], ["l", 0, d], ["l", -c, 0], ["z"]]
		}
		var l = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
		m = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,
		n = "concat",
		o = "apply",
		p = String.prototype.toUpperCase,
		q = Math.max,
		r = Math,
		s = r.round,
		t = r.PI,
		u = Math.abs,
		v = "split",
		w = /,?([achlmqrstvxz]),?/gi,
		x = /-?[^,\s-]+/g,
		y = " ",
		z = "",
		A = 1;
		return {
			pathToAbsolute: i,
			path2vml: b,
			rectPath: k
		}
	}),
	c("utils/LabelDivManager", ["require", "./BaseUtils", "./ColorUtils", "./BezierEasing"], function (a) {
		function b(a) {
			this.dom = a,
			this.labelList = {}
		}
		var c = a("./BaseUtils"),
		d = a("./ColorUtils"),
		e = a("./BezierEasing"),
		f = "div-label-key";
		return b.prototype = {
			constructor: b,
			addLabel: function (a, b, e, g, h, i) {
				"undefined" == typeof h && (h = !1),
				"undefined" == typeof i && (i = !0),
				g = g || f,
				this.labelList[g] || (this.labelList[g] = []);
				var j = this.labelList[g],
				k = document.createElement("div");
				i ? k.innerHTML = a : k.textContent ? k.textContent = a : k.innerText = a,
				k.style.zIndex = 1001,
				k.style.position = "absolute",
				k.style.left = b.x + "px",
				k.style.top = b.y + "px",
				k.style.overflow = "hidden",
				h ? (k.style.whiteSpace = "normal", k.style.wordWrap = "break-word") : k.style.whiteSpace = "nowrap",
				c.hasDefined(b.width) && c.hasDefined(b.height) && (k.style.width = b.width + "px", k.style.height = b.height + "px");
				for (var l in e)
					"color" != l || c.isSupportSVG() ? k.style[l] = e[l] : k.style.color = d.colorToHex(e.color);
				return this.dom.appendChild(k),
				j.push(k),
				k
			},
			addLabelWidthBounds: function (a, b, c, d, e, f) {
				var g = this.addLabel(a, b, c, d, e, f);
				return g.style.width = b.width + "px",
				g.style.height = b.height + "px",
				g
			},
			clearLabels: function (a) {
				a = a || f;
				for (var b = this.labelList[a] || [], c = 0, d = b.length; d > c; c++)
					this.dom.removeChild(b[c]);
				this.labelList[a] = []
			},
			clearAllLabels: function () {
				for (var a in this.labelList)
					this.clearLabels(a)
			},
			translateLabelsHorizontal: function (a, b) {
				b = b || f;
				for (var d = this.labelList[b] || [], g = 0, h = d.length; h > g; g++) {
					var i = d[g],
					j = parseFloat(i.style.left);
					j += a,
					c.isSupportSVG() ? d3.select(i).transition().ease(e.css.swing).duration(300).style("left", j + "px") : i.style.left = j + "px"
				}
			},
			changeLabelDim: function (a, b) {
				if (a) {
					b = b || f;
					var d = this.labelList[b] || [];
					d.map(function (b) {
						var d = {};
						for (var f in a) {
							var g = parseFloat(b.style[f]);
							d[f] = g + a[f] + "px"
						}
						if (c.isSupportSVG())
							d3.select(b).transition().ease(e.css.swing).duration(300).style(d);
						else
							for (var f in d)
								b.style[f] = d[f]
					})
				}
			},
			setLabelOpacity: function (a, b) {
				for (var c = this.labelList[a] || [], d = 0, e = c.length; e > d; d++) {
					var f = c[d];
					f.style.opacity = b
				}
			}
		},
		b
	}),
	c("render/CanvasRender", ["require", "../utils/BaseUtils", "../Constants"], function (a) {
		function b(a, b) {
			this._init(a, b)
		}
		var c = (a("../utils/BaseUtils"), a("../Constants"));
		return b.prototype = {
			constructor: b,
			_init: function (a, b) {
				var c = b.getPlotBounds();
				this.width = c.width,
				this.height = c.height,
				this.dom = this._createCanvas(a, c),
				this.ctx = this.dom.getContext("2d")
			},
			_createCanvas: function (a, b) {
				var c = document.createElement("canvas"),
				d = b.width,
				e = b.height;
				return c.style.position = "absolute",
				c.style.left = b.x + "px",
				c.style.top = b.y + "px",
				c.style.width = d + "px",
				c.style.height = e + "px",
				c.width = d,
				c.height = e,
				c.onselectstart = function () {
					return !1
				},
				c.style["-webkit-user-select"] = "none",
				c.style["user-select"] = "none",
				c.style["-webkit-touch-callout"] = "none",
				a.appendChild(c),
				window.vmlCanvasManager && vmlCanvasManager.initElement(c),
				c
			},
			clearAll: function () {
				this.ctx.clearRect(0, 0, this.width, this.height)
			},
			addBubbleSeries: function (a) {
				var b = this.ctx;
				b.save();
				for (var c = 0, d = a.points.length; d > c; c++) {
					var e = a.points[c];
					e.visible && (b.fillStyle = e.color, b.globalAlpha = e.fillColorOpacity, b.beginPath(), b.arc(e.posX, e.posY, e.radius, 0, 2 * Math.PI), b.fill())
				}
				b.restore()
			},
			addScatterSeries: function (a) {
				var b = this.ctx;
				b.save();
				for (var c = 0, d = a.points.length; d > c; c++) {
					var e = a.points[c];
					if (e.visible) {
						var f = e.marker.symbol,
						g = e.marker.radius || 4.5,
						h = e.marker.fillColor || e.color;
						b.translate(e.posX, e.posY),
						b.fillStyle = h,
						b.strokeStyle = h,
						b.globalAlpha = e.fillColorOpacity,
						this._drawMarker(b, f, g),
						b.translate(-e.posX, -e.posY)
					}
				}
				b.restore()
			},
			addSeries: function (a) {
				a.chart.componentType == c.SCATTER_CHART ? this.addScatterSeries(a) : this.addBubbleSeries(a)
			},
			_drawMarker: function (a, b, d) {
				-1 != b.indexOf(c.CIRCLE) ? (a.beginPath(), a.arc(0, 0, d, 0, 2 * Math.PI)) : -1 != b.indexOf(c.SQUARE) ? (a.beginPath(), a.moveTo(-d, -d), a.lineTo(d, -d), a.lineTo(d, d), a.lineTo(-d, d), a.closePath()) : -1 != b.indexOf(c.DIAMOND) ? (d = 2 * d / Math.sqrt(2), a.beginPath(), a.moveTo(-d, 0), a.lineTo(0, -d), a.lineTo(d, 0), a.lineTo(0, d), a.closePath()) : -1 != b.indexOf(c.TRIANGLE) ? (a.beginPath(), a.moveTo(-d, d / Math.sqrt(3)), a.lineTo(0,  - (2 * Math.sqrt(3) / 3) * d), a.lineTo(d, d / Math.sqrt(3)), a.closePath()) : (a.beginPath(), a.arc(0, 0, d, 0, 2 * Math.PI)),
				-1 == b.indexOf("hollow") ? a.fill() : (a.fillStyle = "white", a.lineWidth = 2, a.fill(), a.stroke())
			}
		},
		b
	}),
	c("render/BaseRender", ["require", "../utils/BaseUtils", "../utils/PathUtils", "../utils/LabelDivManager", "../utils/ColorUtils", "../utils/Class", "../Constants", "./CanvasRender"], function (a) {
		var b = a("../utils/BaseUtils"),
		c = a("../utils/PathUtils"),
		d = a("../utils/LabelDivManager"),
		e = a("../utils/ColorUtils"),
		f = a("../utils/Class"),
		g = a("../Constants"),
		h = a("./CanvasRender"),
		i = "markerG",
		j = "markerPath",
		k = "markerStrokePath",
		l = 2,
		m = f.extend({
				initialize: function (a) {
					this.component = a,
					a && a.getParentDom && (this.labelDivManager = new d(a.getDivParentDom())),
					this.drawLabelTimeOut = {}
				},
				_createHorizontalLinearGradient: function (a, b, c, d) {
					this._createLinearGradient(a, b, c, d, !0)
				},
				_createVerticalLinearGradient: function (a, b, c, d) {
					this._createLinearGradient(a, b, c, d, !1)
				},
				_createLinearGradient: function (a, b, c, d, e) {
					var f = "0%",
					g = "0%";
					e ? f = "100%" : g = "100%";
					var h = a.append("linearGradient").attr("x1", "0%").attr("y1", "0%").attr("x2", f).attr("y2", g).attr("id", b);
					h.append("stop").attr("offset", "0%").style("stop-color", c),
					h.append("stop").attr("offset", "100%").style("stop-color", d)
				},
				_createDropShadowFilter: function (a, b, c, d, e, f) {
					var g = a.append("filter").attr("id", b).attr("x", "-50%").attr("y", "-50%").attr("width", "200%").attr("height", "200%");
					g.append("feOffset").attr("in", "SourceAlpha").attr("dx", c).attr("dy", d).attr("result", "offOut"),
					g.append("feColorMatrix").attr("in", "offOut").attr("type", "matrix").attr("values", "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 " + e + " 0").attr("result", "matrixOut"),
					g.append("feGaussianBlur").attr("in", "matrixOut").attr("stdDeviation", f).attr("result", "blurOut"),
					g.append("feBlend").attr("in", "SourceGraphic").attr("in2", "blurOut").attr("mode", "normal")
				},
				_createInnerShadowFilter: function (a, b, c, d, e, f) {
					var g = a.append("filter").attr("id", b).attr("x", "-50%").attr("y", "-50%").attr("width", "200%").attr("height", "200%");
					g.append("feComponentTransfer").attr("in", "SourceAlpha").append("feFuncA").attr("type", "table").attr("tableValues", "1 0"),
					g.append("feGaussianBlur").attr("stdDeviation", f),
					g.append("feOffset").attr("dx", c).attr("dy", d).attr("result", "offsetblur"),
					g.append("feFlood").attr("flood-color", "black").attr("flood-opacity", e).attr("result", "color"),
					g.append("feComposite").attr("in2", "offsetblur").attr("operator", "in"),
					g.append("feComposite").attr("in2", "SourceAlpha").attr("operator", "in");
					var h = g.append("feMerge");
					h.append("feMergeNode").attr("in", "SourceGraphic"),
					h.append("feMergeNode")
				},
				_createVmlMarker: function (a, c, d) {
					var f = this.component.getPlotBounds(),
					h = this.component.getDefaultMarkerRadius(),
					i = c.marker.radius;
					if (b.hasDefined(i) && l > i)
						return {};
					if (i = i || h, b.outsideRect(f, b.makeBounds(d, [i, i])))
						return {};
					var j = c.marker.symbol,
					k = j == g.NULL_MARKER,
					m = this.component._getBackgroundColor(),
					n = this._isHollowMarker(j) ? i - 1 : i,
					o = e.getColorOpacityWithoutDefault(c.marker.fillColor);
					o = b.hasDefined(o) ? o : c.fillColorOpacity;
					var p;
					if (b.isImageMarker(j)) {
						var q = c.marker.width,
						r = c.marker.height;
						p = a.image(j, -q / 2, -r / 2, q, r).datum(c).transform(b.makeTranslate(d))
					} else {
						p = a.path(this._getMarkerPath(j, n)).attr({
								fill: this._isHollowMarker(j) || k ? m : c.marker.fillColor,
								"fill-opacity": k ? 0 : o,
								"stroke-opacity": k ? 0 : o,
								stroke: c.marker.fillColor,
								"stroke-width": this._isHollowMarker(j) ? 2 : 0
							}).datum(c).transform(b.makeTranslate(d));
						var s;
						this.component.type == g.LINE_CHART && (s = a.path(this._getMarkerPath(j, i + 1)).attr({
									"stroke-width": k ? 0 : 2,
									stroke: m,
									fill: "none"
								}).transform(b.makeTranslate(d)))
					}
					return this.addShapeEventHandler(p), {
						marker: p,
						strokeMarker: s
					}
				},
				_getMarkerGroupClass: function (a) {
					return a.className + " " + i
				},
				_createSvgMarker: function (a) {
					var c = this,
					d = this.component.getDefaultMarkerRadius();
					a.enter().append("g").attr("class", function (a) {
						return c._getMarkerGroupClass(a)
					}).filter(function (a) {
						var c = a.marker.radius;
						return a.visible && (b.hasNotDefined(c) || c >= l)
					}).each(function (a) {
						if (!a.isNull) {
							var e = d3.select(this),
							f = a.marker.symbol;
							b.isImageMarker(f) ? c._createImageMarker(f, function (b, c) {
								var b = a.marker.width || b,
								c = a.marker.height || c;
								a.marker.width = b,
								a.marker.height = c,
								e.append("image").attr("preserveAspectRatio", "none").attr("xlink:href", f).attr("x", -b / 2).attr("y", -c / 2).attr("width", b).attr("height", c)
							}) : (e.append("path").attr("class", j).attr("d", function (a) {
									var b = a.marker.radius || d;
									return c._isHollowMarker(f) && (b -= 1),
									c._getMarkerPath(f, b)
								}), c.component.type == g.LINE_CHART && e.append("path").attr("class", k).attr("d", function (a) {
									var b = a.marker.radius || d;
									return c._getMarkerPath(f, b + 1)
								}), c._updateMarkerStyle(e, a)),
							c.addShapeEventHandler(e)
						}
					})
				},
				_updateMarkerStyle: function (a, c) {
					var d = c.marker.symbol,
					e = d == g.NULL_MARKER,
					f = this,
					h = this.component._getBackgroundColor();
					b.isImageMarker(d) || (a.select("path." + j).style("fill", function (a) {
							return f._isHollowMarker(d) ? h : a.marker.fillColor
						}).style("fill-opacity", e ? 0 : function (a) {
							return a.fillColorOpacity
						}).style("stroke", function (a) {
							return a.marker.fillColor
						}).style("stroke-opacity", function (a) {
							return a.fillColorOpacity
						}).style("stroke-width", function () {
							return f._isHollowMarker(d) ? 2 : 0
						}), a.select("path." + k).style("stroke-width", e ? 0 : 2).style("stroke", h).style("fill", "none"))
				},
				_createImageMarker: function (a, b) {
					var c = new Image;
					c.onload = function () {
						b(this.width, this.height)
					},
					c.src = a
				},
				_getMarkerClass: function () {
					return i
				},
				_makeVmlMarkerChosenState: function (a) {
					var c = a.marker.symbol;
					if (!b.isImageMarker(c)) {
						var d = a.marker.radius || this.component.getDefaultMarkerRadius(),
						e = this._isHollowMarker(c) ? d - 1 : d,
						f = this.component._getBackgroundColor(),
						g = this.getElementByData(a);
						if (g && g.marker) {
							var h = g.marker,
							i = g.strokeMarker;
							h.attr({
								path: this._getMarkerPath(c, e + 2),
								fill: this._isHollowMarker(c) ? f : a.marker.fillColor,
								"fill-opacity": 1
							}),
							i && i.attr({
								path: this._getMarkerPath(c, d + 3)
							})
						}
					}
				},
				_cancelVmlMarkerChosenState: function (a) {
					var c = a.marker.symbol;
					if (!b.isImageMarker(c)) {
						var d = c == g.NULL_MARKER,
						e = a.marker.radius || this.component.getDefaultMarkerRadius(),
						f = this._isHollowMarker(c) ? e - 1 : e,
						h = this.component._getBackgroundColor(),
						i = this.getElementByData(a);
						if (i && i.marker) {
							var j = i.marker,
							k = i.strokeMarker;
							j.attr({
								path: this._getMarkerPath(c, f),
								fill: this._isHollowMarker(c) || d ? h : a.marker.fillColor,
								"fill-opacity": d ? 0 : 1
							}),
							k && k.attr({
								path: this._getMarkerPath(c, e + 1),
								"stroke-width": d ? 0 : 2
							})
						}
					}
				},
				_makeMarkerClickedState: function (a, b) {
					var c = a.select("g." + b.className),
					d = this.component._getBackgroundColor(),
					f = b.marker.fillColor;
					d = e.getClickColor(d),
					f = e.getClickColor(f);
					var g = b.marker.symbol;
					c.select("path." + j).style("fill", this._isHollowMarker(g) ? d : f).style("stroke", f),
					c.select("path." + k).style("stroke", d)
				},
				_cancelMarkerClickedState: function (a, b) {
					var c = this.component._getBackgroundColor(),
					d = b.marker.fillColor,
					e = b.marker.symbol;
					a.select("path." + j).style("fill", this._isHollowMarker(e) ? c : d).style("stroke", d),
					a.select("path." + k).style("stroke", c)
				},
				_makeMarkerChosenState: function (a, c, d, f) {
					d = d || 2,
					f = f || 0;
					var h = c.marker.symbol,
					i = c.marker.radius || this.component.getDefaultMarkerRadius(),
					l = h == g.NULL_MARKER,
					m = i,
					n = e.getHighLightColor(this.component._getBackgroundColor()),
					o = e.getHighLightColor(c.marker.fillColor),
					p = this;
					if (this._isHollowMarker(h) && (m -= 1), a) {
						a.select("path." + j).style("fill", this._isHollowMarker(h) ? n : o).style("fill-opacity", l ? 1 : b.pick(c.fillColorOpacity, 1)).interrupt(g.SELECT_ANIMATION).transition(g.SELECT_ANIMATION).duration(f).ease("ease-out-expo").attr("d", p._getMarkerPath(h, l ? m : m + d)),
						a.select("path." + k).attr("d", p._getMarkerPath(h, l ? i : i + 3)).style("stroke-width", 2);
						var q = a.select("image");
						if (!q.empty()) {
							var r = c.marker.width + 4,
							s = c.marker.height + 4;
							q.attr("x", -r / 2).attr("y", -s / 2).attr("width", r).attr("height", s)
						}
					}
				},
				_cancelMarkerChosenState: function (a, c) {
					var d = this.component._getBackgroundColor(),
					e = c.marker.symbol,
					f = e == g.NULL_MARKER,
					h = c.marker.radius || this.component.getDefaultMarkerRadius(),
					i = this,
					l = h;
					if (this._isHollowMarker(e) && (l -= 1), a) {
						a.select("path." + j).interrupt(g.SELECT_ANIMATION).transition(g.SELECT_ANIMATION),
						a.select("path." + j).attr("d", i._getMarkerPath(e, l)).style("fill", i._isHollowMarker(e) ? d : c.marker.fillColor).style("fill-opacity", f ? 0 : b.pick(c.fillColorOpacity, 1)),
						a.select("path." + k).attr("d", function () {
							return i._getMarkerPath(e, h + 1)
						}).style("stroke-width", f ? 0 : 2);
						var m = a.select("image");
						if (!m.empty()) {
							var n = c.marker.width,
							o = c.marker.height;
							m.interrupt().attr("x", -n / 2).attr("y", -o / 2).attr("width", n).attr("height", o)
						}
					}
				},
				_renderDivLabels: function (a, c, d, e) {
					for (var f = this.component.getPlotBounds(), h = (this.component.componentType == g.PIE_CHART, 0), i = a.length; i > h; h++) {
						var j = a[h];
						if (j.visible && j.dataLabels && j.dataLabels.enabled && j.dataLabels.useHtml && j.labelPos && j.labelContent.length)
							for (var k = j.labelPos.x + c, l = j.labelPos.y + d, m = j.labelContent, n = 0, o = m.length; o > n; n++) {
								var p = m[n],
								q = p.dim,
								r = {
									x: k,
									y: l
								};
								b.outsideRect(f, b.makeBounds(r, q)) || this.labelDivManager.addLabel(p.text, b.makeBounds(r, q), p.style, e),
								l += q.height + this.component.getLabelGap()
							}
					}
				},
				_removeSvgDataLabels: function (a, b) {
					a.selectAll("text").remove(),
					a.selectAll("path").remove(),
					this.labelDivManager.clearLabels(b)
				},
				_updateChartBodyTranslate: function (a, b, c) {
					var d = this.component.getPlotBounds(),
					e = this.component.vanchart.getBodyClipID();
					a.forEach(function (a) {
						a.attr("clip-path", "url(#" + e + ")").transition().duration(b ? c : 0).ease("back-out").attr("transform", "translate(" + d.x + "," + d.y + ")")
					})
				},
				_drawNormalChartLabels: function (a, c) {
					var d = this.component.getVisibleChartData(),
					e = this.component.getPlotBounds(),
					f = [];
					d.forEach(function (a) {
						f = f.concat(a.points)
					});
					var g = [],
					h = b.makeBounds(0, 0, e.width, e.height);
					f.forEach(function (a) {
						if (a.labelPos && a.labelDim) {
							var c = a.labelPos.x + a.labelDim.width / 2,
							d = a.labelPos.y + a.labelDim.height / 2;
							b.containsPoint(h, [c, d]) && g.push(a)
						}
					}),
					this._drawSvgDataLabels(a, g, e.x, e.y, c)
				},
				_drawSvgDataLabels: function (a, c, d, e, f, h) {
					f = f || 0,
					h = h || "default-label-key",
					clearTimeout(this.drawLabelTimeOut[h]);
					var i = this;
					this._removeSvgDataLabels(a, h),
					this.drawLabelTimeOut[h] = setTimeout(function () {
							a.style("opacity", 0).selectAll("text").data(c).enter().append("text").filter(function (a) {
								return a.visible && a.labelPos && a.dataLabels && a.dataLabels.enabled && !a.dataLabels.useHtml
							}).each(function (a) {
								for (var c = a.labelContent, d = a.labelPos.x + a.labelDim.width / 2, e = a.labelPos.y, f = 0, g = c.length; g > f; f++) {
									var h = c[f],
									j = h.dim,
									k = h.text,
									l = h.style;
									d3.select(this).append("tspan").attr("x", d).attr("y", e + j.height / 2).attr("dy", ".32em").attr("text-anchor", "middle").text(k).call(b.setTextStyle, l),
									e += j.height + i.component.getLabelGap()
								}
							}),
							a.transition("linear").duration(400).style("opacity", 1),
							i._renderDivLabels(c, d, e, h),
							(i.component.componentType == g.PIE_CHART || i.component.componentType == g.BUBBLE_CHART || i.component.componentType == g.MULTIPIE_CHART) && (a.selectAll("text").filter(function (a) {
									return a.dataLabels && a.dataLabels.align != g.OUTSIDE
								}).style("pointer-events", "none"), a.selectAll("path").data(c).enter().append("path").filter(function (a) {
									return a.visible && a.labelPos && a.dataLabels && a.dataLabels.enabled && a.dataLabels.align == g.OUTSIDE
								}).attr("d", function (a) {
									var b = a.labelPos.startPos,
									c = a.labelPos.midPos,
									d = a.labelPos.endPos;
									return "M" + b.x + "," + b.y + "L" + c.x + "," + c.y + "L" + d.x + "," + d.y
								}).style("fill", "none").style("stroke", function (a) {
									return a.dataLabels.connectorColor || a.color
								}).style("stroke-width", function (a) {
									return a.dataLabels.connectorWidth || 0
								}))
						}, f)
				},
				_createSingleDataLabel: function (a, b) {
					this._createSingleSvgDataLabel(a, b),
					this._createSingleDivDataLabel(a)
				},
				_createSingleSvgDataLabel: function (a, c) {
					if (a.labelPos && a.dataLabels && a.dataLabels.enabled && !a.dataLabels.useHtml)
						for (var d = a.labelContent, e = a.labelPos.x + a.labelDim.width / 2, f = a.labelPos.y, g = 0, h = d.length; h > g; g++) {
							var i = d[g],
							j = i.dim,
							k = i.text,
							l = i.style;
							c.append("tspan").attr("x", e).attr("y", f + j.height / 2).attr("dy", ".32em").attr("text-anchor", "middle").text(k).call(b.setTextStyle, l),
							f += j.height + this.component.getLabelGap()
						}
				},
				_createSingleDivDataLabel: function (a) {
					var c = this.component.getPlotBounds();
					if (a.visible && a.dataLabels && a.dataLabels.enabled && a.dataLabels.useHtml && a.labelPos && a.labelContent.length)
						for (var d = a.labelPos.x + c.x, e = a.labelPos.y + c.y, f = a.labelContent, g = 0, h = f.length; h > g; g++) {
							var i = f[g],
							j = i.dim,
							k = {
								x: d,
								y: e
							};
							b.outsideRect(c, b.makeBounds(k, j)) || this.labelDivManager.addLabel(i.text, b.makeBounds(k, j), i.style, a.className),
							e += j.height + this.component.getLabelGap()
						}
				},
				_drawTitleWithHtml: function (a, c, d) {
					var e = b.clone(a.style),
					f = this.component.getPadding();
					e.textAlign = a.align || "left";
					var g = {
						x: c.x + f,
						y: c.y + f,
						width: c.width - 2 * f - d,
						height: c.height - 2 * f
					};
					this.labelDivManager.addLabelWidthBounds(a.text, g, e, 0, !1, !0)
				},
				_drawTitle: function (a, c) {
					var d = b.clone(a.style);
					d.textAlign = a.align || "left";
					var e = this.labelDivManager.addLabelWidthBounds(a.text, c, d, 0, !0, a.useHtml);
					a.useHtml || (e.style.pointerEvents = "none")
				},
				_renderVmlBackground: function (a, b, c, d) {
					if (c.shadow) {
						for (var e = c.borderWidth || 0, f = e % 2 == 0 ? .5 : 0, g = [5, 3, 1], h = [.05, .1, .15], i = 0; 3 > i; i++)
							a.push(b.rect(d.x + f, d.y + f, d.width, d.height).attr({
									fill: "none",
									stroke: "rgb(0,0,0)",
									"stroke-opacity": h[i],
									"stroke-width": g[i],
									rx: c.borderRadius,
									ry: c.borderRadius
								}).transform("t1,1"));
						a.push(b.rect(d.x, d.y, d.width, d.height).attr({
								fill: "white",
								stroke: "none",
								rx: c.borderRadius,
								ry: c.borderRadius
							}))
					}
					a.push(b.rect(d.x, d.y, d.width, d.height).attr("class", "legend-background").attr("rx", c.borderRadius).attr("ry", c.borderRadius).attr("fill", this._getRaphaelFill(c.backgroundColor)).attr("fill-opacity", this._getFillOpacity(c.backgroundColor)).attr("stroke", c.borderColor).attr("stroke-width", c.borderWidth))
				},
				_renderSvgBackground: function (a, c, d, e) {
					if (!(d.width <= 0 || d.height <= 0)) {
						c.backgroundColor && a.select("defs").empty() && this._createGradualDefs(a, c.backgroundColor, e);
						var f = c.borderWidth || 0,
						g = b.rectSubPixelOpt(0, 0, d.width, d.height, f);
						if (c.shadow) {
							var h = b.lineSubPixelOpt(0, f),
							i = [5, 3, 1],
							j = [.05, .1, .15],
							k = a.selectAll("rect.shadow").data(i);
							k.enter().append("rect").attr("class", "shadow"),
							k.attr("x", h).attr("y", h).attr("width", d.width).attr("height", d.height).attr("rx", c.borderRadius).attr("ry", c.borderRadius).attr("transform", "translate(1, 1)").style("fill", "none").style("stroke", "black").style("stroke-width", function (a) {
								return a
							}).style("stroke-opacity", function (a, b) {
								return j[b]
							});
							var l = a.selectAll("rect.shadowBackground").data([0]);
							l.enter().append("rect").attr("class", "shadowBackground"),
							l.attr("x", g.x).attr("y", g.y).attr("width", g.width).attr("height", g.height).attr("rx", c.borderRadius).attr("ry", c.borderRadius).style("fill", "white")
						}
						var l = a.selectAll("rect.background").data([0]);
						l.enter().append("rect").attr("class", "background"),
						l.attr("x", g.x).attr("y", g.y).attr("width", g.width).attr("height", g.height).attr("rx", c.borderRadius).attr("ry", c.borderRadius).style("fill", c.backgroundColor ? "string" == typeof c.backgroundColor ? c.backgroundColor : "url(#" + e + ")" : "none").style("stroke", c.borderColor).style("stroke-width", c.borderWidth)
					}
				},
				_createGradualDefs: function (a, b, c) {
					if (b && "object" == typeof b) {
						var d = a.append("defs").append("linearGradient").attr("id", c).attr("x1", b.x1).attr("y1", b.y1).attr("x2", b.x2).attr("y2", b.y2);
						d.append("stop").attr("offset", "0%").style("stop-color", b.startColor),
						d.append("stop").attr("offset", "100%").style("stop-color", b.endColor)
					}
				},
				_getRaphaelFill: function (a) {
					if (a) {
						if ("string" == typeof a)
							return a;
						var b = 0,
						c = parseFloat(a.x1),
						d = parseFloat(a.x2);
						return a.x1 == a.x2 && (b = 270, c = 100 * parseFloat(a.y1), d = 100 * parseFloat(a.y2)),
						b + "-" + a.startColor + ":" + c + "-" + a.endColor + ":" + d
					}
					return "none"
				},
				_drawVmlDataLabels: function (a, c, d, e, f) {
					for (var h = this.component.getPlotBounds(), i = [], j = 0, k = d.length; k > j; j++) {
						var l = d[j];
						if (l && l.visible && l.dataLabels && l.dataLabels.enabled && l.labelPos) {
							var m = {
								x: l.labelPos.x + e,
								y: l.labelPos.y + f
							};
							b.containsPoint(h, m) && i.push(l)
						}
					}
					for (var j = 0, k = i.length; k > j; j++) {
						for (var l = i[j], n = l.labelContent, o = l.labelDim, p = l.labelPos.x + e, q = l.labelPos.y + f, r = 0, s = n.length; s > r; r++) {
							var t = n[r],
							u = t.dim,
							v = (o.width - u.width) / 2;
							v = Math.max(0, v),
							this.labelDivManager.addLabel(t.text, b.makeBounds({
									x: p + v,
									y: q
								}, u), t.style, l.category),
							q += u.height + this.component.getLabelGap()
						}
						if (l.dataLabels.align === g.OUTSIDE && (this.component.componentType === g.PIE_CHART || this.component.componentType === g.MULTIPIE_CHART)) {
							var w = l.labelPos.startPos,
							x = l.labelPos.midPos,
							y = l.labelPos.endPos,
							z = a.path("M" + b.dealFloatPrecision(w.x) + "," + b.dealFloatPrecision(w.y) + "L" + b.dealFloatPrecision(x.x) + "," + b.dealFloatPrecision(x.y) + "L" + b.dealFloatPrecision(y.x) + "," + b.dealFloatPrecision(y.y)).transform("t" + e + "," + f).attr("fill", "none").attr("stroke", l.dataLabels.connectorColor || l.color).attr("stroke-width", l.dataLabels.connectorWidth || 0);
							c.push(z)
						}
					}
				},
				_isHollowMarker: function (a) {
					return !!a && (-1 != a.indexOf("hollow") && a != g.NULL_MARKER)
				},
				_getMarkerPath: function (a, b) {
					switch (a) {
					case g.NULL_MARKER:
					case g.CIRCLE:
					case g.CIRCLE_HOLLOW:
						return d3.svg.arc().outerRadius(b)({
							startAngle: 0,
							endAngle: 2 * Math.PI
						});
					case g.SQUARE:
					case g.SQUARE_HOLLOW:
						var c = -b + "," + -b,
						d = b + "," + -b,
						e = b + "," + b,
						f = -b + "," + b;
						return "M" + c + "L" + d + "L" + e + "L" + f + "Z";
					case g.DIAMOND:
					case g.DIAMOND_HOLLOW:
						b = 2 * b / Math.sqrt(2);
						var h = -b + ",0",
						i = "0," + -b,
						j = b + ",0",
						k = "0," + b;
						return "M" + h + "L" + i + "L" + j + "L" + k + "Z";
					case g.TRIANGLE:
					case g.TRIANGLE_HOLLOW:
						var h = -b + "," + b / Math.sqrt(3),
						i = "0," +  - (2 * Math.sqrt(3) / 3) * b,
						j = b + "," + b / Math.sqrt(3);
						return "M" + h + "L" + i + "L" + j + "Z"
					}
				},
				path2vml: function (a) {
					return c.path2vml(a)
				},
				_getLinePath: function (a, b) {
					return "M" + this._dealWithFloat(a[0]) + "," + this._dealWithFloat(a[1]) + "L" + this._dealWithFloat(b[0]) + "," + this._dealWithFloat(b[1])
				},
				_dealWithFloat: function (a) {
					return Math.abs(a) < 1e-6 ? 0 : a
				},
				_getFillOpacity: function (a) {
					return a && "string" == typeof a ? e.getColorOpacity(a) : 1
				},
				removeDivLabels: function () {
					this.labelDivManager && this.labelDivManager.clearAllLabels()
				},
				addSeriesEventHandler: function (a) {
					var c = this;
					b.isSupportSVG() ? a.each(function () {
						c._addSingleSeriesEventHandler(d3.select(this))
					}) : this._addSingleSeriesEventHandler(a)
				},
				_addSingleSeriesEventHandler: function (a) {
					var b = this.component.vanchart.handler;
					b.addInteractiveTarget(a, this._getSeriesTypes(), this)
				},
				addShapeEventHandler: function (a) {
					var c = this;
					b.isSupportSVG() ? a.each(function () {
						c._addSingleShapeEventHandler(d3.select(this))
					}) : this._addSingleShapeEventHandler(a)
				},
				_addSingleShapeEventHandler: function (a) {
					var b = this.component.vanchart.handler;
					b.addInteractiveTarget(a, this._getTypes(), this)
				},
				_getTypes: function () {
					return b.hasTouch() ? {
						touchstart: this._touchStart,
						forceTouchEnd: this._touchEnd
					}
					 : {
						mouseover: this._mouseOver,
						mouseout: this._mouseOut,
						mousedown: this.mouseDown,
						mouseup: this.mouseUp,
						cover: this.mouseOver,
						leave: this.mouseOut
					}
				},
				_getSeriesTypes: function () {
					return b.hasTouch() ? {
						touchstart: this._seriesTouchStart,
						forceTouchEnd: this._seriesTouchEnd
					}
					 : {
						mouseover: this._seriesMouseOver,
						forceMouseOut: this._seriesMouseOut
					}
				},
				_touchStart: function (a) {
					var b = a.target.datum(),
					c = b.series,
					d = c.chart.vanchart,
					e = d.handler,
					f = d.hoverPoint,
					g = d.hoverSeries;
					return this._shouldHover(b) ? (g !== c && (e.fireEventByData(g, "forceMouseOut", a), e.fireEventByData(c, "touchstart", a), d.hoverSeries = c), f && f !== b && e.fireEventByData(f, "forceTouchEnd", a), b.series && (d.hoverPoint = b), d.getTooltip().showWithPoint(b, a.originalEvent), void this.mouseOver(a)) : void(d.hoverPoint = b)
				},
				_touchEnd: function (a) {
					var b = a.target.datum();
					b.series.supportSharedTooltip && b.tooltip && b.tooltip.shared || this.mouseOut(a)
				},
				_seriesTouchStart: function (a) {
					var b = a.target.datum(),
					c = b.chart.vanchart,
					d = c.hoverPoint,
					e = c.hoverSeries,
					f = c.handler;
					e && e !== b && f.fireEventByData(e, "forceTouchEnd", a),
					c.hoverSeries = b;
					var g = b.chart.getClosestPoint(a.containerPoint);
					if (!d || d && d.series != b) {
						if (f.fireEventByData(d, "forceTouchEnd", a), !this._shouldHover(g))
							return c.hoverPoint = null, void(c.hoverPoint = null);
						f.fireEventByData(g, "touchstart", a),
						c.hoverPoint = g
					}
					this.seriesMouseOver(a)
				},
				_seriesTouchEnd: function (a) {
					var b = a.target.datum(),
					c = b.chart.vanchart;
					c.hoverSeries,
					c.hoverPoint,
					c.handler,
					c.hoverSeries = null,
					this.seriesMouseOut(a)
				},
				_mouseOver: function (a) {
					var b = a.target.datum(),
					c = b.series,
					d = c.chart.vanchart,
					e = d.handler,
					f = d.hoverPoint,
					g = d.hoverSeries;
					return this._shouldHover(b) ? (g !== c && (e.fireEventByData(g, "forceMouseOut", a), e.fireEventByData(c, "mouseover", a), d.hoverSeries = c), f && f !== b && e.fireEventByData(f, "mouseout", a), b.series && (d.hoverPoint = b), void this.mouseOver(a)) : void(d.hoverPoint = b)
				},
				_mouseOut: function (a) {
					var b = a.target.datum();
					if (!this._shouldHover(b))
						return void(this.component.vanchart.hoverPoint = null);
					var c = b.series,
					d = c.chart.vanchart;
					d.hoverPoint && !d.hoverPoint.marker && (d.hoverPoint = null),
					this.mouseOut(a)
				},
				_seriesMouseOver: function (a) {
					var b = a.target.datum(),
					c = b.chart.vanchart,
					d = c.hoverPoint,
					e = c.hoverSeries,
					f = c.handler;
					e && e !== b && f.fireEventByData(e, "forceMouseOut", a),
					c.hoverSeries = b;
					var g = b.chart.getClosestPoint(a.containerPoint);
					if (!d || d && d.series != b) {
						if (f.fireEventByData(d, "mouseout", a), !this._shouldHover(g))
							return c.hoverPoint = null, void(c.hoverPoint = null);
						f.fireEventByData(g, "mouseover", a),
						c.hoverPoint = g
					}
					this.seriesMouseOver(a)
				},
				_seriesMouseOut: function (a) {
					var b = a.target.datum(),
					c = b.chart.vanchart;
					c.hoverSeries,
					c.hoverPoint,
					c.handler,
					c.hoverSeries = null,
					this.seriesMouseOut(a)
				},
				_shouldHover: function (a) {
					if (!a)
						return !1;
					var b = this.component.vanchart,
					c = b.handler,
					d = b.getSharedAxis();
					return !d || d.type !== g.CATEGORY_AXIS_COMPONENT || 0 === c._getCoveredPointsByKey(a.category).length
				},
				_canvasRender: function () {
					var a = this.component.vanchart.getParentDom(),
					b = this.component.getPlotBounds();
					this._canvas || (this._canvas = new h(a, this.component.vanchart)),
					this._canvas.clearAll();
					for (var c = this.component.getVisibleChartData(), d = 0, e = c.length; e > d; d++)
						this._canvas.addSeries(c[d], b)
				},
				_drawHorizontalAxisTitleWithHtml: function (a, c) {
					var d,
					e,
					f = a.rotation || 0,
					g = b.getTextDimension(a.text, a.style, a.useHtml),
					h = this.component.getTitleAlign();
					switch (h) {
					case "left":
						d = c.x;
						break;
					case "center":
						d = c.x + c.width / 2 - g.width / 2;
						break;
					case "right":
						d = c.x + c.width - g.width
					}
					e = c.y + c.height / 2 - g.height / 2;
					var i = this.labelDivManager.addLabel(a.text, {
							x: d,
							y: e
						}, a.style);
					b.divRotate(i, f),
					i.style.left = d + "px",
					i.style.top = e + "px"
				},
				_drawVerticalAxisTitleWithHtml: function (a, c) {
					var d,
					e,
					f = a.rotation || 0,
					g = b.getTextDimension(a.text, a.style, a.useHtml),
					h = b.getTextDimensionWithRotation(a.text, a.style, a.useHtml, f);
					d = c.x + c.width / 2 - g.width / 2;
					var i = this.component.getTitleAlign();
					switch (i) {
					case "top":
						e = Math.max(h.height / 2 - g.height, 0);
						break;
					case "center":
						e = (c.height - g.height) / 2;
						break;
					case "bottom":
						e = c.height - h.height / 2 - g.height / 2
					}
					e += c.y;
					var j = this.labelDivManager.addLabel(a.text, {
							x: d,
							y: e
						}, a.style);
					b.divRotate(j, f),
					j.style.left = d + "px",
					j.style.top = e + "px"
				},
				seriesMouseOut: function () {},
				seriesMouseOver: function () {},
				mouseDown: function () {},
				mouseUp: function () {},
				mouseOver: function () {},
				mouseOut: function () {},
				remove: function () {}
			});
		return m
	}),
	c("render/AxisRender", ["require", "./BaseRender", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../Constants"),
		d = b.extend({
				render: function () {
					for (var a = this.component.getAxisRender(), b = 0, c = a.length; c > b; b++)
						a[b].render()
				},
				dataChangeRender: function () {
					for (var a = this.component.getAxisRender(), b = 0, c = a.length; c > b; b++)
						a[b].dataChangeRender()
				},
				monitorRender: function () {
					for (var a = this.component.getAxisRender(), b = 0, c = a.length; c > b; b++)
						a[b].monitorRender()
				}
			});
		return a("./RenderLibrary").register(c.AXIS_RENDER, d),
		d
	}),
	c("component/Axis", ["require", "./Base", "../utils/BaseUtils", "../Constants", "./CategoryAxis", "./ValueAxis", "./DateAxis", "./Polar", "../render/AxisRender", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("./CategoryAxis"),
		f = a("./ValueAxis"),
		g = a("./DateAxis"),
		h = a("./Polar");
		a("../render/AxisRender");
		var i = b.extend({
				_refresh: function () {
					this._axisList = this._axisList || [];
					var a = this.option,
					b = this.componentOption;
					c.isArray(b) || (b = [b]);
					for (var i = b.length, j = i; j < this._axisList.length; j++)
						this._axisList[j].remove(), this._axisList[j] = null;
					this._axisList.length = i;
					for (var j = i - 1; j >= 0; j--) {
						if (b[j].axisIndex = j, this._axisList[j] && this._axisList[j].type != b[j].type && (this._axisList[j].remove(), this._axisList[j] = null), this._axisList[j])
							this._axisList[j].refresh(a, b[j]);
						else {
							var k;
							if (this.componentType === d.POLAR_COMPONENT)
								k = h;
							else {
								var l = b[j].type || d.VALUE_AXIS_COMPONENT;
								l == d.VALUE_AXIS_COMPONENT ? k = f : l == d.CATEGORY_AXIS_COMPONENT ? k = e : l == d.DATE_AXIS_COMPONENT && (k = g)
							}
							this._axisList[j] = new k(this.vanchart, this.option, this.componentType, b[j])
						}
						this._axisList[j].refreshPolar && this._axisList[j].refreshPolar(this.option, b[j])
					}
				},
				fixBoundsByPlot: function () {
					for (var a = this.vanchart.getPlotBounds(), b = {}, e = 0, f = this._axisList.length; f > e; e++) {
						var g = this._axisList[e],
						h = g.getPosition();
						b[h] = b[h] || [],
						b[h].push(g)
					}
					for (var h in b)
						for (var i = b[h], j = h == d.TOP || h == d.BOTTOM, e = 0, k = i.length; k > e; e++) {
							var g = i[e],
							l = a;
							e > 0 && !i[e - 1].isOnZero() && (l = i[e - 1].bounds);
							var m = g.bounds;
							if (j) {
								var n = h == d.TOP ? l.y - m.height : l.y + l.height;
								g.bounds = c.makeBounds(l.x, n, l.width, m.height)
							} else {
								var o = h == d.LEFT ? l.x - m.width : l.x + l.width;
								g.bounds = c.makeBounds(o, l.y, m.width, l.height)
							}
							g._updateRange(),
							g._updateDomainWhenSizeFixed(),
							g._calculateTickData(),
							g._initZoomStatus()
						}
				},
				calculateTickData: function () {
					this._axisList.forEach(function (a) {
						a._updateRange(),
						a._calculateTickData()
					})
				},
				initAttributesWithSeries: function () {
					for (var a = this._axisList.length, b = a - 1; b >= 0; b--)
						this._axisList[b].initAttributesWithSeries()
				},
				doLayout: function () {
					for (var a = this._axisList.length, b = a - 1; b >= 0; b--)
						this._axisList[b].doLayout()
				},
				getAxis: function (a) {
					return a >= this._axisList.length && (a = 0),
					this._axisList[a]
				},
				axisZoom: function (a, b) {
					this._axisList.forEach(function (c) {
						c.axisZoom(a, b)
					})
				},
				dealOnZero: function () {
					this._axisList.forEach(function (a) {
						a.isOnZero() && (a.dealOnZero(), a._updateRange(), a._calculateTickData(), a._initZoomStatus())
					})
				},
				getAllAxis: function () {
					return this._axisList
				},
				getAxisRender: function () {
					var a = [];
					return this._axisList.forEach(function (b) {
						var c = b.getRender();
						c && a.push(c)
					}),
					a
				}
			});
		return a("../ComponentLibrary").register(d.AXIS_COMPONENT, i),
		i
	}),
	c("theme/Options", ["require", "../Constants"], function (a) {
		var b = a("../Constants"),
		c = {};
		return c[b.PIE_CHART] = {
			plotOptions: {}
		},
		c[b.MULTIPIE_CHART] = {
			innerRadiusPct: 2 / 3,
			plotOptions: {
				borderWidth: 1,
				borderColor: "rgb(255,255,255)",
				rotatable: !0,
				gradual: "lighter",
				center: [],
				innerRadius: 0,
				startAngle: 0,
				endAngle: 360,
				drilldown: !0
			}
		},
		c[b.COLUMN_CHART] = {
			plotOptions: {
				categoryGap: "20%",
				gap: "20%"
			}
		},
		c[b.BAR_CHART] = {
			plotOptions: {}
		},
		c[b.LINE_CHART] = c[b.AREA_CHART] = {
			plotOptions: {
				large: !1,
				marker: {
					symbol: "null_marker"
				},
				dataLabels: {
					enabled: !1,
					align: "outside"
				}
			}
		},
		c[b.GAUGE_CHART] = {
			plotOptions: {}
		},
		c[b.RADAR_CHART] = {
			plotOptions: {
				columnType: !1,
				marker: {
					symbol: "null_marker"
				},
				borderWidth: 1,
				borderColor: "white",
				lineWidth: 1,
				shape: "circle"
			}
		},
		c[b.SCATTER_CHART] = {
			plotOptions: {
				fillColorOpacity: 1,
				opacity: 1
			}
		},
		c[b.BUBBLE_CHART] = {
			plotOptions: {
				fillColorOpacity: .75,
				opacity: .75
			}
		},
		c[b.AREA_MAP] = {
			plotOptions: {
				fillColor: "#cccccc",
				fillColorOpacity: .75,
				borderColor: "#ffffff",
				borderWidth: 1,
				borderOpacity: 1
			}
		},
		c[b.POINT_MAP] = {
			plotOptions: {
				icon: {
					iconUrl: "../../doc/example/marker-icon.png",
					iconSize: [25, 41]
				}
			}
		},
		c
	}),
	c("component/Geo", ["require", "./Base", "../utils/BaseUtils", "../utils/QueryUtils", "../Constants", "../theme/Options", "../ComponentLibrary"], function (a) {
		function b(a, b) {
			a && n.hasOwnProperty(a.type) && n[a.type](a, b)
		}
		function c(a, b) {
			for (var c, d = -1, e = a.length; ++d < e; )
				c = a[d], b.push(c)
		}
		function d(a, b) {
			for (var d = -1, e = a.length; ++d < e; )
				c(a[d], b)
		}
		function e(a) {
			var b,
			c;
			if ("string" == typeof a)
				try {
					b = JSON.parse(a)
				} catch (d) {
					window.FR ? FR.ajax({
						type: "GET",
						url: a,
						dataType: "json",
						async: !1,
						success: function (d) {
							c = a,
							b = d
						}
					}) : d3.json(a, function (d) {
						c = a,
						b = d
					})
				}
			else
				a && "object" == typeof a && (b = a);
			return b && b.features.forEach(function (a) {
				a.properties = a.properties || {},
				a.properties.id = g.stamp(a)
			}),
			b
		}
		var f = a("./Base"),
		g = a("../utils/BaseUtils"),
		h = a("../utils/QueryUtils"),
		i = a("../Constants"),
		j = a("../theme/Options"),
		k = "Point",
		l = function (a, c) {
			a && m.hasOwnProperty(a.type) ? m[a.type](a, c) : b(a, c)
		},
		m = {
			Feature: function (a, c) {
				b(a.geometry, c)
			},
			FeatureCollection: function (a, c) {
				for (var d = a.features, e = -1, f = d.length; ++e < f; )
					b(d[e].geometry, c)
			}
		},
		n = {
			Point: function (a, b) {
				b.push(a.coordinates)
			},
			MultiPoint: function (a, b) {
				for (var c = a.coordinates, d = -1, e = c.length; ++d < e; )
					a = c[d], b.push(a)
			},
			LineString: function (a, b) {
				c(a.coordinates, b)
			},
			MultiLineString: function (a, b) {
				for (var d = a.coordinates, e = -1, f = d.length; ++e < f; )
					c(d[e], b)
			},
			Polygon: function (a, b) {
				d(a.coordinates, b)
			},
			MultiPolygon: function (a, b) {
				for (var c = a.coordinates, e = -1, f = c.length; ++e < f; )
					d(c[e], b)
			},
			GeometryCollection: function (a, c) {
				for (var d = a.geometries, e = -1, f = d.length; ++e < f; )
					b(d[e], c)
			}
		},
		o = f.extend({
				_refresh: function () {
					this._loaded = !1
				},
				loadGeo: function () {
					if (!this._loaded) {
						this._loaded = !0,
						this.scale = 1;
						var a = this.componentOption,
						b = this,
						c = this.vanchart._leaflet;
						if (this.geoName = a.name, this.maps = [], this._validPointName = {}, this._validAreaName = {}, a.data) {
							var d = g.isArray(a.data) ? a.data : [a.data];
							this.maps = d.map(e),
							this.imageString = this.imageSuffix = this.imageWidth = this.imageHeight = null,
							this.maps.length && (this.imageString = this.maps[0].imageString, this.imageSuffix = this.maps[0].imageSuffix, this.imageWidth = this.maps[0].imageWidth, this.imageHeight = this.maps[0].imageHeight),
							this.maps.forEach(function (a) {
								for (var c = a.features || [], d = 0, e = c.length; e > d; d++) {
									var f = c[d],
									g = f.geometry;
									g.type == k ? (b._validPointName[f.properties.name] = b._validPointName[f.properties.name] || [], b._validPointName[f.properties.name].push(f)) : (b._validAreaName[f.properties.name] = b._validAreaName[f.properties.name] || [], b._validAreaName[f.properties.name].push(f))
								}
							})
						}
						if (a.tileLayer && !this.imageString && L.tileLayer(a.tileLayer).addTo(c), a.wmsUrl && a.wmsLayer && L.tileLayer.wms(a.wmsUrl, {
								layers: a.wmsLayer.join(",")
							}).addTo(c), this.imageString) {
							c._imageBackgroundLayer && c._imageBackgroundLayer.remove();
							var f = this.vanchart.chartWidth(),
							h = this.vanchart.chartHeight(),
							i = f / this.imageWidth,
							j = h / this.imageHeight;
							this.scale = Math.min(i, j);
							var l = this.imageWidth,
							m = this.imageHeight;
							l *= this.scale,
							m *= this.scale,
							this._scaleGeoJson(this.maps, this.scale);
							var n = [[0, 0], [m, l]],
							o = "data:image/" + this.imageSuffix + ";base64," + this.imageString;
							c._imageBackgroundLayer = L.imageOverlay(o, n).addTo(c)
						}
					}
				},
				_scaleGeoJson: function (a, b) {
					a && a.length && a.forEach(function (a) {
						for (var c = a.features, d = 0, e = c.length; e > d; d++) {
							var f = c[d].properties.center;
							f && (f[0] *= b, f[1] *= b)
						}
						var g = [];
						l(a, g);
						for (var d = 0, e = g.length; e > d; d++)
							g[d][0] *= b, g[d][1] *= b
					})
				},
				getDataPointLatLng: function (a, b) {
					this.loadGeo();
					var b = b || a.series.type,
					c = [0, 0];
					if (a)
						if (a.lnglat)
							c = a.lnglat;
						else if (a.feature || this._validPointName[a.name]) {
							var d = a.feature || this._validPointName[a.name][0];
							if (c = b == i.POINT_MAP ? d.geometry.coordinates : d.properties.center, !c) {
								var e = d3.geo.bounds(d),
								f = (e[0][0] + e[1][0]) / 2,
								g = (e[0][1] + e[1][1]) / 2;
								c = [f, g]
							}
						}
					return [c[1], c[0]]
				},
				getDefaultMapStyle: function () {
					var a = this.option.plotOptions,
					b = [a[i.AREA_MAP], a, j[i.AREA_MAP].plotOptions],
					c = {
						fillColor: h.queryList(b, "fillColor"),
						fillColorOpacity: h.queryList(b, "fillColorOpacity"),
						borderWidth: h.queryList(b, "borderWidth"),
						borderColor: h.queryList(b, "borderColor"),
						borderOpacity: h.queryList(b, "borderOpacity")
					};
					return c
				},
				getDefaultIcon: function () {
					var a = this.option.plotOptions,
					b = [a, a[i.POINT_MAP], j[i.POINT_MAP].plotOptions];
					return h.queryList(b, "icon")
				},
				getZoomListener: function () {
					return this.componentOption.zoomListener
				},
				getFeatureMap: function (a) {
					this.loadGeo();
					for (var b = this.getDefaultMapStyle(), c = [], d = [], e = [], f = [], h = {}, j = {}, k = this, l = !1, m = 0, n = a.length; n > m; m++) {
						var o = a[m];
						if (o.type == i.AREA_MAP && (l = !0), o.visible) {
							var p = o.type;
							if (p == i.AREA_MAP)
								for (var q = o.points, r = q.length - 1; r >= 0; r--) {
									var s = q[r],
									t = k._validAreaName[s.name];
									t && t.length && s.visible && !h[s.name] && (h[s.name] = !0, t.forEach(function (a, d) {
											var e = g.extend({}, s);
											g.extend(e, a),
											g.extend(e, s.isNull ? b : s.mapStyle),
											e.feature = a,
											e.className = s.className + d,
											c.push(e)
										}))
								}
							else {
								var u = this.getDefaultIcon();
								o.points.forEach(function (a) {
									if (a.visible && !a.isNull && (a.lnglat || k._validPointName[a.name])) {
										var b = [a];
										if (!a.lnglat) {
											b = [];
											var c = k._validPointName[a.name];
											c.forEach(function (c, d) {
												var e = g.extend({}, a);
												e.feature = c,
												e.className = a.className + d,
												b.push(e)
											})
										}
										for (var h = b.length - 1; h >= 0; h--) {
											var l = b[h],
											m = k.getDataPointLatLng(l).join(",");
											j[p] && j[p][m] || (j[p] = j[p] || {}, j[p][m] = !0, p == i.BUBBLE_CHART ? d.push(l) : p == i.POINT_MAP ? (l.icon = u, f.push(l)) : l.marker && g.isImageMarker(l.marker.symbol) ? (l.icon = {
														iconUrl: a.marker.symbol,
														iconSize: [a.marker.width, a.marker.height]
													}, f.push(l)) : e.push(l))
										}
									}
								})
							}
						}
					}
					if (l)
						for (var v in this._validAreaName) {
							var w = this._validAreaName[v];
							w.forEach(function (a) {
								a.properties && !h[a.properties.name] && c.push(g.extend({}, a, b))
							})
						}
					return {
						areaFeatures: c,
						bubbleFeatures: d,
						scatterFeatures: e,
						imageFeatures: f
					}
				},
				fitMapBounds: function () {
					this.loadGeo();
					var a,
					b = this.vanchart._leaflet,
					c = this.componentOption;
					g.hasDefined(c.zoomListener) ? a = c.zoomListener : g.hasDefined(c.zoomLevel) && (a = c.zoomLevel);
					var d = c.viewCenter ? L.latLng(c.viewCenter[1], c.viewCenter[0]) : null;
					if (!isNaN(+a) && d)
						b.setView(d, a + 1 - this.scale);
					else {
						if (isNaN(+a))
							b.fitBounds(this._getFitBounds());
						else {
							b.fitBounds(this._getFitBounds(), {
								animate: !1
							});
							var d = b.getCenter();
							b.setView(d, a + 1 - this.scale)
						}
						d && b.panTo(d)
					}
				},
				_getFitBounds: function () {
					var a = !0,
					b = 180,
					c = -180,
					d = 90,
					e = -90;
					this.imageString && (b = this.imageWidth, c = 0, d = this.imageHeight, e = 0);
					for (var f = this.vanchart.series, g = 0, h = f.length; h > g; g++)
						f[g].visible && f[g].type != i.AREA_MAP && f[g].points.forEach(function (f) {
							var g = f.lnglat;
							g && (a = !1, b = Math.min(b, g[0]), c = Math.max(c, g[0]), d = Math.min(d, g[1]), e = Math.max(e, g[1]))
						});
					if (a && this.maps && this.maps.length) {
						if (!this.imageString) {
							for (var j = this.maps.map(d3.geo.bounds), k = j[0][0], m = j[0][1], g = j.length - 1; g > 0; g--) {
								var n = j[g];
								k[0] = Math.min(n[0][0], k[0]),
								k[1] = Math.min(n[0][1], k[1]),
								m[0] = Math.max(n[1][0], m[0]),
								m[1] = Math.max(n[1][1], m[1])
							}
							return [[k[1], k[0]], [m[1], m[0]]]
						}
						var o = [];
						this.maps.forEach(function (a) {
							l(a, o)
						}),
						o.length > 1 && o.forEach(function (a) {
							b = Math.min(b, a[0]),
							c = Math.max(c, a[0]),
							d = Math.min(d, a[1]),
							e = Math.max(e, a[1])
						})
					}
					return [[d, b], [e, c]]
				}
			});
		return a("../ComponentLibrary").register(i.GEO_COMPONENT, o),
		o
	}),
	c("component/Legend", ["require", "./Base", "../utils/BaseUtils", "../utils/ColorUtils", "../Constants", "../utils/QueryUtils", "../render/LegendIconFactory", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/ColorUtils"),
		e = a("../Constants"),
		f = (a("../utils/QueryUtils"), a("../render/LegendIconFactory")),
		g = 10,
		h = 8,
		i = 12,
		j = 52,
		k = 4,
		l = 16,
		m = b.extend({
				_refresh: function () {
					this.render && this.render.remove()
				},
				initAttributesWithSeries: function () {
					this.items = [],
					this._updateLegendItems()
				},
				doLayout: function () {
					if (this.componentOption.visible) {
						var a = this._getLegendSize();
						if (this._setComponentBounds(this.componentOption.position || e.RIGHT_TOP, a), this._resetLegendBounds(), this._calculateVerticalPages(), this.verticalAlign = 0, !this.hasEnoughSpace) {
							var b = j + 2 * g,
							c = Math.max(b - this.bounds.width, 0);
							this.vanchart.bounds.width -= c,
							this.bounds.width += c,
							this.bounds.x -= c,
							this.verticalAlign = c / 2
						}
					}
				},
				_updateLegendItems: function () {
					var a = this.vanchart.series,
					b = {},
					c = this;
					a.map(function (a) {
						switch (a.type) {
						case e.GAUGE_CHART:
							break;
						case e.PIE_CHART:
						case e.MULTIPIE_CHART:
							var d = a.type === e.PIE_CHART ? "seriesName" : "name";
							a.points.map(function (e) {
								if (!b[e[d]]) {
									var f = {
										color: e._color,
										itemName: e[d],
										visible: e.visible,
										pieDataIndex: e.index
									};
									c._mergeCommonLegendAttr(a, f),
									b[e[d]] = !0,
									c.items.push(f)
								}
							}),
							c.items.sort(function (a, b) {
								return a.pieDataIndex - b.pieDataIndex
							});
							break;
						default:
							if (!b[a.name]) {
								var f = {
									color: a.color,
									itemName: a.name,
									visible: a.visible
								};
								c._mergeCommonLegendAttr(a, f),
								b[a.name] = !0,
								c.items.push(f)
							}
						}
					})
				},
				_calculateVerticalPages: function () {
					var a = this.componentOption.position || e.RIGHT;
					if (this.pages = [], a != e.TOP && a != e.BOTTOM) {
						var b = this.bounds.height,
						c = this.getPreHeight(this.items.length);
						if (b >= c)
							return void(this.hasEnoughSpace = !0);
						this.hasEnoughSpace = !1;
						for (var d = 0, f = 0, c = 0, g = 0, h = this.items.length; h > g; g++) {
							var j = c;
							c = this.getPreHeight(f, g + 1),
							c > b && (d++, f = g, this.bounds.height = j + i),
							this.pages[d] = this.pages[d] || [],
							this.pages[d].push(this.items[g])
						}
					}
				},
				_mergeCommonLegendAttr: function (a, b) {
					var f = this.componentOption,
					g = f.hiddenColor,
					h = f.hoverColor || f.style.color,
					i = a.type == e.BUBBLE_CHART ? .7 : 1,
					j = d.colorToHex(b.color);
					c.extend(b, {
						series: a,
						color: j,
						fillColorOpacity: i,
						hiddenColor: g,
						hoverColor: h,
						legendIconType: this._getLegendType(a),
						lineIndex: 0
					})
				},
				_getLegendSize: function () {
					var a = this.componentOption,
					b = a.position || e.RIGHT,
					c = 2 * g;
					if (b == e.TOP || b == e.BOTTOM) {
						var d = this._getTopAndBottomLegendSize() + c,
						f = this._maxHeight();
						return a.maxHeight && d > f ? f : d
					}
					var d = this._getLeftAndRightLegendSize() + c,
					h = this.getPreHeight() + g,
					i = this.vanchart.getPlotBounds().height;
					i > h && (d = Math.max(d, j));
					var k = this._maxWidth();
					return a.maxWidth && d > k ? k : d
				},
				_getLeftAndRightLegendSize: function () {
					this.maxLabelWidth = 0,
					this.maxLabelHeight = 0,
					this.maxIconWidth = 0,
					this.maxIconHeight = 0;
					for (var a = 0, b = this.items.length; b > a; a++) {
						var d = c.getTextDimension(this.items[a].itemName, this.componentOption.style, !0);
						this.maxLabelWidth = Math.max(this.maxLabelWidth, d.width),
						this.maxLabelHeight = Math.max(this.maxLabelHeight, d.height);
						var e = f.getLegendIconSize(this.items[a].legendIconType);
						this.maxIconWidth = Math.max(this.maxIconWidth, e.width),
						this.maxIconHeight = Math.max(this.maxIconHeight, e.height)
					}
					return 2 * g + this.maxIconWidth + h + this.maxLabelWidth
				},
				_getTopAndBottomLegendSize: function () {
					this.lineHeight = [];
					for (var a = this.vanchart.getPlotBounds(), b = a.width - 4 * g, d = 0, e = 0, i = 0, j = 0, k = this.items.length; k > j; j++) {
						var m = this.items[j],
						n = f.getLegendIconSize(m.legendIconType),
						o = c.getTextDimension(m.itemName, this.componentOption.style, !0),
						p = Math.min(n.width + h + o.width, b - 1);
						b > d + p ? (m.lineIndex = i, e = Math.max(e, o.height, n.height), d += p + l) : (this.lineHeight.push(e), 0 !== j && i++, m.lineIndex = i, d = p, e = Math.max(o.height, n.height)),
						j == k - 1 && this.lineHeight.push(e)
					}
					var q = 0;
					if (this.lineHeight.forEach(function (a) {
							q += a + g
						}), this.maxLineIndex = this.lineHeight.length - 1, this.componentOption.maxHeight) {
						var r = this._maxHeight();
						for (this.maxLineIndex = -1, q = 0; r > q && this.maxLineIndex < this.lineHeight.length - 1; ) {
							var s = q + this.lineHeight[this.maxLineIndex + 1] + g;
							if (!(r > s))
								break;
							q = s,
							this.maxLineIndex++
						}
					}
					return q
				},
				_resetLegendBounds: function () {
					var a = this.componentOption.position;
					if (a == e.LEFT || a == e.RIGHT || a == e.RIGHT_TOP) {
						if (!this.isFloat && (a == e.RIGHT || a == e.RIGHT_TOP)) {
							var b = this.vanchart.getToolbarHeight();
							this.bounds.y += b,
							this.bounds.height -= b
						}
						var d = this.bounds.x + g,
						i = this.bounds.y + g,
						j = this.bounds.height - 2 * g,
						k = this.bounds.width - 2 * g,
						m = this.getPreHeight();
						m = Math.min(m, j),
						i += Math.round((j - m) / 2),
						a == e.RIGHT_TOP || this.isFloat ? this.bounds.height = m : this.bounds = {
							x: d,
							y: i,
							width: k,
							height: m
						}
					} else {
						var d = this.bounds.x + g,
						i = this.bounds.y + g,
						j = this.bounds.height - 2 * g,
						k = this.bounds.width - 2 * g,
						n = k;
						if (1 == this.lineHeight.length) {
							n = 2 * g;
							for (var o = 0, p = this.items.length; p > o; o++) {
								var q = this.items[o],
								r = f.getLegendIconSize(q.legendIconType),
								s = c.getTextDimension(q.itemName, this.componentOption.style, !0);
								n += r.width + s.width + h
							}
							n += l * (this.items.length - 1),
							d += (k - n) / 2
						}
						if (this.bounds = {
								x: d,
								y: i,
								width: n,
								height: j
							}, a == e.BOTTOM) {
							var t = this.vanchart.getComponent(e.ZOOM_COMPONENT);
							t && t.zoomToolEnabled() && (this.bounds.y += t.bounds.height)
						}
					}
				},
				getLegendItems: function () {
					if (this.isHorizontal()) {
						var a = [],
						b = this.maxLineIndex;
						return this.items.forEach(function (c) {
							c.lineIndex <= b && a.push(c)
						}),
						a
					}
					return this.items
				},
				getLineHeight: function () {
					return this.lineHeight
				},
				getPadding: function () {
					return g
				},
				getGap: function () {
					return h
				},
				getHorizontalGap: function () {
					return l
				},
				getPreHeight: function () {
					var a = 0,
					b = this.items.length;
					1 == arguments.length ? b = arguments[0] : 2 == arguments.length && (a = arguments[0], b = arguments[1]);
					for (var c = g, d = this.maxLabelHeight, e = a; b > e; e++) {
						var h = this.items[e],
						i = f.getLegendIconSize(h.legendIconType);
						c += Math.max(i.height, d) + k
					}
					return Math.floor(c)
				},
				getVerticalItemHeight: function (a) {
					var b = g,
					c = this.maxLabelHeight,
					d = this.items[a],
					e = f.getLegendIconSize(d.legendIconType);
					return b += Math.max(e.height, c) + k
				},
				getHorizontalItemWidth: function (a) {
					var b = this.items[a],
					d = this.componentOption,
					e = f.getLegendIconSize(b.legendIconType),
					g = c.getTextDimension(b.itemName, d.style, !0);
					return e.width + h + g.width + l
				},
				getHorizontalItemsWidth: function (a) {
					for (var b = this.componentOption, d = 0, e = 0, g = a.length; g > e; e++) {
						var i = a[e],
						j = f.getLegendIconSize(i.legendIconType),
						k = c.getTextDimension(i.itemName, b.style, !0);
						d += j.width + k.width + h
					}
					return d += l * (a.length - 1)
				},
				getHorizontalLineItems: function () {
					for (var a = [], b = 0, c = this.items.length; c > b; b++) {
						var d = this.items[b];
						d.lineIndex <= this.maxLineIndex && (a[d.lineIndex] = a[d.lineIndex] || [], a[d.lineIndex].push(d))
					}
					return a
				},
				getVerticalPages: function () {
					return this.pages
				},
				hasEnoughVerticalSpace: function () {
					return this.hasEnoughSpace
				},
				getButtonHeight: function () {
					return i
				}
			});
		return a("../ComponentLibrary").register(e.LEGEND_COMPONENT, m),
		m
	}),
	c("component/Tooltip", ["require", "./Base", "../utils/BaseUtils", "../Constants", "../utils/ColorUtils", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/ColorUtils"),
		f = .4,
		g = b.extend({
				_gCssText: "position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:2000;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;pointer-events:none;",
				_style: function (a) {
					if (!a)
						return "";
					var b = [];
					if (a.animation && !a.follow) {
						var d = "left " + f + "s,top " + f + "s";
						b.push("transition:" + d),
						b.push("-moz-transition:" + d),
						b.push("-webkit-transition:" + d),
						b.push("-o-transition:" + d)
					}
					if (a.style) {
						var g = c.cssNormalization(a.style);
						for (var h in g)
							"color" == h ? b.push(h + ":" + e.colorToHex(g[h])) : b.push(h + ":" + g[h])
					}
					if (a.backgroundColor)
						if ("string" == typeof a.backgroundColor)
							if (c.isSupportSVG())
								b.push("background-Color:" + a.backgroundColor);
							else {
								var i = e.colorToHexAlpha(a.backgroundColor);
								b.push("background-Color:" + i.hex),
								b.push("filter:alpha(opacity=" + i.alpha + ")")
							}
						else if ("object" == typeof a.backgroundColor) {
							var j = a.backgroundColor,
							k = e.colorToHex(j.startColor),
							l = e.colorToHex(j.endColor),
							m = "left",
							n = "left top",
							o = "right top",
							p = 1;
							j.x1 == j.x2 && (m = "top", n = "left top", o = "left bottom", p = 0),
							b.push("background: -ms-linear-gradient(" + m + ", " + k + ", " + l + ")"),
							b.push("background-image: -moz-linear-gradient(" + m + ", " + k + ", " + l + ")"),
							b.push("background-image: -webkit-gradient(linear, " + n + ", " + o + ", color-stop(0, " + k + "), color-stop(1, " + l + "))"),
							b.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=" + k + ", endColorstr=" + l + ", GradientType=" + p + ")")
						}
					null != a.borderWidth && b.push("border-width:" + a.borderWidth + "px"),
					null != a.borderColor && b.push("border-color:" + a.borderColor),
					null != a.borderRadius && (b.push("border-radius:" + a.borderRadius + "px"), b.push("-moz-border-radius:" + a.borderRadius + "px"), b.push("-webkit-border-radius:" + a.borderRadius + "px"), b.push("-o-border-radius:" + a.borderRadius + "px")),
					a.shadow && b.push("box-shadow:1px 1px 2px rgba(0,0,0,0.2)");
					var q = a.padding;
					return null != q && void 0 != q && (q = c.reformCssArray(q), b.push("padding:" + q[0] + "px " + q[1] + "px " + q[2] + "px " + q[3] + "px")),
					b = b.join(";") + ";"
				},
				doLayout: function () {
					if (!this._tDom) {
						var a = this.vanchart.getDivParentDom();
						this._tDom = document.createElement("div"),
						this._tDom.onselectstart = function () {
							return !1
						},
						this._tDom.style.position = "absolute",
						a.appendChild(this._tDom),
						this._tooltipHideTick = null
					}
				},
				remove: function () {
					if (this._tDom) {
						var a = this.vanchart.getDivParentDom();
						a.removeChild(this._tDom)
					}
				},
				showWithPoint: function (a, b) {
					if (a && a.visible && a.series.visible) {
						var c = a.tooltip,
						e = this.calculateTooltipDivDim(c, a.tooltipText),
						f = a.series.chart,
						g = f.vanchart,
						h = g.getChart(d.MAP_CHART),
						i = (h || f).getTooltipPos(a, e, b);
						this.show(i, c, a.tooltipText)
					}
				},
				showWithSharedPoints: function (a, b) {
					if (!a || 0 === a.length)
						return void this.hide();
					var c = a.reduce(function (a, b) {
							return a.value > b.value ? a : b
						}),
					d = a[0].tooltip,
					e = this._calculateTooltipContent(a),
					f = this.calculateTooltipDivDim(d, e),
					g = c.series.chart.getTooltipPos(c, f, b);
					this.show(g, d, e)
				},
				show: function (a, b, d) {
					a && b && d && !this.vanchart.isMouseDown && (clearTimeout(this._tooltipHideTick), this._tDom.innerHTML = d, this._tDom.style.cssText = this._gCssText + this._style(b) + "left:" + a[0] + "px;top:" + a[1] + "px;"),
					c.hasTouch() && (this._tooltipHideTick = setTimeout(function () {
								this._tDom.style.display = "none"
							}
								.bind(this), 3e3))
				},
				hide: function () {
					clearTimeout(this._tooltipHideTick),
					this._tooltipHideTick = setTimeout(function () {
							this._tDom.style.display = "none"
						}
							.bind(this), 400)
				},
				immediateHide: function () {
					this._tDom.style.display = "none"
				},
				calculateTooltipDivDim: function (a, b) {
					a = a || "";
					var c = document.getElementsByTagName("body")[0],
					d = document.createElement("div");
					d.innerHTML = b,
					d.style.cssText = this._gCssText + this._style(a) + "visibility:hidden;",
					c.appendChild(d);
					var e = d.offsetWidth,
					f = d.offsetHeight;
					return c.removeChild(d), {
						width: e,
						height: f
					}
				},
				_calculateTooltipContent: function (a) {
					var b,
					d = a.reduce(function (a, d) {
							var e = d.tooltip,
							f = e.formatter;
							if (!f)
								return a;
							if (b = b || d, "object" == typeof f) {
								var g = e.style,
								h = f.identifier,
								i = "";
								return i += '<span style="font-size:20px; font-family: verdana; color: ' + d.color + '">&#9679  </span>',
								i += d.series.chart._createSeriesLine(d, h, g, f),
								i += "<br />",
								a + i
							}
							return a + c.getFormatterFunction(f).call(d)
						}, "");
					if (b) {
						var e = b.tooltip,
						f = e.formatter,
						g = e.style,
						h = f.identifier;
						d = b.series.chart._createCategoryLine(b, h, g, f) + d
					}
					return d
				}
			});
		return a("../ComponentLibrary").register(d.TOOLTIP_COMPONENT, g),
		g
	}),
	c("utils/ExportUtils", ["require", "./BaseUtils"], function (a) {
		function b() {
			var a = document.querySelectorAll(".svg-export");
			[].forEach.call(a, function (a) {
				a.parentNode.removeChild(a)
			})
		}
		function c(a) {
			var b = "";
			a.setAttribute("version", "1.1");
			var c = document.createElement("defs");
			a.insertBefore(c, a.firstChild);
			var d = document.createElement("style");
			c.appendChild(d),
			d.setAttribute("type", "text/css"),
			a.removeAttribute("xmlns"),
			a.removeAttribute("xlink"),
			a.hasAttributeNS(h.xmlns, "xmlns") || a.setAttributeNS(h.xmlns, "xmlns", h.svg),
			a.hasAttributeNS(h.xmlns, "xmlns:xlink") || a.setAttributeNS(h.xmlns, "xmlns:xlink", h.xlink);
			var e = (new XMLSerializer).serializeToString(a).replace("</style>", "<![CDATA[" + b + "]]></style>");
			return [f + e]
		}
		function d(a, d) {
			b();
			var e = c(a),
			f = d.fileName,
			h = window.URL.createObjectURL(new Blob(e, {
						type: "text/xml"
					})),
			i = document.createElement("a");
			g.appendChild(i),
			i.setAttribute("class", "svg-export"),
			i.setAttribute("download", f + ".svg"),
			i.setAttribute("href", h),
			i.style.display = "none",
			i.click(),
			setTimeout(function () {
				window.URL.revokeObjectURL(h)
			}, 10)
		}
		function e(a, b, c) {
			d(a, b, c)
		}
		var f = (a("./BaseUtils"), '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">');
		window.URL = window.URL || window.webkitURL;
		var g = document.body,
		h = {
			xmlns: "http://www.w3.org/2000/xmlns/",
			xlink: "http://www.w3.org/1999/xlink",
			svg: "http://www.w3.org/2000/svg"
		};
		return {
			toImage: e
		}
	}),
	c("render/ToolbarIconSvgRender", ["require", "../utils/BaseUtils", "../Constants", "../utils/ExportUtils", "../dom/DomEvent"], function (a) {
		function b(a, b) {
			this.toolbarIcon = a,
			this.toolbar = b
		}
		var c = "rgba(0,0,0,0.05)",
		d = "rgba(0,0,0,0.1)",
		e = "rgba(0,0,0,0.0)",
		f = "rgba(0,0,0,0.05)",
		g = 2,
		h = a("../utils/BaseUtils"),
		i = a("../Constants"),
		j = a("../utils/ExportUtils"),
		k = a("../dom/DomEvent");
		return b.prototype = {
			constructor: b,
			render: function (a) {
				var b = this.toolbar.getIconSize(),
				d = this.toolbarIcon.getIconPos(),
				f = this.toolbarIcon.visible;
				this.iconG = a.append("g").attr("transform", "translate(" + d.x + "," + d.y + ")").attr("display", f ? "" : "none"),
				this.iconG.append("rect").attr("width", b).attr("height", b).attr("rx", g).attr("ry", g).style("fill", this._isOpen() ? c : e),
				this._createIcon(),
				this._addListeners()
			},
			_iconAnimation: function (a, b, d) {
				var f = this.iconG,
				g = this.toolbarIcon.getIconPos();
				setTimeout(function () {
					d && f.attr("display", "");
					var b = 4 * a,
					h = g.x - b;
					f.transition().ease("circle-out").duration(100).attr("transform", "translate(" + h + "," + g.y + ")").transition().ease("circle-in").duration(100).attr("transform", "translate(" + g.x + "," + g.y + ")").each("end", function () {
						d3.select(this).attr("display", d ? "" : "none")
					}),
					f.select("rect").style("fill", d ? e : c).transition().ease("linear").duration(200).style("fill", d ? c : e),
					f.select("g").style("opacity", d ? 0 : 1).transition().ease("linear").duration(200).style("opacity", d ? 1 : 0)
				}, b)
			},
			backToOrigin: function () {
				var a = this.toolbarIcon.getIconPos();
				this.iconG.attr("transform", "translate(" + a.x + "," + a.y + ")")
			},
			showIcon: function () {
				arguments.length ? this._iconAnimation(arguments[0], arguments[1], !0) : this.iconG.attr("display", "")
			},
			hideIcon: function () {
				arguments.length ? this._iconAnimation(arguments[0], arguments[1], !1) : this.iconG.attr("display", "none")
			},
			refreshMove: function (a, b) {
				var c = this.toolbarIcon.getIconPos(),
				d = d3.transform(this.iconG.attr("transform")).translate,
				e = d[0],
				f = e - a,
				g = f + b;
				this.iconG.transition().ease("circle-out").duration(220).attr("transform", "translate(" + f + "," + c.y + ")").transition().ease("circle-in").duration(220).attr("transform", "translate(" + g + "," + c.y + ")")
			},
			refreshMoveWithoutAnimation: function (a, b) {
				var c = this.toolbarIcon.getIconPos(),
				d = d3.transform(this.iconG.attr("transform")).translate,
				e = d[0],
				f = e - a + b;
				this.iconG.attr("transform", "translate(" + f + "," + c.y + ")")
			},
			_isOpen: function () {
				return this.toolbar.isOpen
			},
			_addListeners: function () {
				var a = this.iconG,
				b = this,
				g = this.toolbar,
				l = g.vanchart,
				m = g.componentOption,
				n = g.vanchart.getParentDom(),
				o = this.toolbar.getVanchartRender().getRenderRoot(),
				p = this.toolbarIcon,
				q = g.getRefreshIcon(),
				r = {
					width: l.chartWidth(),
					height: l.chartHeight()
				};
				a.style("cursor", "pointer").on("click", function () {
					switch (p.iconType) {
					case i.REFRESH_ICON:
						l.refreshRestore(),
						q.hideIcon();
						break;
					case i.INCREASE_ICON:
						p.iconType = i.DECREASE_ICON,
						a.select("path").attr("d", p.getDecreaseIconPath()),
						l.refreshIncreaseOrder(),
						q.showIcon();
						break;
					case i.DECREASE_ICON:
						p.iconType = i.INCREASE_ICON,
						a.select("path").attr("d", p.getIncreaseIconPath()),
						l.refreshDecreaseOrder(),
						q.showIcon();
						break;
					case i.EXPORT_ICON:
						j.toImage(o.node(), m.toImage, r);
						break;
					case i.MAX_ICON:
						h.showLightBox(g.vanchart.restoreOption);
						break;
					case i.MIN_ICON:
						h.hideLightBox(n);
						break;
					case i.MENU_ICON:
						g.showOrHide()
					}
				}).on("mouseenter", function () {
					a.select("rect").style("fill", b._isOpen() ? d : f)
				}).on("mouseleave", function () {
					a.select("rect").style("fill", b._isOpen() ? c : e)
				}).on("mouseup", function () {
					k.stopPropagation(d3.event)
				}).on("mousedown", function () {
					k.stopPropagation(d3.event)
				})
			},
			_createIcon: function () {
				var a = this.iconG,
				b = this.toolbarIcon,
				c = b.iconType;
				switch (c) {
				case i.REFRESH_ICON:
					a.append("path").attr("d", b.getRefreshIconPath()).style("fill", "#FF9933");
					break;
				case i.INCREASE_ICON:
					a.append("path").attr("d", b.getIncreaseIconPath()).style("fill", "#33CCFF");
					break;
				case i.DECREASE_ICON:
					a.append("path").attr("d", b.getDecreaseIconPath()).style("fill", "#33CCFF");
					break;
				case i.EXPORT_ICON:
					a.append("path").attr("d", b.getExportIconPath()).style("fill", "#6666CC");
					break;
				case i.MAX_ICON:
					a.append("path").attr("d", b.getMaxIconPath()).style("fill", "#33CC66");
					break;
				case i.MIN_ICON:
					a.append("path").attr("d", b.getMinIconPath()).style("fill", "#33CC66");
					break;
				case i.MENU_ICON:
					a.append("path").attr("d", b.getMenuIconPath()).style("stroke-width", 2).style("stroke", "#AAAAAA")
				}
			}
		},
		b
	}),
	c("render/ToolbarIconVmlRender", ["require", "../utils/BaseUtils", "../Constants", "../utils/ExportUtils", "../dom/DomEvent"], function (a) {
		function b(a, b) {
			this.toolbarIcon = a,
			this.toolbar = b,
			this.currentPos = []
		}
		var c = "rgb(0,0,0)",
		d = .05,
		e = "rgb(0,0,0)",
		f = .1,
		g = "rgb(0,0,0)",
		h = 0,
		i = "rgb(0,0,0)",
		j = .05,
		k = 2,
		l = a("../utils/BaseUtils"),
		m = a("../Constants"),
		n = a("../utils/ExportUtils"),
		o = a("../dom/DomEvent");
		return b.prototype = {
			constructor: b,
			render: function (a) {
				var b = this.toolbar.getToolbarPos(),
				e = this.toolbarIcon.getIconPos(),
				f = e.x + b.x,
				i = e.y + b.y;
				this.currentPos = [f, i];
				var j = this.toolbar.getIconSize(),
				l = this.toolbarIcon.visible;
				this.itemSet = a.set(),
				this.background = a.rect(0, 0, j, j).attr("fill", this._isOpen() ? c : g).attr("fill-opacity", this._isOpen() ? d : h).attr("rx", k).attr("ry", k).attr("stroke-width", 0),
				this.foreground = a.path().attr(this._getIconStyle()),
				this.itemSet.push(this.background),
				this.itemSet.push(this.foreground),
				this.itemSet.transform("t" + f + "," + i),
				l || this.itemSet.hide(),
				this._addListeners()
			},
			_getIconStyle: function () {
				var a = this.toolbarIcon,
				b = a.iconType;
				switch (b) {
				case m.REFRESH_ICON:
					return {
						path: a.getRefreshIconPath(),
						fill: "#FF9933",
						"stroke-width": 0
					};
				case m.INCREASE_ICON:
					return {
						path: a.getIncreaseIconPath(),
						fill: "#33CCFF",
						"stroke-width": 0
					};
				case m.DECREASE_ICON:
					return {
						path: a.getDecreaseIconPath(),
						fill: "#33CCFF",
						"stroke-width": 0
					};
				case m.EXPORT_ICON:
					return {
						path: a.getExportIconPath(),
						fill: "#6666CC",
						"stroke-width": 0
					};
				case m.MAX_ICON:
					return {
						path: a.getMaxIconPath(),
						fill: "#33CC66",
						"stroke-width": 0
					};
				case m.MIN_ICON:
					return {
						path: a.getMinIconPath(),
						fill: "#33CC66",
						"stroke-width": 0
					};
				case m.MENU_ICON:
					return {
						path: a.getMenuIconPath(),
						"stroke-width": 2,
						stroke: "#AAAAAA",
						fill: "none"
					}
				}
			},
			_addListeners: function () {
				var a = (this.iconG, this.toolbar),
				b = a.componentOption,
				k = a.vanchart.getDivParentDom(),
				p = this.toolbar.getVanchartRender().getRenderRoot(),
				q = this.toolbarIcon,
				r = a.vanchart,
				s = a.getRefreshIcon(),
				t = {
					width: r.chartWidth(),
					height: r.chartHeight()
				};
				this.itemSet.forEach(function (u) {
					var v = this;
					u.attr("cursor", "pointer"),
					u.click(function (c) {
						switch (q.iconType) {
						case m.REFRESH_ICON:
							r.refreshRestore(),
							s.hideIcon();
							break;
						case m.INCREASE_ICON:
							q.iconType = m.DECREASE_ICON,
							v.foreground.attr("path", q.getDecreaseIconPath()),
							r.refreshIncreaseOrder(),
							s.showIcon();
							break;
						case m.DECREASE_ICON:
							q.iconType = m.INCREASE_ICON,
							v.foreground.attr("path", q.getIncreaseIconPath()),
							r.refreshDecreaseOrder(),
							s.showIcon();
							break;
						case m.EXPORT_ICON:
							n.toImage(p, b.toImage, t);
							break;
						case m.MAX_ICON:
							l.showLightBox(a.vanchart.restoreOption);
							break;
						case m.MIN_ICON:
							l.hideLightBox(k);
							break;
						case m.MENU_ICON:
							a.showOrHide()
						}
					}),
					u.mouseover(function () {
						v.background.attr("fill", v._isOpen() ? e : i).attr("fill-opacity", v._isOpen ? f : j)
					}),
					u.mouseout(function () {
						v.background.attr("fill", v._isOpen() ? c : g).attr("fill-opacity", v._isOpen() ? d : h)
					}),
					u.mouseup(function (a) {
						o.stopPropagation(a)
					}),
					u.mousedown(function (a) {
						o.stopPropagation(a)
					})
				}, this)
			},
			_isOpen: function () {
				return this.toolbar.isOpen
			},
			showIcon: function () {
				this.itemSet.show()
			},
			hideIcon: function () {
				this.itemSet.hide()
			},
			refreshMove: function (a, b) {
				var c = b - a;
				this.currentPos[0] += c;
				var d = this.currentPos[0],
				e = this.currentPos[1];
				this.itemSet.transform("t" + d + "," + e)
			},
			refreshMoveWithoutAnimation: function (a, b) {
				this.refreshMove(a, b)
			},
			backToOrigin: function () {
				var a = this.toolbar.getToolbarPos(),
				b = this.toolbarIcon.getIconPos(),
				c = b.x + a.x,
				d = b.y + a.y;
				this.currentPos = [c, d],
				this.itemSet.transform("t" + c + "," + d)
			}
		},
		b
	}),
	c("component/ToolbarIcon", ["require", "./Base", "../utils/BaseUtils", "../Constants", "../utils/ExportUtils", "../render/ToolbarIconSvgRender", "../render/ToolbarIconVmlRender"], function (a) {
		function b(a, b, c, d) {
			this.iconType = a,
			this.toolbar = b,
			this.visible = d,
			this.pos = c,
			this.iconG = null,
			this.iconRender = f.isSupportSVG() ? new h(this, b) : new i(this, b)
		}
		var c = 32,
		d = 1,
		e = c + d,
		f = (a("./Base"), a("../utils/BaseUtils")),
		g = a("../Constants"),
		h = (a("../utils/ExportUtils"), a("../render/ToolbarIconSvgRender")),
		i = a("../render/ToolbarIconVmlRender");
		return b.prototype = {
			constructor: b,
			render: function (a) {
				this.iconRender.render(a)
			},
			showIcon: function () {
				if (!this.visible) {
					arguments.length ? this.iconRender.showIcon(arguments[0], arguments[1]) : this.iconRender.showIcon(),
					this.visible = !0;
					var a = this.toolbar.vanchart.getComponent(g.TITLE_COMPONENT);
					this.iconType === g.REFRESH_ICON && a && a.changeTextRightSpace(e)
				}
			},
			hideIcon: function (a, b) {
				if (this.visible) {
					arguments.length ? this.iconRender.hideIcon(arguments[0], arguments[1]) : this.iconRender.hideIcon(),
					this.visible = !1;
					var c = this.toolbar.vanchart.getComponent(g.TITLE_COMPONENT);
					this.iconType === g.REFRESH_ICON && c && c.changeTextRightSpace(-e),
					this.toolbar.isOpen || this.iconType != g.REFRESH_ICON || this.iconRender.backToOrigin()
				}
			},
			refreshMove: function (a, b) {
				this.iconRender.refreshMove(a, b)
			},
			refreshMoveWithoutAnimation: function (a, b) {
				this.iconRender.refreshMoveWithoutAnimation(a, b)
			},
			getIconPos: function () {
				return this.pos
			},
			getMaxIconPath: function () {
				return "M24,8v6.5L21.5,12l-3,3L17,13.5l3-3L17.5,8H24z M15,18.5l-3,3l2.5,2.5H8v-6.5l2.5,2.5l3-3L15,18.5z"
			},
			getMinIconPath: function () {
				return "M15,17v6.5L12.5,21l-3,3L8,22.5l3-3L8.5,17H15z M24,9.5l-3,3l2.5,2.5H17V8.5l2.5,2.5l3-3L24,9.5z"
			},
			getIncreaseIconPath: function () {
				return "M8,20h16v2H8V20z M10,16h2v3h-2V16z M13,14h2v5h-2V14z M16,12h2v7h-2V12z M19,9h2v10h-2V9z"
			},
			getDecreaseIconPath: function () {
				return "M8,20h16v2H8V20z M10,9h2v10h-2V9z M13,12h2v7h-2V12z M16,15h2v4h-2V15z M19,16h2v3h-2V16z"
			},
			getExportIconPath: function () {
				return "M22,8H8v16h16V10L22,8z M16,10h2v4h-2V10z M22,22H10V10h1v5h9v-5h1.171L22,10.829V22z"
			},
			getRefreshIconPath: function () {
				return "M21.656,10.344C20.209,8.896,18.209,8,16,8c-3.43,0-6.354,2.158-7.492,5.19l1.873,0.703C11.234,11.619,13.428,10,16,10c1.657,0,3.156,0.672,4.243,1.757L18,14h6V8L21.656,10.344z M16,22c-1.657,0-3.156-0.671-4.243-1.757L14,18H8v6l2.344-2.344C11.791,23.104,13.791,24,16,24c3.43,0,6.354-2.158,7.492-5.19l-1.873-0.703C20.766,20.381,18.572,22,16,22z"
			},
			getMenuIconPath: function () {
				return "M8,10L24,10 M8,15L24,15 M8,20L24,20"
			}
		},
		b
	}),
	c("component/Toolbar", ["require", "./Base", "../utils/BaseUtils", "../Constants", "../utils/ExportUtils", "./ToolbarIcon", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = (a("../utils/ExportUtils"), a("./ToolbarIcon")),
		f = 32,
		g = 1,
		h = 5,
		i = b.extend({
				doLayout: function () {
					var a = this.componentOption;
					if (a.enabled && this._needLayout) {
						this._needLayout = !1,
						this.toolbarIcons = [],
						this.pos = {
							x: 0,
							y: 0
						};
						var b = [d.REFRESH_ICON];
						this._registerIcons("sort", d.INCREASE_ICON, b),
						!c.isSupportSVG() || c.isIE() || this.option.geo || this._registerIcons("toImage", d.EXPORT_ICON, b),
						this._registerIcons("fullScreen", d.MAX_ICON, b),
						this._registerIcons("exitFullScreen", d.MIN_ICON, b),
						this.componentOption.hidden && b.push(d.MENU_ICON);
						var i = f + g,
						j = b.length * i + h,
						k = this.vanchart.chartWidth() - j;
						this.pos = {
							x: k,
							y: h
						};
						for (var l = !this.componentOption.hidden, m = 0, n = b.length; n > m; m++) {
							var o = {
								x: m * i,
								y: 0
							},
							p = b[m];
							p == d.MENU_ICON ? this.menuIcon = new e(p, this, o, !0) : p == d.REFRESH_ICON ? this.refreshIcon = new e(p, this, o, !1) : this.toolbarIcons.push(new e(p, this, o, l))
						}
					}
				},
				_registerIcons: function (a, b, c) {
					var d = this.componentOption;
					d[a] && d[a].enabled && c.push(b)
				},
				getToolbarPos: function () {
					return this.pos
				},
				getToolbarIcons: function () {
					return this.toolbarIcons
				},
				getRefreshIcon: function () {
					return this.refreshIcon
				},
				showRefreshIconWhenZoom: function () {
					if (!this.refreshIcon.visible) {
						if (this.menuIcon)
							if (this.isOpen)
								this.refreshIcon.showIcon();
							else {
								this.refreshIcon.showIcon();
								var a = this.toolbarIcons,
								b = a.length,
								c = this.refreshIcon,
								e = 4 * (b + 1),
								h = 4 * (b + 1) + 33 * b;
								c.visible && c.refreshMoveWithoutAnimation(e, h)
							}
						else
							this.refreshIcon.showIcon();
						var i = this.vanchart.getComponent(d.TITLE_COMPONENT);
						if (i && !i.isFloat) {
							var j = f + g;
							i.changeTextRightSpace(this.refreshIcon.visible ? j : -j)
						}
					}
				},
				showOrHide: function () {
					this.isOpen ? this.render.hide() : this.render.show(),
					this.isOpen = !this.isOpen;
					var a = f + g,
					b = this.toolbarIcons.length * a;
					this.isOpen && (b = -b);
					var c = this.vanchart.getComponent(d.TITLE_COMPONENT);
					c && !c.isFloat && c.changeTextRightSpace(-b)
				},
				getIconSize: function () {
					return f
				},
				getToolbarWidth: function () {
					if (!this.componentOption.enabled)
						return 0;
					var a = f + g,
					b = h;
					return this.refreshIcon && this.refreshIcon.visible && (b += a),
					this.menuIcon && this.menuIcon.visible && (b += a),
					(this.isOpen || !this.componentOption.hidden) && (b += this.toolbarIcons.length * a),
					b
				},
				getToolbarHeight: function () {
					return f
				}
			});
		return a("../ComponentLibrary").register(d.TOOLBAR_COMPONENT, i),
		i
	}),
	c("theme/config", ["require", "../Constants"], function (a) {
		var b = a("../Constants"),
		c = {};
		return c[b.PIE_CHART] = {},
		c[b.COLUMN_CHART] = {
			xAxis: {
				type: "category",
				position: "bottom",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !0,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 0,
				gridLineColor: "#cccccc",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			},
			yAxis: {
				type: "value",
				position: "left",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !1,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			}
		},
		c[b.BAR_CHART] = {
			xAxis: {
				type: "value",
				position: "bottom",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !0,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 0,
				gridLineColor: "#cccccc",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			},
			yAxis: {
				type: "category",
				position: "left",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !1,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			}
		},
		c[b.LINE_CHART] = c[b.AREA_CHART] = {
			xAxis: {
				type: "category",
				position: "bottom",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				showLabel: !0,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				gridLineWidth: 0,
				gridLineColor: "#cccccc",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			},
			yAxis: {
				type: "value",
				position: "left",
				minorTickLength: 2,
				lineWidth: 0,
				lineColor: "#cccccc",
				enableTick: !0,
				showLabel: !0,
				tickColor: "#cccccc",
				tickWidth: 2,
				tickLength: 4,
				tickPadding: 3,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: function (a) {
					return a
				}
			}
		},
		c[b.GAUGE_CHART] = {
			legend: {
				enabled: !1
			},
			gaugeAxis: {
				type: "value",
				showLabel: !0,
				step: 1,
				enableTick: !0,
				tickColor: "#BBBBBB",
				tickWidth: 1,
				enableMinorTick: !0,
				minorTickColor: "#e2e2e2",
				minorTickWidth: 1,
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "10px"
				}
			},
			pointer: {
				tickStyle: {
					color: "#BBBBBB",
					fontSize: "8px",
					fontFamily: "Verdana"
				},
				tickWidth: 1,
				tickColor: "#666666",
				minorTickWidth: 1,
				minorTickColor: "#FCFCFC",
				seriesLabel: {
					enabled: !0,
					align: b.BOTTOM,
					useHtml: !1,
					style: {
						color: "#333333",
						fontSize: "14px",
						fontFamily: "Verdana"
					},
					formatter: {
						identifier: "${CATEGORY}"
					}
				},
				valueLabel: {
					enabled: !0,
					useHtml: !1,
					backgroundColor: "#F5F5F7",
					style: {
						color: "#333333",
						fontSize: "11px",
						fontFamily: "Verdana"
					},
					formatter: {
						identifier: "${SERIES}${VALUE}",
						valueFormat: d3.format(".2")
					}
				},
				needle: "#E5715A",
				hinge: "#656B6D",
				hingeBackgroundColor: "#DCF2F9",
				paneBackgroundColor: "#FCFCFC"
			},
			slot: {
				percentageLabel: {
					enabled: !0,
					useHtml: !1,
					style: {
						fontSize: "36px",
						fontFamily: "Verdana",
						fontWeight: "bold",
						textShadow: "0px 2px 0px rgba(0,0,0,0.08)"
					},
					formatter: {
						identifier: "${PERCENT}",
						percentFormat: d3.format(".2%")
					}
				},
				valueLabel: {
					enabled: !0,
					useHtml: !1,
					style: {
						color: "#666666",
						fontSize: "14px",
						fontFamily: "Verdana"
					},
					formatter: {
						identifier: "${CATEGORY}${VALUE}",
						valueFormat: d3.format(".2")
					}
				},
				needle: "#ffffff",
				slotBackgroundColor: "#eeeeee"
			},
			thermometer: {
				percentageLabel: {
					enabled: !0,
					useHtml: !1,
					align: "left",
					style: {
						color: "#333333",
						fontSize: "12px",
						fontFamily: "Verdana",
						fontWeight: "bold"
					},
					formatter: {
						identifier: "${PERCENT}",
						percentFormat: d3.format(".2%")
					}
				},
				valueLabel: {
					enabled: !0,
					useHtml: !1,
					align: "left",
					style: {
						color: "#bababa",
						fontSize: "12px",
						fontFamily: "Verdana"
					},
					formatter: {
						identifier: "${CATEGORY}${VALUE}",
						valueFormat: d3.format(".2")
					}
				},
				needle: "#ffffff",
				slotBackgroundColor: "#eeeeee",
				thermometerLayout: "vertical"
			},
			ring: {
				percentageLabel: {
					enabled: !0,
					useHtml: !1,
					style: {
						fontSize: "24px",
						fontFamily: "Verdana",
						fontWeight: "bold"
					},
					formatter: {
						identifier: "${PERCENT}",
						percentFormat: d3.format(".2%")
					}
				},
				valueLabel: {
					enabled: !0,
					useHtml: !1,
					style: {
						color: "#777777",
						fontSize: "12px",
						fontFamily: "Verdana"
					},
					formatter: {
						identifier: "${CATEGORY}${VALUE}",
						valueFormat: d3.format(".2")
					}
				},
				clockwise: !1,
				paneBackgroundColor: "#eeeeee",
				innerPaneBackgroundColor: "#f4f4f4"
			}
		},
		c[b.RADAR_CHART] = {
			polar: {},
			angleAxis: {
				type: "category",
				step: 1,
				lineWidth: 1,
				lineColor: "#cccccc",
				showLabel: !0,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "9pt"
				},
				formatter: "function(){return arguments[0]}"
			},
			radiusAxis: {
				type: "value",
				labelRotation: 0,
				step: 1,
				lineWidth: 1,
				lineColor: "#cccccc",
				showLabel: !0,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				formatter: "function(){return arguments[0]}",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "9pt"
				}
			}
		},
		c[b.SCATTER_CHART] = {
			legend: {
				enabled: !1
			},
			xAxis: {
				type: "value",
				position: "bottom",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !0,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 0,
				gridLineColor: "#cccccc",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			},
			yAxis: {
				type: "value",
				position: "left",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !1,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			}
		},
		c[b.BUBBLE_CHART] = {
			legend: {
				enabled: !1
			},
			xAxis: {
				type: "value",
				position: "bottom",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !0,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 0,
				gridLineColor: "#cccccc",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			},
			yAxis: {
				type: "value",
				position: "left",
				lineWidth: 1,
				lineColor: "#cccccc",
				enableTick: !0,
				enableMinorTick: !1,
				showLabel: !0,
				minorTickColor: "#cccccc",
				minorTickWidth: 1,
				minorTickLength: 2,
				tickColor: "#cccccc",
				tickWidth: 1,
				tickLength: 4,
				tickPadding: 6,
				gridLineWidth: 1,
				gridLineColor: "#dddddd",
				labelStyle: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "16px"
				},
				formatter: "function(){return arguments[0]}"
			}
		},
		c[b.AREA_MAP] = {
			legend: {
				enabled: !1
			}
		},
		c[b.POINT_MAP] = {
			legend: {
				enabled: !1
			}
		},
		c
	}),
	c("render/ZoomBarRender", ["require", "./BaseRender", "../utils/BaseUtils", "../Constants", "../theme/config", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = b.extend({
				render: function () {
					if (this.component.zoomToolEnabled() && !this._zoomG) {
						var a = this.component.bounds,
						b = this.component.getVanchartRender().getRenderRoot();
						this._zoomG = b.append("g").attr("transform", "translate(" + a.x + "," + a.y + ")"),
						this._initUnitLength();
						var c = this.component.getStartX(),
						d = this.component.getEndX();
						this._zoomG.append("g").call(this._createLines.bind(this)),
						this.leftRect = this._zoomG.append("g").call(this._createSideRect.bind(this), c, !0),
						this.rightRect = this._zoomG.append("g").call(this._createSideRect.bind(this), d, !1),
						this.innerRect = this._zoomG.append("g").call(this._createInnerRect.bind(this), c, d),
						this.leftButton = this._zoomG.append("g").call(this._createButton.bind(this), c, !0),
						this.rightButton = this._zoomG.append("g").call(this._createButton.bind(this), d, !1);
						var e = this.component.getZoomBarWidth(),
						f = this.component.getZoomBarHeight();
						this.l_bounds = {
							x: c,
							y: 0,
							width: e,
							height: f
						},
						this.r_bounds = {
							x: d - e,
							y: 0,
							width: e,
							height: f
						},
						this.c_bounds = {
							x: c + e,
							y: 0,
							width: d - c - 2 * e,
							height: f
						},
						this._addEventListeners(b)
					}
				},
				remove: function () {
					this._zoomG && (this._zoomG.remove(), this._zoomG = null)
				},
				_initUnitLength: function () {
					var a = this.component.vanchart.xAxis();
					if (a.type == d.CATEGORY_AXIS_COMPONENT) {
						var b = this.component.bounds,
						c = a.getCategories();
						this.unitLength = c.length ? b.width / c.length : b.width
					} else
						this.unitLength = 1
				},
				_addEventListeners: function (a) {
					var b = this;
					a.on("mousedown.zoom", function () {
						var a = d3.mouse(b._zoomG.node());
						c.containsPoint(b.l_bounds, a) ? this.tartget = b.leftButton : c.containsPoint(b.r_bounds, a) ? this.tartget = b.rightButton : c.containsPoint(b.c_bounds, a) && (this.tartget = b.innerRect),
						this.tartget && (this.downX = a[0], this.initX = d3.transform(this.tartget.attr("transform")).translate[0], b._zoomG.style("cursor", "ew-resize"), b._initStartEndIndex())
					}).on("mousemove.zoom", function () {
						if (this.tartget) {
							var a = this.tartget.attr("class");
							switch (a) {
							case d.LEFT:
								b.component.resizable() && b._leftButtonMove(this.downX, this.initX);
								break;
							case d.RIGHT:
								b.component.resizable() && b._rightButtonMove(this.downX, this.initX);
								break;
							case d.CENTER:
								b._centerRectMove(this.downX)
							}
							b._zoomRefresh()
						}
					}).on("mouseup.zoom", function () {
						if (this.tartget) {
							this.tartget = null,
							b._updateBounds();
							var a = b.component.vanchart.xAxis();
							a && a.render.render()
						}
					})
				},
				_leftButtonMove: function (a, b) {
					var c = this.component.getZoomBarWidth(),
					d = 0,
					e = d3.transform(this.rightButton.attr("transform")).translate[0] - c,
					f = d3.mouse(this._zoomG.node())[0],
					g = b + f - a;
					g = Math.max(Math.min(g, e), d),
					this.leftButton.attr("transform", "translate(" + g + ",0)"),
					this.leftRect.select("rect").attr("width", g),
					this.innerRect.selectAll("line").attr("x1", g + c),
					this.innerRect.select("rect").attr("x", g + c).attr("width", e - g)
				},
				_rightButtonMove: function (a, b) {
					var c = this.component.getZoomBarWidth(),
					d = d3.transform(this.leftButton.attr("transform")).translate[0] + c,
					e = this.component.getBoundsEndX() - c,
					f = d3.mouse(this._zoomG.node())[0],
					g = b + f - a;
					g = Math.max(Math.min(g, e), d),
					this.rightButton.attr("transform", "translate(" + g + ",0)"),
					this.rightRect.select("rect").attr("x", g + c).attr("width", this.component.getBoundsEndX() - (g + c)),
					this.innerRect.selectAll("line").attr("x2", g),
					this.innerRect.select("rect").attr("width", g - d)
				},
				_centerRectMove: function (a) {
					var b = this.component.getBoundsEndX(),
					c = this.component.getZoomBarWidth(),
					d = d3.mouse(this._zoomG.node())[0],
					e = d - a;
					if (this.l_bounds.x + e >= 0 && this.r_bounds.x + this.r_bounds.width + e <= b) {
						var f = this.l_bounds.x + e;
						this.leftButton.attr("transform", "translate(" + f + ",0)"),
						this.leftRect.select("rect").attr("width", f);
						var g = this.r_bounds.x + e;
						this.rightButton.attr("transform", "translate(" + g + ",0)"),
						this.rightRect.select("rect").attr("x", g + c).attr("width", this.component.getBoundsEndX() - (g + c)),
						this.innerRect.selectAll("line").attr("x1", f + c).attr("x2", g),
						this.innerRect.select("rect").attr("x", f + c)
					}
				},
				_initStartEndIndex: function () {
					var a = d3.transform(this.leftButton.attr("transform")).translate[0],
					b = d3.transform(this.rightButton.attr("transform")).translate[0];
					this.initStart = this._getIndexByPosition(a),
					this.initEnd = this._getIndexByPosition(b)
				},
				_getIndexByPosition: function (a) {
					var b = this.component.vanchart.xAxis();
					switch (b.type) {
					case d.CATEGORY_AXIS_COMPONENT:
						var e = b.getCategories();
						return b.isAxisReversed() ? e.length - 1 - Math.floor(a / this.unitLength) : Math.floor(a / this.unitLength);
					case d.DATE_AXIS_COMPONENT:
						return c.date2int(this.xScale.invert(a));
					default:
						return this.xScale.invert(a)
					}
				},
				_zoomRefresh: function () {
					var a = d3.transform(this.leftButton.attr("transform")).translate[0],
					b = d3.transform(this.rightButton.attr("transform")).translate[0],
					c = this._getIndexByPosition(a),
					e = this._getIndexByPosition(b);
					if (this.initStart != c || this.initEnd != e) {
						var f = this.component.vanchart.xAxis();
						f.updateAxisScale(Math.min(c, e), Math.max(c, e), !0);
						var g = this.component.vanchart;
						g.currentOption.state = d.STATE_ZOOM_REFRESH,
						g.layoutComponentsAndCharts(),
						this.initStart = c,
						this.initEnd = e
					}
				},
				_updateBounds: function () {
					var a = d3.transform(this.leftButton.attr("transform")).translate[0],
					b = d3.transform(this.rightButton.attr("transform")).translate[0],
					c = this.component.getZoomBarWidth();
					this.l_bounds.x = a,
					this.r_bounds.x = b,
					this.c_bounds.x = a + c,
					this.c_bounds.width = b - a - c
				},
				_createSideRect: function (a, b, c) {
					var d,
					e,
					f = this.component.getZoomBarHeight();
					c ? (d = 0, e = b) : (d = b, e = this.component.bounds.width - b),
					a.append("rect").attr("x", d).attr("y", 0).attr("width", e).attr("height", f).style("fill", "rgba(220,221,221,0.4)")
				},
				_createInnerRect: function (a, b, c) {
					var e = this.component.getZoomBarWidth(),
					f = this.component.getZoomBarHeight();
					a.attr("class", d.CENTER),
					a.append("rect").attr("x", b + e).attr("y", 0).attr("width", c - b - 2 * e).attr("height", f).style("fill", "rgba(255,255,255,0)"),
					a.append("line").attr("x1", b + e).attr("y1", 0).attr("x2", c - e).attr("y2", 0),
					a.append("line").attr("x1", b + e).attr("y1", f).attr("x2", c - e).attr("y2", f),
					a.selectAll("line").style({
						fill: "none",
						stroke: "#29ABE2",
						"stroke-width": 1
					})
				},
				_createLines: function (b) {
					var d = a("../theme/config"),
					e = this.component.bounds,
					f = this.component.vanchart.xAxis();
					this.xScale = this.component._getAxisScale();
					var g = this.xScale,
					h = this.component.option.series,
					i = this.component.option.chartType,
					j = [];
					h.forEach(function (a) {
						!a.xAxis && d[a.type || i].xAxis && j.push(a)
					});
					var k = [],
					l = Number.MAX_VALUE,
					m = Number.MIN_VALUE;
					j.forEach(function (a) {
						var b = [];
						k.push(b);
						for (var d = a.data.length, e = 0; d > e; e++) {
							var g = a.data[e],
							h = {
								x: f.getValueFromData(g),
								y: c.pick(g.y, g)
							};
							isNaN(+h.y) || (b.push(h), l = Math.min(l, h.y), m = Math.max(m, h.y))
						}
					}),
					l = l >= 0 ? 0 : l;
					var n = g.rangeBand ? g.rangeBand() / 2 : 0,
					o = d3.scale.linear().domain([l, m]).range([e.height, 0]);
					k.forEach(function (a) {
						a.forEach(function (a) {
							a.x = g(a.x) + n,
							a.y = o(a.y)
						})
					}),
					k.forEach(function (a) {
						a.sort(function (a, b) {
							return a.x - b.x
						})
					});
					var p = d3.svg.line().interpolate("linear").x(function (a) {
							return a.x
						}).y(function (a) {
							return a.y
						});
					b.selectAll("path").data(k).enter().append("path").attr("d", function (a) {
						return p(a)
					}).style({
						fill: "none",
						stroke: "black",
						"stroke-width": 1
					})
				},
				_createButton: function (a, b, c) {
					b = c ? b : b - this.component.getZoomBarWidth(),
					a.attr("transform", "translate(" + b + ",0)").attr("class", c ? d.LEFT : d.RIGHT),
					a.append("path").attr("d", c ? "M4,30h6V0L4,0C1.791,0,0,1.791,0,4v22C0,28.209,1.791,30,4,30z" : "M6,30H0V0h6c2.209,0,4,1.791,4,4v22C10,28.209,8.209,30,6,30z").style("fill", "#29ABE2"),
					a.append("line").attr("x1", 3).attr("y1", 11).attr("x2", 3).attr("y2", 18),
					a.append("line").attr("x1", 7).attr("y1", 11).attr("x2", 7).attr("y2", 18),
					a.selectAll("line").style({
						fill: "#FFFFFF",
						stroke: "#7ADAF4",
						"stroke-width": 2,
						"stroke-linecap": "round",
						"stroke-linejoin": "round",
						"stroke-miterlimit": 10
					})
				}
			});
		a("./RenderLibrary").register(d.ZOOM_SVG, e)
	}),
	c("component/ZoomBar", ["require", "../render/ZoomBarRender", "./Base", "../utils/BaseUtils", "../Constants", "../ComponentLibrary"], function (a) {
		a("../render/ZoomBarRender");
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = 30,
		f = 10,
		g = b.extend({
				doLayout: function () {
					this.zoomToolEnabled() && this._setComponentBounds(d.BOTTOM, e)
				},
				fixBoundsByPlot: function () {
					var a = this.vanchart.getPlotBounds(),
					b = a.y + a.height,
					f = this.vanchart.getComponent(d.X_AXIS_COMPONENT);
					f && f._axisList.length && f._axisList.forEach(function (a) {
						a.getPosition() == d.BOTTOM && (b = Math.max(b, a.bounds.y + a.bounds.height))
					}),
					this.bounds = c.makeBounds(a.x, b, a.width, e)
				},
				getRevisedDomain: function () {
					var a = {
						from: this.componentOption.zoomTool.from,
						to: this.componentOption.zoomTool.to
					},
					b = this.vanchart.xAxis();
					if (b.type === d.VALUE_AXIS_COMPONENT || b.type === d.DATE_AXIS_COMPONENT) {
						var e = [this.componentOption.zoomTool.from, this.componentOption.zoomTool.to];
						b.type === d.DATE_AXIS_COMPONENT && (e[0] = c.date2int(e[0]), e[1] = c.date2int(e[1])),
						a.from = Math.min.apply(null, e),
						a.to = Math.max.apply(null, e);
						var f = b.getOriginalDomain();
						a.from = Math.max(a.from, f.minValue),
						a.to = Math.min(a.to, f.maxValue)
					}
					return a
				},
				zoomToolEnabled: function () {
					var a = this.option.xAxis;
					return a && (a = a[0] || a),
					this.componentOption && this.componentOption.zoomTool && this.componentOption.zoomTool.visible && !this.option.dataSheet && !this.option.plotOptions.force && a
				},
				resizable: function () {
					return this.componentOption && this.componentOption.zoomTool && this.componentOption.zoomTool.resize
				},
				getZoomBarWidth: function () {
					return f
				},
				getZoomBarHeight: function () {
					return e
				},
				_getAxisScale: function () {
					var a = this.vanchart.xAxis(),
					b = a.scale.copy();
					if (a.type == d.CATEGORY_AXIS_COMPONENT)
						b.rangeBand ? b.rangeBands(a._getRange()) : b.range(a._getRange());
					else {
						var c = a.getOriginalDomain();
						b.domain([c.minValue, c.maxValue])
					}
					return b
				},
				getStartX: function () {
					var a = this.getRevisedDomain(),
					b = 0,
					c = this._getAxisScale();
					if (a.from && !a.to)
						b = c(a.from), b = isNaN(b) ? 0 : b;
					else if (a.from && a.to)
						return this._getMinX();
					return b
				},
				getEndX: function () {
					var a = this.getRevisedDomain(),
					b = this.bounds.width,
					c = this._getAxisScale();
					if (a.to && !a.from)
						b = c(a.to) + (c.rangeBand ? c.rangeBand() : 0), b = isNaN(b) ? this.bounds.width : b;
					else if (a.to && a.from)
						return this._getMaxX();
					return b
				},
				_getMinX: function () {
					var a = this.getRevisedDomain();
					if (a.from && a.to) {
						var b = this._getAxisScale(),
						c = b(a.from),
						d = b(a.to),
						e = Math.min(c, d);
						return isNaN(e) ? 0 : e
					}
				},
				_getMaxX: function () {
					var a = this.getRevisedDomain();
					if (a.from && a.to) {
						var b = this._getAxisScale(),
						c = b(a.from),
						d = b(a.to),
						e = Math.max(c, d) + (b.rangeBand ? b.rangeBand() : 0);
						return isNaN(e) ? this.bounds.width : e
					}
				},
				getBoundsEndX: function () {
					return this.bounds.width
				}
			});
		return a("../ComponentLibrary").register(d.ZOOM_COMPONENT, g),
		g
	}),
	c("component/DataSheet", ["require", "./Base", "../utils/BaseUtils", "../utils/Formatter", "../Constants", "../render/LegendIconFactory", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = (a("../utils/Formatter"), a("../Constants")),
		e = a("../render/LegendIconFactory"),
		f = 4,
		g = 2,
		h = 18,
		i = {
			color: "#666666",
			fontSize: "14px",
			fontFamily: "Verdana"
		},
		j = b.extend({
				doLayout: function () {
					this.remove();
					var a = this.vanchart.getPlotBounds(),
					b = Math.round(this.getSeriesNameLength());
					this._clipPlotBounds(d.LEFT, Math.max(b - a.x, 0)),
					this._setComponentBounds(d.BOTTOM, this.getDataSheetHeight())
				},
				fixBoundsByPlot: function () {
					var a = this.vanchart.getPlotBounds();
					this.bounds = {
						x: a.x - this.maxSeriesWidth,
						y: a.y + a.height,
						width: this.maxSeriesWidth + a.width,
						height: this.sheetHeight
					}
				},
				getSeriesNameLength: function () {
					this.seriesNames = [],
					this.maxSeriesLine = [];
					for (var a = this.option.series, b = this._seriesStyle(), d = this.vanchart.getChartBounds().width / 4 - (h + 2 * g), i = 0, j = 0, k = 0, l = a.length; l > k; k++) {
						this.maxSeriesLine[k] = 0;
						var m = a[k],
						n = c.getTextDimension(m.name, b, !1).width + 2 * f;
						if (n > d) {
							var o = c.splitText(m.name, b, d, f);
							this.maxSeriesLine[k] = o.length,
							this.seriesNames.push(o),
							i = d
						} else
							this.maxSeriesLine[k] = 1, this.seriesNames.push([m.name]), i = Math.max(n, i);
						var p = this.getLegendIconTypeWithSeriesIndex(k);
						j = Math.max(j, e.getLegendIconSize(p).width)
					}
					return this.maxSeriesWidth = Math.ceil(i + 2 * g + j),
					this.maxSeriesWidth + f
				},
				getLegendIconTypeWithSeriesIndex: function (a) {
					return this._getLegendType(this.vanchart.series[a])
				},
				getDataSheetHeight: function () {
					this.maxCateLine = 0,
					this.categoryNames = [],
					this.values = [],
					this.maxValueLine = [];
					var a = this.vanchart.xAxis(),
					b = a.getCategories();
					a.isAxisReversed() && (b = c.clone(b).reverse());
					var d = this._categoryStyle(),
					e = this.vanchart.getPlotBounds().width / b.length,
					g = this;
					b.forEach(function (a) {
						var b = c.splitText(a, d, e, f);
						g.maxCateLine = Math.max(g.maxCateLine, b.length),
						g.categoryNames.push(b)
					});
					for (var h = this._valueStyle(), i = this.componentOption.formatter, j = this.vanchart.series, k = 0, l = j.length; l > k; k++) {
						var m = [];
						this.values.push(m),
						this.maxValueLine[k] = 0;
						for (var n = j[k], o = n.originalPoints || n.points, p = 0, q = o.length; q > p; p++) {
							var r = o[p],
							s = r.value,
							t = r.isNull ? "-" : this._getTickContent(s, i),
							u = c.splitText(t, h, e, f);
							m[c.indexInArray(b, r.category)] = u,
							this.maxValueLine[k] = Math.max(this.maxValueLine[k], u.length)
						}
					}
					for (var v = this.getCategoryHeight(), w = 0, k = 0, l = j.length; l > k; k++)
						w += this.getSeriesHeight(k);
					return this.sheetHeight = Math.ceil(v + w),
					this.sheetHeight
				},
				_categoryStyle: function () {
					return this.option.xAxis.labelStyle || this.option.xAxis[0].labelStyle || i
				},
				_seriesStyle: function () {
					return this.option.legend ? this.option.legend.style : i
				},
				_valueStyle: function () {
					return this.componentOption.style
				},
				getCategoryHeight: function () {
					var a = this._categoryStyle();
					return 2 * f + this.maxCateLine * c.getTextHeight(a) + (this.maxCateLine - 1) * f
				},
				getSeriesHeight: function (a) {
					var b = c.getTextHeight(this._seriesStyle()),
					d = c.getTextHeight(this._valueStyle()),
					e = this.maxSeriesLine[a],
					g = 2 * f + e * b + (e - 1) * f,
					h = this.maxValueLine[a],
					i = 2 * f + h * d + (h - 1) * f;
					return Math.max(g, i)
				},
				getMaxSeriesWidth: function () {
					return this.maxSeriesWidth
				},
				getTextPadding: function () {
					return f
				}
			});
		return a("../ComponentLibrary").register(d.DATA_SHEET_COMPONENT, j),
		j
	}),
	c("component/RangeLegend", ["require", "./Base", "../utils/BaseUtils", "../Constants", "../utils/ColorUtils", "../utils/Formatter", "../ComponentLibrary"], function (a) {
		var b = a("./Base"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/ColorUtils"),
		f = a("../utils/Formatter"),
		g = 10,
		h = 15,
		i = 100,
		j = 15,
		k = 10,
		l = 5,
		m = 25,
		n = 2,
		o = b.extend({
				doLayout: function () {
					if (this.componentOption.visible) {
						this.isIntervalLegend && this._setItemsPoints();
						var a = this._calculateUsedSize();
						this._setComponentBounds(this.componentOption.position || d.RIGHT_TOP, a),
						this._calculateRangeLegendFinalBounds(a)
					}
				},
				_calculateAutoMinMaxAndGap: function (a, b, d) {
					a > b && (a = 0, b = 100);
					var e = b - a,
					f = c.getOrder(e),
					g = Math.pow(10, f);
					0 >= f ? (a = c.accMul(a, Math.pow(10, 1 - f)), a = c.accDiv(Math.floor(a), Math.pow(10, 1 - f))) : a = Math.floor(a / g) * g;
					for (var h = c.accDiv(d, 10) * g, i = 0; e > i; )
						i = c.accAdd(h, i);
					for (var j = c.accDiv(i, d); b > a + j * d; )
						i = c.accAdd(h, i), j = c.accDiv(i, d);
					return i = c.accDiv(i, d),
					b = c.accAdd(a, c.accMul(i, d)),
					[a, b, i]
				},
				_refresh: function () {
					if (!this.vanchart.isZoomRefreshState()) {
						var a = this.componentOption,
						b = a.range || {},
						d = this.vanchart.getMinMaxFromSeries(),
						f = a.min,
						g = a.max;
						if (a.continuous && c.hasNotDefined(f) && c.hasNotDefined(g)) {
							var h = this._calculateAutoMinMaxAndGap(d[0], d[1], Math.max(2, b.color.length - 1));
							f = h[0],
							g = h[1]
						} else if (!a.continuous && !c.isArray(b)) {
							var i = b.splitNumber || 5,
							j = b.color || "blue",
							k = e.createColorsWithHsb(j, i),
							h = this._calculateAutoMinMaxAndGap(d[0], d[1], i);
							f = h[0];
							var l = h[2];
							b = [];
							for (var m = 0; i > m; m++)
								b.push({
									from: c.accAdd(f, c.accMul(l, i - m - 1)),
									to: c.accAdd(f, c.accMul(l, i - m)),
									color: k[m]
								})
						}
						var n = this;
						if (this.isIntervalLegend = c.isArray(b), this.isIntervalLegend) {
							var o = this.componentOption.hiddenColor,
							p = this.componentOption.hoverColor,
							q = this.componentOption.formatter;
							this.items = [],
							b.forEach(function (a) {
								var b = n._getIntervalLabelContent(a.from, a.to, q);
								n.items.push({
									from: a.from,
									to: a.to,
									color: a.color,
									label: b,
									points: [],
									visible: !0,
									hiddenColor: o,
									hoverColor: p
								})
							}),
							this.items.sort(function (a, b) {
								var c = Math.min(a.from, a.to),
								d = Math.min(b.from, b.to);
								return n.isHorizontal() ? c - d : d - c
							})
						} else {
							this.min = c.pick(b.min, f),
							this.max = c.pick(b.max, g),
							this.valueAndColors = b.color,
							this.valueAndColors.sort(function (a, b) {
								return a[0] - b[0]
							});
							for (var r = [], s = [], m = 0, t = this.valueAndColors.length; t > m; m++)
								r[m] = this.valueAndColors[m][0], s[m] = this.valueAndColors[m][1];
							this.valueScale = d3.scale.linear().domain([this.min, this.max]).range([0, 1]),
							this.colorScale = d3.scale.linear().domain(r).range(s)
						}
					}
				},
				_getIntervalLabelContent: function (a, b, c) {
					return c ? f.format({
						from: a,
						to: b
					}, c) : a + "-" + b
				},
				_getGradientMinLabelContent: function () {
					return this._getGradientLabelWithFormatter(this.min)
				},
				_getGradientMaxLabelContent: function () {
					return this._getGradientLabelWithFormatter(this.max)
				},
				_getGradientLabelWithFormatter: function (a) {
					var b = this.componentOption.formatter;
					return b ? f.format(a, b) : a
				},
				getValueAndColors: function () {
					return this.valueAndColors
				},
				getGradientLabelContent: function (a) {
					return this._getGradientLabelWithFormatter(this._gradientScale(a))
				},
				_gradientScale: function (a) {
					var b = c.accDiv(c.accAdd(this.max, -this.min), i);
					return a = c.accMul(b, this.isHorizontal() ? a : i - a),
					a = c.accAdd(a, this.min)
				},
				getColorWithSize: function (a) {
					if (this.isIntervalLegend) {
						var b = this._getPointItem(a);
						return b ? b.color : null
					}
					return a >= this.min && a <= this.max ? this.colorScale(this.valueScale(a)) : null
				},
				_setItemsPoints: function () {
					var a = this,
					b = this.vanchart.series;
					b.forEach(function (b) {
						var d = b.points;
						d.forEach(function (b) {
							var d = c.hasDefined(b.size) ? b.size : b.value,
							e = a._getPointItem(d);
							e && e.points.push(b)
						})
					})
				},
				_getPointItem: function (a) {
					for (var b = 0, c = this.items.length; c > b; b++) {
						var d = this.items[b],
						e = Math.min(d.from, d.to),
						f = Math.max(d.from, d.to);
						if (a >= e && f >= a)
							return d
					}
				},
				_calculateUsedSize: function () {
					var a = this.componentOption,
					b = a.position || d.RIGHT,
					c = 4 * g;
					if (b == d.TOP || b == d.BOTTOM) {
						var e = this._maxHeight();
						return c += this.isIntervalLegend ? this._calculateIntervalTopAndBottomSize() : this._calculateGradientTopAndBottomSize(),
						a.maxHeight ? Math.min(c, e) : c
					}
					var e = this._maxWidth();
					return c += this.isIntervalLegend ? this._calculateIntervalLeftAndRightSize() : this._calculateGradientLeftAndRightSize(),
					a.maxWidth ? Math.min(c, e) : c
				},
				_calculateGradientTopAndBottomSize: function () {
					var a = h + j + l,
					b = c.getTextDimension(this._getGradientMinLabelContent(), this.componentOption.style);
					return a + b.height
				},
				_calculateGradientLeftAndRightSize: function () {
					var a = h + j + l,
					b = c.getTextDimension(this._getGradientMinLabelContent(), this.componentOption.style),
					d = c.getTextDimension(this._getGradientMaxLabelContent(), this.componentOption.style);
					return a + Math.max(b.width, d.width)
				},
				_calculateIntervalTopAndBottomSize: function () {
					var a = h + 2 * l,
					b = c.getTextDimension("0", this.componentOption.style);
					return a + 2 * b.height
				},
				_calculateIntervalLeftAndRightSize: function () {
					var a = 0,
					b = this.componentOption.style;
					return this.items.forEach(function (d) {
						var e = c.getTextDimension(d.label, b);
						a = Math.max(a, e.width)
					}),
					a + h + l
				},
				_calculateRangeLegendFinalBounds: function () {
					var a = this.componentOption,
					b = a.position || d.RIGHT,
					c = 4 * g;
					if (b == d.TOP || b == d.BOTTOM ? (c += this.isIntervalLegend ? this._calculateIntervalTopAndBottomFinalSize() : this._calculateGradientTopAndBottomFinalSize(), c = Math.max(this.bounds.width - c, 0), this.bounds.x += c / 2, this.bounds.width -= c) : b == d.LEFT || b == d.RIGHT ? (c += this.isIntervalLegend ? this._calculateIntervalLeftAndRightFinalSize() : this._calculateGradientLeftAndRightFinalSize(), c = Math.max(this.bounds.height - c, 0), this.bounds.y += c / 2, this.bounds.height -= c) : b == d.RIGHT_TOP && (c += this.isIntervalLegend ? this._calculateIntervalLeftAndRightFinalSize() : this._calculateGradientLeftAndRightFinalSize(), this.bounds.height = c), !this.isFloat) {
						var e = this.componentOption.borderWidth + 2 * g;
						if (this.bounds.x += e / 2, this.bounds.y += e / 2, this.bounds.width -= e, this.bounds.height -= e, b == d.BOTTOM) {
							var f = this.vanchart.getComponent(d.ZOOM_COMPONENT);
							f && f.zoomToolEnabled() && (this.bounds.y += f.bounds.height)
						}
						if (b == d.RIGHT || b == d.RIGHT_TOP) {
							var h = this.vanchart.getToolbarHeight();
							this.bounds.y += h
						}
					}
				},
				_calculateGradientTopAndBottomFinalSize: function () {
					var a = c.getTextDimension(this._getGradientMinLabelContent(), this.componentOption.style),
					b = c.getTextDimension(this._getGradientMaxLabelContent(), this.componentOption.style),
					d = Math.max(a.width, b.width, k);
					return i + 2 * d
				},
				_calculateGradientLeftAndRightFinalSize: function () {
					var a = c.getTextDimension(this._getGradientMinLabelContent(), this.componentOption.style),
					b = Math.max(a.height / 2, k / 2);
					return b *= 2,
					i + 2 * b
				},
				_calculateIntervalTopAndBottomFinalSize: function () {
					var a = this.items.length;
					if (a > 0) {
						var b = c.getTextDimension(this.items[0].label, this.componentOption.style),
						d = c.getTextDimension(this.items[a - 1].label, this.componentOption.style),
						e = Math.max(0, b.width - m, d.width - m);
						return a * m + (a - 1) * n + e
					}
					return 0
				},
				_calculateIntervalLeftAndRightFinalSize: function () {
					var a = this.items.length;
					if (a > 0) {
						var b = c.getTextDimension(this.items[0].label, this.componentOption.style),
						d = c.getTextDimension(this.items[a - 1].label, this.componentOption.style),
						e = Math.max(0, b.height - m, d.height - m);
						return a * m + (a - 1) * n + e
					}
					return 0
				},
				getTopBarPath: function () {
					return "M7.236,10H13c1.105,0,2-0.895,2-2V2c0-1.105-0.895-2-2-2L2.618,0C1.875,0,1.391,0.782,1.724,1.447l3.724,7.447C5.786,9.572,6.479,10,7.236,10z"
				},
				getBottomBarPath: function () {
					return "M7.236,0L13,0c1.105,0,2,0.895,2,2v6c0,1.105-0.895,2-2,2H2.618c-0.743,0-1.227-0.782-0.894-1.447l3.724-7.447C5.786,0.428,6.479,0,7.236,0z"
				},
				getLeftBarPath: function () {
					return "M0,7.236V13c0,1.105,0.895,2,2,2h6c1.105,0,2-0.895,2-2V2.618c0-0.743-0.782-1.227-1.447-0.894L1.106,5.447C0.428,5.786,0,6.479,0,7.236z"
				},
				getRightBarPath: function () {
					return "M10,7.236V13c0,1.105-0.895,2-2,2H2c-1.105,0-2-0.895-2-2L0,2.618c0-0.743,0.782-1.227,1.447-0.894l7.447,3.724C9.572,5.786,10,6.479,10,7.236z"
				},
				refreshPoints: function (a, b) {
					var e,
					f = this._gradientScale(a),
					g = this._gradientScale(b),
					h = this.vanchart,
					i = !1,
					j = this.vanchart.getChart(d.MAP_CHART);
					h.series.forEach(function (a) {
						a.points.forEach(function (a) {
							if (!j || j && a.points && a.points[0] == a) {
								var b = a.visible,
								d = c.hasDefined(a.size) ? a.size : a.value;
								if (a.visible = d >= f && g >= d || d >= g && f >= d, i = i || b != a.visible, j) {
									e = a.points;
									for (var h = 1, k = e.length; k > h; h++)
										e[h].visible = a.visible
								}
							}
						})
					}),
					i && h.renderOnlyCharts()
				}
			});
		return a("../ComponentLibrary").register(d.RANGE_LEGEND_COMPONENT, o),
		o
	}),
	c("theme/default", [], function () {
		var a = {
			colors: ["#63b2ee", "#76da91", "#f8cb7f", "#f89588", "#7cd6cf", "#9192ab", "#7898e1", "#efa666", "#eddd86", "#9987ce"],
			plotOptions: {
				visible: !0,
				fillColorOpacity: 1,
				dataLabels: {
					enabled: !1
				}
			},
			tooltip: {
				enabled: !0
			},
			tools: {
				enabled: !0,
				hidden: !1
			},
			dTools: {
				style: {
					fontFamily: "Microsoft Yahei",
					color: "#b2b2b2",
					fontSize: "12px",
					fontWeight: ""
				},
				currentColor: "#62b2ef",
				backgroundColor: "white",
				enabled: !1
			},
			legend: {
				visible: !0,
				enabled: !1,
				hiddenColor: "#cccccc",
				hoverColor: "green",
				borderRadius: 0,
				borderColor: "rgb(204,204,204)",
				borderWidth: 0,
				style: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "14px"
				},
				position: "right"
			},
			rangeLegend: {
				visible: !0,
				enabled: !1,
				borderWidth: 0,
				hiddenColor: "#cccccc",
				hoverColor: "green",
				style: {
					color: "#666666",
					fontFamily: "Verdana",
					fontSize: "14px"
				},
				position: "right"
			},
			backgroundColor: null,
			backgroundImage: null,
			borderColor: "#CCCCCC",
			borderWidth: 0,
			borderRadius: 0,
			shadow: !1,
			plotBackgroundColor: null,
			plotBackgroundImage: null,
			plotBorderColor: "#CCCCCC",
			plotBorderWidth: 0,
			plotBorderRadius: 0,
			plotShadow: !1
		};
		return a
	}),
	c("VanChart", ["require", "./utils/BaseUtils", "./utils/QueryUtils", "./utils/Class", "./ComponentLibrary", "./ChartLibrary", "./Constants", "./render/RenderFactory", "./Handler", "./component/Series", "./component/CoordinateSystem", "./component/Title", "./component/DrillTools", "./component/Axis", "./component/Geo", "./component/CategoryAxis", "./component/ValueAxis", "./component/DateAxis", "./component/Polar", "./component/Legend", "./component/Tooltip", "./component/Toolbar", "./component/ZoomBar", "./component/DataSheet", "./component/RangeLegend", "./theme/config", "./theme/default"], function (a) {
		var b = a("./utils/BaseUtils"),
		c = a("./utils/QueryUtils"),
		d = a("./utils/Class"),
		e = a("./ComponentLibrary"),
		f = a("./ChartLibrary"),
		g = a("./Constants"),
		h = a("./render/RenderFactory"),
		i = a("./Handler"),
		j = a("./component/Series"),
		k = a("./component/CoordinateSystem"),
		l = [g.GEO_COMPONENT, g.TOOLBAR_COMPONENT, g.TITLE_COMPONENT, g.DRILL_TOOLS, g.LEGEND_COMPONENT, g.RANGE_LEGEND_COMPONENT, g.Y_AXIS_COMPONENT, g.X_AXIS_COMPONENT, g.POLAR_COMPONENT, g.RADIUS_AXIS_COMPONENT, g.ANGLE_AXIS_COMPONENT, g.GAUGE_AXIS_COMPONENT, g.ZOOM_COMPONENT, g.DATA_SHEET_COMPONENT, g.TOOLTIP_COMPONENT],
		m = [g.X_AXIS_COMPONENT, g.Y_AXIS_COMPONENT, g.POLAR_COMPONENT, g.RADIUS_AXIS_COMPONENT, g.ANGLE_AXIS_COMPONENT, g.GAUGE_AXIS_COMPONENT],
		n = 5;
		a("./component/Title"),
		a("./component/DrillTools"),
		a("./component/Axis"),
		a("./component/Geo"),
		a("./component/CategoryAxis"),
		a("./component/ValueAxis"),
		a("./component/DateAxis"),
		a("./component/Polar"),
		a("./component/Legend"),
		a("./component/Tooltip"),
		a("./component/Toolbar"),
		a("./component/ZoomBar"),
		a("./component/DataSheet"),
		a("./component/RangeLegend");
		var o = d.extend({
				initialize: function (a, b, c) {
					this.width = this._getDomWidth(b),
					this.height = this._getDomHeight(b),
					this.ID_PREFIX = b.getAttribute(g.INSTANCES_KEY) + c.charts.length,
					this.coordinateSys = new k(g.PLANE),
					b = this._initLeafLet(a, b),
					a.state = g.STATE_INIT,
					this.dom = b,
					this.dom.style.cssText += ";-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",
					this.dom.onselectstart = this.dom.ondrag = function () {
						return !1
					},
					this.vancharts = c,
					this.handler = new i(this, b),
					this.render = h.getRender(g.VANCHART, this),
					this.components = {},
					this.charts = {},
					this.series = [],
					this.colorMap = {},
					this.refresh(a)
				},
				componentType: g.VANCHART,
				_initLeafLet: function (a, c) {
					function d() {
						var a = e.getChart(g.MAP_CHART),
						b = e.hoverPoint,
						c = e._leaflet.getZoom(),
						d = a.layerIndex;
						if (b && b.geo && b.drill) {
							var f = b.geo.getZoomListener();
							if (f && c >= f)
								return void a.drillDown(b)
						}
						var h = e.lastIconData && e.lastIconData[d - 1];
						return h && h.zoomListener > c ? void a.drillUp(h) : void a.viewreset()
					}
					if (a.geo) {
						var e = this;
						this.coordinateSys.setType(g.GEO);
						var f = {
							zoomControl: !1,
							doubleClickZoom: !1
						};
						a.geo.imageMap && b.extend(f, {
							crs: L.CRS.Simple
						}),
						this._leaflet = this._leaflet || L.map(c, f),
						this._leaflet.on("zoom", d, this._leaflet),
						this._leaflet.vanchart = this,
						b.setDomBackground(c, {
							backgroundColor: a.backgroundColor,
							borderColor: a.borderColor,
							borderWidth: a.borderWidth,
							borderRadius: a.borderRadius,
							shadow: a.shadow
						});
						var h = document.createElement("div");
						h.setAttribute("class", "leaflet-pane leaflet-map-pane"),
						c.appendChild(h),
						c = this._leaflet._controlContainer.getElementsByTagName("div")[0]
					}
					return c
				},
				refresh: function (a) {
					var b = this.coordinateSys;
					if (a.geo && b.type != g.GEO || !a.geo && b.type == g.GEO) {
						this.remove();
						var c = this.vancharts.dom;
						c.className = "",
						this.initialize(a, c, this.vancharts)
					} else
						this._init(a), this._refreshOptions()
				},
				refreshRestore: function () {
					this.currentOption = b.clone(this.restoreOption),
					this.currentOption.state = g.STATE_RESTORE_REFRESH,
					this.scale = 1,
					this._refreshOptions()
				},
				isInitOrRestoreState: function () {
					return this.currentOption.state == g.STATE_INIT || this.currentOption.state == g.STATE_RESTORE_REFRESH
				},
				isChangeDataState: function () {
					return this.currentOption.state == g.STATE_CHANGE_DATA_REFRESH
				},
				isZoomRefreshState: function () {
					return this.currentOption.state == g.STATE_ZOOM_REFRESH
				},
				dealAxisZoom: function (a, c) {
					var d = this.getChart(g.BUBBLE_CHART);
					if (d && d.isForceBubble()) {
						var e = d.isUpdateWithForce();
						e && d.render.force.stop();
						var f = this.getPlotBounds(),
						h = Math.min(a[0], c[0]) - f.x,
						i = Math.min(a[1], c[1]) - f.y,
						j = Math.abs(a[0] - c[0]),
						k = Math.abs(a[1] - c[1]),
						l = Math.min(f.width / j, f.height / k),
						m = f.width / l,
						n = f.height / l,
						o = (f.width - m) / 2 - h,
						p = (f.height - n) / 2 - i,
						q = d.getVisibleChartData();
						q.forEach(function (a) {
							a.points.forEach(function (a) {
								a.radius *= l;
								var b = a.x + o,
								c = a.y + p;
								if (b -= f.width / 2, c -= f.height / 2, a.x = b * l + f.width / 2 - o, a.y = c * l + f.height / 2 - p, e || (a.posX = a.x, a.posY = a.y), a.labelContent && a.labelDim) {
									var d = a.radius;
									a.labelDim.width > 2 * d || a.labelDim.height > 2 * d ? a.labelPos = null : a.labelPos = {
										x: -a.labelDim.width / 2 + (e ? 0 : a.posX),
										y: -a.labelDim.height / 2 + (e ? 0 : a.posY)
									}
								}
							})
						}),
						this.scale = l * b.pick(this.scale, 1),
						d.render.scaleRender()
					} else {
						this.currentOption.state = g.STATE_ZOOM_REFRESH;
						var r = this.currentOption.zoom.zoomType;
						this.components.xAxis && -1 != r.indexOf("x") && this.components.xAxis.axisZoom(a, c),
						this.components.yAxis && -1 != r.indexOf("y") && this.components.yAxis.axisZoom(a, c),
						this.layoutComponentsAndCharts()
					}
				},
				refreshIncreaseOrder: function () {
					this.currentOption.orderType = g.ASCENDING,
					this.layoutComponentsAndCharts()
				},
				refreshDecreaseOrder: function () {
					this.currentOption.orderType = g.DESCENDING,
					this.layoutComponentsAndCharts()
				},
				_refreshOptions: function () {
					this.series = [],
					this.colorMap = {};
					for (var a, c, d, h = this.currentOption, i = this.coordinateSys, k = 0; k < l.length; k++)
						c = l[k], d = this.components[c], h[c] && this._isComponentEnabled(h[c]) && i.accept(c) ? d ? d.refresh(h) : (a = e.get(m.indexOf(c) > -1 ? g.AXIS_COMPONENT : c), d = new a(this, h, c), this.components[c] = d) : d && (d.remove(), this.components[c] = null, delete this.components[c]);
					var o,
					p = h.chartType || g.LINE_CHART;
					this.totalSeriesCount = 0;
					for (var k = 0, q = h.series.length; q > k; k++) {
						var r = h.series[k],
						s = r.type || p,
						t = -1 != s.toLowerCase().indexOf(g.MAP_CHART) ? g.MAP_CHART : s;
						if (o = f.get(t)) {
							var u = this.charts[t];
							u ? u.refresh(h) : (u = new o(this, h, t), this.charts[t] = u),
							r.type = s,
							this.series.push(new j(u, r))
						}
					}
					this.series.originSeries = h.series;
					var v = -1 != p.toLowerCase().indexOf(g.MAP_CHART),
					w = g.MAP_CHART;
					if (v) {
						var x = this.charts[w],
						y = f.get(w);
						x ? x.refresh(h) : y && (this.charts[w] = new y(this, h, w))
					}
					var z = n + (h.padding ? h.padding : 0);
					this.bounds = b.makeBounds(z, z, this.width - 3 * z, this.height - 3 * z);
					var A = this.components[g.ZOOM_COMPONENT];
					A && (A.doLayout(), A.remove());
					var x = this.charts[g.MAP_CHART];
					x && x.initLayerInfo(),
					this.plotBounds = this.bounds,
					this.refreshComponentsAndSeries()
				},
				_isValidPoint: function (a, b) {
					return !this._isBubbleAndNegative(b) && !this._isNullPoint(b) && !this._isOutRangeLegend(a, b)
				},
				_isBubbleAndNegative: function (a) {
					var b = a.series.type == g.BUBBLE_CHART,
					c = !a.displayNegative && a.size < 0;
					return b && c
				},
				_isNullPoint: function (a) {
					var b = a.series.type == g.BUBBLE_CHART && ("-" == a.size || a.isNull),
					c = a.series.type == g.SCATTER_CHART && a.isNull;
					return b || c
				},
				_isOutRangeLegend: function (a, c) {
					return !!a && !a.getColorWithSize(b.hasDefined(c.size) ? c.size : c.value)
				},
				refreshComponentsAndSeries: function () {
					this.hoverPoint = null,
					this.hoverSeries = null;
					for (var a in this.components)
						this.components[a].initAttributesWithSeries();
					var b = this.charts[g.MAP_CHART],
					c = this.components[g.RANGE_LEGEND_COMPONENT];
					if (!b) {
						var d = this;
						this.series.forEach(function (a) {
							a.points = a.points.filter(function (a) {
									return d._isValidPoint(c, a)
								})
						})
					}
					this.layoutComponentsAndCharts()
				},
				layoutComponentsAndCharts: function () {
					if (this.currentOption.orderType)
						for (var a in this.charts)
							this.charts[a].orderData();
					this.bounds = b.clone(this.plotBounds);
					for (var c in this.components)
						c != g.ZOOM_COMPONENT && this.components[c].doLayout();
					var d = this.components;
					[g.Y_AXIS_COMPONENT, g.X_AXIS_COMPONENT, g.DATA_SHEET_COMPONENT].forEach(function (a) {
						var b = d[a];
						b && b.fixBoundsByPlot()
					}),
					[g.GAUGE_AXIS_COMPONENT, g.RADIUS_AXIS_COMPONENT, g.ANGLE_AXIS_COMPONENT].forEach(function (a) {
						var b = d[a];
						b && b.calculateTickData()
					}),
					[g.Y_AXIS_COMPONENT, g.X_AXIS_COMPONENT].forEach(function (a) {
						var b = d[a];
						b && b.dealOnZero()
					}),
					[g.ZOOM_COMPONENT].forEach(function (a) {
						var b = d[a];
						b && b.fixBoundsByPlot()
					}),
					this.plotOriginalBounds = this.plotOriginalBounds || b.clone(this.bounds),
					this._buildStacked(this.series);
					for (var a in this.charts)
						this.charts[a].getRender() && this.charts[a].doLayout();
					this.handler.initTargets();
					var e = this.charts[g.MAP_CHART],
					f = this.components[g.RANGE_LEGEND_COMPONENT];
					e && f && this.series.forEach(function (a) {
						a.points = a.points.filter(function (a) {
								a.points && a.points.length && (a = a.points[0]);
								var c = f.getColorWithSize(b.hasDefined(a.size) ? a.size : a.value);
								return c || a.drillSeries
							})
					}),
					this.render.render()
				},
				_buildStacked: function (a) {
					var b = {};
					a.map(function (a) {
						a.type !== g.SCATTER_CHART && a.type !== g.BUBBLE_CHART && a.visible && a.baseAxis && a.points.map(function (c) {
							var d = [a.baseAxis.componentType, a.baseAxis.getPosition(), a.stack || (a.isValueAxisBased() ? a.name : a.type), c.category].join("");
							b[d] || (b[d] = []),
							b[d].push(c)
						})
					});
					for (var c in b)
						this._calculatePercentage(b[c]), b[c][0].series.chart._mergeTooltipAttributes(b[c]), this._calculateStackedValue(b[c])
				},
				_calculatePercentage: function (a, b) {
					b = b || "value";
					var c = 0;
					a.forEach(function (a) {
						c += Math.abs(a[b])
					}),
					c = c > 0 ? c : 1,
					a.forEach(function (a) {
						a.setPercentage(Math.abs(a[b]) / c)
					})
				},
				_calculateStackedValue: function (a) {
					if (a && a.length)
						for (var b = a[0].series.stackByPercent, c = a[0].series.stack || b, d = a[0].series.valueAxis, e = d ? d.getStartPosValue() : 0, f = d ? -d.getStartPosValue() : 0, g = 0, h = a.length; h > g; g++) {
							var i = a[g];
							if (c) {
								var j = b ? i.percentage : i.value;
								i.y = j,
								j >= 0 ? (i.y0 = e, e += j) : (i.y0 = f, f += j)
							} else
								i.y = b ? i.percentage : i.value, i.y0 = d ? d.getStartPosValue() : 0
						}
				},
				_init: function (a) {
					if (a.series = a.series && a.series.length ? a.series : [{}
							], a.series.forEach(function (a) {
							a.data = a.data || []
						}), this.themeConfig = this._normalizeOption(this._mergeThemeConfig(a), a), this.restoreOption = c.merge(b.clone(a), this.themeConfig, !1), this.restoreOption.chartType == g.SCATTER_CHART || this.restoreOption.chartType == g.BUBBLE_CHART) {
						var d = this.restoreOption.tools.sort || {};
						d.enabled = !1
					}
					this.restoreOption.plotOptions.inverted && (this.restoreOption.zoom && this.restoreOption.zoom.zoomTool && (this.restoreOption.zoom.zoomTool.visible = !1), this.restoreOption.dataSheet && (this.restoreOption.dataSheet = !1)),
					this.currentOption = b.clone(this.restoreOption)
				},
				renderOnlyCharts: function () {
					var a = this.getChart(g.BUBBLE_CHART);
					a && a.isUpdateWithForce() && a.render.force.stop();
					for (var c in this.charts)
						this.charts[c].getRender() && this.charts[c].doLayout();
					var d = this.getChartRenders();
					if (d.forEach(function (a) {
							a.filterRender()
						}), !b.isSupportSVG()) {
						var e = this.components;
						l.forEach(function (a) {
							if (e[a]) {
								var b = e[a];
								if (b.isFloat) {
									var c = b.getRender();
									c && c.render()
								}
							}
						})
					}
				},
				_getDomWidth: function (a) {
					var b = a.currentStyle || document.defaultView.getComputedStyle(a);
					return ((a.clientWidth || parseInt(b.width, 10)) - parseInt(b.paddingLeft, 10) - parseInt(b.paddingRight, 10)).toFixed(0) - 0
				},
				_getDomHeight: function (a) {
					var b = a.currentStyle || document.defaultView.getComputedStyle(a);
					return ((a.clientHeight || parseInt(b.height, 10)) - parseInt(b.paddingTop, 10) - parseInt(b.paddingBottom, 10)).toFixed(0) - 0
				},
				_normalizeOption: function (a, c) {
					return a = b.clone(a),
					m.map(function (b) {
						return c[b] ? (Array.isArray(c[b]) || (c[b] = [c[b]]), c[b].length ? a[b] = c[b].map(function () {
									return a[b]
								}) : a[b] && (c[b][0] = a[b]), null) : void 0
					}),
					a
				},
				_mergeThemeConfig: function (b) {
					var d = a("./theme/config"),
					e = a("./theme/default"),
					f = [],
					h = {};
					return c.merge(h, e, !0),
					b.chartType && (f.push(b.chartType), c.merge(h, d[b.chartType], !0)),
					b.series.map(function (a) {
						var b = a.type;
						b && -1 === f.indexOf(b) && (f.push(a), c.merge(h, d[b], !0))
					}),
					0 === f.length && c.merge(h, d[g.LINE_CHART], !0),
					h
				},
				_isComponentEnabled: function (a) {
					return !b.hasDefined(a.enabled) || a.enabled
				},
				getPlotBackgroundOption: function () {
					var a = this.currentOption;
					return {
						color: a.plotBackgroundColor,
						image: a.plotBackgroundImage,
						borderColor: a.plotBorderColor,
						borderWidth: a.plotBorderWidth,
						borderRadius: a.plotBorderRadius,
						plotShadow: a.plotShadow
					}
				},
				getChartBackgroundOption: function () {
					var a = this.currentOption,
					b = this.restoreOption.geo;
					return {
						color: b ? "" : a.backgroundColor,
						image: b ? "" : a.backgroundImage,
						borderColor: a.borderColor,
						borderWidth: b ? 0 : a.borderWidth,
						borderRadius: a.borderRadius,
						chartShadow: a.shadow
					}
				},
				getTrendLineOption: function () {
					for (var a = [], b = this.series, c = 0, d = b.length; d > c; c++) {
						var e = b[c],
						f = e.trendLine;
						if (f && e.visible) {
							var h = e.chart.getTrendLineXYValues(e),
							i = h[0],
							j = h[1],
							k = h[2];
							if (!(i.length <= 1)) {
								var l,
								m,
								n,
								o;
								if (k == g.TOP || k == g.BOTTOM) {
									var p = this._leastSquares(h[0], h[1]);
									l = i[0],
									n = p[0] * l + p[1],
									m = i[i.length - 1],
									o = p[0] * m + p[1]
								} else {
									var p = this._leastSquares(h[1], h[0]);
									n = j[0],
									l = p[0] * n + p[1],
									o = j[j.length - 1],
									m = p[0] * o + p[1]
								}
								a.push({
									x1: l,
									y1: n,
									x2: m,
									y2: o,
									trendLine: f
								})
							}
						}
					}
					return a
				},
				_leastSquares: function (a, b) {
					var c = function (a, b) {
						return a + b
					},
					d = 1 * a.reduce(c) / a.length,
					e = 1 * b.reduce(c) / b.length,
					f = a.map(function (a) {
							return Math.pow(a - d, 2)
						}).reduce(c),
					g = (b.map(function (a) {
							return Math.pow(a - e, 2)
						}).reduce(c), a.map(function (a, c) {
							return (a - d) * (b[c] - e)
						}).reduce(c)),
					h = g / f,
					i = e - d * h;
					return [h, i]
				},
				getMinMaxFromSeries: function () {
					var a = this.currentOption,
					b = [],
					c = a.series,
					d = a.chartType;
					if (a.geo)
						for (var e = {}, f = {}, h = (this.components[g.GEO_COMPONENT], 0), i = c.length; i > h; h++) {
							var j = c[h],
							k = j.type || d;
							if (j.data && j.data.length)
								if (k == g.AREA_MAP)
									for (var l = j.data, m = l.length - 1; m >= 0; m--) {
										var n = l[m];
										!e[n.name] && n.value && (e[n.name] = !0, b.push(n))
									}
								else
									j.data.forEach(function (a) {
										var c = a.lnglat ? a.lnglat.join(",") : a.name;
										f[k] && f[k][c] || !a.size && !a.value || (f[k] = f[k] || {}, f[k][c] = !0, b.push(a))
									})
						}
					else
						for (var h = c.length - 1; h >= 0; h--)
							c[h].data.forEach(function (a) {
								b.push(a)
							});
					return this._getMinMaxFromPoints(b)
				},
				_getMinMaxFromPoints: function (a) {
					if (!a.length)
						return [0, 0];
					var c = this.currentOption.plotOptions.force,
					d = Number.MAX_VALUE,
					e = -d;
					return a.forEach(function (a) {
						var f = b.hasDefined(a.size) ? a.size : a.value;
						c && (f = a.y),
						isNaN(parseFloat(f)) || (d = Math.min(f, d), e = Math.max(f, e))
					}),
					(isNaN(d) || isNaN(e) || d > e) && (d = 0, e = 100),
					[d, e]
				},
				getParentDom: function () {
					return this.dom
				},
				getDivParentDom: function () {
					return this.vancharts.dom
				},
				isInverted: function () {
					return !!this.getOptions().plotOptions.inverted
				},
				chartWidth: function () {
					return this.width
				},
				chartHeight: function () {
					return this.height
				},
				setPlotBounds: function (a) {
					this.bounds = a
				},
				getPlotClipBounds: function () {
					var a = 0,
					b = 0,
					c = this.bounds.width,
					d = this.bounds.height,
					e = {},
					f = [];
					return this.components.xAxis && (f = f.concat(this.components.xAxis.getAllAxis())),
					this.components.yAxis && (f = f.concat(this.components.yAxis.getAllAxis())),
					f.forEach(function (a) {
						var b = a.getPosition();
						a.isOnZero() || e[b] || (e[b] = a.getLineWidth())
					}),
					b = e[g.TOP] ? Math.ceil(e[g.TOP] / 2) : 0,
					d -= b,
					d = e[g.BOTTOM] ? d - Math.ceil(e[g.BOTTOM] / 2 - .5) : d,
					a = e[g.LEFT] ? Math.ceil(e[g.LEFT] / 2) : 0,
					c -= a,
					c = e[g.RIGHT] ? c - Math.ceil(e[g.RIGHT] / 2) : c, {
						x: a,
						y: b,
						width: c,
						height: d
					}
				},
				getPlotBounds: function () {
					return this.bounds
				},
				getChartBounds: function () {
					return b.makeBounds(0, 0, this.width, this.height)
				},
				xAxis: function (a) {
					a || (a = 0);
					var b = this.components.xAxis;
					return b ? b.getAxis(a) : null
				},
				yAxis: function (a) {
					a || (a = 0);
					var b = this.components.yAxis;
					return b ? b.getAxis(a) : null
				},
				polar: function (a) {
					a || (a = 0);
					var b = this.components.polar;
					return b ? b.getAxis(a) : null
				},
				angleAxis: function (a) {
					a || (a = 0);
					var b = this.components.angleAxis;
					return b ? b.getAxis(a) : null
				},
				radiusAxis: function (a) {
					a || (a = 0);
					var b = this.components.radiusAxis;
					return b ? b.getAxis(a) : null
				},
				gaugeAxis: function (a) {
					a || (a = 0);
					var b = this.components.gaugeAxis;
					return b ? b.getAxis(a) : null
				},
				getSharedAxis: function () {
					for (var a = [this.xAxis(), this.yAxis(), this.angleAxis()], b = 0; b < a.length; b++) {
						var c = a[b];
						if (c) {
							var d = 0;
							for (var e in c.sharedPoints) {
								++d;
								break
							}
							if (d)
								return c
						}
					}
					return null
				},
				getRender: function () {
					return this.render
				},
				getChartRenders: function () {
					var a = [];
					for (var b in this.charts) {
						var c = this.charts[b].getRender();
						c && a.push(c)
					}
					return a
				},
				getComponentRenders: function () {
					var a = [],
					b = this.components;
					return l.forEach(function (c) {
						if (b[c]) {
							var d = b[c].getRender();
							d && a.push(d)
						}
					}),
					a
				},
				getFixedComponentRenders: function () {
					var a = [],
					b = this.components;
					return l.forEach(function (c) {
						if (b[c]) {
							var d = b[c];
							if (!d.isFloat) {
								var e = d.getRender();
								e && a.push(e)
							}
						}
					}),
					a
				},
				getFloatComponentRenders: function () {
					var a = [],
					b = this.components;
					return l.forEach(function (c) {
						if (b[c]) {
							var d = b[c];
							if (d.isFloat) {
								var e = d.getRender();
								e && a.push(e)
							}
						}
					}),
					a
				},
				getToolbarWidth: function () {
					return this.components[g.TOOLBAR_COMPONENT] ? this.components[g.TOOLBAR_COMPONENT].getToolbarWidth() : 0
				},
				getToolbarHeight: function () {
					var a = this.components[g.TITLE_COMPONENT];
					return !this.components[g.TOOLBAR_COMPONENT] || a && !a.isFloat ? 0 : this.components[g.TOOLBAR_COMPONENT].getToolbarHeight()
				},
				getTooltip: function () {
					return this.components.tooltip
				},
				getComponent: function (a) {
					return this.components[a]
				},
				getChart: function (a) {
					return this.charts[a]
				},
				getIDPrefix: function () {
					return this.ID_PREFIX
				},
				getBodyClipID: function () {
					return "bodyClip" + this.getIDPrefix()
				},
				getOptions: function () {
					return this.currentOption
				},
				getDefaultSeriesColor: function (a) {
					if (a += "", !this.colorMap[a]) {
						var b = this.currentOption.colors,
						c = 0;
						for (var d in this.colorMap)
							++c;
						this.colorMap[a] = b[c % b.length]
					}
					return this.colorMap[a]
				},
				remove: function () {
					this.render.remove(),
					this._leaflet && this._leaflet.remove(),
					this.handler.offEvents(),
					this.render = this._leaflet = this.handler = null,
					this.components[g.TOOLTIP_COMPONENT] && this.components[g.TOOLTIP_COMPONENT].remove()
				}
			});
		return o
	}),
	c("VanCharts", ["require", "./utils/BaseUtils", "./Constants", "./VanChart"], function (a) {
		function b(a) {
			var b = a.getAttribute(e.INSTANCES_KEY);
			if (b || (b = e.INSTANCES_KEY + g++, a.setAttribute(e.INSTANCES_KEY, b)), h[b]) {
				var d = h[b].svgRoot;
				d && d.remove()
			} else {
				var f = new c(a);
				h[b] = f
			}
			return h[b]
		}
		function c(a) {
			this.dom = a,
			this.charts = []
		}
		var d = a("./utils/BaseUtils"),
		e = a("./Constants"),
		f = a("./VanChart"),
		g = 0,
		h = Object.create(null);
		return c.prototype = {
			constructor: c,
			setOptions: function (a) {
				d.isArray(a) || (a = [a]),
				this.options = a;
				for (var b = 0, c = a.length; c > b; b++)
					this.charts.push(new f(a[b], this.dom, this))
			},
			resize: function (a) {
				this.clear(),
				this.charts = [],
				a = a || this.options,
				this.options = a,
				a && this.setOptions(a)
			},
			setData: function (a) {
				d.isArray(a) || (a = [a]),
				this.options = a,
				d.isSupportSVG() ? this.charts.forEach(function (b, c) {
					a[c].state = e.STATE_CHANGE_DATA_REFRESH,
					b.refresh(a[c])
				}) : this.resize(a)
			},
			clear: function () {
				for (var a = 0, b = this.charts.length; b > a; a++)
					this.charts[a].remove(), this.charts[a] = null
			},
			addHiddenStyle: function () {
				function a(a) {
					var b = document.createElement("style"),
					c = document.head || document.getElementsByTagName("head")[0];
					b.setAttribute("type", "text/css"),
					b.styleSheet ? b.styleSheet.cssText = a : b.appendChild(document.createTextNode(a)),
					c.appendChild(b)
				}
				var b = "." + e.CHART_HIDE + " {display:none;}";
				a(b)
			}
		}, {
			init: b
		}
	}),
	c("utils/BaseUtils", ["require", "./ColorUtils", "../Constants", "VanCharts"], function (a) {
		function b() {
			for (var a, b = arguments.length, c = 0; b > c; c++)
				if (a = arguments[c], "undefined" != typeof a && null !== a)
					return a;
			return null
		}
		function c(a) {
			return "[object Array]" === Object.prototype.toString.apply(a)
		}
		function d(a, b) {
			b = p(b);
			for (var c in b)
				a.style(c, b[c])
		}
		function e(a, c, d) {
			a = b(a, "");
			var e = document.createElement("div");
			document.body.appendChild(e),
			e.style.visibility = "hidden",
			e.style.whiteSpace = "nowrap",
			e.style.position = "absolute";
			var f = "12px";
			for (var g in c)
				"function" != typeof c[g] && "color" != g && (e.style[g] = c[g]), "fontSize" == g && (f = c[g]);
			f = -1 != f.indexOf("pt") ? 4 * parseFloat(f) / 3 : parseFloat(f),
			e.innerHTML = a;
			var h = e.offsetWidth || 0,
			i = e.offsetHeight || 0;
			return document.body.removeChild(e), {
				width: h,
				height: i
			}
		}
		function f(a, c, d) {
			a = b(a, "");
			var e = document.createElement("div");
			document.body.appendChild(e),
			e.style.visibility = "hidden",
			e.style.whiteSpace = "normal",
			e.style.position = "absolute",
			e.style.wordWrap = "break-word";
			for (var f in c)
				"function" != typeof c[f] && "color" != f && (e.style[f] = c[f]);
			d ? e.innerHTML = a : e.textContent ? e.textContent = a : e.innerText = a;
			var g = e.offsetWidth || 0,
			h = e.offsetHeight || 0;
			return document.body.removeChild(e), {
				width: g,
				height: h
			}
		}
		function g(a, b) {
			var c = [];
			if (b.backgroundColor)
				if ("string" == typeof b.backgroundColor)
					if (C())
						c.push("background-Color:" + b.backgroundColor);
					else {
						var d = ma.colorToHexAlpha(b.backgroundColor);
						c.push("background-Color:" + d.hex),
						c.push("filter:alpha(opacity=" + d.alpha + ")")
					}
				else if ("object" == typeof b.backgroundColor) {
					var e = b.backgroundColor,
					f = ma.colorToHex(e.startColor),
					g = ma.colorToHex(e.endColor),
					h = "left",
					i = "left top",
					j = "right top",
					k = 1;
					e.x1 == e.x2 && (h = "top", i = "left top", j = "left bottom", k = 0),
					c.push("background: -ms-linear-gradient(" + h + ", " + f + ", " + g + ")"),
					c.push("background-image: -moz-linear-gradient(" + h + ", " + f + ", " + g + ")"),
					c.push("background-image: -webkit-gradient(linear, " + i + ", " + j + ", color-stop(0, " + f + "), color-stop(1, " + g + "))"),
					c.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=" + f + ", endColorstr=" + g + ", GradientType=" + k + ")")
				}
			null != b.borderWidth && c.push("border-width:" + b.borderWidth + "px"),
			null != b.borderColor && c.push("border-color:" + b.borderColor),
			null != b.borderRadius && (c.push("border-radius:" + b.borderRadius + "px"), c.push("-moz-border-radius:" + b.borderRadius + "px"), c.push("-webkit-border-radius:" + b.borderRadius + "px"), c.push("-o-border-radius:" + b.borderRadius + "px")),
			b.shadow && c.push("box-shadow:1px 1px 2px rgba(0,0,0,0.2)"),
			a.style.cssText += c.join(";") + ";"
		}
		function h(a) {
			var b = a.fontSize || "12px";
			return -1 != b.indexOf("pt") ? 4 * parseFloat(b) / 3 : parseFloat(b)
		}
		function i(a) {
			return a._vanchart_id = a._vanchart_id || ++oa,
			a._vanchart_id
		}
		function j() {
			return !1
		}
		function k(a) {
			var b,
			c,
			d,
			e;
			for (c = 1, d = arguments.length; d > c; c++) {
				e = arguments[c];
				for (b in e)
					a[b] = e[b]
			}
			return a
		}
		function l(a, b) {
			var c = [];
			c.push("transform:rotate(" + b + "deg)"),
			c.push("-ms-transform:rotate(" + b + "deg)"),
			c.push("-webkit-transform:rotate(" + b + "deg)"),
			c.push("-moz-transform:rotate(" + b + "deg)"),
			c.push("-o-transform:rotate(" + b + "deg)");
			var d = Math.cos(F(b)),
			e = Math.sin(F(b));
			if (!C()) {
				var f = b ? ["progid:DXImageTransform.Microsoft.Matrix(M11=", d, ", M12=", -e, ", M21=", e, ", M22=", d, ", sizingMethod='auto expand')"].join("") : "none";
				c.push("filter:" + f)
			}
			a.style.cssText += c.join(";") + ";"
		}
		function m(a, b, c, d) {
			if (!a)
				return "";
			a += "",
			d = d || 0,
			c -= 2 * d;
			for (var f = [], g = 0, h = a.length; h > g; ) {
				for (var i = g; e(a.substring(i, g + 1), b, !1).width < c && (g++, !(g >= h)); );
				if (i == g)
					return [];
				f.push(a.substring(i, g))
			}
			return f
		}
		function n(a, b, c, d) {
			var f = e(a, b, c),
			g = Math.abs(F(d || 0)),
			h = f.width * Math.cos(g) + f.height * Math.sin(g),
			i = f.width * Math.sin(g) + f.height * Math.cos(g);
			return {
				width: h,
				height: i
			}
		}
		function o(a) {
			if ("object" == typeof a && null !== a) {
				var b = a;
				if (c(a)) {
					b = [];
					for (var d = 0, e = a.length; e > d; d++)
						b[d] = o(a[d])
				} else {
					b = {};
					for (var f in a)
						a.hasOwnProperty(f) && (b[f] = o(a[f]))
				}
				return b
			}
			return a
		}
		function p(a) {
			var b = {};
			for (var c in a)
				if (pa[c] && (b[pa[c]] = a[c]), "color" == c && (b.color = a[c]), "fontSize" == c) {
					var d = a[c];
					-1 != d.indexOf("pt") && (d = 4 * parseFloat(d) / 3, b["font-size"] = d + "px")
				}
			return b
		}
		function q(a) {
			if (!(a instanceof Array))
				return [a, a, a, a];
			switch (a.length + "") {
			case "4":
				return a;
			case "3":
				return [a[0], a[1], a[2], a[1]];
			case "2":
				return [a[0], a[1], a[0], a[1]];
			case "1":
				return [a[0], a[0], a[0], a[0]];
			case "0":
				return [0, 0, 0, 0]
			}
		}
		function r(a, b) {
			return b % 2 == 0 ? Math.round(a) : Math.round(a - .5) + .5
		}
		function s(a, b, c, d, e) {
			return e = e || 0,
			a = r(a, e),
			b = r(b, e),
			c = Math.round(c),
			d = Math.round(d), {
				x: a,
				y: b,
				width: c,
				height: d
			}
		}
		function t(a, b) {
			var c = [];
			if (a && a.length)
				for (var d = 0, e = a.length; e > d; d++)
					c.push(a[d]);
			if (b && b.length)
				for (var d = 0, e = b.length; e > d; d++)
					c.push(b[d]);
			return c
		}
		function u(a) {
			a && a.parentNode && a.parentNode.appendChild(a)
		}
		function v(a) {
			a && a.parentNode && a.parentNode.insertBefore(a, a.parentNode.firstChild)
		}
		function w(a) {
			a.ownerSVGElement.appendChild(a)
		}
		function x(a) {
			a.ownerSVGElement.appendChild(a, a.ownerSVGElement.firstChild)
		}
		function y(a, b) {
			return a.x <= b.x && a.y <= b.y && a.x + a.width >= b.x + b.width && a.y + a.height >= b.y + b.height
		}
		function z(a, b) {
			if (!a || !b)
				return !1;
			var c = Math.max(a.x, b.x),
			d = Math.max(a.y, b.y),
			e = Math.min(a.x + a.width, b.x + b.width),
			f = Math.min(a.y + a.height, b.y + b.height);
			return e >= c && f >= d
		}
		function A(a, b) {
			return !y(a, b) && !z(a, b)
		}
		function B(a, c) {
			var d = b(c.x || c[0]),
			e = b(c.y || c[1]);
			return a.x < d && a.x + a.width > d && a.y < e && a.y + a.height > e
		}
		function C() {
			return !!window.SVGSVGElement
		}
		function D(a, b, c) {
			for (var d = Math.min(a, b), e = Math.max(a, b), f = e - d; d > c; )
				c += f;
			for (; c > e; )
				c -= f;
			return c
		}
		function E(a, b) {
			return Math.min(Math.max(a, b[0]), b[1])
		}
		function F(a) {
			return Math.PI * (a / 180)
		}
		function G(a) {
			return 180 * a / Math.PI
		}
		function H(a) {
			return null == a || void 0 == a ? null : "string" == typeof a ? new Function("return " + a)() : a
		}
		function o(a) {
			if (null == a || "object" != typeof a)
				return a;
			if (a instanceof Date) {
				var b = new Date;
				return b.setTime(a.getTime()),
				b
			}
			if (a instanceof Array) {
				for (var b = [], c = 0, d = a.length; d > c; ++c)
					b[c] = o(a[c]);
				return b
			}
			if (a instanceof String)
				return new String(a);
			if (a instanceof Object) {
				var b = {};
				for (var e in a)
					a.hasOwnProperty(e) && (b[e] = o(a[e]));
				return b
			}
		}
		function I(a) {
			var b = "" === a || null === a || void 0 === a;
			return b
		}
		function J(a) {
			return void 0 == a || null == a
		}
		function K(b) {
			var c = a("VanCharts"),
			d = document.getElementsByTagName("body")[0],
			e = document.createElement("div");
			e.style.position = "absolute",
			e.style.display = "inline",
			e.style.top = "0px",
			e.style.left = "0px",
			e.style.width = "100%",
			e.style.height = "100%",
			e.style.zIndex = 1e3,
			C() ? e.style.background = "rgba(0,0,0,0.3)" : (e.style.backgroundColor = "black", e.style.filter = "alpha(opacity=30)"),
			d.appendChild(e);
			var f = e.clientWidth,
			g = e.clientHeight,
			h = 970,
			i = 600,
			j = (f - 970) / 2,
			k = (g - 600) / 2,
			l = document.createElement("div");
			l.style.position = "absolute",
			l.style.display = "inline",
			l.style.top = k + "px",
			l.style.left = j + "px",
			l.style.width = h + "px",
			l.style.height = i + "px",
			l.style.zIndex = 1001,
			C() ? (l.style.background = "white", l.style.boxShadow = "0px 4px 50px rgba(0,0,0,0.5)") : (l.style.backgroundColor = "white", l.style.filter = "alpha(opacity=100)"),
			d.appendChild(l),
			e.onclick = function (a) {
				d.removeChild(e),
				d.removeChild(l)
			},
			l.onclick = function (a) {
				a = a || window.event,
				a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0
			};
			var m = c.init(l),
			n = o(b);
			n.tools.exitFullScreen = n.tools.fullScreen,
			n.tools.fullScreen = null,
			n.legend && (n.legend.initState = !1),
			m.setOptions(n),
			l.style.top = k + "px",
			l.style.left = j + "px",
			l.boxDiv = e
		}
		function L(a) {
			var b = a.parentNode;
			b && (b.removeChild(a), a.boxDiv && b.removeChild(a.boxDiv))
		}
		function M() {
			return !!(window.ActiveXObject || "ActiveXObject" in window)
		}
		function N(a) {
			return null == a || void 0 == a
		}
		function O(a) {
			return !N(a)
		}
		function P(a, b) {
			if (!a.length)
				return -1;
			for (var c = 0, d = a.length; d > c; c++)
				if (a[c] == b)
					return c;
			return -1
		}
		function Q() {
			var a = 0,
			c = 0,
			d = 0,
			e = 0;
			if (2 == arguments.length) {
				var f = arguments[0],
				g = arguments[1];
				a = b(f.x, f[0]),
				c = b(f.y, f[1]),
				d = b(g.width, g[0]),
				e = b(g.height, g[1])
			} else
				4 == arguments.length && (a = arguments[0], c = arguments[1], d = arguments[2], e = arguments[3]);
			return {
				x: a,
				y: c,
				width: d,
				height: e
			}
		}
		function R(a, c) {
			var d = b(a.x, a[0]),
			e = b(a.y, a[1]),
			f = b(c.x, c[0]),
			g = b(c.y, c[1]),
			h = d - f,
			i = e - g;
			return Math.sqrt(h * h + i * i)
		}
		function S(a) {
			return a.width <= 0 || a.height <= 0
		}
		function T(a, b) {
			return Math.log(b) / Math.log(a)
		}
		function U(a) {
			var b = 0;
			if (a > 0 && 1 > a)
				for (; 1 > a; )
					a = X(a, 10), b--;
			else if (a >= 10)
				for (; a >= 10; )
					a = W(a, 10), b++;
			return b
		}
		function V(a, b) {
			var c = 0,
			d = 0;
			try {
				c = a.toString().split(".")[1].length
			} catch (a) {}
			try {
				d = b.toString().split(".")[1].length
			} catch (a) {}
			var e = Math.pow(10, Math.max(c, d));
			return (Math.round(a * e) + Math.round(b * e)) / e
		}
		function W(a, b) {
			var c = a.toString(),
			d = b.toString(),
			e = 0;
			try {
				e = d.split(".")[1].length
			} catch (a) {}
			try {
				e -= c.split(".")[1].length
			} catch (a) {}
			return (c.replace(".", "") - 0) / (d.replace(".", "") - 0) * Math.pow(10, e)
		}
		function X(a, b) {
			var c = 0,
			d = a.toString(),
			e = b.toString();
			try {
				c += d.split(".")[1].length
			} catch (a) {}
			try {
				c += e.split(".")[1].length
			} catch (a) {}
			return Number(d.replace(".", "")) * Number(e.replace(".", "")) / Math.pow(10, c)
		}
		function Y(a) {
			var b = [];
			for (var c in a)
				b.push(a[c]);
			return b
		}
		function Z(a) {
			"string" == typeof a && (a = new Date(Date.parse(a.replace(/-|\./g, "/"))));
			var b = new Date("1970/01/01");
			return "number" == typeof a ? a : a.getTime() - b.getTime()
		}
		function $(a) {
			var b = new Date("1970/01/01");
			return a = a || 0,
			new Date(a + b.getTime())
		}
		function _(a) {
			var b = a;
			return "string" == typeof b ? b = new Date(Date.parse(b.replace(/-|\./g, "/"))) : "number" == typeof b && (b = new Date(b)),
			b
		}
		function aa(a) {
			var c = b(a.x, a[0]),
			d = b(a.y, a[1]);
			return C() ? "translate(" + c + "," + d + ")" : "t" + c + "," + d
		}
		function ba(a) {
			var b = na.NULL_MARKER + na.CIRCLE + na.SQUARE + na.DIAMOND + na.TRIANGLE + na.CIRCLE_HOLLOW + na.SQUARE_HOLLOW + na.DIAMOND_HOLLOW + na.TRIANGLE_HOLLOW;
			return -1 == b.indexOf(a)
		}
		function ca(a) {
			return a.symbol == na.NULL_MARKER
		}
		function da(a) {
			var b = [na.CIRCLE, na.CIRCLE_HOLLOW, na.SQUARE, na.SQUARE_HOLLOW, na.DIAMOND, na.DIAMOND_HOLLOW, na.TRIANGLE, na.TRIANGLE_HOLLOW];
			return b[a % b.length]
		}
		function ea(a, b, c) {
			a.attachEvent ? a.attachEvent("on" + b, c) : a.addEventListener && a.addEventListener(b, c, !1)
		}
		function fa(a) {
			return a = a.trim ? a.trim() : a.replace(/^\s+|\s+$/g, ""),
			a.split(/\s+/)
		}
		function ga(a, b, c) {
			a.removeEventListener ? a.removeEventListener(b, c, !1) : a.attachEvent && a.detachEvent("on" + b, c)
		}
		function ha(a) {
			return Math.abs(a) < 1e-6 ? 0 : a
		}
		function ia(a, b) {
			var c = a.originalEvent || a;
			c = c.touches ? c.touches.length ? c.touches.item(0) : c.changedTouches[0] : c;
			var d,
			e,
			f = document.documentElement,
			g = b.getBoundingClientRect(),
			h = g.top + (window.pageYOffset || f.scrollTop) - (f.clientTop || 0),
			i = g.left + (window.pageXOffset || f.scrollLeft) - (f.clientLeft || 0);
			return void 0 == c.pageX ? (d = Math.max(c.x, c.clientX - i), e = c.y) : (d = c.pageX - i, e = c.pageY - h),
			[d, e]
		}
		function ja() {
			var a = window.document;
			return a && void 0 !== a.documentElement.ontouchstart
		}
		function ka(a, b) {
			return [a * Math.sin(b), -a * Math.cos(b)]
		}
		function la(a, b) {
			return (2 * Math.PI - (Math.atan2(b, a) - Math.PI / 2)) % (2 * Math.PI)
		}
		var ma = a("./ColorUtils"),
		na = a("../Constants"),
		oa = 0,
		pa = {
			color: "fill",
			font: "font",
			fontFamily: "font-family",
			fontSize: "font-size",
			fontStretch: "font-stretch",
			fontStyle: "font-style",
			fontVariant: "font-variant",
			fontWeight: "font-weight",
			letterSpacing: "letter-spacing",
			lineHeight: "line-height",
			quotes: "quotes",
			textAlign: "text-align",
			textDecoration: "text-decoration",
			textIndent: "text-indent",
			textShadow: "text-shadow",
			textTransform: "text-transform",
			whiteSpace: "white-space",
			wordSpacing: "word-spacing",
			padding: "padding"
		},
		qa = {
			getMousePos: ia,
			makeTranslate: aa,
			clone: o,
			date2int: Z,
			int2date: $,
			object2date: _,
			log: T,
			getOrder: U,
			accAdd: V,
			accDiv: W,
			accMul: X,
			dealFloatPrecision: ha,
			isEmpty: I,
			isEmptyBounds: S,
			objectToArray: Y,
			pick: b,
			isNull: J,
			getTextDimension: e,
			getTextHeight: h,
			splitText: m,
			getTextDimensionWithRotation: n,
			isArray: c,
			indexInArray: P,
			cssNormalization: p,
			reformCssArray: q,
			rectSubPixelOpt: s,
			lineSubPixelOpt: r,
			addArray: t,
			toFront: u,
			toBack: v,
			toFrontOfAll: w,
			toBackOfAll: x,
			containsRect: y,
			rectangleOverlapped: z,
			outsideRect: A,
			containsPoint: B,
			isSupportSVG: C,
			setTextStyle: d,
			divRotate: l,
			makeValueInRange: D,
			getValueInDomain: E,
			toRadian: F,
			toDegree: G,
			getFormatterFunction: H,
			showLightBox: K,
			hideLightBox: L,
			isIE: M,
			hasTouch: ja,
			hasNotDefined: N,
			hasDefined: O,
			distance: R,
			makeBounds: Q,
			isImageMarker: ba,
			isNullMarker: ca,
			getDefaultMarkerSymbol: da,
			addEvent: ea,
			removeEvent: ga,
			getArcPoint: ka,
			getTextWrapDimension: f,
			stamp: i,
			splitWords: fa,
			falseFn: j,
			extend: k,
			setDomBackground: g,
			getArcByPoint: la
		};
		return window.VanUtils = qa,
		qa
	}),
	c("chart/BaseChart", ["require", "../utils/BaseUtils", "../utils/QueryUtils", "../utils/ColorUtils", "../component/Base", "../Constants", "../component/Series", "../utils/Formatter", "../theme/options"], function (a) {
		function b(a) {
			return .5 > a ? Math.sqrt(a / 2) : 1 - Math.sqrt(2 - 2 * a) / 2
		}
		var c = a("../utils/BaseUtils"),
		d = a("../utils/QueryUtils"),
		e = a("../utils/ColorUtils"),
		f = a("../component/Base"),
		g = a("../Constants"),
		h = (a("../component/Series"), a("../utils/Formatter")),
		i = a("../theme/options"),
		j = "{SERIES}",
		k = "{X}",
		l = "{Y}",
		m = "{SIZE}",
		n = "NAME",
		o = "CATEGORY",
		j = "SERIES",
		p = "VALUE",
		q = "PERCENT",
		r = f.extend({
				_buildLocationMap: function () {
					for (var a = {}, b = this.vanchart.series, c = 0; c < b.length; c++) {
						var d = b[c];
						if (d.chart == this) {
							var e = d.baseAxis,
							f = e.getPosition(),
							g = e.getAxisIndex();
							a[f] = a[f] || [],
							a[f][g] = a[f][g] || [],
							d.visible && a[f][g].push(d)
						}
					}
					var h = {},
					i = {};
					for (var j in a) {
						for (var k = [], l = a[j] || [], g = 0; g < l.length; g++) {
							var m = l[g];
							if (m && m.length)
								for (var n = 0, o = 0; o < m.length; o++) {
									var d = m[o],
									p = d.name;
									null != d.stack && void 0 != d.stack && (p = d.stack + ""),
									d.stack && null != h[p] && void 0 != h[p] ? k[g][h[p]].push(d) : (h[p] = n, k[g] = k[g] || [], k[g][n] = [d], n++)
								}
						}
						var q = [];
						k.forEach(function (a) {
							a && q.push(a)
						}),
						i[j] = q
					}
					return i
				},
				_calculateValueBasedPercentageAndTooltip: function (a) {
					for (var b = 0, c = a.length; c > b; b++) {
						for (var d = a[b], e = {}, f = 0, g = d.length; g > f; f++)
							for (var h = d[f].points, i = 0, j = h.length; j > i; i++) {
								var k = h[i],
								l = k.category;
								e[l] = e[l] || [],
								e[l].push(k)
							}
						for (var l in e) {
							var h = e[l];
							this._dealStackedPoints(h)
						}
					}
				},
				_calculateCategoryBasedPercentageAndTooltip: function (a) {
					for (var b = [], c = 0, d = a.length; d > c; c++) {
						var e = a[c];
						if (e.length) {
							var f = e[0],
							g = f.stack || f.stackByPercent;
							g ? this.dealStackedSeries(e) : b.push(e[0])
						}
					}
					this.dealStackedSeries(b)
				},
				_dealStackedPoints: function (a) {
					this._calculatePercentage(a)
				},
				dealStackedSeries: function (a) {
					for (var b = [], c = 0, d = a.length; d > c; c++)
						for (var e = a[c].points, f = 0, g = e.length; g > f; f++)
							b[f] = b[f] || [], b[f].push(e[f]);
					var h = this;
					b.forEach(function (a) {
						h._dealStackedPoints(a)
					})
				},
				mergeSeriesAttributes: function (a) {},
				mergeDataPointAttributes: function () {},
				_hideTooltip: function () {
					var a = this.getTooltipComponent();
					a.hide()
				},
				_mergeMarkerAttributes: function (a) {
					var f = a.pointOption,
					h = a.series.seriesOption,
					j = [f, h, this.option.plotOptions[this.componentType], this.option.plotOptions, i[this.componentType].plotOptions],
					k = c.clone(d.queryList(j, "marker")),
					l = a.series.baseAxis,
					m = !!l && l.isAxisReversed(),
					n = a.series.getDataPointCount(),
					o = a.index;
					k.fillColor = k.fillColor || this.vanchart.getDefaultSeriesColor(a.seriesName),
					c.hasDefined(this.option.plotOptions.marker) && (k.fillColor = this.option.plotOptions.marker.fillColor || k.fillColor);
					var p = this.vanchart.getComponent(g.RANGE_LEGEND_COMPONENT);
					p && (k.fillColor = p.getColorWithSize(this.isForceBubble() ? a.y : a.size) || k.fillColor),
					k.fillColor = h.color || k.fillColor,
					c.hasDefined(h.marker) && (k.fillColor = h.marker.fillColor || k.fillColor),
					k.fillColor = f.color || k.fillColor,
					c.hasDefined(f.marker) && (k.fillColor = f.marker.fillColor || k.fillColor);
					var q = d.queryList(j, "mouseOverColor") || e.getHighLightColor(k.fillColor);
					d.merge(a, {
						mouseOverColor: q,
						marker: k,
						delay: 800 * b((m ? n - o - 1 : o) / n)
					}, !0)
				},
				getTooltipPos: function (a, b, c) {
					if (a && a.tooltip) {
						var d,
						e = a.tooltip || a.data.tooltip,
						f = this.getVanchartRender().getRenderRoot();
						if (e.follow) {
							var g = c ? this.getMousePos(c) : d3.mouse(f.node());
							d = [g[0] + 10, g[1] + 10]
						} else
							d = this._getFixedPos(a, b);
						var h = this.vanchart.getChartBounds(),
						i = h.y,
						j = h.y + h.height,
						k = h.x,
						l = h.x + h.width,
						m = d[0],
						n = d[1];
						return k > m ? m += k - m : m + b.width > l && (m -= m + b.width - l),
						i > n ? n += i - n : n + b.height > j && (n -= n + b.height - j),
						[m, n]
					}
				},
				_getArcPoint: function (a, b) {
					return [a * Math.sin(b), -a * Math.cos(b)]
				},
				isSupportAnimation: function () {
					var a = this.option.plotOptions;
					return !!a && !!a.animation
				},
				_calculatePercentage: function (a, b) {
					b = b || "value";
					var c = 0;
					a.forEach(function (a) {
						c += Math.abs(a[b])
					}),
					c = c > 0 ? c : 1,
					a.forEach(function (a) {
						a.setPercentage(Math.abs(a[b]) / c)
					})
				},
				isForceBubble: function () {
					return this.option.plotOptions.force
				},
				isUpdateWithForce: function () {
					return this.isForceBubble() && c.isSupportSVG() && this.isSupportAnimation()
				},
				getNormalTrendLineXYValues: function (a) {
					var b = [],
					c = [],
					d = this.vanchart.isInverted() ? "y" : "x",
					e = this.vanchart.isInverted() ? g.LEFT : g.BOTTOM;
					return a.points.sort(function (a, b) {
						return a[d] - b[d]
					}),
					a.points.forEach(function (a) {
						a.isNull || (b.push(a.x), c.push(a.y))
					}),
					[b, c, e]
				},
				getBubbleTrendLineXYValues: function (a) {
					var b = [],
					c = [],
					d = this.vanchart.isInverted() ? "posY" : "posX",
					e = this.vanchart.isInverted() ? g.LEFT : g.BOTTOM;
					return a.points.sort(function (a, b) {
						return a[d] - b[d]
					}),
					a.points.forEach(function (a) {
						a.isNull || (b.push(a.posX), c.push(a.posY))
					}),
					[b, c, e]
				},
				orderData: function () {
					var a = this.option.orderType,
					b = this._buildLocationMap();
					for (var d in b)
						for (var e = b[d], f = e.length - 1; f >= 0; f--) {
							var h = e[f];
							if (h && h.length && h[0].length) {
								var i = h[0][0],
								j = i.baseAxis;
								if (j.type != g.CATEGORY_AXIS_COMPONENT)
									continue;
								for (var k = {}, l = 0, m = h.length; m > l; l++)
									for (var n = h[l], o = 0, p = n.length; p > o; o++)
										for (var i = n[o], q = 0, r = i.points.length; r > q; q++) {
											var s = i.points[q];
											c.hasNotDefined(k[s.category]) && (k[s.category] = 0),
											k[s.category] += s.value
										}
								var t = [];
								for (var u in k)
									t.push({
										key: u,
										value: k[u]
									});
								t.sort(function (b, c) {
									return a == g.ASCENDING ? b.value - c.value : c.value - b.value
								});
								var v = [];
								t.forEach(function (a) {
									v.push(a.key)
								}),
								j.updateCategories(v);
								for (var l = 0, m = h.length; m > l; l++)
									for (var n = h[l], o = 0, p = n.length; p > o; o++) {
										var i = n[o];
										i.updateClassName()
									}
							}
						}
				},
				getVisibleChartData: function (a) {
					a = a || this.componentType;
					for (var b = [], c = this.vanchart.series, d = 0, e = c.length; e > d; d++) {
						var f = c[d];
						if (f.type == a && f.visible && f.points.length)
							for (var h = 0; h < f.points.length; ++h)
								if (!f.points[h].isNull) {
									b.push(c[d]);
									break
								}
					}
					var i = this.componentType == g.RADAR_CHART || this.componentType == g.BAR_CHART || this.componentType == g.COLUMN_CHART;
					return i ? b.sort(function (a, b) {
						return b.index - a.index
					}) : b
				},
				getChartData: function (a) {
					a = a || this.componentType;
					for (var b = [], c = this.vanchart.series, d = 0, e = c.length; e > d; d++)
						c[d].type == a && b.push(c[d]);
					return b
				},
				_getSeriesInterpolate: function (a) {
					var b;
					if (Array.isArray(a))
						b = a;
					else {
						if ("object" != typeof a)
							throw new TypeError(a);
						b = [a]
					}
					var c = d.queryList(b, "step"),
					e = d.queryList(b, "curve"),
					f = "linear";
					return c ? f = "step-after" : e && (f = "cardinal"),
					f
				},
				_getLineSvg: function (a) {
					return d3.svg.line().interpolate(a).x(function (a) {
						return a.x
					}).y(function (a) {
						return a.y
					}).defined(function (a) {
						return !a.isNull
					})
				},
				_getAreaSvg: function (a) {
					return this.vanchart.isInverted() ? d3.svg.area().interpolate(a).y(function (a) {
						return a.y
					}).x0(function (a) {
						return a.x0
					}).x1(function (a) {
						return a.x
					}).defined(function (a) {
						return !a.isNull
					}) : d3.svg.area().interpolate(a).x(function (a) {
						return a.x
					}).y0(function (a) {
						return a.y0
					}).y1(function (a) {
						return a.y
					}).defined(function (a) {
						return !a.isNull
					})
				},
				_calculateBubbleLabelInfo: function (a, b, e) {
					b = b || {};
					var f = b.formatter,
					g = b.useHtml;
					if (!f)
						return {};
					var i = [];
					if ("object" == typeof f) {
						var n = f.identifier;
						if (-1 != n.indexOf(j)) {
							var o = h.format(a.seriesName, f.seriesFormat),
							p = a.getCategorySeriesStyle(b, e),
							q = c.getTextDimension(o, p, g);
							i.push({
								text: o,
								style: p,
								dim: q
							})
						}
						if (-1 != n.indexOf(k) || -1 != n.indexOf(l) || -1 != n.indexOf(m)) {
							var r = this._getXYSizeString(a, f, n),
							s = a.getValuePercentageStyle(b, e),
							t = c.getTextDimension(r, s, g);
							i.push({
								text: r,
								style: s,
								dim: t
							})
						}
					} else
						a.pushCustomLabelContent(f, b, g, i, e);
					var u = a.calculateTextDim(i);
					d.merge(a, {
						labelContent: i,
						labelDim: u
					}, !0)
				},
				_getXYSizeString: function (a, b, c) {
					var d = h.format(a.category, b.XFormat),
					e = h.format(a.value, b.YFormat),
					f = "-" == a.size ? "-" : h.format(a.size, b.sizeFormat),
					g = "";
					return (-1 != c.indexOf(k) || -1 != c.indexOf(l)) && (g = "(", -1 != c.indexOf(k) ? (g += d, -1 != c.indexOf(l) && (g = g + "," + e), g += ")") : (g += e, g += ")"), g += " "),
					-1 != c.indexOf(m) && "-" != f && (g += f),
					g
				},
				_mergeTooltipAttributes: function (a) {
					for (var b = 0, c = a.length; c > b; b++) {
						var d = a[b];
						this.mergeSinglePointTooltipAttr(d, a)
					}
				},
				mergeSinglePointTooltipAttr: function (a, b) {
					b = b || [a];
					var c = a.tooltip;
					a.tooltipText = c && c.enabled ? this._calculateTooltipContent(c, a, b) : null,
					a.points = b
				},
				_calculateTooltipContent: function (a, b, d) {
					var e = a.formatter;
					if (!e)
						return "";
					if ("object" == typeof e) {
						var f = a.style,
						h = e.identifier,
						i = this,
						j = this.vanchart.getChart(g.MAP_CHART),
						k = this.vanchart.getComponent(g.RANGE_LEGEND_COMPONENT),
						l = "";
						return a.shared ? (l += this._createCategoryLine(b, h, f, e), d.forEach(function (a) {
								var b = j && k ? d[0].color : a.color;
								l += '<span style="font-size:12px; color: ' + b + '">&#9679  </span>',
								l += i._createSeriesLine(a, h, f, e),
								l += "<br />"
							})) : (l += this._createCategoryLine(b, h, f, e), l += i._createSeriesLine(b, h, f, e)),
						l
					}
					return c.getFormatterFunction(e).call(b)
				},
				_createCategoryLine: function (a, b, c, d) {
					var e = this.vanchart.getComponent(g.GEO_COMPONENT),
					f = a.series.type == g.BUBBLE_CHART && !e;
					if (f && !this.isForceBubble())
						return this._createBubbleTooltipSeriesLine(a, b, c, d);
					var i = "";
					return a.series.chart.componentType === g.MULTIPIE_CHART ? -1 != b.indexOf(j) && (i = h.format(a.seriesName, d.seriesFormat)) : (-1 != b.indexOf(o) && (i = h.format(a.category, d.categoryFormat)), -1 != b.indexOf(n) && (i = h.format(a.name, d.nameFormat))),
					i && (i = (c ? "<span>" : g.TOOLTIP_CATEGORY_STYLE) + i + "</span>", i += "<br />"),
					i
				},
				_createSeriesLine: function (a, b, c, d) {
					var e = this.vanchart.getComponent(g.GEO_COMPONENT),
					f = a.series.type == g.BUBBLE_CHART && !e;
					if (f && !this.isForceBubble())
						return this._createBubbleTooltipXYSizeLine(a, b, c, d);
					var i,
					k = "",
					l = h.format(a.value, d.valueFormat),
					m = h.format(a.percentage, d.percentFormat);
					return a.series.chart.componentType == g.MULTIPIE_CHART ? -1 != b.indexOf(n) && (i = h.format(a.name, d.nameFormat)) : -1 != b.indexOf(j) && (i = h.format(a.seriesName, d.seriesFormat)),
					i && ((-1 != b.indexOf(p) || -1 != b.indexOf(q)) && (i += ":"), k += (c ? "<span >" : g.TOOLTIP_SERIES_STYLE) + i + "</span>"),
					-1 != b.indexOf(p) && -1 != b.indexOf(q) ? k += (c ? "<span>" : g.TOOLTIP_VALUE_STYLE) + l + "  " + m + "</span>" : -1 != b.indexOf(p) ? k += (c ? "<span>" : g.TOOLTIP_VALUE_STYLE) + l + "</span>" : -1 != b.indexOf(q) && (k += (c ? "<span>" : g.TOOLTIP_VALUE_STYLE) + m + "</span>"),
					k
				},
				_createBubbleTooltipSeriesLine: function (a, b, c, d) {
					var e = "";
					if (-1 != b.indexOf(j)) {
						var f = h.format(a.seriesName, d.seriesFormat);
						e += (c ? "<span >" : g.TOOLTIP_SERIES_STYLE) + f + "</span>",
						e += "<br />"
					}
					return e
				},
				_createBubbleTooltipXYSizeLine: function (a, b, c, d) {
					var e = "";
					if (-1 != b.indexOf(k) || -1 != b.indexOf(l) || -1 != b.indexOf(m)) {
						var f = this._getXYSizeString(a, d, b);
						e += (c ? "<span>" : g.TOOLTIP_VALUE_STYLE) + f + "</span>"
					}
					return e
				},
				getClosestPoint: function () {}
			});
		return r
	}),
	c("chart/Pie", ["require", "../Constants", "../utils/BaseUtils", "./BaseChart", "../utils/QueryUtils", "../utils/BoundsManager", "../theme/options", "../ChartLibrary"], function (a) {
		var b = "right-top",
		c = "right-bottom",
		d = "left-top",
		e = "left-bottom",
		f = 2 * Math.PI,
		g = 1.1,
		h = 3,
		i = Math.PI / 180,
		j = 2,
		k = [.75, .7, .65, .6, .55],
		l = a("../Constants"),
		m = a("../utils/BaseUtils"),
		n = a("./BaseChart"),
		o = a("../utils/QueryUtils"),
		p = a("../utils/BoundsManager"),
		q = a("../theme/options"),
		r = n.extend({
				constructor: r,
				mergeSeriesAttributes: function (a) {
					var b = [a.seriesOption, this.option.plotOptions[this.componentType], this.option.plotOptions, q[this.componentType].plotOptions],
					c = o.queryList(b, "innerRadius") || 0;
					0 == parseFloat(c) && (c = 0);
					var d = o.queryList(b, "center"),
					e = o.queryList(b, "startAngle") || 0,
					f = o.queryList(b, "endAngle") || 360;
					e > f ? e -= 360 : e == f && (e = 0, f = 360);
					var g = o.queryList(b, "roseType"),
					h = o.queryList(b, "rotatable"),
					i = o.queryList(b, "radius"),
					j = this.option.style;
					o.merge(a, {
						center: d,
						radius: i,
						innerRadius: c,
						startAngle: e,
						endAngle: f,
						roseType: g,
						rotatable: h,
						style: j
					}, !0)
				},
				mergeDataPointAttributes: function (a) {
					o.merge(a, {
						visible: m.pick(a.pointOption.visible, !0),
						rotate: 0
					}, !0)
				},
				doLayout: function () {
					var a = this.getVisibleChartData(),
					b = this.option.plotOptions,
					c = this;
					a.forEach(function (a) {
						var d = [a.seriesOption, b[a.type], b, q[a.type].plotOptions];
						a.radius = o.queryList(d, "radius"),
						c._calculatePercentage(a.visiblePoints),
						c._mergeTooltipAttributes(a.visiblePoints);
						var e = d3.layout.pie().value(function (b) {
								return a.roseType == l.SAME_ARC ? 1 : Math.abs(b.value)
							}).startAngle(m.toRadian(a.startAngle)).endAngle(m.toRadian(a.endAngle)).sort(null);
						a.visiblePoints.forEach(function (a) {
							a.lastShape = c._getArcData(a)
						});
						var f = e(a.visiblePoints);
						f.forEach(function (a) {
							var b = a.data;
							b.startAngle = isNaN(a.startAngle) ? 0 : a.startAngle,
							b.endAngle = isNaN(a.endAngle) ? 0 : a.endAngle
						})
					});
					for (var d = this.vanchart.getPlotBounds(), e = this._calculateSeriesBounds(), f = 0, g = a.length; g > f; f++) {
						var h = a[f],
						i = e[h.name],
						j = i,
						k = 0,
						n = 0,
						p = 0;
						if ("fixed" == j) {
							var n = a[f].center[0],
							p = a[f].center[1];
							if (-1 != a[f].center[0].indexOf("%") && (n = this._getPercentValue(a[f].center[0], this.vanchart.chartWidth()), p = this._getPercentValue(a[f].center[1], this.vanchart.chartHeight())), h.radius)
								k = h.radius;
							else {
								var r = n - d.x,
								s = d.x + d.width - n,
								t = p - d.y,
								u = d.y + d.height - p;
								k = Math.min(r, s, t, u)
							}
							n -= d.x,
							p -= d.y,
							i = {
								x: n - k,
								y: p - k,
								width: 2 * k,
								height: 2 * k
							}
						} else
							k = Math.min(i.width / 2, i.height / 2), n = i.x + i.width / 2, p = i.y + i.height / 2;
						o.merge(h, {
							fixedState: j,
							bounds: i,
							radius: k,
							centerX: n,
							centerY: p
						}, !0),
						this._calculateLabelPos(h)
					}
				},
				_getArcData: function (a) {
					return m.hasDefined(a.startAngle) ? {
						startAngle: a.startAngle,
						endAngle: a.endAngle,
						radius: a.radius
					}
					 : void 0
				},
				_getFixedPos: function (a, b) {
					var c = this.getPlotBounds(),
					d = a.series,
					e = d.centerX,
					h = d.centerY,
					i = this.getCenterAngle(a),
					j = a.radius * g,
					k = j * Math.sin(i) + e + c.x,
					l = j * Math.cos(i + Math.PI) + h + c.y;
					return i < Math.PI / 2 ? l -= b.height : i >= Math.PI && i < 3 * Math.PI / 2 ? k -= b.width : i >= 3 * Math.PI / 2 && f > i && (l -= b.height, k -= b.width),
					[k, l]
				},
				recalculateLabelPos: function (a, b) {
					for (var c = a.visiblePoints, d = 0, e = c.length; e > d; d++)
						c[d].labelPos = null, c[d].rotate = b;
					for (var f = [], g = [], d = 0, e = c.length; e > d; d++) {
						var h = c[d],
						i = h.dataLabels;
						i && i.enabled && (i.align == l.OUTSIDE ? f.push(h) : g.push(h))
					}
					this._calculateOutsideLabelBounds(f, a, !0),
					this._calculateLeadLineStartPos(f),
					this._calculateInsideLabelBounds(g, a)
				},
				_calculateLabelPos: function (a) {
					for (var b = a.roseType, c = a.visiblePoints, d = [], e = [], f = 0, i = c.length; i > f; f++) {
						var j = c[f],
						k = j.dataLabels;
						k && k.enabled && (k.align == l.OUTSIDE ? d.push(j) : e.push(j))
					}
					if (this._calculateOutsideLabelBounds(d, a), "fixed" !== a.fixedState && (e.length && !d.length || !e.length && !d.length) && (a.radius = a.radius / g - h), this._calculateInnerRadius(a), b) {
						var c = a.visiblePoints,
						m = a.radius - a.innerRadius,
						n = 0;
						c.forEach(function (a) {
							n = Math.max(n, Math.abs(a.value))
						});
						var o = m / n;
						(isNaN(o) || !isFinite(o)) && (o = 0),
						c.forEach(function (b) {
							b.radius = a.innerRadius + o * Math.abs(b.value)
						})
					} else {
						var p = a.radius;
						a.visiblePoints.forEach(function (a) {
							a.radius = p
						})
					}
					this._calculateLeadLineStartPos(d),
					this._calculateInsideLabelBounds(e, a)
				},
				_calculateInnerRadius: function (a) {
					var b = a.innerRadius,
					c = a.radius;
					"string" == typeof b && (b = -1 != b.indexOf("%") ? parseFloat(b) * c / 100 : parseFloat(b)),
					a.innerRadius = b;
					var d = a.visiblePoints;
					d.forEach(function (a) {
						a.innerRadius = b
					})
				},
				_calculateLeadLineStartPos: function (a) {
					var b = this;
					a.forEach(function (a) {
						var c = a.radius,
						d = b.getCenterAngle(a);
						a.labelPos && (a.labelPos.startPos = {
								x: (c + 1) * Math.sin(d),
								y: (c + 1) * Math.cos(d + Math.PI)
							})
					})
				},
				_calculateOutsideLabelBounds: function (a, b, c) {
					if (a.length) {
						a.forEach(function (a) {
							a.labelPos = null
						}),
						c = c || !1;
						for (var d = [], e = [], f = [], g = [], h = 0, i = a.length; i > h; h++) {
							var j = a[h],
							k = this.getCenterAngle(j);
							k < Math.PI / 2 ? d.push(j) : k >= Math.PI / 2 && k < Math.PI ? e.push(j) : k >= Math.PI && k < 3 * Math.PI / 2 ? g.push(j) : f.push(j)
						}
						c ? this._calculateArcR(b, d, e, f, g) : this._initCalculateArcR(b, d, e, f, g)
					}
				},
				_initCalculateArcR: function (a, b, c, d, e) {
					if ("fixed" === a.fixedState) {
						var f = {
							width: Number.MAX_VALUE,
							height: Number.MAX_VALUE
						};
						this._testIfAllFit(a.radius, f, b, c, d, e, !0)
					} else {
						var g = a.radius,
						h = .5 * g,
						i = a.bounds,
						f = {
							width: i.width / 2,
							height: i.height / 2
						};
						if (!this._testIfAllHorizontalFit(h, f, b, c, d, e))
							return a.radius = h, void this._testIfAllFit(h, f, b, c, d, e);
						for (var j = 0, l = k.length; l > j; j++)
							if (h = g * k[j], this._testIfAllFit(h, f, b, c, d, e))
								return void(a.radius = h);
						this._testIfAllFit(h, f, b, c, d, e, !0),
						a.radius = h
					}
				},
				_calculateArcR: function (a, b, c, d, e) {
					if ("fixed" === a.fixedState) {
						var f = {
							width: Number.MAX_VALUE,
							height: Number.MAX_VALUE
						};
						this._testIfAllFit(a.radius, f, b, c, d, e, !0)
					} else {
						var g = a.radius,
						h = a.bounds,
						f = {
							width: h.width / 2,
							height: h.height / 2
						};
						this._testIfAllFit(g, f, b, c, d, e, !0)
					}
				},
				_testIfAllHorizontalFit: function (a, f, g, h, i, j) {
					var k = this._ignoreMinArcLabel(a, g),
					l = this._ignoreMinArcLabel(a, h),
					m = this._ignoreMinArcLabel(a, i),
					n = this._ignoreMinArcLabel(a, j),
					o = this._testIfHorizontalFit(k, a, f, b),
					p = this._testIfHorizontalFit(l, a, f, c),
					q = this._testIfHorizontalFit(m, a, f, d),
					r = this._testIfHorizontalFit(n, a, f, e);
					return o && p && q && r
				},
				_testIfHorizontalFit: function (a, b, c, d) {
					for (var e = 1.2 * b, f = .1 * b, g = m.makeBounds(-c.width, c.height, 2 * c.width, 2 * c.height), h = 0, i = a.length; i > h; h++) {
						var j = a[h],
						k = j.labelDim,
						l = this.getCenterAngle(j),
						n = e * Math.sin(l),
						o = e * Math.cos(l + Math.PI),
						p = this._getLabelBounds(d, n, o, f, k);
						if (p.x < g.x || p.x + p.width > g.x + g.width)
							return !1
					}
					return !0
				},
				_testIfAllFit: function (a, f, g, h, i, j, k) {
					var l = this._ignoreMinArcLabel(a, g),
					m = this._ignoreMinArcLabel(a, h),
					n = this._ignoreMinArcLabel(a, i),
					o = this._ignoreMinArcLabel(a, j),
					g = this._testIfFit(g, l, a, f, b, k),
					h = this._testIfFit(h, m, a, f, c, k),
					i = this._testIfFit(i, n, a, f, d, k),
					j = this._testIfFit(j, o, a, f, e, k);
					return g && h && i && j
				},
				_testIfFit: function (a, b, c, d, e, f) {
					return a.length != b.length || f ? this._testFloatPositionIfFit(b, c, d, e) : this._testFixedPositionIfFit(b, c, d, e)
				},
				_testFixedPositionIfFit: function (a, d, e, f) {
					for (var g = new p, h = 1.2 * d, i = .1 * d, j = m.makeBounds(-e.width, -e.height, 2 * e.width, 2 * e.height), k = 0, l = a.length; l > k; k++) {
						var n = a[k],
						o = n.labelDim,
						q = this.getCenterAngle(n),
						r = h * Math.sin(q),
						s = h * Math.cos(q + Math.PI),
						t = this._getLabelBounds(f, r, s, i, o);
						if (g.isOverlapped(t) || !m.containsRect(j, t))
							return !1;
						g.addBounds(t);
						var u,
						v = {
							x: r,
							y: s
						};
						u = f == b || f == c ? {
							x: r + i,
							y: s
						}
						 : {
							x: r - i,
							y: s
						},
						n.labelPos = {
							x: t.x,
							y: t.y,
							midPos: v,
							endPos: u
						}
					}
					return !0
				},
				_testFloatPositionIfFit: function (a, b, c, d) {
					var e = this._findNiceBoundsFromStartAngle(a, b, c, d);
					return e ? e : (a.forEach(function (a) {
							a.labelPos = null
						}), this._findNiceBoundsFromEndAngle(a, b, c, d))
				},
				_findNiceBoundsFromStartAngle: function (a, b, c, d) {
					return this._findNiceBounds(!0, a, b, c, d)
				},
				_findNiceBoundsFromEndAngle: function (a, b, c, d) {
					return this._findNiceBounds(!1, a, b, c, d)
				},
				_findNiceBounds: function (a, d, e, f, g) {
					for (var h = 1.2 * e, j = .1 * e, k = new p, l = this._getStartAndEndAngle(g), n = this._getPossibleLabelBoundsByLocation(f, g), o = a ? l.endAngle : l.startAngle, q = a ? i : -i, r = !0, s = 0, t = d.length; t > s && r; s++) {
						var u = a ? s : t - s - 1,
						v = d[u],
						w = v.labelDim,
						x = this.getCenterAngle(v),
						y = h * Math.sin(x),
						z = h * Math.cos(x + Math.PI),
						A = this._getLabelBounds(g, y, z, j, w);
						if (k.isOverlapped(A) || !m.containsRect(n, A)) {
							r = !1;
							for (var B = x + q; a ? o > B : B > o; B += q)
								if (y = h * Math.sin(B), z = h * Math.cos(B + Math.PI), A = this._getLabelBounds(g, y, z, j, w), !k.isOverlapped(A) && m.containsRect(n, A)) {
									r = !0;
									break
								}
						}
						if (r) {
							var C,
							D = {
								x: y,
								y: z
							};
							C = g == b || g == c ? {
								x: y + j,
								y: z
							}
							 : {
								x: y - j,
								y: z
							},
							k.addBounds(A),
							v.labelPos = {
								x: A.x,
								y: A.y,
								midPos: D,
								endPos: C
							}
						}
					}
					return r
				},
				_getStartAndEndAngle: function (a) {
					switch (a) {
					case b:
						return {
							startAngle: 0,
							endAngle: Math.PI / 2
						};
					case c:
						return {
							startAngle: Math.PI / 2,
							endAngle: Math.PI
						};
					case e:
						return {
							startAngle: Math.PI,
							endAngle: 3 * Math.PI / 2
						};
					case d:
						return {
							startAngle: 3 * Math.PI / 2,
							endAngle: 2 * Math.PI
						}
					}
				},
				_getLabelBounds: function (a, d, e, f, g) {
					var h,
					i;
					return h = a == b || a == c ? d + f + j : d - f - j - g.width,
					i = e - g.height / 2, {
						x: h,
						y: i,
						width: g.width,
						height: g.height
					}
				},
				getCenterAngle: function (a) {
					var b = a.rotate + (a.startAngle + a.endAngle) / 2;
					return m.makeValueInRange(0, 2 * Math.PI, b)
				},
				_getPossibleLabelBoundsByLocation: function (a, f) {
					var g,
					h,
					i = a.width,
					j = a.height;
					switch (f) {
					case b:
						g = 0,
						h = -j;
						break;
					case c:
						g = h = 0;
						break;
					case e:
						g = -i,
						h = 0;
						break;
					case d:
						g = -i,
						h = -j
					}
					return {
						x: g,
						y: h,
						width: i,
						height: j
					}
				},
				_ignoreMinArcLabel: function (a, b) {
					for (var c = 0, d = 0, e = b.length; e > d; d++) {
						var f = b[d].labelDim;
						c += f.height
					}
					if (c > a) {
						var g = c - a;
						b.sort(function (a, b) {
							return a.value - b.value
						});
						for (var d = 0, e = b.length; e > d && !(0 > g); d++) {
							var h = b[d].labelDim.height;
							g -= h
						}
						b = b.slice(d, b.length)
					}
					return b.sort(function (a, b) {
						var c = a.startAngle,
						d = b.startAngle;
						return d > c ? -1 : c > d ? 1 : 0
					}),
					b
				},
				_calculateInsideLabelBounds: function (a, b) {
					for (var c = b.innerRadius, d = 0, e = a.length; e > d; d++) {
						var f = a[d],
						g = f.radius,
						h = this.getCenterAngle(f),
						i = c + (g - c) / 2,
						j = this._getArcPoint(i, h),
						k = j[0] - f.labelDim.width / 2,
						l = j[1] - f.labelDim.height / 2;
						f.labelPos = {
							x: k,
							y: l
						}
					}
				},
				_calculateSeriesBounds: function () {
					for (var a = this.getVisibleChartData(), b = this.vanchart.getPlotBounds(), c = {}, d = 0, e = 0, f = 0, g = a.length; g > f; f++)
						!a[f].center && a[f].radius && (d += 2 * (a[f].radius || 0), e++);
					var h = b.width / Math.max(1, a.length - e);
					h /= 2;
					for (var i = {
							x: 0,
							y: 0,
							width: b.width,
							height: b.height
						}, f = 0, g = a.length; g > f; f++)
						if (a[f].center)
							c[a[f].name] = "fixed";
						else {
							var j = 2 * (a[f].radius || h);
							c[a[f].name] = {
								x: i.x,
								y: i.y,
								width: j,
								height: i.height
							},
							i.x += j,
							i.width -= j
						}
					return c
				},
				orderData: function () {
					var a = this.getVisibleChartData(),
					b = this;
					a.forEach(function (a) {
						a.points.sort(function (a, c) {
							var d = a.value,
							e = c.value;
							return b.option.orderType == l.ASCENDING ? d - e : e - d
						}),
						a.updateVisiblePoints()
					}),
					this.option.byClassName = !1
				},
				onDrag: function (a) {
					this._draggingSeries && this.render.onDrag(this._draggingSeries, a.containerPoint)
				},
				dragEnd: function (a) {
					this._draggingSeries && (this.render.onDragEnd(this._draggingSeries, a.containerPoint), this._draggingSeries = null)
				},
				findDraggingTarget: function (a) {
					for (var b = a.containerPoint, c = this.getPlotBounds(), d = b[0] - c.x, e = b[1] - c.y, f = this.getVisibleChartData(), g = f.length - 1; g >= 0; g--)
						if (m.containsPoint(f[g].bounds, [d, e]) && f[g].rotatable)
							return this.render.onDragStart(f[g], b), this._draggingSeries = f[g], this
				}
			});
		a("../ChartLibrary").register(l.PIE_CHART, r)
	}),
	c("chart/Bar", ["require", "./BaseChart", "../utils/BaseUtils", "../Constants", "../utils/QueryUtils", "../utils/BoundsManager", "../theme/options", "../ChartLibrary", "../ChartLibrary"], function (a) {
		var b = a("./BaseChart"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/QueryUtils"),
		f = a("../utils/BoundsManager"),
		g = a("../theme/options"),
		h = 1,
		i = 3,
		j = 2,
		k = b.extend({
				doLayout: function () {
					var a = this._buildLocationMap();
					for (var b in a)
						for (var c = a[b], d = 0, e = c.length; e > d; d++) {
							var f = c[d];
							f && f.length && this._buildBars(f)
						}
					this._calculateLabelPos()
				},
				getTrendLineXYValues: function (a) {
					for (var b = [], c = [], d = a.points, e = a.baseAxis.isHorizontal(), f = a.valueAxis, g = [], h = 0, i = d.length; i > h; h++) {
						var j = d[h];
						j.isNull || g.push(j)
					}
					return g.sort(function (a, b) {
						return e ? a.x - b.x : a.y - b.y
					}),
					g.forEach(function (a) {
						var d,
						g;
						e ? (d = a.x + a.width / 2, g = f.isAxisReversed() ? a.y + a.height : a.y) : (d = f.isAxisReversed() ? a.x : a.x + a.width, g = a.y + a.height / 2),
						b.push(d),
						c.push(g)
					}),
					[b, c, a.baseAxis.getPosition()]
				},
				_buildBars: function (a) {
					for (var b = a[0][0], f = b.isValueAxisBased(), g = f ? this._getValueBasedBarSize(a) : this._getBarSize(a), h = g.centerPos, i = g.barWidth, j = a[0][0].baseAxis, k = j.getPosition() == d.LEFT || j.getPosition() == d.RIGHT, l = 0, m = a.length; m > l; l++)
						for (var n = a[l], o = 0, p = n.length; p > o; o++)
							for (var b = n[o], q = 0, r = b.points.length; r > q; q++) {
								var s = b.points[q],
								t = j.scale(s.category) + h[l] - i[l][o] / 2,
								u = s.series.valueAxis,
								v = s.y,
								w = s.y0,
								x = u.scale(w);
								w === Number.MIN_VALUE && (x = u.scale.range()[0]);
								var y = u.scale(v + w),
								z = Math.abs(y - x),
								A = s.borderWidth,
								B = k ? Math.min(x, y) : t,
								C = k ? t : Math.min(x, y),
								D = k ? z : i[l][o],
								E = k ? i[l][o] : z;
								D = Math.max(D, 0),
								E = Math.max(E, 0);
								var F = c.rectSubPixelOpt(B, C, D, E, A);
								e.merge(s, e.merge(F, {
										location: j.getPosition(),
										startPos: u.getStartPos(),
										direction: this.getAnimationDirection(u, v)
									}, !0), !0)
							}
				},
				getAnimationDirection: function (a, b) {
					var c = b >= 0;
					return a.isHorizontal() ? c ^ a.isAxisReversed() ? d.LEFT_TO_RIGHT : d.RIGHT_TO_LEFT : c ^ a.isAxisReversed() ? d.BOTTOM_TO_TOP : d.TOP_TO_BOTTOM
				},
				_getFixedPos: function (a, b) {
					var c,
					e,
					f = a.location,
					g = this.getPlotBounds();
					return f == d.TOP || f == d.BOTTOM ? (c = g.x + a.x + a.width + h, e = g.y + a.y) : (c = g.x + a.x + a.width - b.width, e = g.y + a.y + a.height + h),
					[c, e]
				},
				mergeSeriesAttributes: function (a) {
					var b = [a.seriesOption, this.option.plotOptions[this.componentType], this.option.plotOptions, g[this.componentType].plotOptions];
					e.merge(a, {
						width: e.queryList(b, "width")
					})
				},
				_getTotalDataPointCount: function () {
					for (var a = this.getVisibleChartData(), b = 0, c = 0, d = a.length; d > c; c++)
						b += a[c].points.length;
					return Math.max(b, 1)
				},
				_getValueBasedBarSize: function (a) {
					var b = a[0][0].baseAxis,
					d = this._getTotalDataPointCount(),
					e = b.isHorizontal() ? b.bounds.width : b.bounds.height,
					f = this.fixedBarWidth ? this.fixedBarWidth : e / d / 3;
					f = Math.max(f, j),
					this.fixedBarWidth = f;
					for (var g = [], h = [], i = 0, d = a.length; d > i; i++) {
						g.push(0);
						for (var k = 0, l = a[i].length; l > k; k++) {
							var m = a[i][k];
							h[i] = h[i] || [],
							h[i].push(Math.max(c.isNull(m.width) ? f : m.width, j))
						}
					}
					return {
						centerPos: g,
						barWidth: h
					}
				},
				_getBarSize: function (a) {
					var b = a.length,
					d = a[0][0].baseAxis,
					f = d.getTickLength(),
					h = [this.option.plotOptions[this.componentType], this.option.plotOptions, g[this.componentType].plotOptions],
					i = e.queryList(h, "categoryGap"),
					k = e.queryList(h, "gap");
					i = this._getPercentValue(i, f);
					for (var l = (f - i) / b, m = i / 2, n = [], o = 0; b > o; o++)
						n.push(m + l * (o + .5));
					k = this._getPercentValue(k, l),
					l -= k;
					for (var p = [], o = 0; b > o; o++)
						for (var q = 0, r = a[o].length; r > q; q++) {
							var s = a[o][q];
							p[o] = p[o] || [],
							p[o].push(Math.max(c.isNull(s.width) ? l : s.width, j))
						}
					return {
						centerPos: n,
						barWidth: p
					}
				},
				_calculateLabelPos: function () {
					var a = new f,
					b = this.getVisibleChartData(),
					e = this;
					b.forEach(function (b) {
						b.points.forEach(function (b) {
							var f = b.dataLabels;
							if (f && f.enabled)
								if (f.align)
									b.labelPos = e._calculateAlignLabelPos(b, f.align), a.addBounds(c.makeBounds(b.labelPos, b.labelDim));
								else
									for (var g = [d.CENTER, d.INSIDE, d.OUTSIDE], h = 0, i = g.length; i > h; h++) {
										var j = g[h],
										k = e._calculateAlignLabelPos(b, j);
										if (!a.isOverlapped(c.makeBounds(k, b.labelDim)) || j == d.OUTSIDE) {
											b.labelPos = k,
											a.addBounds(c.makeBounds(k, b.labelDim));
											break
										}
									}
						})
					})
				},
				_calculateAlignLabelPos: function (a, b) {
					var c = a.labelDim,
					e = a.location == d.TOP || a.location == d.BOTTOM,
					f = a.series.stackByPercent ? a.percentage >= 0 : a.value >= 0,
					g = a.series,
					h = g.valueAxis;
					f ^= h.isAxisReversed();
					var j,
					k,
					l = a.x + a.width / 2,
					m = a.y + a.height / 2;
					switch (b) {
					case d.CENTER:
						j = l - c.width / 2,
						k = m - c.height / 2;
						break;
					case d.INSIDE:
						e ? (j = l - c.width / 2, k = f ? a.y + i : a.y + a.height - i - c.height) : (k = m - c.height / 2, j = f ? a.x + a.width - i - c.width : a.x + i);
						break;
					case d.OUTSIDE:
						e ? (j = l - c.width / 2, k = f ? a.y - i - c.height : a.y + a.height + i) : (k = m - c.height / 2, j = f ? a.x + a.width + i : a.x - i - c.width)
					}
					return {
						x: j,
						y: k
					}
				},
				getInitBarAttribute: function (a) {
					var b = a.direction || d.BOTTOM_TO_TOP,
					c = {
						x: a.startPos,
						y: a.y,
						width: 0,
						height: a.height
					},
					e = {
						x: a.startPos,
						y: a.y,
						width: a.x + a.width - a.startPos,
						height: a.height
					},
					f = {
						x: a.startPos,
						y: a.y,
						width: 0,
						height: a.height
					},
					g = {
						x: a.x,
						y: a.y,
						width: a.startPos - a.x,
						height: a.height
					},
					h = {
						x: a.x,
						y: a.startPos,
						width: a.width,
						height: 0
					},
					i = {
						x: a.x,
						y: a.y,
						width: a.width,
						height: a.startPos - a.y
					},
					j = {
						x: a.x,
						y: a.startPos,
						width: a.width,
						height: 0
					},
					k = {
						x: a.x,
						y: a.startPos,
						width: a.width,
						height: a.y + a.height - a.startPos
					};
					switch (b) {
					case d.BOTTOM_TO_TOP:
						return {
							init: h,
							end: i
						};
					case d.TOP_TO_BOTTOM:
						return {
							init: j,
							end: k
						};
					case d.LEFT_TO_RIGHT:
						return {
							init: c,
							end: e
						};
					case d.RIGHT_TO_LEFT:
						return {
							init: f,
							end: g
						}
					}
				}
			});
		return a("../ChartLibrary").register(d.BAR_CHART, k),
		a("../ChartLibrary").register(d.COLUMN_CHART, k),
		k
	}),
	c("chart/Line", ["require", "../Constants", "../utils/BaseUtils", "../utils/QueryUtils", "./BaseChart", "../theme/options", "../ChartLibrary"], function (a) {
		var b = a("../Constants"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/QueryUtils"),
		e = a("./BaseChart"),
		f = a("../theme/options"),
		g = .35,
		h = 2,
		i = e.extend({
				type: b.LINE_CHART,
				doLayout: function () {
					var a = this._buildLocationMap();
					for (var b in a)
						for (var c = a[b], d = c.length - 1; d >= 0; d--) {
							var e = c[d];
							e && e.length && this._buildLines(e)
						}
					this._calculateLabelPos()
				},
				_buildLines: function (a) {
					for (var c = this.option.plotOptions.large, d = (a[0][0], this), e = 0, f = a.length; f > e; e++) {
						var g = a[e];
						g.forEach(function (a) {
							a.dataBands = d._calculateDataBands(a);
							var e = a.baseAxis,
							f = a.valueAxis,
							g = a.getLocation() == b.LEFT || a.getLocation() == b.RIGHT,
							h = a.originalPoints || a.points,
							i = [].concat(h);
							i.forEach(function (a) {
								d._positionFix(a, e, f, g)
							});
							var j = d.vanchart.isInverted() ? "y" : "x";
							if (c) {
								var k = {},
								l = {},
								m = [];
								i.forEach(function (a) {
									k[a.x] && l[a.y] || (m.push(a), k[a.x] = !0, l[a.y] = !0)
								}),
								m.sort(function (a, b) {
									return a[j] - b[j]
								}),
								i = m
							} else
								i.sort(function (a, b) {
									return a[j] - b[j]
								});
							if (a.connectNulls) {
								var n = [];
								i.forEach(function (a) {
									a.isNull || n.push(a)
								}),
								i = n
							}
							a.points = i,
							a.originalPoints = h
						})
					}
				},
				_positionFix: function (a, b, c, d) {
					var e = b.scale.rangeBand ? b.scale.rangeBand() / 2 : 0,
					f = Math.round(b.scale(a.category) + e),
					g = c.scale(a.y + a.y0),
					h = c.scale(a.y0);
					d ? (a.y = f, a.x = g, a.x0 = h) : (a.x = f, a.y = g, a.y0 = h)
				},
				mergeDataPointAttributes: function (a) {
					this._mergeMarkerAttributes(a)
				},
				mergeSeriesAttributes: function (a) {
					var b = a.seriesOption,
					e = [b, this.option.plotOptions[a.type], this.option.plotOptions, f[a.type].plotOptions],
					h = c.pick(d.queryList(e, "connectNulls"), !0),
					i = d.queryList(e, "lineWidth") || 0,
					j = d.queryList(e, "color") || this._getDefaultSeriesColor(a.name),
					k = d.queryList(e, "fillColor");
					k = k ? k === !0 ? j : k : k === !1 ? "" : j;
					var l = c.pick(d.queryList(e, "fillColorOpacity"), g),
					m = d.queryList(e, "stack"),
					n = this._getSeriesInterpolate(e),
					o = this._getLineSvg(n),
					p = this._getAreaSvg(n),
					q = a.className + (m ? "stacked" : "unstacked"),
					r = [];
					c.extend(a, {
						className: q,
						lineWidth: i,
						color: j,
						fillColor: k,
						fillColorOpacity: l,
						connectNulls: h,
						lineSvg: o,
						areaSvg: p,
						points: r,
						isStack: !!m
					})
				},
				_calculateDataBands: function (a) {
					var b = this.getPlotBounds(),
					e = a.color,
					g = a.fillColor,
					h = a.fillColorOpacity,
					i = [a.seriesOption, this.option.plotOptions[a.type], this.option.plotOptions, f[a.type].plotOptions],
					j = d.queryList(i, "bands"),
					k = this.vanchart.getIDPrefix() + a.className,
					l = a.valueAxis,
					m = [];
					if (m.push({
							x: 0,
							y: 0,
							width: b.width,
							height: b.height,
							color: e,
							fillColor: g,
							fillColorOpacity: h,
							lineData: a,
							clipID: k + "-1"
						}), !j)
						return m;
					c.isArray(j) || (j = [j]);
					for (var n = 0, o = j.length; o > n; n++) {
						var p = 0,
						q = 0,
						r = b.width,
						s = b.height,
						t = l.scale.domain(),
						u = Math.max(t[0], j[n].from),
						v = Math.min(t[1], j[n].to);
						u = l.scale(u),
						v = l.scale(v);
						var w = j[n].color || e,
						x = j[n].fillColor || g,
						y = j[n].fillColorOpacity || h;
						l.isHorizontal() ? (p = Math.min(u, v), r = Math.abs(u - v)) : (q = Math.min(u, v), s = Math.abs(u - v)),
						m.push({
							x: p,
							y: q,
							height: s,
							width: r,
							color: w,
							lineData: a,
							fillColor: x,
							fillColorOpacity: y,
							clipID: k + n
						})
					}
					return m
				},
				_getFixedPos: function (a) {
					var b = a.marker.radius || this.getDefaultMarkerRadius(),
					c = this.getPlotBounds(),
					d = c.x + a.x + b,
					e = c.y + a.y + b;
					return [d, e]
				},
				_calculateLabelPos: function () {
					var a = this.getVisibleChartData();
					a.forEach(function (a) {
						a.points.forEach(function (a) {
							var b = a.dataLabels;
							b && b.enabled && (a.labelPos = {
									x: a.x - a.labelDim.width / 2,
									y: a.y - h - a.labelDim.height
								})
						})
					})
				},
				getTrendLineXYValues: function (a) {
					return this.getNormalTrendLineXYValues(a)
				},
				getClosestPoint: function (a) {
					var b,
					c = this.vanchart.isInverted(),
					d = c ? "y" : "x",
					e = Number.MAX_VALUE,
					f = this.vanchart.hoverSeries,
					g = this.getPlotBounds(),
					h = g[d] - (c ? a[1] : a[0]);
					if (f && f.points)
						f.points.forEach(function (a) {
							var c = Math.abs(a[d] + h);
							e > c && !a.isNull && (b = a, e = c)
						});
					else {
						var i = this.vanchart.series;
						i.forEach(function (a) {
							a.points && a.points.forEach(function (a) {
								var c = Math.abs(a[d] + h);
								e > c && !a.isNull && (b = a, e = c)
							})
						})
					}
					return b
				}
			});
		return a("../ChartLibrary").register(b.LINE_CHART, i),
		i
	}),
	c("chart/Area", ["require", "../Constants", "./Line", "../ChartLibrary"], function (a) {
		var b = a("../Constants"),
		c = a("./Line"),
		d = c.extend({
				type: b.AREA_CHART
			});
		return a("../ChartLibrary").register(b.AREA_CHART, d),
		d
	}),
	c("chart/Radar", ["require", "./BaseChart", "../utils/BaseUtils", "../Constants", "../utils/QueryUtils", "../utils/BoundsManager", "../theme/options", "../ChartLibrary"], function (a) {
		var b = a("./BaseChart"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/QueryUtils"),
		f = (a("../utils/BoundsManager"), a("../theme/options")),
		g = 8,
		h = "radar-top",
		i = "radar-bottom",
		j = "radar-left",
		k = "radar-right",
		l = b.extend({
				constructor: l,
				doLayout: function () {
					var a = this._buildLocationMap();
					for (var b in a)
						for (var c = a[b], d = c.length - 1; d >= 0; d--) {
							var e = c[d];
							e && e.length && this._buildRadarSeries(e)
						}
				},
				mergeDataPointAttributes: function (a) {
					this._mergeMarkerAttributes(a),
					a.columnType = this.isColumnType()
				},
				mergeSeriesAttributes: function (a) {
					var b = [a.seriesOption, this.option.plotOptions[a.type], this.option.plotOptions, f[a.type].plotOptions],
					d = e.queryList(b, "columnType");
					this.columnType = d;
					var g = c.pick(e.queryList(b, "connectNulls"), !0),
					h = e.queryList(b, "lineWidth") || 0,
					i = e.queryList(b, "fillColor"),
					j = e.queryList(b, "color") || this._getDefaultSeriesColor(a.name);
					i = i ? i === !0 ? j : i : "";
					var k = c.pick(e.queryList(b, "fillColorOpacity"), d ? 1 : .15),
					l = a.className + (d ? "column" : "polygon");
					d && (a.marker = null),
					c.extend(a, {
						className: l,
						lineWidth: h,
						lineColor: j,
						columnType: d,
						connectNulls: g,
						fillColor: i,
						fillColorOpacity: k
					})
				},
				_buildRadarSeries: function (a) {
					var b = a[0][0],
					c = b.radiusAxis,
					d = b.angleAxis;
					this.baseAxis = d,
					this.valueAxis = c,
					this.cateScale = d.scale,
					this.valueScale = c.scale,
					this.center = c.polar.center,
					this.radius = c.polar.radius,
					this.piece = d.piece;
					for (var e = this, f = 0, g = a.length; g > f; f++) {
						var h = a[f];
						h.forEach(function (a) {
							a.points.sort(function (a, b) {
								return e.cateScale(a.category) - e.cateScale(b.category)
							}),
							a.points.forEach(function (b) {
								var c = b.y0;
								b.y0 = e.valueScale(c),
								b.y = e.valueScale(b.y + c),
								b.radian = e.cateScale(b.category) * e.piece,
								b.pos = e._getArcPoint(b.y, b.radian),
								b.dataLabels && b.dataLabels.enabled && (a.columnType ? e._calculateColumnTypeLabelPos(b) : e._calculatePolygonTypeLabelPos(b))
							}),
							a.pathSegment = e._getPathSegment(a.points, a.connectNulls)
						})
					}
				},
				_calculateColumnTypeLabelPos: function (a) {
					var b = this._getRadarPosition(a.category),
					c = this._getArcPoint(a.y - g, a.radian),
					d = a.labelDim;
					switch (b) {
					case h:
						a.labelPos = {
							x: -d.width / 2,
							y: c[1]
						};
						break;
					case k:
						a.labelPos = {
							x: c[0] - d.width,
							y: c[1] - d.height / 2
						};
						break;
					case i:
						a.labelPos = {
							x: -d.width / 2,
							y: c[1] - d.height
						};
						break;
					case j:
						a.labelPos = {
							x: c[0],
							y: c[1] - d.height / 2
						}
					}
				},
				_calculatePolygonTypeLabelPos: function (a) {
					var b = this._getRadarPosition(a.category),
					c = this._getArcPoint(a.y + g, a.radian),
					d = a.labelDim;
					switch (b) {
					case h:
						a.labelPos = {
							x: -d.width / 2,
							y: c[1] - d.height
						};
						break;
					case k:
						a.labelPos = {
							x: c[0],
							y: c[1] - d.height / 2
						};
						break;
					case i:
						a.labelPos = {
							x: -d.width / 2,
							y: c[1]
						};
						break;
					case j:
						a.labelPos = {
							x: c[0] - d.width,
							y: c[1] - d.height / 2
						}
					}
				},
				_getRadarColumnPath: function (a, b, c) {
					var d = .375 * this.piece,
					e = c - d,
					f = c + d,
					g = d3.svg.arc().innerRadius(a).outerRadius(b).startAngle(e).endAngle(f);
					return g()
				},
				_getPathSegment: function (a, b) {
					var c = [],
					d = [];
					if (b)
						c.push(d), a.forEach(function (a) {
							a.isNull || d.push(a.pos)
						});
					else {
						for (var e = 0, f = a.length, g = f - 1; g > 0; g--) {
							var h = a[g],
							i = a[g - 1];
							!h.isNull && i.isNull && (e = g)
						}
						for (var g = 0; f > g; g++) {
							var j = a[(g + e) % f];
							j.isNull && d.length ? (d.length > 1 && c.push(d), d = []) : d.push(j.pos)
						}
						d.length && c.push(d)
					}
					return c
				},
				_getRadarSeriesFillPath: function (a, b) {
					return this._getRadarSeriesPath(a, b, !0)
				},
				_getRadarSeriesStrokePath: function (a, b) {
					return this._getRadarSeriesPath(a, b, !1)
				},
				_getRadarSeriesPath: function (a, b, d) {
					var e = "",
					f = [];
					if (1 == a.length) {
						f = a[0];
						var g = f.length == this.baseAxis.getCategoryCount() || b;
						d = !g && d,
						e = d ? "M0,0" : "";
						for (var h = 0, i = f.length; i > h; h++) {
							var j = h || d ? "L" : "M";
							e += j + c.dealFloatPrecision(f[h][0]) + "," + c.dealFloatPrecision(f[h][1])
						}
						e += g || d ? "Z" : ""
					} else
						a.forEach(function (a) {
							e += d ? "M0,0" : "",
							a.forEach(function (a) {
								e += "L" + c.dealFloatPrecision(a[0]) + "," + c.dealFloatPrecision(a[1])
							}),
							e += d ? "Z" : ""
						});
					return e
				},
				_getRadarPosition: function (a) {
					var b = this.cateScale(a),
					c = this.cateScale.domain(),
					d = c.length / 2;
					return 0 == b ? h : b > 0 && d > b ? k : b == d ? i : b > d ? j : void 0
				},
				getRadarCenter: function () {
					return this.center
				},
				getBaseAxis: function () {
					return this.baseAxis
				},
				getValueAxis: function () {
					return this.valueAxis
				},
				isColumnType: function () {
					return this.columnType
				},
				getInitRadius: function () {
					return this.valueScale(this.valueAxis.getStartPosValue())
				},
				_getInitPathSegment: function (a) {
					var b = [];
					return a.forEach(function (a) {
						var c = [];
						b.push(c),
						a.forEach(function () {
							c.push([0, 0])
						})
					}),
					b
				},
				_getFixedPos: function (a, b) {
					var c,
					d;
					if (a.columnType) {
						var e = a.y,
						f = a.radian;
						c = e * Math.sin(f) + this.center[0],
						d = e * Math.cos(f + Math.PI) + this.center[1],
						f < Math.PI / 2 ? d -= b.height : f >= Math.PI && f < 3 * Math.PI / 2 ? c -= b.width : f >= 3 * Math.PI / 2 && f < 2 * Math.PI && (d -= b.height, c -= b.width)
					} else {
						var e = a.marker.radius || this.getDefaultMarkerRadius();
						c = this.center[0] + a.pos[0] + e,
						d = this.center[1] + a.pos[1] + e
					}
					return [c, d]
				},
				getClosestPoint: function (a) {
					if (!this.isColumnType()) {
						var b,
						c = Number.MAX_VALUE,
						d = this.vanchart.hoverSeries,
						e = this.center;
						if (d)
							d.points.forEach(function (d) {
								var f = d.pos,
								g = f[0] + e[0] - a[0],
								h = f[1] + e[1] - a[1],
								i = Math.sqrt(g * g + h * h);
								c > i && !d.isNull && (b = d, c = i)
							});
						else {
							var f = this.vanchart.series;
							f.forEach(function (d) {
								d.points && d.points.forEach(function (d) {
									var f = d.pos,
									g = f[0] + e[0] - a[0],
									h = f[1] + e[1] - a[1],
									i = Math.sqrt(g * g + h * h);
									c > i && !d.isNull && (b = d, c = i)
								})
							})
						}
						return b
					}
				}
			});
		return a("../ChartLibrary").register(d.RADAR_CHART, l),
		l
	}),
	c("render/PieSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/ColorUtils", "../Constants", "../utils/BezierEasing", "./RenderLibrary"], function (a) {
		var b = "path-g",
		c = "label-g",
		d = "pie-g",
		e = a("./BaseRender"),
		f = a("../utils/BaseUtils"),
		g = a("../utils/ColorUtils"),
		h = a("../Constants"),
		i = a("../utils/BezierEasing"),
		j = 1.1,
		k = 1e3,
		l = "bounce",
		m = i.css.swing,
		n = 400,
		o = "start-gradual-stop",
		p = "end-gradual-stop",
		q = e.extend({
				render: function () {
					var a = this.component.getPlotBounds(),
					e = this.component.getVanchartRender().getRenderRoot();
					this._bodyG || (this._bodyG = e.append("g")),
					this._bodyG.attr("transform", f.makeTranslate(a));
					var g = this,
					h = this.component.getVisibleChartData(),
					i = this._bodyG.selectAll("g." + d).data(h, function (a) {
							return a.className
						});
					i.attr("transform", function (a) {
						return f.makeTranslate([a.centerX, a.centerY])
					}).each(function (a) {
						var d = d3.select(this);
						g._updateDefs(d.select("defs"), a),
						g._updateSlices(d.select("g." + b), a),
						g._drawLabel(d.select("g." + c), a, k)
					});
					var j = i.enter().append("g").attr("class", function (a) {
							return d + " " + a.className
						});
					i.exit().remove(),
					j.each(function (a) {
						var d = d3.select(this).attr("transform", f.makeTranslate([a.centerX, a.centerY]));
						d.append("defs"),
						d.append("g").attr("class", b),
						d.append("g").attr("class", c),
						g._updateDefs(d.select("defs"), a),
						g._updateSlices(d.select("g." + b), a, !0),
						g._drawLabel(d.select("g." + c), a, k)
					})
				},
				_updateDefs: function (a, b) {
					if (b.style && b.style == h.STYLE_GRADUAL) {
						var c = this,
						d = b.visiblePoints,
						e = a.selectAll("radialGradient").data(d, function (a) {
								return a.className
							}),
						f = e.enter().append("radialGradient");
						f.append("stop").attr("class", o),
						f.append("stop").attr("class", p),
						e.attr("gradientUnits", "userSpaceOnUse").attr("cx", "0%").attr("cy", "0%").attr("r", function (a) {
							return Math.max(a.radius, 0) + "px"
						}).attr("id", function (a) {
							return c._getGradualID(a)
						}),
						e.select("stop." + o).attr("offset", function (a) {
							return a.series.innerRadius / Math.max(a.radius, 1) * 100 + "%"
						}).style("stop-color", function (a) {
							return g.getColorWithDivider(a.color, .8)
						}),
						e.select("stop." + p).attr("offset", "100%").style("stop-color", function (a) {
							return a.color
						})
					}
				},
				_updateSlices: function (a, b, c) {
					var d,
					e = d3.svg.arc().innerRadius(b.innerRadius),
					g = b.visiblePoints,
					h = Math.PI * b.startAngle / 180,
					i = Math.PI * b.endAngle / 180,
					j = this;
					d = this.component.groupDataByClassName() ? a.selectAll("path").data(g, function (a) {
							return a.className
						}) : a.selectAll("path").data(g);
					var o = d3.transform(a.attr("transform")).rotate;
					this.component.recalculateLabelPos(b, f.toRadian(o));
					var p = d.exit(),
					q = this.component.isSupportAnimation(),
					r = p.empty() && d.enter().empty();
					q ? p.transition().ease(l).duration(k).attrTween("d", function (a) {
						var b,
						c = this._dataIndex_,
						d = this._current_.radius;
						if (0 == c)
							b = {
								startAngle: h,
								endAngle: h,
								radius: d
							};
						else if (c >= g.length)
							b = {
								startAngle: i,
								endAngle: i,
								radius: d
							};
						else {
							var f = g[c - 1];
							if (f.lastShape) {
								var j = Math.abs(f.lastShape.endAngle - f.endAngle),
								k = a.startAngle + j;
								b = {
									startAngle: k,
									endAngle: k,
									radius: d
								}
							} else
								b = {
									startAngle: a.startAngle,
									endAngle: a.startAngle,
									radius: a.radius
								}
						}
						var l = d3.interpolate(this._current_, b);
						return function (b) {
							return e.outerRadius(a.radius)(l(b))
						}
					}).remove() : p.remove(),
					d.enter().append("path"),
					j.addShapeEventHandler(d);
					var s = r && !c ? n : k,
					t = r && !c ? m : l;
					d.each(function (a) {
						this._dataIndex_ = j._indexInVisiblePoints(a);
						var b = this._dataIndex_,
						d = d3.select(this).attr("class", a.className).style("fill", j._getFill(a)).style("stroke", a.borderColor).style("stroke-width", a.borderWidth);
						q ? d.transition().ease(t).duration(s).attrTween("d", function (a) {
							var d = this._current_;
							if (c)
								d = {
									startAngle: h,
									endAngle: h,
									radius: a.radius
								};
							else if (!d)
								if (0 == b)
									d = {
										startAngle: h,
										endAngle: h,
										radius: a.radius
									};
								else if (b >= g.length - 1)
									d = {
										startAngle: i,
										endAngle: i,
										radius: a.radius
									};
								else {
									var f = g[b - 1];
									if (f.lastShape) {
										var k = Math.abs(f.lastShape.endAngle - f.endAngle),
										l = a.startAngle + k;
										d = {
											startAngle: l,
											endAngle: l,
											radius: a.radius
										}
									} else
										d = {
											startAngle: a.startAngle,
											endAngle: a.startAngle,
											radius: a.radius
										}
								}
							var m = d3.interpolate(d, j._getArcData(a));
							return this._current_ = m(1),
							function (a) {
								var b = m(a);
								return e.outerRadius(b.radius)(b)
							}
						}) : d.attr("d", function (a) {
							return this._current_ = j._getArcData(a),
							e.outerRadius(a.radius)(this._current_)
						})
					})
				},
				_drawLabel: function (a, b, c) {
					c = c || 0,
					c = this.component.isSupportAnimation() ? c : 0;
					var d = this.component.getPlotBounds(),
					e = b.centerX + d.x,
					f = b.centerY + d.y;
					this._drawSvgDataLabels(a, b.visiblePoints, e, f, c, b.name)
				},
				onDragStart: function (a, d) {
					var e = this._bodyG.select("g." + a.className),
					f = e.select("g." + c),
					g = e.select("g." + b);
					this._removeSvgDataLabels(f, a.category),
					this.initPos = d,
					this.initRotate = d3.transform(g.attr("transform")).rotate
				},
				_getPositionInPie: function (a, b) {
					var c = this.component.getPlotBounds(),
					d = a[0] - c.x - b.centerX,
					e = a[1] - c.y - b.centerY;
					return [d, e]
				},
				onDrag: function (a, c) {
					var d = this._bodyG.select("g." + a.className),
					e = d.select("g." + b),
					f = this._getAngle(this._getPositionInPie(this.initPos, a), [0, 0]),
					g = this._getAngle(this._getPositionInPie(c, a), [0, 0]),
					h = g - f + this.initRotate;
					e.attr("transform", "rotate(" + h + ",0,0)")
				},
				onDragEnd: function (a) {
					var d = this._bodyG.select("g." + a.className),
					e = d.select("g." + c),
					g = d.select("g." + b),
					h = d3.transform(g.attr("transform")).rotate;
					this.component.recalculateLabelPos(a, f.toRadian(h)),
					this._drawLabel(e, a)
				},
				_getFill: function (a) {
					var b = this._bodyG.select("#" + this._getGradualID(a));
					return b.select("stop." + o).style("stop-color", g.getColorWithDivider(a.color, .9)),
					b.select("stop." + p).style("stop-color", a.color),
					a.style == h.STYLE_GRADUAL ? "url(#" + this._getGradualID(a) + ")" : a.color
				},
				_getClickedFill: function (a) {
					var b = this._bodyG.select("#" + this._getGradualID(a));
					return b.select("stop." + o).style("stop-color", g.getColorWithDivider(a.clickColor, .9)),
					b.select("stop." + p).style("stop-color", a.clickColor),
					a.style == h.STYLE_GRADUAL ? "url(#" + this._getGradualID(a) + ")" : a.clickColor
				},
				_getMouseOverFill: function (a) {
					var b = this._bodyG.select("#" + this._getGradualID(a));
					return b.select("stop." + o).style("stop-color", g.getColorWithDivider(a.mouseOverColor, .9)),
					b.select("stop." + p).style("stop-color", a.mouseOverColor),
					a.style == h.STYLE_GRADUAL ? "url(#" + this._getGradualID(a) + ")" : a.mouseOverColor
				},
				_getGradualID: function (a) {
					return a.className + this.component.vanchart.getIDPrefix()
				},
				_getArcData: function (a) {
					return {
						startAngle: a.startAngle,
						endAngle: a.endAngle,
						radius: a.radius
					}
				},
				_indexInVisiblePoints: function (a) {
					for (var b = a.series.visiblePoints, c = 0, d = b.length; d > c; c++)
						if (b[c] == a)
							return c;
					return 0
				},
				_getAngle: function (a, b) {
					return Math.atan2(a[1] - b[1], a[0] - b[0]) / (Math.PI / 180)
				},
				mouseOver: function (a) {
					if (a && a.target) {
						var b = a.target.datum(),
						c = this,
						d = a.target.node();
						clearTimeout(d.cancelChosenTimeout);
						var e = d3.svg.arc().innerRadius(b.series.innerRadius);
						d && !d.isChosen && (a.target.style("fill", function (a) {
								return c._getMouseOverFill(a)
							}).transition().ease("elastic").duration(800).attrTween("d", function (a) {
								var b = a.radius,
								d = d3.interpolate(b, 1.1 * b),
								f = c._getArcData(a);
								return function (a) {
									return e.outerRadius(d(a))(f)
								}
							}), d.isChosen = !0)
					}
				},
				mouseOut: function (a) {
					if (a && a.target) {
						var b = a.target.datum(),
						c = d3.svg.arc().innerRadius(b.series.innerRadius),
						d = this,
						e = a.target.node();
						if (!e || !e.isChosen)
							return;
						clearTimeout(e.cancelChosenTimeout),
						e.cancelChosenTimeout = setTimeout(function () {
								e.isChosen && (a.target.style("fill", function (a) {
										return d._getFill(a)
									}).transition().ease("elastic").duration(600).attrTween("d", function (a) {
										var b = a.radius,
										e = d3.interpolate(b * j, b),
										f = d._getArcData(a);
										return function (a) {
											return c.outerRadius(e(a))(f)
										}
									}), e.isChosen = !1)
							}, 50)
					}
				},
				mouseDown: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						a.target.style("fill", this._getClickedFill(b))
					}
				},
				mouseUp: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						a.target.node().isChosen && a.target.style("fill", this._getMouseOverFill(b))
					}
				}
			});
		return a("./RenderLibrary").register(h.PIE_SVG, q),
		q
	}),
	c("render/BarSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../Constants", "../utils/ColorUtils", "../utils/BezierEasing", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/ColorUtils"),
		f = a("../utils/BezierEasing"),
		g = 400,
		h = 150,
		i = 250,
		j = 6,
		k = "start-gradual-class",
		l = "end-gradual-class",
		m = "bar-seires-group",
		n = b.extend({
				render: function () {
					var a = this.component.getVanchartRender().getRenderRoot();
					this._bodyG ? this._updateChartBodyTranslate([this._bodyG, this._labelG], this.component.isSupportAnimation(), i) : (this._bodyG = a.append("g"), this._labelG = a.append("g"), this._updateChartBodyTranslate([this._bodyG, this._labelG]));
					var b = this.component.getVisibleChartData(),
					c = this._bodyG.selectAll("g." + m).data(b, function (a) {
							return a.className
						});
					this._dropSeries(c),
					this._updateSeries(c),
					this._createSeries(c),
					this._drawNormalChartLabels(this._labelG)
				},
				_dropSeries: function (a) {
					var b = a.exit(),
					c = this.component.isSupportAnimation();
					b.each(function () {
						d3.select(this).selectAll("rect").transition().duration(c ? h : 0).ease("linear").attrTween("y", function (a) {
							var b = a.y,
							c = a.height,
							d = b + c;
							return function (a) {
								var b = c * (1 - d3.ease("back")(a));
								return d - b + "px"
							}
						}).attrTween("height", function (a) {
							var b = a.height;
							return function (a) {
								return b * (1 - d3.ease("back")(a)) + "px"
							}
						}).remove()
					})
				},
				_updateSeries: function (a) {
					var b = c.pick(this.emptySeries, 0);
					this.emptySeries = a.exit().size();
					var d = this;
					a.each(function (a) {
						var c = d3.select(this);
						d._updateDefs(a.points, c.select("defs"), a.getLocation());
						var e = c.selectAll("rect").data(a.points, function (a) {
								return a.className
							}),
						f = b < d.emptySeries ? h : 0,
						g = b > d.emptySeries ? i : 0;
						e.empty() ? d._crateInitialBarElement(e, g) : d._updateBarTransition(e, f),
						e.enter().empty() || d._crateInitialBarElement(e, f + i),
						d.addShapeEventHandler(e),
						e.exit().remove()
					})
				},
				_createSeries: function (a) {
					var b = a.enter().append("g").attr("class", m),
					c = this;
					b.each(function (a) {
						var b = d3.select(this);
						c._updateDefs(a.points, b.append("defs"), a.getLocation());
						var d = b.selectAll("rect").data(a.points, function (a) {
								return a.className
							});
						d.call(c._crateInitialBarElement.bind(c))
					})
				},
				_updateDefs: function (a, b, c) {
					var f = this;
					if (this.component.option.style) {
						var g,
						h,
						i,
						j,
						m = b.selectAll("linearGradient").data(a, function (a) {
								return a.className
							});
						switch (g = h = i = j = "0%", c) {
						case d.TOP:
							h = "100%";
							break;
						case d.BOTTOM:
							j = "100%";
							break;
						case d.LEFT:
							g = "100%";
							break;
						case d.RIGHT:
							i = "100%"
						}
						m.enter().append("linearGradient").attr("x1", g).attr("y1", h).attr("x2", i).attr("y2", j).attr("id", function (a) {
							return f._getGradualID(a)
						}),
						m.append("stop").attr("offset", "0%").attr("class", k).style("stop-color", function (a) {
							return e.getColorWithDivider(a.color, .9)
						}),
						m.append("stop").attr("offset", "100%").attr("class", l).style("stop-color", function (a) {
							return a.color
						})
					}
					var n = [];
					a.forEach(function (a) {
						if (a.image && (n.push(a), a.image))
							switch (n.push(a), a.location) {
							case d.BOTTOM:
								a.imageX = a.x,
								a.imageY = a.y + a.height % a.imageHeight;
								break;
							case d.TOP:
							case d.LEFT:
								a.imageX = a.x,
								a.imageY = a.y;
								break;
							case d.RIGHT:
								a.imageX = a.x + a.width % a.imageWidth,
								a.imageY = a.y
							}
					});
					var o = b.selectAll("pattern").data(n, function (a) {
							return a.className
						}),
					p = o.enter().append("pattern");
					p.append("image"),
					o.attr("x", function (a) {
						return a.imageX
					}).attr("y", function (a) {
						return a.imageY
					}).attr("width", function (a) {
						return a.imageWidth
					}).attr("height", function (a) {
						return a.imageHeight
					}).attr("patternUnits", "userSpaceOnUse").attr("id", function (a) {
						return f._getImageID(a)
					}).select("image").attr("x", 0).attr("y", 0).attr("width", function (a) {
						return a.imageWidth
					}).attr("height", function (a) {
						return a.imageHeight
					}).attr("xlink:href", function (a) {
						return a.image
					})
				},
				_getGradualID: function (a) {
					var b = this.component.vanchart.getIDPrefix();
					return "gradual" + a.className + b
				},
				_getImageID: function (a) {
					var b = this.component.vanchart.getIDPrefix();
					return "image" + a.className + b
				},
				_getFillWidthColor: function (a, b) {
					var c = this._bodyG.select("#" + this._getGradualID(a));
					c.select("stop." + k).style("stop-color", e.getColorWithDivider(b, .9)),
					c.select("stop." + l).style("stop-color", b);
					var f = this.component.option.style,
					g = "url(#" + this._getGradualID(a) + ")",
					h = "url(#" + this._getImageID(a) + ")";
					return a.image ? h : f == d.STYLE_GRADUAL ? g : b
				},
				_getMouseOverFill: function (a) {
					return this._getFillWidthColor(a, a.mouseOverColor)
				},
				_getFill: function (a) {
					return this._getFillWidthColor(a, a.color)
				},
				_getClickedFill: function (a) {
					return this._getFillWidthColor(a, a.clickColor)
				},
				_crateInitialBarElement: function (a, b) {
					b = b || 0;
					var c = this,
					d = a.enter().append("rect");
					this.addShapeEventHandler(d);
					var e = this.component.isSupportAnimation();
					d.each(function (a) {
						var d = c.component.getInitBarAttribute(a),
						h = e ? d.init : a,
						i = d.end,
						j = d3.select(this);
						c._setInitBarAttributes(j, a, h),
						e && a.width > 0 && a.height > 0 ? j.transition().ease(f.css.swing).duration(g).delay(b).attr("x", i.x).attr("y", i.y).attr("width", Math.max(i.width, 0)).attr("height", Math.max(i.height, 0)).each("end", function () {
							j.attr("x", a.x).attr("y", a.y).attr("width", Math.max(a.width, 0)).attr("height", Math.max(a.height, 0))
						}) : j.attr("x", a.x).attr("y", a.y).attr("width", Math.max(a.width, 0)).attr("height", Math.max(a.height, 0))
					})
				},
				_setInitBarAttributes: function (a, b, c) {
					a.attr("class", b.className).attr("x", c.x).attr("y", c.y).attr("width", Math.max(c.width, 0)).attr("height", Math.max(c.height, 0)).attr("rx", b.borderRadius).attr("ry", b.borderRadius).style({
						fill: this._getFill(b),
						stroke: b.borderColor,
						"stroke-width": b.borderWidth
					}).each(function () {
						this._current_ = {
							x: b.x,
							y: b.y,
							width: b.width,
							height: b.height
						}
					})
				},
				_updateBarTransition: function (a, b) {
					var c = this.component.isSupportAnimation(),
					d = this,
					b = b || 0;
					c ? a.each(function (a) {
						var c = this._current_ || {
							x: a.x,
							y: a.y,
							width: a.width,
							height: a.height
						};
						this._current_ = {
							x: a.x,
							y: a.y,
							width: a.width,
							height: a.height
						},
						d3.select(this).style({
							fill: d._getFill(a),
							stroke: a.borderColor,
							"stroke-width": a.borderWidth
						}).transition().duration(i).delay(b).ease("linear").attrTween("x", function () {
							return function (b) {
								return c.x + (a.x - c.x) * f.css.swing(b) + "px"
							}
						}).attrTween("y", function () {
							return function (b) {
								return c.y + (a.y - c.y) * f.css.swing(b) + "px"
							}
						}).attrTween("width", function () {
							return function (b) {
								return c.width + (a.width - c.width) * f.css.swing(b) + "px"
							}
						}).attrTween("height", function () {
							return function (b) {
								return c.height + (a.height - c.height) * f.css.swing(b) + "px"
							}
						})
					}) : a.each(function (a) {
						d._setInitBarAttributes(d3.select(this), a, a)
					})
				},
				mouseOver: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						a.target.style({
							stroke: b.mouseOverColor,
							fill: this._getMouseOverFill(b),
							"stroke-width": b.borderWidth,
							"stroke-opacity": .35
						}).interrupt(d.SELECT_ANIMATION).transition(d.SELECT_ANIMATION).duration(100).ease("ease-out-in").style("stroke-width", j)
					}
				},
				mouseOut: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						a.target.interrupt(d.SELECT_ANIMATION).transition(d.SELECT_ANIMATION),
						a.target.style("fill", this._getFill(b)).style("stroke", b.borderColor).style("stroke-opacity", 1).style("stroke-width", b.borderWidth)
					}
				},
				mouseDown: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						a.target.style("fill", this._getClickedFill(b))
					}
				},
				mouseUp: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						a.target.style("fill", this._getMouseOverFill(b))
					}
				}
			});
		a("./RenderLibrary").register(d.BAR_SVG, n)
	}),
	c("render/LineSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/ColorUtils", "../Constants", "../utils/QueryUtils", "../utils/BezierEasing", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/ColorUtils"),
		e = a("../Constants"),
		f = (a("../utils/QueryUtils"), a("../utils/BezierEasing")),
		g = "lineGroupG",
		h = "areaGroupG",
		i = "markerGroupG",
		j = "pathG",
		k = "areaG",
		l = 800,
		m = 250,
		n = .65,
		o = b.extend({
				render: function () {
					var a = this.component.getVanchartRender().getRenderRoot();
					this._bodyG ? this._updateChartBodyTranslate([this._bodyG], this.component.isSupportAnimation(), m) : (this._bodyG = a.append("g"), this._defsG = this._bodyG.append("g"), this._areaG = this._bodyG.append("g"), this._lineG = this._bodyG.append("g"), this._labelG = this._bodyG.append("g"), this._updateChartBodyTranslate([this._bodyG])),
					this._updateLineSeries(),
					this._drawNormalChartLabels(this._labelG, this.component.isSupportAnimation() ? l : 0)
				},
				_updateLineSeries: function (a, b) {
					var c = this._updateDataBinding(),
					d = c.defsG,
					e = c.areaG,
					g = c.lineG;
					a = this.component.isSupportAnimation() ? a || m : 0,
					b = b || f.css.swing,
					d.exit().remove(),
					g.exit().remove(),
					e.exit().remove(),
					d.selectAll("clipPath").select("rect").transition().ease(b).duration(a).attr("x", function (a) {
						return a.x
					}).attr("y", function (a) {
						return a.y
					}).attr("width", function (a) {
						return a.width
					}).attr("height", function (a) {
						return a.height
					}),
					e.selectAll("path").filter(function (a) {
						return a.lineData.isStack
					}).style("fill", function (a) {
						return a.fillColor
					}).style("fill-opacity", function (a) {
						return a.fillColorOpacity
					}).style("stroke", "none").transition().ease(b).duration(a).attr("d", function (a) {
						var b = a.lineData;
						return b.areaSvg(b.points)
					}).each("end", function () {
						d3.select(this).attr("d", function (a) {
							var b = a.lineData;
							return b.areaSvg(b.points)
						})
					}),
					g.select("g." + j).selectAll("path").style("fill", "none").style("stroke", function (a) {
						return a.color
					}).style("stroke-width", function (a) {
						return a.lineData.lineWidth
					}).transition().ease(b).duration(a).attr("d", function (a) {
						var b = a.lineData;
						return b.lineSvg(b.points)
					}).each("end", function () {
						d3.select(this).attr("d", function (a) {
							var b = a.lineData;
							return b.lineSvg(b.points)
						})
					}),
					g.select("g." + k).selectAll("path").filter(function (a) {
						return !a.lineData.isStack
					}).style("fill", function (a) {
						return a.fillColor
					}).style("fill-opacity", function (a) {
						return a.fillColorOpacity
					}).style("stroke", "none").transition().ease(b).duration(a).attr("d", function (a) {
						var b = a.lineData;
						return b.areaSvg(b.points)
					}).each("end", function () {
						d3.select(this).attr("d", function (a) {
							var b = a.lineData;
							return b.areaSvg(b.points)
						})
					});
					var h = this;
					g.each(function (c) {
						var d = d3.select(this).select("g." + i).selectAll("g").data(function (a) {
								return a.points.filter(function (a) {
									return !a.isNull
								})
							});
						h.addShapeEventHandler(d),
						d.each(function (a) {
							h._updateMarkerStyle(d3.select(this), a)
						}).transition().ease(b).duration(a).attr("transform", function (a) {
							return "translate(" + a.x + "," + a.y + ")"
						}),
						d.exit().remove(),
						d3.select(this).transition().delay(a).each("end", function () {
							d.call(h._createSvgMarker.bind(h)).attr("transform", function (a) {
								return "translate(" + a.x + "," + a.y + ")"
							})
						})
					}),
					this.addSeriesEventHandler(e),
					this.addSeriesEventHandler(g),
					this._createNewLineSeries(c)
				},
				_updateDataBinding: function () {
					var a = this.component.getVisibleChartData(),
					b = this._lineG.selectAll("g." + g).data(a, function (a) {
							return a.className
						}),
					c = this._areaG.selectAll("g." + h).data(a, function (a) {
							return a.className
						}),
					d = this._defsG.selectAll("defs").data(a, function (a) {
							return a.className
						});
					return d.selectAll("clipPath").data(function (a) {
						return a.dataBands
					}),
					c.selectAll("path").data(function (a) {
						return a.dataBands
					}),
					b.select("g." + j).selectAll("path").data(function (a) {
						return a.dataBands
					}),
					b.select("g." + k).selectAll("path").data(function (a) {
						return a.dataBands
					}), {
						defsG: d,
						areaG: c,
						lineG: b
					}
				},
				_createNewLineSeries: function (a) {
					var a = this._updateDataBinding(),
					b = a.defsG,
					c = a.areaG,
					d = a.lineG,
					f = this.component.isSupportAnimation() ? l : 0;
					if (b.enter().append("defs").selectAll("clipPath").data(function (a) {
							return a.dataBands
						}).enter().append("clipPath").attr("id", function (a) {
							return a.clipID
						}).append("rect").attr("x", function (a) {
							return a.x
						}).attr("y", function (a) {
							return a.y
						}).attr("width", 0).attr("height", function (a) {
							return a.height
						}).transition().ease("quad-in-out").duration(f).attr("width", function (a) {
							return a.width
						}), this.component.componentType == e.AREA_CHART) {
						var m = c.enter().append("g").attr("class", function (a) {
								return h + " " + a.className
							});
						m.selectAll("path").data(function (a) {
							return a.dataBands
						}).enter().append("path").filter(function (a) {
							return a.lineData.isStack
						}).style("fill", function (a) {
							return a.fillColor
						}).style("fill-opacity", function (a) {
							return a.fillColorOpacity
						}).style("stroke", "none").attr("d", function (a) {
							var b = a.lineData;
							return b.areaSvg(b.points)
						}).attr("clip-path", function (a) {
							return "url(#" + a.clipID + ")"
						}),
						this.addSeriesEventHandler(m)
					}
					var n = d.enter().append("g").attr("class", function (a) {
							return g + " " + a.className
						});
					n.append("g").attr("class", j).selectAll("path").data(function (a) {
						return a.dataBands
					}).enter().append("path").style("fill", "none").style("stroke", function (a) {
						return a.color
					}).style("stroke-width", function (a) {
						return a.lineData.lineWidth
					}).attr("d", function (a) {
						var b = a.lineData;
						return b.lineSvg(b.points)
					}).attr("clip-path", function (a) {
						return "url(#" + a.clipID + ")"
					}),
					this.addSeriesEventHandler(n),
					this.component.componentType == e.AREA_CHART && n.append("g").attr("class", k).selectAll("path").data(function (a) {
						return a.dataBands
					}).enter().append("path").filter(function (a) {
						return !a.lineData.isStack
					}).style("fill", function (a) {
						return a.fillColor
					}).style("fill-opacity", function (a) {
						return a.fillColorOpacity
					}).style("stroke", "none").attr("d", function (a) {
						var b = a.lineData;
						return b.areaSvg(b.points)
					}).attr("clip-path", function (a) {
						return "url(#" + a.clipID + ")"
					}),
					this.component.isSupportAnimation() ? n.append("g").attr("class", i).selectAll("g").data(function (a) {
						return a.points.filter(function (a) {
							return !a.isNull
						})
					}).call(this._createSvgMarker.bind(this)).attr("transform", function (a) {
						return "translate(" + a.x + "," + a.y + ") scale(0.01)"
					}).transition().delay(function (a) {
						return a.delay
					}).duration(150).ease("ease-out-in").attr("transform", function (a) {
						return "translate(" + a.x + "," + a.y + ") scale(1.5)"
					}).transition().duration(150).ease("ease-out-in").attr("transform", function (a) {
						return "translate(" + a.x + "," + a.y + ") scale(1)"
					}) : n.append("g").attr("class", i).selectAll("g").data(function (a) {
						return a.points
					}).call(this._createSvgMarker.bind(this)).attr("transform", function (a) {
						return "translate(" + a.x + "," + a.y + ")"
					})
				},
				_createImageMarker: function (a, b) {
					var c = new Image;
					c.onload = function () {
						b(this.width, this.height)
					},
					c.src = a
				},
				seriesMouseOver: function (a) {
					if (a && a.target) {
						var b = a.target.datum(),
						f = b.className;
						this._lineG.select("g." + f).select("g." + k).selectAll("path").transition(e.SELECT_ANIMATION).duration(100).ease("swing").style("fill", function (a) {
							return d.getHighLightColor(a.fillColor)
						}).style("fill-opacity", n),
						this._lineG.select("g." + f).select("g." + j).selectAll("path").transition(e.SELECT_ANIMATION).duration(100).ease("swing").style("stroke", function (a) {
							return d.getHighLightColor(a.color)
						}).style("stroke-width", function (a) {
							return a.lineData.lineWidth + 1
						}),
						c.toFront(this._lineG.select("g." + f).node()),
						this._areaG.select("g." + f).selectAll("path").transition(e.SELECT_ANIMATION).duration(100).ease("swing").style("fill", function (a) {
							return d.getHighLightColor(a.fillColor)
						}).style("fill-opacity", n)
					}
				},
				seriesMouseOut: function (a) {
					if (a && a.target) {
						var b = a.target.datum(),
						c = b.className;
						this._lineG.select("g." + c).select("g." + k).selectAll("path").transition(e.SELECT_ANIMATION).duration(100).ease("swing").style("fill", function (a) {
							return a.fillColor
						}).style("fill-opacity", function (a) {
							return a.fillColorOpacity
						}),
						this._lineG.select("g." + c).select("g." + j).selectAll("path").transition(e.SELECT_ANIMATION).duration(100).ease("swing").style("stroke", function (a) {
							return a.color
						}).style("stroke-width", function (a) {
							return a.lineData.lineWidth
						}),
						this._areaG.select("g." + c).selectAll("path").transition(e.SELECT_ANIMATION).duration(100).ease("swing").style("fill", function (a) {
							return a.fillColor
						}).style("fill-opacity", function (a) {
							return a.fillColorOpacity
						})
					}
				},
				mouseOver: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						this._makeMarkerChosenState(a.target, b)
					}
				},
				mouseOut: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						this._cancelMarkerChosenState(a.target, b)
					}
				},
				mouseDown: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						this._makeMarkerClickedState(a.target, b)
					}
				},
				mouseUp: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						this._cancelMarkerClickedState(a.target, b)
					}
				}
			});
		return a("./RenderLibrary").register(e.LINE_SVG, o),
		o
	}),
	c("render/AreaSvgRender", ["require", "../Constants", "./LineSvgRender", "./RenderLibrary"], function (a) {
		var b = a("../Constants"),
		c = a("./LineSvgRender"),
		d = c.extend({});
		a("./RenderLibrary").register(b.AREA_SVG, d)
	}),
	c("render/RadarSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/LabelDivManager", "../utils/ColorUtils", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = (a("../utils/LabelDivManager"), a("../utils/ColorUtils"), a("../Constants")),
		e = "radar-series",
		f = "series-stroke",
		g = "series-fill",
		h = "radar-column",
		i = 500,
		j = "back-out",
		k = 500,
		l = "exp-out",
		m = b.extend({
				render: function () {
					var a = this.component.getVanchartRender().getRenderRoot();
					this._bodyG || (this._bodyG = a.append("g"), this._bodyG.append("defs").append("clipPath").attr("id", this._getRadarClipID())),
					this._updateTransform(),
					this._drawRadarSeries()
				},
				_updateTransform: function () {
					var a = this.component.getRadarCenter(),
					b = this.component.valueScale.domain()[1],
					d = this._bodyG.select("#" + this._getRadarClipID());
					d.select("path").remove(),
					d.append("path").attr("d", this.component.valueAxis._getRadiusGridPath(b)),
					this._bodyG.attr("transform", c.makeTranslate(a));
				},
				_drawRadarSeries: function () {
					var a = this.component.getVisibleChartData(),
					b = this._bodyG.selectAll("." + e).data(a, function (a) {
							return a.className
						});
					this._deleteRadarSeries(b),
					this._updateRadarSeries(b),
					this._createRadarSeries(b),
					this._drawLabel(this.component.isSupportAnimation() ? i : 0)
				},
				_deleteRadarSeries: function (a) {
					var b = a.exit();
					this.component.isColumnType() ? this._deleteColumnTypeSeries(b) : this._deletePolygonTypeSeries(b)
				},
				_deleteColumnTypeSeries: function (a) {
					var b = this.component.isSupportAnimation() ? k : 0,
					c = this;
					a.each(function (a) {
						var d = d3.select(this);
						d.selectAll("path." + h).transition().duration(b).ease(l).attrTween("d", function (a) {
							var b = d3.interpolate(a.y, a.y0);
							return function (d) {
								return c.component._getRadarColumnPath(a.y0, b(d), a.radian)
							}
						}).each("end", function () {
							d3.select(this).remove()
						})
					})
				},
				_deletePolygonTypeSeries: function (a) {
					var b = this,
					d = this._getMarkerClass(),
					e = this.component.isSupportAnimation() ? k : 0;
					a.each(function () {
						var a = d3.select(this);
						a.select("path." + f).transition().duration(e).ease(l).attrTween("d", function (a) {
							var c = b.component._getInitPathSegment(a.pathSegment),
							d = d3.interpolateArray(a.pathSegment, c);
							return function (c) {
								return b.component._getRadarSeriesStrokePath(d(c), a.connectNulls)
							}
						}).each("end", function () {
							d3.select(this).remove()
						}),
						a.select("path." + g).transition().duration(e).ease(l).attrTween("d", function (a) {
							var c = b.component._getInitPathSegment(a.pathSegment),
							d = d3.interpolateArray(a.pathSegment, c);
							return function (c) {
								return b.component._getRadarSeriesFillPath(d(c), a.connectNulls)
							}
						}).each("end", function () {
							d3.select(this).remove()
						}),
						a.selectAll("g." + d).transition().duration(e).ease(l).attr("transform", function () {
							return c.makeTranslate([0, 0]) + "scale(0)"
						}).each("end", function () {
							d3.select(this).remove()
						})
					})
				},
				_updateRadarSeries: function (a) {
					this.component.isColumnType() ? this._updateColumnTypeSeries(a) : this._updatePolygonTypeSeries(a)
				},
				_updateColumnTypeSeries: function (a) {
					var b = this;
					a.each(function (a) {
						var d = d3.select(this).selectAll("path." + h).data(a.points);
						b.addShapeEventHandler(d),
						d.exit().remove(),
						d.call(b._createColumn.bind(b)),
						d.each(function (a) {
							d3.select(this).style("fill", function (a) {
								return a.color
							}).style("fill-opacity", function (a) {
								return a.fillColorOpacity
							}).style("stroke", function (a) {
								return a.borderColor
							}).style("stroke-width", function (a) {
								return a.borderWidth
							}).transition().duration(k).ease(l).attrTween("d", function (a) {
								var d = c.pick(this._innerRadius_, a.y0),
								e = c.pick(this._outerRadius_, a.y),
								f = d3.interpolate(d, a.y0),
								g = d3.interpolate(e, a.y);
								return this._innerRadius_ = a.y0,
								this._outerRadius_ = a.y,
								function (c) {
									var d = f(c),
									e = g(c);
									return b.component._getRadarColumnPath(d, e, a.radian)
								}
							})
						})
					})
				},
				_updatePolygonTypeSeries: function (a) {
					var b = this,
					d = this._getMarkerClass(),
					e = this.component.isSupportAnimation() ? i : 0;
					a.each(function (a) {
						var h = d3.select(this);
						if (h.select("path." + f).empty())
							b._createPolygonStroke(h, a);
						else {
							var i = h.select("path." + f);
							b.addSeriesEventHandler(i),
							i.style({
								fill: "none",
								stroke: a.lineColor,
								"stroke-width": a.lineWidth
							}).transition().duration(e).ease(j).attrTween("d", function (a) {
								var c = !!this._pathSegment_;
								if (c && this._pathSegment_.length == a.pathSegment.length)
									for (var d = this._pathSegment_, e = 0, f = d.length; f > e && c; e++)
										d[e].length != a.pathSegment[e].length && (c = !1);
								var g = c ? this._pathSegment_ : b.component._getInitPathSegment(a.pathSegment),
								h = d3.interpolateArray(g, a.pathSegment);
								return this._pathSegment_ = a.pathSegment,
								function (c) {
									return b.component._getRadarSeriesStrokePath(h(c), a.connectNulls)
								}
							})
						}
						if (h.select("path." + g).empty())
							b._createPolygonFill(h, a);
						else {
							var k = h.select("path." + g);
							b.addSeriesEventHandler(i),
							k.style({
								fill: a.fillColor,
								"fill-opacity": a.fillColor ? a.fillColorOpacity : 0
							}).transition().duration(e).ease(j).attrTween("d", function (a) {
								var c = this._pathSegment_ ? this._pathSegment_ : b.component._getInitPathSegment(a.pathSegment),
								d = d3.interpolateArray(c, a.pathSegment);
								return this._pathSegment_ = a.pathSegment,
								function (c) {
									return b.component._getRadarSeriesFillPath(d(c), a.connectNulls)
								}
							})
						}
						var l = h.selectAll("g." + d).data(function (a) {
								return a.points.filter(function (a) {
									return !a.isNull
								})
							});
						b.addShapeEventHandler(l),
						l.exit().remove(),
						l.call(b._createSvgMarker.bind(b)),
						l.each(function (a) {
							b._updateMarkerStyle(d3.select(this), a)
						}).transition().duration(e).ease(j).attr("transform", function (a) {
							return c.makeTranslate(a.pos)
						})
					})
				},
				_createRadarSeries: function (a) {
					var b = a.enter().append("g").attr("class", function (a) {
							return a.className + " " + e
						}).attr("clip-path", "url(#" + this._getRadarClipID() + ")");
					this.component.isColumnType() ? this._createColumnTypeSeries(b) : this._createPolygonTypeSeries(b)
				},
				_createColumnTypeSeries: function (a) {
					var b = this;
					a.each(function (a) {
						d3.select(this).selectAll("path." + h).data(a.points).call(b._createColumn.bind(b)).transition().duration(b.component.isSupportAnimation() ? i : 0).ease(j).attrTween("d", function (a) {
							var c = b.component.getInitRadius(),
							d = d3.interpolate(c, a.y);
							return this._innerRadius_ = a.y0,
							this._outerRadius_ = a.y,
							function (e) {
								return b.component._getRadarColumnPath(c, d(e), a.radian)
							}
						}).each("end", function (a) {
							d3.select(this).attr("d", b.component._getRadarColumnPath(a.y0, a.y, a.radian))
						})
					})
				},
				_createPolygonStroke: function (a, b) {
					var c = this,
					d = this.component.isSupportAnimation(),
					e = d ? 1 : 0,
					g = a.selectAll("path." + f).data([b]);
					g.enter().append("path").attr("class", f).style({
						fill: "none",
						stroke: b.lineColor,
						"stroke-width": b.lineWidth
					}).transition().duration(i * e).ease(j).attrTween("d", function (a) {
						var b = c.component._getInitPathSegment(a.pathSegment),
						d = d3.interpolateArray(b, a.pathSegment);
						return this._pathSegment_ = a.pathSegment,
						function (b) {
							return c.component._getRadarSeriesStrokePath(d(b), a.connectNulls)
						}
					}),
					this.addSeriesEventHandler(g)
				},
				_createPolygonFill: function (a, b) {
					var c = this,
					d = this.component.isSupportAnimation(),
					e = d ? 1 : 0;
					if (b.fillColor && b.fillColorOpacity) {
						var f = a.selectAll("path." + g).data([b]);
						f.enter().append("path").attr("class", g).style({
							fill: b.fillColor,
							"fill-opacity": b.fillColor ? b.fillColorOpacity : 0
						}).transition().duration(i * e).ease(j).attrTween("d", function (a) {
							var b = c.component._getInitPathSegment(a.pathSegment),
							d = d3.interpolateArray(b, a.pathSegment);
							return this._pathSegment_ = a.pathSegment,
							function (b) {
								return c.component._getRadarSeriesFillPath(d(b), a.connectNulls)
							}
						}),
						this.addSeriesEventHandler(f)
					}
				},
				_createPolygonTypeSeries: function (a) {
					var b = this,
					d = this._getMarkerClass(),
					e = this.component.isSupportAnimation(),
					f = e ? 1 : 0;
					a.each(function (a) {
						var e = d3.select(this);
						b._createPolygonStroke(e, a),
						b._createPolygonFill(e, a),
						e.selectAll("g." + d).data(a.points.filter(function (a) {
								return !a.isNull
							})).call(b._createSvgMarker.bind(b)).attr("transform", function () {
							return c.makeTranslate([0, 0]) + "scale(0.01)"
						}).transition().duration(i * f).ease(j).attr("transform", function (a) {
							return c.makeTranslate(a.pos) + "scale(1)"
						})
					})
				},
				_createColumn: function (a) {
					var b = a.enter();
					b.append("path").attr("class", function (a) {
						return h + " " + a.className
					}).style("fill", function (a) {
						return a.color
					}).style("fill-opacity", function (a) {
						return a.fillColorOpacity
					}).style("stroke", function (a) {
						return a.borderColor
					}).style("stroke-width", function (a) {
						return a.borderWidth
					}).call(this.addShapeEventHandler.bind(this))
				},
				_drawLabel: function (a) {
					var b = this.component.getVisibleChartData(),
					c = this.component.getRadarCenter(),
					d = this.component.radius,
					e = [];
					b.forEach(function (a) {
						e = e.concat(a.points)
					}),
					e = e.filter(function (a) {
							if (a.labelPos && a.labelDim) {
								var b = a.labelPos.x,
								c = a.labelPos.y;
								if (b += b > 0 ? 0 : a.labelDim.width, c += c > 0 ? 0 : a.labelDim.height, d * d > b * b + c * c)
									return !0
							}
						}),
					this._labelG || (this._labelG = this._bodyG.append("g")),
					this._drawSvgDataLabels(this._labelG, e, c[0], c[1], a)
				},
				_getRadarClipID: function () {
					return "radarClip" + this.component.vanchart.getIDPrefix()
				},
				mouseOver: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						b.columnType ? a.target.style("stroke", b.mouseOverColor).style("fill", b.mouseOverColor).style("stroke-width", b.borderWidth).style("stroke-opacity", .35).interrupt().transition().duration(100).ease("ease-out-in").style("stroke-width", 6) : this._makeMarkerChosenState(a.target, b)
					}
				},
				mouseOut: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						b.columnType ? a.target.interrupt().transition().style("fill", b.color).style("stroke", b.borderColor).style("stroke-opacity", 1).style("stroke-width", b.borderWidth) : this._cancelMarkerChosenState(a.target, b)
					}
				},
				mouseDown: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						b.columnType ? a.target.style("fill", b.clickColor) : this._makeMarkerClickedState(a.target, b)
					}
				},
				mouseUp: function (a) {
					if (a && a.target) {
						var b = a.target.datum();
						b.columnType ? a.target.style("fill", b.mouseOverColor) : this._cancelMarkerClickedState(a.target, b)
					}
				}
			});
		a("./RenderLibrary").register(d.RADAR_SVG, m)
	}),
	c("render/TitleSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../Constants", "../utils/BezierEasing", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../utils/BezierEasing"),
		f = "title-gradual-background",
		g = b.extend({
				render: function () {
					if (!this._titleG) {
						var a = this.component.componentOption,
						b = this.component.bounds,
						e = this.component.getVanchartRender().getRenderRoot(),
						g = this.component.vanchart.getIDPrefix(),
						h = f + g;
						this._titleG || (this._backgroundG = e.append("g").attr("transform", "translate(" + b.x + "," + b.y + ")"), this._titleG = e.append("g")),
						a.backgroundColor && (this._createGradualDefs(this._titleG, a.backgroundColor, h), this._backgroundG.append("rect").attr("x", 0).attr("y", 0).attr("width", b.width).attr("height", b.height).attr("rx", a.borderRadius).attr("ry", a.borderRadius).style("fill", function () {
								return "string" == typeof a.backgroundColor ? a.backgroundColor : "url(#" + h + ")"
							}));
						var i = this.component.textDim,
						j = this.component.getPadding(),
						k = {
							x: b.x + j,
							y: b.y + j,
							width: i.width,
							height: i.height
						};
						if (this.component.isFloat || "center" !== a.align || (k.x = b.x + b.width / 2 - i.width / 2), this.textBounds = k, a.useHtml)
							this._drawTitle(a, k);
						else {
							var l,
							m,
							n = c.splitText(a.text, a.style, k.width),
							o = i.height / n.length,
							p = a.align || "left";
							switch (p) {
							case "left":
								m = "start",
								l = k.x;
								break;
							case "center":
								m = "middle",
								l = k.x + i.width / 2;
								break;
							case "right":
								m = "end",
								l = k.x + i.width
							}
							for (var q = 0, r = n.length; r > q; q++)
								this._titleG.append("text").attr("x", l).attr("y", k.y + o * q + o / 2).attr("dy", ".32em").attr("class", d.CHART_HIDE).style("text-anchor", m).text(n[q]).call(c.setTextStyle, a.style)
						}
					}
				},
				translateX: function (a) {
					if (a) {
						var b = d3.transform(this._titleG.attr("transform")).translate,
						c = b[0] + a;
						this._titleG.transition().ease(e.css.swing).duration(300).attr("transform", "translate(" + c + "," + b[1] + ")")
					}
				},
				changeTextRightSpace: function (a) {
					if (!this.component.isFloat)
						switch (this.component.componentOption.align) {
						case "center":
							var b = this.component.bounds,
							c = this.component.textDim,
							d = b.x + b.width / 2 - c.width / 2,
							e = this.textBounds,
							f = this.component.getPadding(),
							g = this.component.vanchart.getToolbarWidth(),
							h = this.component.initBarWidth,
							i = b.width / 2 - c.width / 2 - h - f,
							j = g - h,
							k = e.x,
							l = e.width;
							0 >= i && j ? (k = b.x, l = b.width - g) : j > i ? k = d - (j - i) : (k = d, l = c.width),
							this.labelDivManager.changeLabelDim({
								left: k - e.x,
								width: l - e.width
							}),
							this.translateX(l - e.width + k - e.x),
							this.textBounds.x = k,
							this.textBounds.width = l;
							break;
						default:
							this.labelDivManager.changeLabelDim({
								width: -a
							}),
							this.translateX(-a)
						}
				},
				remove: function () {
					this._titleG && (this._titleG.remove(), this._titleG = null),
					this.removeDivLabels()
				}
			});
		return a("./RenderLibrary").register(d.TITLE_SVG, g),
		g
	}),
	c("render/BaseAxisSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/BezierEasing", "../Constants"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/BezierEasing"),
		e = a("../Constants"),
		f = 400,
		g = d.css.swing,
		h = "axis-tick-text",
		i = "axis-tick-line",
		j = "axis-minor-tick-line",
		k = "axis-grid-line",
		l = "plot-bands",
		m = "plot-lines",
		n = "axis-line",
		o = "highlight-band",
		p = b.extend({
				render: function () {
					var a = this.component.getVanchartRender().getRenderRoot().select("g." + e.AXIS_GROUP);
					if (this.labelDivManager.clearAllLabels(), this._axisG) {
						this.component.option.plotOptions.large ? this._axisG.call(this._drawAxis.bind(this)) : this._axisG.transition().ease(g).duration(f).call(this._drawAxis.bind(this)),
						clearTimeout(this._animation_);
						var b = this;
						this._animation_ = setTimeout(function () {
								b._axisG.call(b._drawAxis.bind(b))
							}, f + 100)
					} else
						this._axisG = a.append("g"), this._axisG.call(this._drawAxis.bind(this));
					this._axisTitleG = this._axisTitleG || a.append("g");
					var c = this.component.getAxisTitleBounds();
					this._axisTitleG.attr("transform", "translate(" + c.x + "," + c.y + ")"),
					this._drawAxisTitle(c)
				},
				drawHighlightBand: function (a) {
					var b = this.component;
					if (b._getBandByPosition) {
						var c = b._getBandByPosition(a),
						d = b.getHighlightType();
						switch (this.removeHighlightBand(), d) {
						case "band":
							this._axisG.append("rect").attr("class", o).attr("x", c.x).attr("y", c.y).attr("width", c.width).attr("height", c.height).style("fill", "rgba(98,179,240,0.2)");
							break;
						case "line":
						default:
							this._axisG.append("line").attr("class", o).attr("x1", c.x).attr("y1", c.y).attr("x2", c.x + c.width).attr("y2", c.y + c.height).attr("stroke", "rgb(140,140,140)").attr("stroke-width", "1")
						}
					}
				},
				removeHighlightBand: function () {
					this._axisG.select("." + o).remove()
				},
				_drawPlotBands: function (a) {
					var b = this.component._preCalculatePlotBands(),
					d = this.component.getPlotBounds();
					a.each(function () {
						var a = d3.select(this).selectAll("." + l).data(b);
						a.exit().remove(),
						a.enter().append("rect").attr("class", l),
						a.attr("transform", c.makeTranslate(d)).style("fill", function (a) {
							return a.color
						}),
						d3.transition(a).attr("x", function (a) {
							return a.x
						}).attr("y", function (a) {
							return a.y
						}).attr("width", function (a) {
							return a.width
						}).attr("height", function (a) {
							return a.height
						})
					})
				},
				_drawPlotLines: function (a) {
					var b = this.component._preCalculatePlotLines(),
					d = this.component.getPlotBounds();
					a.each(function () {
						var a = d3.select(this).selectAll("." + m).data(b);
						a.exit().remove();
						var e = a.enter().append("g").attr("class", m);
						e.append("line"),
						e.append("text"),
						d3.transition(a).attr("transform", c.makeTranslate(d)),
						d3.transition(a.select("line")).attr("x1", function (a) {
							return a.startPos.x
						}).attr("y1", function (a) {
							return a.startPos.y
						}).attr("x2", function (a) {
							return a.endPos.x
						}).attr("y2", function (a) {
							return a.endPos.y
						}).style("stroke", function (a) {
							return a.color
						}).style("stroke-width", function (a) {
							return a.width
						}).style("stroke-dasharray", function (a) {
							return a.dataArray
						}),
						d3.transition(a.select("text")).text(function (a) {
							return a.text
						}).attr("x", function (a) {
							return a.textX
						}).attr("y", function (a) {
							return a.textY
						}).attr("dy", "0.85em").each(function (a) {
							d3.select(this).call(c.setTextStyle, a.style)
						})
					})
				},
				_drawGridLine: function (a) {
					var b = this.component.componentOption,
					d = this.component.getPlotBounds(),
					e = b.gridLineWidth,
					f = this.component.getTickData(),
					g = this.component.scale,
					h = this.component.lastScale || g,
					i = "x1",
					j = "y1",
					l = "x2",
					m = "y2",
					n = d.height,
					o = d.width;
					this.component.isHorizontal() || (i = "y1", j = "x1", l = "y2", m = "x2", n = d.width, o = 0);
					var p = b.gridLineColor,
					q = c.lineSubPixelOpt(0, e);
					a.each(function () {
						d3.select(this).selectAll("." + k).data([0]).enter().append("g").attr("class", k);
						var a = d3.select(this).select("g." + k).selectAll("line").data(f, function (a) {
								return a.tickValue
							});
						if (e) {
							d3.transition(a.exit()).style("opacity", 0).attr(i, function (a) {
								return g(a.tickValue)
							}).attr(j, 0).attr(l, function (a) {
								return g(a.tickValue)
							}).attr(m, n).remove();
							var b = a.enter();
							b.append("line").attr("class", k).attr("transform", c.makeTranslate(d)).attr(i, function (a) {
								return h(a.tickValue) + q
							}).attr(j, 0).attr(l, function (a) {
								return h(a.tickValue) + q
							}).attr(m, n).style({
								stroke: p,
								"stroke-width": e,
								opacity: 0
							}),
							d3.transition(a).attr("transform", c.makeTranslate(d)).attr(i, function (a) {
								return a.tickPos + q
							}).attr(j, 0).attr(l, function (a) {
								return a.tickPos + q
							}).attr(m, n).style("opacity", 1)
						} else
							a.remove()
					})
				},
				_drawTickLine: function (a) {
					var b = this.component.componentOption,
					d = this.component.getMainTickData(),
					f = b.enableTick ? b.tickLength : 0,
					g = b.tickWidth,
					h = b.tickColor,
					j = this.component._getAxisOriginPoint(),
					k = this.component.getPosition(),
					l = "x1",
					m = "y1",
					n = "x2",
					o = "y2";
					this.component.isHorizontal() || (l = "y1", m = "x1", n = "y2", o = "x2");
					var p = k == e.TOP || k == e.LEFT ? -1 : 1,
					q = c.lineSubPixelOpt(0, g);
					a.each(function () {
						var a = d3.select(this).selectAll("." + i).data(d);
						f && g ? (a.enter().append("line").attr("class", i).attr("transform", c.makeTranslate(j)).style({
								stroke: h,
								"stroke-width": g
							}), a.exit().remove(), d3.transition(a).attr("transform", c.makeTranslate(j)).attr(l, function (a) {
								return a.tickPos + q
							}).attr(m, 0).attr(n, function (a) {
								return a.tickPos + q
							}).attr(o, p * f)) : a.remove()
					})
				},
				_drawTickLabel: function (a) {
					var b = this.component.componentOption,
					d = (this.component.getPlotBounds(), this.component.scale),
					f = this.component.lastScale || d,
					g = this.component.getTickData(),
					i = b.enableTick ? b.tickLength : 0,
					j = b.labelRotation || 0,
					k = this.component._getAxisOriginPoint(),
					l = b.useHtml && !b.labelRotation,
					m = b.labelStyle,
					n = c.getTextHeight(m),
					o = b.tickPadding + i || 0,
					p = this.component.getPosition(),
					q = p == e.TOP || p == e.LEFT ? -1 : 1,
					r = this.component.isHorizontal(),
					s = "x",
					t = "y";
					r || (s = "y", t = "x");
					var u = this;
					a.each(function () {
						var a = d3.select(this).selectAll("." + h).data(g, function (a) {
								return a.tickValue
							});
						b.showLabel && !l ? (a.enter().append("text").attr("class", h).attr("transform", function (a) {
								return u._getLabelTransform(f, a, q, o, k, j)
							}).attr(s, function (a) {
								return f(a.tickValue)
							}).style("text-anchor", "middle").style("opacity", 0).call(c.setTextStyle, m), d3.transition(a.exit()).attr(s, function (a) {
								return d(a.tickValue)
							}).style("opacity", 0).remove(), d3.transition(a).attr("transform", function (a) {
								return u._getLabelTransform(d, a, q, o, k, j)
							}).text(function (a) {
								return a.tickContent
							}).attr(s, function (a) {
								return a.tickLabelPos
							}).attr(t, function (a) {
								if (r) {
									var b = p == e.TOP ? o + a.tickDim.height / 2 - n / 2 : o + a.tickDim.height / 2 + n / 2;
									return q * b
								}
								return q * (o + a.tickDim.width / 2)
							}).attr("dy", r ? 0 : ".32em").style("opacity", 1)) : a.remove()
					})
				},
				_getLabelTransform: function (a, b, d, e, f, g) {
					var h,
					i,
					j = a.rangeBand ? -a.rangeBand() / 2 : 0,
					k = Math.round(a(b.tickValue)) - j;
					return this.component.isHorizontal() ? (h = k, i = d * (e + b.tickDim.height / 2)) : (h = d * (e + b.tickDim.width / 2), i = k),
					c.makeTranslate(f) + "rotate(" + g + " " + h + "," + i + ")"
				},
				_drawAxisLine: function (a) {
					var b = this.component.componentOption,
					d = this.component.getPlotBounds(),
					e = this.component._getAxisOriginPoint(),
					f = b.lineWidth,
					g = b.lineColor,
					h = "x1",
					i = "y1",
					j = "x2",
					k = "y2",
					l = d.width;
					this.component.isHorizontal() || (h = "y1", i = "x1", j = "y2", k = "x2", l = d.height);
					var m = c.lineSubPixelOpt(0, f);
					a.each(function () {
						var a = d3.select(this).selectAll("line." + n).data([0]);
						f ? (a.exit().remove(), a.enter().append("line").attr("class", n), d3.transition(a).attr("transform", c.makeTranslate(e)).attr(h, 0).attr(i, m).attr(j, l).attr(k, m).style({
								stroke: g,
								"stroke-width": f
							})) : a.remove()
					})
				},
				_drawMinorTickLine: function (a) {
					var b = this.component.componentOption,
					d = b.enableMinorTick ? b.minorTickLength : 0,
					f = b.minorTickWidth,
					g = b.minorTickColor,
					h = this.component.getMinorTickData(),
					i = this.component._getAxisOriginPoint(),
					k = this.component.getPosition(),
					l = "x1",
					m = "y1",
					n = "x2",
					o = "y2";
					this.component.isHorizontal() || (l = "y1", m = "x1", n = "y2", o = "x2");
					var p = k == e.TOP || k == e.LEFT ? -1 : 1,
					q = c.lineSubPixelOpt(0, f),
					r = this.component.type == e.CATEGORY_AXIS_COMPONENT,
					s = this.component.scale;
					a.each(function () {
						var a = d3.select(this).selectAll("." + j).data(h);
						d && f ? (a.enter().append("line").attr("class", j).attr("transform", c.makeTranslate(i)).style({
								stroke: g,
								"stroke-width": f
							}), a.exit().remove(), d3.transition(a).attr("transform", c.makeTranslate(i)).attr(l, function (a) {
								return (r ? a : s(a)) + q
							}).attr(m, 0).attr(n, function (a) {
								return (r ? a : s(a)) + q
							}).attr(o, p * d)) : a.remove()
					})
				},
				_drawDivLabels: function () {
					var a = this.labelDivManager,
					b = this.component.componentOption;
					if (b.useHtml && !b.labelRotation) {
						var d,
						f,
						g = this.component._getAxisOriginPoint(),
						h = g.x,
						i = g.y,
						j = this.component.getPosition(),
						k = this.component.isHorizontal(),
						l = this.component.getTickScale(),
						m = this.component.getTickData(),
						n = b.enableTick ? b.tickLength : 0,
						o = (l.rangeBand ? 0 : n) + b.tickPadding,
						p = b.labelStyle,
						q = c.getTextHeight(p);
						b.useHtml && !b.labelRotation && (k ? (f = j == e.TOP ?  - (o + q) : o, m.forEach(function (b) {
									d = b.tickLabelPos - b.tickDim.width / 2,
									a.addLabel(b.tickContent, {
										x: d + h,
										y: f + i
									}, p)
								})) : m.forEach(function (b) {
								d = j == e.LEFT ?  - (o + b.tickDim.width) : o,
								f = b.tickLabelPos - q / 2,
								a.addLabel(b.tickContent, {
									x: d + h,
									y: f + i
								}, p)
							}))
					}
				},
				_drawAxis: function (a) {
					this._drawPlotBands(a),
					this._drawAxisLine(a),
					this._drawGridLine(a),
					this._drawArrow(a),
					this._drawTickLine(a),
					this._drawTickLabel(a),
					this._drawDivLabels(),
					this._drawMinorTickLine(a),
					this._drawPlotLines(a)
				},
				_drawArrow: function (a) {
					if (this.component.showArrow()) {
						var b = this.component.getPlotBounds(),
						d = this.component.componentOption,
						e = d.lineWidth,
						f = d.lineColor,
						g = c.lineSubPixelOpt(0, e),
						h = this.component._getAxisOriginPoint();
						this._axisG.select("g.arrow").remove();
						var i;
						this.component.isHorizontal() ? this.component.isAxisReversed() ? (i = c.makeTranslate([h.x, h.y]) + " rotate(180)", g = -g) : i = c.makeTranslate([h.x + b.width, h.y]) : this.component.isAxisReversed() ? (i = c.makeTranslate([h.x, h.y + b.height]) + " rotate(90)", g = -g) : i = c.makeTranslate([h.x, h.y]) + " rotate(-90)";
						var j = this._axisG.append("g").attr("class", "arrow").attr("transform", i);
						j.append("line"),
						j.append("path"),
						j.select("line").attr("x1", 0).attr("y1", g).attr("x2", 6).attr("y2", g).style({
							stroke: f,
							"stroke-width": e
						}),
						j.select("path").attr("d", "M2,2 L10,6 L2,10 L6,6 L2,2").attr("transform", "translate(0," + (g - 6) + ")").style("fill", f)
					}
				},
				_drawAxisTitle: function (a) {
					this.component.isHorizontal() ? this._drawHorizontalTitle(a) : this._drawVerticalTitle(a)
				},
				_drawHorizontalTitle: function (a) {
					var b = this.component.componentOption;
					if (b.title) {
						var d = b.title;
						if (d.useHtml)
							this._drawHorizontalAxisTitleWithHtml(d, a);
						else {
							var f,
							g,
							h,
							i = d.rotation || 0,
							j = c.getTextDimension(d.text, d.style, d.useHtml),
							k = this.component.getTitleAlign();
							switch (k) {
							case "left":
								f = 0,
								h = f + j.width / 2,
								g = "start";
								break;
							case "center":
								f = a.width / 2,
								h = f,
								g = "middle";
								break;
							case "right":
								f = a.width,
								h = f - j.width / 2,
								g = "end"
							}
							var l = this.component.getTitleLabelGap(),
							m = a.height / 2,
							n = .85 * j.height + (this.component.getPosition() == e.BOTTOM ? l : -l);
							this._axisTitleG.select("text").remove(),
							this._axisTitleG.append("text").attr("x", f).attr("y", n).text(d.text).style("text-anchor", g).attr("transform", "rotate(" + i + " " + h + "," + m + ")").call(c.setTextStyle, d.style)
						}
					}
				},
				_drawVerticalTitle: function (a) {
					var b = this.component.componentOption;
					if (b.title) {
						var d = b.title;
						if (d.useHtml)
							this._drawVerticalAxisTitleWithHtml(d, a);
						else {
							var e,
							f,
							g = d.rotation || 0,
							h = c.getTextDimension(d.text, d.style, d.useHtml),
							i = c.getTextDimensionWithRotation(d.text, d.style, d.useHtml, g),
							j = a.width / 2,
							k = j,
							l = this.component.getTitleAlign();
							switch (l) {
							case "top":
								e = h.height + i.height / 2;
								break;
							case "center":
								e = h.height + (a.height - h.height) / 2;
								break;
							case "bottom":
								e = a.height - i.height / 2
							}
							f = e,
							this._axisTitleG.select("text").remove(),
							this._axisTitleG.append("text").attr("x", j).attr("y", e).text(d.text).style("text-anchor", "middle").attr("transform", "rotate(" + g + " " + k + "," + f + ")").call(c.setTextStyle, d.style)
						}
					}
				},
				remove: function () {
					this.removeDivLabels(),
					this._axisG.remove(),
					this._axisTitleG.remove()
				}
			});
		return p
	}),
	c("render/CategoryAxisSvgRender", ["require", "./BaseAxisSvgRender", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseAxisSvgRender"),
		c = a("../Constants"),
		d = b.extend({});
		a("./RenderLibrary").register(c.CATEGORY_AXIS_SVG, d)
	}),
	c("render/ValueAxisSvgRender", ["require", "./BaseAxisSvgRender", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseAxisSvgRender"),
		c = a("../Constants"),
		d = b.extend({});
		a("./RenderLibrary").register(c.VALUE_AXIS_SVG, d)
	}),
	c("render/RadiusAxisSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/BezierEasing", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/BezierEasing"),
		e = a("../Constants"),
		f = 400,
		g = (d.css.swing, "radius-axis-grid-line"),
		h = "plot-bands",
		i = "plot-lines",
		j = "value-axis-line",
		k = 2,
		l = "value-axis-tick-text",
		m = b.extend({
				render: function () {
					var a = this.component.getVanchartRender().getRenderRoot().select("g." + e.AXIS_GROUP);
					this.labelDivManager.clearAllLabels();
					var b = "polarClip" + this.component.vanchart.getIDPrefix();
					this._axisG ? this._axisG.transition().ease("linear").duration(f).call(this._drawAxis.bind(this)) : (this._axisG = a.append("g"), this._axisG.call(this._drawAxis.bind(this)));
					var d = this.component,
					g = this._axisG.select("#" + b);
					g.select("path").remove(),
					g.append("path").attr("d", function () {
						return d._getRadiusGridPath(d.scale.domain()[1])
					}),
					this._axisG.attr("transform", c.makeTranslate(this.component.polar.center))
				},
				_drawAxis: function (a) {
					this._drawGridLine(a),
					this._drawPlotBands(a),
					this._drawPlotLines(a),
					this._drawTickLabel(a)
				},
				_drawAxisLine: function (a) {
					var b = this.component.componentOption,
					c = b.lineWidth,
					d = b.lineColor,
					e = this.component.getPolarInitPoint();
					a.each(function () {
						var a = d3.select(this).selectAll("line." + j).data([e]);
						c ? (a.exit().remove(), a.enter().append("line").attr("class", j), d3.transition(a).attr("x2", function (a) {
								return a[0]
							}).attr("y2", function (a) {
								return a[1]
							}).style({
								stroke: d,
								"stroke-width": c
							})) : a.remove()
					})
				},
				_drawGridLine: function (a) {
					var b = this.component,
					c = b.lastScale || b.valueScale,
					d = b.componentOption,
					e = b.getTickData(),
					f = d.gridLineColor,
					h = d.gridLineWidth;
					a.each(function () {
						var a = d3.select(this).selectAll("path." + g).data(e, function (a) {
								return a.tickValue
							});
						if (h) {
							a.enter().append("path").attr("class", g).attr("d", function (a) {
								return this._currentPos_ = b._getRadiusGridData(a.tickValue, !1, c),
								b._getRadiusGridPathByData(this._currentPos_)
							}).style({
								fill: "none",
								stroke: f,
								"stroke-width": h,
								opacity: 1
							});
							var d = d3.transition(a).style("opacity", 1);
							d.attrTween ? d.attrTween("d", function (a) {
								var c = this._currentPos_;
								this._currentPos_ = b._getRadiusGridData(a.tickValue);
								var d = d3.interpolate(c, this._currentPos_);
								return function (a) {
									return b._getRadiusGridPathByData(d(a))
								}
							}) : d.attr("d", function (a) {
								return this._currentPos_ = b._getRadiusGridData(a.tickValue),
								b._getRadiusGridPathByData(this._currentPos_)
							});
							var i = d3.transition(a.exit()).style("opacity", 0).remove();
							i.attrTween && i.attrTween("d", function (a) {
								var c = this._currentPos_;
								this._currentPos_ = b._getRadiusGridData(a.tickValue);
								var d = d3.interpolate(c, this._currentPos_);
								return function (a) {
									return b._getRadiusGridPathByData(d(a))
								}
							})
						} else
							a.remove()
					})
				},
				_drawPlotBands: function (a) {
					var b = this.component.getRadiusPlotBands();
					a.each(function () {
						var a = d3.select(this).selectAll("path." + h).data(b);
						a.exit().remove(),
						a.enter().append("path").attr("class", h),
						d3.transition(a).attr("d", function (a) {
							return a.path
						}).style("fill", function (a) {
							return a.color
						})
					})
				},
				_drawPlotLines: function (a) {
					var b = this.component.getPlotLines(),
					d = this;
					a.each(function () {
						var a = d3.select(this).selectAll("." + i).data(b);
						a.exit().remove();
						var e = a.enter().append("g").attr("class", i);
						e.append("path"),
						e.append("text"),
						d3.transition(a.select("path")).attr("d", function (a) {
							return d.component._getRadiusGridPath(a.value)
						}).style("fill", "none").style("stroke", function (a) {
							return a.color
						}).style("stroke-width", function (a) {
							return a.width
						}).style("stroke-dasharray", function (a) {
							return a.dataArray
						}),
						d3.transition(a.select("text")).text(function (a) {
							return a.text
						}).attr("y", function (a) {
							return a.baseY
						}).attr("text-anchor", function (a) {
							return a.textAnchor
						}).each(function (a) {
							d3.select(this).call(c.setTextStyle, a.style)
						})
					})
				},
				_drawTickLabel: function (a) {
					var b = this.component,
					d = b.scale,
					e = b.lastScale || b.scale,
					f = b.componentOption,
					g = b.getTickData();
					g.length = Math.max(g.length - 1, 0);
					var h = f.labelStyle,
					i = f.labelRotation,
					j = f.useHtml;
					if (j && !i)
						for (var m = b.polar.center, n = 0, o = g.length; o > n; n++) {
							var p = g[n],
							q = -p.tickDim.width - k + m[0],
							r = -d(p.tickValue) - p.tickDim.height + m[1];
							this.labelDivManager.addLabel(p.tickContent, {
								x: q,
								y: r
							}, h)
						}
					else
						a.each(function () {
							var a = d3.select(this).selectAll("text." + l).data(g, function (a) {
									return a.tickValue
								});
							f.showLabel ? (a.exit().remove(), a.enter().append("text").attr("class", l).attr("x", -k).attr("y", function (a) {
									return -e(a.tickValue)
								}).attr("transform", function (a) {
									return "rotate(" + i + " 0 0)"
								}), a.call(c.setTextStyle, h), d3.transition(a).text(function (a) {
									return a.tickContent
								}).attr("y", function (a) {
									return -d(a.tickValue)
								}).style("text-anchor", "end")) : a.remove()
						})
				},
				remove: function () {
					this.removeDivLabels(),
					this._axisG.remove()
				}
			});
		a("./RenderLibrary").register(e.RADIUS_AXIS_SVG, m)
	}),
	c("render/AngleAxisSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/BezierEasing", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = (a("../utils/BezierEasing"), a("../Constants")),
		e = 400,
		f = "angle-axis-line",
		g = "angle-axis-grid-line",
		h = "category-axis-tick-text",
		i = "highlight-band",
		j = b.extend({
				render: function () {
					var a = this.component.getVanchartRender().getRenderRoot().select("g." + d.AXIS_GROUP);
					this.labelDivManager.clearAllLabels(),
					this._axisG ? this._axisG.transition().ease("linear").duration(e).call(this._drawAxis.bind(this)) : (this._axisG = a.append("g"), this._axisG.call(this._drawAxis.bind(this))),
					this._axisG.attr("transform", c.makeTranslate(this.component.polar.center))
				},
				_drawAxis: function (a) {
					this._drawAxisLine(a),
					this._drawGridLine(a),
					this._drawTickLabel(a)
				},
				drawHighlightBand: function (a) {
					var b = this.component;
					if (b._getBandByPosition) {
						var c = b._getBandByPosition(a),
						d = b.getHighlightType();
						switch (this.removeHighlightBand(), d) {
						case "band":
							this._axisG.append("path").attr("class", i).attr("d", c.d).style("fill", "rgba(98,179,240,0.2)");
							break;
						case "line":
						default:
							this._axisG.append("line").attr("class", i).attr("x2", c.x).attr("y2", c.y).attr("stroke", "rgb(140,140,140)").attr("stroke-width", "1")
						}
					}
				},
				removeHighlightBand: function () {
					this._axisG.select("." + i).remove()
				},
				_drawAxisLine: function (a) {
					var b = this.component.polar.radiusAxis,
					c = this.component,
					d = c.componentOption.lineWidth,
					e = c.componentOption.lineColor,
					g = b.scale.domain()[1];
					a.each(function () {
						var a = d3.select(this).selectAll("path." + f).data([0]);
						d ? (a.enter().append("path").attr("class", f), d3.transition(a).attr("d", function () {
								return b._getRadiusGridPath(g)
							}).style({
								fill: "none",
								stroke: e,
								"stroke-width": d
							})) : a.remove()
					})
				},
				_drawGridLine: function (a) {
					var b = this.component.polar.radiusAxis.componentOption,
					c = b.lineWidth,
					d = b.lineColor,
					e = this.component.getAngleGridLineData();
					a.each(function () {
						var a = d3.select(this).selectAll("line." + g).data(e);
						c ? (a.exit().remove(), a.enter().append("line").attr("class", g), d3.transition(a).attr("x2", function (a) {
								return a[0]
							}).attr("y2", function (a) {
								return a[1]
							}).style({
								stroke: d,
								"stroke-width": c
							})) : a.remove()
					})
				},
				_drawTickLabel: function (a) {
					var b = this.component,
					d = b.componentOption,
					e = d.labelStyle,
					f = d.labelRotation || 0,
					g = d.useHtml,
					i = b.tickData,
					j = c.getTextHeight(e);
					if (g && !f)
						for (var k = b.polar.center, l = 0, m = i.length; m > l; l++) {
							var n = i[l],
							o = n.tickPos.x + k[0],
							p = n.tickPos.y + k[1];
							this.labelDivManager.addLabel(n.tickContent, {
								x: o,
								y: p
							}, e)
						}
					else
						a.each(function () {
							d3.select(this).selectAll("text." + h).remove();
							var a = d3.select(this).selectAll("text." + h).data(i);
							d.showLabel && (a.enter().append("text").attr("class", h).call(c.setTextStyle, e), a.each(function (a) {
									var b = a.tickContent;
									if (c.isArray(b)) {
										for (var d = a.tickPos.x < 0 ? a.tickDim.width : 0, h = a.tickPos.x < 0 ? "end" : "start", i = 0, k = b.length; k > i; i++)
											0 == i ? d3.select(this).append("tspan").text(b[i]).attr("x", d + a.tickPos.x).attr("y", .85 * j + a.tickPos.y).attr("text-anchor", h) : d3.select(this).append("tspan").text(b[i]).attr("x", d + a.tickPos.x).attr("y", .85 * j + i * (1.3 * j) + a.tickPos.y).attr("text-anchor", h);
										if (f) {
											var l = a.tickPos.x + a.tickDim.width / 2,
											m = a.tickPos.y + a.tickDim.height / 2;
											d3.select(this).attr("transform", "rotate(" + f + " " + l + "," + m + ")")
										}
									} else {
										var l = a.tickPos.x + a.tickDim.width / 2,
										m = a.tickPos.y + a.tickDim.height / 2,
										n = c.getTextDimension(b, e, g);
										d3.select(this).text(b).attr("x", l - n.width / 2).attr("y", m - n.height / 2).attr("text-anchor", "start").attr("dy", ".85em").attr("transform", "rotate(" + f + " " + l + "," + m + ")")
									}
								}))
						})
				},
				remove: function () {
					this.removeDivLabels(),
					this._axisG.remove()
				}
			});
		a("./RenderLibrary").register(d.ANGLE_AXIS_SVG, j)
	}),
	c("render/DateAxisSvgRender", ["require", "./BaseAxisSvgRender", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseAxisSvgRender"),
		c = a("../Constants"),
		d = b.extend({});
		a("./RenderLibrary").register(c.DATE_AXIS_SVG, d)
	}),
	c("render/LegendSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../utils/BezierEasing", "../Constants", "./LegendIconFactory", "../dom/DomEvent", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../utils/BezierEasing"),
		e = a("../Constants"),
		f = a("./LegendIconFactory"),
		g = a("../dom/DomEvent"),
		h = "legend-item",
		i = "legend-marker",
		j = "legend-label",
		k = "legend-gradual-background",
		l = "legend-pages",
		m = "rgb(67,67,72)",
		n = "rgb(204,204,204)",
		o = b.extend({
				render: function () {
					if (this.component.componentOption.visible) {
						var a = this.component.getVanchartRender().getRenderRoot(),
						b = this.component.bounds;
						this._legendG = this._legendG || a.append("g").on("mousedown", function () {
								g.stopPropagation(d3.event)
							}),
						this._legendG.attr("transform", "translate(" + b.x + "," + b.y + ")").style("pointer-events", "all"),
						this._updateBackground(),
						this.component.isHorizontal() ? this._updateHorizontal() : this._updateVertical()
					}
				},
				_updateBackground: function () {
					var a = this.component.componentOption,
					b = this.component.bounds,
					c = this.component.vanchart.getIDPrefix(),
					d = k + c;
					this._renderSvgBackground(this._legendG, a, b, d)
				},
				_renderVerticalWithPages: function (a) {
					var b = this.component.bounds.width,
					e = this.component.bounds.height;
					e -= this.component.getButtonHeight();
					var f = this.component.vanchart.getIDPrefix() + l,
					g = a.selectAll("defs").data([0]);
					g.enter().append("defs");
					var h = g.selectAll("#" + f).data([0]);
					h.enter().append("clipPath").attr("id", f).append("rect"),
					h.select("rect").attr("width", b).attr("height", e);
					var i = a.selectAll("g.clip").data([0]);
					i.enter().append("g").attr("class", "clip"),
					i = a.select("g.clip").attr("clip-path", "url(#" + f + ")");
					var j = i.selectAll("g.pageG").data([0]);
					j.enter().append("g").attr("class", "pageG"),
					j = i.select("g.pageG"),
					this._renderVerticalWithoutPages(j);
					var k = 40,
					o = a.selectAll("g.button").data([0]);
					o.enter().append("g").attr("class", "button"),
					o = a.select("g.button").attr("transform", "translate(0," + e + ")");
					var p = (b - k) / 2,
					q = (b + k) / 2,
					r = e - this.component.getPadding(),
					s = this.component.getPreHeight();
					this.pageIndex = c.pick(this.pageIndex, 0);
					var t = Math.ceil((s - e) / r) + 1,
					u = b / 2,
					v = o.selectAll("text").data([0]);
					v.enter().append("text"),
					v.attr("x", u).attr("y", 0).attr("dy", ".71em").attr("text-anchor", "middle").text(this.pageIndex + 1 + "/" + t).style("font-Family", "Verdana").style("font-Size", "14px");
					var w = this,
					x = o.selectAll("path.left").data([0]);
					x.enter().append("path").attr("class", "left").attr("d", this._prePageButtonPath(p)).style("cursor", "pointer").style("fill", n).on("click", function () {
						if (!(w.pageIndex <= 0)) {
							var a = d3.transform(j.attr("transform")).translate,
							b = a[0],
							c = 1 == w.pageIndex ? 0 : a[1] + r;
							j.transition().duration(500).ease(d.css.swing).attr("transform", "translate(" + b + "," + c + ")"),
							w.pageIndex--;
							var e = w.pageIndex + 1;
							v.text(e + "/" + t),
							y.style("fill", w.pageIndex == t - 1 ? n : m),
							d3.select(this).style("fill", w.pageIndex <= 0 ? n : m)
						}
					});
					var y = o.selectAll("path.right").data([0]);
					y.enter().append("path").attr("class", "right").attr("d", this._nextPageButtonPath(q)).style("cursor", "pointer").style("fill", m).on("click", function () {
						if (w.pageIndex != t - 1) {
							var a = d3.transform(j.attr("transform")).translate,
							b = a[0],
							c = a[1] - r;
							j.transition().duration(800).ease(d.css.swing).attr("transform", "translate(" + b + "," + c + ")"),
							w.pageIndex++;
							var e = w.pageIndex + 1;
							v.text(e + "/" + t),
							d3.select(this).style("fill", w.pageIndex == t - 1 ? n : m),
							x.style("fill", w.pageIndex <= 0 ? n : m)
						}
					})
				},
				_prePageButtonPath: function (a) {
					var b = 12,
					c = 0,
					d = a - b / 2,
					e = b / 2 * Math.sqrt(3),
					f = a + b / 2,
					g = e;
					return "M" + a + "," + c + "L" + d + "," + e + "L" + f + "," + g + "Z"
				},
				_nextPageButtonPath: function (a) {
					var b = 12,
					c = 0,
					d = a - b / 2,
					e = c,
					f = a + b / 2,
					g = c,
					h = a,
					i = b / 2 * Math.sqrt(3);
					return "M" + d + "," + e + "L" + f + "," + g + "L" + h + "," + i + "Z"
				},
				_renderVerticalWithoutPages: function (a) {
					var b = this.component.getLegendItems(),
					d = this,
					e = this.component,
					g = this.component.componentOption,
					k = this.component.getPadding() + this.component.verticalAlign,
					l = this.component.getGap(),
					m = a.selectAll("g." + h).data(b);
					m.exit().remove(),
					m.enter().append("g").attr("class", h).each(function (a) {
						var b = d3.select(this),
						c = f.hasIcon(a.legendIconType) ? "path" : "image";
						b.append(c).attr("class", i),
						b.append("text").attr("class", j),
						b.call(d._bindMouseEvent.bind(d))
					}),
					a.selectAll("g." + h).each(function (a, b) {
						var h = d3.select(this),
						m = f.getLegendIconSize(a.legendIconType),
						n = c.getTextDimension(a.itemName, g.style, !0),
						o = Math.max(m.height, n.height) / 2,
						p = e.getPreHeight(b),
						q = h.select("." + i).attr("transform", "translate(" + k + "," + (p + o - m.height / 2) + ")");
						d._updateLegendMarker(q, a),
						h.select("text." + j).text(function (a) {
							return a.itemName
						}).attr("x", k + m.width + l).attr("y", p + o).attr("dy", ".35em").call(c.setTextStyle, g.style).style("fill", function (a) {
							return a.visible ? g.style.color : a.hiddenColor
						})
					})
				},
				_updateVertical: function () {
					var a = this._legendG.selectAll("g.vertical").data([0]);
					a.enter().append("g").attr("class", "vertical"),
					a = this._legendG.select("g.vertical");
					var b = c.pick(this.hasEnoughSpace, this.component.hasEnoughVerticalSpace()),
					d = this.component.hasEnoughVerticalSpace();
					d != b && (a.remove(), a = this._legendG.append("g").attr("class", "vertical"), this.hasEnoughSpace = d),
					this.component.hasEnoughVerticalSpace() ? this._renderVerticalWithoutPages(a) : this._renderVerticalWithPages(a)
				},
				_updateHorizontal: function () {
					function a(a, b) {
						for (var c = 0, d = 0; d < a.lineIndex; d++)
							c += g[d].length;
						return b - c
					}
					for (var b = this.component.getPadding(), d = this.component.getHorizontalGap(), e = this.component.getGap(), g = this.component.getHorizontalLineItems(), k = this.component.getLineHeight(), l = [], m = [], n = this.component.componentOption, o = this.component.bounds.width, p = b, q = 0, r = g.length; r > q; q++) {
						for (var s = g[q], t = this.component.getHorizontalItemsWidth(s), u = Math.round((o - t) / 2), v = [u], w = 1; w < s.length; w++) {
							var x = s[w - 1],
							y = f.getLegendIconSize(x.legendIconType),
							z = c.getTextDimension(x.itemName, n.style, !0);
							u += y.width + e + z.width + d,
							v.push(u)
						}
						l.push(v),
						m.push(p),
						p += k[q] + b
					}
					var A = this,
					s = this.component.getLegendItems(),
					B = this._legendG.selectAll("g." + h).data(s);
					B.exit().remove();
					var C = B.enter();
					C.append("g").attr("class", h).each(function (a) {
						var b = d3.select(this),
						c = f.hasIcon(a.legendIconType) ? "path" : "image";
						b.append(c).attr("class", i),
						b.append("text").attr("class", j),
						b.call(A._bindMouseEvent.bind(A))
					}),
					B.each(function (b, d) {
						var g = d3.select(this),
						h = f.getLegendIconSize(b.legendIconType),
						j = c.getTextDimension(b.itemName, n.style, !0),
						k = Math.max(h.height, j.height) / 2;
						d = a(b, d);
						var o = l[b.lineIndex][d],
						p = m[b.lineIndex],
						q = b.visible ? n.style.color : b.hiddenColor,
						r = g.select("." + i).attr("transform", "translate(" + o + "," + (p + k - h.height / 2) + ")");
						A._updateLegendMarker(r, b),
						g.select("text").text(function (a) {
							return a.itemName
						}).attr("x", o + h.width + e).attr("y", p + k).attr("dy", ".35em").call(c.setTextStyle, n.style).style("fill", q)
					})
				},
				_updateLegendMarker: function (a, b) {
					var c = b.visible ? b.color : b.hiddenColor;
					f.hasIcon(b.legendIconType) ? (a.attr("d", function () {
							return f.getLegendIconPath(b.legendIconType)
						}).style("fill", c).style("fill-opacity", b.fillColorOpacity), b.series.type == e.BUBBLE_CHART && a.style("stroke", function (a) {
							return a.visible ? a.color : a.hiddenColor
						}).style("stroke-width", 1)) : a.attr("preserveAspectRatio", "none").attr("xlink:href", b.legendIconType).attr("width", 12).attr("height", 12)
				},
				_bindMouseEvent: function (a) {
					var b = this.component.vanchart,
					c = this.component.componentOption;
					a.style("cursor", "pointer").on("mouseenter", function (a) {
						d3.select(this).select("." + j).style("fill", a.hoverColor)
					}).on("mouseleave", function (a) {
						var b = a.visible ? c.style.color : a.hiddenColor;
						d3.select(this).select("." + j).style("fill", b)
					}).on("click", function (a) {
						var c = a.itemName;
						b.series.map(function (a) {
							if (a.type == e.PIE_CHART || a.type === e.MULTIPIE_CHART) {
								var b = a.type == e.PIE_CHART ? "seriesName" : "name";
								a.points.map(function (a) {
									a[b] == c && (a.visible = !a.visible)
								}),
								a.updateVisiblePoints()
							} else
								a.name === c && (a.visible = !a.visible)
						}),
						b.currentOption.byClassName = !0,
						b.refreshComponentsAndSeries()
					})
				},
				remove: function () {
					this._legendG && this._legendG.remove(),
					this._legendG = null
				}
			});
		return a("./RenderLibrary").register(e.LEGEND_SVG, o),
		o
	}),
	c("render/ToolbarSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../Constants", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = b.extend({
				render: function () {
					var a = this.component.componentOption;
					if (a.enabled && !this._bodyG) {
						var b = this.component.getVanchartRender().getRenderRoot(),
						c = this.component.getToolbarPos();
						this._bodyG || (this._bodyG = b.append("g").style("pointer-events", "all").attr("transform", "translate(" + c.x + "," + c.y + ")")),
						this.component.menuIcon && this.component.menuIcon.render(this._bodyG),
						this.component.refreshIcon.render(this._bodyG);
						for (var d = this.component.getToolbarIcons(), e = 0, f = d.length; f > e; e++)
							d[e].render(this._bodyG)
					}
				},
				hide: function () {
					for (var a = this.component.getToolbarIcons(), b = a.length, c = [], d = 0; b > d; d++)
						c.push(100 + 80 * d);
					for (var d = 0; b > d; d++) {
						var e = b - d;
						a[d].hideIcon(e, c[d])
					}
					var f = this.component.getRefreshIcon(),
					g = 4 * (b + 1),
					h = 4 * (b + 1) + 33 * b;
					f.visible && f.refreshMove(g, h)
				},
				show: function () {
					for (var a = [0], b = this.component.getToolbarIcons(), c = b.length, d = 0; c - 1 > d; d++)
						a.push(100 + 80 * d);
					for (var d = 0; c > d; d++) {
						var e = c - d;
						b[d].showIcon(e, a[d])
					}
					var f = this.component.getRefreshIcon(),
					g = 4 * (c + 1) + 33 * c,
					h = 4 * (c + 1);
					f.visible && f.refreshMove(g, h)
				},
				toFront: function () {
					this._bodyG && c.toFrontOfAll(this._bodyG.node())
				}
			});
		return a("./RenderLibrary").register(d.TOOLBAR_SVG, e),
		e
	}),
	c("render/RangeLegendSvgRender", ["require", "./BaseRender", "../utils/BaseUtils", "../Constants", "../dom/DomEvent", "./RenderLibrary"], function (a) {
		var b = a("./BaseRender"),
		c = a("../utils/BaseUtils"),
		d = a("../Constants"),
		e = a("../dom/DomEvent"),
		f = 10,
		g = 15,
		h = 100,
		i = 15,
		j = 10,
		k = 5,
		l = 25,
		m = 2,
		n = "linear-color-clip-path-id",
		o = "min-bar-class-name",
		p = "max-bar-class-name",
		q = "range-item",
		r = b.extend({
				render: function () {
					if (this.component.componentOption.visible) {
						var a = this.component.getVanchartRender().getRenderRoot(),
						b = this.component.bounds;
						this.isHorizontal = this.component.isHorizontal(),
						this._legendG || (this._legendG = a.append("g").on("mousedown", function () {
									e.stopPropagation(d3.event)
								}).style("pointer-events", "all"), this.minPos = 0, this.maxPos = h),
						this.component.vanchart.isZoomRefreshState() || (this.minPos = 0, this.maxPos = h),
						this._legendG.attr("transform", "translate(" + this._getIntPos(b.x) + "," + this._getIntPos(b.y) + ")"),
						this._updateBackground(),
						this.component.isIntervalLegend ? this._renderInterval() : this._renderGradient()
					}
				},
				_updateBackground: function () {
					var a = this.component.componentOption,
					b = this.component.bounds,
					c = this.component.vanchart.getIDPrefix(),
					d = "range-legend-background" + c;
					this._renderSvgBackground(this._legendG, a, b, d)
				},
				_renderGradient: function () {
					var a = this._createDefs(),
					b = ((this.isHorizontal ? this.component.bounds.width : this.component.bounds.height) - h) / 2;
					b = this._getIntPos(b);
					var d = this._legendG.selectAll("rect.gradient-bar-background").data([0]);
					d.enter().append("rect").attr("class", "gradient-bar-background"),
					d.attr("rx", 2).attr("ry", 2).attr("x", this.isHorizontal ? b : f).attr("y", this.isHorizontal ? f : b).attr("width", this.isHorizontal ? h : g).attr("height", this.isHorizontal ? g : h).style("fill", "#eaeaea");
					var e = this.component.vanchart.getIDPrefix(),
					i = this._legendG.selectAll("rect.gradient-bar").data([0]);
					i.enter().append("rect").attr("class", "gradient-bar"),
					i.attr("clip-path", "url(#" + n + e + ")").attr("rx", 2).attr("ry", 2).attr("x", this.isHorizontal ? b : f).attr("y", this.isHorizontal ? f : b).attr("width", this.isHorizontal ? h : g).attr("height", this.isHorizontal ? g : h).style("fill", "url(#" + a.attr("id") + ")");
					var j = this,
					k = d3.behavior.drag().on("dragstart", function () {
							d3.event.sourceEvent.stopPropagation()
						}).on("drag", function () {
							var a = 0;
							if (j.isHorizontal) {
								var c = j.minPos;
								j.minPos += Math.round(d3.event.dx),
								j.minPos = Math.max(j.minPos, 0),
								j.minPos = Math.min(j.minPos, j.maxPos),
								a = j.minPos - c
							} else {
								var c = j.maxPos;
								j.maxPos += Math.round(d3.event.dy),
								j.maxPos = Math.min(j.maxPos, h),
								j.maxPos = Math.max(j.maxPos, j.minPos),
								a = j.maxPos - c
							}
							Math.abs(a) >= 1 && (j._updateMinBar(b), j.component.refreshPoints(j.minPos, j.maxPos))
						}),
					l = d3.behavior.drag().on("dragstart", function () {
							d3.event.sourceEvent.stopPropagation()
						}).on("drag", function () {
							var a = 0;
							if (j.isHorizontal) {
								var c = j.maxPos;
								j.maxPos += Math.round(d3.event.dx),
								j.maxPos = Math.min(j.maxPos, h),
								j.maxPos = Math.max(j.maxPos, j.minPos),
								a = j.maxPos - c
							} else {
								var c = j.minPos;
								j.minPos += Math.round(d3.event.dy),
								j.minPos = Math.max(j.minPos, 0),
								j.minPos = Math.min(j.minPos, j.maxPos),
								a = j.minPos - c
							}
							Math.abs(a) >= 1 && (j._updateMaxBar(b), j.component.refreshPoints(j.minPos, j.maxPos))
						}),
					m = this._legendG.selectAll("path." + o).data([0]);
					m.enter().append("path").attr("class", o),
					m.attr("d", this.isHorizontal ? this.component.getLeftBarPath() : this.component.getTopBarPath()).call(k);
					var q = this._legendG.selectAll("path." + p).data([0]);
					q.enter().append("path").attr("class", p),
					q.attr("d", this.isHorizontal ? this.component.getRightBarPath() : this.component.getBottomBarPath()).call(l);
					var r = this.component.componentOption.style;
					if (!this._labelUseHtml()) {
						var s = this._legendG.selectAll("text." + o).data([0]);
						s.enter().append("text").attr("class", o),
						s.attr("dy", ".32em").call(c.setTextStyle, r);
						var t = this._legendG.selectAll("text." + p).data([0]);
						t.enter().append("text").attr("class", p),
						t.attr("dy", ".32em").call(c.setTextStyle, r)
					}
					this._updateMinBar(b),
					this._updateMaxBar(b)
				},
				_createDefs: function () {
					if (!this._legendG.selectAll("defs").empty())
						return this._legendG.selectAll("defs").select("linearGradient");
					var a = this._legendG.append("defs"),
					b = this.component.vanchart.getIDPrefix();
					a.append("clipPath").attr("id", n + b).append("rect");
					var c = a.append("linearGradient").attr("id", "gradient-range-legend" + b).attr("x1", "0%").attr("y1", this.isHorizontal ? "0%" : "100%").attr("x2", this.isHorizontal ? "100%" : "0%").attr("y2", "0%"),
					d = this.component.getValueAndColors();
					return d.forEach(function (a) {
						var b = a[0],
						d = a[1];
						c.append("stop").attr("offset", b).style("stop-color", d)
					}),
					c
				},
				_updateMinBar: function (a) {
					this.isHorizontal ? this._updateHorizontalMinBar(a) : this._updateVerticalMinBar(a)
				},
				_updateVerticalMinBar: function (a) {
					var b = f + g,
					d = a + this.maxPos;
					this._legendG.select("path." + o).attr("transform", "translate(" + b + "," + d + ")").style("fill", this.component.colorScale((h - this.maxPos) / h));
					var e = this.component.getGradientLabelContent(this.maxPos),
					l = this.component.componentOption.style,
					m = c.getTextDimension(e, l, !0);
					if (this._labelUseHtml()) {
						var n = this._getIntPos(a + this.maxPos + j / 2 - m.height / 2),
						p = this._getAbsoluteBounds(m, f + g + i + k, n);
						this.labelDivManager.clearLabels(o),
						this.labelDivManager.addLabelWidthBounds(e, p, l, o)
					} else
						this._legendG.select("text." + o).attr("text-anchor", "middle").attr("x", this._getIntPos(f + g + i + k + m.width / 2)).attr("y", this._getIntPos(a + this.maxPos + j / 2)).text(e);
					this._updateVerticalLinearColorClipPath(a)
				},
				_getAbsoluteBounds: function (a, b, c) {
					return {
						x: this.component.bounds.x + b,
						y: this.component.bounds.y + c,
						width: a.width,
						height: a.height
					}
				},
				_getIntPos: function (a) {
					return Math.round(a)
				},
				_labelUseHtml: function () {
					return this.component.componentOption.useHtml
				},
				_updateHorizontalMinBar: function (a) {
					var b = a - j + this.minPos,
					d = f + g;
					this._legendG.select("path." + o).attr("transform", "translate(" + b + "," + d + ")").style("fill", this.component.colorScale(this.minPos / h));
					var e = this.component.getGradientLabelContent(this.minPos),
					l = this.component.componentOption.style,
					m = c.getTextDimension(e, l, !0);
					if (this._labelUseHtml()) {
						var n = this._getAbsoluteBounds(m, this._getIntPos(a + this.minPos - m.width), f + g + i + k);
						this.labelDivManager.clearLabels(o),
						this.labelDivManager.addLabelWidthBounds(e, n, l, o)
					} else
						this._legendG.select("text." + o).attr("text-anchor", "left").attr("y", this._getIntPos(f + g + i + k + m.height / 2)).attr("x", this._getIntPos(a + this.minPos - m.width)).text(e);
					this._updateHorizontalLinearColorClipPath(a)
				},
				_updateMaxBar: function (a) {
					this.isHorizontal ? this._updateHorizontalMaxBar(a) : this._updateVerticalMaxBar(a)
				},
				_updateVerticalMaxBar: function (a) {
					var b = f + g,
					d = a - j + this.minPos;
					this._legendG.select("path." + p).attr("transform", "translate(" + b + "," + d + ")").style("fill", this.component.colorScale((h - this.minPos) / h));
					var e = this.component.getGradientLabelContent(this.minPos),
					l = this.component.componentOption.style,
					m = c.getTextDimension(e, l, !0);
					if (this._labelUseHtml()) {
						var n = this._getIntPos(a + this.minPos - j / 2 - m.height / 2),
						o = this._getAbsoluteBounds(m, f + g + i + k, n);
						this.labelDivManager.clearLabels(p),
						this.labelDivManager.addLabelWidthBounds(e, o, l, p)
					} else
						this._legendG.select("text." + p).attr("text-anchor", "middle").attr("x", this._getIntPos(f + g + i + k + m.width / 2)).attr("y", this._getIntPos(a + this.minPos - j / 2)).text(e);
					this._updateVerticalLinearColorClipPath(a)
				},
				_updateHorizontalMaxBar: function (a) {
					var b = a + this.maxPos,
					d = f + g;
					this._legendG.select("path." + p).attr("transform", "translate(" + b + "," + d + ")").style("fill", this.component.colorScale(this.maxPos / h));
					var e = this.component.getGradientLabelContent(this.maxPos),
					j = this.component.componentOption.style,
					l = c.getTextDimension(e, j, !0);
					if (this._labelUseHtml()) {
						var m = this._getAbsoluteBounds(l, this._getIntPos(a + this.maxPos), f + g + i + k);
						this.labelDivManager.clearLabels(p),
						this.labelDivManager.addLabelWidthBounds(e, m, j, p)
					} else
						this._legendG.select("text." + p).attr("text-anchor", "left").attr("y", this._getIntPos(f + g + i + k + l.height / 2)).attr("x", this._getIntPos(a + this.maxPos)).text(e);
					this._updateHorizontalLinearColorClipPath(a)
				},
				_updateVerticalLinearColorClipPath: function (a) {
					var b = this.component.vanchart.getIDPrefix();
					this._legendG.select("defs").select("clipPath#" + n + b).select("rect").attr("x", f).attr("y", a + this.minPos).attr("width", g).attr("height", this.maxPos - this.minPos)
				},
				_updateHorizontalLinearColorClipPath: function (a) {
					var b = this.component.vanchart.getIDPrefix();
					this._legendG.select("defs").select("clipPath#" + n + b).select("rect").attr("x", a + this.minPos).attr("y", f).attr("width", this.maxPos - this.minPos).attr("height", g)
				},
				_renderInterval: function () {
					if (!(this.component.items.length <= 0)) {
						var a = this._legendG.selectAll("g." + q).data(this.component.items),
						b = this;
						a.enter().append("g").attr("class", q).each(function () {
							var a = d3.select(this);
							a.append("rect").attr("class", q),
							b._labelUseHtml() || a.append("text").attr("class", q),
							a.call(b._bindMouseEvent.bind(b))
						}),
						this.isHorizontal ? this._updateHorizontalIntervalItems(a) : this._updateVerticalIntervalItems(a)
					}
				},
				_updateVerticalIntervalItems: function (a) {
					var b = this.component.componentOption,
					d = b.style,
					e = f,
					h = f + g + k,
					i = (this.component.bounds.height - this.component.items.length * l - (this.component.items.length - 1) * m) / 2;
					i = this._getIntPos(i);
					var j = this;
					a.each(function (a) {
						var b = d3.select(this),
						f = c.getTextDimension(a.label, d);
						if (b.select("rect").attr("rx", 2).attr("ry", 2).attr("x", e).attr("y", i).attr("width", g).attr("height", l).style("fill", a.visible ? a.color : a.hiddenColor), j._labelUseHtml()) {
							var k = j._getAbsoluteBounds(f, j._getIntPos(h), j._getIntPos(i + l / 2 - f.height / 2));
							j.labelDivManager.addLabelWidthBounds(a.label, k, d)
						} else
							b.select("text").text(function (a) {
								return a.label
							}).attr("x", j._getIntPos(h + f.width / 2)).attr("y", j._getIntPos(i + l / 2)).attr("dy", ".32em").attr("text-anchor", "middle").call(c.setTextStyle, d).style("fill", a.visible ? d.color : a.hiddenColor);
						i += l + m
					})
				},
				_updateHorizontalIntervalItems: function (a) {
					var b = this.component.componentOption,
					d = b.style,
					e = (this.component.bounds.width - this.component.items.length * l - (this.component.items.length - 1) * m) / 2;
					e = this._getIntPos(e);
					var h = this;
					a.each(function (a, b) {
						var i = d3.select(this),
						j = c.getTextDimension(a.label, d),
						n = f,
						o = n + j.height + k,
						p = o + g + k;
						if (i.select("rect").attr("rx", 2).attr("ry", 2).attr("x", e).attr("y", o).attr("width", l).attr("height", g).style("fill", a.visible ? a.color : a.hiddenColor), h._labelUseHtml()) {
							var q = h._getIntPos(b % 2 == 0 ? n : p),
							r = h._getAbsoluteBounds(j, h._getIntPos(e), q);
							h.labelDivManager.addLabelWidthBounds(a.label, r, d)
						} else
							i.select("text").text(function (a) {
								return a.label
							}).attr("x", h._getIntPos(e + l / 2)).attr("y", h._getIntPos(b % 2 == 0 ? n + j.height / 2 : p + j.height / 2)).attr("dy", ".32em").attr("text-anchor", "middle").call(c.setTextStyle, d).style("fill", a.visible ? d.color : a.hiddenColor);
						e += l + m
					})
				},
				_bindMouseEvent: function (a) {
					var b = this.component.vanchart,
					c = this.component.componentOption,
					e = c.style.color;
					a.style("cursor", "pointer").on("mouseenter", function (a) {
						d3.select(this).select("text." + q).style("fill", a.hoverColor)
					}).on("mouseleave", function (a) {
						var b = a.visible ? e : a.hiddenColor;
						d3.select(this).select("text." + q).style("fill", b)
					}).on("click", function (a) {
						a.visible = !a.visible;
						var c = a.visible ? a.color : a.hiddenColor,
						f = a.visible ? e : a.hiddenColor;
						d3.select(this).select("rect." + q).style("fill", c),
						d3.select(this).select("text." + q).style("fill", f);
						var g = b.getChart(d.MAP_CHART);
						a.points.forEach(function (b) {
							if ((!g || g && b.points && b.points[0] == b) && (b.visible = a.visible, g))
								for (var c = b.points, d = 1, e = c.length; e > d; d++)
									c[d].visible = b.visible
						}),
						b.renderOnlyCharts()
					})
				}
			});
		return a("./RenderLibrary").register(d.RANGE_LEGEND_SVG, r),
		r
	}),
	c("render/VanChartSvgRender", ["require", "../Constants", "./BaseRender", "../utils/BaseUtils", "./RenderLibrary"], function (a) {
		var b = a("../Constants"),
		c = a("./BaseRender"),
		d = a("../utils/BaseUtils"),
		e = "chart-gradual-background",
		f = "plot-gradual-background",
		g = c.extend({
				render: function () {
					var a = this.component.getParentDom(),
					c = this.component.chartWidth(),
					d = this.component.chartHeight();
					if (!this.svgRoot) {
						this.svgRoot = d3.select(a).append("svg").attr("width", c).attr("height", d);
						var e = this.component.getBodyClipID();
						this.svgRoot.append("defs").append("clipPath").attr("id", e)
					}
					this.svgRoot.style("pointer-events", this.component._leaflet ? "none" : "all"),
					this._updateBodyClip();
					var f = this.component.getChartRenders(),
					g = this.component.getFixedComponentRenders(),
					h = this.component.getFloatComponentRenders();
					this._renderBackground(),
					this.svgRoot.selectAll("g." + b.AXIS_GROUP).data([0]).enter().append("g").attr("class", b.AXIS_GROUP),
					g.forEach(function (a) {
						a.render()
					}),
					f.forEach(function (a) {
						a.render()
					}),
					h.forEach(function (a) {
						a.render()
					}),
					this.component.getComponent(b.TOOLBAR_COMPONENT) && this.component.getComponent(b.TOOLBAR_COMPONENT).render.toFront(),
					this._renderTrendLine()
				},
				_updateBodyClip: function () {
					var a = this.component.getPlotClipBounds(),
					b = this.svgRoot.select("#" + this.component.getBodyClipID());
					b.select("rect").remove(),
					b.append("rect").attr("x", a.x).attr("y", a.y).attr("width", a.width).attr("height", a.height)
				},
				_renderBackground: function () {
					var a = this.component.getIDPrefix(),
					b = d.makeBounds(0, 0, this.component.chartWidth() - 5, this.component.chartHeight() - 5),
					c = this.component.getChartBackgroundOption(),
					g = this.component.getPlotBounds(),
					h = this.component.getPlotBackgroundOption();
					this._backgroundG || (this._backgroundG = this.svgRoot.append("g")),
					this._backgroundG.selectAll(".background").remove(),
					this._backgroundG.selectAll("defs").remove(),
					this._createGradualDefs(this._backgroundG, c.color, e + a),
					this._createGradualDefs(this._backgroundG, h.color, f + a),
					this._renderBackgroundWithBounds(c, b, e + a),
					this._renderBackgroundWithBounds(h, g, f + a)
				},
				_renderBackgroundWithBounds: function (a, b, c) {
					if (-1 != c.indexOf(e)) {
						var f = a.borderWidth;
						b = d.rectSubPixelOpt(b.x + f / 2, b.y + f / 2, b.width - f, b.height - f, a.borderWidth)
					} else
						b = d.rectSubPixelOpt(b.x, b.y, b.width, b.height, a.borderWidth);
					var g = this.component.getDivParentDom();
					if (a.chartShadow)
						d3.select(g).style("box-shadow", "1px 1px 2px rgba(0,0,0,0.1)");
					else if (a.plotShadow) {
						for (var h = [5, 3, 1], i = [.05, .1, .15], j = d.rectSubPixelOpt(b.x, b.y, b.width, b.height, 1), k = 0; 3 > k; k++)
							this._backgroundG.append("rect").attr("class", "background").attr("x", j.x).attr("y", j.y).attr("width", j.width).attr("height", j.height).attr("transform", "translate(1, 1)").attr("rx", a.borderRadius).attr("ry", a.borderRadius).style("fill", "none").style("stroke", "black").style("stroke-width", h[k]).style("stroke-opacity", i[k]);
						this._backgroundG.append("rect").attr("class", "background").attr("x", j.x).attr("y", j.y).attr("width", j.width).attr("height", j.height).attr("rx", a.borderRadius).attr("ry", a.borderRadius).style("fill", "white")
					}
					this._backgroundG.append("rect").attr("class", "background").attr("x", b.x).attr("y", b.y).attr("width", b.width).attr("height", b.height).attr("rx", a.borderRadius).attr("ry", a.borderRadius).style("fill", function () {
						return a.color ? "string" == typeof a.color ? a.color : "url(#" + c + ")" : "none"
					}).style("stroke", a.borderColor).style("stroke-width", a.borderWidth),
					a.image && this._backgroundG.append("image").attr("class", "background").attr("preserveAspectRatio", "none").attr("x", b.x).attr("y", b.y).attr("width", b.width).attr("height", b.height).attr("xlink:href", a.image)
				},
				_renderTrendLine: function () {
					var a = this.component.getTrendLineOption(),
					c = this.component.getPlotBounds(),
					d = this.component.getBodyClipID();
					this._trendG || (this._trendG = this.svgRoot.append("g").attr("clip-path", "url(#" + d + ")")),
					this._trendG.attr("transform", "translate(" + c.x + "," + c.y + ")");
					var e = this._trendG.selectAll("line").data(a);
					e.enter().append("line"),
					e.exit().remove(),
					e.attr("x1", function (a) {
						return a.x1
					}).attr("y1", function (a) {
						return a.y1
					}).attr("x2", function (a) {
						return a.x2
					}).attr("y2", function (a) {
						return a.y2
					}).style("stroke", function (a) {
						return a.trendLine.color
					}).style("stroke-width", function (a) {
						return a.trendLine.width
					}).style("stroke-dasharray", function (a) {
						return b.DASH_TYPE[a.trendLine.dashStyle]
					})
				},
				getRenderRoot: function () {
					return this.svgRoot
				},
				remove: function () {
					this.svgRoot.remove();
					var a = this.component.getChartRenders(),
					b = this.component.getComponentRenders();
					a.forEach(function (a) {
						a.removeDivLabels()
					}),
					b.forEach(function (a) {
						a.removeDivLabels()
					})
				}
			});
		return a("./RenderLibrary").register(b.VANCHART_SVG, g),
		g
	}),
	c("jiandaoyun", ["require", "./chart/Pie", "./chart/Bar", "./chart/Line", "./chart/Area", "./chart/Radar", "./render/PieSvgRender", "./render/BarSvgRender", "./render/LineSvgRender", "./render/AreaSvgRender", "./render/RadarSvgRender", "./render/TitleSvgRender", "./render/CategoryAxisSvgRender", "./render/ValueAxisSvgRender", "./render/RadiusAxisSvgRender", "./render/AngleAxisSvgRender", "./render/DateAxisSvgRender", "./render/LegendSvgRender", "./render/ToolbarSvgRender", "./render/RangeLegendSvgRender", "./VanCharts", "./render/VanChartSvgRender"], function (a) {
		a("./chart/Pie"),
		a("./chart/Bar"),
		a("./chart/Line"),
		a("./chart/Area"),
		a("./chart/Radar"),
		a("./render/PieSvgRender"),
		a("./render/BarSvgRender"),
		a("./render/LineSvgRender"),
		a("./render/AreaSvgRender"),
		a("./render/RadarSvgRender"),
		a("./render/TitleSvgRender"),
		a("./render/CategoryAxisSvgRender"),
		a("./render/ValueAxisSvgRender"),
		a("./render/RadiusAxisSvgRender"),
		a("./render/AngleAxisSvgRender"),
		a("./render/DateAxisSvgRender"),
		a("./render/LegendSvgRender"),
		a("./render/ToolbarSvgRender"),
		a("./render/RangeLegendSvgRender"),
		a("./VanCharts"),
		a("./render/VanChartSvgRender")
	});
	var d = b("VanCharts");
	return b("chart/Pie"),
	b("chart/Bar"),
	b("chart/Line"),
	b("chart/Area"),
	b("chart/Radar"),
	b("render/VanChartSvgRender"),
	b("render/TitleSvgRender"),
	b("render/CategoryAxisSvgRender"),
	b("render/ValueAxisSvgRender"),
	b("render/DateAxisSvgRender"),
	b("render/RadiusAxisSvgRender"),
	b("render/AngleAxisSvgRender"),
	b("render/LegendSvgRender"),
	b("render/ToolbarSvgRender"),
	b("render/RangeLegendSvgRender"),
	b("render/PieSvgRender"),
	b("render/BarSvgRender"),
	b("render/LineSvgRender"),
	b("render/AreaSvgRender"),
	b("render/RadarSvgRender"),
	d
}), function (a) {
	FX.Chart = FX.extend(FX.Block, {
			_defaultConfig: function () {
				return a.extend(FX.Chart.superclass._defaultConfig.apply(), {
					baseCls: "x-chart",
					onItemClick: null,
					forms: [],
					relations: {},
					joinedFields: [],
					xFields: [],
					yFields: [],
					valueFields: [],
					asyncURL: "/data/chart_group",
					scalable: !0
				})
			},
			_initContent: function (a) {
				FX.Chart.superclass._initContent.apply(this, arguments);
				var b = this;
				this.myChart = VanCharts.init(this.$body[0]),
				b.chartOptions = {
					padding: 5,
					zoom: {
						zoomType: "xy"
					},
					plotOptions: {
						click: b._getClickEvent(),
						large: !1,
						connectNulls: !0,
						curve: !1,
						marker: {
							symbol: "circle",
							radius: 4.5,
							enabled: !0
						},
						tooltip: {
							formatter: {
								identifier: "${CATEGORY}${SERIES}${VALUE}"
							},
							shared: !0,
							padding: 5,
							backgroundColor: "rgba(0,0,0,0.4980392156862745)",
							borderColor: "rgb(0,0,0)",
							shadow: !1,
							borderRadius: 2,
							borderWidth: 0,
							follow: !1,
							enabled: !0,
							animation: !0,
							hideDelay: 3e3
						},
						step: !1,
						lineWidth: 2,
						animation: !0
					},
					drag: !0,
					borderColor: "rgb(238,238,238)",
					xAxis: {
						enableMinorTick: !1,
						minorTickColor: "rgb(176,176,176)",
						tickColor: "rgb(176,176,176)",
						showArrow: !1,
						lineColor: "rgb(176,176,176)",
						plotLines: [],
						type: "category",
						lineWidth: 1,
						showLabel: !0,
						gridLineWidth: 0,
						enableTick: !0,
						labelStyle: {
							fontFamily: "microsoft yahei",
							color: "rgba(102,102,102,1.0)",
							fontSize: "13px",
							fontWeight: ""
						},
						plotBands: [],
						position: "bottom",
						labelRotation: 0,
						reversed: !1
					},
					legend: {
						borderColor: "rgb(204,204,204)",
						borderRadius: 0,
						shadow: !1,
						borderWidth: 0,
						style: {
							fontFamily: "Dialog",
							color: "rgba(102,102,102,1.0)",
							fontSize: "13px",
							fontWeight: ""
						},
						position: "bottom",
						maxHeight: "30%",
						enabled: !0
					},
					plotBorderColor: "rgba(255,255,255,0)",
					tools: {
						hidden: !1,
						toImage: {
							enabled: !1
						},
						sort: {
							enabled: !0
						},
						enabled: !0
					},
					yAxis: [{
							enableMinorTick: !1,
							gridLineColor: "rgb(196,196,196)",
							minorTickColor: "rgb(176,176,176)",
							tickColor: "rgb(176,176,176)",
							showArrow: !1,
							lineColor: "rgb(176,176,176)",
							plotLines: [],
							type: "value",
							lineWidth: 1,
							showLabel: !0,
							gridLineWidth: 1,
							enableTick: !1,
							labelStyle: {
								fontFamily: "Verdana",
								color: "rgba(102,102,102,1.0)",
								fontSize: "13px",
								fontWeight: ""
							},
							plotBands: [],
							position: "left",
							labelRotation: 0,
							reversed: !1
						}
					],
					style: "gradual"
				},
				this._initData()
			},
			_initData: function (a) {
				var b = [],
				c = [],
				d = [];
				this._checkFields() ? this._setData(b, c, d, a) : this._initChartOption(!0, b, c, d)
			},
			_initChartOption: function () {},
			_checkFields: function () {
				var a = this.options;
				return (a.xFields.length > 0 || a.yFields.length > 0) && a.valueFields.length > 0
			},
			_setData: function (a, b, c, d) {
				var e = this.options,
				f = this;
				if (this._checkFields()) {
					var g,
					h,
					i;
					e.xFields.length > 0 && (g = f._makeGroups([e.xFields[0]])),
					e.yFields.length > 0 && e.valueFields.length <= 1 && (h = f._makeGroups([e.yFields[0]])),
					i = e.valueFields,
					this.loadingAjax({
						url: e.asyncURL,
						data: {
							forms: e.forms,
							relations: e.relations,
							xFields: h ? h : [],
							yFields: g ? g : [],
							valFields: i,
							filter: this.getFilterData(d),
							onlyGroup: !0
						}
					}, function (d) {
						if (d.chart) {
							var e = new FX.ChartUtils({
									rowGroups: h,
									colGroups: g,
									valueFields: i,
									data: d.chart
								}).getChartData();
							f.nameMap = e.nameMap,
							f._initChartOption(!1, e.series, e.category, e.data)
						} else
							f._initChartOption(!1, a, b, c)
					})
				} else
					this._initChartOption(!0, a, b, c)
			},
			_dealLinkData: function (b, c) {
				switch (b.type) {
				case "datetime":
					var d = b.dateType || "year",
					e = d.split("&"),
					f = c.split("-");
					FX.Utils.forEach(f, function (a, b) {
						f[a] = parseInt(b, 10)
					});
					var g = new Date,
					h = {};
					return e.length > 2 ? (g.setFullYear(f[0], f[1] - 1, f[2]), g.setHours(0, 0, 0, 0), h.min = g.getTime(), g.setHours(23, 59, 59, 999), h.max = g.getTime()) : e.length > 1 ? (g.setFullYear(f[0], f[1] - 1, 1), g.setHours(0, 0, 0, 0), h.min = g.getTime(), g.setFullYear(f[0], f[1], 1), h.max = g.getTime() - 1) : (g.setFullYear(f[0], 0, 1), g.setHours(0, 0, 0, 0), h.min = g.getTime(), g.setFullYear(f[0] + 1, 0, 1), h.max = g.getTime() - 1), {
						widgetType: "datelimit",
						widgetValue: h
					};
				case "address":
				case "location":
					var i = b.addressType || "province";
					e = i.split("&");
					var j = c.split("/");
					return h = {},
					e.length > 1 ? (h.province = j[0], h.city = j[1]) : h.province = c, {
						widgetType: "address",
						widgetValue: h
					};
				default:
					return {
						widgetType: "combocheck",
						widgetValue: a.makeArray(c)
					}
				}
			},
			_getClickEvent: function () {
				var a = this,
				b = this.options;
				return function () {
					var c = {};
					if (b.yFields[0]) {
						var d = a.nameMap[this.seriesName] || this.seriesName;
						c[b.yFields[0].name] = a._dealLinkData(b.yFields[0], d)
					}
					if (b.xFields[0]) {
						var e = a.nameMap[this.category] || this.category;
						c[b.xFields[0].name] = a._dealLinkData(b.xFields[0], e)
					}
					if (b.valueFields[0]) {
						var f = a._getLinkFilterParams(c);
						FX.Utils.applyFunc(a, b.onItemClick, [f], !1)
					}
				}
			},
			_formatValue: function (a, b) {
				var c,
				d = this.options;
				return FX.Utils.isObjectEmpty(d.valueFields) || 1 != d.valueFields.length || (b = 0),
				c = FX.Utils.isObjectEmpty(d.valueFields) || FX.Utils.isObjectEmpty(d.valueFields[b].cellFmt) || FX.Utils.isObjectEmpty(d.valueFields[b].cellFmt.data) ? a : FX.Utils.num2Str(a, d.valueFields[b].cellFmt.data)
			},
			doResize: function (a) {
				FX.Chart.superclass.doResize.apply(this, arguments),
				this.myChart.resize()
			},
			getOptions: function () {
				var b = this.options;
				return a.extend(FX.Chart.superclass.getOptions.apply(this, arguments), {
					forms: b.forms,
					relations: b.relations,
					joinedFields: b.joinedFields,
					xFields: b.xFields,
					yFields: b.yFields,
					valueFields: b.valueFields
				})
			},
			reload: function (a) {
				this._initData(a)
			}
		})
}
(jQuery), function (a) {
	FX.areaChart = FX.extend(FX.Chart, {
			_initChartOption: function (b, c, d, e) {
				var f = this;
				b && (c = ["1", "2"], d = ["1", "2", "3", "4", "5"], e = [[1, 3, 8, 7, 9], [8, 6, 4, 2, 7]]);
				var g = [];
				FX.Utils.forEach(c, function (a, b) {
					var h = {},
					i = [];
					h.tooltip = {
						formatter: {
							identifier: "${CATEGORY}${SERIES}${VALUE}",
							valueFormat: function (b) {
								return f._formatValue(b, a)
							}
						},
						shared: !0,
						padding: 5,
						backgroundColor: "rgba(0,0,0,0.5)",
						borderColor: "rgb(0,0,0)",
						shadow: !1,
						borderRadius: 2,
						borderWidth: 0,
						follow: !1,
						enabled: !0,
						animation: !0,
						hideDelay: 3e3
					},
					FX.Utils.forEach(e[a], function (b, c) {
						var f = {};
						f.x = d[b],
						f.y = e[a][b] || 0,
						i.push(f)
					}),
					h.data = i,
					h.name = c[a],
					h.stack = 1,
					g.push(h)
				}),
				this.chartOpt = a.extend(this.chartOptions, {
						plotOptions: {
							click: this._getClickEvent(),
							fillColorOpacity: .3,
							large: !1,
							connectNulls: !0,
							curve: !1,
							marker: {
								symbol: "circle_hollow",
								radius: 2.5,
								enabled: !1
							},
							step: !1,
							lineWidth: 2,
							animation: !0
						},
						series: g,
						chartType: "area"
					}),
				FX.Utils.isNull(this.myChart.options) ? this.myChart.setOptions(this.chartOpt) : this.myChart.setData(this.chartOpt);
			}
		}),
	a.shortcut("areachart", FX.areaChart)
}
(jQuery), function (a) {
	FX.BarChart = FX.extend(FX.Chart, {
			_initChartOption: function (b, c, d, e) {
				var f = this;
				b && (c = ["1", "2"], d = ["1", "2", "3", "4", "5"], e = [[1, 3, 8, 7, 9], [8, 6, 4, 2, 7]]);
				var g = [];
				FX.Utils.forEach(c, function (a, b) {
					var h = {},
					i = [];
					h.tooltip = {
						formatter: {
							identifier: "${CATEGORY}${SERIES}${VALUE}",
							valueFormat: function (b) {
								return f._formatValue(b, a)
							}
						},
						shared: !1,
						padding: 5,
						backgroundColor: "rgba(0,0,0,0.5)",
						borderColor: "rgb(0,0,0)",
						shadow: !1,
						borderRadius: 2,
						borderWidth: 0,
						follow: !1,
						enabled: !0,
						animation: !0,
						hideDelay: 3e3
					},
					FX.Utils.forEach(e[a], function (a, b) {
						var c = {};
						c.x = d[a],
						c.y = b || 0,
						i.push(c)
					}),
					h.data = i,
					h.name = c[a],
					g.push(h)
				}),
				this.chartOpt = a.extend(this.chartOptions, {
						plotOptions: {
							click: f._getClickEvent(),
							dataLabels: {
								formatter: function () {
									var a = f._formatValue(this.value, this.series.index);
									return a
								},
								connectorWidth: 1,
								align: "outside",
								enabled: !0
							},
							animation: !0
						},
						series: g,
						chartType: "column"
					}),
				FX.Utils.isNull(this.myChart.options) ? this.myChart.setOptions(this.chartOpt) : this.myChart.setData(this.chartOpt)
			}
		}),
	a.shortcut("barchart", FX.BarChart)
}
(jQuery), function (a) {
	FX.LineChart = FX.extend(FX.Chart, {
			_initChartOption: function (b, c, d, e) {
				var f = this;
				b && (c = ["1", "2"], d = ["1", "2", "3", "4", "5"], e = [[1, 3, 8, 7, 9], [8, 6, 4, 2, 7]]);
				var g = [];
				FX.Utils.forEach(c, function (a, b) {
					var h = {},
					i = [];
					h.tooltip = {
						formatter: {
							identifier: "${CATEGORY}${SERIES}${VALUE}",
							valueFormat: function (b) {
								return f._formatValue(b, a)
							}
						},
						shared: !0,
						padding: 5,
						backgroundColor: "rgba(0,0,0,0.5)",
						borderColor: "rgb(0,0,0)",
						shadow: !1,
						borderRadius: 2,
						borderWidth: 0,
						follow: !1,
						enabled: !0,
						animation: !0,
						hideDelay: 3e3
					},
					FX.Utils.forEach(d, function (b, c) {
						var f = {};
						f.x = d[b],
						f.y = e[a][b] || 0,
						i.push(f)
					}),
					h.data = i,
					h.name = c[a],
					g.push(h)
				}),
				this.chartOpt = a.extend(this.chartOptions, {
						series: g,
						chartType: "line"
					}),
				FX.Utils.isNull(this.myChart.options) ? this.myChart.setOptions(this.chartOpt) : this.myChart.setData(this.chartOpt)
			}
		}),
	a.shortcut("linechart", FX.LineChart)
}
(jQuery), function (a) {
	FX.PieChart = FX.extend(FX.Chart, {
			_defaultConfig: function () {
				return a.extend(FX.PieChart.superclass._defaultConfig.apply(), {})
			},
			_initContent: function (a) {
				FX.PieChart.superclass._initContent.apply(this, arguments),
				this.options.xFields = []
			},
			_initChartOption: function (a, b, c, d) {
				var e = this;
				a && (b = ["1", "2", "3"], d = [15, 12, 9]);
				var f = [];
				FX.Utils.forEach(d, function (a, c) {
					var g = {};
					g.x = b[a],
					g.y = d[a],
					g.tooltip = {
						formatter: {
							identifier: "${SERIES}${VALUE}",
							valueFormat: function (b) {
								return e._formatValue(b, a)
							}
						},
						hideDelay: 3,
						shared: !1,
						padding: 5,
						backgroundColor: "rgba(0,0,0,0.5)",
						borderColor: "rgb(0,0,0)",
						shadow: !1,
						borderRadius: 2,
						borderWidth: 0,
						follow: !1,
						enabled: !0,
						animation: !1
					},
					f.push(g)
				});
				var g = [{
						data: f
					}
				];
				this.chartOpt = {
					padding: 0,
					plotOptions: {
						click: this._getClickEvent(),
						rotatable: !1,
						borderColor: "rgb(255,255,255)",
						startAngle: 0,
						borderRadius: 0,
						borderWidth: 1,
						endAngle: 360,
						innerRadius: "0.0%",
						animation: !0,
						dataLabels: {
							formatter: function () {
								var a = e._formatValue(this.value, this.series.index);
								return a + " " + FX.Utils.num2Str(this.percentage, "0.00%")
							},
							connectorWidth: 1,
							align: "outside",
							enabled: !0
						}
					},
					legend: {
						borderColor: "rgb(204,204,204)",
						borderRadius: 0,
						shadow: !1,
						borderWidth: 0,
						style: {
							fontFamily: "Dialog",
							color: "rgba(102,102,102,1.0)",
							fontSize: "11pt",
							fontWeight: ""
						},
						maxHeight: "30%",
						position: "bottom",
						enabled: !0
					},
					plotBorderColor: "rgb(238,238,238)",
					tools: {
						hidden: !1,
						toImage: {
							enabled: !1
						},
						sort: {
							enabled: !0
						},
						enabled: !0
					},
					series: g,
					chartType: "pie",
					style: "gradual"
				},
				FX.Utils.isNull(this.myChart.options) ? this.myChart.setOptions(this.chartOpt) : this.myChart.setData(this.chartOpt)
			},
			_checkFields: function () {
				var a = this.options;
				return a.valueFields.length > 0
			},
			_setData: function (a, b, c, d) {
				this.options.xFields = [],
				FX.PieChart.superclass._setData.apply(this, arguments)
			}
		}),
	a.shortcut("piechart", FX.PieChart)
}
(jQuery), function (a) {
	FX.radarChart = FX.extend(FX.Chart, {
			_initChartOption: function (b, c, d, e) {
				var f = this;
				b && (c = ["1", "2"], e = [[15, 12, 9, 8, 11, 6], [13, 15, 19, 17, 4, 8]], d = ["1", "2", "3", "4", "5", "6"]);
				var g = [];
				FX.Utils.forEach(c, function (a, b) {
					var h = {},
					i = [];
					h.tooltip = {
						formatter: {
							identifier: "${CATEGORY}${SERIES}${VALUE}",
							valueFormat: function (b) {
								return f._formatValue(b, a)
							}
						},
						shared: !0,
						padding: 5,
						backgroundColor: "rgba(0,0,0,0.5)",
						borderColor: "rgb(0,0,0)",
						shadow: !1,
						borderRadius: 2,
						borderWidth: 0,
						follow: !1,
						enabled: !0,
						animation: !0,
						hideDelay: 3e3
					},
					FX.Utils.forEach(e[a], function (a, b) {
						var c = {};
						c.x = d[a],
						c.y = b || 0,
						i.push(c)
					}),
					h.data = i,
					h.name = c[a],
					g.push(h)
				}),
				this.chartOpt = a.extend(this.chartOptions, {
						padding: 0,
						zoom: null,
						plotOptions: {
							click: this._getClickEvent(),
							large: !1,
							connectNulls: !0,
							curve: !1,
							marker: {
								symbol: "circle_hollow",
								radius: 2.5,
								enabled: !1
							},
							step: !1,
							lineWidth: 2,
							animation: !0,
							shape: "polygon"
						},
						xAxis: null,
						yAxis: null,
						angleAxis: {
							minorTickColor: "rgb(176,176,176)",
							tickColor: "rgb(176,176,176)",
							lineColor: "rgb(176,176,176)",
							labelStyle: {
								fontFamily: "microsoft yahei",
								color: "rgba(102,102,102,1.0)",
								fontSize: "13px",
								fontWeight: ""
							},
							showLabel: !0,
							type: "category"
						},
						series: g,
						chartType: "radar"
					}),
				FX.Utils.isNull(this.myChart.options) ? this.myChart.setOptions(this.chartOpt) : this.myChart.setData(this.chartOpt)
			}
		}),
	a.shortcut("radarchart", FX.radarChart)
}
(jQuery), function (a) {
	FX.ScatterChart = FX.extend(FX.Chart, {
			_initChartOption: function (a, b, c, d) {
				function e() {
					var a = Math.round(100 * Math.random());
					return a * (a % 2 == 0 ? 1 : -1)
				}
				function f() {
					for (var a = [], b = 100; b--; )
						a.push([e(), e(), Math.abs(e())]);
					return a
				}
				a && (b = ["1", "2"], d = [], d[0] = f(), d[1] = f());
				var g = [];
				FX.Utils.forEach(d, function (a, c) {
					g[a] = {},
					g[a].symbolSize = function (a) {
						return Math.round(a[2] / 5)
					},
					g[a].name = b[a],
					g[a].type = "scatter",
					g[a].data = c
				}),
				this.chartOpt = {
					grid: {
						x: 50,
						y: 50,
						x2: 40,
						y2: 40
					},
					legend: {
						orient: "horizontal",
						x: "center",
						y: "top",
						data: b
					},
					tooltip: {
						trigger: "axis",
						showDelay: 0,
						axisPointer: {
							show: !0,
							type: "cross",
							lineStyle: {
								type: "dashed",
								width: 1
							}
						}
					},
					toolbox: this._getToolBoxOpt(),
					calculable: !0,
					xAxis: [{
							type: "value",
							scale: !0
						}
					],
					yAxis: [{
							type: "value",
							scale: !0
						}
					],
					series: g
				},
				this.myChart.setOption(this.chartOpt),
				this._showLoading(g)
			}
		}),
	a.shortcut("scatterchart", FX.ScatterChart)
}
(jQuery), function (a) {
	FX.ChartUtils = function (b) {
		this.options = a.extend({
				rowGroups: [],
				colGroups: [],
				valueFields: [],
				data: {},
				nameMap: {}
			}, b)
	},
	a.extend(FX.ChartUtils.prototype, {
		getChartData: function () {
			var a = this.options,
			b = [],
			c = [],
			d = [];
			return a.valueFields.length > 1 && (a.rowGroups = []),
			this._initGroup(b, c),
			FX.Utils.isObjectEmpty(a.rowGroups) ? this._dealDataWithValue(b, d) : this._dealDataWithSeries(b, c, d), {
				category: b,
				series: c,
				data: d,
				nameMap: a.nameMap
			}
		},
		_initGroup: function (a, b) {
			var c = this.options,
			d = this;
			FX.Utils.forEach(c.data.dataMap, function (e, f) {
				if (!FX.Utils.isEmpty(f._id)) {
					var g;
					FX.Utils.isObjectEmpty(c.colGroups) || (g = d._getGroupName(f._id, c.colGroups), g && a.indexOf(g) < 0 && a.push(g)),
					FX.Utils.isObjectEmpty(c.rowGroups) || (g = d._getGroupName(f._id, c.rowGroups), g && b.indexOf(g) < 0 && b.push(g))
				}
			}),
			FX.Utils.isObjectEmpty(c.colGroups) && a.push(d._getValueText(c.valueFields[0], a)),
			FX.Utils.isObjectEmpty(c.rowGroups) && FX.Utils.forEach(c.valueFields, function (a, c) {
				c.enable !== !1 && b.push(d._getValueText(c, b))
			})
		},
		_getGroupName: function (a, b) {
			if (FX.Utils.isObjectEmpty(b) || FX.Utils.isObjectEmpty(a))
				return null;
			var c,
			d = this.options,
			e = "",
			f = b.length,
			g = new Date;
			return FX.Utils.forEach(b, function (b, h) {
				var i = h.groupName || h.tag || h.name.toString().replace(".", "%");
				switch (h.type) {
				case "datetime":
					0 === b ? (c = "yyyy", g.setFullYear(a[i])) : 1 === b ? (c = "yyyy-MM", g.setMonth(a[i] - 1, 1)) : (c = "yyyy-MM-dd", g.setDate(a[i])),
					b === f - 1 && (e = FX.Utils.date2Str(g, c));
					break;
				case "address":
				case "location":
					e += a[i],
					b < f - 1 && (e += "/");
					break;
				default:
					var j = a[i] && a[i].value;
					j ? (e = a[i].text, d.nameMap[e] = j) : e = a[i]
				}
			}),
			e ? e : "-"
		},
		_dealDataWithSeries: function (a, b, c) {
			var d = this.options,
			e = this;
			FX.Utils.forEach(d.data.dataMap, function (f, g) {
				if (!FX.Utils.isEmpty(g._id)) {
					var h = e._getGroupName(g._id, d.colGroups),
					i = e._getGroupName(g._id, d.rowGroups),
					j = 0,
					k = 0;
					FX.Utils.isObjectEmpty(d.colGroups) || (j = Math.max(a.indexOf(h), j)),
					k = Math.max(b.indexOf(i), k),
					c[k] || (c[k] = [], c[k].length = a.length),
					c[k][j] = e._getGroupValue(d.valueFields[0], g)
				}
			})
		},
		_dealDataWithValue: function (a, b) {
			var c = this.options,
			d = this;
			FX.Utils.forEach(c.data.dataMap, function (e, f) {
				var g = d._getGroupName(f._id, c.colGroups),
				h = 0;
				FX.Utils.forEach(c.valueFields, function (e, i) {
					if (i.enable !== !1) {
						var j = 0;
						FX.Utils.isObjectEmpty(c.colGroups) || (j = Math.max(a.indexOf(g), j)),
						b[h] || (b[h] = [], b[h].length = a.length),
						b[h][j] = d._getGroupValue(i, f),
						h++
					}
				})
			})
		},
		_getGroupValue: function (a, b) {
			var c = a.tag || a.name;
			/\./.test(c) && (c = c.replace(".", "%"));
			var d = b[c];
			return d = FX.Utils.isNumber(d) ? FX.Utils.fixDecimalPrecision(d) : 0
		},
		_getValueText: function (a, b) {
			for (var c = 1, d = a.text; b.indexOf(d) > -1; )
				d = a.text + c++;
			return d
		}
	})
}
(jQuery), function (a) {
	function b() {
		return "" === i.hash || "#" === i.hash
	}
	function c(a, b) {
		for (var c = 0; c < a.length; c += 1)
			if (b(a[c], c, a) === !1)
				return
	}
	function d(a) {
		for (var b = [], c = 0, d = a.length; c < d; c++)
			b = b.concat(a[c]);
		return b
	}
	function e(a, b, c) {
		if (!a.length)
			return c();
		var d = 0;
		!function e() {
			b(a[d], function (b) {
				b || b === !1 ? (c(b), c = function () {}) : (d += 1, d === a.length ? c() : e())
			})
		}
		()
	}
	function f(a, b, c) {
		c = a;
		for (var d in b)
			if (b.hasOwnProperty(d) && (c = b[d](a), c !== a))
				break;
		return c === a ? "([._a-zA-Z0-9-%()]+)" : c
	}
	function g(a, b) {
		for (var c, d = 0, e = ""; c = a.substr(d).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/); )
			d = c.index + c[0].length, c[0] = c[0].replace(/^\*/, "([_.()!\\ %@&a-zA-Z0-9-]+)"), e += a.substr(0, c.index) + c[0];
		a = e += a.substr(d);
		var g,
		h,
		i = a.match(/:([^\/]+)/gi);
		if (i) {
			h = i.length;
			for (var j = 0; j < h; j++)
				g = i[j], a = "::" === g.slice(0, 2) ? g.slice(1) : a.replace(g, f(g, b))
		}
		return a
	}
	function h(a, b, c, d) {
		var e,
		f = 0,
		g = 0,
		h = 0,
		c = (c || "(").toString(),
		d = (d || ")").toString();
		for (e = 0; e < a.length; e++) {
			var i = a[e];
			if (i.indexOf(c, f) > i.indexOf(d, f) || ~i.indexOf(c, f) && !~i.indexOf(d, f) || !~i.indexOf(c, f) && ~i.indexOf(d, f)) {
				if (g = i.indexOf(c, f), h = i.indexOf(d, f), ~g && !~h || !~g && ~h) {
					var j = a.slice(0, (e || 1) + 1).join(b);
					a = [j].concat(a.slice((e || 1) + 1))
				}
				f = (h > g ? h : g) + 1,
				e = 0
			} else
				f = 0
		}
		return a
	}
	var i = document.location,
	j = {
		hash: i.hash,
		fire: function () {
			window.onhashchange()
		},
		init: function (a) {
			function b(a) {
				for (var b = 0, c = k.listeners.length; b < c; b++)
					k.listeners[b](a)
			}
			k.listeners || (k.listeners = []),
			window.addEventListener("hashchange", b),
			k.listeners.push(a)
		},
		destroy: function (a) {
			if (k && k.listeners)
				for (var b = k.listeners, c = b.length - 1; c >= 0; c--)
					b[c] === a && b.splice(c, 1)
		},
		setHash: function (a) {
			return i.hash = "/" === a[0] ? a : "/" + a,
			this
		}
	},
	k = a.Router = function (a) {
		return this instanceof k ? (this.params = {}, this.routes = {}, this.methods = ["on", "once", "after", "before"], this.scope = [], this._methods = {}, this._insert = this.insert, this.insert = this.insertEx, this.historySupport = null != (null != window.history ? window.history.pushState : null), this.configure(), void this.mount(a || {})) : new k(a)
	};
	k.prototype.init = function (a) {
		var c = this;
		return this.handler = function (a) {
			var b = a && a.newURL || window.location.hash,
			d = b.replace(/.*#/, "");
			c.dispatch("on", "/" === d.charAt(0) ? d : "/" + d)
		},
		j.init(this.handler),
		b() && a ? i.hash = a : b() || c.dispatch("on", "/" + i.hash.replace(/^(#\/|#|\/)/, "")),
		this
	},
	k.prototype.explode = function () {
		var a = i.hash;
		return "/" === a.charAt(1) && (a = a.slice(1)),
		a.slice(1, a.length).split("/")
	},
	k.prototype.setRoute = function (a, b, c) {
		var d = this.explode();
		return "number" == typeof a && "string" == typeof b ? d[a] = b : "string" == typeof c ? d.splice(a, b, s) : d = [a],
		j.setHash(d.join("/")),
		d
	},
	k.prototype.insertEx = function (a, b, c, d) {
		return "once" === a && (a = "on", c = function (a) {
			var b = !1;
			return function () {
				if (!b)
					return b = !0, a.apply(this, arguments)
			}
		}
			(c)),
		this._insert(a, b, c, d)
	},
	k.prototype.getRoute = function (a) {
		var b = a;
		if ("number" == typeof a)
			b = this.explode()[a];
		else if ("string" == typeof a) {
			var c = this.explode();
			b = c.indexOf(a)
		} else
			b = this.explode();
		return b
	},
	k.prototype.destroy = function () {
		return j.destroy(this.handler),
		this
	},
	k.prototype.getPath = function () {
		var a = window.location.pathname;
		return "/" !== a.substr(0, 1) && (a = "/" + a),
		a
	};
	var l = /\?.*/;
	k.prototype.configure = function (a) {
		a = a || {};
		for (var b = 0; b < this.methods.length; b++)
			this._methods[this.methods[b]] = !0;
		return this.recurse = a.recurse || this.recurse || !1,
		this.async = a.async || !1,
		this.delimiter = a.delimiter || "/",
		this.strict = "undefined" == typeof a.strict || a.strict,
		this.notfound = a.notfound,
		this.resource = a.resource,
		this.run_in_init = !1,
		this.convert_hash_in_init = !1,
		this.every = {
			after: a.after || null,
			before: a.before || null,
			on: a.on || null
		},
		this
	},
	k.prototype.param = function (a, b) {
		":" !== a[0] && (a = ":" + a);
		var c = new RegExp(a, "g");
		return this.params[a] = function (a) {
			return a.replace(c, b.source || b)
		},
		this
	},
	k.prototype.on = k.prototype.route = function (a, b, c) {
		var d = this;
		return c || "function" != typeof b || (c = b, b = a, a = "on"),
		Array.isArray(b) ? b.forEach(function (b) {
			d.on(a, b, c)
		}) : (b.source && (b = b.source.replace(/\\\//gi, "/")), Array.isArray(a) ? a.forEach(function (a) {
				d.on(a.toLowerCase(), b, c)
			}) : (b = b.split(new RegExp(this.delimiter)), b = h(b, this.delimiter), void this.insert(a, this.scope.concat(b), c)))
	},
	k.prototype.path = function (a, b) {
		var c = this.scope.length;
		a.source && (a = a.source.replace(/\\\//gi, "/")),
		a = a.split(new RegExp(this.delimiter)),
		a = h(a, this.delimiter),
		this.scope = this.scope.concat(a),
		b.call(this, this),
		this.scope.splice(c, a.length)
	},
	k.prototype.dispatch = function (a, b, c) {
		function d() {
			f.last = g.after,
			f.invoke(f.runlist(g), f, c)
		}
		var e,
		f = this,
		g = this.traverse(a, b.replace(l, ""), this.routes, ""),
		h = this._invoked;
		return this._invoked = !0,
		g && 0 !== g.length ? ("forward" === this.recurse && (g = g.reverse()), e = this.every && this.every.after ? [this.every.after].concat(this.last) : [this.last], e && e.length > 0 && h ? (this.async ? this.invoke(e, this, d) : (this.invoke(e, this), d()), !0) : (d(), !0)) : (this.last = [], "function" == typeof this.notfound && this.invoke([this.notfound], {
				method: a,
				path: b
			}, c), !1)
	},
	k.prototype.invoke = function (a, b, d) {
		var f,
		g = this;
		this.async ? (f = function (c, d) {
			return Array.isArray(c) ? e(c, f, d) : void("function" == typeof c && c.apply(b, (a.captures || []).concat(d)))
		}, e(a, f, function () {
				d && d.apply(b, arguments)
			})) : (f = function (d) {
			return Array.isArray(d) ? c(d, f) : "function" == typeof d ? d.apply(b, a.captures || []) : void("string" == typeof d && g.resource && g.resource[d].apply(b, a.captures || []))
		}, c(a, f))
	},
	k.prototype.traverse = function (a, b, c, d, e) {
		function f(a) {
			function b(a) {
				for (var c = [], d = 0; d < a.length; d++)
					c[d] = Array.isArray(a[d]) ? b(a[d]) : a[d];
				return c
			}
			function c(a) {
				for (var b = a.length - 1; b >= 0; b--)
					Array.isArray(a[b]) ? (c(a[b]), 0 === a[b].length && a.splice(b, 1)) : e(a[b]) || a.splice(b, 1)
			}
			if (!e)
				return a;
			var d = b(a);
			return d.matched = a.matched,
			d.captures = a.captures,
			d.after = a.after.filter(e),
			c(d),
			d
		}
		var g,
		h,
		i,
		j,
		k = [];
		if (b === this.delimiter && c[a])
			return j = [[c.before, c[a]].filter(Boolean)], j.after = [c.after].filter(Boolean), j.matched = !0, j.captures = [], f(j);
		for (var l in c)
			if (c.hasOwnProperty(l) && (!this._methods[l] || this._methods[l] && "object" == typeof c[l] && !Array.isArray(c[l]))) {
				if (g = h = d + this.delimiter + l, this.strict || (h += "[" + this.delimiter + "]?"), i = b.match(new RegExp("^" + h)), !i)
					continue;
				if (i[0] && i[0] == b && c[l][a])
					return j = [[c[l].before, c[l][a]].filter(Boolean)], j.after = [c[l].after].filter(Boolean), j.matched = !0, j.captures = i.slice(1), this.recurse && c === this.routes && (j.push([c.before, c.on].filter(Boolean)), j.after = j.after.concat([c.after].filter(Boolean))), f(j);
				if (j = this.traverse(a, b, c[l], g), j.matched)
					return j.length > 0 && (k = k.concat(j)), this.recurse && (k.push([c[l].before, c[l].on].filter(Boolean)), j.after = j.after.concat([c[l].after].filter(Boolean)), c === this.routes && (k.push([c.before, c.on].filter(Boolean)), j.after = j.after.concat([c.after].filter(Boolean)))), k.matched = !0, k.captures = j.captures, k.after = j.after, f(k)
			}
		return !1
	},
	k.prototype.insert = function (a, b, c, d) {
		var e,
		f,
		h,
		i,
		j;
		if (b = b.filter(function (a) {
					return a && a.length > 0
				}), d = d || this.routes, j = b.shift(), /\:|\*/.test(j) && !/\\d|\\w/.test(j) && (j = g(j, this.params)), b.length > 0)
			return d[j] = d[j] || {},
		this.insert(a, b, c, d[j]);
		if (j || b.length || d !== this.routes) {
			if (f = typeof d[j], h = Array.isArray(d[j]), d[j] && !h && "object" == f)
				switch (e = typeof d[j][a]) {
				case "function":
					return void(d[j][a] = [d[j][a], c]);
				case "object":
					return void d[j][a].push(c);
				case "undefined":
					return void(d[j][a] = c)
				}
			else if ("undefined" == f)
				return i = {},
			i[a] = c,
			void(d[j] = i);
			throw new Error("Invalid route context: " + f)
		}
		switch (e = typeof d[a]) {
		case "function":
			return void(d[a] = [d[a], c]);
		case "object":
			return void d[a].push(c);
		case "undefined":
			return void(d[a] = c)
		}
	},
	k.prototype.extend = function (a) {
		function b(a) {
			d._methods[a] = !0,
			d[a] = function () {
				var b = 1 === arguments.length ? [a, ""] : [a];
				d.on.apply(d, b.concat(Array.prototype.slice.call(arguments)))
			}
		}
		var c,
		d = this,
		e = a.length;
		for (c = 0; c < e; c++)
			b(a[c])
	},
	k.prototype.runlist = function (a) {
		var b = this.every && this.every.before ? [this.every.before].concat(d(a)) : d(a);
		return this.every && this.every.on && b.push(this.every.on),
		b.captures = a.captures,
		b.source = a.source,
		b
	},
	k.prototype.mount = function (a, b) {
		function c(b, c) {
			var e = b,
			f = b.split(d.delimiter),
			g = typeof a[b],
			i = "" === f[0] || !d._methods[f[0]],
			j = i ? "on" : e;
			return i && (e = e.slice((e.match(new RegExp("^" + d.delimiter)) || [""])[0].length), f.shift()),
			i && "object" === g && !Array.isArray(a[b]) ? (c = c.concat(f), void d.mount(a[b], c)) : (i && (c = c.concat(e.split(d.delimiter)), c = h(c, d.delimiter)), void d.insert(j, c, a[b]))
		}
		if (a && "object" == typeof a && !Array.isArray(a)) {
			var d = this;
			b = b || [],
			Array.isArray(b) || (b = b.split(d.delimiter));
			for (var e in a)
				a.hasOwnProperty(e) && c(e, b.slice(0))
		}
	}
}
("object" == typeof exports ? exports : window), function (a) {
	"function" == typeof define && define.amd ? define(["jquery"], a) : a(window.jQuery)
}
(function (a) {
	Array.prototype.reduce || (Array.prototype.reduce = function (a) {
		var b,
		c = Object(this),
		d = c.length >>> 0,
		e = 0;
		if (2 === arguments.length)
			b = arguments[1];
		else {
			for (; e < d && !(e in c); )
				e++;
			if (e >= d)
				throw new TypeError("Reduce of empty array with no initial value");
			b = c[e++]
		}
		for (; e < d; e++)
			e in c && (b = a(b, c[e], e, c));
		return b
	}),
	"function" != typeof Array.prototype.filter && (Array.prototype.filter = function (a) {
		for (var b = Object(this), c = b.length >>> 0, d = [], e = arguments.length >= 2 ? arguments[1] : void 0, f = 0; f < c; f++)
			if (f in b) {
				var g = b[f];
				a.call(e, g, f, b) && d.push(g)
			}
		return d
	});
	var b,
	c = "function" == typeof define && define.amd,
	d = function (b) {
		var c = "Comic Sans MS" === b ? "Courier New" : "Comic Sans MS",
		d = a("<div>").css({
				position: "absolute",
				left: "-9999px",
				top: "-9999px",
				fontSize: "200px"
			}).text("mmmmmmmmmwwwwwww").appendTo(document.body),
		e = d.css("fontFamily", c).width(),
		f = d.css("fontFamily", b + "," + c).width();
		return d.remove(),
		e !== f
	},
	e = navigator.userAgent,
	f = {
		isMac: navigator.appVersion.indexOf("Mac") > -1,
		isMSIE: /MSIE|Trident/i.test(e),
		isFF: /firefox/i.test(e),
		isWebkit: /webkit/i.test(e),
		isSafari: /safari/i.test(e),
		jqueryVersion: parseFloat(a.fn.jquery),
		isSupportAmd: c,
		hasCodeMirror: c ? require.specified("CodeMirror") : !!window.CodeMirror,
		isFontInstalled: d,
		isW3CRangeSupport: !!document.createRange
	},
	g = function () {
		var b = function (a) {
			return function (b) {
				return a === b
			}
		},
		c = function (a, b) {
			return a === b
		},
		d = function (a) {
			return function (b, c) {
				return b[a] === c[a]
			}
		},
		e = function () {
			return !0
		},
		f = function () {
			return !1
		},
		g = function (a) {
			return function () {
				return !a.apply(a, arguments)
			}
		},
		h = function (a, b) {
			return function (c) {
				return a(c) && b(c)
			}
		},
		i = function (a) {
			return a
		},
		j = 0,
		k = function (a) {
			var b = ++j + "";
			return a ? a + b : b
		},
		l = function (b) {
			var c = a(document);
			return {
				top: b.top + c.scrollTop(),
				left: b.left + c.scrollLeft(),
				width: b.right - b.left,
				height: b.bottom - b.top
			}
		},
		m = function (a) {
			var b = {};
			for (var c in a)
				a.hasOwnProperty(c) && (b[a[c]] = c);
			return b
		},
		n = function (a, b) {
			return b = b || "",
			b + a.split(".").map(function (a) {
				return a.substring(0, 1).toUpperCase() + a.substring(1)
			}).join("")
		};
		return {
			eq: b,
			eq2: c,
			peq2: d,
			ok: e,
			fail: f,
			self: i,
			not: g,
			and: h,
			uniqueId: k,
			rect2bnd: l,
			invertObject: m,
			namespaceToCamel: n
		}
	}
	(),
	h = function () {
		var b = function (a) {
			return a[0]
		},
		c = function (a) {
			return a[a.length - 1]
		},
		d = function (a) {
			return a.slice(0, a.length - 1)
		},
		e = function (a) {
			return a.slice(1)
		},
		f = function (a, b) {
			for (var c = 0, d = a.length; c < d; c++) {
				var e = a[c];
				if (b(e))
					return e
			}
		},
		h = function (a, b) {
			for (var c = 0, d = a.length; c < d; c++)
				if (!b(a[c]))
					return !1;
			return !0
		},
		i = function (b, c) {
			return a.inArray(c, b) !== -1
		},
		j = function (a, b) {
			return b = b || g.self,
			a.reduce(function (a, c) {
				return a + b(c)
			}, 0)
		},
		k = function (a) {
			for (var b = [], c = -1, d = a.length; ++c < d; )
				b[c] = a[c];
			return b
		},
		l = function (a, d) {
			if (!a.length)
				return [];
			var f = e(a);
			return f.reduce(function (a, b) {
				var e = c(a);
				return d(c(e), b) ? e[e.length] = b : a[a.length] = [b],
				a
			}, [[b(a)]])
		},
		m = function (a) {
			for (var b = [], c = 0, d = a.length; c < d; c++)
				a[c] && b.push(a[c]);
			return b
		},
		n = function (a) {
			for (var b = [], c = 0, d = a.length; c < d; c++)
				i(b, a[c]) || b.push(a[c]);
			return b
		},
		o = function (a, b) {
			var c = a.indexOf(b);
			return c === -1 ? null : a[c + 1]
		},
		p = function (a, b) {
			var c = a.indexOf(b);
			return c === -1 ? null : a[c - 1]
		};
		return {
			head: b,
			last: c,
			initial: d,
			tail: e,
			prev: p,
			next: o,
			find: f,
			contains: i,
			all: h,
			sum: j,
			from: k,
			clusterBy: l,
			compact: m,
			unique: n
		}
	}
	(),
	i = String.fromCharCode(160),
	j = "\ufeff",
	k = function () {
		var b = function (b) {
			return b && a(b).hasClass("note-editable")
		},
		c = function (b) {
			return b && a(b).hasClass("note-control-sizing")
		},
		d = function (b) {
			var c;
			if (b.hasClass("note-air-editor")) {
				var d = h.last(b.attr("id").split("-"));
				return c = function (b) {
					return function () {
						return a(b + d)
					}
				}, {
					editor: function () {
						return b
					},
					holder: function () {
						return b.data("holder")
					},
					editable: function () {
						return b
					},
					popover: c("#note-popover-"),
					handle: c("#note-handle-"),
					dialog: c("#note-dialog-")
				}
			}
			return c = function (a) {
				return function () {
					return b.find(a)
				}
			}, {
				editor: function () {
					return b
				},
				holder: function () {
					return b.data("holder")
				},
				dropzone: c(".note-dropzone"),
				toolbar: c(".note-toolbar"),
				editable: c(".note-editable"),
				codable: c(".note-codable"),
				statusbar: c(".note-statusbar"),
				popover: c(".note-popover"),
				handle: c(".note-handle"),
				dialog: c(".note-dialog")
			}
		},
		e = function (b) {
			var c = a(b).closest(".note-editor, .note-air-editor, .note-air-layout");
			if (!c.length)
				return null;
			var e;
			return e = c.is(".note-editor, .note-air-editor") ? c : a("#note-editor-" + h.last(c.attr("id").split("-"))),
			d(e)
		},
		l = function (a) {
			return a = a.toUpperCase(),
			function (b) {
				return b && b.nodeName.toUpperCase() === a
			}
		},
		m = function (a) {
			return a && 3 === a.nodeType
		},
		n = function (a) {
			return a && /^BR|^IMG|^HR/.test(a.nodeName.toUpperCase())
		},
		o = function (a) {
			return !b(a) && (a && /^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase()))
		},
		p = l("LI"),
		q = function (a) {
			return o(a) && !p(a)
		},
		r = l("TABLE"),
		s = function (a) {
			return !(w(a) || t(a) || o(a) || r(a) || v(a))
		},
		t = function (a) {
			return a && /^UL|^OL/.test(a.nodeName.toUpperCase())
		},
		u = function (a) {
			return a && /^TD|^TH/.test(a.nodeName.toUpperCase())
		},
		v = l("BLOCKQUOTE"),
		w = function (a) {
			return u(a) || v(a) || b(a)
		},
		x = l("A"),
		y = function (a) {
			return s(a) && !!H(a, o)
		},
		z = function (a) {
			return s(a) && !H(a, o)
		},
		A = l("BODY"),
		B = function (a, b) {
			return a.nextSibling === b || a.previousSibling === b
		},
		C = function (a, b) {
			b = b || g.ok;
			var c = [];
			return a.previousSibling && b(a.previousSibling) && c.push(a.previousSibling),
			c.push(a),
			a.nextSibling && b(a.nextSibling) && c.push(a.nextSibling),
			c
		},
		D = f.isMSIE ? "&nbsp;" : "<br>",
		E = function (a) {
			return m(a) ? a.nodeValue.length : a.childNodes.length
		},
		F = function (a) {
			var b = E(a);
			return 0 === b || (!m(a) && 1 === b && a.innerHTML === D || !(!h.all(a.childNodes, m) || "" !== a.innerHTML))
		},
		G = function (a) {
			n(a) || E(a) || (a.innerHTML = D)
		},
		H = function (a, c) {
			for (; a; ) {
				if (c(a))
					return a;
				if (b(a))
					break;
				a = a.parentNode
			}
			return null
		},
		I = function (a, c) {
			for (a = a.parentNode; a && 1 === E(a); ) {
				if (c(a))
					return a;
				if (b(a))
					break;
				a = a.parentNode
			}
			return null
		},
		J = function (a, c) {
			c = c || g.fail;
			var d = [];
			return H(a, function (a) {
				return b(a) || d.push(a),
				c(a)
			}),
			d
		},
		K = function (a, b) {
			var c = J(a);
			return h.last(c.filter(b))
		},
		L = function (b, c) {
			for (var d = J(b), e = c; e; e = e.parentNode)
				if (a.inArray(e, d) > -1)
					return e;
			return null
		},
		M = function (a, b) {
			b = b || g.fail;
			for (var c = []; a && !b(a); )
				c.push(a), a = a.previousSibling;
			return c
		},
		N = function (a, b) {
			b = b || g.fail;
			for (var c = []; a && !b(a); )
				c.push(a), a = a.nextSibling;
			return c
		},
		O = function (a, b) {
			var c = [];
			return b = b || g.ok,
			function d(e) {
				a !== e && b(e) && c.push(e);
				for (var f = 0, g = e.childNodes.length; f < g; f++)
					d(e.childNodes[f])
			}
			(a),
			c
		},
		P = function (b, c) {
			var d = b.parentNode,
			e = a("<" + c + ">")[0];
			return d.insertBefore(e, b),
			e.appendChild(b),
			e
		},
		Q = function (a, b) {
			var c = b.nextSibling,
			d = b.parentNode;
			return c ? d.insertBefore(a, c) : d.appendChild(a),
			a
		},
		R = function (b, c) {
			return a.each(c, function (a, c) {
				b.appendChild(c)
			}),
			b
		},
		S = function (a) {
			return 0 === a.offset
		},
		T = function (a) {
			return a.offset === E(a.node)
		},
		U = function (a) {
			return S(a) || T(a)
		},
		V = function (a, b) {
			for (; a && a !== b; ) {
				if (0 !== X(a))
					return !1;
				a = a.parentNode
			}
			return !0
		},
		W = function (a, b) {
			for (; a && a !== b; ) {
				if (X(a) !== E(a.parentNode) - 1)
					return !1;
				a = a.parentNode
			}
			return !0
		},
		X = function (a) {
			for (var b = 0; a = a.previousSibling; )
				b += 1;
			return b
		},
		Y = function (a) {
			return !!(a && a.childNodes && a.childNodes.length)
		},
		Z = function (a, c) {
			var d,
			e;
			if (0 === a.offset) {
				if (b(a.node))
					return null;
				d = a.node.parentNode,
				e = X(a.node)
			} else
				Y(a.node) ? (d = a.node.childNodes[a.offset - 1], e = E(d)) : (d = a.node, e = c ? 0 : a.offset - 1);
			return {
				node: d,
				offset: e
			}
		},
		$ = function (a, c) {
			var d,
			e;
			if (E(a.node) === a.offset) {
				if (b(a.node))
					return null;
				d = a.node.parentNode,
				e = X(a.node) + 1
			} else
				Y(a.node) ? (d = a.node.childNodes[a.offset], e = 0) : (d = a.node, e = c ? E(a.node) : a.offset + 1);
			return {
				node: d,
				offset: e
			}
		},
		_ = function (a, b) {
			return a.node === b.node && a.offset === b.offset
		},
		aa = function (a) {
			if (m(a.node) || !Y(a.node) || F(a.node))
				return !0;
			var b = a.node.childNodes[a.offset - 1],
			c = a.node.childNodes[a.offset];
			return !(b && !n(b) || c && !n(c))
		},
		ba = function (a, b) {
			for (; a; ) {
				if (b(a))
					return a;
				a = Z(a)
			}
			return null
		},
		ca = function (a, b) {
			for (; a; ) {
				if (b(a))
					return a;
				a = $(a)
			}
			return null
		},
		da = function (a) {
			if (!m(a.node))
				return !1;
			var b = a.node.nodeValue.charAt(a.offset - 1);
			return b && " " !== b && b !== i
		},
		ea = function (a, b, c, d) {
			for (var e = a; e && (c(e), !_(e, b)); ) {
				var f = d && a.node !== e.node && b.node !== e.node;
				e = $(e, f)
			}
		},
		fa = function (b, c) {
			var d = J(c, g.eq(b));
			return a.map(d, X).reverse()
		},
		ga = function (a, b) {
			for (var c = a, d = 0, e = b.length; d < e; d++)
				c = c.childNodes.length <= b[d] ? c.childNodes[c.childNodes.length - 1] : c.childNodes[b[d]];
			return c
		},
		ha = function (a, b) {
			var c = b && b.isSkipPaddingBlankHTML,
			d = b && b.isNotSplitEdgePoint;
			if (U(a) && (m(a.node) || d)) {
				if (S(a))
					return a.node;
				if (T(a))
					return a.node.nextSibling
			}
			if (m(a.node))
				return a.node.splitText(a.offset);
			var e = a.node.childNodes[a.offset],
			f = Q(a.node.cloneNode(!1), a.node);
			return R(f, N(e)),
			c || (G(a.node), G(f)),
			f
		},
		ia = function (a, b, c) {
			var d = J(b.node, g.eq(a));
			return d.length ? 1 === d.length ? ha(b, c) : d.reduce(function (a, d) {
				return a === b.node && (a = ha(b, c)),
				ha({
					node: d,
					offset: a ? k.position(a) : E(d)
				}, c)
			}) : null
		},
		ja = function (a, b) {
			var c,
			d,
			e = b ? o : w,
			f = J(a.node, e),
			g = h.last(f) || a.node;
			e(g) ? (c = f[f.length - 2], d = g) : (c = g, d = c.parentNode);
			var i = c && ia(c, a, {
					isSkipPaddingBlankHTML: b,
					isNotSplitEdgePoint: b
				});
			return i || d !== a.node || (i = a.node.childNodes[a.offset]), {
				rightNode: i,
				container: d
			}
		},
		ka = function (a) {
			return document.createElement(a)
		},
		la = function (a) {
			return document.createTextNode(a)
		},
		ma = function (a, b) {
			if (a && a.parentNode) {
				if (a.removeNode)
					return a.removeNode(b);
				var c = a.parentNode;
				if (!b) {
					var d,
					e,
					f = [];
					for (d = 0, e = a.childNodes.length; d < e; d++)
						f.push(a.childNodes[d]);
					for (d = 0, e = f.length; d < e; d++)
						c.insertBefore(f[d], a)
				}
				c.removeChild(a)
			}
		},
		na = function (a, c) {
			for (; a && !b(a) && c(a); ) {
				var d = a.parentNode;
				ma(a),
				a = d
			}
		},
		oa = function (a, b) {
			if (a.nodeName.toUpperCase() === b.toUpperCase())
				return a;
			var c = ka(b);
			return a.style.cssText && (c.style.cssText = a.style.cssText),
			R(c, h.from(a.childNodes)),
			Q(c, a),
			ma(a),
			c
		},
		pa = l("TEXTAREA"),
		qa = function (a, b) {
			var c = pa(a[0]) ? a.val() : a.html();
			return b ? c.replace(/[\n\r]/g, "") : c
		},
		ra = function (b, c) {
			var d = qa(b);
			if (c) {
				var e = /<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;
				d = d.replace(e, function (a, b, c) {
						c = c.toUpperCase();
						var d = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c) && !!b,
						e = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);
						return a + (d || e ? "\n" : "")
					}),
				d = a.trim(d)
			}
			return d
		};
		return {
			NBSP_CHAR: i,
			ZERO_WIDTH_NBSP_CHAR: j,
			blank: D,
			emptyPara: "<p>" + D + "</p>",
			makePredByNodeName: l,
			isEditable: b,
			isControlSizing: c,
			buildLayoutInfo: d,
			makeLayoutInfo: e,
			isText: m,
			isVoid: n,
			isPara: o,
			isPurePara: q,
			isInline: s,
			isBlock: g.not(s),
			isBodyInline: z,
			isBody: A,
			isParaInline: y,
			isList: t,
			isTable: r,
			isCell: u,
			isBlockquote: v,
			isBodyContainer: w,
			isAnchor: x,
			isDiv: l("DIV"),
			isLi: p,
			isBR: l("BR"),
			isSpan: l("SPAN"),
			isB: l("B"),
			isU: l("U"),
			isS: l("S"),
			isI: l("I"),
			isImg: l("IMG"),
			isTextarea: pa,
			isEmpty: F,
			isEmptyAnchor: g.and(x, F),
			isClosestSibling: B,
			withClosestSiblings: C,
			nodeLength: E,
			isLeftEdgePoint: S,
			isRightEdgePoint: T,
			isEdgePoint: U,
			isLeftEdgeOf: V,
			isRightEdgeOf: W,
			prevPoint: Z,
			nextPoint: $,
			isSamePoint: _,
			isVisiblePoint: aa,
			prevPointUntil: ba,
			nextPointUntil: ca,
			isCharPoint: da,
			walkPoint: ea,
			ancestor: H,
			singleChildAncestor: I,
			listAncestor: J,
			lastAncestor: K,
			listNext: N,
			listPrev: M,
			listDescendant: O,
			commonAncestor: L,
			wrap: P,
			insertAfter: Q,
			appendChildNodes: R,
			position: X,
			hasChildren: Y,
			makeOffsetPath: fa,
			fromOffsetPath: ga,
			splitTree: ia,
			splitPoint: ja,
			create: ka,
			createText: la,
			remove: ma,
			removeWhile: na,
			replace: oa,
			html: ra,
			value: qa
		}
	}
	(),
	l = function () {
		var b = function (a, b) {
			var c,
			d,
			e = a.parentElement(),
			f = document.body.createTextRange(),
			g = h.from(e.childNodes);
			for (c = 0; c < g.length; c++)
				if (!k.isText(g[c])) {
					if (f.moveToElementText(g[c]), f.compareEndPoints("StartToStart", a) >= 0)
						break;
					d = g[c]
				}
			if (0 !== c && k.isText(g[c - 1])) {
				var i = document.body.createTextRange(),
				j = null;
				i.moveToElementText(d || e),
				i.collapse(!d),
				j = d ? d.nextSibling : e.firstChild;
				var l = a.duplicate();
				l.setEndPoint("StartToStart", i);
				for (var m = l.text.replace(/[\r\n]/g, "").length; m > j.nodeValue.length && j.nextSibling; )
					m -= j.nodeValue.length, j = j.nextSibling;
				j.nodeValue;
				b && j.nextSibling && k.isText(j.nextSibling) && m === j.nodeValue.length && (m -= j.nodeValue.length, j = j.nextSibling),
				e = j,
				c = m
			}
			return {
				cont: e,
				offset: c
			}
		},
		c = function (a) {
			var b = function (a, c) {
				var d,
				e;
				if (k.isText(a)) {
					var f = k.listPrev(a, g.not(k.isText)),
					i = h.last(f).previousSibling;
					d = i || a.parentNode,
					c += h.sum(h.tail(f), k.nodeLength),
					e = !i
				} else {
					if (d = a.childNodes[c] || a, k.isText(d))
						return b(d, 0);
					c = 0,
					e = !1
				}
				return {
					node: d,
					collapseToStart: e,
					offset: c
				}
			},
			c = document.body.createTextRange(),
			d = b(a.node, a.offset);
			return c.moveToElementText(d.node),
			c.collapse(d.collapseToStart),
			c.moveStart("character", d.offset),
			c
		},
		d = function (b, e, i, j) {
			this.sc = b,
			this.so = e,
			this.ec = i,
			this.eo = j;
			var l = function () {
				if (f.isW3CRangeSupport) {
					var a = document.createRange();
					return a.setStart(b, e),
					a.setEnd(i, j),
					a
				}
				var d = c({
						node: b,
						offset: e
					});
				return d.setEndPoint("EndToEnd", c({
						node: i,
						offset: j
					})),
				d
			};
			this.getPoints = function () {
				return {
					sc: b,
					so: e,
					ec: i,
					eo: j
				}
			},
			this.getStartPoint = function () {
				return {
					node: b,
					offset: e
				}
			},
			this.getEndPoint = function () {
				return {
					node: i,
					offset: j
				}
			},
			this.select = function () {
				var a = l();
				if (f.isW3CRangeSupport) {
					var b = document.getSelection();
					b.rangeCount > 0 && b.removeAllRanges(),
					b.addRange(a)
				} else
					a.select();
				return this
			},
			this.normalize = function () {
				var a = function (a) {
					return k.isVisiblePoint(a) || (a = k.isLeftEdgePoint(a) ? k.nextPointUntil(a, k.isVisiblePoint) : k.prevPointUntil(a, k.isVisiblePoint)),
					a
				},
				b = a(this.getStartPoint()),
				c = a(this.getEndPoint());
				return new d(b.node, b.offset, c.node, c.offset)
			},
			this.nodes = function (a, b) {
				a = a || g.ok;
				var c = b && b.includeAncestor,
				d = b && b.fullyContains,
				e = this.getStartPoint(),
				f = this.getEndPoint(),
				i = [],
				j = [];
				return k.walkPoint(e, f, function (b) {
					if (!k.isEditable(b.node)) {
						var e;
						d ? (k.isLeftEdgePoint(b) && j.push(b.node), k.isRightEdgePoint(b) && h.contains(j, b.node) && (e = b.node)) : e = c ? k.ancestor(b.node, a) : b.node,
						e && a(e) && i.push(e)
					}
				}, !0),
				h.unique(i)
			},
			this.commonAncestor = function () {
				return k.commonAncestor(b, i)
			},
			this.expand = function (a) {
				var c = k.ancestor(b, a),
				f = k.ancestor(i, a);
				if (!c && !f)
					return new d(b, e, i, j);
				var g = this.getPoints();
				return c && (g.sc = c, g.so = 0),
				f && (g.ec = f, g.eo = k.nodeLength(f)),
				new d(g.sc, g.so, g.ec, g.eo)
			},
			this.collapse = function (a) {
				return a ? new d(b, e, b, e) : new d(i, j, i, j)
			},
			this.splitText = function () {
				var a = b === i,
				c = this.getPoints();
				return k.isText(i) && !k.isEdgePoint(this.getEndPoint()) && i.splitText(j),
				k.isText(b) && !k.isEdgePoint(this.getStartPoint()) && (c.sc = b.splitText(e), c.so = 0, a && (c.ec = c.sc, c.eo = j - e)),
				new d(c.sc, c.so, c.ec, c.eo)
			},
			this.deleteContents = function () {
				if (this.isCollapsed())
					return this;
				var b = this.splitText(),
				c = b.nodes(null, {
						fullyContains: !0
					}),
				e = k.prevPointUntil(b.getStartPoint(), function (a) {
						return !h.contains(c, a.node)
					}),
				f = [];
				return a.each(c, function (a, b) {
					var c = b.parentNode;
					e.node !== c && 1 === k.nodeLength(c) && f.push(c),
					k.remove(b, !1)
				}),
				a.each(f, function (a, b) {
					k.remove(b, !1)
				}),
				new d(e.node, e.offset, e.node, e.offset).normalize()
			};
			var m = function (a) {
				return function () {
					var c = k.ancestor(b, a);
					return !!c && c === k.ancestor(i, a)
				}
			};
			this.isOnEditable = m(k.isEditable),
			this.isOnList = m(k.isList),
			this.isOnAnchor = m(k.isAnchor),
			this.isOnCell = m(k.isCell),
			this.isLeftEdgeOf = function (a) {
				if (!k.isLeftEdgePoint(this.getStartPoint()))
					return !1;
				var b = k.ancestor(this.sc, a);
				return b && k.isLeftEdgeOf(this.sc, b)
			},
			this.isCollapsed = function () {
				return b === i && e === j
			},
			this.wrapBodyInlineWithPara = function () {
				if (k.isBodyContainer(b) && k.isEmpty(b))
					return b.innerHTML = k.emptyPara, new d(b.firstChild, 0, b.firstChild, 0);
				if (k.isParaInline(b) || k.isPara(b))
					return this.normalize();
				var a;
				if (k.isInline(b)) {
					var c = k.listAncestor(b, g.not(k.isInline));
					a = h.last(c),
					k.isInline(a) || (a = c[c.length - 2] || b.childNodes[e])
				} else
					a = b.childNodes[e > 0 ? e - 1 : 0];
				var f = k.listPrev(a, k.isParaInline).reverse();
				if (f = f.concat(k.listNext(a.nextSibling, k.isParaInline)), f.length) {
					var i = k.wrap(h.head(f), "p");
					k.appendChildNodes(i, h.tail(f))
				}
				return this.normalize()
			},
			this.insertNode = function (a) {
				var b = this.wrapBodyInlineWithPara().deleteContents(),
				c = k.splitPoint(b.getStartPoint(), k.isInline(a));
				return c.rightNode ? c.rightNode.parentNode.insertBefore(a, c.rightNode) : c.container.appendChild(a),
				a
			},
			this.pasteHTML = function (b) {
				var c = this,
				d = a("<div></div>").html(b)[0],
				e = h.from(d.childNodes);
				return this.wrapBodyInlineWithPara().deleteContents(),
				a.map(e.reverse(), function (a) {
					return c.insertNode(a)
				}).reverse()
			},
			this.toString = function () {
				var a = l();
				return f.isW3CRangeSupport ? a.toString() : a.text
			},
			this.getWordRange = function (a) {
				var b = this.getEndPoint();
				if (!k.isCharPoint(b))
					return this;
				var c = k.prevPointUntil(b, function (a) {
						return !k.isCharPoint(a)
					});
				return a && (b = k.nextPointUntil(b, function (a) {
							return !k.isCharPoint(a)
						})),
				new d(c.node, c.offset, b.node, b.offset)
			},
			this.bookmark = function (a) {
				return {
					s: {
						path: k.makeOffsetPath(a, b),
						offset: e
					},
					e: {
						path: k.makeOffsetPath(a, i),
						offset: j
					}
				}
			},
			this.paraBookmark = function (a) {
				return {
					s: {
						path: h.tail(k.makeOffsetPath(h.head(a), b)),
						offset: e
					},
					e: {
						path: h.tail(k.makeOffsetPath(h.last(a), i)),
						offset: j
					}
				}
			},
			this.getClientRects = function () {
				var a = l();
				return a.getClientRects()
			}
		};
		return {
			create: function (a, c, e, g) {
				if (arguments.length)
					2 === arguments.length && (e = a, g = c);
				else if (f.isW3CRangeSupport) {
					var h = document.getSelection();
					if (!h || 0 === h.rangeCount)
						return null;
					if (k.isBody(h.anchorNode))
						return null;
					var i = h.getRangeAt(0);
					a = i.startContainer,
					c = i.startOffset,
					e = i.endContainer,
					g = i.endOffset
				} else {
					var j = document.selection.createRange(),
					l = j.duplicate();
					l.collapse(!1);
					var m = j;
					m.collapse(!0);
					var n = b(m, !0),
					o = b(l, !1);
					k.isText(n.node) && k.isLeftEdgePoint(n) && k.isTextNode(o.node) && k.isRightEdgePoint(o) && o.node.nextSibling === n.node && (n = o),
					a = n.cont,
					c = n.offset,
					e = o.cont,
					g = o.offset
				}
				return new d(a, c, e, g)
			},
			createFromNode: function (a) {
				var b = a,
				c = 0,
				d = a,
				e = k.nodeLength(d);
				return k.isVoid(b) && (c = k.listPrev(b).length - 1, b = b.parentNode),
				k.isBR(d) ? (e = k.listPrev(d).length - 1, d = d.parentNode) : k.isVoid(d) && (e = k.listPrev(d).length, d = d.parentNode),
				this.create(b, c, d, e)
			},
			createFromNodeBefore: function (a) {
				return this.createFromNode(a).collapse(!0)
			},
			createFromNodeAfter: function (a) {
				return this.createFromNode(a).collapse()
			},
			createFromBookmark: function (a, b) {
				var c = k.fromOffsetPath(a, b.s.path),
				e = b.s.offset,
				f = k.fromOffsetPath(a, b.e.path),
				g = b.e.offset;
				return new d(c, e, f, g)
			},
			createFromParaBookmark: function (a, b) {
				var c = a.s.offset,
				e = a.e.offset,
				f = k.fromOffsetPath(h.head(b), a.s.path),
				g = k.fromOffsetPath(h.last(b), a.e.path);
				return new d(f, c, g, e)
			}
		}
	}
	(),
	m = {
		version: "0.6.7",
		options: {
			width: null,
			height: null,
			minHeight: null,
			maxHeight: null,
			focus: !1,
			tabsize: 4,
			styleWithSpan: !0,
			disableLinkTarget: !1,
			disableDragAndDrop: !1,
			disableResizeEditor: !1,
			shortcuts: !0,
			placeholder: !1,
			prettifyHtml: !0,
			iconPrefix: "iconfont icon-",
			codemirror: {
				mode: "text/html",
				htmlMode: !0,
				lineNumbers: !0
			},
			lang: "zh-CN",
			direction: null,
			toolbar: [["style", ["style"]], ["font", ["bold", "italic", "underline", "clear"]], ["fontname", ["fontname"]], ["fontsize", ["fontsize"]], ["color", ["color"]], ["para", ["ul", "ol", "paragraph"]], ["height", ["height"]], ["table", ["table"]], ["insert", ["link", "unlink", "picture", "hr"]], ["view", ["fullscreen", "codeview"]]],
			plugin: {},
			airMode: !1,
			airPopover: [["color", ["color"]], ["font", ["bold", "underline", "clear"]], ["para", ["ul", "paragraph"]], ["table", ["table"]], ["insert", ["link", "picture"]]],
			styleTags: ["p", "blockquote", "pre", "h1", "h2", "h3", "h4", "h5", "h6"],
			defaultFontName: "Helvetica Neue",
			fontNames: ["Arial", "Arial Black", "Comic Sans MS", "Courier New", "Helvetica Neue", "Helvetica", "Impact", "Lucida Grande", "Tahoma", "Times New Roman", "Verdana"],
			fontNamesIgnoreCheck: [],
			fontSizes: [12, 14, 18, 24, 36],
			colors: ["#333", "#777", "#ccc", "#178cdf", "#5cb85c", "#f0ad4e", "#d9534f"],
			lineHeights: ["1.0", "1.2", "1.4", "1.5", "1.6", "1.8", "2.0", "3.0"],
			insertTableMaxSize: {
				col: 10,
				row: 10
			},
			maximumImageFileSize: null,
			oninit: null,
			onfocus: null,
			onblur: null,
			onenter: null,
			onkeyup: null,
			onkeydown: null,
			onImageUpload: null,
			onImageUploadError: null,
			onMediaDelete: null,
			onToolbarClick: null,
			onsubmit: null,
			onCreateLink: function (a) {
				return a.indexOf("@") !== -1 && a.indexOf(":") === -1 ? a = "mailto:" + a : a.indexOf("://") === -1 && (a = "http://" + a),
				a
			},
			keyMap: {
				pc: {
					ENTER: "insertParagraph",
					"CTRL+Z": "undo",
					"CTRL+Y": "redo",
					TAB: "tab",
					"SHIFT+TAB": "untab",
					"CTRL+B": "bold",
					"CTRL+I": "italic",
					"CTRL+U": "underline",
					"CTRL+SHIFT+S": "strikethrough",
					"CTRL+BACKSLASH": "removeFormat",
					"CTRL+SHIFT+L": "justifyLeft",
					"CTRL+SHIFT+E": "justifyCenter",
					"CTRL+SHIFT+R": "justifyRight",
					"CTRL+SHIFT+J": "justifyFull",
					"CTRL+SHIFT+NUM7": "insertUnorderedList",
					"CTRL+SHIFT+NUM8": "insertOrderedList",
					"CTRL+LEFTBRACKET": "outdent",
					"CTRL+RIGHTBRACKET": "indent",
					"CTRL+NUM0": "formatPara",
					"CTRL+NUM1": "formatH1",
					"CTRL+NUM2": "formatH2",
					"CTRL+NUM3": "formatH3",
					"CTRL+NUM4": "formatH4",
					"CTRL+NUM5": "formatH5",
					"CTRL+NUM6": "formatH6",
					"CTRL+ENTER": "insertHorizontalRule",
					"CTRL+K": "showLinkDialog"
				},
				mac: {
					ENTER: "insertParagraph",
					"CMD+Z": "undo",
					"CMD+SHIFT+Z": "redo",
					TAB: "tab",
					"SHIFT+TAB": "untab",
					"CMD+B": "bold",
					"CMD+I": "italic",
					"CMD+U": "underline",
					"CMD+SHIFT+S": "strikethrough",
					"CMD+BACKSLASH": "removeFormat",
					"CMD+SHIFT+L": "justifyLeft",
					"CMD+SHIFT+E": "justifyCenter",
					"CMD+SHIFT+R": "justifyRight",
					"CMD+SHIFT+J": "justifyFull",
					"CMD+SHIFT+NUM7": "insertUnorderedList",
					"CMD+SHIFT+NUM8": "insertOrderedList",
					"CMD+LEFTBRACKET": "outdent",
					"CMD+RIGHTBRACKET": "indent",
					"CMD+NUM0": "formatPara",
					"CMD+NUM1": "formatH1",
					"CMD+NUM2": "formatH2",
					"CMD+NUM3": "formatH3",
					"CMD+NUM4": "formatH4",
					"CMD+NUM5": "formatH5",
					"CMD+NUM6": "formatH6",
					"CMD+ENTER": "insertHorizontalRule",
					"CMD+K": "showLinkDialog"
				}
			}
		},
		lang: {
			"zh-CN": {
				font: {
					bold: "",
					italic: "",
					underline: "",
					clear: " ",
					height: "",
					name: "",
					strikethrough: " ",
					size: ""
				},
				image: {
					image: "",
					insert: "",
					resizeFull: " 100%",
					resizeHalf: " 50%",
					resizeQuarter: " 25%",
					floatLeft: "",
					floatRight: "",
					floatNone: "",
					dragImageHere: "",
					selectFromFiles: " ",
					url: ""
				},
				link: {
					link: "",
					insert: "",
					unlink: "",
					edit: "",
					textToDisplay: "",
					url: "",
					openInNewWindow: ""
				},
				unlink: {
					unlink: ""
				},
				table: {
					table: " "
				},
				hr: {
					insert: ""
				},
				style: {
					style: " ",
					normal: "",
					blockquote: "",
					pre: " ",
					h1: "  1",
					h2: "  2",
					h3: "  3",
					h4: "  4",
					h5: "  5",
					h6: "  6"
				},
				lists: {
					unordered: " ",
					ordered: ""
				},
				options: {
					help: "",
					fullscreen: "",
					codeview: " "
				},
				paragraph: {
					paragraph: "",
					outdent: "",
					indent: " ",
					left: "",
					center: "",
					right: "",
					justify: ""
				},
				color: {
					font: "",
					recent: "",
					more: "",
					background: "",
					foreground: "",
					transparent: "",
					setTransparent: "",
					reset: "",
					resetToDefault: ""
				},
				shortcut: {
					shortcuts: "",
					close: "",
					textFormatting: " ",
					action: "",
					paragraphFormatting: " ",
					documentStyle: " "
				},
				history: {
					undo: "",
					redo: ""
				}
			}
		}
	},
	n = function () {
		var b = function (b) {
			return a.Deferred(function (c) {
				a.extend(new FileReader, {
					onload: function (a) {
						var b = a.target.result;
						c.resolve(b)
					},
					onerror: function () {
						c.reject(this)
					}
				}).readAsDataURL(b)
			}).promise()
		},
		c = function (b, c) {
			return a.Deferred(function (d) {
				var e = a("<img>");
				e.one("load", function () {
					e.off("error abort"),
					d.resolve(e)
				}).one("error abort", function () {
					e.off("load").detach(),
					d.reject(e)
				}).css({
					display: "none"
				}).appendTo(document.body).attr({
					src: b,
					"data-filename": c
				})
			}).promise()
		};
		return {
			readFileAsDataURL: b,
			createImage: c
		}
	}
	(),
	o = function () {
		var a = {
			BACKSPACE: 8,
			TAB: 9,
			ENTER: 13,
			SPACE: 32,
			NUM0: 48,
			NUM1: 49,
			NUM2: 50,
			NUM3: 51,
			NUM4: 52,
			NUM5: 53,
			NUM6: 54,
			NUM7: 55,
			NUM8: 56,
			B: 66,
			E: 69,
			I: 73,
			J: 74,
			K: 75,
			L: 76,
			R: 82,
			S: 83,
			U: 85,
			Y: 89,
			Z: 90,
			SLASH: 191,
			LEFTBRACKET: 219,
			BACKSLASH: 220,
			RIGHTBRACKET: 221
		};
		return {
			isEdit: function (a) {
				return h.contains([8, 9, 13, 32], a)
			},
			isMove: function (a) {
				return h.contains([37, 38, 39, 40], a)
			},
			nameFromCode: g.invertObject(a),
			code: a
		}
	}
	(),
	p = function (a) {
		var b = [],
		c = -1,
		d = a[0],
		e = function () {
			var b = l.create(),
			c = {
				s: {
					path: [],
					offset: 0
				},
				e: {
					path: [],
					offset: 0
				}
			};
			return {
				contents: a.html(),
				bookmark: b ? b.bookmark(d) : c
			}
		},
		f = function (b) {
			null !== b.contents && a.html(b.contents),
			null !== b.bookmark && l.createFromBookmark(d, b.bookmark).select()
		};
		this.undo = function () {
			0 < c && (c--, f(b[c]))
		},
		this.redo = function () {
			b.length - 1 > c && (c++, f(b[c]))
		},
		this.recordUndo = function () {
			c++,
			b.length > c && (b = b.slice(0, c)),
			b.push(e())
		},
		this.recordUndo()
	},
	q = function () {
		var b = function (b, c) {
			if (f.jqueryVersion < 1.9) {
				var d = {};
				return a.each(c, function (a, c) {
					d[c] = b.css(c)
				}),
				d
			}
			return b.css.call(b, c)
		};
		this.stylePara = function (b, c) {
			a.each(b.nodes(k.isPara, {
					includeAncestor: !0
				}), function (b, d) {
				a(d).css(c)
			})
		},
		this.styleNodes = function (b, c) {
			b = b.splitText();
			var d = c && c.nodeName || "SPAN",
			e = !(!c || !c.expandClosestSibling),
			f = !(!c || !c.onlyPartialContains);
			if (b.isCollapsed())
				return [b.insertNode(k.create(d))];
			var i = k.makePredByNodeName(d),
			j = a.map(b.nodes(k.isText, {
						fullyContains: !0
					}), function (a) {
					return k.singleChildAncestor(a, i) || k.wrap(a, d)
				});
			if (e) {
				if (f) {
					var l = b.nodes();
					i = g.and(i, function (a) {
							return h.contains(l, a)
						})
				}
				return a.map(j, function (b) {
					var c = k.withClosestSiblings(b, i),
					d = h.head(c),
					e = h.tail(c);
					return a.each(e, function (a, b) {
						k.appendChildNodes(d, b.childNodes),
						k.remove(b)
					}),
					h.head(c)
				})
			}
			return j
		},
		this.current = function (c, d) {
			var e = a(k.isText(c.sc) ? c.sc.parentNode : c.sc),
			f = ["color", "font-family", "font-size", "text-align", "list-style-type", "line-height"],
			g = b(e, f) || {};
			if (g["font-size"] = parseInt(g["font-size"], 10), g["font-bold"] = document.queryCommandState("bold") ? "bold" : "normal", g["font-italic"] = document.queryCommandState("italic") ? "italic" : "normal", g["font-underline"] = document.queryCommandState("underline") ? "underline" : "normal", g["font-strikethrough"] = document.queryCommandState("strikeThrough") ? "strikethrough" : "normal", g["font-superscript"] = document.queryCommandState("superscript") ? "superscript" : "normal", g["font-subscript"] = document.queryCommandState("subscript") ? "subscript" : "normal", c.isOnList()) {
				var h = ["circle", "disc", "disc-leading-zero", "square"],
				i = a.inArray(g["list-style-type"], h) > -1;
				g["list-style"] = i ? "unordered" : "ordered"
			} else
				g["list-style"] = "none";
			var j = k.ancestor(c.sc, k.isPara);
			if (j && j.style["line-height"])
				g["line-height"] = j.style.lineHeight;
			else {
				var l = parseInt(g["line-height"], 10) / parseInt(g["font-size"], 10);
				g["line-height"] = l.toFixed(1)
			}
			return g.image = k.isImg(d) && d,
			g.anchor = c.isOnAnchor() && k.ancestor(c.sc, k.isAnchor),
			g.ancestors = k.listAncestor(c.sc, k.isEditable),
			g.range = c,
			g
		}
	},
	r = function () {
		this.insertOrderedList = function () {
			this.toggleList("OL")
		},
		this.insertUnorderedList = function () {
			this.toggleList("UL")
		},
		this.indent = function () {
			var b = this,
			c = l.create().wrapBodyInlineWithPara(),
			d = c.nodes(k.isPara, {
					includeAncestor: !0
				}),
			e = h.clusterBy(d, g.peq2("parentNode"));
			a.each(e, function (c, d) {
				var e = h.head(d);
				k.isLi(e) ? b.wrapList(d, e.parentNode.nodeName) : a.each(d, function (b, c) {
					a(c).css("marginLeft", function (a, b) {
						return (parseInt(b, 10) || 0) + 25
					})
				})
			}),
			c.select()
		},
		this.outdent = function () {
			var b = this,
			c = l.create().wrapBodyInlineWithPara(),
			d = c.nodes(k.isPara, {
					includeAncestor: !0
				}),
			e = h.clusterBy(d, g.peq2("parentNode"));
			a.each(e, function (c, d) {
				var e = h.head(d);
				k.isLi(e) ? b.releaseList([d]) : a.each(d, function (b, c) {
					a(c).css("marginLeft", function (a, b) {
						return b = parseInt(b, 10) || 0,
						b > 25 ? b - 25 : ""
					})
				})
			}),
			c.select()
		},
		this.toggleList = function (b) {
			var c = this,
			d = l.create().wrapBodyInlineWithPara(),
			e = d.nodes(k.isPara, {
					includeAncestor: !0
				}),
			f = d.paraBookmark(e),
			i = h.clusterBy(e, g.peq2("parentNode"));
			if (h.find(e, k.isPurePara)) {
				var j = [];
				a.each(i, function (a, d) {
					j = j.concat(c.wrapList(d, b))
				}),
				e = j
			} else {
				var m = d.nodes(k.isList, {
						includeAncestor: !0
					}).filter(function (c) {
						return !a.nodeName(c, b)
					});
				m.length ? a.each(m, function (a, c) {
					k.replace(c, b)
				}) : e = this.releaseList(i, !0)
			}
			l.createFromParaBookmark(f, e).select()
		},
		this.wrapList = function (b, c) {
			var d,
			e = h.head(b),
			f = h.last(b),
			g = k.isList(e.previousSibling) && e.previousSibling,
			i = k.isList(f.nextSibling) && f.nextSibling;
			if (g)
				d = g;
			else {
				var j = k.create(c || "UL");
				j.className = "note-list",
				d = k.insertAfter(j, f)
			}
			return b = a.map(b, function (a) {
					return k.isPurePara(a) ? k.replace(a, "LI") : a
				}),
			k.appendChildNodes(d, b),
			i && (k.appendChildNodes(d, h.from(i.childNodes)), k.remove(i)),
			b
		},
		this.releaseList = function (b, c) {
			var d = [];
			return a.each(b, function (b, e) {
				var f = h.head(e),
				g = h.last(e),
				i = c ? k.lastAncestor(f, k.isList) : f.parentNode,
				j = i.childNodes.length > 1 ? k.splitTree(i, {
						node: g.parentNode,
						offset: k.position(g) + 1
					}, {
						isSkipPaddingBlankHTML: !0
					}) : null,
				l = k.splitTree(i, {
						node: f.parentNode,
						offset: k.position(f)
					}, {
						isSkipPaddingBlankHTML: !0
					});
				e = c ? k.listDescendant(l, k.isLi) : h.from(l.childNodes).filter(k.isLi),
				!c && k.isList(i.parentNode) || (e = a.map(e, function (a) {
							return k.replace(a, "P")
						})),
				a.each(h.from(e).reverse(), function (a, b) {
					k.insertAfter(b, i)
				});
				var m = h.compact([i, l, j]);
				a.each(m, function (b, c) {
					var d = [c].concat(k.listDescendant(c, k.isList));
					a.each(d.reverse(), function (a, b) {
						k.nodeLength(b) || k.remove(b, !0)
					})
				}),
				d = d.concat(e)
			}),
			d
		}
	},
	s = function () {
		var b = new r;
		this.insertTab = function (a, b, c) {
			var d = k.createText(new Array(c + 1).join(k.NBSP_CHAR));
			b = b.deleteContents(),
			b.insertNode(d, !0),
			b = l.create(d, c),
			b.select()
		},
		this.insertParagraph = function () {
			var c = l.create();
			c = c.deleteContents(),
			c = c.wrapBodyInlineWithPara();
			var d,
			e = k.ancestor(c.sc, k.isPara);
			if (e) {
				if (k.isEmpty(e) && k.isLi(e))
					return void b.toggleList(e.parentNode.nodeName);
				d = k.splitTree(e, c.getStartPoint());
				var f = k.listDescendant(e, k.isEmptyAnchor);
				f = f.concat(k.listDescendant(d, k.isEmptyAnchor)),
				a.each(f, function (a, b) {
					k.remove(b)
				})
			} else {
				var g = c.sc.childNodes[c.so];
				d = a(k.emptyPara)[0],
				g ? c.sc.insertBefore(d, g) : c.sc.appendChild(d)
			}
			l.create(d, 0).normalize().select()
		}
	},
	t = function () {
		this.tab = function (a, b) {
			var c = k.ancestor(a.commonAncestor(), k.isCell),
			d = k.ancestor(c, k.isTable),
			e = k.listDescendant(d, k.isCell),
			f = h[b ? "prev" : "next"](e, c);
			f && l.create(f, 0).select()
		},
		this.createTable = function (b, c) {
			for (var d, e = [], f = 0; f < b; f++)
				e.push("<td>" + k.blank + "</td>");
			d = e.join("");
			for (var g, h = [], i = 0; i < c; i++)
				h.push("<tr>" + d + "</tr>");
			return g = h.join(""),
			a('<table class="table table-bordered">' + g + "</table>")[0]
		}
	},
	u = "bogus",
	v = function (b) {
		var c = new q,
		d = new t,
		e = new s,
		g = new r;
		this.createRange = function (a) {
			return this.focus(a),
			l.create()
		},
		this.saveRange = function (a, b) {
			this.focus(a),
			a.data("range", l.create()),
			b && l.create().collapse().select()
		},
		this.saveNode = function (a) {
			for (var b = [], c = 0, d = a[0].childNodes.length; c < d; c++)
				b.push(a[0].childNodes[c]);
			a.data("childNodes", b)
		},
		this.restoreRange = function (a) {
			var b = a.data("range");
			b && (b.select(), this.focus(a))
		},
		this.restoreNode = function (a) {
			a.html("");
			for (var b = a.data("childNodes"), c = 0, d = b.length; c < d; c++)
				a[0].appendChild(b[c])
		},
		this.currentStyle = function (a) {
			var b = l.create();
			return !!b && (b.isOnEditable() && c.current(b, a))
		};
		var i = function (a) {
			var c = k.makeLayoutInfo(a).holder();
			b.bindCustomEvent(c, a.data("callbacks"), "before.command")(a.html(), a)
		},
		j = function (a) {
			var c = k.makeLayoutInfo(a).holder();
			b.bindCustomEvent(c, a.data("callbacks"), "change")(a.html(), a)
		};
		this.undo = function (a) {
			i(a),
			a.data("NoteHistory").undo(),
			j(a)
		},
		this.redo = function (a) {
			i(a),
			a.data("NoteHistory").redo(),
			j(a)
		};
		for (var m = this, o = this.beforeCommand = function (a) {
			i(a),
			m.focus(a)
		}, p = this.afterCommand = function (a, b) {
			a.data("NoteHistory").recordUndo(),
			b || j(a)
		}, v = ["bold", "italic", "underline", "strikethrough", "unlink", "superscript", "subscript", "justifyLeft", "justifyCenter", "justifyRight", "justifyFull", "formatBlock", "removeFormat", "backColor", "foreColor", "insertHorizontalRule", "fontName"], w = 0, x = v.length; w < x; w++)
			this[v[w]] = function (a) {
				return function (b, c) {
					o(b),
					document.execCommand(a, !1, c),
					p(b, !0)
				}
			}
		(v[w]);
		this.tab = function (a, b) {
			var c = this.createRange(a);
			c.isCollapsed() && c.isOnCell() ? d.tab(c) : (o(a), e.insertTab(a, c, b.tabsize), p(a))
		},
		this.untab = function (a) {
			var b = this.createRange(a);
			b.isCollapsed() && b.isOnCell() && d.tab(b, !0)
		},
		this.insertParagraph = function (a) {
			o(a),
			e.insertParagraph(a),
			p(a)
		},
		this.insertOrderedList = function (a) {
			o(a),
			g.insertOrderedList(a),
			p(a)
		},
		this.insertUnorderedList = function (a) {
			o(a),
			g.insertUnorderedList(a),
			p(a)
		},
		this.indent = function (a) {
			o(a),
			g.indent(a),
			p(a)
		},
		this.outdent = function (a) {
			o(a),
			g.outdent(a),
			p(a)
		},
		this.insertImage = function (a, c, d) {
			n.createImage(c, d).then(function (b) {
				o(a),
				b.css({
					display: "",
					"max-width": "100%"
				}),
				l.create().insertNode(b[0]),
				l.createFromNodeAfter(b[0]).select(),
				p(a)
			}).fail(function () {
				var c = k.makeLayoutInfo(a).holder();
				b.bindCustomEvent(c, a.data("callbacks"), "image.upload.error")()
			})
		},
		this.insertNode = function (a, b) {
			o(a),
			l.create().insertNode(b),
			l.createFromNodeAfter(b).select(),
			p(a)
		},
		this.insertText = function (a, b) {
			o(a);
			var c = l.create().insertNode(k.createText(b));
			l.create(c, k.nodeLength(c)).select(),
			p(a)
		},
		this.pasteHTML = function (a, b) {
			o(a);
			var c = l.create().pasteHTML(b);
			l.createFromNodeAfter(h.last(c)).select(),
			p(a)
		},
		this.formatBlock = function (a, b) {
			o(a),
			b = f.isMSIE ? "<" + b + ">" : b,
			document.execCommand("FormatBlock", !1, b),
			p(a)
		},
		this.formatPara = function (a) {
			o(a),
			this.formatBlock(a, "P"),
			p(a)
		};
		for (var w = 1; w <= 6; w++)
			this["formatH" + w] = function (a) {
				return function (b) {
					this.formatBlock(b, "H" + a)
				}
			}
		(w);
		this.fontSize = function (b, d) {
			var e = l.create(),
			f = e.isCollapsed();
			if (f) {
				var g = c.styleNodes(e),
				i = h.head(g);
				a(g).css({
					"font-size": d + "px"
				}),
				i && !k.nodeLength(i) && (i.innerHTML = k.ZERO_WIDTH_NBSP_CHAR, l.createFromNodeAfter(i.firstChild).select(), b.data(u, i))
			} else
				o(b), a(c.styleNodes(e)).css({
					"font-size": d + "px"
				}), p(b)
		},
		this.removeBogus = function (a) {
			var b = a.data(u);
			if (b) {
				var c = h.find(h.from(b.childNodes), k.isText),
				d = c.nodeValue.indexOf(k.ZERO_WIDTH_NBSP_CHAR);
				d !== -1 && c.deleteData(d, 1),
				k.isEmpty(b) && k.remove(b),
				a.removeData(u)
			}
		},
		this.lineHeight = function (a, b) {
			o(a),
			c.stylePara(l.create(), {
				lineHeight: b
			}),
			p(a)
		},
		this.unlink = function (a) {
			var b = this.createRange(a);
			if (b.isOnAnchor()) {
				var c = k.ancestor(b.sc, k.isAnchor);
				b = l.createFromNode(c),
				b.select(),
				o(a),
				document.execCommand("unlink"),
				p(a)
			}
		},
		this.createLink = function (b, d, e) {
			var f = d.url,
			g = d.text,
			i = d.newWindow,
			j = d.range,
			k = j.toString() !== g;
			o(b),
			e.onCreateLink && (f = e.onCreateLink(f));
			var m = [];
			if (k) {
				var n = j.insertNode(a("<A>" + g + "</A>")[0]);
				m.push(n)
			} else
				m = c.styleNodes(j, {
						nodeName: "A",
						expandClosestSibling: !0,
						onlyPartialContains: !0
					});
			a.each(m, function (b, c) {
				a(c).attr("href", f).attr("title", f),
				i ? a(c).attr("target", "_blank") : a(c).removeAttr("target")
			});
			var q = l.createFromNodeBefore(h.head(m)),
			r = q.getStartPoint(),
			s = l.createFromNodeAfter(h.last(m)),
			t = s.getEndPoint();
			l.create(r.node, r.offset, t.node, t.offset).select(),
			p(b)
		},
		this.getLinkInfo = function (b) {
			this.focus(b);
			var c = l.create().expand(k.isAnchor),
			d = a(h.head(c.nodes(k.isAnchor)));
			return {
				range: c,
				text: c.toString(),
				isNewWindow: !!d.length && "_blank" === d.attr("target"),
				url: d.length ? d.attr("href") : ""
			}
		},
		this.color = function (a, b) {
			var c = JSON.parse(b),
			d = c.foreColor,
			e = c.backColor;
			o(a),
			d && document.execCommand("foreColor", !1, d),
			e && document.execCommand("backColor", !1, e),
			p(a)
		},
		this.insertTable = function (a, b) {
			var c = b.split("x");
			o(a);
			var e = l.create().deleteContents();
			e.insertNode(d.createTable(c[0], c[1])),
			p(a)
		},
		this.floatMe = function (a, b, c) {
			o(a),
			c.css("float", b),
			p(a)
		},
		this.imageShape = function (a, b, c) {
			o(a),
			c.removeClass("img-rounded img-circle img-thumbnail"),
			b && c.addClass(b),
			p(a)
		},
		this.resize = function (a, b, c) {
			o(a),
			c.css({
				width: 100 * b + "%",
				height: ""
			}),
			p(a)
		},
		this.resizeTo = function (a, b, c) {
			var d;
			if (c) {
				var e = a.y / a.x,
				f = b.data("ratio");
				d = {
					width: f > e ? a.x : a.y / f,
					height: f > e ? a.x * f : a.y
				}
			} else
				d = {
					width: a.x,
					height: a.y
				};
			b.css(d)
		},
		this.removeMedia = function (c, d, e) {
			o(c),
			e.detach(),
			b.bindCustomEvent(a(), c.data("callbacks"), "media.delete")(e, c),
			p(c)
		},
		this.focus = function (a) {
			a.focus(),
			f.isFF && !l.create().isOnEditable() && l.createFromNode(a[0]).normalize().collapse().select()
		}
	},
	w = function () {
		this.update = function (b, c) {
			var d = function (b, c) {
				b.find(".dropdown-menu .btn-item").each(function () {
					var b = a(this).data("value") + "" == c + "";
					b ? a(this).addClass("active") : a(this).removeClass("active")
				})
			},
			e = function (a, c) {
				var d = b.find(a);
				d.toggleClass("active", c())
			};
			if (c.image) {
				var g = a(c.image);
				e('button[data-event="imageShape"][data-value="img-rounded"]', function () {
					return g.hasClass("img-rounded")
				}),
				e('button[data-event="imageShape"][data-value="img-circle"]', function () {
					return g.hasClass("img-circle")
				}),
				e('button[data-event="imageShape"][data-value="img-thumbnail"]', function () {
					return g.hasClass("img-thumbnail")
				}),
				e('button[data-event="imageShape"]:not([data-value])', function () {
					return !g.is(".img-rounded, .img-circle, .img-thumbnail")
				});
				var h = g.css("float");
				e('button[data-event="floatMe"][data-value="left"]', function () {
					return "left" === h
				}),
				e('button[data-event="floatMe"][data-value="right"]', function () {
					return "right" === h
				}),
				e('button[data-event="floatMe"][data-value="none"]', function () {
					return "left" !== h && "right" !== h
				});
				var i = g.attr("style");
				return e('button[data-event="resize"][data-value="1"]', function () {
					return !!/(^|\s)(max-)?width\s*:\s*100%/.test(i)
				}),
				e('button[data-event="resize"][data-value="0.5"]', function () {
					return !!/(^|\s)(max-)?width\s*:\s*50%/.test(i)
				}),
				void e('button[data-event="resize"][data-value="0.25"]', function () {
					return !!/(^|\s)(max-)?width\s*:\s*25%/.test(i)
				})
			}
			var j = b.find(".note-fontname");
			if (j.length) {
				var k = c["font-family"];
				if (k) {
					for (var l = k.split(","), m = 0, n = l.length; m < n && (k = l[m].replace(/[\'\"]/g, "").replace(/\s+$/, "").replace(/^\s+/, ""), !f.isFontInstalled(k)); m++);
					j.find(".note-current-fontname").text(k),
					d(j, k)
				}
			}
			var o = b.find(".note-fontsize");
			d(o, parseFloat(c["font-size"]));
			var p = b.find(".note-height");
			d(p, parseFloat(c["line-height"])),
			e('button[data-event="bold"]', function () {
				return "bold" === c["font-bold"]
			}),
			e('button[data-event="italic"]', function () {
				return "italic" === c["font-italic"]
			}),
			e('button[data-event="underline"]', function () {
				return "underline" === c["font-underline"]
			}),
			e('button[data-event="strikethrough"]', function () {
				return "strikethrough" === c["font-strikethrough"]
			}),
			e('button[data-event="superscript"]', function () {
				return "superscript" === c["font-superscript"]
			}),
			e('button[data-event="subscript"]', function () {
				return "subscript" === c["font-subscript"]
			}),
			e('button[data-event="justifyLeft"]', function () {
				return "left" === c["text-align"] || "start" === c["text-align"]
			}),
			e('button[data-event="justifyCenter"]', function () {
				return "center" === c["text-align"]
			}),
			e('button[data-event="justifyRight"]', function () {
				return "right" === c["text-align"]
			}),
			e('button[data-event="justifyFull"]', function () {
				return "justify" === c["text-align"]
			}),
			e('button[data-event="insertUnorderedList"]', function () {
				return "unordered" === c["list-style"]
			}),
			e('button[data-event="insertOrderedList"]', function () {
				return "ordered" === c["list-style"]
			})
		},
		this.updateRecentColor = function (b, c, d) {
			var e = a(b).closest(".note-color"),
			f = e.find(".note-recent-color"),
			g = JSON.parse(f.attr("data-value"));
			g[c] = d,
			f.attr("data-value", JSON.stringify(g));
			var h = "backColor" === c ? "background-color" : "color";
			f.find("i").css(h, d)
		}
	},
	x = function () {
		var a = new w;
		this.update = function (b, c) {
			a.update(b, c)
		},
		this.updateRecentColor = function (b, c, d) {
			a.updateRecentColor(b, c, d)
		},
		this.activate = function (a) {
			a.find("button").not('button[data-event="codeview"]').removeClass("disabled")
		},
		this.deactivate = function (a) {
			a.find("button").not('button[data-event="codeview"]').addClass("disabled")
		},
		this.updateFullscreen = function (a, b) {
			var c = a.find('button[data-event="fullscreen"]');
			c.toggleClass("active", b)
		},
		this.updateCodeview = function (a, b) {
			var c = a.find('button[data-event="codeview"]');
			c.toggleClass("active", b),
			b ? this.deactivate(a) : this.activate(a)
		},
		this.get = function (a, b) {
			var c = k.makeLayoutInfo(a).toolbar();
			return c.find("[data-name=" + b + "]")
		},
		this.setButtonState = function (a, b, c) {
			c = c !== !1;
			var d = this.get(a, b);
			d.toggleClass("active", c)
		}
	},
	y = 24,
	z = function () {
		var b = a(document);
		this.attach = function (a, b) {
			b.disableResizeEditor || a.statusbar().on("mousedown", c)
		};
		var c = function (a) {
			a.preventDefault(),
			a.stopPropagation();
			var c = k.makeLayoutInfo(a.target).editable(),
			d = c.offset().top - b.scrollTop(),
			e = k.makeLayoutInfo(a.currentTarget || a.target),
			f = e.editor().data("options");
			b.on("mousemove", function (a) {
				var b = a.clientY - (d + y);
				b = f.minHeight > 0 ? Math.max(b, f.minHeight) : b,
				b = f.maxHeight > 0 ? Math.min(b, f.maxHeight) : b,
				c.height(b)
			}).one("mouseup", function () {
				b.off("mousemove")
			})
		}
	},
	A = function () {
		var b = new w,
		c = function (b, c) {
			var d = a(b),
			e = c ? d.offset() : d.position(),
			f = d.outerHeight(!0);
			return {
				left: e.left,
				top: e.top + f
			}
		},
		d = function (a, b) {
			a.css({
				display: "block",
				left: b.left,
				top: b.top
			})
		},
		e = 20;
		this.update = function (f, i, j) {
			b.update(f, i);
			var k = f.find(".note-link-popover");
			if (i.anchor) {
				var l = k.find("a"),
				m = a(i.anchor).attr("href"),
				n = a(i.anchor).attr("target");
				l.attr("href", m).html(m),
				n ? l.attr("target", "_blank") : l.removeAttr("target"),
				d(k, c(i.anchor, j))
			} else
				k.hide();
			var o = f.find(".note-image-popover");
			i.image ? d(o, c(i.image, j)) : o.hide();
			var p = f.find(".note-air-popover");
			if (j && !i.range.isCollapsed()) {
				var q = h.last(i.range.getClientRects());
				if (q) {
					var r = g.rect2bnd(q);
					d(p, {
						left: Math.max(r.left + r.width / 2 - e, 0),
						top: r.top + r.height
					})
				}
			} else
				p.hide()
		},
		this.updateRecentColor = function (a, b, c) {
			a.updateRecentColor(a, b, c)
		},
		this.hide = function (a) {
			a.children().hide()
		}
	},
	B = function (b) {
		var c = a(document),
		d = function (d) {
			if (k.isControlSizing(d.target)) {
				d.preventDefault(),
				d.stopPropagation();
				var e = k.makeLayoutInfo(d.target),
				f = e.handle(),
				g = e.popover(),
				h = e.editable(),
				i = e.editor(),
				j = f.find(".note-control-selection").data("target"),
				l = a(j),
				m = l.offset(),
				n = c.scrollTop(),
				o = i.data("options").airMode;
				c.on("mousemove", function (a) {
					b.invoke("editor.resizeTo", {
						x: a.clientX - m.left,
						y: a.clientY - (m.top - n)
					}, l, !a.shiftKey),
					b.invoke("handle.update", f, {
						image: j
					}, o),
					b.invoke("popover.update", g, {
						image: j
					}, o)
				}).one("mouseup", function () {
					c.off("mousemove"),
					b.invoke("editor.afterCommand", h)
				}),
				l.data("ratio") || l.data("ratio", l.height() / l.width())
			}
		};
		this.attach = function (a) {
			a.handle().on("mousedown", d)
		},
		this.update = function (b, c, d) {
			var e = b.find(".note-control-selection");
			if (c.image) {
				var f = a(c.image),
				g = d ? f.offset() : f.position(),
				h = {
					w: f.outerWidth(!0),
					h: f.outerHeight(!0)
				};
				e.css({
					display: "block",
					left: g.left,
					top: g.top,
					width: h.w,
					height: h.h
				}).data("target", c.image);
				var i = h.w + "x" + h.h;
				e.find(".note-control-selection-info").text(i)
			} else
				e.hide()
		},
		this.hide = function (a) {
			a.children().hide()
		}
	},
	C = function (b) {
		var c = a(window),
		d = a("html, body");
		this.toggle = function (a) {
			var e = a.editor(),
			f = a.toolbar(),
			g = a.editable(),
			h = a.codable(),
			i = function (a) {
				g.css("height", a.h),
				h.css("height", a.h),
				h.data("cmeditor") && h.data("cmeditor").setsize(null, a.h)
			};
			e.toggleClass("fullscreen");
			var j = e.hasClass("fullscreen");
			j ? (g.data("orgheight", g.css("height")), c.on("resize", function () {
					i({
						h: c.height() - f.outerHeight()
					})
				}).trigger("resize"), d.css("overflow", "hidden")) : (c.off("resize"), i({
					h: g.data("orgheight")
				}), d.css("overflow", "visible")),
			b.invoke("toolbar.updateFullscreen", f, j)
		}
	};
	f.hasCodeMirror && (f.isSupportAmd ? require(["CodeMirror"], function (a) {
			b = a
		}) : b = window.CodeMirror);
	var D = function (a) {
		this.sync = function (b) {
			var c = a.invoke("codeview.isActivated", b);
			c && f.hasCodeMirror && b.codable().data("cmEditor").save()
		},
		this.isActivated = function (a) {
			var b = a.editor();
			return b.hasClass("codeview")
		},
		this.toggle = function (a) {
			this.isActivated(a) ? this.deactivate(a) : this.activate(a)
		},
		this.activate = function (c) {
			var d = c.editor(),
			e = c.toolbar(),
			g = c.editable(),
			h = c.codable(),
			i = c.popover(),
			j = c.handle(),
			l = d.data("options");
			if (h.val(k.html(g, l.prettifyHtml)), h.height(g.height()), a.invoke("toolbar.updateCodeview", e, !0), a.invoke("popover.hide", i), a.invoke("handle.hide", j), d.addClass("codeview"), h.focus(), f.hasCodeMirror) {
				var m = b.fromTextArea(h[0], l.codemirror);
				if (l.codemirror.tern) {
					var n = new b.TernServer(l.codemirror.tern);
					m.ternServer = n,
					m.on("cursorActivity", function (a) {
						n.updateArgHints(a)
					})
				}
				m.setSize(null, g.outerHeight()),
				h.data("cmEditor", m)
			}
		},
		this.deactivate = function (b) {
			var c = b.holder(),
			d = b.editor(),
			e = b.toolbar(),
			g = b.editable(),
			h = b.codable(),
			i = d.data("options");
			if (f.hasCodeMirror) {
				var j = h.data("cmEditor");
				h.val(j.getValue()),
				j.toTextArea()
			}
			var l = k.value(h, i.prettifyHtml) || k.emptyPara,
			m = g.html() !== l;
			g.html(l),
			g.height(i.height ? h.height() : "auto"),
			d.removeClass("codeview"),
			m && a.bindCustomEvent(c, g.data("callbacks"), "change")(g.html(), g),
			g.focus(),
			a.invoke("toolbar.updateCodeview", e, !1)
		}
	},
	E = function (b) {
		var c = a(document);
		this.attach = function (a, b) {
			b.airMode || b.disableDragAndDrop ? c.on("drop", function (a) {
				a.preventDefault()
			}) : this.attachDragAndDropEvent(a, b)
		},
		this.attachDragAndDropEvent = function (d, e) {
			var f = a(),
			g = d.editor(),
			h = d.dropzone(),
			i = h.find(".note-dropzone-message");
			c.on("dragenter", function (a) {
				var c = b.invoke("codeview.isActivated", d),
				j = g.width() > 0 && g.height() > 0;
				c || f.length || !j || (g.addClass("dragover"), h.width(g.width()), h.height(g.height()), i.text(e.langInfo.image.dragImageHere)),
				f = f.add(a.target)
			}).on("dragleave", function (a) {
				f = f.not(a.target),
				f.length || g.removeClass("dragover")
			}).on("drop", function () {
				f = a(),
				g.removeClass("dragover")
			}),
			h.on("dragenter", function () {
				h.addClass("hover"),
				i.text(e.langInfo.image.dropImage)
			}).on("dragleave", function () {
				h.removeClass("hover"),
				i.text(e.langInfo.image.dragImageHere)
			}),
			h.on("drop", function (c) {
				c.preventDefault();
				var d = c.originalEvent.dataTransfer,
				e = d.getData("text/html"),
				f = d.getData("text/plain"),
				g = k.makeLayoutInfo(c.currentTarget || c.target);
				d && d.files && d.files.length ? (g.editable().focus(), b.insertImages(g, d.files)) : e ? a(e).each(function () {
					g.editable().focus(),
					b.invoke("editor.insertNode", g.editable(), this)
				}) : f && (g.editable().focus(), b.invoke("editor.insertText", g.editable(), f))
			}).on("dragover", !1)
		}
	},
	F = function (a) {
		this.attach = function (a) {
			a.editable().on("paste", b)
		};
		var b = function (b) {
			var c = b.originalEvent.clipboardData,
			d = k.makeLayoutInfo(b.currentTarget || b.target),
			e = d.editable();
			if (!c || !c.items || !c.items.length) {
				var f = e.data("callbacks");
				if (!f.onImageUpload)
					return;
				return a.invoke("editor.saveNode", e),
				a.invoke("editor.saveRange", e),
				e.html(""),
				void setTimeout(function () {
					var b = e.find("img");
					if (!b.length || b[0].src.indexOf("data:") === -1) {
						var c = e.html();
						a.invoke("editor.restoreNode", e),
						a.invoke("editor.restoreRange", e),
						a.invoke("editor.focus", e);
						try {
							a.invoke("editor.pasteHTML", e, c)
						} catch (b) {
							a.invoke("editor.insertText", e, c)
						}
					}
				}, 0)
			}
			a.invoke("editor.afterCommand", e)
		}
	},
	G = function (b) {
		this.showLinkDialog = function (b, c, d) {
			return a.Deferred(function (a) {
				var b = new FX.ConfirmDialog({
						title: "",
						width: 430,
						height: 230,
						autoClose: !0,
						contentWidget: {
							rowSize: [30, 30],
							colSize: [80, 290],
							padding: 15,
							hgap: 20,
							vgap: 30,
							items: [[{
										type: "label",
										text: ""
									}, {
										type: "text",
										widgetName: "urlAddress",
										value: d.url ? d.url : "http://"
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "text",
										widgetName: "displayName",
										value: d.text
									}
								]]
						},
						onClose: function () {
							"pending" === a.state() && a.reject()
						},
						onOk: function () {
							var b = this.getWidgetByName("displayName").getValue(),
							c = this.getWidgetByName("urlAddress").getValue();
							return d.url = c,
							d.text = b,
							a.resolve({
								range: d.range,
								url: c,
								text: b,
								newWindow: !0
							}),
							!1
						}
					});
				b.show()
			}).promise()
		},
		this.show = function (a) {
			var c = a.editor(),
			d = a.dialog(),
			e = a.editable(),
			f = a.popover(),
			g = b.invoke("editor.getLinkInfo", e),
			h = c.data("options");
			b.invoke("editor.saveRange", e),
			this.showLinkDialog(e, d, g).then(function (a) {
				b.invoke("editor.restoreRange", e),
				b.invoke("editor.createLink", e, a, h),
				b.invoke("popover.hide", f)
			}).fail(function () {
				b.invoke("editor.restoreRange", e)
			})
		}
	},
	H = function (b) {
		this.show = function (a) {
			var c = a.dialog(),
			d = a.editable();
			b.invoke("editor.saveRange", d),
			this.showImageDialog(d, c).then(function (c) {
				b.invoke("editor.restoreRange", d),
				"string" == typeof c ? b.invoke("editor.insertImage", d, c) : b.insertImages(a, c)
			}).fail(function () {
				b.invoke("editor.restoreRange", d)
			})
		},
		this.showImageDialog = function (c, d) {
			return a.Deferred(function (a) {
				b.invoke("editor.saveRange", c);
				var d = new FX.ImageDialog({
						onOk: function () {
							return b.invoke("editor.restoreRange", c),
							this.url && b.invoke("editor.insertImage", c, this.url),
							!1
						}
					});
				d.show()
			}).promise()
		}
	},
	I = function (b) {
		this.showHelpDialog = function (b, c) {
			return a.Deferred(function (a) {
				var b = c.find(".note-help-dialog");
				b.one("hidden.bs.modal", function () {
					a.resolve()
				}).modal("show")
			}).promise()
		},
		this.show = function (a) {
			var c = a.dialog(),
			d = a.editable();
			b.invoke("editor.saveRange", d, !0),
			this.showHelpDialog(d, c).then(function () {
				b.invoke("editor.restoreRange", d)
			})
		}
	},
	J = function () {
		var b = this.modules = {
			editor: new v(this),
			toolbar: new x(this),
			statusbar: new z(this),
			popover: new A(this),
			handle: new B(this),
			fullscreen: new C(this),
			codeview: new D(this),
			dragAndDrop: new E(this),
			clipboard: new F(this),
			linkDialog: new G(this),
			imageDialog: new H(this),
			helpDialog: new I(this)
		};
		this.invoke = function () {
			var a = h.head(h.from(arguments)),
			b = h.tail(h.from(arguments)),
			c = a.split("."),
			d = c.length > 1,
			e = d && h.head(c),
			f = d ? h.last(c) : h.head(c),
			g = this.getModule(e),
			i = g[f];
			return i && i.apply(g, b)
		},
		this.getModule = function (a) {
			return this.modules[a] || this.modules.editor
		};
		var c = this.bindCustomEvent = function (a, b, c) {
			return function () {
				var d = b[g.namespaceToCamel(c, "on")];
				return d && d.apply(a[0], arguments),
				a.trigger("summernote." + c, arguments)
			}
		};
		this.insertImages = function (d, e) {
			var f = d.editor(),
			g = d.editable(),
			h = d.holder(),
			i = g.data("callbacks"),
			j = f.data("options");
			i.onImageUpload ? c(h, i, "image.upload")(e) : a.each(e, function (a, d) {
				var e = d.name;
				j.maximumImageFileSize && j.maximumImageFileSize < d.size ? c(h, i, "image.upload.error")(j.langInfo.image.maximumFileSizeError) : n.readFileAsDataURL(d).then(function (a) {
					b.editor.insertImage(g, a, e)
				}).fail(function () {
					c(h, i, "image.upload.error")(j.langInfo.image.maximumFileSizeError)
				})
			})
		};
		var d = {
			showLinkDialog: function (a) {
				b.linkDialog.show(a)
			},
			showImageDialog: function (a) {
				b.imageDialog.show(a)
			},
			showHelpDialog: function (a) {
				b.helpDialog.show(a)
			},
			fullscreen: function (a) {
				b.fullscreen.toggle(a)
			},
			codeview: function (a) {
				b.codeview.toggle(a)
			}
		},
		e = function (a) {
			k.isImg(a.target) && a.preventDefault()
		},
		i = function (a) {
			var c = k.makeLayoutInfo(a.currentTarget || a.target);
			b.editor.removeBogus(c.editable()),
			j(a)
		},
		j = function (a) {
			setTimeout(function () {
				var c = k.makeLayoutInfo(a.currentTarget || a.target),
				d = b.editor.currentStyle(a.target);
				if (d) {
					var e = c.editor().data("options").airMode;
					e || b.toolbar.update(c.toolbar(), d),
					b.popover.update(c.popover(), d, e),
					b.handle.update(c.handle(), d, e)
				}
			}, 0)
		},
		l = function (a) {
			var c = k.makeLayoutInfo(a.currentTarget || a.target);
			b.popover.hide(c.popover()),
			b.handle.hide(c.handle())
		},
		m = function (b) {
			var c = a(b.target).closest("[data-event]");
			c.length && b.preventDefault()
		},
		q = function (c) {
			var e = a(c.target).closest("[data-event]");
			if (e.length) {
				var f,
				g = e.attr("data-event"),
				h = e.attr("data-value"),
				i = e.attr("data-hide"),
				l = k.makeLayoutInfo(c.target);
				if (a.inArray(g, ["resize", "floatMe", "removeMedia", "imageShape"]) !== -1) {
					var m = l.handle().find(".note-control-selection");
					f = a(m.data("target"))
				}
				if (i && e.parents(".popover").hide(), a.isFunction(a.summernote.pluginEvents[g]))
					a.summernote.pluginEvents[g](c, b.editor, l, h);
				else if (b.editor[g]) {
					var n = l.editable();
					n.focus(),
					b.editor[g](n, h, f),
					c.preventDefault()
				} else
					d[g] && (d[g].call(this, l), c.preventDefault());
				a.inArray(g, ["backColor", "foreColor"]) !== -1 && (e.parent().addClass("active"), e.parent().siblings(".active").removeClass("active")),
				a.inArray(g, ["font-size", "font-color", "paragraph"]) !== -1 && e.siblings("ul.dropdown-menu").show(),
				j(c)
			}
		},
		r = 18,
		s = function (b, c) {
			var d,
			e = a(b.target.parentNode),
			f = e.next(),
			g = e.find(".note-dimension-picker-mousecatcher"),
			h = e.find(".note-dimension-picker-highlighted"),
			i = e.find(".note-dimension-picker-unhighlighted");
			if (void 0 === b.offsetX) {
				var j = a(b.target).offset();
				d = {
					x: b.pageX - j.left,
					y: b.pageY - j.top
				}
			} else
				d = {
					x: b.offsetX,
					y: b.offsetY
				};
			var k = {
				c: Math.ceil(d.x / r) || 1,
				r: Math.ceil(d.y / r) || 1
			};
			h.css({
				width: k.c + "em",
				height: k.r + "em"
			}),
			g.attr("data-value", k.c + "x" + k.r),
			3 < k.c && k.c < c.insertTableMaxSize.col && i.css({
				width: k.c + 1 + "em"
			}),
			3 < k.r && k.r < c.insertTableMaxSize.row && i.css({
				height: k.r + 1 + "em"
			}),
			f.html(k.c + " x " + k.r)
		};
		this.bindKeyMap = function (c, e) {
			var f = c.editor(),
			g = c.editable();
			g.on("keydown", function (h) {
				var i = [];
				h.metaKey && i.push("CMD"),
				h.ctrlKey && !h.altKey && i.push("CTRL"),
				h.shiftKey && i.push("SHIFT");
				var j = o.nameFromCode[h.keyCode];
				j && i.push(j);
				var k,
				l = i.join("+"),
				m = e[l];
				if (m) {
					if (k = a.summernote.pluginEvents[l], a.isFunction(k) && k(h, b.editor, c))
						return !1;
					k = a.summernote.pluginEvents[m],
					a.isFunction(k) ? k(h, b.editor, c) : b.editor[m] ? (b.editor[m](g, f.data("options")), h.preventDefault()) : d[m] && (d[m].call(this, c), h.preventDefault())
				} else
					o.isEdit(h.keyCode) && b.editor.afterCommand(g)
			})
		},
		this.attach = function (c, d) {
			d.shortcuts && this.bindKeyMap(c, d.keyMap[f.isMac ? "mac" : "pc"]),
			c.editable().on("mousedown", e),
			c.editable().on("keyup mouseup", i),
			c.editable().click(function (a) {
				if (a.target && "A" === a.target.tagName.toUpperCase())
					return !1
			}),
			c.editable().on("scroll blur", l),
			b.clipboard.attach(c, d),
			b.handle.attach(c, d),
			c.popover().on("click", q),
			c.popover().on("mousedown", m),
			a(document).bind("click.dropdown", function (b) {
				var d = b.target,
				e = a(d).closest("button"),
				f = e.attr("data-event"),
				g = a(d).closest("ul.dropdown-menu");
				0 === g.length && a.inArray(f, ["font-size", "font-color", "paragraph"]) === -1 && c.toolbar().find("ul.dropdown-menu").hide()
			}),
			b.dragAndDrop.attach(c, d),
			d.airMode || (c.toolbar().on("click", q), c.toolbar().on("mousedown", m), b.statusbar.attach(c, d));
			var g = d.airMode ? c.popover() : c.toolbar(),
			j = g.find(".note-dimension-picker-mousecatcher");
			j.css({
				width: d.insertTableMaxSize.col + "em",
				height: d.insertTableMaxSize.row + "em"
			}).on("mousemove", function (a) {
				s(a, d)
			}),
			c.editor().data("options", d),
			f.isMSIE || setTimeout(function () {
				document.execCommand("styleWithCSS", 0, d.styleWithSpan)
			}, 0);
			var n = new p(c.editable());
			c.editable().data("NoteHistory", n),
			c.editable().data("callbacks", {
				onInit: d.onInit,
				onFocus: d.onFocus,
				onBlur: d.onBlur,
				onKeydown: d.onKeydown,
				onKeyup: d.onKeyup,
				onMousedown: d.onMousedown,
				onEnter: d.onEnter,
				onPaste: d.onPaste,
				onBeforeCommand: d.onBeforeCommand,
				onChange: d.onChange,
				onImageUpload: d.onImageUpload,
				onImageUploadError: d.onImageUploadError,
				onMediaDelete: d.onMediaDelete
			}),
			k.isTextarea(h.head(c.holder())) && c.holder().closest("form").submit(function () {
				c.holder().val(c.holder().code())
			})
		},
		this.attachCustomEvent = function (b, d) {
			var e = b.holder(),
			g = b.editable(),
			i = g.data("callbacks");
			g.focus(c(e, i, "focus")),
			g.blur(c(e, i, "blur")),
			g.keydown(function (a) {
				a.keyCode === o.code.ENTER && c(e, i, "enter").call(this, a),
				c(e, i, "keydown").call(this, a)
			}),
			g.keyup(c(e, i, "keyup")),
			g.on("mousedown", c(e, i, "mousedown")),
			g.on("mouseup", c(e, i, "mouseup")),
			g.on("scroll", c(e, i, "scroll")),
			g.on("paste", c(e, i, "paste"));
			var j = f.isMSIE ? "DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted" : "input";
			g.on(j, function () {
				c(e, i, "change")(g.html(), g)
			}),
			d.airMode || (b.toolbar().click(c(e, i, "toolbar.click")), b.popover().click(c(e, i, "popover.click"))),
			k.isTextarea(h.head(e)) && e.closest("form").submit(function (a) {
				c(e, i, "submit").call(this, a, e.code())
			}),
			c(e, i, "init")(b);
			for (var l = 0, m = a.summernote.plugins.length; l < m; l++)
				a.isFunction(a.summernote.plugins[l].init) && a.summernote.plugins[l].init(b)
		},
		this.detach = function (a, b) {
			a.holder().off(),
			a.editable().off(),
			a.popover().off(),
			a.handle().off(),
			a.dialog().off(),
			b.airMode || (a.dropzone().off(), a.toolbar().off(), a.statusbar().off())
		}
	},
	K = function () {
		var b = function (a, b) {
			var c = b.event,
			d = b.value,
			e = b.title,
			f = b.className,
			g = b.dropdown,
			h = b.hide;
			return '<button type="button" class="btn btn-default btn-sm btn-small' + (f ? " " + f : "") + (g ? " dropdown-toggle" : "") + '"' + (g ? ' data-toggle="dropdown"' : "") + (e ? ' title="' + e + '"' : "") + (c ? ' data-event="' + c + '"' : "") + (d ? " data-value='" + d + "'" : "") + (h ? " data-hide='" + h + "'" : "") + ' tabindex="-1">' + a + "</button>" + (g || "")
		},
		c = function (a, c) {
			var d = '<i class="' + a + '"></i>';
			return b(d, c)
		},
		d = function (b, c) {
			var d = a('<div class="' + b + ' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');
			return d.find(".popover-content").append(c),
			d
		},
		e = function (a, b, c, d) {
			return '<div class="' + a + ' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">' + (b ? '<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">' + b + "</h4></div>" : "") + '<div class="modal-body">' + c + "</div>" + (d ? '<div class="modal-footer">' + d + "</div>" : "") + "</div></div></div>"
		},
		h = {
			picture: function (a, b) {
				return c(b.iconPrefix + "image", {
					event: "showImageDialog",
					title: a.image.image,
					hide: !0
				})
			},
			link: function (a, b) {
				return c(b.iconPrefix + "link", {
					event: "showLinkDialog",
					title: a.link.link,
					hide: !0
				})
			},
			unlink: function (a, b) {
				return c(b.iconPrefix + "unlink", {
					event: "unlink",
					title: a.unlink.unlink,
					hide: !0
				})
			},
			table: function (a, b) {
				var d = '<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';
				return c(b.iconPrefix + "table", {
					title: a.table.table,
					dropdown: d
				})
			},
			style: function (a, b) {
				var d = b.styleTags.reduce(function (b, c) {
						var d = a.style["p" === c ? "normal" : c];
						return b + '<li><a data-event="formatBlock" href="#" data-value="' + c + '">' + ("p" === c || "pre" === c ? d : "<" + c + ">" + d + "</" + c + ">") + "</a></li>"
					}, "");
				return c(b.iconPrefix + "magic", {
					title: a.style.style,
					dropdown: '<ul class="dropdown-menu">' + d + "</ul>"
				})
			},
			fontname: function (a, c) {
				var d = [],
				e = c.fontNames.reduce(function (a, b) {
						return f.isFontInstalled(b) || c.fontNamesIgnoreCheck.indexOf(b) !== -1 ? (d.push(b), a + '<li><a data-event="fontName" href="#" data-value="' + b + '" style="font-family:\'' + b + '\'"><i class="' + c.iconPrefix + 'check"></i> ' + b + "</a></li>") : a
					}, ""),
				g = f.isFontInstalled(c.defaultFontName),
				h = g ? c.defaultFontName : d[0],
				i = '<span class="note-current-fontname">' + h + "</span>";
				return b(i, {
					title: a.font.name,
					dropdown: '<ul class="dropdown-menu note-check">' + e + "</ul>"
				})
			},
			fontsize: function (a, b) {
				var d = b.fontSizes.reduce(function (a, b) {
						var c = 14 === b ? " active" : "";
						return a + '<li class="font-size"><button class="btn btn-item' + c + '" data-event="fontSize" data-value="' + b + '">' + b + "</button></li>"
					}, "");
				return c(b.iconPrefix + "font-size", {
					title: a.font.size,
					event: "font-size",
					dropdown: '<ul class="x-dropdown dropdown-menu font-size-list btn-group">' + d + "</ul>"
				})
			},
			color: function (a, b) {
				return c(b.iconPrefix + "color", {
					title: a.color.font,
					event: "font-color",
					dropdown: '<ul class="x-dropdown dropdown-menu color-palette btn-group" data-target-event="foreColor"></ul>'
				})
			},
			bold: function (a, b) {
				return c(b.iconPrefix + "bold", {
					event: "bold",
					title: a.font.bold
				})
			},
			italic: function (a, b) {
				return c(b.iconPrefix + "italic", {
					event: "italic",
					title: a.font.italic
				})
			},
			underline: function (a, b) {
				return c(b.iconPrefix + "underline", {
					event: "underline",
					title: a.font.underline
				})
			},
			strikethrough: function (a) {
				return c("fa fa-strikethrough", {
					event: "strikethrough",
					title: a.font.strikethrough
				})
			},
			superscript: function (a) {
				return c("fa fa-superscript", {
					event: "superscript",
					title: a.font.superscript
				})
			},
			subscript: function (a) {
				return c("fa fa-subscript", {
					event: "subscript",
					title: a.font.subscript
				})
			},
			clear: function (a, b) {
				return c(b.iconPrefix + "eraser", {
					event: "removeFormat",
					title: a.font.clear
				})
			},
			ul: function (a, b) {
				return c(b.iconPrefix + "list-ul", {
					event: "insertUnorderedList",
					title: a.lists.unordered
				})
			},
			ol: function (a, b) {
				return c(b.iconPrefix + "list-ol", {
					event: "insertOrderedList",
					title: a.lists.ordered
				})
			},
			paragraph: function (a, b) {
				var d = c(b.iconPrefix + "align-left", {
						title: a.paragraph.left,
						event: "justifyLeft"
					}),
				e = c(b.iconPrefix + "align-center", {
						title: a.paragraph.center,
						event: "justifyCenter"
					}),
				f = c(b.iconPrefix + "align-right", {
						title: a.paragraph.right,
						event: "justifyRight"
					}),
				g = (c(b.iconPrefix + "align-justify", {
						title: a.paragraph.justify,
						event: "justifyFull"
					}), c(b.iconPrefix + "outdent", {
						title: a.paragraph.outdent,
						event: "outdent"
					}), c(b.iconPrefix + "indent", {
						title: a.paragraph.indent,
						event: "indent"
					}), '<ul class="dropdown-menu x-dropdown"><div class="note-align btn-group">' + d + e + f + "</div></ul>");
				return c(b.iconPrefix + "align-left", {
					title: a.paragraph.paragraph,
					dropdown: g,
					event: "paragraph"
				})
			},
			height: function (a, b) {
				var d = b.lineHeights.reduce(function (a, c) {
						return a + '<li><a data-event="lineHeight" href="#" data-value="' + parseFloat(c) + '"><i class="' + b.iconPrefix + 'check"></i> ' + c + "</a></li>"
					}, "");
				return c(b.iconPrefix + "text-height", {
					title: a.font.height,
					dropdown: '<ul class="dropdown-menu note-check">' + d + "</ul>"
				})
			},
			help: function (a, b) {
				return c(b.iconPrefix + "question", {
					event: "showHelpDialog",
					title: a.options.help,
					hide: !0
				})
			},
			fullscreen: function (a, b) {
				return c(b.iconPrefix + "arrows-alt", {
					event: "fullscreen",
					title: a.options.fullscreen
				})
			},
			codeview: function (a, b) {
				return c(b.iconPrefix + "code", {
					event: "codeview",
					title: a.options.codeview
				})
			},
			undo: function (a, b) {
				return c(b.iconPrefix + "undo", {
					event: "undo",
					title: a.history.undo
				})
			},
			redo: function (a, b) {
				return c(b.iconPrefix + "repeat", {
					event: "redo",
					title: a.history.redo
				})
			},
			hr: function (a, b) {
				return c(b.iconPrefix + "minus", {
					event: "insertHorizontalRule",
					title: a.hr.insert
				})
			}
		},
		i = function (e, f) {
			var g = function () {
				var a = c(f.iconPrefix + "edit", {
						title: e.link.edit,
						event: "showLinkDialog",
						hide: !0
					}),
				b = c(f.iconPrefix + "unlink", {
						title: e.link.unlink,
						event: "unlink"
					}),
				g = '<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">' + a + b + "</div>";
				return d("note-link-popover", g)
			},
			i = function () {
				var a = b('<span class="note-fontsize-10">100%</span>', {
						title: e.image.resizeFull,
						event: "resize",
						value: "1"
					}),
				g = b('<span class="note-fontsize-10">50%</span>', {
						title: e.image.resizeHalf,
						event: "resize",
						value: "0.5"
					}),
				h = b('<span class="note-fontsize-10">25%</span>', {
						title: e.image.resizeQuarter,
						event: "resize",
						value: "0.25"
					}),
				i = c(f.iconPrefix + "align-left", {
						title: e.image.floatLeft,
						event: "floatMe",
						value: "left"
					}),
				j = c(f.iconPrefix + "align-right", {
						title: e.image.floatRight,
						event: "floatMe",
						value: "right"
					}),
				k = c(f.iconPrefix + "align-justify", {
						title: e.image.floatNone,
						event: "floatMe",
						value: "none"
					}),
				l = c(f.iconPrefix + "square", {
						title: e.image.shapeRounded,
						event: "imageShape",
						value: "img-rounded"
					}),
				m = c(f.iconPrefix + "circle-o", {
						title: e.image.shapeCircle,
						event: "imageShape",
						value: "img-circle"
					}),
				n = c(f.iconPrefix + "picture-o", {
						title: e.image.shapeThumbnail,
						event: "imageShape",
						value: "img-thumbnail"
					}),
				o = c(f.iconPrefix + "times", {
						title: e.image.shapeNone,
						event: "imageShape",
						value: ""
					}),
				p = c(f.iconPrefix + "trash-o", {
						title: e.image.remove,
						event: "removeMedia",
						value: "none"
					}),
				q = '<div class="btn-group">' + a + g + h + '</div><div class="btn-group">' + i + j + k + '</div><div class="btn-group">' + l + m + n + o + '</div><div class="btn-group">' + p + "</div>";
				return d("note-image-popover", q)
			},
			j = function () {
				for (var b = a("<div />"), c = 0, g = f.airPopover.length; c < g; c++) {
					for (var i = f.airPopover[c], j = a('<div class="note-' + i[0] + ' btn-group">'), k = 0, l = i[1].length; k < l; k++) {
						var m = a(h[i[1][k]](e, f));
						m.attr("data-name", i[1][k]),
						j.append(m)
					}
					b.append(j)
				}
				return d("note-air-popover", b.children())
			},
			k = a('<div class="note-popover" />');
			return k.append(g()),
			k.append(i()),
			f.airMode && k.append(j()),
			k
		},
		j = function () {
			return '<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'
		},
		l = {
			image: function (a, b) {
				var c = "";
				if (b.maximumImageFileSize) {
					var d = Math.floor(Math.log(b.maximumImageFileSize) / Math.log(1024)),
					f = 1 * (b.maximumImageFileSize / Math.pow(1024, d)).toFixed(2) + " " + " KMGTP"[d] + "B";
					c = "<small>" + a.image.maximumFileSize + " : " + f + "</small>"
				}
				var g = '<div class="form-group row-fluid note-group-select-from-files"><label>' + a.image.selectFromFiles + '</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />' + c + '</div><div class="form-group row-fluid"><label>' + a.image.url + '</label><input class="note-image-url form-control span12" type="text" /></div>',
				h = '<button href="#" class="btn btn-primary note-image-btn disabled" disabled>' + a.image.insert + "</button>";
				return e("note-image-dialog", a.image.insert, g, h)
			},
			link: function (a, b) {
				var c = '<div class="form-group row-fluid"><label>' + a.link.textToDisplay + '</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>' + a.link.url + '</label><input class="note-link-url form-control span12" type="text" /></div>' + (b.disableLinkTarget ? "" : '<div class="checkbox"><label><input type="checkbox" checked> ' + a.link.openInNewWindow + "</label></div>"),
				d = '<button href="#" class="btn btn-primary note-link-btn disabled" disabled>' + a.link.insert + "</button>";
				return e("note-link-dialog", a.link.insert, c, d)
			}
		},
		m = function (b, c) {
			var d = "";
			return a.each(l, function (a, e) {
				d += e(b, c)
			}),
			'<div class="note-dialog">' + d + "</div>"
		},
		n = function () {
			return '<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'
		},
		o = function (a) {
			return f.isMac && (a = a.replace("CMD", "").replace("SHIFT", "")),
			a.replace("BACKSLASH", "\\").replace("SLASH", "/").replace("LEFTBRACKET", "[").replace("RIGHTBRACKET", "]")
		},
		p = function (b, c, d) {
			var e = g.invertObject(c),
			f = b.find("button");
			f.each(function (b, c) {
				var d = a(c),
				f = e[d.data("event")];
				f && d.attr("title", function (a, b) {
					return b + " (" + o(f) + ")"
				})
			})
		},
		q = function (a, b) {
			var c = b.colors,
			d = a.find(".color-palette"),
			e = d.attr("data-target-event"),
			f = [];
			FX.Utils.forEach(c, function (a, b) {
				f.push(['<li class="color-item btn">', '<button type="button" class="color-btn btn-item" style="background-color:', b, ';" data-event="', e, '" data-value="', b, '" data-toggle="button" tabindex="-1"></button></li>'].join(""))
			}),
			d.html(f.join(""))
		};
		this.createLayoutByAirMode = function (b, c) {
			var d = c.langInfo,
			e = c.keyMap[f.isMac ? "mac" : "pc"],
			h = g.uniqueId();
			b.addClass("note-air-editor note-editable"),
			b.attr({
				id: "note-editor-" + h,
				contentEditable: !0
			});
			var k = document.body,
			l = a(i(d, c));
			l.addClass("note-air-layout"),
			l.attr("id", "note-popover-" + h),
			l.appendTo(k),
			p(l, e),
			q(l, c);
			var n = a(j());
			n.addClass("note-air-layout"),
			n.attr("id", "note-handle-" + h),
			n.appendTo(k);
			var o = a(m(d, c));
			o.addClass("note-air-layout"),
			o.attr("id", "note-dialog-" + h),
			o.find("button.close, a.modal-close").click(function () {
				a(this).closest(".modal").modal("hide")
			}),
			o.appendTo(k)
		},
		this.createLayoutByFrame = function (b, c) {
			var d = c.langInfo,
			e = a('<div class="note-editor"></div>');
			c.width && e.width(c.width),
			c.height > 0 && a('<div class="note-statusbar">' + (c.disableResizeEditor ? "" : n()) + "</div>").prependTo(e);
			var g = !b.is(":disabled"),
			i = a('<div class="note-editable" contentEditable="' + g + '"></div>').prependTo(e);
			c.height ? i.height(c.height) : c.minHeight && i.css({
				"min-Height": c.minHeight
			}),
			c.direction && i.attr("dir", c.direction);
			var j = b.attr("placeholder") || c.placeholder;
			j && i.attr("data-placeholder", j),
			i.html(k.html(b)),
			a('<textarea class="note-codable"></textarea>').prependTo(e);
			for (var l = a('<div class="note-toolbar btn-toolbar" />'), m = 0, o = c.toolbar.length; m < o; m++) {
				for (var r = c.toolbar[m][0], s = c.toolbar[m][1], t = a('<div class="note-' + r + ' btn-group" />'), u = 0, v = s.length; u < v; u++) {
					var w = h[s[u]];
					if (a.isFunction(w)) {
						var x = a(w(d, c));
						x.attr("data-name", s[u]),
						t.append(x)
					}
				}
				l.append(t)
			}
			l.prependTo(e);
			var y = c.keyMap[f.isMac ? "mac" : "pc"];
			q(l, c),
			p(l, y, "bottom"),
			e.insertAfter(b),
			b.hide()
		},
		this.hasNoteEditor = function (a) {
			return this.noteEditorFromHolder(a).length > 0
		},
		this.noteEditorFromHolder = function (b) {
			return b.hasClass("note-air-editor") ? b : b.next().hasClass("note-editor") ? b.next() : a()
		},
		this.createLayout = function (a, b) {
			b.airMode ? this.createLayoutByAirMode(a, b) : this.createLayoutByFrame(a, b)
		},
		this.layoutInfoFromHolder = function (a) {
			var b = this.noteEditorFromHolder(a);
			if (b.length)
				return b.data("holder", a), k.buildLayoutInfo(b)
		},
		this.removeLayout = function (a, b, c) {
			c.airMode ? (a.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"), b.popover().remove(), b.handle().remove(), b.dialog().remove()) : (a.html(b.editable().html()), b.editor().remove(), a.show())
		},
		this.getTemplate = function () {
			return {
				button: b,
				iconButton: c,
				dialog: e
			}
		},
		this.addButtonInfo = function (a, b) {
			h[a] = b
		},
		this.addDialogInfo = function (a, b) {
			l[a] = b
		}
	};
	a.summernote = a.summernote || {},
	a.extend(a.summernote, m);
	var L = new K,
	M = new J;
	a.extend(a.summernote, {
		renderer: L,
		eventHandler: M,
		core: {
			agent: f,
			list: h,
			dom: k,
			range: l
		},
		pluginEvents: {},
		plugins: []
	}),
	a.summernote.addPlugin = function (b) {
		a.summernote.plugins.push(b),
		b.buttons && a.each(b.buttons, function (a, b) {
			L.addButtonInfo(a, b)
		}),
		b.dialogs && a.each(b.dialogs, function (a, b) {
			L.addDialogInfo(a, b)
		}),
		b.events && a.each(b.events, function (b, c) {
			a.summernote.pluginEvents[b] = c
		}),
		b.langs && a.each(b.langs, function (b, c) {
			a.summernote.lang[b] && a.extend(a.summernote.lang[b], c)
		}),
		b.options && a.extend(a.summernote.options, b.options)
	},
	a.fn.extend({
		summernote: function () {
			var b = a.type(h.head(arguments)),
			c = "string" === b,
			d = "object" === b,
			e = d ? h.head(arguments) : {};
			if (e = a.extend({}, a.summernote.options, e), e.langInfo = a.extend(!0, {}, a.summernote.lang["zh-CN"], a.summernote.lang[e.lang]), !c && d)
				for (var f = 0, g = a.summernote.plugins.length; f < g; f++) {
					var i = a.summernote.plugins[f];
					e.plugin[i.name] && (a.summernote.plugins[f] = a.extend(!0, i, e.plugin[i.name]))
				}
			this.each(function (b, c) {
				var d = a(c);
				if (!L.hasNoteEditor(d)) {
					L.createLayout(d, e);
					var f = L.layoutInfoFromHolder(d);
					d.data("layoutInfo", f),
					M.attach(f, e),
					M.attachCustomEvent(f, e)
				}
			});
			var j = this.first();
			if (j.length) {
				var k = L.layoutInfoFromHolder(j);
				if (c) {
					var l = h.head(h.from(arguments)),
					m = h.tail(h.from(arguments)),
					n = [l, k.editable()].concat(m);
					return M.invoke.apply(M, n)
				}
				e.focus && k.editable().focus()
			}
			return this
		},
		code: function (b) {
			if (void 0 === b) {
				var c = this.first();
				if (!c.length)
					return;
				var d = L.layoutInfoFromHolder(c),
				e = d && d.editable();
				if (e && e.length) {
					var f = M.invoke("codeview.isActivated", d);
					return M.invoke("codeview.sync", d),
					f ? d.codable().val() : d.editable().html()
				}
				return k.value(c)
			}
			return this.each(function (c, d) {
				var e = L.layoutInfoFromHolder(a(d)),
				f = e && e.editable();
				f && f.html(b)
			}),
			this
		},
		destroy: function () {
			return this.each(function (b, c) {
				var d = a(c);
				if (L.hasNoteEditor(d)) {
					var e = L.layoutInfoFromHolder(d),
					f = e.editor().data("options");
					M.detach(e, f),
					L.removeLayout(d, e, f)
				}
			}),
			this
		}
	})
}), function (a) {
	FX.RichText = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.RichText.superclass._defaultConfig.apply(), {
					baseCls: "x-richtext",
					toolbar: [["font", ["bold", "italic", "underline"]], ["para", ["paragraph"]], ["color", ["color"]], ["insert", ["link", "unlink", "picture"]]],
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.RichText.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.$editor = a("<div/>").appendTo(this.element),
				this.$editor.summernote({
					height: b.height,
					width: b.width,
					minHeight: b.minHeight,
					minWidth: b.minWidth,
					toolbar: b.toolbar,
					onChange: function (a, d) {
						FX.Utils.applyFunc(c, b.onAfterEdit, [], !1)
					}
				})
			},
			checkValidate: function () {
				var a = this.options,
				b = !0,
				c = this.getValue();
				return FX.Utils.isEmpty(c) && (b = !!a.allowBlank),
				b
			},
			getText: function () {
				return this.getValue()
			},
			setText: function (a) {
				this.setValue(a)
			},
			getValue: function () {
				return this.$editor.code()
			},
			setValue: function (a) {
				this.$editor.code(a)
			}
		}),
	a.shortcut("richtext", FX.RichText)
}
(jQuery), function (a) {
	this.CodeMirror = a()
}
(function () {
	"use strict";
	function a(c, d) {
		if (!(this instanceof a))
			return new a(c, d);
		this.options = d = d ? He(d) : {},
		He(Vf, d, !1),
		n(d),
		a.keywords = d.keywords || [];
		var e = d.value;
		"string" == typeof e && (e = new rg(e, d.mode)),
		this.doc = e;
		var f = new a.inputStyles[d.inputStyle](this),
		g = this.display = new b(c, e, f);
		g.wrapper.CodeMirror = this,
		j(this),
		h(this),
		d.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"),
		d.autofocus && !xf && g.input.focus(),
		r(this),
		this.state = {
			keyMaps: [],
			overlays: [],
			modeGen: 0,
			overwrite: !1,
			delayingBlurEvent: !1,
			focused: !1,
			suppressEdits: !1,
			pasteIncoming: !1,
			cutIncoming: !1,
			draggingText: !1,
			highlight: new ze,
			keySeq: null,
			specialChars: null
		};
		var i = this;
		nf && of < 11 && setTimeout(function () {
			i.display.input.reset(!0)
		}, 20),
		Pb(this),
		Te(),
		tb(this),
		this.curOp.forceUpdate = !0,
		Ud(this, e),
		d.autofocus && !xf || i.hasFocus() ? setTimeout(Ie(nc, this), 20) : oc(this);
		for (var k in Wf)
			Wf.hasOwnProperty(k) && Wf[k](this, d[k], Xf);
		w(this),
		d.finishInit && d.finishInit(this);
		for (var l = 0; l < _f.length; ++l)
			_f[l](this);
		vb(this),
		pf && d.lineWrapping && "optimizelegibility" == getComputedStyle(g.lineDiv).textRendering && (g.lineDiv.style.textRendering = "auto")
	}
	function b(a, b, c) {
		var d = this;
		this.input = c,
		d.scrollbarFiller = Me("div", null, "CodeMirror-scrollbar-filler"),
		d.scrollbarFiller.setAttribute("cm-not-content", "true"),
		d.gutterFiller = Me("div", null, "CodeMirror-gutter-filler"),
		d.gutterFiller.setAttribute("cm-not-content", "true"),
		d.lineDiv = Me("div", null, "CodeMirror-code"),
		d.selectionDiv = Me("div", null, null, "position: relative; z-index: 1"),
		d.cursorDiv = Me("div", null, "CodeMirror-cursors"),
		d.measure = Me("div", null, "CodeMirror-measure"),
		d.lineMeasure = Me("div", null, "CodeMirror-measure"),
		d.lineSpace = Me("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, "position: relative; outline: none"),
		d.mover = Me("div", [Me("div", [d.lineSpace], "CodeMirror-lines")], null, "position: relative"),
		d.sizer = Me("div", [d.mover], "CodeMirror-sizer"),
		d.sizerWidth = null,
		d.heightForcer = Me("div", null, null, "position: absolute; height: " + Bg + "px; width: 1px;"),
		d.gutters = Me("div", null, "CodeMirror-gutters"),
		d.lineGutter = null,
		d.scroller = Me("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll"),
		d.scroller.setAttribute("tabIndex", "-1"),
		d.wrapper = Me("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror"),
		nf && of < 8 && (d.gutters.style.zIndex = -1, d.scroller.style.paddingRight = 0),
		pf || kf && xf || (d.scroller.draggable = !0),
		a && (a.appendChild ? a.appendChild(d.wrapper) : a(d.wrapper)),
		d.viewFrom = d.viewTo = b.first,
		d.reportedViewFrom = d.reportedViewTo = b.first,
		d.view = [],
		d.renderedView = null,
		d.externalMeasured = null,
		d.viewOffset = 0,
		d.lastWrapHeight = d.lastWrapWidth = 0,
		d.updateLineNumbers = null,
		d.nativeBarWidth = d.barHeight = d.barWidth = 0,
		d.scrollbarsClipped = !1,
		d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null,
		d.alignWidgets = !1,
		d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null,
		d.maxLine = null,
		d.maxLineLength = 0,
		d.maxLineChanged = !1,
		d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null,
		d.shift = !1,
		d.selForContextMenu = null,
		d.activeTouch = null,
		c.init(d)
	}
	function c(b) {
		b.doc.mode = a.getMode(b.options, b.doc.modeOption),
		d(b)
	}
	function d(a) {
		a.doc.iter(function (a) {
			a.stateAfter && (a.stateAfter = null),
			a.styles && (a.styles = null)
		}),
		a.doc.frontier = a.doc.first,
		Ma(a, 100),
		a.state.modeGen++,
		a.curOp && Ib(a)
	}
	function e(a) {
		a.options.lineWrapping ? (Rg(a.display.wrapper, "CodeMirror-wrap"), a.display.sizer.style.minWidth = "", a.display.sizerWidth = null) : (Qg(a.display.wrapper, "CodeMirror-wrap"), m(a)),
		g(a),
		Ib(a),
		gb(a),
		setTimeout(function () {
			s(a)
		}, 100)
	}
	function f(a) {
		var b = rb(a.display),
		c = a.options.lineWrapping,
		d = c && Math.max(5, a.display.scroller.clientWidth / sb(a.display) - 3);
		return function (e) {
			if (sd(a.doc, e))
				return 0;
			var f = 0;
			if (e.widgets)
				for (var g = 0; g < e.widgets.length; g++)
					e.widgets[g].height && (f += e.widgets[g].height);
			return c ? f + (Math.ceil(e.text.length / d) || 1) * b : f + b
		}
	}
	function g(a) {
		var b = a.doc,
		c = f(a);
		b.iter(function (a) {
			var b = c(a);
			b != a.height && Yd(a, b)
		})
	}
	function h(a) {
		a.display.wrapper.className = a.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + a.options.theme.replace(/(^|\s)\s*/g, " cm-s-"),
		gb(a)
	}
	function i(a) {
		j(a),
		Ib(a),
		setTimeout(function () {
			v(a)
		}, 20)
	}
	function j(a) {
		var b = a.display.gutters,
		c = a.options.gutters;
		Ne(b);
		for (var d = 0; d < c.length; ++d) {
			var e = c[d],
			f = b.appendChild(Me("div", null, "CodeMirror-gutter " + e));
			"CodeMirror-linenumbers" == e && (a.display.lineGutter = f, f.style.width = (a.display.lineNumWidth || 1) + "px")
		}
		b.style.display = d ? "" : "none",
		k(a)
	}
	function k(a) {
		var b = a.display.gutters.offsetWidth;
		a.display.sizer.style.marginLeft = b + "px"
	}
	function l(a) {
		if (0 == a.height)
			return 0;
		for (var b, c = a.text.length, d = a; b = ld(d); ) {
			var e = b.find(0, !0);
			d = e.from.line,
			c += e.from.ch - e.to.ch
		}
		for (d = a; b = md(d); ) {
			var e = b.find(0, !0);
			c -= d.text.length - e.from.ch,
			d = e.to.line,
			c += d.text.length - e.to.ch
		}
		return c
	}
	function m(a) {
		var b = a.display,
		c = a.doc;
		b.maxLine = Vd(c, c.first),
		b.maxLineLength = l(b.maxLine),
		b.maxLineChanged = !0,
		c.iter(function (a) {
			var c = l(a);
			c > b.maxLineLength && (b.maxLineLength = c, b.maxLine = a)
		})
	}
	function n(a) {
		var b = De(a.gutters, "CodeMirror-linenumbers");
		b == -1 && a.lineNumbers ? a.gutters = a.gutters.concat(["CodeMirror-linenumbers"]) : b > -1 && !a.lineNumbers && (a.gutters = a.gutters.slice(0), a.gutters.splice(b, 1))
	}
	function o(a) {
		var b = a.display,
		c = b.gutters.offsetWidth,
		d = Math.round(a.doc.height + Ra(a.display));
		return {
			clientHeight: b.scroller.clientHeight,
			viewHeight: b.wrapper.clientHeight,
			scrollWidth: b.scroller.scrollWidth,
			clientWidth: b.scroller.clientWidth,
			viewWidth: b.wrapper.clientWidth,
			barLeft: a.options.fixedGutter ? c : 0,
			docHeight: d,
			scrollHeight: d + Ta(a) + b.barHeight,
			nativeBarWidth: b.nativeBarWidth,
			gutterWidth: c
		}
	}
	function p(a, b, c) {
		this.cm = c;
		var d = this.vert = Me("div", [Me("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar"),
		e = this.horiz = Me("div", [Me("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
		a(d),
		a(e),
		xg(d, "scroll", function () {
			d.clientHeight && b(d.scrollTop, "vertical")
		}),
		xg(e, "scroll", function () {
			e.clientWidth && b(e.scrollLeft, "horizontal")
		}),
		this.checkedOverlay = !1,
		nf && of < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
	}
	function q() {}
	function r(b) {
		b.display.scrollbars && (b.display.scrollbars.clear(), b.display.scrollbars.addClass && Qg(b.display.wrapper, b.display.scrollbars.addClass)),
		b.display.scrollbars = new a.scrollbarModel[b.options.scrollbarStyle](function (a) {
				b.display.wrapper.insertBefore(a, b.display.scrollbarFiller),
				xg(a, "mousedown", function () {
					b.state.focused && setTimeout(function () {
						b.display.input.focus()
					}, 0)
				}),
				a.setAttribute("cm-not-content", "true")
			}, function (a, c) {
				"horizontal" == c ? bc(b, a) : ac(b, a)
			}, b),
		b.display.scrollbars.addClass && Rg(b.display.wrapper, b.display.scrollbars.addClass)
	}
	function s(a, b) {
		b || (b = o(a));
		var c = a.display.barWidth,
		d = a.display.barHeight;
		t(a, b);
		for (var e = 0; e < 4 && c != a.display.barWidth || d != a.display.barHeight; e++)
			c != a.display.barWidth && a.options.lineWrapping && F(a), t(a, o(a)), c = a.display.barWidth, d = a.display.barHeight
	}
	function t(a, b) {
		var c = a.display,
		d = c.scrollbars.update(b);
		c.sizer.style.paddingRight = (c.barWidth = d.right) + "px",
		c.sizer.style.paddingBottom = (c.barHeight = d.bottom) + "px",
		d.right && d.bottom ? (c.scrollbarFiller.style.display = "block", c.scrollbarFiller.style.height = d.bottom + "px", c.scrollbarFiller.style.width = d.right + "px") : c.scrollbarFiller.style.display = "",
		d.bottom && a.options.coverGutterNextToScrollbar && a.options.fixedGutter ? (c.gutterFiller.style.display = "block", c.gutterFiller.style.height = d.bottom + "px", c.gutterFiller.style.width = b.gutterWidth + "px") : c.gutterFiller.style.display = ""
	}
	function u(a, b, c) {
		var d = c && null != c.top ? Math.max(0, c.top) : a.scroller.scrollTop;
		d = Math.floor(d - Qa(a));
		var e = c && null != c.bottom ? c.bottom : d + a.wrapper.clientHeight,
		f = $d(b, d),
		g = $d(b, e);
		if (c && c.ensure) {
			var h = c.ensure.from.line,
			i = c.ensure.to.line;
			h < f ? (f = h, g = $d(b, _d(Vd(b, h)) + a.wrapper.clientHeight)) : Math.min(i, b.lastLine()) >= g && (f = $d(b, _d(Vd(b, i)) - a.wrapper.clientHeight), g = i)
		}
		return {
			from: f,
			to: Math.max(g, f + 1)
		}
	}
	function v(a) {
		var b = a.display,
		c = b.view;
		if (b.alignWidgets || b.gutters.firstChild && a.options.fixedGutter) {
			for (var d = y(b) - b.scroller.scrollLeft + a.doc.scrollLeft, e = b.gutters.offsetWidth, f = d + "px", g = 0; g < c.length; g++)
				if (!c[g].hidden) {
					a.options.fixedGutter && c[g].gutter && (c[g].gutter.style.left = f);
					var h = c[g].alignable;
					if (h)
						for (var i = 0; i < h.length; i++)
							h[i].style.left = f
				}
			a.options.fixedGutter && (b.gutters.style.left = d + e + "px")
		}
	}
	function w(a) {
		if (!a.options.lineNumbers)
			return !1;
		var b = a.doc,
		c = x(a.options, b.first + b.size - 1),
		d = a.display;
		if (c.length != d.lineNumChars) {
			var e = d.measure.appendChild(Me("div", [Me("div", c)], "CodeMirror-linenumber CodeMirror-gutter-elt")),
			f = e.firstChild.offsetWidth,
			g = e.offsetWidth - f;
			return d.lineGutter.style.width = "",
			d.lineNumInnerWidth = Math.max(f, d.lineGutter.offsetWidth - g) + 1,
			d.lineNumWidth = d.lineNumInnerWidth + g,
			d.lineNumChars = d.lineNumInnerWidth ? c.length : -1,
			d.lineGutter.style.width = d.lineNumWidth + "px",
			k(a),
			!0
		}
		return !1
	}
	function x(a, b) {
		return String(a.lineNumberFormatter(b + a.firstLineNumber))
	}
	function y(a) {
		return a.scroller.getBoundingClientRect().left - a.sizer.getBoundingClientRect().left
	}
	function z(a, b, c) {
		var d = a.display;
		this.viewport = b,
		this.visible = u(d, a.doc, b),
		this.editorIsHidden = !d.wrapper.offsetWidth,
		this.wrapperHeight = d.wrapper.clientHeight,
		this.wrapperWidth = d.wrapper.clientWidth,
		this.oldDisplayWidth = Ua(a),
		this.force = c,
		this.dims = H(a),
		this.events = []
	}
	function A(a) {
		var b = a.display;
		!b.scrollbarsClipped && b.scroller.offsetWidth && (b.nativeBarWidth = b.scroller.offsetWidth - b.scroller.clientWidth, b.heightForcer.style.height = Ta(a) + "px", b.sizer.style.marginBottom = -b.nativeBarWidth + "px", b.sizer.style.borderRightWidth = Ta(a) + "px", b.scrollbarsClipped = !0)
	}
	function B(a, b) {
		var c = a.display,
		d = a.doc;
		if (b.editorIsHidden)
			return Kb(a), !1;
		if (!b.force && b.visible.from >= c.viewFrom && b.visible.to <= c.viewTo && (null == c.updateLineNumbers || c.updateLineNumbers >= c.viewTo) && c.renderedView == c.view && 0 == Ob(a))
			return !1;
		w(a) && (Kb(a), b.dims = H(a));
		var e = d.first + d.size,
		f = Math.max(b.visible.from - a.options.viewportMargin, d.first),
		g = Math.min(e, b.visible.to + a.options.viewportMargin);
		c.viewFrom < f && f - c.viewFrom < 20 && (f = Math.max(d.first, c.viewFrom)),
		c.viewTo > g && c.viewTo - g < 20 && (g = Math.min(e, c.viewTo)),
		Ef && (f = qd(a.doc, f), g = rd(a.doc, g));
		var h = f != c.viewFrom || g != c.viewTo || c.lastWrapHeight != b.wrapperHeight || c.lastWrapWidth != b.wrapperWidth;
		Nb(a, f, g),
		c.viewOffset = _d(Vd(a.doc, c.viewFrom)),
		a.display.mover.style.top = c.viewOffset + "px";
		var i = Ob(a);
		if (!h && 0 == i && !b.force && c.renderedView == c.view && (null == c.updateLineNumbers || c.updateLineNumbers >= c.viewTo))
			return !1;
		var j = Pe();
		return i > 4 && (c.lineDiv.style.display = "none"),
		I(a, c.updateLineNumbers, b.dims),
		i > 4 && (c.lineDiv.style.display = ""),
		c.renderedView = c.view,
		j && Pe() != j && j.offsetHeight && j.focus(),
		Ne(c.cursorDiv),
		Ne(c.selectionDiv),
		c.gutters.style.height = 0,
		h && (c.lastWrapHeight = b.wrapperHeight, c.lastWrapWidth = b.wrapperWidth, Ma(a, 400)),
		c.updateLineNumbers = null,
		!0
	}
	function C(a, b) {
		for (var c = b.viewport, d = !0; (d && a.options.lineWrapping && b.oldDisplayWidth != Ua(a) || (c && null != c.top && (c = {
							top: Math.min(a.doc.height + Ra(a.display) - Va(a), c.top)
						}), b.visible = u(a.display, a.doc, c), !(b.visible.from >= a.display.viewFrom && b.visible.to <= a.display.viewTo))) && B(a, b); d = !1) {
			F(a);
			var e = o(a);
			Ha(a),
			E(a, e),
			s(a, e)
		}
		b.signal(a, "update", a),
		a.display.viewFrom == a.display.reportedViewFrom && a.display.viewTo == a.display.reportedViewTo || (b.signal(a, "viewportChange", a, a.display.viewFrom, a.display.viewTo), a.display.reportedViewFrom = a.display.viewFrom, a.display.reportedViewTo = a.display.viewTo)
	}
	function D(a, b) {
		var c = new z(a, b);
		if (B(a, c)) {
			F(a),
			C(a, c);
			var d = o(a);
			Ha(a),
			E(a, d),
			s(a, d),
			c.finish()
		}
	}
	function E(a, b) {
		a.display.sizer.style.minHeight = b.docHeight + "px";
		var c = b.docHeight + a.display.barHeight;
		a.display.heightForcer.style.top = c + "px",
		a.display.gutters.style.height = Math.max(c + Ta(a), b.clientHeight) + "px"
	}
	function F(a) {
		for (var b = a.display, c = b.lineDiv.offsetTop, d = 0; d < b.view.length; d++) {
			var e,
			f = b.view[d];
			if (!f.hidden) {
				if (nf && of < 8) {
					var g = f.node.offsetTop + f.node.offsetHeight;
					e = g - c,
					c = g
				} else {
					var h = f.node.getBoundingClientRect();
					e = h.bottom - h.top
				}
				var i = f.line.height - e;
				if (e < 2 && (e = rb(b)), (i > .001 || i <  - .001) && (Yd(f.line, e), G(f.line), f.rest))
					for (var j = 0; j < f.rest.length; j++)
						G(f.rest[j])
			}
		}
	}
	function G(a) {
		if (a.widgets)
			for (var b = 0; b < a.widgets.length; ++b)
				a.widgets[b].height = a.widgets[b].node.offsetHeight
	}
	function H(a) {
		for (var b = a.display, c = {}, d = {}, e = b.gutters.clientLeft, f = b.gutters.firstChild, g = 0; f; f = f.nextSibling, ++g)
			c[a.options.gutters[g]] = f.offsetLeft + f.clientLeft + e, d[a.options.gutters[g]] = f.clientWidth;
		return {
			fixedPos: y(b),
			gutterTotalWidth: b.gutters.offsetWidth,
			gutterLeft: c,
			gutterWidth: d,
			wrapperWidth: b.wrapper.clientWidth
		}
	}
	function I(a, b, c) {
		function d(b) {
			var c = b.nextSibling;
			return pf && yf && a.display.currentWheelTarget == b ? b.style.display = "none" : b.parentNode.removeChild(b),
			c
		}
		for (var e = a.display, f = a.options.lineNumbers, g = e.lineDiv, h = g.firstChild, i = e.view, j = e.viewFrom, k = 0; k < i.length; k++) {
			var l = i[k];
			if (l.hidden);
			else if (l.node && l.node.parentNode == g) {
				for (; h != l.node; )
					h = d(h);
				var m = f && null != b && b <= j && l.lineNumber;
				l.changes && (De(l.changes, "gutter") > -1 && (m = !1), J(a, l, j, c)),
				m && (Ne(l.lineNumber), l.lineNumber.appendChild(document.createTextNode(x(a.options, j)))),
				h = l.node.nextSibling
			} else {
				var n = R(a, l, j, c);
				g.insertBefore(n, h)
			}
			j += l.size
		}
		for (; h; )
			h = d(h)
	}
	function J(a, b, c, d) {
		for (var e = 0; e < b.changes.length; e++) {
			var f = b.changes[e];
			"text" == f ? N(a, b) : "gutter" == f ? P(a, b, c, d) : "class" == f ? O(b) : "widget" == f && Q(a, b, d)
		}
		b.changes = null
	}
	function K(a) {
		return a.node == a.text && (a.node = Me("div", null, null, "position: relative"), a.text.parentNode && a.text.parentNode.replaceChild(a.node, a.text), a.node.appendChild(a.text), nf && of < 8 && (a.node.style.zIndex = 2)),
		a.node
	}
	function L(a) {
		var b = a.bgClass ? a.bgClass + " " + (a.line.bgClass || "") : a.line.bgClass;
		if (b && (b += " CodeMirror-linebackground"), a.background)
			b ? a.background.className = b : (a.background.parentNode.removeChild(a.background), a.background = null);
		else if (b) {
			var c = K(a);
			a.background = c.insertBefore(Me("div", null, b), c.firstChild)
		}
	}
	function M(a, b) {
		var c = a.display.externalMeasured;
		return c && c.line == b.line ? (a.display.externalMeasured = null, b.measure = c.measure, c.built) : Id(a, b)
	}
	function N(a, b) {
		var c = b.text.className,
		d = M(a, b);
		b.text == b.node && (b.node = d.pre),
		b.text.parentNode.replaceChild(d.pre, b.text),
		b.text = d.pre,
		d.bgClass != b.bgClass || d.textClass != b.textClass ? (b.bgClass = d.bgClass, b.textClass = d.textClass, O(b)) : c && (b.text.className = c)
	}
	function O(a) {
		L(a),
		a.line.wrapClass ? K(a).className = a.line.wrapClass : a.node != a.text && (a.node.className = "");
		var b = a.textClass ? a.textClass + " " + (a.line.textClass || "") : a.line.textClass;
		a.text.className = b || ""
	}
	function P(a, b, c, d) {
		b.gutter && (b.node.removeChild(b.gutter), b.gutter = null);
		var e = b.line.gutterMarkers;
		if (a.options.lineNumbers || e) {
			var f = K(b),
			g = b.gutter = Me("div", null, "CodeMirror-gutter-wrapper", "left: " + (a.options.fixedGutter ? d.fixedPos : -d.gutterTotalWidth) + "px; width: " + d.gutterTotalWidth + "px");
			if (a.display.input.setUneditable(g), f.insertBefore(g, b.text), b.line.gutterClass && (g.className += " " + b.line.gutterClass), !a.options.lineNumbers || e && e["CodeMirror-linenumbers"] || (b.lineNumber = g.appendChild(Me("div", x(a.options, c), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + d.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + a.display.lineNumInnerWidth + "px"))), e)
				for (var h = 0; h < a.options.gutters.length; ++h) {
					var i = a.options.gutters[h],
					j = e.hasOwnProperty(i) && e[i];
					j && g.appendChild(Me("div", [j], "CodeMirror-gutter-elt", "left: " + d.gutterLeft[i] + "px; width: " + d.gutterWidth[i] + "px"))
				}
		}
	}
	function Q(a, b, c) {
		b.alignable && (b.alignable = null);
		for (var d, e = b.node.firstChild; e; e = d) {
			var d = e.nextSibling;
			"CodeMirror-linewidget" == e.className && b.node.removeChild(e)
		}
		S(a, b, c)
	}
	function R(a, b, c, d) {
		var e = M(a, b);
		return b.text = b.node = e.pre,
		e.bgClass && (b.bgClass = e.bgClass),
		e.textClass && (b.textClass = e.textClass),
		O(b),
		P(a, b, c, d),
		S(a, b, d),
		b.node
	}
	function S(a, b, c) {
		if (T(a, b.line, b, c, !0), b.rest)
			for (var d = 0; d < b.rest.length; d++)
				T(a, b.rest[d], b, c, !1)
	}
	function T(a, b, c, d, e) {
		if (b.widgets)
			for (var f = K(c), g = 0, h = b.widgets; g < h.length; ++g) {
				var i = h[g],
				j = Me("div", [i.node], "CodeMirror-linewidget");
				i.handleMouseEvents || j.setAttribute("cm-ignore-events", "true"),
				U(i, j, c, d),
				a.display.input.setUneditable(j),
				e && i.above ? f.insertBefore(j, c.gutter || c.text) : f.appendChild(j),
				te(i, "redraw")
			}
	}
	function U(a, b, c, d) {
		if (a.noHScroll) {
			(c.alignable || (c.alignable = [])).push(b);
			var e = d.wrapperWidth;
			b.style.left = d.fixedPos + "px",
			a.coverGutter || (e -= d.gutterTotalWidth, b.style.paddingLeft = d.gutterTotalWidth + "px"),
			b.style.width = e + "px"
		}
		a.coverGutter && (b.style.zIndex = 5, b.style.position = "relative", a.noHScroll || (b.style.marginLeft = -d.gutterTotalWidth + "px"))
	}
	function V(a) {
		return Ff(a.line, a.ch)
	}
	function W(a, b) {
		return Gf(a, b) < 0 ? b : a
	}
	function X(a, b) {
		return Gf(a, b) < 0 ? a : b
	}
	function Y(a) {
		a.state.focused || (a.display.input.focus(), nc(a))
	}
	function Z(a) {
		return a.options.readOnly || a.doc.cantEdit
	}
	function $(a, b, c, d, e) {
		var f = a.doc;
		a.display.shift = !1,
		d || (d = f.sel);
		var g = a.state.pasteIncoming || "paste" == e,
		h = Ug(b),
		i = null;
		g && d.ranges.length > 1 && (Hf && Hf.join("\n") == b ? i = d.ranges.length % Hf.length == 0 && Ee(Hf, Ug) : h.length == d.ranges.length && (i = Ee(h, function (a) {
							return [a]
						})));
		for (var j = d.ranges.length - 1; j >= 0; j--) {
			var k = d.ranges[j],
			l = k.from(),
			m = k.to();
			k.empty() && (c && c > 0 ? l = Ff(l.line, l.ch - c) : a.state.overwrite && !g && (m = Ff(m.line, Math.min(Vd(f, m.line).text.length, m.ch + Ce(h).length))));
			var n = a.curOp.updateInput,
			o = {
				from: l,
				to: m,
				text: i ? i[j % i.length] : h,
				origin: e || (g ? "paste" : a.state.cutIncoming ? "cut" : "+input")
			};
			wc(a.doc, o),
			te(a, "inputRead", a, o)
		}
		b && !g && aa(a, b),
		Ic(a),
		a.curOp.updateInput = n,
		a.curOp.typing = !0,
		a.state.pasteIncoming = a.state.cutIncoming = !1
	}
	function _(a, b) {
		var c = a.clipboardData && a.clipboardData.getData("text/plain");
		if (c)
			return a.preventDefault(), Cb(b, function () {
				$(b, c, 0, null, "paste")
			}), !0
	}
	function aa(a, b) {
		if (a.options.electricChars && a.options.smartIndent)
			for (var c = a.doc.sel, d = c.ranges.length - 1; d >= 0; d--) {
				var e = c.ranges[d];
				if (!(e.head.ch > 100 || d && c.ranges[d - 1].head.line == e.head.line)) {
					var f = a.getModeAt(e.head),
					g = !1;
					if (f.electricChars) {
						for (var h = 0; h < f.electricChars.length; h++)
							if (b.indexOf(f.electricChars.charAt(h)) > -1) {
								g = Kc(a, e.head.line, "smart");
								break
							}
					} else
						f.electricInput && f.electricInput.test(Vd(a.doc, e.head.line).text.slice(0, e.head.ch)) && (g = Kc(a, e.head.line, "smart"));
					g && te(a, "electricInput", a, e.head.line)
				}
			}
	}
	function ba(a) {
		for (var b = [], c = [], d = 0; d < a.doc.sel.ranges.length; d++) {
			var e = a.doc.sel.ranges[d].head.line,
			f = {
				anchor: Ff(e, 0),
				head: Ff(e + 1, 0)
			};
			c.push(f),
			b.push(a.getRange(f.anchor, f.head))
		}
		return {
			text: b,
			ranges: c
		}
	}
	function ca(a) {
		a.setAttribute("autocorrect", "off"),
		a.setAttribute("autocapitalize", "off"),
		a.setAttribute("spellcheck", "false")
	}
	function da(a) {
		this.cm = a,
		this.prevInput = "",
		this.pollingFast = !1,
		this.polling = new ze,
		this.inaccurateSelection = !1,
		this.hasSelection = !1,
		this.composing = null
	}
	function ea() {
		var a = Me("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),
		b = Me("div", [a], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
		return pf ? a.style.width = "1000px" : a.setAttribute("wrap", "off"),
		wf && (a.style.border = "1px solid black"),
		ca(a),
		b
	}
	function fa(a) {
		this.cm = a,
		this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null,
		this.polling = new ze,
		this.gracePeriod = !1
	}
	function ga(a, b) {
		var c = $a(a, b.line);
		if (!c || c.hidden)
			return null;
		var d = Vd(a.doc, b.line),
		e = Xa(c, d, b.line),
		f = ae(d),
		g = "left";
		if (f) {
			var h = ff(f, b.ch);
			g = h % 2 ? "right" : "left"
		}
		var i = bb(e.map, b.ch, g);
		return i.offset = "right" == i.collapse ? i.end : i.start,
		i
	}
	function ha(a, b) {
		return b && (a.bad = !0),
		a
	}
	function ia(a, b, c) {
		var d;
		if (b == a.display.lineDiv) {
			if (d = a.display.lineDiv.childNodes[c], !d)
				return ha(a.clipPos(Ff(a.display.viewTo - 1)), !0);
			b = null,
			c = 0
		} else
			for (d = b; ; d = d.parentNode) {
				if (!d || d == a.display.lineDiv)
					return null;
				if (d.parentNode && d.parentNode == a.display.lineDiv)
					break
			}
		for (var e = 0; e < a.display.view.length; e++) {
			var f = a.display.view[e];
			if (f.node == d)
				return ja(f, b, c)
		}
	}
	function ja(a, b, c) {
		function d(b, c, d) {
			for (var e = -1; e < (k ? k.length : 0); e++)
				for (var f = e < 0 ? j.map : k[e], g = 0; g < f.length; g += 3) {
					var h = f[g + 2];
					if (h == b || h == c) {
						var i = Zd(e < 0 ? a.line : a.rest[e]),
						l = f[g] + d;
						return (d < 0 || h != b) && (l = f[g + (d ? 1 : 0)]),
						Ff(i, l)
					}
				}
		}
		var e = a.text.firstChild,
		f = !1;
		if (!b || !Ng(e, b))
			return ha(Ff(Zd(a.line), 0), !0);
		if (b == e && (f = !0, b = e.childNodes[c], c = 0, !b)) {
			var g = a.rest ? Ce(a.rest) : a.line;
			return ha(Ff(Zd(g), g.text.length), f)
		}
		var h = 3 == b.nodeType ? b : null,
		i = b;
		for (h || 1 != b.childNodes.length || 3 != b.firstChild.nodeType || (h = b.firstChild, c && (c = h.nodeValue.length)); i.parentNode != e; )
			i = i.parentNode;
		var j = a.measure,
		k = j.maps,
		l = d(h, i, c);
		if (l)
			return ha(l, f);
		for (var m = i.nextSibling, n = h ? h.nodeValue.length - c : 0; m; m = m.nextSibling) {
			if (l = d(m, m.firstChild, 0))
				return ha(Ff(l.line, l.ch - n), f);
			n += m.textContent.length
		}
		for (var o = i.previousSibling, n = c; o; o = o.previousSibling) {
			if (l = d(o, o.firstChild, -1))
				return ha(Ff(l.line, l.ch + n), f);
			n += m.textContent.length
		}
	}
	function ka(a, b, c, d, e) {
		function f(a) {
			return function (b) {
				return b.id == a
			}
		}
		function g(b) {
			if (1 == b.nodeType) {
				var c = b.getAttribute("cm-text");
				if (null != c)
					return "" == c && (c = b.textContent.replace(/\u200b/g, "")), void(h += c);
				var j,
				k = b.getAttribute("cm-marker");
				if (k) {
					var l = a.findMarks(Ff(d, 0), Ff(e + 1, 0), f(+k));
					return void(l.length && (j = l[0].find()) && (h += Wd(a.doc, j.from, j.to).join("\n")))
				}
				if ("false" == b.getAttribute("contenteditable"))
					return;
				for (var m = 0; m < b.childNodes.length; m++)
					g(b.childNodes[m]);
				/^(pre|div|p)$/i.test(b.nodeName) && (i = !0)
			} else if (3 == b.nodeType) {
				var n = b.nodeValue;
				if (!n)
					return;
				i && (h += "\n", i = !1),
				h += n
			}
		}
		for (var h = "", i = !1; g(b), b != c; )
			b = b.nextSibling;
		return h
	}
	function la(a, b) {
		this.ranges = a,
		this.primIndex = b
	}
	function ma(a, b) {
		this.anchor = a,
		this.head = b
	}
	function na(a, b) {
		var c = a[b];
		a.sort(function (a, b) {
			return Gf(a.from(), b.from())
		}),
		b = De(a, c);
		for (var d = 1; d < a.length; d++) {
			var e = a[d],
			f = a[d - 1];
			if (Gf(f.to(), e.from()) >= 0) {
				var g = X(f.from(), e.from()),
				h = W(f.to(), e.to()),
				i = f.empty() ? e.from() == e.head : f.from() == f.head;
				d <= b && --b,
				a.splice(--d, 2, new ma(i ? h : g, i ? g : h))
			}
		}
		return new la(a, b)
	}
	function oa(a, b) {
		return new la([new ma(a, b || a)], 0)
	}
	function pa(a, b) {
		return Math.max(a.first, Math.min(b, a.first + a.size - 1))
	}
	function qa(a, b) {
		if (b.line < a.first)
			return Ff(a.first, 0);
		var c = a.first + a.size - 1;
		return b.line > c ? Ff(c, Vd(a, c).text.length) : ra(b, Vd(a, b.line).text.length)
	}
	function ra(a, b) {
		var c = a.ch;
		return null == c || c > b ? Ff(a.line, b) : c < 0 ? Ff(a.line, 0) : a
	}
	function sa(a, b) {
		return b >= a.first && b < a.first + a.size
	}
	function ta(a, b) {
		for (var c = [], d = 0; d < b.length; d++)
			c[d] = qa(a, b[d]);
		return c
	}
	function ua(a, b, c, d) {
		if (a.cm && a.cm.display.shift || a.extend) {
			var e = b.anchor;
			if (d) {
				var f = Gf(c, e) < 0;
				f != Gf(d, e) < 0 ? (e = c, c = d) : f != Gf(c, d) < 0 && (c = d)
			}
			return new ma(e, c)
		}
		return new ma(d || c, c)
	}
	function va(a, b, c, d) {
		Ba(a, new la([ua(a, a.sel.primary(), b, c)], 0), d)
	}
	function wa(a, b, c) {
		for (var d = [], e = 0; e < a.sel.ranges.length; e++)
			d[e] = ua(a, a.sel.ranges[e], b[e], null);
		var f = na(d, a.sel.primIndex);
		Ba(a, f, c)
	}
	function xa(a, b, c, d) {
		var e = a.sel.ranges.slice(0);
		e[b] = c,
		Ba(a, na(e, a.sel.primIndex), d)
	}
	function ya(a, b, c, d) {
		Ba(a, oa(b, c), d)
	}
	function za(a, b) {
		var c = {
			ranges: b.ranges,
			update: function (b) {
				this.ranges = [];
				for (var c = 0; c < b.length; c++)
					this.ranges[c] = new ma(qa(a, b[c].anchor), qa(a, b[c].head))
			}
		};
		return zg(a, "beforeSelectionChange", a, c),
		a.cm && zg(a.cm, "beforeSelectionChange", a.cm, c),
		c.ranges != b.ranges ? na(c.ranges, c.ranges.length - 1) : b
	}
	function Aa(a, b, c) {
		var d = a.history.done,
		e = Ce(d);
		e && e.ranges ? (d[d.length - 1] = b, Ca(a, b, c)) : Ba(a, b, c)
	}
	function Ba(a, b, c) {
		Ca(a, b, c),
		he(a, a.sel, a.cm ? a.cm.curOp.id : NaN, c)
	}
	function Ca(a, b, c) {
		(xe(a, "beforeSelectionChange") || a.cm && xe(a.cm, "beforeSelectionChange")) && (b = za(a, b));
		var d = c && c.bias || (Gf(b.primary().head, a.sel.primary().head) < 0 ? -1 : 1);
		Da(a, Fa(a, b, d, !0)),
		c && c.scroll === !1 || !a.cm || Ic(a.cm)
	}
	function Da(a, b) {
		b.equals(a.sel) || (a.sel = b, a.cm && (a.cm.curOp.updateInput = a.cm.curOp.selectionChanged = !0, we(a.cm)), te(a, "cursorActivity", a))
	}
	function Ea(a) {
		Da(a, Fa(a, a.sel, null, !1), Dg)
	}
	function Fa(a, b, c, d) {
		for (var e, f = 0; f < b.ranges.length; f++) {
			var g = b.ranges[f],
			h = Ga(a, g.anchor, c, d),
			i = Ga(a, g.head, c, d);
			(e || h != g.anchor || i != g.head) && (e || (e = b.ranges.slice(0, f)), e[f] = new ma(h, i))
		}
		return e ? na(e, b.primIndex) : b
	}
	function Ga(a, b, c, d) {
		var e = !1,
		f = b,
		g = c || 1;
		a.cantEdit = !1;
		a: for (; ; ) {
			var h = Vd(a, f.line);
			if (h.markedSpans)
				for (var i = 0; i < h.markedSpans.length; ++i) {
					var j = h.markedSpans[i],
					k = j.marker;
					if ((null == j.from || (k.inclusiveLeft ? j.from <= f.ch : j.from < f.ch)) && (null == j.to || (k.inclusiveRight ? j.to >= f.ch : j.to > f.ch))) {
						if (d && (zg(k, "beforeCursorEnter"), k.explicitlyCleared)) {
							if (h.markedSpans) {
								--i;
								continue
							}
							break
						}
						if (!k.atomic)
							continue;
						var l = k.find(g < 0 ? -1 : 1);
						if (0 == Gf(l, f) && (l.ch += g, l.ch < 0 ? l = l.line > a.first ? qa(a, Ff(l.line - 1)) : null : l.ch > h.text.length && (l = l.line < a.first + a.size - 1 ? Ff(l.line + 1, 0) : null), !l)) {
							if (e)
								return d ? (a.cantEdit = !0, Ff(a.first, 0)) : Ga(a, b, c, !0);
							e = !0,
							l = b,
							g = -g
						}
						f = l;
						continue a
					}
				}
			return f
		}
	}
	function Ha(a) {
		a.display.input.showSelection(a.display.input.prepareSelection())
	}
	function Ia(a, b) {
		for (var c = a.doc, d = {}, e = d.cursors = document.createDocumentFragment(), f = d.selection = document.createDocumentFragment(), g = 0; g < c.sel.ranges.length; g++)
			if (b !== !1 || g != c.sel.primIndex) {
				var h = c.sel.ranges[g],
				i = h.empty();
				(i || a.options.showCursorWhenSelecting) && Ja(a, h, e),
				i || Ka(a, h, f)
			}
		return d
	}
	function Ja(a, b, c) {
		var d = mb(a, b.head, "div", null, null, !a.options.singleCursorHeightPerLine),
		e = c.appendChild(Me("div", " ", "CodeMirror-cursor"));
		if (e.style.left = d.left + "px", e.style.top = d.top + "px", e.style.height = Math.max(0, d.bottom - d.top) * a.options.cursorHeight + "px", d.other) {
			var f = c.appendChild(Me("div", " ", "CodeMirror-cursor CodeMirror-secondarycursor"));
			f.style.display = "",
			f.style.left = d.other.left + "px",
			f.style.top = d.other.top + "px",
			f.style.height = .85 * (d.other.bottom - d.other.top) + "px"
		}
	}
	function Ka(a, b, c) {
		function d(a, b, c, d) {
			b < 0 && (b = 0),
			b = Math.round(b),
			d = Math.round(d),
			h.appendChild(Me("div", null, "CodeMirror-selected", "position: absolute; left: " + a + "px; top: " + b + "px; width: " + (null == c ? k - a : c) + "px; height: " + (d - b) + "px"))
		}
		function e(b, c, e) {
			function f(c, d) {
				return lb(a, Ff(b, c), "div", l, d)
			}
			var h,
			i,
			l = Vd(g, b),
			m = l.text.length;
			return Ye(ae(l), c || 0, null == e ? m : e, function (a, b, g) {
				var l,
				n,
				o,
				p = f(a, "left");
				if (a == b)
					l = p, n = o = p.left;
				else {
					if (l = f(b - 1, "right"), "rtl" == g) {
						var q = p;
						p = l,
						l = q
					}
					n = p.left,
					o = l.right
				}
				null == c && 0 == a && (n = j),
				l.top - p.top > 3 && (d(n, p.top, null, p.bottom), n = j, p.bottom < l.top && d(n, p.bottom, null, l.top)),
				null == e && b == m && (o = k),
				(!h || p.top < h.top || p.top == h.top && p.left < h.left) && (h = p),
				(!i || l.bottom > i.bottom || l.bottom == i.bottom && l.right > i.right) && (i = l),
				n < j + 1 && (n = j),
				d(n, l.top, o - n, l.bottom)
			}), {
				start: h,
				end: i
			}
		}
		var f = a.display,
		g = a.doc,
		h = document.createDocumentFragment(),
		i = Sa(a.display),
		j = i.left,
		k = Math.max(f.sizerWidth, Ua(a) - f.sizer.offsetLeft) - i.right,
		l = b.from(),
		m = b.to();
		if (l.line == m.line)
			e(l.line, l.ch, m.ch);
		else {
			var n = Vd(g, l.line),
			o = Vd(g, m.line),
			p = od(n) == od(o),
			q = e(l.line, l.ch, p ? n.text.length + 1 : null).end,
			r = e(m.line, p ? 0 : null, m.ch).start;
			p && (q.top < r.top - 2 ? (d(q.right, q.top, null, q.bottom), d(j, r.top, r.left, r.bottom)) : d(q.right, q.top, r.left - q.right, q.bottom)),
			q.bottom < r.top && d(j, q.bottom, null, r.top)
		}
		c.appendChild(h)
	}
	function La(a) {
		if (a.state.focused) {
			var b = a.display;
			clearInterval(b.blinker);
			var c = !0;
			b.cursorDiv.style.visibility = "",
			a.options.cursorBlinkRate > 0 ? b.blinker = setInterval(function () {
					b.cursorDiv.style.visibility = (c = !c) ? "" : "hidden"
				}, a.options.cursorBlinkRate) : a.options.cursorBlinkRate < 0 && (b.cursorDiv.style.visibility = "hidden")
		}
	}
	function Ma(a, b) {
		a.doc.mode.startState && a.doc.frontier < a.display.viewTo && a.state.highlight.set(b, Ie(Na, a))
	}
	function Na(a) {
		var b = a.doc;
		if (b.frontier < b.first && (b.frontier = b.first), !(b.frontier >= a.display.viewTo)) {
			var c = +new Date + a.options.workTime,
			d = bg(b.mode, Pa(a, b.frontier)),
			e = [];
			b.iter(b.frontier, Math.min(b.first + b.size, a.display.viewTo + 500), function (f) {
				if (b.frontier >= a.display.viewFrom) {
					var g = f.styles,
					h = Ed(a, f, d, !0);
					f.styles = h.styles;
					var i = f.styleClasses,
					j = h.classes;
					j ? f.styleClasses = j : i && (f.styleClasses = null);
					for (var k = !g || g.length != f.styles.length || i != j && (!i || !j || i.bgClass != j.bgClass || i.textClass != j.textClass), l = 0; !k && l < g.length; ++l)
						k = g[l] != f.styles[l];
					k && e.push(b.frontier),
					f.stateAfter = bg(b.mode, d)
				} else
					Gd(a, f.text, d), f.stateAfter = b.frontier % 5 == 0 ? bg(b.mode, d) : null;
				if (++b.frontier, +new Date > c)
					return Ma(a, a.options.workDelay), !0
			}),
			e.length && Cb(a, function () {
				for (var b = 0; b < e.length; b++)
					Jb(a, e[b], "text")
			})
		}
	}
	function Oa(a, b, c) {
		for (var d, e, f = a.doc, g = c ? -1 : b - (a.doc.mode.innerMode ? 1e3 : 100), h = b; h > g; --h) {
			if (h <= f.first)
				return f.first;
			var i = Vd(f, h - 1);
			if (i.stateAfter && (!c || h <= f.frontier))
				return h;
			var j = Gg(i.text, null, a.options.tabSize);
			(null == e || d > j) && (e = h - 1, d = j)
		}
		return e
	}
	function Pa(a, b, c) {
		var d = a.doc,
		e = a.display;
		if (!d.mode.startState)
			return !0;
		var f = Oa(a, b, c),
		g = f > d.first && Vd(d, f - 1).stateAfter;
		return g = g ? bg(d.mode, g) : cg(d.mode),
		d.iter(f, b, function (c) {
			Gd(a, c.text, g);
			var h = f == b - 1 || f % 5 == 0 || f >= e.viewFrom && f < e.viewTo;
			c.stateAfter = h ? bg(d.mode, g) : null,
			++f
		}),
		c && (d.frontier = f),
		g
	}
	function Qa(a) {
		return a.lineSpace.offsetTop
	}
	function Ra(a) {
		return a.mover.offsetHeight - a.lineSpace.offsetHeight
	}
	function Sa(a) {
		if (a.cachedPaddingH)
			return a.cachedPaddingH;
		var b = Oe(a.measure, Me("pre", "x")),
		c = window.getComputedStyle ? window.getComputedStyle(b) : b.currentStyle,
		d = {
			left: parseInt(c.paddingLeft),
			right: parseInt(c.paddingRight)
		};
		return isNaN(d.left) || isNaN(d.right) || (a.cachedPaddingH = d),
		d
	}
	function Ta(a) {
		return Bg - a.display.nativeBarWidth
	}
	function Ua(a) {
		return a.display.scroller.clientWidth - Ta(a) - a.display.barWidth
	}
	function Va(a) {
		return a.display.scroller.clientHeight - Ta(a) - a.display.barHeight
	}
	function Wa(a, b, c) {
		var d = a.options.lineWrapping,
		e = d && Ua(a);
		if (!b.measure.heights || d && b.measure.width != e) {
			var f = b.measure.heights = [];
			if (d) {
				b.measure.width = e;
				for (var g = b.text.firstChild.getClientRects(), h = 0; h < g.length - 1; h++) {
					var i = g[h],
					j = g[h + 1];
					Math.abs(i.bottom - j.bottom) > 2 && f.push((i.bottom + j.top) / 2 - c.top)
				}
			}
			f.push(c.bottom - c.top)
		}
	}
	function Xa(a, b, c) {
		if (a.line == b)
			return {
				map: a.measure.map,
				cache: a.measure.cache
			};
		for (var d = 0; d < a.rest.length; d++)
			if (a.rest[d] == b)
				return {
					map: a.measure.maps[d],
					cache: a.measure.caches[d]
				};
		for (var d = 0; d < a.rest.length; d++)
			if (Zd(a.rest[d]) > c)
				return {
					map: a.measure.maps[d],
					cache: a.measure.caches[d],
					before: !0
				}
	}
	function Ya(a, b) {
		b = od(b);
		var c = Zd(b),
		d = a.display.externalMeasured = new Gb(a.doc, b, c);
		d.lineN = c;
		var e = d.built = Id(a, d);
		return d.text = e.pre,
		Oe(a.display.lineMeasure, e.pre),
		d
	}
	function Za(a, b, c, d) {
		return ab(a, _a(a, b), c, d)
	}
	function $a(a, b) {
		if (b >= a.display.viewFrom && b < a.display.viewTo)
			return a.display.view[Lb(a, b)];
		var c = a.display.externalMeasured;
		return c && b >= c.lineN && b < c.lineN + c.size ? c : void 0
	}
	function _a(a, b) {
		var c = Zd(b),
		d = $a(a, c);
		d && !d.text ? d = null : d && d.changes && J(a, d, c, H(a)),
		d || (d = Ya(a, b));
		var e = Xa(d, b, c);
		return {
			line: b,
			view: d,
			rect: null,
			map: e.map,
			cache: e.cache,
			before: e.before,
			hasHeights: !1
		}
	}
	function ab(a, b, c, d, e) {
		b.before && (c = -1);
		var f,
		g = c + (d || "");
		return b.cache.hasOwnProperty(g) ? f = b.cache[g] : (b.rect || (b.rect = b.view.text.getBoundingClientRect()), b.hasHeights || (Wa(a, b.view, b.rect), b.hasHeights = !0), f = cb(a, b, c, d), f.bogus || (b.cache[g] = f)), {
			left: f.left,
			right: f.right,
			top: e ? f.rtop : f.top,
			bottom: e ? f.rbottom : f.bottom
		}
	}
	function bb(a, b, c) {
		for (var d, e, f, g, h = 0; h < a.length; h += 3) {
			var i = a[h],
			j = a[h + 1];
			if (b < i ? (e = 0, f = 1, g = "left") : b < j ? (e = b - i, f = e + 1) : (h == a.length - 3 || b == j && a[h + 3] > b) && (f = j - i, e = f - 1, b >= j && (g = "right")), null != e) {
				if (d = a[h + 2], i == j && c == (d.insertLeft ? "left" : "right") && (g = c), "left" == c && 0 == e)
					for (; h && a[h - 2] == a[h - 3] && a[h - 1].insertLeft; )
						d = a[(h -= 3) + 2], g = "left";
				if ("right" == c && e == j - i)
					for (; h < a.length - 3 && a[h + 3] == a[h + 4] && !a[h + 5].insertLeft; )
						d = a[(h += 3) + 2], g = "right";
				break
			}
		}
		return {
			node: d,
			start: e,
			end: f,
			collapse: g,
			coverStart: i,
			coverEnd: j
		}
	}
	function cb(a, b, c, d) {
		var e,
		f = bb(b.map, c, d),
		g = f.node,
		h = f.start,
		i = f.end,
		j = f.collapse;
		if (3 == g.nodeType) {
			for (var k = 0; k < 4; k++) {
				for (; h && Le(b.line.text.charAt(f.coverStart + h)); )
					--h;
				for (; f.coverStart + i < f.coverEnd && Le(b.line.text.charAt(f.coverStart + i)); )
					++i;
				if (nf && of < 9 && 0 == h && i == f.coverEnd - f.coverStart)
					e = g.parentNode.getBoundingClientRect();
				else if (nf && a.options.lineWrapping) {
					var l = Jg(g, h, i).getClientRects();
					e = l.length ? l["right" == d ? l.length - 1 : 0] : Lf
				} else
					e = Jg(g, h, i).getBoundingClientRect() || Lf;
				if (e.left || e.right || 0 == h)
					break;
				i = h,
				h -= 1,
				j = "right"
			}
			nf && of < 11 && (e = db(a.display.measure, e))
		} else {
			h > 0 && (j = d = "right");
			var l;
			e = a.options.lineWrapping && (l = g.getClientRects()).length > 1 ? l["right" == d ? l.length - 1 : 0] : g.getBoundingClientRect()
		}
		if (nf && of < 9 && !h && (!e || !e.left && !e.right)) {
			var m = g.parentNode.getClientRects()[0];
			e = m ? {
				left: m.left,
				right: m.left + sb(a.display),
				top: m.top,
				bottom: m.bottom
			}
			 : Lf
		}
		for (var n = e.top - b.rect.top, o = e.bottom - b.rect.top, p = (n + o) / 2, q = b.view.measure.heights, k = 0; k < q.length - 1 && !(p < q[k]); k++);
		var r = k ? q[k - 1] : 0,
		s = q[k],
		t = {
			left: ("right" == j ? e.right : e.left) - b.rect.left,
			right: ("left" == j ? e.left : e.right) - b.rect.left,
			top: r,
			bottom: s
		};
		return e.left || e.right || (t.bogus = !0),
		a.options.singleCursorHeightPerLine || (t.rtop = n, t.rbottom = o),
		t
	}
	function db(a, b) {
		if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !Xe(a))
			return b;
		var c = screen.logicalXDPI / screen.deviceXDPI,
		d = screen.logicalYDPI / screen.deviceYDPI;
		return {
			left: b.left * c,
			right: b.right * c,
			top: b.top * d,
			bottom: b.bottom * d
		}
	}
	function eb(a) {
		if (a.measure && (a.measure.cache = {}, a.measure.heights = null, a.rest))
			for (var b = 0; b < a.rest.length; b++)
				a.measure.caches[b] = {}
	}
	function fb(a) {
		a.display.externalMeasure = null,
		Ne(a.display.lineMeasure);
		for (var b = 0; b < a.display.view.length; b++)
			eb(a.display.view[b])
	}
	function gb(a) {
		fb(a),
		a.display.cachedCharWidth = a.display.cachedTextHeight = a.display.cachedPaddingH = null,
		a.options.lineWrapping || (a.display.maxLineChanged = !0),
		a.display.lineNumChars = null
	}
	function hb() {
		return window.pageXOffset || (document.documentElement || document.body).scrollLeft
	}
	function ib() {
		return window.pageYOffset || (document.documentElement || document.body).scrollTop
	}
	function jb(a, b, c, d) {
		if (b.widgets)
			for (var e = 0; e < b.widgets.length; ++e)
				if (b.widgets[e].above) {
					var f = vd(b.widgets[e]);
					c.top += f,
					c.bottom += f
				}
		if ("line" == d)
			return c;
		d || (d = "local");
		var g = _d(b);
		if ("local" == d ? g += Qa(a.display) : g -= a.display.viewOffset, "page" == d || "window" == d) {
			var h = a.display.lineSpace.getBoundingClientRect();
			g += h.top + ("window" == d ? 0 : ib());
			var i = h.left + ("window" == d ? 0 : hb());
			c.left += i,
			c.right += i
		}
		return c.top += g,
		c.bottom += g,
		c
	}
	function kb(a, b, c) {
		if ("div" == c)
			return b;
		var d = b.left,
		e = b.top;
		if ("page" == c)
			d -= hb(), e -= ib();
		else if ("local" == c || !c) {
			var f = a.display.sizer.getBoundingClientRect();
			d += f.left,
			e += f.top
		}
		var g = a.display.lineSpace.getBoundingClientRect();
		return {
			left: d - g.left,
			top: e - g.top
		}
	}
	function lb(a, b, c, d, e) {
		return d || (d = Vd(a.doc, b.line)),
		jb(a, d, Za(a, d, b.ch, e), c)
	}
	function mb(a, b, c, d, e, f) {
		function g(b, g) {
			var h = ab(a, e, b, g ? "right" : "left", f);
			return g ? h.left = h.right : h.right = h.left,
			jb(a, d, h, c)
		}
		function h(a, b) {
			var c = i[b],
			d = c.level % 2;
			return a == Ze(c) && b && c.level < i[b - 1].level ? (c = i[--b], a = $e(c) - (c.level % 2 ? 0 : 1), d = !0) : a == $e(c) && b < i.length - 1 && c.level < i[b + 1].level && (c = i[++b], a = Ze(c) - c.level % 2, d = !1),
			d && a == c.to && a > c.from ? g(a - 1) : g(a, d)
		}
		d = d || Vd(a.doc, b.line),
		e || (e = _a(a, d));
		var i = ae(d),
		j = b.ch;
		if (!i)
			return g(j);
		var k = ff(i, j),
		l = h(j, k);
		return null != Zg && (l.other = h(j, Zg)),
		l
	}
	function nb(a, b) {
		var c = 0,
		b = qa(a.doc, b);
		a.options.lineWrapping || (c = sb(a.display) * b.ch);
		var d = Vd(a.doc, b.line),
		e = _d(d) + Qa(a.display);
		return {
			left: c,
			right: c,
			top: e,
			bottom: e + d.height
		}
	}
	function ob(a, b, c, d) {
		var e = Ff(a, b);
		return e.xRel = d,
		c && (e.outside = !0),
		e
	}
	function pb(a, b, c) {
		var d = a.doc;
		if (c += a.display.viewOffset, c < 0)
			return ob(d.first, 0, !0, -1);
		var e = $d(d, c),
		f = d.first + d.size - 1;
		if (e > f)
			return ob(d.first + d.size - 1, Vd(d, f).text.length, !0, 1);
		b < 0 && (b = 0);
		for (var g = Vd(d, e); ; ) {
			var h = qb(a, g, e, b, c),
			i = md(g),
			j = i && i.find(0, !0);
			if (!i || !(h.ch > j.from.ch || h.ch == j.from.ch && h.xRel > 0))
				return h;
			e = Zd(g = j.to.line)
		}
	}
	function qb(a, b, c, d, e) {
		function f(d) {
			var e = mb(a, Ff(c, d), "line", b, j);
			return h = !0,
			g > e.bottom ? e.left - i : g < e.top ? e.left + i : (h = !1, e.left)
		}
		var g = e - _d(b),
		h = !1,
		i = 2 * a.display.wrapper.clientWidth,
		j = _a(a, b),
		k = ae(b),
		l = b.text.length,
		m = _e(b),
		n = af(b),
		o = f(m),
		p = h,
		q = f(n),
		r = h;
		if (d > q)
			return ob(c, n, r, 1);
		for (; ; ) {
			if (k ? n == m || n == hf(b, m, 1) : n - m <= 1) {
				for (var s = d < o || d - o <= q - d ? m : n, t = d - (s == m ? o : q); Le(b.text.charAt(s)); )
					++s;
				var u = ob(c, s, s == m ? p : r, t < -1 ? -1 : t > 1 ? 1 : 0);
				return u
			}
			var v = Math.ceil(l / 2),
			w = m + v;
			if (k) {
				w = m;
				for (var x = 0; x < v; ++x)
					w = hf(b, w, 1)
			}
			var y = f(w);
			y > d ? (n = w, q = y, (r = h) && (q += 1e3), l = v) : (m = w, o = y, p = h, l -= v)
		}
	}
	function rb(a) {
		if (null != a.cachedTextHeight)
			return a.cachedTextHeight;
		if (null == If) {
			If = Me("pre");
			for (var b = 0; b < 49; ++b)
				If.appendChild(document.createTextNode("x")), If.appendChild(Me("br"));
			If.appendChild(document.createTextNode("x"))
		}
		Oe(a.measure, If);
		var c = If.offsetHeight / 50;
		return c > 3 && (a.cachedTextHeight = c),
		Ne(a.measure),
		c || 1
	}
	function sb(a) {
		if (null != a.cachedCharWidth)
			return a.cachedCharWidth;
		var b = Me("span", "xxxxxxxxxx"),
		c = Me("pre", [b]);
		Oe(a.measure, c);
		var d = b.getBoundingClientRect(),
		e = (d.right - d.left) / 10;
		return e > 2 && (a.cachedCharWidth = e),
		e || 10
	}
	function tb(a) {
		a.curOp = {
			cm: a,
			viewChanged: !1,
			startHeight: a.doc.height,
			forceUpdate: !1,
			updateInput: null,
			typing: !1,
			changeObjs: null,
			cursorActivityHandlers: null,
			cursorActivityCalled: 0,
			selectionChanged: !1,
			updateMaxLine: !1,
			scrollLeft: null,
			scrollTop: null,
			scrollToPos: null,
			focus: !1,
			id: ++Nf
		},
		Mf ? Mf.ops.push(a.curOp) : a.curOp.ownsGroup = Mf = {
			ops: [a.curOp],
			delayedCallbacks: []
		}
	}
	function ub(a) {
		var b = a.delayedCallbacks,
		c = 0;
		do {
			for (; c < b.length; c++)
				b[c]();
			for (var d = 0; d < a.ops.length; d++) {
				var e = a.ops[d];
				if (e.cursorActivityHandlers)
					for (; e.cursorActivityCalled < e.cursorActivityHandlers.length; )
						e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)
			}
		} while (c < b.length)
	}
	function vb(a) {
		var b = a.curOp,
		c = b.ownsGroup;
		if (c)
			try {
				ub(c)
			}
		finally {
			Mf = null;
			for (var d = 0; d < c.ops.length; d++)
				c.ops[d].cm.curOp = null;
			wb(c)
		}
	}
	function wb(a) {
		for (var b = a.ops, c = 0; c < b.length; c++)
			xb(b[c]);
		for (var c = 0; c < b.length; c++)
			yb(b[c]);
		for (var c = 0; c < b.length; c++)
			zb(b[c]);
		for (var c = 0; c < b.length; c++)
			Ab(b[c]);
		for (var c = 0; c < b.length; c++)
			Bb(b[c])
	}
	function xb(a) {
		var b = a.cm,
		c = b.display;
		A(b),
		a.updateMaxLine && m(b),
		a.mustUpdate = a.viewChanged || a.forceUpdate || null != a.scrollTop || a.scrollToPos && (a.scrollToPos.from.line < c.viewFrom || a.scrollToPos.to.line >= c.viewTo) || c.maxLineChanged && b.options.lineWrapping,
		a.update = a.mustUpdate && new z(b, a.mustUpdate && {
				top: a.scrollTop,
				ensure: a.scrollToPos
			}, a.forceUpdate)
	}
	function yb(a) {
		a.updatedDisplay = a.mustUpdate && B(a.cm, a.update)
	}
	function zb(a) {
		var b = a.cm,
		c = b.display;
		a.updatedDisplay && F(b),
		a.barMeasure = o(b),
		c.maxLineChanged && !b.options.lineWrapping && (a.adjustWidthTo = Za(b, c.maxLine, c.maxLine.text.length).left + 3, b.display.sizerWidth = a.adjustWidthTo, a.barMeasure.scrollWidth = Math.max(c.scroller.clientWidth, c.sizer.offsetLeft + a.adjustWidthTo + Ta(b) + b.display.barWidth), a.maxScrollLeft = Math.max(0, c.sizer.offsetLeft + a.adjustWidthTo - Ua(b))),
		(a.updatedDisplay || a.selectionChanged) && (a.preparedSelection = c.input.prepareSelection())
	}
	function Ab(a) {
		var b = a.cm;
		null != a.adjustWidthTo && (b.display.sizer.style.minWidth = a.adjustWidthTo + "px", a.maxScrollLeft < b.doc.scrollLeft && bc(b, Math.min(b.display.scroller.scrollLeft, a.maxScrollLeft), !0), b.display.maxLineChanged = !1),
		a.preparedSelection && b.display.input.showSelection(a.preparedSelection),
		a.updatedDisplay && E(b, a.barMeasure),
		(a.updatedDisplay || a.startHeight != b.doc.height) && s(b, a.barMeasure),
		a.selectionChanged && La(b),
		b.state.focused && a.updateInput && b.display.input.reset(a.typing),
		a.focus && a.focus == Pe() && Y(a.cm)
	}
	function Bb(a) {
		var b = a.cm,
		c = b.display,
		d = b.doc;
		if (a.updatedDisplay && C(b, a.update), null == c.wheelStartX || null == a.scrollTop && null == a.scrollLeft && !a.scrollToPos || (c.wheelStartX = c.wheelStartY = null), null == a.scrollTop || c.scroller.scrollTop == a.scrollTop && !a.forceScroll || (d.scrollTop = Math.max(0, Math.min(c.scroller.scrollHeight - c.scroller.clientHeight, a.scrollTop)), c.scrollbars.setScrollTop(d.scrollTop), c.scroller.scrollTop = d.scrollTop), null == a.scrollLeft || c.scroller.scrollLeft == a.scrollLeft && !a.forceScroll || (d.scrollLeft = Math.max(0, Math.min(c.scroller.scrollWidth - Ua(b), a.scrollLeft)), c.scrollbars.setScrollLeft(d.scrollLeft), c.scroller.scrollLeft = d.scrollLeft, v(b)), a.scrollToPos) {
			var e = Ec(b, qa(d, a.scrollToPos.from), qa(d, a.scrollToPos.to), a.scrollToPos.margin);
			a.scrollToPos.isCursor && b.state.focused && Dc(b, e)
		}
		var f = a.maybeHiddenMarkers,
		g = a.maybeUnhiddenMarkers;
		if (f)
			for (var h = 0; h < f.length; ++h)
				f[h].lines.length || zg(f[h], "hide");
		if (g)
			for (var h = 0; h < g.length; ++h)
				g[h].lines.length && zg(g[h], "unhide");
		c.wrapper.offsetHeight && (d.scrollTop = b.display.scroller.scrollTop),
		a.changeObjs && zg(b, "changes", b, a.changeObjs),
		a.update && a.update.finish()
	}
	function Cb(a, b) {
		if (a.curOp)
			return b();
		tb(a);
		try {
			return b()
		}
		finally {
			vb(a)
		}
	}
	function Db(a, b) {
		return function () {
			if (a.curOp)
				return b.apply(a, arguments);
			tb(a);
			try {
				return b.apply(a, arguments)
			}
			finally {
				vb(a)
			}
		}
	}
	function Eb(a) {
		return function () {
			if (this.curOp)
				return a.apply(this, arguments);
			tb(this);
			try {
				return a.apply(this, arguments)
			}
			finally {
				vb(this)
			}
		}
	}
	function Fb(a) {
		return function () {
			var b = this.cm;
			if (!b || b.curOp)
				return a.apply(this, arguments);
			tb(b);
			try {
				return a.apply(this, arguments)
			}
			finally {
				vb(b)
			}
		}
	}
	function Gb(a, b, c) {
		this.line = b,
		this.rest = pd(b),
		this.size = this.rest ? Zd(Ce(this.rest)) - c + 1 : 1,
		this.node = this.text = null,
		this.hidden = sd(a, b)
	}
	function Hb(a, b, c) {
		for (var d, e = [], f = b; f < c; f = d) {
			var g = new Gb(a.doc, Vd(a.doc, f), f);
			d = f + g.size,
			e.push(g)
		}
		return e
	}
	function Ib(a, b, c, d) {
		null == b && (b = a.doc.first),
		null == c && (c = a.doc.first + a.doc.size),
		d || (d = 0);
		var e = a.display;
		if (d && c < e.viewTo && (null == e.updateLineNumbers || e.updateLineNumbers > b) && (e.updateLineNumbers = b), a.curOp.viewChanged = !0, b >= e.viewTo)
			Ef && qd(a.doc, b) < e.viewTo && Kb(a);
		else if (c <= e.viewFrom)
			Ef && rd(a.doc, c + d) > e.viewFrom ? Kb(a) : (e.viewFrom += d, e.viewTo += d);
		else if (b <= e.viewFrom && c >= e.viewTo)
			Kb(a);
		else if (b <= e.viewFrom) {
			var f = Mb(a, c, c + d, 1);
			f ? (e.view = e.view.slice(f.index), e.viewFrom = f.lineN, e.viewTo += d) : Kb(a)
		} else if (c >= e.viewTo) {
			var f = Mb(a, b, b, -1);
			f ? (e.view = e.view.slice(0, f.index), e.viewTo = f.lineN) : Kb(a)
		} else {
			var g = Mb(a, b, b, -1),
			h = Mb(a, c, c + d, 1);
			g && h ? (e.view = e.view.slice(0, g.index).concat(Hb(a, g.lineN, h.lineN)).concat(e.view.slice(h.index)), e.viewTo += d) : Kb(a)
		}
		var i = e.externalMeasured;
		i && (c < i.lineN ? i.lineN += d : b < i.lineN + i.size && (e.externalMeasured = null))
	}
	function Jb(a, b, c) {
		a.curOp.viewChanged = !0;
		var d = a.display,
		e = a.display.externalMeasured;
		if (e && b >= e.lineN && b < e.lineN + e.size && (d.externalMeasured = null), !(b < d.viewFrom || b >= d.viewTo)) {
			var f = d.view[Lb(a, b)];
			if (null != f.node) {
				var g = f.changes || (f.changes = []);
				De(g, c) == -1 && g.push(c)
			}
		}
	}
	function Kb(a) {
		a.display.viewFrom = a.display.viewTo = a.doc.first,
		a.display.view = [],
		a.display.viewOffset = 0
	}
	function Lb(a, b) {
		if (b >= a.display.viewTo)
			return null;
		if (b -= a.display.viewFrom, b < 0)
			return null;
		for (var c = a.display.view, d = 0; d < c.length; d++)
			if (b -= c[d].size, b < 0)
				return d
	}
	function Mb(a, b, c, d) {
		var e,
		f = Lb(a, b),
		g = a.display.view;
		if (!Ef || c == a.doc.first + a.doc.size)
			return {
				index: f,
				lineN: c
			};
		for (var h = 0, i = a.display.viewFrom; h < f; h++)
			i += g[h].size;
		if (i != b) {
			if (d > 0) {
				if (f == g.length - 1)
					return null;
				e = i + g[f].size - b,
				f++
			} else
				e = i - b;
			b += e,
			c += e
		}
		for (; qd(a.doc, c) != c; ) {
			if (f == (d < 0 ? 0 : g.length - 1))
				return null;
			c += d * g[f - (d < 0 ? 1 : 0)].size,
			f += d
		}
		return {
			index: f,
			lineN: c
		}
	}
	function Nb(a, b, c) {
		var d = a.display,
		e = d.view;
		0 == e.length || b >= d.viewTo || c <= d.viewFrom ? (d.view = Hb(a, b, c), d.viewFrom = b) : (d.viewFrom > b ? d.view = Hb(a, b, d.viewFrom).concat(d.view) : d.viewFrom < b && (d.view = d.view.slice(Lb(a, b))), d.viewFrom = b, d.viewTo < c ? d.view = d.view.concat(Hb(a, d.viewTo, c)) : d.viewTo > c && (d.view = d.view.slice(0, Lb(a, c)))),
		d.viewTo = c
	}
	function Ob(a) {
		for (var b = a.display.view, c = 0, d = 0; d < b.length; d++) {
			var e = b[d];
			e.hidden || e.node && !e.changes || ++c
		}
		return c
	}
	function Pb(a) {
		function b() {
			e.activeTouch && (f = setTimeout(function () {
						e.activeTouch = null
					}, 1e3), g = e.activeTouch, g.end = +new Date)
		}
		function c(a) {
			if (1 != a.touches.length)
				return !1;
			var b = a.touches[0];
			return b.radiusX <= 1 && b.radiusY <= 1
		}
		function d(a, b) {
			if (null == b.left)
				return !0;
			var c = b.left - a.left,
			d = b.top - a.top;
			return c * c + d * d > 400
		}
		var e = a.display;
		xg(e.scroller, "mousedown", Db(a, Ub)),
		nf && of < 11 ? xg(e.scroller, "dblclick", Db(a, function (b) {
				if (!ve(a, b)) {
					var c = Tb(a, b);
					if (c && !Zb(a, b) && !Sb(a.display, b)) {
						ug(b);
						var d = a.findWordAt(c);
						va(a.doc, d.anchor, d.head)
					}
				}
			})) : xg(e.scroller, "dblclick", function (b) {
			ve(a, b) || ug(b)
		}),
		Cf || xg(e.scroller, "contextmenu", function (b) {
			pc(a, b)
		});
		var f,
		g = {
			end: 0
		};
		xg(e.scroller, "touchstart", function (a) {
			if (!c(a)) {
				clearTimeout(f);
				var b = +new Date;
				e.activeTouch = {
					start: b,
					moved: !1,
					prev: b - g.end <= 300 ? g : null
				},
				1 == a.touches.length && (e.activeTouch.left = a.touches[0].pageX, e.activeTouch.top = a.touches[0].pageY)
			}
		}),
		xg(e.scroller, "touchmove", function () {
			e.activeTouch && (e.activeTouch.moved = !0)
		}),
		xg(e.scroller, "touchend", function (c) {
			var f = e.activeTouch;
			if (f && !Sb(e, c) && null != f.left && !f.moved && new Date - f.start < 300) {
				var g,
				h = a.coordsChar(e.activeTouch, "page");
				g = !f.prev || d(f, f.prev) ? new ma(h, h) : !f.prev.prev || d(f, f.prev.prev) ? a.findWordAt(h) : new ma(Ff(h.line, 0), qa(a.doc, Ff(h.line + 1, 0))),
				a.setSelection(g.anchor, g.head),
				a.focus(),
				ug(c)
			}
			b()
		}),
		xg(e.scroller, "touchcancel", b),
		xg(e.scroller, "scroll", function () {
			e.scroller.clientHeight && (ac(a, e.scroller.scrollTop), bc(a, e.scroller.scrollLeft, !0), zg(a, "scroll", a))
		}),
		xg(e.scroller, "mousewheel", function (b) {
			cc(a, b)
		}),
		xg(e.scroller, "DOMMouseScroll", function (b) {
			cc(a, b)
		}),
		xg(e.wrapper, "scroll", function () {
			e.wrapper.scrollTop = e.wrapper.scrollLeft = 0
		}),
		e.dragFunctions = {
			simple: function (b) {
				ve(a, b) || wg(b)
			},
			start: function (b) {
				_b(a, b)
			},
			drop: Db(a, $b)
		};
		var h = e.input.getField();
		xg(h, "keyup", function (b) {
			kc.call(a, b)
		}),
		xg(h, "keydown", Db(a, ic)),
		xg(h, "keypress", Db(a, lc)),
		xg(h, "focus", Ie(nc, a)),
		xg(h, "blur", Ie(oc, a))
	}
	function Qb(b, c, d) {
		var e = d && d != a.Init;
		if (!c != !e) {
			var f = b.display.dragFunctions,
			g = c ? xg : yg;
			g(b.display.scroller, "dragstart", f.start),
			g(b.display.scroller, "dragenter", f.simple),
			g(b.display.scroller, "dragover", f.simple),
			g(b.display.scroller, "drop", f.drop)
		}
	}
	function Rb(a) {
		var b = a.display;
		b.lastWrapHeight == b.wrapper.clientHeight && b.lastWrapWidth == b.wrapper.clientWidth || (b.cachedCharWidth = b.cachedTextHeight = b.cachedPaddingH = null, b.scrollbarsClipped = !1, a.setSize())
	}
	function Sb(a, b) {
		for (var c = re(b); c != a.wrapper; c = c.parentNode)
			if (!c || 1 == c.nodeType && "true" == c.getAttribute("cm-ignore-events") || c.parentNode == a.sizer && c != a.mover)
				return !0
	}
	function Tb(a, b, c, d) {
		var e = a.display;
		if (!c && "true" == re(b).getAttribute("cm-not-content"))
			return null;
		var f,
		g,
		h = e.lineSpace.getBoundingClientRect();
		try {
			f = b.clientX - h.left,
			g = b.clientY - h.top
		} catch (a) {
			return null
		}
		var i,
		j = pb(a, f, g);
		if (d && 1 == j.xRel && (i = Vd(a.doc, j.line).text).length == j.ch) {
			var k = Gg(i, i.length, a.options.tabSize) - i.length;
			j = Ff(j.line, Math.max(0, Math.round((f - Sa(a.display).left) / sb(a.display)) - k))
		}
		return j
	}
	function Ub(a) {
		var b = this,
		c = b.display;
		if (!(c.activeTouch && c.input.supportsTouch() || ve(b, a))) {
			if (c.shift = a.shiftKey, Sb(c, a))
				return void(pf || (c.scroller.draggable = !1, setTimeout(function () {
							c.scroller.draggable = !0
						}, 100)));
			if (!Zb(b, a)) {
				var d = Tb(b, a);
				switch (window.focus(), se(a)) {
				case 1:
					d ? Vb(b, a, d) : re(a) == c.scroller && ug(a);
					break;
				case 2:
					pf && (b.state.lastMiddleDown = +new Date),
					d && va(b.doc, d),
					setTimeout(function () {
						c.input.focus()
					}, 20),
					ug(a);
					break;
				case 3:
					Cf ? pc(b, a) : mc(b)
				}
			}
		}
	}
	function Vb(a, b, c) {
		nf ? setTimeout(Ie(Y, a), 0) : a.curOp.focus = Pe();
		var d,
		e = +new Date;
		Kf && Kf.time > e - 400 && 0 == Gf(Kf.pos, c) ? d = "triple" : Jf && Jf.time > e - 400 && 0 == Gf(Jf.pos, c) ? (d = "double", Kf = {
					time: e,
					pos: c
				}) : (d = "single", Jf = {
					time: e,
					pos: c
				});
		var f,
		g = a.doc.sel,
		h = yf ? b.metaKey : b.ctrlKey;
		a.options.dragDrop && Tg && !Z(a) && "single" == d && (f = g.contains(c)) > -1 && (Gf((f = g.ranges[f]).from(), c) < 0 || c.xRel > 0) && (Gf(f.to(), c) > 0 || c.xRel < 0) ? Wb(a, b, c, h) : Xb(a, b, c, d, h)
	}
	function Wb(a, b, c, d) {
		var e = a.display,
		f = +new Date,
		g = Db(a, function (h) {
				pf && (e.scroller.draggable = !1),
				a.state.draggingText = !1,
				yg(document, "mouseup", g),
				yg(e.scroller, "drop", g),
				Math.abs(b.clientX - h.clientX) + Math.abs(b.clientY - h.clientY) < 10 && (ug(h), !d && +new Date - 200 < f && va(a.doc, c), pf || nf && 9 == of ? setTimeout(function () {
						document.body.focus(),
						e.input.focus()
					}, 20) : e.input.focus())
			});
		pf && (e.scroller.draggable = !0),
		a.state.draggingText = g,
		e.scroller.dragDrop && e.scroller.dragDrop(),
		xg(document, "mouseup", g),
		xg(e.scroller, "drop", g)
	}
	function Xb(a, b, c, d, e) {
		function f(b) {
			if (0 != Gf(q, b))
				if (q = b, "rect" == d) {
					for (var e = [], f = a.options.tabSize, g = Gg(Vd(j, c.line).text, c.ch, f), h = Gg(Vd(j, b.line).text, b.ch, f), i = Math.min(g, h), n = Math.max(g, h), o = Math.min(c.line, b.line), p = Math.min(a.lastLine(), Math.max(c.line, b.line)); o <= p; o++) {
						var r = Vd(j, o).text,
						s = Ae(r, i, f);
						i == n ? e.push(new ma(Ff(o, s), Ff(o, s))) : r.length > s && e.push(new ma(Ff(o, s), Ff(o, Ae(r, n, f))))
					}
					e.length || e.push(new ma(c, c)),
					Ba(j, na(m.ranges.slice(0, l).concat(e), l), {
						origin: "*mouse",
						scroll: !1
					}),
					a.scrollIntoView(b)
				} else {
					var t = k,
					u = t.anchor,
					v = b;
					if ("single" != d) {
						if ("double" == d)
							var w = a.findWordAt(b);
						else
							var w = new ma(Ff(b.line, 0), qa(j, Ff(b.line + 1, 0)));
						Gf(w.anchor, u) > 0 ? (v = w.head, u = X(t.from(), w.anchor)) : (v = w.anchor, u = W(t.to(), w.head))
					}
					var e = m.ranges.slice(0);
					e[l] = new ma(qa(j, u), v),
					Ba(j, na(e, l), Eg)
				}
		}
		function g(b) {
			var c = ++s,
			e = Tb(a, b, !0, "rect" == d);
			if (e)
				if (0 != Gf(e, q)) {
					a.curOp.focus = Pe(),
					f(e);
					var h = u(i, j);
					(e.line >= h.to || e.line < h.from) && setTimeout(Db(a, function () {
							s == c && g(b)
						}), 150)
				} else {
					var k = b.clientY < r.top ? -20 : b.clientY > r.bottom ? 20 : 0;
					k && setTimeout(Db(a, function () {
							s == c && (i.scroller.scrollTop += k, g(b))
						}), 50)
				}
		}
		function h(a) {
			s = 1 / 0,
			ug(a),
			i.input.focus(),
			yg(document, "mousemove", t),
			yg(document, "mouseup", v),
			j.history.lastSelOrigin = null
		}
		var i = a.display,
		j = a.doc;
		ug(b);
		var k,
		l,
		m = j.sel,
		n = m.ranges;
		if (e && !b.shiftKey ? (l = j.sel.contains(c), k = l > -1 ? n[l] : new ma(c, c)) : (k = j.sel.primary(), l = j.sel.primIndex), b.altKey)
			d = "rect", e || (k = new ma(c, c)), c = Tb(a, b, !0, !0), l = -1;
		else if ("double" == d) {
			var o = a.findWordAt(c);
			k = a.display.shift || j.extend ? ua(j, k, o.anchor, o.head) : o
		} else if ("triple" == d) {
			var p = new ma(Ff(c.line, 0), qa(j, Ff(c.line + 1, 0)));
			k = a.display.shift || j.extend ? ua(j, k, p.anchor, p.head) : p
		} else
			k = ua(j, k, c);
		e ? l == -1 ? (l = n.length, Ba(j, na(n.concat([k]), l), {
				scroll: !1,
				origin: "*mouse"
			})) : n.length > 1 && n[l].empty() && "single" == d && !b.shiftKey ? (Ba(j, na(n.slice(0, l).concat(n.slice(l + 1)), 0)), m = j.sel) : xa(j, l, k, Eg) : (l = 0, Ba(j, new la([k], 0), Eg), m = j.sel);
		var q = c,
		r = i.wrapper.getBoundingClientRect(),
		s = 0,
		t = Db(a, function (a) {
				se(a) ? g(a) : h(a)
			}),
		v = Db(a, h);
		xg(document, "mousemove", t),
		xg(document, "mouseup", v)
	}
	function Yb(a, b, c, d, e) {
		try {
			var f = b.clientX,
			g = b.clientY
		} catch (a) {
			return !1
		}
		if (f >= Math.floor(a.display.gutters.getBoundingClientRect().right))
			return !1;
		d && ug(b);
		var h = a.display,
		i = h.lineDiv.getBoundingClientRect();
		if (g > i.bottom || !xe(a, c))
			return qe(b);
		g -= i.top - h.viewOffset;
		for (var j = 0; j < a.options.gutters.length; ++j) {
			var k = h.gutters.childNodes[j];
			if (k && k.getBoundingClientRect().right >= f) {
				var l = $d(a.doc, g),
				m = a.options.gutters[j];
				return e(a, c, a, l, m, b),
				qe(b)
			}
		}
	}
	function Zb(a, b) {
		return Yb(a, b, "gutterClick", !0, te)
	}
	function $b(a) {
		var b = this;
		if (!ve(b, a) && !Sb(b.display, a)) {
			ug(a),
			nf && (Of = +new Date);
			var c = Tb(b, a, !0),
			d = a.dataTransfer.files;
			if (c && !Z(b))
				if (d && d.length && window.FileReader && window.File)
					for (var e = d.length, f = Array(e), g = 0, h = function (a, d) {
						var h = new FileReader;
						h.onload = Db(b, function () {
								if (f[d] = h.result, ++g == e) {
									c = qa(b.doc, c);
									var a = {
										from: c,
										to: c,
										text: Ug(f.join("\n")),
										origin: "paste"
									};
									wc(b.doc, a),
									Aa(b.doc, oa(c, Uf(a)))
								}
							}),
						h.readAsText(a)
					}, i = 0; i < e; ++i)
						h(d[i], i);
				else {
					if (b.state.draggingText && b.doc.sel.contains(c) > -1)
						return b.state.draggingText(a), void setTimeout(function () {
							b.display.input.focus()
						}, 20);
					try {
						var f = a.dataTransfer.getData("Text");
						if (f) {
							if (b.state.draggingText && !(yf ? a.altKey : a.ctrlKey))
								var j = b.listSelections();
							if (Ca(b.doc, oa(c, c)), j)
								for (var i = 0; i < j.length; ++i)
									Cc(b.doc, "", j[i].anchor, j[i].head, "drag");
							b.replaceSelection(f, "around", "paste"),
							b.display.input.focus()
						}
					} catch (a) {}
				}
		}
	}
	function _b(a, b) {
		if (nf && (!a.state.draggingText || +new Date - Of < 100))
			return void wg(b);
		if (!ve(a, b) && !Sb(a.display, b) && (b.dataTransfer.setData("Text", a.getSelection()), b.dataTransfer.setDragImage && !tf)) {
			var c = Me("img", null, null, "position: fixed; left: 0; top: 0;");
			c.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",
			sf && (c.width = c.height = 1, a.display.wrapper.appendChild(c), c._top = c.offsetTop),
			b.dataTransfer.setDragImage(c, 0, 0),
			sf && c.parentNode.removeChild(c)
		}
	}
	function ac(a, b) {
		Math.abs(a.doc.scrollTop - b) < 2 || (a.doc.scrollTop = b, kf || D(a, {
				top: b
			}), a.display.scroller.scrollTop != b && (a.display.scroller.scrollTop = b), a.display.scrollbars.setScrollTop(b), kf && D(a), Ma(a, 100))
	}
	function bc(a, b, c) {
		(c ? b == a.doc.scrollLeft : Math.abs(a.doc.scrollLeft - b) < 2) || (b = Math.min(b, a.display.scroller.scrollWidth - a.display.scroller.clientWidth), a.doc.scrollLeft = b, v(a), a.display.scroller.scrollLeft != b && (a.display.scroller.scrollLeft = b), a.display.scrollbars.setScrollLeft(b))
	}
	function cc(a, b) {
		var c = Rf(b),
		d = c.x,
		e = c.y,
		f = a.display,
		g = f.scroller;
		if (d && g.scrollWidth > g.clientWidth || e && g.scrollHeight > g.clientHeight) {
			if (e && yf && pf)
				a: for (var h = b.target, i = f.view; h != g; h = h.parentNode)
					for (var j = 0; j < i.length; j++)
						if (i[j].node == h) {
							a.display.currentWheelTarget = h;
							break a
						}
			if (d && !kf && !sf && null != Qf)
				return e && ac(a, Math.max(0, Math.min(g.scrollTop + e * Qf, g.scrollHeight - g.clientHeight))), bc(a, Math.max(0, Math.min(g.scrollLeft + d * Qf, g.scrollWidth - g.clientWidth))), ug(b), void(f.wheelStartX = null);
			if (e && null != Qf) {
				var k = e * Qf,
				l = a.doc.scrollTop,
				m = l + f.wrapper.clientHeight;
				k < 0 ? l = Math.max(0, l + k - 50) : m = Math.min(a.doc.height, m + k + 50),
				D(a, {
					top: l,
					bottom: m
				})
			}
			Pf < 20 && (null == f.wheelStartX ? (f.wheelStartX = g.scrollLeft, f.wheelStartY = g.scrollTop, f.wheelDX = d, f.wheelDY = e, setTimeout(function () {
						if (null != f.wheelStartX) {
							var a = g.scrollLeft - f.wheelStartX,
							b = g.scrollTop - f.wheelStartY,
							c = b && f.wheelDY && b / f.wheelDY || a && f.wheelDX && a / f.wheelDX;
							f.wheelStartX = f.wheelStartY = null,
							c && (Qf = (Qf * Pf + c) / (Pf + 1), ++Pf)
						}
					}, 200)) : (f.wheelDX += d, f.wheelDY += e))
		}
	}
	function dc(a, b, c) {
		if ("string" == typeof b && (b = dg[b], !b))
			return !1;
		a.display.input.ensurePolled();
		var d = a.display.shift,
		e = !1;
		try {
			Z(a) && (a.state.suppressEdits = !0),
			c && (a.display.shift = !1),
			e = b(a) != Cg
		}
		finally {
			a.display.shift = d,
			a.state.suppressEdits = !1
		}
		return e
	}
	function ec(a, b, c) {
		for (var d = 0; d < a.state.keyMaps.length; d++) {
			var e = fg(b, a.state.keyMaps[d], c, a);
			if (e)
				return e
		}
		return a.options.extraKeys && fg(b, a.options.extraKeys, c, a) || fg(b, a.options.keyMap, c, a)
	}
	function fc(a, b, c, d) {
		var e = a.state.keySeq;
		if (e) {
			if (gg(b))
				return "handled";
			Sf.set(50, function () {
				a.state.keySeq == e && (a.state.keySeq = null, a.display.input.reset())
			}),
			b = e + " " + b
		}
		var f = ec(a, b, d);
		return "multi" == f && (a.state.keySeq = b),
		"handled" == f && te(a, "keyHandled", a, b, c),
		"handled" != f && "multi" != f || (ug(c), La(a)),
		e && !f && /\'$/.test(b) ? (ug(c), !0) : !!f
	}
	function gc(a, b) {
		var c = hg(b, !0);
		return !!c && (b.shiftKey && !a.state.keySeq ? fc(a, "Shift-" + c, b, function (b) {
				return dc(a, b, !0)
			}) || fc(a, c, b, function (b) {
				if ("string" == typeof b ? /^go[A-Z]/.test(b) : b.motion)
					return dc(a, b)
			}) : fc(a, c, b, function (b) {
				return dc(a, b)
			}))
	}
	function hc(a, b, c) {
		return fc(a, "'" + c + "'", b, function (b) {
			return dc(a, b, !0)
		})
	}
	function ic(a) {
		var b = this;
		if (b.curOp.focus = Pe(), !ve(b, a)) {
			nf && of < 11 && 27 == a.keyCode && (a.returnValue = !1);
			var c = a.keyCode;
			b.display.shift = 16 == c || a.shiftKey;
			var d = gc(b, a);
			sf && (Tf = d ? c : null, !d && 88 == c && !Wg && (yf ? a.metaKey : a.ctrlKey) && b.replaceSelection("", null, "cut")),
			18 != c || /\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className) || jc(b)
		}
	}
	function jc(a) {
		function b(a) {
			18 != a.keyCode && a.altKey || (Qg(c, "CodeMirror-crosshair"), yg(document, "keyup", b), yg(document, "mouseover", b))
		}
		var c = a.display.lineDiv;
		Rg(c, "CodeMirror-crosshair"),
		xg(document, "keyup", b),
		xg(document, "mouseover", b)
	}
	function kc(a) {
		16 == a.keyCode && (this.doc.sel.shift = !1),
		ve(this, a)
	}
	function lc(a) {
		var b = this;
		if (!(Sb(b.display, a) || ve(b, a) || a.ctrlKey && !a.altKey || yf && a.metaKey)) {
			var c = a.keyCode,
			d = a.charCode;
			if (sf && c == Tf)
				return Tf = null, void ug(a);
			if (!sf || a.which && !(a.which < 10) || !gc(b, a)) {
				var e = String.fromCharCode(null == d ? c : d);
				hc(b, a, e) || b.display.input.onKeyPress(a)
			}
		}
	}
	function mc(a) {
		a.state.delayingBlurEvent = !0,
		setTimeout(function () {
			a.state.delayingBlurEvent && (a.state.delayingBlurEvent = !1, oc(a))
		}, 100)
	}
	function nc(a) {
		a.state.delayingBlurEvent && (a.state.delayingBlurEvent = !1),
		"nocursor" != a.options.readOnly && (a.state.focused || (zg(a, "focus", a), a.state.focused = !0, Rg(a.display.wrapper, "CodeMirror-focused"), a.curOp || a.display.selForContextMenu == a.doc.sel || (a.display.input.reset(), pf && setTimeout(function () {
						a.display.input.reset(!0)
					}, 20)), a.display.input.receivedFocus()), La(a))
	}
	function oc(a) {
		a.state.delayingBlurEvent || (a.state.focused && (zg(a, "blur", a), a.state.focused = !1, Qg(a.display.wrapper, "CodeMirror-focused")), clearInterval(a.display.blinker), setTimeout(function () {
				a.state.focused || (a.display.shift = !1)
			}, 150))
	}
	function pc(a, b) {
		Sb(a.display, b) || qc(a, b) || a.display.input.onContextMenu(b)
	}
	function qc(a, b) {
		return !!xe(a, "gutterContextMenu") && Yb(a, b, "gutterContextMenu", !1, zg)
	}
	function rc(a, b) {
		if (Gf(a, b.from) < 0)
			return a;
		if (Gf(a, b.to) <= 0)
			return Uf(b);
		var c = a.line + b.text.length - (b.to.line - b.from.line) - 1,
		d = a.ch;
		return a.line == b.to.line && (d += Uf(b).ch - b.to.ch),
		Ff(c, d)
	}
	function sc(a, b) {
		for (var c = [], d = 0; d < a.sel.ranges.length; d++) {
			var e = a.sel.ranges[d];
			c.push(new ma(rc(e.anchor, b), rc(e.head, b)))
		}
		return na(c, a.sel.primIndex)
	}
	function tc(a, b, c) {
		return a.line == b.line ? Ff(c.line, a.ch - b.ch + c.ch) : Ff(c.line + (a.line - b.line), a.ch)
	}
	function uc(a, b, c) {
		for (var d = [], e = Ff(a.first, 0), f = e, g = 0; g < b.length; g++) {
			var h = b[g],
			i = tc(h.from, e, f),
			j = tc(Uf(h), e, f);
			if (e = h.to, f = j, "around" == c) {
				var k = a.sel.ranges[g],
				l = Gf(k.head, k.anchor) < 0;
				d[g] = new ma(l ? j : i, l ? i : j)
			} else
				d[g] = new ma(i, i)
		}
		return new la(d, a.sel.primIndex)
	}
	function vc(a, b, c) {
		var d = {
			canceled: !1,
			from: b.from,
			to: b.to,
			text: b.text,
			origin: b.origin,
			cancel: function () {
				this.canceled = !0
			}
		};
		return c && (d.update = function (b, c, d, e) {
			b && (this.from = qa(a, b)),
			c && (this.to = qa(a, c)),
			d && (this.text = d),
			void 0 !== e && (this.origin = e)
		}),
		zg(a, "beforeChange", a, d),
		a.cm && zg(a.cm, "beforeChange", a.cm, d),
		d.canceled ? null : {
			from: d.from,
			to: d.to,
			text: d.text,
			origin: d.origin
		}
	}
	function wc(a, b, c) {
		if (a.cm) {
			if (!a.cm.curOp)
				return Db(a.cm, wc)(a, b, c);
			if (a.cm.state.suppressEdits)
				return
		}
		if (!(xe(a, "beforeChange") || a.cm && xe(a.cm, "beforeChange")) || (b = vc(a, b, !0))) {
			var d = Df && !c && ed(a, b.from, b.to);
			if (d)
				for (var e = d.length - 1; e >= 0; --e)
					xc(a, {
						from: d[e].from,
						to: d[e].to,
						text: e ? [""] : b.text
					});
			else
				xc(a, b)
		}
	}
	function xc(a, b) {
		if (1 != b.text.length || "" != b.text[0] || 0 != Gf(b.from, b.to)) {
			var c = sc(a, b);
			fe(a, b, c, a.cm ? a.cm.curOp.id : NaN),
			Ac(a, b, c, bd(a, b));
			var d = [];
			Td(a, function (a, c) {
				c || De(d, a.history) != -1 || (pe(a.history, b), d.push(a.history)),
				Ac(a, b, null, bd(a, b))
			})
		}
	}
	function yc(a, b, c) {
		if (!a.cm || !a.cm.state.suppressEdits) {
			for (var d, e = a.history, f = a.sel, g = "undo" == b ? e.done : e.undone, h = "undo" == b ? e.undone : e.done, i = 0; i < g.length && (d = g[i], c ? !d.ranges || d.equals(a.sel) : d.ranges); i++);
			if (i != g.length) {
				for (e.lastOrigin = e.lastSelOrigin = null; d = g.pop(), d.ranges; ) {
					if (ie(d, h), c && !d.equals(a.sel))
						return void Ba(a, d, {
							clearRedo: !1
						});
					f = d
				}
				var j = [];
				ie(f, h),
				h.push({
					changes: j,
					generation: e.generation
				}),
				e.generation = d.generation || ++e.maxGeneration;
				for (var k = xe(a, "beforeChange") || a.cm && xe(a.cm, "beforeChange"), i = d.changes.length - 1; i >= 0; --i) {
					var l = d.changes[i];
					if (l.origin = b, k && !vc(a, l, !1))
						return void(g.length = 0);
					j.push(ce(a, l));
					var m = i ? sc(a, l) : Ce(g);
					Ac(a, l, m, dd(a, l)),
					!i && a.cm && a.cm.scrollIntoView({
						from: l.from,
						to: Uf(l)
					});
					var n = [];
					Td(a, function (a, b) {
						b || De(n, a.history) != -1 || (pe(a.history, l), n.push(a.history)),
						Ac(a, l, null, dd(a, l))
					})
				}
			}
		}
	}
	function zc(a, b) {
		if (0 != b && (a.first += b, a.sel = new la(Ee(a.sel.ranges, function (a) {
							return new ma(Ff(a.anchor.line + b, a.anchor.ch), Ff(a.head.line + b, a.head.ch))
						}), a.sel.primIndex), a.cm)) {
			Ib(a.cm, a.first, a.first - b, b);
			for (var c = a.cm.display, d = c.viewFrom; d < c.viewTo; d++)
				Jb(a.cm, d, "gutter")
		}
	}
	function Ac(a, b, c, d) {
		if (a.cm && !a.cm.curOp)
			return Db(a.cm, Ac)(a, b, c, d);
		if (b.to.line < a.first)
			return void zc(a, b.text.length - 1 - (b.to.line - b.from.line));
		if (!(b.from.line > a.lastLine())) {
			if (b.from.line < a.first) {
				var e = b.text.length - 1 - (a.first - b.from.line);
				zc(a, e),
				b = {
					from: Ff(a.first, 0),
					to: Ff(b.to.line + e, b.to.ch),
					text: [Ce(b.text)],
					origin: b.origin
				}
			}
			var f = a.lastLine();
			b.to.line > f && (b = {
					from: b.from,
					to: Ff(f, Vd(a, f).text.length),
					text: [b.text[0]],
					origin: b.origin
				}),
			b.removed = Wd(a, b.from, b.to),
			c || (c = sc(a, b)),
			a.cm ? Bc(a.cm, b, d) : Qd(a, b, d),
			Ca(a, c, Dg)
		}
	}
	function Bc(a, b, c) {
		var d = a.doc,
		e = a.display,
		g = b.from,
		h = b.to,
		i = !1,
		j = g.line;
		a.options.lineWrapping || (j = Zd(od(Vd(d, g.line))), d.iter(j, h.line + 1, function (a) {
				if (a == e.maxLine)
					return i = !0, !0
			})),
		d.sel.contains(b.from, b.to) > -1 && we(a),
		Qd(d, b, c, f(a)),
		a.options.lineWrapping || (d.iter(j, g.line + b.text.length, function (a) {
				var b = l(a);
				b > e.maxLineLength && (e.maxLine = a, e.maxLineLength = b, e.maxLineChanged = !0, i = !1)
			}), i && (a.curOp.updateMaxLine = !0)),
		d.frontier = Math.min(d.frontier, g.line),
		Ma(a, 400);
		var k = b.text.length - (h.line - g.line) - 1;
		b.full ? Ib(a) : g.line != h.line || 1 != b.text.length || Pd(a.doc, b) ? Ib(a, g.line, h.line + 1, k) : Jb(a, g.line, "text");
		var m = xe(a, "changes"),
		n = xe(a, "change");
		if (n || m) {
			var o = {
				from: g,
				to: h,
				text: b.text,
				removed: b.removed,
				origin: b.origin
			};
			n && te(a, "change", a, o),
			m && (a.curOp.changeObjs || (a.curOp.changeObjs = [])).push(o)
		}
		a.display.selForContextMenu = null
	}
	function Cc(a, b, c, d, e) {
		if (d || (d = c), Gf(d, c) < 0) {
			var f = d;
			d = c,
			c = f
		}
		"string" == typeof b && (b = Ug(b)),
		wc(a, {
			from: c,
			to: d,
			text: b,
			origin: e
		})
	}
	function Dc(a, b) {
		if (!ve(a, "scrollCursorIntoView")) {
			var c = a.display,
			d = c.sizer.getBoundingClientRect(),
			e = null;
			if (b.top + d.top < 0 ? e = !0 : b.bottom + d.top > (window.innerHeight || document.documentElement.clientHeight) && (e = !1), null != e && !vf) {
				var f = Me("div", "", null, "position: absolute; top: " + (b.top - c.viewOffset - Qa(a.display)) + "px; height: " + (b.bottom - b.top + Ta(a) + c.barHeight) + "px; left: " + b.left + "px; width: 2px;");
				a.display.lineSpace.appendChild(f),
				f.scrollIntoView(e),
				a.display.lineSpace.removeChild(f)
			}
		}
	}
	function Ec(a, b, c, d) {
		null == d && (d = 0);
		for (var e = 0; e < 5; e++) {
			var f = !1,
			g = mb(a, b),
			h = c && c != b ? mb(a, c) : g,
			i = Gc(a, Math.min(g.left, h.left), Math.min(g.top, h.top) - d, Math.max(g.left, h.left), Math.max(g.bottom, h.bottom) + d),
			j = a.doc.scrollTop,
			k = a.doc.scrollLeft;
			if (null != i.scrollTop && (ac(a, i.scrollTop), Math.abs(a.doc.scrollTop - j) > 1 && (f = !0)), null != i.scrollLeft && (bc(a, i.scrollLeft), Math.abs(a.doc.scrollLeft - k) > 1 && (f = !0)), !f)
				break
		}
		return g
	}
	function Fc(a, b, c, d, e) {
		var f = Gc(a, b, c, d, e);
		null != f.scrollTop && ac(a, f.scrollTop),
		null != f.scrollLeft && bc(a, f.scrollLeft)
	}
	function Gc(a, b, c, d, e) {
		var f = a.display,
		g = rb(a.display);
		c < 0 && (c = 0);
		var h = a.curOp && null != a.curOp.scrollTop ? a.curOp.scrollTop : f.scroller.scrollTop,
		i = Va(a),
		j = {};
		e - c > i && (e = c + i);
		var k = a.doc.height + Ra(f),
		l = c < g,
		m = e > k - g;
		if (c < h)
			j.scrollTop = l ? 0 : c;
		else if (e > h + i) {
			var n = Math.min(c, (m ? k : e) - i);
			n != h && (j.scrollTop = n)
		}
		var o = a.curOp && null != a.curOp.scrollLeft ? a.curOp.scrollLeft : f.scroller.scrollLeft,
		p = Ua(a) - (a.options.fixedGutter ? f.gutters.offsetWidth : 0),
		q = d - b > p;
		return q && (d = b + p),
		b < 10 ? j.scrollLeft = 0 : b < o ? j.scrollLeft = Math.max(0, b - (q ? 0 : 10)) : d > p + o - 3 && (j.scrollLeft = d + (q ? 0 : 10) - p),
		j
	}
	function Hc(a, b, c) {
		null == b && null == c || Jc(a),
		null != b && (a.curOp.scrollLeft = (null == a.curOp.scrollLeft ? a.doc.scrollLeft : a.curOp.scrollLeft) + b),
		null != c && (a.curOp.scrollTop = (null == a.curOp.scrollTop ? a.doc.scrollTop : a.curOp.scrollTop) + c)
	}
	function Ic(a) {
		Jc(a);
		var b = a.getCursor(),
		c = b,
		d = b;
		a.options.lineWrapping || (c = b.ch ? Ff(b.line, b.ch - 1) : b, d = Ff(b.line, b.ch + 1)),
		a.curOp.scrollToPos = {
			from: c,
			to: d,
			margin: a.options.cursorScrollMargin,
			isCursor: !0
		}
	}
	function Jc(a) {
		var b = a.curOp.scrollToPos;
		if (b) {
			a.curOp.scrollToPos = null;
			var c = nb(a, b.from),
			d = nb(a, b.to),
			e = Gc(a, Math.min(c.left, d.left), Math.min(c.top, d.top) - b.margin, Math.max(c.right, d.right), Math.max(c.bottom, d.bottom) + b.margin);
			a.scrollTo(e.scrollLeft, e.scrollTop)
		}
	}
	function Kc(a, b, c, d) {
		var e,
		f = a.doc;
		null == c && (c = "add"),
		"smart" == c && (f.mode.indent ? e = Pa(a, b) : c = "prev");
		var g = a.options.tabSize,
		h = Vd(f, b),
		i = Gg(h.text, null, g);
		h.stateAfter && (h.stateAfter = null);
		var j,
		k = h.text.match(/^\s*/)[0];
		if (d || /\S/.test(h.text)) {
			if ("smart" == c && (j = f.mode.indent(e, h.text.slice(k.length), h.text), j == Cg || j > 150)) {
				if (!d)
					return;
				c = "prev"
			}
		} else
			j = 0, c = "not";
		"prev" == c ? j = b > f.first ? Gg(Vd(f, b - 1).text, null, g) : 0 : "add" == c ? j = i + a.options.indentUnit : "subtract" == c ? j = i - a.options.indentUnit : "number" == typeof c && (j = i + c),
		j = Math.max(0, j);
		var l = "",
		m = 0;
		if (a.options.indentWithTabs)
			for (var n = Math.floor(j / g); n; --n)
				m += g, l += "\t";
		if (m < j && (l += Be(j - m)), l != k)
			return Cc(f, l, Ff(b, 0), Ff(b, k.length), "+input"), h.stateAfter = null, !0;
		for (var n = 0; n < f.sel.ranges.length; n++) {
			var o = f.sel.ranges[n];
			if (o.head.line == b && o.head.ch < k.length) {
				var m = Ff(b, k.length);
				xa(f, n, new ma(m, m));
				break
			}
		}
	}
	function Lc(a, b, c, d) {
		var e = b,
		f = b;
		return "number" == typeof b ? f = Vd(a, pa(a, b)) : e = Zd(b),
		null == e ? null : (d(f, e) && a.cm && Jb(a.cm, e, c), f)
	}
	function Mc(a, b) {
		for (var c = a.doc.sel.ranges, d = [], e = 0; e < c.length; e++) {
			for (var f = b(c[e]); d.length && Gf(f.from, Ce(d).to) <= 0; ) {
				var g = d.pop();
				if (Gf(g.from, f.from) < 0) {
					f.from = g.from;
					break
				}
			}
			d.push(f)
		}
		Cb(a, function () {
			for (var b = d.length - 1; b >= 0; b--)
				Cc(a.doc, "", d[b].from, d[b].to, "+delete");
			Ic(a)
		})
	}
	function Nc(a, b, c, d, e) {
		function f() {
			var b = h + c;
			return b < a.first || b >= a.first + a.size ? l = !1 : (h = b, k = Vd(a, b))
		}
		function g(a) {
			var b = (e ? hf : jf)(k, i, c, !0);
			if (null == b) {
				if (a || !f())
					return l = !1;
				i = e ? (c < 0 ? af : _e)(k) : c < 0 ? k.text.length : 0
			} else
				i = b;
			return !0
		}
		var h = b.line,
		i = b.ch,
		j = c,
		k = Vd(a, h),
		l = !0;
		if ("char" == d)
			g();
		else if ("column" == d)
			g(!0);
		else if ("word" == d || "group" == d)
			for (var m = null, n = "group" == d, o = a.cm && a.cm.getHelper(b, "wordChars"), p = !0; !(c < 0) || g(!p); p = !1) {
				var q = k.text.charAt(i) || "\n",
				r = Je(q, o) ? "w" : n && "\n" == q ? "n" : !n || /\s/.test(q) ? null : "p";
				if (!n || p || r || (r = "s"), m && m != r) {
					c < 0 && (c = 1, g());
					break
				}
				if (r && (m = r), c > 0 && !g(!p))
					break
			}
		var s = Ga(a, Ff(h, i), j, !0);
		return l || (s.hitSide = !0),
		s
	}
	function Oc(a, b, c, d) {
		var e,
		f = a.doc,
		g = b.left;
		if ("page" == d) {
			var h = Math.min(a.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
			e = b.top + c * (h - (c < 0 ? 1.5 : .5) * rb(a.display))
		} else
			"line" == d && (e = c > 0 ? b.bottom + 3 : b.top - 3);
		for (; ; ) {
			var i = pb(a, g, e);
			if (!i.outside)
				break;
			if (c < 0 ? e <= 0 : e >= f.height) {
				i.hitSide = !0;
				break
			}
			e += 5 * c
		}
		return i
	}
	function Pc(b, c, d, e) {
		a.defaults[b] = c,
		d && (Wf[b] = e ? function (a, b, c) {
			c != Xf && d(a, b, c)
		}
			 : d)
	}
	function Qc(a) {
		for (var b, c, d, e, f = a.split(/-(?!$)/), a = f[f.length - 1], g = 0; g < f.length - 1; g++) {
			var h = f[g];
			if (/^(cmd|meta|m)$/i.test(h))
				e = !0;
			else if (/^a(lt)?$/i.test(h))
				b = !0;
			else if (/^(c|ctrl|control)$/i.test(h))
				c = !0;
			else {
				if (!/^s(hift)$/i.test(h))
					throw new Error("Unrecognized modifier name: " + h);
				d = !0
			}
		}
		return b && (a = "Alt-" + a),
		c && (a = "Ctrl-" + a),
		e && (a = "Cmd-" + a),
		d && (a = "Shift-" + a),
		a
	}
	function Rc(a) {
		return "string" == typeof a ? eg[a] : a
	}
	function Sc(a, b, c, d, e) {
		if (d && d.shared)
			return Tc(a, b, c, d, e);
		if (a.cm && !a.cm.curOp)
			return Db(a.cm, Sc)(a, b, c, d, e);
		var f = new kg(a, e),
		g = Gf(b, c);
		if (d && He(d, f, !1), g > 0 || 0 == g && f.clearWhenEmpty !== !1)
			return f;
		if (f.replacedWith && (f.collapsed = !0, f.widgetNode = Me("span", [f.replacedWith], "CodeMirror-widget"), d.handleMouseEvents || f.widgetNode.setAttribute("cm-ignore-events", "true"), d.insertLeft && (f.widgetNode.insertLeft = !0)), f.collapsed) {
			if (nd(a, b.line, b, c, f) || b.line != c.line && nd(a, c.line, b, c, f))
				throw new Error("Inserting collapsed marker partially overlapping an existing one");
			Ef = !0
		}
		f.addToHistory && fe(a, {
			from: b,
			to: c,
			origin: "markText"
		}, a.sel, NaN);
		var h,
		i = b.line,
		j = a.cm;
		if (a.iter(i, c.line + 1, function (a) {
				j && f.collapsed && !j.options.lineWrapping && od(a) == j.display.maxLine && (h = !0),
				f.collapsed && i != b.line && Yd(a, 0),
				$c(a, new Xc(f, i == b.line ? b.ch : null, i == c.line ? c.ch : null)),
				++i
			}), f.collapsed && a.iter(b.line, c.line + 1, function (b) {
				sd(a, b) && Yd(b, 0)
			}), f.clearOnEnter && xg(f, "beforeCursorEnter", function () {
				f.clear()
			}), f.readOnly && (Df = !0, (a.history.done.length || a.history.undone.length) && a.clearHistory()), f.collapsed && (f.id = ++jg, f.atomic = !0), j) {
			if (h && (j.curOp.updateMaxLine = !0), f.collapsed)
				Ib(j, b.line, c.line + 1);
			else if (f.className || f.title || f.startStyle || f.endStyle || f.css)
				for (var k = b.line; k <= c.line; k++)
					Jb(j, k, "text");
			f.atomic && Ea(j.doc),
			te(j, "markerAdded", j, f)
		}
		return f
	}
	function Tc(a, b, c, d, e) {
		d = He(d),
		d.shared = !1;
		var f = [Sc(a, b, c, d, e)],
		g = f[0],
		h = d.widgetNode;
		return Td(a, function (a) {
			h && (d.widgetNode = h.cloneNode(!0)),
			f.push(Sc(a, qa(a, b), qa(a, c), d, e));
			for (var i = 0; i < a.linked.length; ++i)
				if (a.linked[i].isParent)
					return;
			g = Ce(f)
		}),
		new lg(f, g)
	}
	function Uc(a) {
		return a.findMarks(Ff(a.first, 0), a.clipPos(Ff(a.lastLine())), function (a) {
			return a.parent
		})
	}
	function Vc(a, b) {
		for (var c = 0; c < b.length; c++) {
			var d = b[c],
			e = d.find(),
			f = a.clipPos(e.from),
			g = a.clipPos(e.to);
			if (Gf(f, g)) {
				var h = Sc(a, f, g, d.primary, d.primary.type);
				d.markers.push(h),
				h.parent = d
			}
		}
	}
	function Wc(a) {
		for (var b = 0; b < a.length; b++) {
			var c = a[b],
			d = [c.primary.doc];
			Td(c.primary.doc, function (a) {
				d.push(a)
			});
			for (var e = 0; e < c.markers.length; e++) {
				var f = c.markers[e];
				De(d, f.doc) == -1 && (f.parent = null, c.markers.splice(e--, 1))
			}
		}
	}
	function Xc(a, b, c) {
		this.marker = a,
		this.from = b,
		this.to = c
	}
	function Yc(a, b) {
		if (a)
			for (var c = 0; c < a.length; ++c) {
				var d = a[c];
				if (d.marker == b)
					return d
			}
	}
	function Zc(a, b) {
		for (var c, d = 0; d < a.length; ++d)
			a[d] != b && (c || (c = [])).push(a[d]);
		return c
	}
	function $c(a, b) {
		a.markedSpans = a.markedSpans ? a.markedSpans.concat([b]) : [b],
		b.marker.attachLine(a)
	}
	function _c(a, b, c) {
		if (a)
			for (var d, e = 0; e < a.length; ++e) {
				var f = a[e],
				g = f.marker,
				h = null == f.from || (g.inclusiveLeft ? f.from <= b : f.from < b);
				if (h || f.from == b && "bookmark" == g.type && (!c || !f.marker.insertLeft)) {
					var i = null == f.to || (g.inclusiveRight ? f.to >= b : f.to > b);
					(d || (d = [])).push(new Xc(g, f.from, i ? null : f.to))
				}
			}
		return d
	}
	function ad(a, b, c) {
		if (a)
			for (var d, e = 0; e < a.length; ++e) {
				var f = a[e],
				g = f.marker,
				h = null == f.to || (g.inclusiveRight ? f.to >= b : f.to > b);
				if (h || f.from == b && "bookmark" == g.type && (!c || f.marker.insertLeft)) {
					var i = null == f.from || (g.inclusiveLeft ? f.from <= b : f.from < b);
					(d || (d = [])).push(new Xc(g, i ? null : f.from - b, null == f.to ? null : f.to - b))
				}
			}
		return d
	}
	function bd(a, b) {
		if (b.full)
			return null;
		var c = sa(a, b.from.line) && Vd(a, b.from.line).markedSpans,
		d = sa(a, b.to.line) && Vd(a, b.to.line).markedSpans;
		if (!c && !d)
			return null;
		var e = b.from.ch,
		f = b.to.ch,
		g = 0 == Gf(b.from, b.to),
		h = _c(c, e, g),
		i = ad(d, f, g),
		j = 1 == b.text.length,
		k = Ce(b.text).length + (j ? e : 0);
		if (h)
			for (var l = 0; l < h.length; ++l) {
				var m = h[l];
				if (null == m.to) {
					var n = Yc(i, m.marker);
					n ? j && (m.to = null == n.to ? null : n.to + k) : m.to = e
				}
			}
		if (i)
			for (var l = 0; l < i.length; ++l) {
				var m = i[l];
				if (null != m.to && (m.to += k), null == m.from) {
					var n = Yc(h, m.marker);
					n || (m.from = k, j && (h || (h = [])).push(m))
				} else
					m.from += k, j && (h || (h = [])).push(m)
			}
		h && (h = cd(h)),
		i && i != h && (i = cd(i));
		var o = [h];
		if (!j) {
			var p,
			q = b.text.length - 2;
			if (q > 0 && h)
				for (var l = 0; l < h.length; ++l)
					null == h[l].to && (p || (p = [])).push(new Xc(h[l].marker, null, null));
			for (var l = 0; l < q; ++l)
				o.push(p);
			o.push(i)
		}
		return o
	}
	function cd(a) {
		for (var b = 0; b < a.length; ++b) {
			var c = a[b];
			null != c.from && c.from == c.to && c.marker.clearWhenEmpty !== !1 && a.splice(b--, 1)
		}
		return a.length ? a : null
	}
	function dd(a, b) {
		var c = le(a, b),
		d = bd(a, b);
		if (!c)
			return d;
		if (!d)
			return c;
		for (var e = 0; e < c.length; ++e) {
			var f = c[e],
			g = d[e];
			if (f && g)
				a: for (var h = 0; h < g.length; ++h) {
					for (var i = g[h], j = 0; j < f.length; ++j)
						if (f[j].marker == i.marker)
							continue a;
					f.push(i)
				}
			else
				g && (c[e] = g)
		}
		return c
	}
	function ed(a, b, c) {
		var d = null;
		if (a.iter(b.line, c.line + 1, function (a) {
				if (a.markedSpans)
					for (var b = 0; b < a.markedSpans.length; ++b) {
						var c = a.markedSpans[b].marker;
						!c.readOnly || d && De(d, c) != -1 || (d || (d = [])).push(c)
					}
			}), !d)
			return null;
		for (var e = [{
					from: b,
					to: c
				}
			], f = 0; f < d.length; ++f)
			for (var g = d[f], h = g.find(0), i = 0; i < e.length; ++i) {
				var j = e[i];
				if (!(Gf(j.to, h.from) < 0 || Gf(j.from, h.to) > 0)) {
					var k = [i, 1],
					l = Gf(j.from, h.from),
					m = Gf(j.to, h.to);
					(l < 0 || !g.inclusiveLeft && !l) && k.push({
						from: j.from,
						to: h.from
					}),
					(m > 0 || !g.inclusiveRight && !m) && k.push({
						from: h.to,
						to: j.to
					}),
					e.splice.apply(e, k),
					i += k.length - 1
				}
			}
		return e
	}
	function fd(a) {
		var b = a.markedSpans;
		if (b) {
			for (var c = 0; c < b.length; ++c)
				b[c].marker.detachLine(a);
			a.markedSpans = null
		}
	}
	function gd(a, b) {
		if (b) {
			for (var c = 0; c < b.length; ++c)
				b[c].marker.attachLine(a);
			a.markedSpans = b
		}
	}
	function hd(a) {
		return a.inclusiveLeft ? -1 : 0
	}
	function id(a) {
		return a.inclusiveRight ? 1 : 0
	}
	function jd(a, b) {
		var c = a.lines.length - b.lines.length;
		if (0 != c)
			return c;
		var d = a.find(),
		e = b.find(),
		f = Gf(d.from, e.from) || hd(a) - hd(b);
		if (f)
			return -f;
		var g = Gf(d.to, e.to) || id(a) - id(b);
		return g ? g : b.id - a.id
	}
	function kd(a, b) {
		var c,
		d = Ef && a.markedSpans;
		if (d)
			for (var e, f = 0; f < d.length; ++f)
				e = d[f], e.marker.collapsed && null == (b ? e.from : e.to) && (!c || jd(c, e.marker) < 0) && (c = e.marker);
		return c
	}
	function ld(a) {
		return kd(a, !0)
	}
	function md(a) {
		return kd(a, !1)
	}
	function nd(a, b, c, d, e) {
		var f = Vd(a, b),
		g = Ef && f.markedSpans;
		if (g)
			for (var h = 0; h < g.length; ++h) {
				var i = g[h];
				if (i.marker.collapsed) {
					var j = i.marker.find(0),
					k = Gf(j.from, c) || hd(i.marker) - hd(e),
					l = Gf(j.to, d) || id(i.marker) - id(e);
					if (!(k >= 0 && l <= 0 || k <= 0 && l >= 0) && (k <= 0 && (Gf(j.to, c) > 0 || i.marker.inclusiveRight && e.inclusiveLeft) || k >= 0 && (Gf(j.from, d) < 0 || i.marker.inclusiveLeft && e.inclusiveRight)))
						return !0
				}
			}
	}
	function od(a) {
		for (var b; b = ld(a); )
			a = b.find(-1, !0).line;
		return a
	}
	function pd(a) {
		for (var b, c; b = md(a); )
			a = b.find(1, !0).line, (c || (c = [])).push(a);
		return c
	}
	function qd(a, b) {
		var c = Vd(a, b),
		d = od(c);
		return c == d ? b : Zd(d)
	}
	function rd(a, b) {
		if (b > a.lastLine())
			return b;
		var c,
		d = Vd(a, b);
		if (!sd(a, d))
			return b;
		for (; c = md(d); )
			d = c.find(1, !0).line;
		return Zd(d) + 1
	}
	function sd(a, b) {
		var c = Ef && b.markedSpans;
		if (c)
			for (var d, e = 0; e < c.length; ++e)
				if (d = c[e], d.marker.collapsed) {
					if (null == d.from)
						return !0;
					if (!d.marker.widgetNode && 0 == d.from && d.marker.inclusiveLeft && td(a, b, d))
						return !0
				}
	}
	function td(a, b, c) {
		if (null == c.to) {
			var d = c.marker.find(1, !0);
			return td(a, d.line, Yc(d.line.markedSpans, c.marker))
		}
		if (c.marker.inclusiveRight && c.to == b.text.length)
			return !0;
		for (var e, f = 0; f < b.markedSpans.length; ++f)
			if (e = b.markedSpans[f], e.marker.collapsed && !e.marker.widgetNode && e.from == c.to && (null == e.to || e.to != c.from) && (e.marker.inclusiveLeft || c.marker.inclusiveRight) && td(a, b, e))
				return !0
	}
	function ud(a, b, c) {
		_d(b) < (a.curOp && a.curOp.scrollTop || a.doc.scrollTop) && Hc(a, null, c)
	}
	function vd(a) {
		if (null != a.height)
			return a.height;
		var b = a.doc.cm;
		if (!b)
			return 0;
		if (!Ng(document.body, a.node)) {
			var c = "position: relative;";
			a.coverGutter && (c += "margin-left: -" + b.display.gutters.offsetWidth + "px;"),
			a.noHScroll && (c += "width: " + b.display.wrapper.clientWidth + "px;"),
			Oe(b.display.measure, Me("div", [a.node], null, c))
		}
		return a.height = a.node.offsetHeight
	}
	function wd(a, b, c, d) {
		var e = new mg(a, c, d),
		f = a.cm;
		return f && e.noHScroll && (f.display.alignWidgets = !0),
		Lc(a, b, "widget", function (b) {
			var c = b.widgets || (b.widgets = []);
			if (null == e.insertAt ? c.push(e) : c.splice(Math.min(c.length - 1, Math.max(0, e.insertAt)), 0, e), e.line = b, f && !sd(a, b)) {
				var d = _d(b) < a.scrollTop;
				Yd(b, b.height + vd(e)),
				d && Hc(f, null, e.height),
				f.curOp.forceUpdate = !0
			}
			return !0
		}),
		e
	}
	function xd(a, b, c, d) {
		a.text = b,
		a.stateAfter && (a.stateAfter = null),
		a.styles && (a.styles = null),
		null != a.order && (a.order = null),
		fd(a),
		gd(a, c);
		var e = d ? d(a) : 1;
		e != a.height && Yd(a, e)
	}
	function yd(a) {
		a.parent = null,
		fd(a)
	}
	function zd(a, b) {
		if (a)
			for (; ; ) {
				var c = a.match(/(?:^|\s+)line-(background-)?(\S+)/);
				if (!c)
					break;
				a = a.slice(0, c.index) + a.slice(c.index + c[0].length);
				var d = c[1] ? "bgClass" : "textClass";
				null == b[d] ? b[d] = c[2] : new RegExp("(?:^|s)" + c[2] + "(?:$|s)").test(b[d]) || (b[d] += " " + c[2])
			}
		return a
	}
	function Ad(b, c) {
		if (b.blankLine)
			return b.blankLine(c);
		if (b.innerMode) {
			var d = a.innerMode(b, c);
			return d.mode.blankLine ? d.mode.blankLine(d.state) : void 0
		}
	}
	function Bd(b, c, d, e) {
		for (var f = 0; f < 10; f++) {
			e && (e[0] = a.innerMode(b, d).mode);
			var g = b.token(c, d);
			if (c.pos > c.start)
				return g
		}
		throw new Error("Mode " + b.name + " failed to advance stream.")
	}
	function Cd(a, b, c, d) {
		function e(a) {
			return {
				start: l.start,
				end: l.pos,
				string: l.current(),
				type: f || null,
				state: a ? bg(g.mode, k) : k
			}
		}
		var f,
		g = a.doc,
		h = g.mode;
		b = qa(g, b);
		var i,
		j = Vd(g, b.line),
		k = Pa(a, b.line, c),
		l = new ig(j.text, a.options.tabSize);
		for (d && (i = []); (d || l.pos < b.ch) && !l.eol(); )
			l.start = l.pos, f = Bd(h, l, k), d && i.push(e(!0));
		return d ? i : e()
	}
	function Dd(a, b, c, d, e, f, g) {
		var h = c.flattenSpans;
		null == h && (h = a.options.flattenSpans);
		var i,
		j = 0,
		k = null,
		l = new ig(b, a.options.tabSize),
		m = a.options.addModeClass && [null];
		for ("" == b && zd(Ad(c, d), f); !l.eol(); ) {
			if (l.pos > a.options.maxHighlightLength ? (h = !1, g && Gd(a, b, d, l.pos), l.pos = b.length, i = null) : i = zd(Bd(c, l, d, m), f), m) {
				var n = m[0].name;
				n && (i = "m-" + (i ? n + " " + i : n))
			}
			if (!h || k != i) {
				for (; j < l.start; )
					j = Math.min(l.start, j + 5e4), e(j, k);
				k = i
			}
			l.start = l.pos
		}
		for (; j < l.pos; ) {
			var o = Math.min(l.pos, j + 5e4);
			e(o, k),
			j = o
		}
	}
	function Ed(a, b, c, d) {
		var e = [a.state.modeGen],
		f = {};
		Dd(a, b.text, a.doc.mode, c, function (a, b) {
			e.push(a, b)
		}, f, d);
		for (var g = 0; g < a.state.overlays.length; ++g) {
			var h = a.state.overlays[g],
			i = 1,
			j = 0;
			Dd(a, b.text, h.mode, !0, function (a, b) {
				for (var c = i; j < a; ) {
					var d = e[i];
					d > a && e.splice(i, 1, a, e[i + 1], d),
					i += 2,
					j = Math.min(a, d)
				}
				if (b)
					if (h.opaque)
						e.splice(c, i - c, a, "cm-overlay " + b), i = c + 2;
					else
						for (; c < i; c += 2) {
							var f = e[c + 1];
							e[c + 1] = (f ? f + " " : "") + "cm-overlay " + b
						}
			}, f)
		}
		return {
			styles: e,
			classes: f.bgClass || f.textClass ? f : null
		}
	}
	function Fd(a, b, c) {
		if (!b.styles || b.styles[0] != a.state.modeGen) {
			var d = Ed(a, b, b.stateAfter = Pa(a, Zd(b)));
			b.styles = d.styles,
			d.classes ? b.styleClasses = d.classes : b.styleClasses && (b.styleClasses = null),
			c === a.doc.frontier && a.doc.frontier++
		}
		return b.styles
	}
	function Gd(a, b, c, d) {
		var e = a.doc.mode,
		f = new ig(b, a.options.tabSize);
		for (f.start = f.pos = d || 0, "" == b && Ad(e, c); !f.eol() && f.pos <= a.options.maxHighlightLength; )
			Bd(e, f, c), f.start = f.pos
	}
	function Hd(a, b) {
		if (!a || /^\s*$/.test(a))
			return null;
		var c = b.addModeClass ? pg : og;
		return c[a] || (c[a] = a.replace(/\S+/g, "cm-$&"))
	}
	function Id(a, b) {
		var c = Me("span", null, "CodeMirror-line-content", pf ? "padding-right: .1px" : null),
		d = {
			pre: Me("pre", [c], "CodeMirror-line"),
			content: c,
			col: 0,
			pos: 0,
			cm: a,
			splitSpaces: (nf || pf) && a.getOption("lineWrapping")
		};
		b.measure = {};
		for (var e = 0; e <= (b.rest ? b.rest.length : 0); e++) {
			var f,
			g = e ? b.rest[e - 1] : b.line;
			d.pos = 0,
			d.addToken = Kd,
			We(a.display.measure) && (f = ae(g)) && (d.addToken = Md(d.addToken, f)),
			d.map = [];
			var h = b != a.display.externalMeasured && Zd(g);
			Od(g, d, Fd(a, g, h)),
			g.styleClasses && (g.styleClasses.bgClass && (d.bgClass = Re(g.styleClasses.bgClass, d.bgClass || "")), g.styleClasses.textClass && (d.textClass = Re(g.styleClasses.textClass, d.textClass || ""))),
			0 == d.map.length && d.map.push(0, 0, d.content.appendChild(Ve(a.display.measure))),
			0 == e ? (b.measure.map = d.map, b.measure.cache = {}) : ((b.measure.maps || (b.measure.maps = [])).push(d.map), (b.measure.caches || (b.measure.caches = [])).push({}))
		}
		return pf && /\bcm-tab\b/.test(d.content.lastChild.className) && (d.content.className = "cm-tab-wrap-hack"),
		zg(a, "renderLine", a, b.line, d.pre),
		d.pre.className && (d.textClass = Re(d.pre.className, d.textClass || "")),
		d
	}
	function Jd(a) {
		var b = Me("span", "", "cm-invalidchar");
		return b.title = "\\u" + a.charCodeAt(0).toString(16),
		b.setAttribute("aria-label", b.title),
		b
	}
	function Kd(a, b, c, d, e, f, g, h) {
		if (b) {
			var i = a.splitSpaces ? b.replace(/ {3,}/g, Ld) : b,
			j = a.cm.state.specialChars,
			k = !1;
			if (j.test(b))
				for (var l = document.createDocumentFragment(), m = 0; ; ) {
					j.lastIndex = m;
					var n = j.exec(b),
					o = n ? n.index - m : b.length - m;
					if (o) {
						var p = document.createTextNode(i.slice(m, m + o));
						nf && of < 9 ? l.appendChild(Me("span", [p])) : l.appendChild(p),
						a.map.push(a.pos, a.pos + o, p),
						a.col += o,
						a.pos += o
					}
					if (!n)
						break;
					if (m += o + 1, "\t" == n[0]) {
						var q = a.cm.options.tabSize,
						r = q - a.col % q,
						p = l.appendChild(Me("span", Be(r), "cm-tab"));
						p.setAttribute("role", "presentation"),
						p.setAttribute("cm-text", "\t"),
						a.col += r
					} else {
						var p = a.cm.options.specialCharPlaceholder(n[0]);
						p.setAttribute("cm-text", n[0]),
						nf && of < 9 ? l.appendChild(Me("span", [p])) : l.appendChild(p),
						a.col += 1
					}
					a.map.push(a.pos, a.pos + 1, p),
					a.pos++
				}
			else {
				a.col += b.length;
				var l = document.createTextNode(i);
				a.map.push(a.pos, a.pos + b.length, l),
				nf && of < 9 && (k = !0),
				a.pos += b.length
			}
			if (c || d || e || k || g || h) {
				var s = c || "";
				d && (s += d),
				e && (s += e);
				var t = Me("span", [l], s, g, h);
				return f && (t.title = f),
				a.content.appendChild(t)
			}
			a.content.appendChild(l)
		}
	}
	function Ld(a) {
		for (var b = " ", c = 0; c < a.length - 2; ++c)
			b += c % 2 ? " " : " ";
		return b += " "
	}
	function Md(a, b) {
		return function (c, d, e, f, g, h, i) {
			e = e ? e + " cm-force-border" : "cm-force-border";
			for (var j = c.pos, k = j + d.length; ; ) {
				for (var l = 0; l < b.length; l++) {
					var m = b[l];
					if (m.to > j && m.from <= j)
						break
				}
				if (m.to >= k)
					return a(c, d, e, f, g, h, i);
				a(c, d.slice(0, m.to - j), e, f, null, h, i),
				f = null,
				d = d.slice(m.to - j),
				j = m.to
			}
		}
	}
	function Nd(a, b, c, d) {
		var e = !d && c.widgetNode;
		e && a.map.push(a.pos, a.pos + b, e),
		!d && a.cm.display.input.needsContentAttribute && (e || (e = a.content.appendChild(document.createElement("span"))), e.setAttribute("cm-marker", c.id)),
		e && (a.cm.display.input.setUneditable(e), a.content.appendChild(e)),
		a.pos += b
	}
	function Od(a, b, c) {
		var d = a.markedSpans,
		e = a.text,
		f = 0;
		if (d)
			for (var g, h, i, j, k, l, m, n, o = e.length, p = 0, q = 1, r = "", s = 0; ; ) {
				if (s == p) {
					j = k = l = m = h = "",
					i = null,
					n = null,
					s = 1 / 0;
					for (var t = [], u = 0; u < d.length; ++u) {
						var v = d[u],
						w = v.marker;
						"bookmark" == w.type && v.from == p && w.widgetNode ? t.push(w) : v.from <= p && (null == v.to || v.to > p || w.collapsed && v.to == p && v.from == p) ? (null != v.to && v.to != p && s > v.to && (s = v.to, k = ""), w.className && (j += " " + w.className), w.attr && (i = w.attr), w.css && (h = w.css), w.startStyle && v.from == p && (l += " " + w.startStyle), w.endStyle && v.to == s && (k += " " + w.endStyle), w.title && !m && (m = w.title), w.collapsed && (!n || jd(n.marker, w) < 0) && (n = v)) : v.from > p && s > v.from && (s = v.from)
					}
					if (n && (n.from || 0) == p) {
						if (Nd(b, (null == n.to ? o + 1 : n.to) - p, n.marker, null == n.from), null == n.to)
							return;
						n.to == p && (n = !1)
					}
					if (!n && t.length)
						for (var u = 0; u < t.length; ++u)
							Nd(b, 0, t[u])
				}
				if (p >= o)
					break;
				for (var x = Math.min(o, s); ; ) {
					if (r) {
						var y = p + r.length;
						if (!n) {
							var z = y > x ? r.slice(0, x - p) : r;
							b.addToken(b, z, g ? g + j : j, l, p + z.length == s ? k : "", m, h, i)
						}
						if (y >= x) {
							r = r.slice(x - p),
							p = x;
							break
						}
						p = y,
						l = ""
					}
					r = e.slice(f, f = c[q++]),
					g = Hd(c[q++], b.cm.options)
				}
			}
		else
			for (var q = 1; q < c.length; q += 2)
				b.addToken(b, e.slice(f, f = c[q]), Hd(c[q + 1], b.cm.options))
	}
	function Pd(a, b) {
		return 0 == b.from.ch && 0 == b.to.ch && "" == Ce(b.text) && (!a.cm || a.cm.options.wholeLineUpdateBefore)
	}
	function Qd(a, b, c, d) {
		function e(a) {
			return c ? c[a] : null
		}
		function f(a, c, e) {
			xd(a, c, e, d),
			te(a, "change", a, b)
		}
		function g(a, b) {
			for (var c = a, f = []; c < b; ++c)
				f.push(new ng(j[c], e(c), d));
			return f
		}
		var h = b.from,
		i = b.to,
		j = b.text,
		k = Vd(a, h.line),
		l = Vd(a, i.line),
		m = Ce(j),
		n = e(j.length - 1),
		o = i.line - h.line;
		if (b.full)
			a.insert(0, g(0, j.length)), a.remove(j.length, a.size - j.length);
		else if (Pd(a, b)) {
			var p = g(0, j.length - 1);
			f(l, l.text, n),
			o && a.remove(h.line, o),
			p.length && a.insert(h.line, p)
		} else if (k == l)
			if (1 == j.length)
				f(k, k.text.slice(0, h.ch) + m + k.text.slice(i.ch), n);
			else {
				var p = g(1, j.length - 1);
				p.push(new ng(m + k.text.slice(i.ch), n, d)),
				f(k, k.text.slice(0, h.ch) + j[0], e(0)),
				a.insert(h.line + 1, p)
			}
		else if (1 == j.length)
			f(k, k.text.slice(0, h.ch) + j[0] + l.text.slice(i.ch), e(0)), a.remove(h.line + 1, o);
		else {
			f(k, k.text.slice(0, h.ch) + j[0], e(0)),
			f(l, m + l.text.slice(i.ch), n);
			var p = g(1, j.length - 1);
			o > 1 && a.remove(h.line + 1, o - 1),
			a.insert(h.line + 1, p)
		}
		te(a, "change", a, b)
	}
	function Rd(a) {
		this.lines = a,
		this.parent = null;
		for (var b = 0, c = 0; b < a.length; ++b)
			a[b].parent = this, c += a[b].height;
		this.height = c
	}
	function Sd(a) {
		this.children = a;
		for (var b = 0, c = 0, d = 0; d < a.length; ++d) {
			var e = a[d];
			b += e.chunkSize(),
			c += e.height,
			e.parent = this
		}
		this.size = b,
		this.height = c,
		this.parent = null
	}
	function Td(a, b, c) {
		function d(a, e, f) {
			if (a.linked)
				for (var g = 0; g < a.linked.length; ++g) {
					var h = a.linked[g];
					if (h.doc != e) {
						var i = f && h.sharedHist;
						c && !i || (b(h.doc, i), d(h.doc, a, i))
					}
				}
		}
		d(a, null, !0)
	}
	function Ud(a, b) {
		if (b.cm)
			throw new Error("This document is already in use.");
		a.doc = b,
		b.cm = a,
		g(a),
		c(a),
		a.options.lineWrapping || m(a),
		a.options.mode = b.modeOption,
		Ib(a)
	}
	function Vd(a, b) {
		if (b -= a.first, b < 0 || b >= a.size)
			throw new Error("There is no line " + (b + a.first) + " in the document.");
		for (var c = a; !c.lines; )
			for (var d = 0; ; ++d) {
				var e = c.children[d],
				f = e.chunkSize();
				if (b < f) {
					c = e;
					break
				}
				b -= f
			}
		return c.lines[b]
	}
	function Wd(a, b, c) {
		var d = [],
		e = b.line;
		return a.iter(b.line, c.line + 1, function (a) {
			var f = a.text;
			e == c.line && (f = f.slice(0, c.ch)),
			e == b.line && (f = f.slice(b.ch)),
			d.push(f),
			++e
		}),
		d
	}
	function Xd(a, b, c) {
		var d = [];
		return a.iter(b, c, function (a) {
			d.push(a.text)
		}),
		d
	}
	function Yd(a, b) {
		var c = b - a.height;
		if (c)
			for (var d = a; d; d = d.parent)
				d.height += c
	}
	function Zd(a) {
		if (null == a.parent)
			return null;
		for (var b = a.parent, c = De(b.lines, a), d = b.parent; d; b = d, d = d.parent)
			for (var e = 0; d.children[e] != b; ++e)
				c += d.children[e].chunkSize();
		return c + b.first
	}
	function $d(a, b) {
		var c = a.first;
		a: do {
			for (var d = 0; d < a.children.length; ++d) {
				var e = a.children[d],
				f = e.height;
				if (b < f) {
					a = e;
					continue a
				}
				b -= f,
				c += e.chunkSize()
			}
			return c
		} while (!a.lines);
		for (var d = 0; d < a.lines.length; ++d) {
			var g = a.lines[d],
			h = g.height;
			if (b < h)
				break;
			b -= h
		}
		return c + d
	}
	function _d(a) {
		a = od(a);
		for (var b = 0, c = a.parent, d = 0; d < c.lines.length; ++d) {
			var e = c.lines[d];
			if (e == a)
				break;
			b += e.height
		}
		for (var f = c.parent; f; c = f, f = c.parent)
			for (var d = 0; d < f.children.length; ++d) {
				var g = f.children[d];
				if (g == c)
					break;
				b += g.height
			}
		return b
	}
	function ae(a) {
		var b = a.order;
		return null == b && (b = a.order = $g(a.text)),
		b
	}
	function be(a) {
		this.done = [],
		this.undone = [],
		this.undoDepth = 1 / 0,
		this.lastModTime = this.lastSelTime = 0,
		this.lastOp = this.lastSelOp = null,
		this.lastOrigin = this.lastSelOrigin = null,
		this.generation = this.maxGeneration = a || 1
	}
	function ce(a, b) {
		var c = {
			from: V(b.from),
			to: Uf(b),
			text: Wd(a, b.from, b.to)
		};
		return je(a, c, b.from.line, b.to.line + 1),
		Td(a, function (a) {
			je(a, c, b.from.line, b.to.line + 1)
		}, !0),
		c
	}
	function de(a) {
		for (; a.length; ) {
			var b = Ce(a);
			if (!b.ranges)
				break;
			a.pop()
		}
	}
	function ee(a, b) {
		return b ? (de(a.done), Ce(a.done)) : a.done.length && !Ce(a.done).ranges ? Ce(a.done) : a.done.length > 1 && !a.done[a.done.length - 2].ranges ? (a.done.pop(), Ce(a.done)) : void 0
	}
	function fe(a, b, c, d) {
		var e = a.history;
		e.undone.length = 0;
		var f,
		g = +new Date;
		if ((e.lastOp == d || e.lastOrigin == b.origin && b.origin && ("+" == b.origin.charAt(0) && a.cm && e.lastModTime > g - a.cm.options.historyEventDelay || "*" == b.origin.charAt(0))) && (f = ee(e, e.lastOp == d))) {
			var h = Ce(f.changes);
			0 == Gf(b.from, b.to) && 0 == Gf(b.from, h.to) ? h.to = Uf(b) : f.changes.push(ce(a, b))
		} else {
			var i = Ce(e.done);
			for (i && i.ranges || ie(a.sel, e.done), f = {
					changes: [ce(a, b)],
					generation: e.generation
				}, e.done.push(f); e.done.length > e.undoDepth; )
				e.done.shift(), e.done[0].ranges || e.done.shift()
		}
		e.done.push(c),
		e.generation = ++e.maxGeneration,
		e.lastModTime = e.lastSelTime = g,
		e.lastOp = e.lastSelOp = d,
		e.lastOrigin = e.lastSelOrigin = b.origin,
		h || zg(a, "historyAdded")
	}
	function ge(a, b, c, d) {
		var e = b.charAt(0);
		return "*" == e || "+" == e && c.ranges.length == d.ranges.length && c.somethingSelected() == d.somethingSelected() && new Date - a.history.lastSelTime <= (a.cm ? a.cm.options.historyEventDelay : 500)
	}
	function he(a, b, c, d) {
		var e = a.history,
		f = d && d.origin;
		c == e.lastSelOp || f && e.lastSelOrigin == f && (e.lastModTime == e.lastSelTime && e.lastOrigin == f || ge(a, f, Ce(e.done), b)) ? e.done[e.done.length - 1] = b : ie(b, e.done),
		e.lastSelTime = +new Date,
		e.lastSelOrigin = f,
		e.lastSelOp = c,
		d && d.clearRedo !== !1 && de(e.undone)
	}
	function ie(a, b) {
		var c = Ce(b);
		c && c.ranges && c.equals(a) || b.push(a)
	}
	function je(a, b, c, d) {
		var e = b["spans_" + a.id],
		f = 0;
		a.iter(Math.max(a.first, c), Math.min(a.first + a.size, d), function (c) {
			c.markedSpans && ((e || (e = b["spans_" + a.id] = {}))[f] = c.markedSpans),
			++f
		})
	}
	function ke(a) {
		if (!a)
			return null;
		for (var b, c = 0; c < a.length; ++c)
			a[c].marker.explicitlyCleared ? b || (b = a.slice(0, c)) : b && b.push(a[c]);
		return b ? b.length ? b : null : a
	}
	function le(a, b) {
		var c = b["spans_" + a.id];
		if (!c)
			return null;
		for (var d = 0, e = []; d < b.text.length; ++d)
			e.push(ke(c[d]));
		return e
	}
	function me(a, b, c) {
		for (var d = 0, e = []; d < a.length; ++d) {
			var f = a[d];
			if (f.ranges)
				e.push(c ? la.prototype.deepCopy.call(f) : f);
			else {
				var g = f.changes,
				h = [];
				e.push({
					changes: h
				});
				for (var i = 0; i < g.length; ++i) {
					var j,
					k = g[i];
					if (h.push({
							from: k.from,
							to: k.to,
							text: k.text
						}), b)
						for (var l in k)
							(j = l.match(/^spans_(\d+)$/)) && De(b, Number(j[1])) > -1 && (Ce(h)[l] = k[l], delete k[l])
				}
			}
		}
		return e
	}
	function ne(a, b, c, d) {
		c < a.line ? a.line += d : b < a.line && (a.line = b, a.ch = 0)
	}
	function oe(a, b, c, d) {
		for (var e = 0; e < a.length; ++e) {
			var f = a[e],
			g = !0;
			if (f.ranges) {
				f.copied || (f = a[e] = f.deepCopy(), f.copied = !0);
				for (var h = 0; h < f.ranges.length; h++)
					ne(f.ranges[h].anchor, b, c, d), ne(f.ranges[h].head, b, c, d)
			} else {
				for (var h = 0; h < f.changes.length; ++h) {
					var i = f.changes[h];
					if (c < i.from.line)
						i.from = Ff(i.from.line + d, i.from.ch), i.to = Ff(i.to.line + d, i.to.ch);
					else if (b <= i.to.line) {
						g = !1;
						break
					}
				}
				g || (a.splice(0, e + 1), e = 0)
			}
		}
	}
	function pe(a, b) {
		var c = b.from.line,
		d = b.to.line,
		e = b.text.length - (d - c) - 1;
		oe(a.done, c, d, e),
		oe(a.undone, c, d, e)
	}
	function qe(a) {
		return null != a.defaultPrevented ? a.defaultPrevented : 0 == a.returnValue
	}
	function re(a) {
		return a.target || a.srcElement
	}
	function se(a) {
		var b = a.which;
		return null == b && (1 & a.button ? b = 1 : 2 & a.button ? b = 3 : 4 & a.button && (b = 2)),
		yf && a.ctrlKey && 1 == b && (b = 3),
		b
	}
	function te(a, b) {
		function c(a) {
			return function () {
				a.apply(null, f)
			}
		}
		var d = a._handlers && a._handlers[b];
		if (d) {
			var e,
			f = Array.prototype.slice.call(arguments, 2);
			Mf ? e = Mf.delayedCallbacks : Ag ? e = Ag : (e = Ag = [], setTimeout(ue, 0));
			for (var g = 0; g < d.length; ++g)
				e.push(c(d[g]))
		}
	}
	function ue() {
		var a = Ag;
		Ag = null;
		for (var b = 0; b < a.length; ++b)
			a[b]()
	}
	function ve(a, b, c) {
		return "string" == typeof b && (b = {
				type: b,
				preventDefault: function () {
					this.defaultPrevented = !0
				}
			}),
		zg(a, c || b.type, a, b),
		qe(b) || b.codemirrorIgnore
	}
	function we(a) {
		var b = a._handlers && a._handlers.cursorActivity;
		if (b)
			for (var c = a.curOp.cursorActivityHandlers || (a.curOp.cursorActivityHandlers = []), d = 0; d < b.length; ++d)
				De(c, b[d]) == -1 && c.push(b[d])
	}
	function xe(a, b) {
		var c = a._handlers && a._handlers[b];
		return c && c.length > 0
	}
	function ye(a) {
		a.prototype.on = function (a, b) {
			xg(this, a, b)
		},
		a.prototype.off = function (a, b) {
			yg(this, a, b)
		}
	}
	function ze() {
		this.id = null
	}
	function Ae(a, b, c) {
		for (var d = 0, e = 0; ; ) {
			var f = a.indexOf("\t", d);
			f == -1 && (f = a.length);
			var g = f - d;
			if (f == a.length || e + g >= b)
				return d + Math.min(g, b - e);
			if (e += f - d, e += c - e % c, d = f + 1, e >= b)
				return d
		}
	}
	function Be(a) {
		for (; Hg.length <= a; )
			Hg.push(Ce(Hg) + " ");
		return Hg[a]
	}
	function Ce(a) {
		return a[a.length - 1]
	}
	function De(a, b) {
		for (var c = 0; c < a.length; ++c)
			if (a[c] == b)
				return c;
		return -1
	}
	function Ee(a, b) {
		for (var c = [], d = 0; d < a.length; d++)
			c[d] = b(a[d], d);
		return c
	}
	function Fe() {}
	function Ge(a, b) {
		var c;
		return Object.create ? c = Object.create(a) : (Fe.prototype = a, c = new Fe),
		b && He(b, c),
		c
	}
	function He(a, b, c) {
		b || (b = {});
		for (var d in a)
			!a.hasOwnProperty(d) || c === !1 && b.hasOwnProperty(d) || (b[d] = a[d]);
		return b
	}
	function Ie(a) {
		var b = Array.prototype.slice.call(arguments, 1);
		return function () {
			return a.apply(null, b)
		}
	}
	function Je(a, b) {
		return b ? !!(b.source.indexOf("\\w") > -1 && Lg(a)) || b.test(a) : Lg(a)
	}
	function Ke(a) {
		for (var b in a)
			if (a.hasOwnProperty(b) && a[b])
				return !1;
		return !0
	}
	function Le(a) {
		return a.charCodeAt(0) >= 768 && Mg.test(a)
	}
	function Me(a, b, c, d, e) {
		var f = document.createElement(a);
		if (c && (f.className = c), d && (f.style.cssText = d), "string" == typeof b)
			f.appendChild(document.createTextNode(b));
		else if (b)
			for (var g = 0; g < b.length; ++g)
				f.appendChild(b[g]);
		if (e)
			for (var h in e)
				f.setAttribute(h, e[h]);
		return f
	}
	function Ne(a) {
		for (var b = a.childNodes.length; b > 0; --b)
			a.removeChild(a.firstChild);
		return a
	}
	function Oe(a, b) {
		return Ne(a).appendChild(b)
	}
	function Pe() {
		return document.activeElement
	}
	function Qe(a) {
		return new RegExp("(^|\\s)" + a + "(?:$|\\s)\\s*")
	}
	function Re(a, b) {
		for (var c = a.split(" "), d = 0; d < c.length; d++)
			c[d] && !Qe(c[d]).test(b) && (b += " " + c[d]);
		return b
	}
	function Se(a) {
		if (document.body.getElementsByClassName)
			for (var b = document.body.getElementsByClassName("CodeMirror"), c = 0; c < b.length; c++) {
				var d = b[c].CodeMirror;
				d && a(d)
			}
	}
	function Te() {
		Sg || (Ue(), Sg = !0)
	}
	function Ue() {
		var a;
		xg(window, "resize", function () {
			null == a && (a = setTimeout(function () {
						a = null,
						Se(Rb)
					}, 100))
		}),
		xg(window, "blur", function () {
			Se(oc)
		})
	}
	function Ve(a) {
		if (null == Og) {
			var b = Me("span", "");
			Oe(a, Me("span", [b, document.createTextNode("x")])),
			0 != a.firstChild.offsetHeight && (Og = b.offsetWidth <= 1 && b.offsetHeight > 2 && !(nf && of < 8))
		}
		var c = Og ? Me("span", "") : Me("span", " ", null, "display: inline-block; width: 1px; margin-right: -1px");
		return c.setAttribute("cm-text", ""),
		c
	}
	function We(a) {
		if (null != Pg)
			return Pg;
		var b = Oe(a, document.createTextNode("AA")),
		c = Jg(b, 0, 1).getBoundingClientRect();
		if (!c || c.left == c.right)
			return !1;
		var d = Jg(b, 1, 2).getBoundingClientRect();
		return Pg = d.right - c.right < 3
	}
	function Xe(a) {
		if (null != Xg)
			return Xg;
		var b = Oe(a, Me("span", "x")),
		c = b.getBoundingClientRect(),
		d = Jg(b, 0, 1).getBoundingClientRect();
		return Xg = Math.abs(c.left - d.left) > 1
	}
	function Ye(a, b, c, d) {
		if (!a)
			return d(b, c, "ltr");
		for (var e = !1, f = 0; f < a.length; ++f) {
			var g = a[f];
			(g.from < c && g.to > b || b == c && g.to == b) && (d(Math.max(g.from, b), Math.min(g.to, c), 1 == g.level ? "rtl" : "ltr"), e = !0)
		}
		e || d(b, c, "ltr")
	}
	function Ze(a) {
		return a.level % 2 ? a.to : a.from
	}
	function $e(a) {
		return a.level % 2 ? a.from : a.to
	}
	function _e(a) {
		var b = ae(a);
		return b ? Ze(b[0]) : 0
	}
	function af(a) {
		var b = ae(a);
		return b ? $e(Ce(b)) : a.text.length
	}
	function bf(a, b) {
		var c = Vd(a.doc, b),
		d = od(c);
		d != c && (b = Zd(d));
		var e = ae(d),
		f = e ? e[0].level % 2 ? af(d) : _e(d) : 0;
		return Ff(b, f)
	}
	function cf(a, b) {
		for (var c, d = Vd(a.doc, b); c = md(d); )
			d = c.find(1, !0).line, b = null;
		var e = ae(d),
		f = e ? e[0].level % 2 ? _e(d) : af(d) : d.text.length;
		return Ff(null == b ? Zd(d) : b, f)
	}
	function df(a, b) {
		var c = bf(a, b.line),
		d = Vd(a.doc, c.line),
		e = ae(d);
		if (!e || 0 == e[0].level) {
			var f = Math.max(0, d.text.search(/\S/)),
			g = b.line == c.line && b.ch <= f && b.ch;
			return Ff(c.line, g ? 0 : f)
		}
		return c
	}
	function ef(a, b, c) {
		var d = a[0].level;
		return b == d || c != d && b < c
	}
	function ff(a, b) {
		Zg = null;
		for (var c, d = 0; d < a.length; ++d) {
			var e = a[d];
			if (e.from < b && e.to > b)
				return d;
			if (e.from == b || e.to == b) {
				if (null != c)
					return ef(a, e.level, a[c].level) ? (e.from != e.to && (Zg = c), d) : (e.from != e.to && (Zg = d), c);
				c = d
			}
		}
		return c
	}
	function gf(a, b, c, d) {
		if (!d)
			return b + c;
		do
			b += c;
		while (b > 0 && Le(a.text.charAt(b)));
		return b
	}
	function hf(a, b, c, d) {
		var e = ae(a);
		if (!e)
			return jf(a, b, c, d);
		for (var f = ff(e, b), g = e[f], h = gf(a, b, g.level % 2 ? -c : c, d); ; ) {
			if (h > g.from && h < g.to)
				return h;
			if (h == g.from || h == g.to)
				return ff(e, h) == f ? h : (g = e[f += c], c > 0 == g.level % 2 ? g.to : g.from);
			if (g = e[f += c], !g)
				return null;
			h = c > 0 == g.level % 2 ? gf(a, g.to, -1, d) : gf(a, g.from, 1, d)
		}
	}
	function jf(a, b, c, d) {
		var e = b + c;
		if (d)
			for (; e > 0 && Le(a.text.charAt(e)); )
				e += c;
		return e < 0 || e > a.text.length ? null : e
	}
	var kf = /gecko\/\d/i.test(navigator.userAgent),
	lf = /MSIE \d/.test(navigator.userAgent),
	mf = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
	nf = lf || mf,
	of = nf && (lf ? document.documentMode || 6 : mf[1]),
	pf = /WebKit\//.test(navigator.userAgent),
	qf = pf && /Qt\/\d+\.\d+/.test(navigator.userAgent),
	rf = /Chrome\//.test(navigator.userAgent),
	sf = /Opera\//.test(navigator.userAgent),
	tf = /Apple Computer/.test(navigator.vendor),
	uf = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),
	vf = /PhantomJS/.test(navigator.userAgent),
	wf = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent),
	xf = wf || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
	yf = wf || /Mac/.test(navigator.platform),
	zf = /win/i.test(navigator.platform),
	Af = sf && navigator.userAgent.match(/Version\/(\d*\.\d*)/);
	Af && (Af = Number(Af[1])),
	Af && Af >= 15 && (sf = !1, pf = !0);
	var Bf = yf && (qf || sf && (null == Af || Af < 12.11)),
	Cf = kf || nf && of >= 9,
	Df = !1,
	Ef = !1;
	p.prototype = He({
			update: function (a) {
				var b = a.scrollWidth > a.clientWidth + 1,
				c = a.scrollHeight > a.clientHeight + 1,
				d = a.nativeBarWidth;
				if (c) {
					this.vert.style.display = "block",
					this.vert.style.bottom = b ? d + "px" : "0";
					var e = a.viewHeight - (b ? d : 0);
					this.vert.firstChild.style.height = Math.max(0, a.scrollHeight - a.clientHeight + e) + "px"
				} else
					this.vert.style.display = "", this.vert.firstChild.style.height = "0";
				if (b) {
					this.horiz.style.display = "block",
					this.horiz.style.right = c ? d + "px" : "0",
					this.horiz.style.left = a.barLeft + "px";
					var f = a.viewWidth - a.barLeft - (c ? d : 0);
					this.horiz.firstChild.style.width = a.scrollWidth - a.clientWidth + f + "px"
				} else
					this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
				return !this.checkedOverlay && a.clientHeight > 0 && (0 == d && this.overlayHack(), this.checkedOverlay = !0), {
					right: c ? d : 0,
					bottom: b ? d : 0
				}
			},
			setScrollLeft: function (a) {
				this.horiz.scrollLeft != a && (this.horiz.scrollLeft = a)
			},
			setScrollTop: function (a) {
				this.vert.scrollTop != a && (this.vert.scrollTop = a)
			},
			overlayHack: function () {
				var a = yf && !uf ? "12px" : "18px";
				this.horiz.style.minHeight = this.vert.style.minWidth = a;
				var b = this,
				c = function (a) {
					re(a) != b.vert && re(a) != b.horiz && Db(b.cm, Ub)(a)
				};
				xg(this.vert, "mousedown", c),
				xg(this.horiz, "mousedown", c)
			},
			clear: function () {
				var a = this.horiz.parentNode;
				a.removeChild(this.horiz),
				a.removeChild(this.vert)
			}
		}, p.prototype),
	q.prototype = He({
			update: function () {
				return {
					bottom: 0,
					right: 0
				}
			},
			setScrollLeft: function () {},
			setScrollTop: function () {},
			clear: function () {}
		}, q.prototype),
	a.scrollbarModel = {
		native: p,
		null: q
	},
	z.prototype.signal = function (a, b) {
		xe(a, b) && this.events.push(arguments)
	},
	z.prototype.finish = function () {
		for (var a = 0; a < this.events.length; a++)
			zg.apply(null, this.events[a])
	};
	var Ff = a.Pos = function (a, b) {
		return this instanceof Ff ? (this.line = a, void(this.ch = b)) : new Ff(a, b)
	},
	Gf = a.cmpPos = function (a, b) {
		return a.line - b.line || a.ch - b.ch
	},
	Hf = null;
	da.prototype = He({
			init: function (a) {
				function b(a) {
					if (d.somethingSelected())
						Hf = d.getSelections(), c.inaccurateSelection && (c.prevInput = "", c.inaccurateSelection = !1, f.value = Hf.join("\n"), Ig(f));
					else {
						if (!d.options.lineWiseCopyCut)
							return;
						var b = ba(d);
						Hf = b.text,
						"cut" == a.type ? d.setSelections(b.ranges, null, Dg) : (c.prevInput = "", f.value = b.text.join("\n"), Ig(f))
					}
					"cut" == a.type && (d.state.cutIncoming = !0)
				}
				var c = this,
				d = this.cm,
				e = this.wrapper = ea(),
				f = this.textarea = e.firstChild;
				a.wrapper.insertBefore(e, a.wrapper.firstChild),
				wf && (f.style.width = "0px"),
				xg(f, "input", function () {
					nf && of >= 9 && c.hasSelection && (c.hasSelection = null),
					c.poll()
				}),
				xg(f, "paste", function (a) {
					return !!_(a, d) || (d.state.pasteIncoming = !0, void c.fastPoll())
				}),
				xg(f, "cut", b),
				xg(f, "copy", b),
				xg(a.scroller, "paste", function (b) {
					Sb(a, b) || (d.state.pasteIncoming = !0, c.focus())
				}),
				xg(a.lineSpace, "selectstart", function (b) {
					Sb(a, b) || ug(b)
				}),
				xg(f, "compositionstart", function () {
					var a = d.getCursor("from");
					c.composing = {
						start: a,
						range: d.markText(a, d.getCursor("to"), {
							className: "CodeMirror-composing"
						})
					}
				}),
				xg(f, "compositionend", function () {
					c.composing && (c.poll(), c.composing.range.clear(), c.composing = null)
				})
			},
			prepareSelection: function () {
				var a = this.cm,
				b = a.display,
				c = a.doc,
				d = Ia(a);
				if (a.options.moveInputWithCursor) {
					var e = mb(a, c.sel.primary().head, "div"),
					f = b.wrapper.getBoundingClientRect(),
					g = b.lineDiv.getBoundingClientRect();
					d.teTop = Math.max(0, Math.min(b.wrapper.clientHeight - 10, e.top + g.top - f.top)),
					d.teLeft = Math.max(0, Math.min(b.wrapper.clientWidth - 10, e.left + g.left - f.left))
				}
				return d
			},
			showSelection: function (a) {
				var b = this.cm,
				c = b.display;
				Oe(c.cursorDiv, a.cursors),
				Oe(c.selectionDiv, a.selection),
				null != a.teTop && (this.wrapper.style.top = a.teTop + "px", this.wrapper.style.left = a.teLeft + "px")
			},
			reset: function (a) {
				if (!this.contextMenuPending) {
					var b,
					c,
					d = this.cm,
					e = d.doc;
					if (d.somethingSelected()) {
						this.prevInput = "";
						var f = e.sel.primary();
						b = Wg && (f.to().line - f.from().line > 100 || (c = d.getSelection()).length > 1e3);
						var g = b ? "-" : c || d.getSelection();
						this.textarea.value = g,
						d.state.focused && Ig(this.textarea),
						nf && of >= 9 && (this.hasSelection = g)
					} else
						a || (this.prevInput = this.textarea.value = "", nf && of >= 9 && (this.hasSelection = null));
					this.inaccurateSelection = b
				}
			},
			getField: function () {
				return this.textarea
			},
			supportsTouch: function () {
				return !1
			},
			focus: function () {
				if ("nocursor" != this.cm.options.readOnly && (!xf || Pe() != this.textarea))
					try {
						this.textarea.focus()
					} catch (a) {}
			},
			blur: function () {
				this.textarea.blur()
			},
			resetPosition: function () {
				this.wrapper.style.top = this.wrapper.style.left = 0
			},
			receivedFocus: function () {
				this.slowPoll()
			},
			slowPoll: function () {
				var a = this;
				a.pollingFast || a.polling.set(this.cm.options.pollInterval, function () {
					a.poll(),
					a.cm.state.focused && a.slowPoll()
				})
			},
			fastPoll: function () {
				function a() {
					var d = c.poll();
					d || b ? (c.pollingFast = !1, c.slowPoll()) : (b = !0, c.polling.set(60, a))
				}
				var b = !1,
				c = this;
				c.pollingFast = !0,
				c.polling.set(20, a)
			},
			poll: function () {
				var a = this.cm,
				b = this.textarea,
				c = this.prevInput;
				if (this.contextMenuPending || !a.state.focused || Vg(b) && !c || Z(a) || a.options.disableInput || a.state.keySeq)
					return !1;
				var d = b.value;
				if (d == c && !a.somethingSelected())
					return !1;
				if (nf && of >= 9 && this.hasSelection === d || yf && /[\uf700-\uf7ff]/.test(d))
					return a.display.input.reset(), !1;
				if (a.doc.sel == a.display.selForContextMenu) {
					var e = d.charCodeAt(0);
					if (8203 != e || c || (c = ""), 8666 == e)
						return this.reset(), this.cm.execCommand("undo")
				}
				for (var f = 0, g = Math.min(c.length, d.length); f < g && c.charCodeAt(f) == d.charCodeAt(f); )
					++f;
				var h = this;
				return Cb(a, function () {
					$(a, d.slice(f), c.length - f, null, h.composing ? "*compose" : null),
					d.length > 1e3 || d.indexOf("\n") > -1 ? b.value = h.prevInput = "" : h.prevInput = d,
					h.composing && (h.composing.range.clear(), h.composing.range = a.markText(h.composing.start, a.getCursor("to"), {
								className: "CodeMirror-composing"
							}))
				}),
				!0
			},
			ensurePolled: function () {
				this.pollingFast && this.poll() && (this.pollingFast = !1)
			},
			onKeyPress: function () {
				nf && of >= 9 && (this.hasSelection = null),
				this.fastPoll()
			},
			onContextMenu: function (a) {
				function b() {
					if (null != g.selectionStart) {
						var a = e.somethingSelected(),
						b = "" + (a ? g.value : "");
						g.value = "",
						g.value = b,
						d.prevInput = a ? "" : "",
						g.selectionStart = 1,
						g.selectionEnd = b.length,
						f.selForContextMenu = e.doc.sel
					}
				}
				function c() {
					if (d.contextMenuPending = !1, d.wrapper.style.position = "relative", g.style.cssText = k, nf && of < 9 && f.scrollbars.setScrollTop(f.scroller.scrollTop = i), null != g.selectionStart) {
						(!nf || nf && of < 9) && b();
						var a = 0,
						c = function () {
							f.selForContextMenu == e.doc.sel && 0 == g.selectionStart && g.selectionEnd > 0 && "" == d.prevInput ? Db(e, dg.selectAll)(e) : a++ < 10 ? f.detectingSelectAll = setTimeout(c, 500) : f.input.reset()
						};
						f.detectingSelectAll = setTimeout(c, 200)
					}
				}
				var d = this,
				e = d.cm,
				f = e.display,
				g = d.textarea,
				h = Tb(e, a),
				i = f.scroller.scrollTop;
				if (h && !sf) {
					var j = e.options.resetSelectionOnContextMenu;
					j && e.doc.sel.contains(h) == -1 && Db(e, Ba)(e.doc, oa(h), Dg);
					var k = g.style.cssText;
					if (d.wrapper.style.position = "absolute", g.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (a.clientY - 5) + "px; left: " + (a.clientX - 5) + "px; z-index: 1000; background: " + (nf ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", pf)
						var l = window.scrollY;
					if (f.input.focus(), pf && window.scrollTo(null, l), f.input.reset(), e.somethingSelected() || (g.value = d.prevInput = " "), d.contextMenuPending = !0, f.selForContextMenu = e.doc.sel, clearTimeout(f.detectingSelectAll), nf && of >= 9 && b(), Cf) {
						wg(a);
						var m = function () {
							yg(window, "mouseup", m),
							setTimeout(c, 20)
						};
						xg(window, "mouseup", m)
					} else
						setTimeout(c, 50)
				}
			},
			setUneditable: Fe,
			needsContentAttribute: !1
		}, da.prototype),
	fa.prototype = He({
			init: function (a) {
				function b(a) {
					if (d.somethingSelected())
						Hf = d.getSelections(), "cut" == a.type && d.replaceSelection("", null, "cut");
					else {
						if (!d.options.lineWiseCopyCut)
							return;
						var b = ba(d);
						Hf = b.text,
						"cut" == a.type && d.operation(function () {
							d.setSelections(b.ranges, 0, Dg),
							d.replaceSelection("", null, "cut")
						})
					}
					if (a.clipboardData && !wf)
						a.preventDefault(), a.clipboardData.clearData(), a.clipboardData.setData("text/plain", Hf.join("\n"));
					else {
						var c = ea(),
						e = c.firstChild;
						d.display.lineSpace.insertBefore(c, d.display.lineSpace.firstChild),
						e.value = Hf.join("\n");
						var f = document.activeElement;
						Ig(e),
						setTimeout(function () {
							d.display.lineSpace.removeChild(c),
							f.focus()
						}, 50)
					}
				}
				var c = this,
				d = c.cm,
				e = c.div = a.lineDiv;
				e.contentEditable = "true",
				ca(e),
				xg(e, "paste", function (a) {
					_(a, d)
				}),
				xg(e, "compositionstart", function (a) {
					var b = a.data;
					if (c.composing = {
							sel: d.doc.sel,
							data: b,
							startData: b
						}, b) {
						var e = d.doc.sel.primary(),
						f = d.getLine(e.head.line),
						g = f.indexOf(b, Math.max(0, e.head.ch - b.length));
						g > -1 && g <= e.head.ch && (c.composing.sel = oa(Ff(e.head.line, g), Ff(e.head.line, g + b.length)))
					}
				}),
				xg(e, "compositionupdate", function (a) {
					c.composing.data = a.data
				}),
				xg(e, "compositionend", function (a) {
					var b = c.composing;
					b && (a.data == b.startData || /\u200b/.test(a.data) || (b.data = a.data), setTimeout(function () {
							b.handled || c.applyComposition(b),
							c.composing == b && (c.composing = null)
						}, 50))
				}),
				xg(e, "touchstart", function () {
					c.forceCompositionEnd()
				}),
				xg(e, "input", function () {
					c.composing || c.pollContent() || Cb(c.cm, function () {
						Ib(d)
					})
				}),
				xg(e, "copy", b),
				xg(e, "cut", b)
			},
			prepareSelection: function () {
				var a = Ia(this.cm, !1);
				return a.focus = this.cm.state.focused,
				a
			},
			showSelection: function (a) {
				a && this.cm.display.view.length && (a.focus && this.showPrimarySelection(), this.showMultipleSelections(a))
			},
			showPrimarySelection: function () {
				var a = window.getSelection(),
				b = this.cm.doc.sel.primary(),
				c = ia(this.cm, a.anchorNode, a.anchorOffset),
				d = ia(this.cm, a.focusNode, a.focusOffset);
				if (!c || c.bad || !d || d.bad || 0 != Gf(X(c, d), b.from()) || 0 != Gf(W(c, d), b.to())) {
					var e = ga(this.cm, b.from()),
					f = ga(this.cm, b.to());
					if (e || f) {
						var g = this.cm.display.view,
						h = a.rangeCount && a.getRangeAt(0);
						if (e) {
							if (!f) {
								var i = g[g.length - 1].measure,
								j = i.maps ? i.maps[i.maps.length - 1] : i.map;
								f = {
									node: j[j.length - 1],
									offset: j[j.length - 2] - j[j.length - 3]
								}
							}
						} else
							e = {
								node: g[0].measure.map[2],
								offset: 0
							};
						try {
							var k = Jg(e.node, e.offset, f.offset, f.node)
						} catch (a) {}
						k && (a.removeAllRanges(), a.addRange(k), h && null == a.anchorNode ? a.addRange(h) : kf && this.startGracePeriod()),
						this.rememberSelection()
					}
				}
			},
			startGracePeriod: function () {
				var a = this;
				clearTimeout(this.gracePeriod),
				this.gracePeriod = setTimeout(function () {
						a.gracePeriod = !1,
						a.selectionChanged() && a.cm.operation(function () {
							a.cm.curOp.selectionChanged = !0
						})
					}, 20)
			},
			showMultipleSelections: function (a) {
				Oe(this.cm.display.cursorDiv, a.cursors),
				Oe(this.cm.display.selectionDiv, a.selection)
			},
			rememberSelection: function () {
				var a = window.getSelection();
				this.lastAnchorNode = a.anchorNode,
				this.lastAnchorOffset = a.anchorOffset,
				this.lastFocusNode = a.focusNode,
				this.lastFocusOffset = a.focusOffset
			},
			selectionInEditor: function () {
				var a = window.getSelection();
				if (!a.rangeCount)
					return !1;
				var b = a.getRangeAt(0).commonAncestorContainer;
				return Ng(this.div, b)
			},
			focus: function () {
				"nocursor" != this.cm.options.readOnly && this.div.focus()
			},
			blur: function () {
				this.div.blur()
			},
			getField: function () {
				return this.div
			},
			supportsTouch: function () {
				return !0
			},
			receivedFocus: function () {
				function a() {
					b.cm.state.focused && (b.pollSelection(), b.polling.set(b.cm.options.pollInterval, a))
				}
				var b = this;
				this.selectionInEditor() ? this.pollSelection() : Cb(this.cm, function () {
					b.cm.curOp.selectionChanged = !0
				}),
				this.polling.set(this.cm.options.pollInterval, a)
			},
			selectionChanged: function () {
				var a = window.getSelection();
				return a.anchorNode != this.lastAnchorNode || a.anchorOffset != this.lastAnchorOffset || a.focusNode != this.lastFocusNode || a.focusOffset != this.lastFocusOffset
			},
			pollSelection: function () {
				if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
					var a = window.getSelection(),
					b = this.cm;
					this.rememberSelection();
					var c = ia(b, a.anchorNode, a.anchorOffset),
					d = ia(b, a.focusNode, a.focusOffset);
					c && d && Cb(b, function () {
						Ba(b.doc, oa(c, d), Dg),
						(c.bad || d.bad) && (b.curOp.selectionChanged = !0)
					})
				}
			},
			pollContent: function () {
				var a = this.cm,
				b = a.display,
				c = a.doc.sel.primary(),
				d = c.from(),
				e = c.to();
				if (d.line < b.viewFrom || e.line > b.viewTo - 1)
					return !1;
				var f;
				if (d.line == b.viewFrom || 0 == (f = Lb(a, d.line)))
					var g = Zd(b.view[0].line), h = b.view[0].node;
				else
					var g = Zd(b.view[f].line), h = b.view[f - 1].node.nextSibling;
				var i = Lb(a, e.line);
				if (i == b.view.length - 1)
					var j = b.viewTo - 1, k = b.lineDiv.lastChild;
				else
					var j = Zd(b.view[i + 1].line) - 1, k = b.view[i + 1].node.previousSibling;
				for (var l = Ug(ka(a, h, k, g, j)), m = Wd(a.doc, Ff(g, 0), Ff(j, Vd(a.doc, j).text.length)); l.length > 1 && m.length > 1; )
					if (Ce(l) == Ce(m))
						l.pop(), m.pop(), j--;
					else {
						if (l[0] != m[0])
							break;
						l.shift(),
						m.shift(),
						g++
					}
				for (var n = 0, o = 0, p = l[0], q = m[0], r = Math.min(p.length, q.length); n < r && p.charCodeAt(n) == q.charCodeAt(n); )
					++n;
				for (var s = Ce(l), t = Ce(m), u = Math.min(s.length - (1 == l.length ? n : 0), t.length - (1 == m.length ? n : 0)); o < u && s.charCodeAt(s.length - o - 1) == t.charCodeAt(t.length - o - 1); )
					++o;
				l[l.length - 1] = s.slice(0, s.length - o),
				l[0] = l[0].slice(n);
				var v = Ff(g, n),
				w = Ff(j, m.length ? Ce(m).length - o : 0);
				return l.length > 1 || l[0] || Gf(v, w) ? (Cc(a.doc, l, v, w, "+input"), !0) : void 0
			},
			ensurePolled: function () {
				this.forceCompositionEnd()
			},
			reset: function () {
				this.forceCompositionEnd()
			},
			forceCompositionEnd: function () {
				this.composing && !this.composing.handled && (this.applyComposition(this.composing), this.composing.handled = !0, this.div.blur(), this.div.focus())
			},
			applyComposition: function (a) {
				a.data && a.data != a.startData && Db(this.cm, $)(this.cm, a.data, 0, a.sel)
			},
			setUneditable: function (a) {
				a.setAttribute("contenteditable", "false")
			},
			onKeyPress: function (a) {
				a.preventDefault(),
				Db(this.cm, $)(this.cm, String.fromCharCode(null == a.charCode ? a.keyCode : a.charCode), 0)
			},
			onContextMenu: Fe,
			resetPosition: Fe,
			needsContentAttribute: !0
		}, fa.prototype),
	a.inputStyles = {
		textarea: da,
		contenteditable: fa
	},
	la.prototype = {
		primary: function () {
			return this.ranges[this.primIndex]
		},
		equals: function (a) {
			if (a == this)
				return !0;
			if (a.primIndex != this.primIndex || a.ranges.length != this.ranges.length)
				return !1;
			for (var b = 0; b < this.ranges.length; b++) {
				var c = this.ranges[b],
				d = a.ranges[b];
				if (0 != Gf(c.anchor, d.anchor) || 0 != Gf(c.head, d.head))
					return !1
			}
			return !0
		},
		deepCopy: function () {
			for (var a = [], b = 0; b < this.ranges.length; b++)
				a[b] = new ma(V(this.ranges[b].anchor), V(this.ranges[b].head));
			return new la(a, this.primIndex)
		},
		somethingSelected: function () {
			for (var a = 0; a < this.ranges.length; a++)
				if (!this.ranges[a].empty())
					return !0;
			return !1
		},
		contains: function (a, b) {
			b || (b = a);
			for (var c = 0; c < this.ranges.length; c++) {
				var d = this.ranges[c];
				if (Gf(b, d.from()) >= 0 && Gf(a, d.to()) <= 0)
					return c
			}
			return -1
		}
	},
	ma.prototype = {
		from: function () {
			return X(this.anchor, this.head)
		},
		to: function () {
			return W(this.anchor, this.head)
		},
		empty: function () {
			return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
		}
	};
	var If,
	Jf,
	Kf,
	Lf = {
		left: 0,
		right: 0,
		top: 0,
		bottom: 0
	},
	Mf = null,
	Nf = 0,
	Of = 0,
	Pf = 0,
	Qf = null;
	nf ? Qf =  - .53 : kf ? Qf = 15 : rf ? Qf =  - .7 : tf && (Qf = -1 / 3);
	var Rf = function (a) {
		var b = a.wheelDeltaX,
		c = a.wheelDeltaY;
		return null == b && a.detail && a.axis == a.HORIZONTAL_AXIS && (b = a.detail),
		null == c && a.detail && a.axis == a.VERTICAL_AXIS ? c = a.detail : null == c && (c = a.wheelDelta), {
			x: b,
			y: c
		}
	};
	a.wheelEventPixels = function (a) {
		var b = Rf(a);
		return b.x *= Qf,
		b.y *= Qf,
		b
	};
	var Sf = new ze,
	Tf = null,
	Uf = a.changeEnd = function (a) {
		return a.text ? Ff(a.from.line + a.text.length - 1, Ce(a.text).length + (1 == a.text.length ? a.from.ch : 0)) : a.to
	};
	a.prototype = {
		constructor: a,
		focus: function () {
			window.focus(),
			this.display.input.focus()
		},
		setOption: function (a, b) {
			var c = this.options,
			d = c[a];
			c[a] == b && "mode" != a || (c[a] = b, Wf.hasOwnProperty(a) && Db(this, Wf[a])(this, b, d))
		},
		getOption: function (a) {
			return this.options[a]
		},
		getDoc: function () {
			return this.doc
		},
		addKeyMap: function (a, b) {
			this.state.keyMaps[b ? "push" : "unshift"](Rc(a))
		},
		removeKeyMap: function (a) {
			for (var b = this.state.keyMaps, c = 0; c < b.length; ++c)
				if (b[c] == a || b[c].name == a)
					return b.splice(c, 1), !0
		},
		addOverlay: Eb(function (b, c) {
			var d = b.token ? b : a.getMode(this.options, b);
			if (d.startState)
				throw new Error("Overlays may not be stateful.");
			this.state.overlays.push({
				mode: d,
				modeSpec: b,
				opaque: c && c.opaque
			}),
			this.state.modeGen++,
			Ib(this)
		}),
		removeOverlay: Eb(function (a) {
			for (var b = this.state.overlays, c = 0; c < b.length; ++c) {
				var d = b[c].modeSpec;
				if (d == a || "string" == typeof a && d.name == a)
					return b.splice(c, 1), this.state.modeGen++, void Ib(this)
			}
		}),
		indentLine: Eb(function (a, b, c) {
			"string" != typeof b && "number" != typeof b && (b = null == b ? this.options.smartIndent ? "smart" : "prev" : b ? "add" : "subtract"),
			sa(this.doc, a) && Kc(this, a, b, c)
		}),
		indentSelection: Eb(function (a) {
			for (var b = this.doc.sel.ranges, c = -1, d = 0; d < b.length; d++) {
				var e = b[d];
				if (e.empty())
					e.head.line > c && (Kc(this, e.head.line, a, !0), c = e.head.line, d == this.doc.sel.primIndex && Ic(this));
				else {
					var f = e.from(),
					g = e.to(),
					h = Math.max(c, f.line);
					c = Math.min(this.lastLine(), g.line - (g.ch ? 0 : 1)) + 1;
					for (var i = h; i < c; ++i)
						Kc(this, i, a);
					var j = this.doc.sel.ranges;
					0 == f.ch && b.length == j.length && j[d].from().ch > 0 && xa(this.doc, d, new ma(f, j[d].to()), Dg)
				}
			}
		}),
		getTokenAt: function (a, b) {
			return Cd(this, a, b)
		},
		getLineTokens: function (a, b) {
			return Cd(this, Ff(a), b, !0)
		},
		getTokenTypeAt: function (a) {
			a = qa(this.doc, a);
			var b,
			c = Fd(this, Vd(this.doc, a.line)),
			d = 0,
			e = (c.length - 1) / 2,
			f = a.ch;
			if (0 == f)
				b = c[2];
			else
				for (; ; ) {
					var g = d + e >> 1;
					if ((g ? c[2 * g - 1] : 0) >= f)
						e = g;
					else {
						if (!(c[2 * g + 1] < f)) {
							b = c[2 * g + 2];
							break
						}
						d = g + 1
					}
				}
			var h = b ? b.indexOf("cm-overlay ") : -1;
			return h < 0 ? b : 0 == h ? null : b.slice(0, h - 1)
		},
		getModeAt: function (b) {
			var c = this.doc.mode;
			return c.innerMode ? a.innerMode(c, this.getTokenAt(b).state).mode : c
		},
		getHelper: function (a, b) {
			return this.getHelpers(a, b)[0]
		},
		getHelpers: function (a, b) {
			var c = [];
			if (!ag.hasOwnProperty(b))
				return c;
			var d = ag[b],
			e = this.getModeAt(a);
			if ("string" == typeof e[b])
				d[e[b]] && c.push(d[e[b]]);
			else if (e[b])
				for (var f = 0; f < e[b].length; f++) {
					var g = d[e[b][f]];
					g && c.push(g)
				}
			else
				e.helperType && d[e.helperType] ? c.push(d[e.helperType]) : d[e.name] && c.push(d[e.name]);
			for (var f = 0; f < d._global.length; f++) {
				var h = d._global[f];
				h.pred(e, this) && De(c, h.val) == -1 && c.push(h.val)
			}
			return c
		},
		getStateAfter: function (a, b) {
			var c = this.doc;
			return a = pa(c, null == a ? c.first + c.size - 1 : a),
			Pa(this, a + 1, b)
		},
		cursorCoords: function (a, b) {
			var c,
			d = this.doc.sel.primary();
			return c = null == a ? d.head : "object" == typeof a ? qa(this.doc, a) : a ? d.from() : d.to(),
			mb(this, c, b || "page")
		},
		charCoords: function (a, b) {
			return lb(this, qa(this.doc, a), b || "page")
		},
		coordsChar: function (a, b) {
			return a = kb(this, a, b || "page"),
			pb(this, a.left, a.top)
		},
		lineAtHeight: function (a, b) {
			return a = kb(this, {
					top: a,
					left: 0
				}, b || "page").top,
			$d(this.doc, a + this.display.viewOffset)
		},
		heightAtLine: function (a, b) {
			var c,
			d = !1;
			if ("number" == typeof a) {
				var e = this.doc.first + this.doc.size - 1;
				a < this.doc.first ? a = this.doc.first : a > e && (a = e, d = !0),
				c = Vd(this.doc, a)
			} else
				c = a;
			return jb(this, c, {
				top: 0,
				left: 0
			}, b || "page").top + (d ? this.doc.height - _d(c) : 0)
		},
		defaultTextHeight: function () {
			return rb(this.display)
		},
		defaultCharWidth: function () {
			return sb(this.display)
		},
		setGutterMarker: Eb(function (a, b, c) {
			return Lc(this.doc, a, "gutter", function (a) {
				var d = a.gutterMarkers || (a.gutterMarkers = {});
				return d[b] = c,
				!c && Ke(d) && (a.gutterMarkers = null),
				!0
			})
		}),
		clearGutter: Eb(function (a) {
			var b = this,
			c = b.doc,
			d = c.first;
			c.iter(function (c) {
				c.gutterMarkers && c.gutterMarkers[a] && (c.gutterMarkers[a] = null, Jb(b, d, "gutter"), Ke(c.gutterMarkers) && (c.gutterMarkers = null)),
				++d
			})
		}),
		lineInfo: function (a) {
			if ("number" == typeof a) {
				if (!sa(this.doc, a))
					return null;
				var b = a;
				if (a = Vd(this.doc, a), !a)
					return null
			} else {
				var b = Zd(a);
				if (null == b)
					return null
			}
			return {
				line: b,
				handle: a,
				text: a.text,
				gutterMarkers: a.gutterMarkers,
				textClass: a.textClass,
				bgClass: a.bgClass,
				wrapClass: a.wrapClass,
				widgets: a.widgets
			}
		},
		getViewport: function () {
			return {
				from: this.display.viewFrom,
				to: this.display.viewTo
			}
		},
		addWidget: function (a, b, c, d, e) {
			var f = this.display;
			a = mb(this, qa(this.doc, a));
			var g = a.bottom,
			h = a.left;
			if (b.style.position = "absolute", b.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(b), f.sizer.appendChild(b), "over" == d)
				g = a.top;
			else if ("above" == d || "near" == d) {
				var i = Math.max(f.wrapper.clientHeight, this.doc.height),
				j = Math.max(f.sizer.clientWidth, f.lineSpace.clientWidth);
				("above" == d || a.bottom + b.offsetHeight > i) && a.top > b.offsetHeight ? g = a.top - b.offsetHeight : a.bottom + b.offsetHeight <= i && (g = a.bottom),
				h + b.offsetWidth > j && (h = j - b.offsetWidth)
			}
			b.style.top = g + "px",
			b.style.left = b.style.right = "",
			"right" == e ? (h = f.sizer.clientWidth - b.offsetWidth, b.style.right = "0px") : ("left" == e ? h = 0 : "middle" == e && (h = (f.sizer.clientWidth - b.offsetWidth) / 2), b.style.left = h + "px"),
			c && Fc(this, h, g, h + b.offsetWidth, g + b.offsetHeight)
		},
		triggerOnKeyDown: Eb(ic),
		triggerOnKeyPress: Eb(lc),
		triggerOnKeyUp: kc,
		execCommand: function (a) {
			if (dg.hasOwnProperty(a))
				return dg[a](this)
		},
		triggerElectric: Eb(function (a) {
			aa(this, a)
		}),
		findPosH: function (a, b, c, d) {
			var e = 1;
			b < 0 && (e = -1, b = -b);
			for (var f = 0, g = qa(this.doc, a); f < b && (g = Nc(this.doc, g, e, c, d), !g.hitSide); ++f);
			return g
		},
		moveH: Eb(function (a, b) {
			var c = this;
			c.extendSelectionsBy(function (d) {
				return c.display.shift || c.doc.extend || d.empty() ? Nc(c.doc, d.head, a, b, c.options.rtlMoveVisually) : a < 0 ? d.from() : d.to()
			}, Fg)
		}),
		deleteH: Eb(function (a, b) {
			var c = this.doc.sel,
			d = this.doc;
			c.somethingSelected() ? d.replaceSelection("", null, "+delete") : Mc(this, function (c) {
				var e = Nc(d, c.head, a, b, !1);
				return a < 0 ? {
					from: e,
					to: c.head
				}
				 : {
					from: c.head,
					to: e
				}
			})
		}),
		findPosV: function (a, b, c, d) {
			var e = 1,
			f = d;
			b < 0 && (e = -1, b = -b);
			for (var g = 0, h = qa(this.doc, a); g < b; ++g) {
				var i = mb(this, h, "div");
				if (null == f ? f = i.left : i.left = f, h = Oc(this, i, e, c), h.hitSide)
					break
			}
			return h
		},
		moveV: Eb(function (a, b) {
			var c = this,
			d = this.doc,
			e = [],
			f = !c.display.shift && !d.extend && d.sel.somethingSelected();
			if (d.extendSelectionsBy(function (g) {
					if (f)
						return a < 0 ? g.from()
							 : g.to();
						var h = mb(c, g.head, "div");
						null != g.goalColumn && (h.left = g.goalColumn),
						e.push(h.left);
						var i = Oc(c, h, a, b);
						return "page" == b && g == d.sel.primary() && Hc(c, null, lb(c, i, "div").top - h.top),
						i
					}, Fg), e.length)for (var g = 0; g < d.sel.ranges.length; g++)
					d.sel.ranges[g].goalColumn = e[g]
		}),
		findWordAt: function (a) {
			var b = this.doc,
			c = Vd(b, a.line).text,
			d = a.ch,
			e = a.ch;
			if (c) {
				var f = this.getHelper(a, "wordChars");
				(a.xRel < 0 || e == c.length) && d ? --d : ++e;
				for (var g = c.charAt(d), h = Je(g, f) ? function (a) {
					return Je(a, f)
				}
					 : /\s/.test(g) ? function (a) {
					return /\s/.test(a)
				}
					 : function (a) {
					return !/\s/.test(a) && !Je(a)
				}; d > 0 && h(c.charAt(d - 1)); )
					--d;
				for (; e < c.length && h(c.charAt(e)); )
					++e
			}
			return new ma(Ff(a.line, d), Ff(a.line, e))
		},
		toggleOverwrite: function (a) {
			null != a && a == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? Rg(this.display.cursorDiv, "CodeMirror-overwrite") : Qg(this.display.cursorDiv, "CodeMirror-overwrite"), zg(this, "overwriteToggle", this, this.state.overwrite))
		},
		hasFocus: function () {
			return this.display.input.getField() == Pe()
		},
		scrollTo: Eb(function (a, b) {
			null == a && null == b || Jc(this),
			null != a && (this.curOp.scrollLeft = a),
			null != b && (this.curOp.scrollTop = b)
		}),
		getScrollInfo: function () {
			var a = this.display.scroller;
			return {
				left: a.scrollLeft,
				top: a.scrollTop,
				height: a.scrollHeight - Ta(this) - this.display.barHeight,
				width: a.scrollWidth - Ta(this) - this.display.barWidth,
				clientHeight: Va(this),
				clientWidth: Ua(this)
			}
		},
		scrollIntoView: Eb(function (a, b) {
			if (null == a ? (a = {
						from: this.doc.sel.primary().head,
						to: null
					}, null == b && (b = this.options.cursorScrollMargin)) : "number" == typeof a ? a = {
					from: Ff(a, 0),
					to: null
				}
				 : null == a.from && (a = {
						from: a,
						to: null
					}), a.to || (a.to = a.from), a.margin = b || 0, null != a.from.line)
				Jc(this), this.curOp.scrollToPos = a;
			else {
				var c = Gc(this, Math.min(a.from.left, a.to.left), Math.min(a.from.top, a.to.top) - a.margin, Math.max(a.from.right, a.to.right), Math.max(a.from.bottom, a.to.bottom) + a.margin);
				this.scrollTo(c.scrollLeft, c.scrollTop)
			}
		}),
		setSize: Eb(function (a, b) {
			function c(a) {
				return "number" == typeof a || /^\d+$/.test(String(a)) ? a + "px" : a
			}
			var d = this;
			null != a && (d.display.wrapper.style.width = c(a)),
			null != b && (d.display.wrapper.style.height = c(b)),
			d.options.lineWrapping && fb(this);
			var e = d.display.viewFrom;
			d.doc.iter(e, d.display.viewTo, function (a) {
				if (a.widgets)
					for (var b = 0; b < a.widgets.length; b++)
						if (a.widgets[b].noHScroll) {
							Jb(d, e, "widget");
							break
						}
				++e
			}),
			d.curOp.forceUpdate = !0,
			zg(d, "refresh", this)
		}),
		operation: function (a) {
			return Cb(this, a)
		},
		refresh: Eb(function () {
			var a = this.display.cachedTextHeight;
			Ib(this),
			this.curOp.forceUpdate = !0,
			gb(this),
			this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop),
			k(this),
			(null == a || Math.abs(a - rb(this.display)) > .5) && g(this),
			zg(this, "refresh", this)
		}),
		swapDoc: Eb(function (a) {
			var b = this.doc;
			return b.cm = null,
			Ud(this, a),
			gb(this),
			this.display.input.reset(),
			this.scrollTo(a.scrollLeft, a.scrollTop),
			this.curOp.forceScroll = !0,
			te(this, "swapDoc", this, b),
			b
		}),
		getInputField: function () {
			return this.display.input.getField()
		},
		getWrapperElement: function () {
			return this.display.wrapper
		},
		getScrollerElement: function () {
			return this.display.scroller
		},
		getGutterElement: function () {
			return this.display.gutters
		}
	},
	ye(a);
	var Vf = a.defaults = {},
	Wf = a.optionHandlers = {},
	Xf = a.Init = {
		toString: function () {
			return "CodeMirror.Init"
		}
	};
	Pc("value", "", function (a, b) {
		a.setValue(b)
	}, !0),
	Pc("mode", null, function (a, b) {
		a.doc.modeOption = b,
		c(a)
	}, !0),
	Pc("indentUnit", 2, c, !0),
	Pc("indentWithTabs", !1),
	Pc("smartIndent", !0),
	Pc("tabSize", 4, function (a) {
		d(a),
		gb(a),
		Ib(a)
	}, !0),
	Pc("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function (b, c, d) {
		b.state.specialChars = new RegExp(c.source + (c.test("\t") ? "" : "|\t"), "g"),
		d != a.Init && b.refresh()
	}),
	Pc("specialCharPlaceholder", Jd, function (a) {
		a.refresh()
	}, !0),
	Pc("electricChars", !0),
	Pc("inputStyle", xf ? "contenteditable" : "textarea", function () {
		throw new Error("inputStyle can not (yet) be changed in a running editor")
	}, !0),
	Pc("rtlMoveVisually", !zf),
	Pc("wholeLineUpdateBefore", !0),
	Pc("theme", "default", function (a) {
		h(a),
		i(a)
	}, !0),
	Pc("keyMap", "default", function (b, c, d) {
		var e = Rc(c),
		f = d != a.Init && Rc(d);
		f && f.detach && f.detach(b, e),
		e.attach && e.attach(b, f || null)
	}),
	Pc("extraKeys", null),
	Pc("lineWrapping", !1, e, !0),
	Pc("gutters", [], function (a) {
		n(a.options),
		i(a)
	}, !0),
	Pc("fixedGutter", !0, function (a, b) {
		a.display.gutters.style.left = b ? y(a.display) + "px" : "0",
		a.refresh()
	}, !0),
	Pc("coverGutterNextToScrollbar", !1, function (a) {
		s(a)
	}, !0),
	Pc("scrollbarStyle", "native", function (a) {
		r(a),
		s(a),
		a.display.scrollbars.setScrollTop(a.doc.scrollTop),
		a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)
	}, !0),
	Pc("lineNumbers", !1, function (a) {
		n(a.options),
		i(a)
	}, !0),
	Pc("firstLineNumber", 1, i, !0),
	Pc("lineNumberFormatter", function (a) {
		return a
	}, i, !0),
	Pc("showCursorWhenSelecting", !1, Ha, !0),
	Pc("resetSelectionOnContextMenu", !0),
	Pc("lineWiseCopyCut", !0),
	Pc("readOnly", !1, function (a, b) {
		"nocursor" == b ? (oc(a), a.display.input.blur(), a.display.disabled = !0) : (a.display.disabled = !1, b || a.display.input.reset())
	}),
	Pc("disableInput", !1, function (a, b) {
		b || a.display.input.reset()
	}, !0),
	Pc("dragDrop", !0, Qb),
	Pc("cursorBlinkRate", 530),
	Pc("cursorScrollMargin", 0),
	Pc("cursorHeight", 1, Ha, !0),
	Pc("singleCursorHeightPerLine", !0, Ha, !0),
	Pc("workTime", 100),
	Pc("workDelay", 100),
	Pc("flattenSpans", !0, d, !0),
	Pc("addModeClass", !1, d, !0),
	Pc("pollInterval", 100),
	Pc("undoDepth", 200, function (a, b) {
		a.doc.history.undoDepth = b
	}),
	Pc("historyEventDelay", 1250),
	Pc("viewportMargin", 10, function (a) {
		a.refresh()
	}, !0),
	Pc("maxHighlightLength", 1e4, d, !0),
	Pc("moveInputWithCursor", !0, function (a, b) {
		b || a.display.input.resetPosition()
	}),
	Pc("tabindex", null, function (a, b) {
		a.display.input.getField().tabIndex = b || ""
	}),
	Pc("autofocus", null);
	var Yf = a.modes = {},
	Zf = a.mimeModes = {};
	a.defineMode = function (b, c) {
		a.defaults.mode || "null" == b || (a.defaults.mode = b),
		arguments.length > 2 && (c.dependencies = Array.prototype.slice.call(arguments, 2)),
		Yf[b] = c
	},
	a.defineMIME = function (a, b) {
		Zf[a] = b
	},
	a.resolveMode = function (b) {
		if ("string" == typeof b && Zf.hasOwnProperty(b))
			b = Zf[b];
		else if (b && "string" == typeof b.name && Zf.hasOwnProperty(b.name)) {
			var c = Zf[b.name];
			"string" == typeof c && (c = {
					name: c
				}),
			b = Ge(c, b),
			b.name = c.name
		} else if ("string" == typeof b && /^[\w\-]+\/[\w\-]+\+xml$/.test(b))
			return a.resolveMode("application/xml");
		return "string" == typeof b ? {
			name: b
		}
		 : b || {
			name: "null"
		}
	},
	a.getMode = function (b, c) {
		var c = a.resolveMode(c),
		d = Yf[c.name];
		if (!d)
			return a.getMode(b, "text/plain");
		var e = d(b, c);
		if ($f.hasOwnProperty(c.name)) {
			var f = $f[c.name];
			for (var g in f)
				f.hasOwnProperty(g) && (e.hasOwnProperty(g) && (e["_" + g] = e[g]), e[g] = f[g])
		}
		if (e.name = c.name, c.helperType && (e.helperType = c.helperType), c.modeProps)
			for (var g in c.modeProps)
				e[g] = c.modeProps[g];
		return e
	},
	a.defineMode("null", function () {
		return {
			token: function (a) {
				a.skipToEnd()
			}
		}
	}),
	a.defineMIME("text/plain", "null");
	var $f = a.modeExtensions = {};
	a.extendMode = function (a, b) {
		var c = $f.hasOwnProperty(a) ? $f[a] : $f[a] = {};
		He(b, c)
	},
	a.defineExtension = function (b, c) {
		a.prototype[b] = c
	},
	a.defineDocExtension = function (a, b) {
		rg.prototype[a] = b
	},
	a.defineOption = Pc;
	var _f = [];
	a.defineInitHook = function (a) {
		_f.push(a)
	};
	var ag = a.helpers = {};
	a.registerHelper = function (b, c, d) {
		ag.hasOwnProperty(b) || (ag[b] = a[b] = {
				_global: []
			}),
		ag[b][c] = d
	},
	a.registerGlobalHelper = function (b, c, d, e) {
		a.registerHelper(b, c, e),
		ag[b]._global.push({
			pred: d,
			val: e
		})
	};
	var bg = a.copyState = function (a, b) {
		if (b === !0)
			return b;
		if (a.copyState)
			return a.copyState(b);
		var c = {};
		for (var d in b) {
			var e = b[d];
			e instanceof Array && (e = e.concat([])),
			c[d] = e
		}
		return c
	},
	cg = a.startState = function (a, b, c) {
		return !a.startState || a.startState(b, c)
	};
	a.innerMode = function (a, b) {
		for (; a.innerMode; ) {
			var c = a.innerMode(b);
			if (!c || c.mode == a)
				break;
			b = c.state,
			a = c.mode
		}
		return c || {
			mode: a,
			state: b
		}
	};
	var dg = a.commands = {
		selectAll: function (a) {
			a.setSelection(Ff(a.firstLine(), 0), Ff(a.lastLine()), Dg)
		},
		singleSelection: function (a) {
			a.setSelection(a.getCursor("anchor"), a.getCursor("head"), Dg)
		},
		killLine: function (a) {
			Mc(a, function (b) {
				if (b.empty()) {
					var c = Vd(a.doc, b.head.line).text.length;
					return b.head.ch == c && b.head.line < a.lastLine() ? {
						from: b.head,
						to: Ff(b.head.line + 1, 0)
					}
					 : {
						from: b.head,
						to: Ff(b.head.line, c)
					}
				}
				return {
					from: b.from(),
					to: b.to()
				}
			})
		},
		deleteLine: function (a) {
			Mc(a, function (b) {
				return {
					from: Ff(b.from().line, 0),
					to: qa(a.doc, Ff(b.to().line + 1, 0))
				}
			})
		},
		delLineLeft: function (a) {
			Mc(a, function (a) {
				return {
					from: Ff(a.from().line, 0),
					to: a.from()
				}
			})
		},
		delWrappedLineLeft: function (a) {
			Mc(a, function (b) {
				var c = a.charCoords(b.head, "div").top + 5,
				d = a.coordsChar({
						left: 0,
						top: c
					}, "div");
				return {
					from: d,
					to: b.from()
				}
			})
		},
		delWrappedLineRight: function (a) {
			Mc(a, function (b) {
				var c = a.charCoords(b.head, "div").top + 5,
				d = a.coordsChar({
						left: a.display.lineDiv.offsetWidth + 100,
						top: c
					}, "div");
				return {
					from: b.from(),
					to: d
				}
			})
		},
		undo: function (a) {
			a.undo()
		},
		redo: function (a) {
			a.redo()
		},
		undoSelection: function (a) {
			a.undoSelection()
		},
		redoSelection: function (a) {
			a.redoSelection()
		},
		goDocStart: function (a) {
			a.extendSelection(Ff(a.firstLine(), 0))
		},
		goDocEnd: function (a) {
			a.extendSelection(Ff(a.lastLine()))
		},
		goLineStart: function (a) {
			a.extendSelectionsBy(function (b) {
				return bf(a, b.head.line)
			}, {
				origin: "+move",
				bias: 1
			})
		},
		goLineStartSmart: function (a) {
			a.extendSelectionsBy(function (b) {
				return df(a, b.head)
			}, {
				origin: "+move",
				bias: 1
			})
		},
		goLineEnd: function (a) {
			a.extendSelectionsBy(function (b) {
				return cf(a, b.head.line)
			}, {
				origin: "+move",
				bias: -1
			})
		},
		goLineRight: function (a) {
			a.extendSelectionsBy(function (b) {
				var c = a.charCoords(b.head, "div").top + 5;
				return a.coordsChar({
					left: a.display.lineDiv.offsetWidth + 100,
					top: c
				}, "div")
			}, Fg)
		},
		goLineLeft: function (a) {
			a.extendSelectionsBy(function (b) {
				var c = a.charCoords(b.head, "div").top + 5;
				return a.coordsChar({
					left: 0,
					top: c
				}, "div")
			}, Fg)
		},
		goLineLeftSmart: function (a) {
			a.extendSelectionsBy(function (b) {
				var c = a.charCoords(b.head, "div").top + 5,
				d = a.coordsChar({
						left: 0,
						top: c
					}, "div");
				return d.ch < a.getLine(d.line).search(/\S/) ? df(a, b.head) : d
			}, Fg)
		},
		goLineUp: function (a) {
			a.moveV(-1, "line")
		},
		goLineDown: function (a) {
			a.moveV(1, "line")
		},
		goPageUp: function (a) {
			a.moveV(-1, "page")
		},
		goPageDown: function (a) {
			a.moveV(1, "page")
		},
		goCharLeft: function (a) {
			a.moveH(-1, "char")
		},
		goCharRight: function (a) {
			a.moveH(1, "char")
		},
		goColumnLeft: function (a) {
			a.moveH(-1, "column")
		},
		goColumnRight: function (a) {
			a.moveH(1, "column")
		},
		goWordLeft: function (a) {
			a.moveH(-1, "word")
		},
		goGroupRight: function (a) {
			a.moveH(1, "group")
		},
		goGroupLeft: function (a) {
			a.moveH(-1, "group")
		},
		goWordRight: function (a) {
			a.moveH(1, "word")
		},
		delCharBefore: function (a) {
			a.deleteH(-1, "char")
		},
		delCharAfter: function (a) {
			a.deleteH(1, "char")
		},
		delWordBefore: function (a) {
			a.deleteH(-1, "word")
		},
		delWordAfter: function (a) {
			a.deleteH(1, "word")
		},
		delGroupBefore: function (a) {
			a.deleteH(-1, "group")
		},
		delGroupAfter: function (a) {
			a.deleteH(1, "group")
		},
		indentAuto: function (a) {
			a.indentSelection("smart")
		},
		indentMore: function (a) {
			a.indentSelection("add")
		},
		indentLess: function (a) {
			a.indentSelection("subtract")
		},
		insertTab: function (a) {
			a.replaceSelection("\t")
		},
		insertSoftTab: function (a) {
			for (var b = [], c = a.listSelections(), d = a.options.tabSize, e = 0; e < c.length; e++) {
				var f = c[e].from(),
				g = Gg(a.getLine(f.line), f.ch, d);
				b.push(new Array(d - g % d + 1).join(" "))
			}
			a.replaceSelections(b)
		},
		defaultTab: function (a) {
			a.somethingSelected() ? a.indentSelection("add") : a.execCommand("insertTab")
		},
		transposeChars: function (a) {
			Cb(a, function () {
				for (var b = a.listSelections(), c = [], d = 0; d < b.length; d++) {
					var e = b[d].head,
					f = Vd(a.doc, e.line).text;
					if (f)
						if (e.ch == f.length && (e = new Ff(e.line, e.ch - 1)), e.ch > 0)
							e = new Ff(e.line, e.ch + 1), a.replaceRange(f.charAt(e.ch - 1) + f.charAt(e.ch - 2), Ff(e.line, e.ch - 2), e, "+transpose");
						else if (e.line > a.doc.first) {
							var g = Vd(a.doc, e.line - 1).text;
							g && a.replaceRange(f.charAt(0) + "\n" + g.charAt(g.length - 1), Ff(e.line - 1, g.length - 1), Ff(e.line, 1), "+transpose")
						}
					c.push(new ma(e, e))
				}
				a.setSelections(c)
			})
		},
		newlineAndIndent: function (a) {
			Cb(a, function () {
				for (var b = a.listSelections().length, c = 0; c < b; c++) {
					var d = a.listSelections()[c];
					a.replaceRange("\n", d.anchor, d.head, "+input"),
					a.indentLine(d.from().line + 1, null, !0),
					Ic(a)
				}
			})
		},
		toggleOverwrite: function (a) {
			a.toggleOverwrite()
		}
	},
	eg = a.keyMap = {};
	eg.basic = {
		Left: "goCharLeft",
		Right: "goCharRight",
		Up: "goLineUp",
		Down: "goLineDown",
		End: "goLineEnd",
		Home: "goLineStartSmart",
		PageUp: "goPageUp",
		PageDown: "goPageDown",
		Delete: "delCharAfter",
		Backspace: "delCharBefore",
		"Shift-Backspace": "delCharBefore",
		Tab: "defaultTab",
		"Shift-Tab": "indentAuto",
		Enter: "newlineAndIndent",
		Insert: "toggleOverwrite",
		Esc: "singleSelection"
	},
	eg.pcDefault = {
		"Ctrl-A": "selectAll",
		"Ctrl-D": "deleteLine",
		"Ctrl-Z": "undo",
		"Shift-Ctrl-Z": "redo",
		"Ctrl-Y": "redo",
		"Ctrl-Home": "goDocStart",
		"Ctrl-End": "goDocEnd",
		"Ctrl-Up": "goLineUp",
		"Ctrl-Down": "goLineDown",
		"Ctrl-Left": "goGroupLeft",
		"Ctrl-Right": "goGroupRight",
		"Alt-Left": "goLineStart",
		"Alt-Right": "goLineEnd",
		"Ctrl-Backspace": "delGroupBefore",
		"Ctrl-Delete": "delGroupAfter",
		"Ctrl-S": "save",
		"Ctrl-F": "find",
		"Ctrl-G": "findNext",
		"Shift-Ctrl-G": "findPrev",
		"Shift-Ctrl-F": "replace",
		"Shift-Ctrl-R": "replaceAll",
		"Ctrl-[": "indentLess",
		"Ctrl-]": "indentMore",
		"Ctrl-U": "undoSelection",
		"Shift-Ctrl-U": "redoSelection",
		"Alt-U": "redoSelection",
		fallthrough: "basic"
	},
	eg.emacsy = {
		"Ctrl-F": "goCharRight",
		"Ctrl-B": "goCharLeft",
		"Ctrl-P": "goLineUp",
		"Ctrl-N": "goLineDown",
		"Alt-F": "goWordRight",
		"Alt-B": "goWordLeft",
		"Ctrl-A": "goLineStart",
		"Ctrl-E": "goLineEnd",
		"Ctrl-V": "goPageDown",
		"Shift-Ctrl-V": "goPageUp",
		"Ctrl-D": "delCharAfter",
		"Ctrl-H": "delCharBefore",
		"Alt-D": "delWordAfter",
		"Alt-Backspace": "delWordBefore",
		"Ctrl-K": "killLine",
		"Ctrl-T": "transposeChars"
	},
	eg.macDefault = {
		"Cmd-A": "selectAll",
		"Cmd-D": "deleteLine",
		"Cmd-Z": "undo",
		"Shift-Cmd-Z": "redo",
		"Cmd-Y": "redo",
		"Cmd-Home": "goDocStart",
		"Cmd-Up": "goDocStart",
		"Cmd-End": "goDocEnd",
		"Cmd-Down": "goDocEnd",
		"Alt-Left": "goGroupLeft",
		"Alt-Right": "goGroupRight",
		"Cmd-Left": "goLineLeft",
		"Cmd-Right": "goLineRight",
		"Alt-Backspace": "delGroupBefore",
		"Ctrl-Alt-Backspace": "delGroupAfter",
		"Alt-Delete": "delGroupAfter",
		"Cmd-S": "save",
		"Cmd-F": "find",
		"Cmd-G": "findNext",
		"Shift-Cmd-G": "findPrev",
		"Cmd-Alt-F": "replace",
		"Shift-Cmd-Alt-F": "replaceAll",
		"Cmd-[": "indentLess",
		"Cmd-]": "indentMore",
		"Cmd-Backspace": "delWrappedLineLeft",
		"Cmd-Delete": "delWrappedLineRight",
		"Cmd-U": "undoSelection",
		"Shift-Cmd-U": "redoSelection",
		"Ctrl-Up": "goDocStart",
		"Ctrl-Down": "goDocEnd",
		fallthrough: ["basic", "emacsy"]
	},
	eg.default = yf ? eg.macDefault : eg.pcDefault, a.normalizeKeyMap = function (a) {
		var b = {};
		for (var c in a)
			if (a.hasOwnProperty(c)) {
				var d = a[c];
				if (/^(name|fallthrough|(de|at)tach)$/.test(c))
					continue;
				if ("..." == d) {
					delete a[c];
					continue
				}
				for (var e = Ee(c.split(" "), Qc), f = 0; f < e.length; f++) {
					var g,
					h;
					f == e.length - 1 ? (h = e.join(" "), g = d) : (h = e.slice(0, f + 1).join(" "), g = "...");
					var i = b[h];
					if (i) {
						if (i != g)
							throw new Error("Inconsistent bindings for " + h)
					} else
						b[h] = g
				}
				delete a[c]
			}
		for (var j in b)
			a[j] = b[j];
		return a
	};
	var fg = a.lookupKey = function (a, b, c, d) {
		b = Rc(b);
		var e = b.call ? b.call(a, d) : b[a];
		if (e === !1)
			return "nothing";
		if ("..." === e)
			return "multi";
		if (null != e && c(e))
			return "handled";
		if (b.fallthrough) {
			if ("[object Array]" != Object.prototype.toString.call(b.fallthrough))
				return fg(a, b.fallthrough, c, d);
			for (var f = 0; f < b.fallthrough.length; f++) {
				var g = fg(a, b.fallthrough[f], c, d);
				if (g)
					return g
			}
		}
	}, gg = a.isModifierKey = function (a) {
		var b = "string" == typeof a ? a : Yg[a.keyCode];
		return "Ctrl" == b || "Alt" == b || "Shift" == b || "Mod" == b
	}, hg = a.keyName = function (a, b) {
		if (sf && 34 == a.keyCode && a.char)
			return !1;
		var c = Yg[a.keyCode],
		d = c;
		return null != d && !a.altGraphKey && (a.altKey && "Alt" != c && (d = "Alt-" + d), (Bf ? a.metaKey : a.ctrlKey) && "Ctrl" != c && (d = "Ctrl-" + d), (Bf ? a.ctrlKey : a.metaKey) && "Cmd" != c && (d = "Cmd-" + d), !b && a.shiftKey && "Shift" != c && (d = "Shift-" + d), d)
	};
	a.fromTextArea = function (b, c) {
		function d() {
			b.value = i.getValue()
		}
		if (c = c ? He(c) : {}, c.value = b.value, !c.tabindex && b.tabIndex && (c.tabindex = b.tabIndex), !c.placeholder && b.placeholder && (c.placeholder = b.placeholder), null == c.autofocus) {
			var e = Pe();
			c.autofocus = e == b || null != b.getAttribute("autofocus") && e == document.body
		}
		if (b.form && (xg(b.form, "submit", d), !c.leaveSubmitMethodAlone)) {
			var f = b.form,
			g = f.submit;
			try {
				var h = f.submit = function () {
					d(),
					f.submit = g,
					f.submit(),
					f.submit = h
				}
			} catch (a) {}
		}
		c.finishInit = function (a) {
			a.save = d,
			a.getTextArea = function () {
				return b
			},
			a.toTextArea = function () {
				a.toTextArea = isNaN,
				d(),
				b.parentNode.removeChild(a.getWrapperElement()),
				b.style.display = "",
				b.form && (yg(b.form, "submit", d), "function" == typeof b.form.submit && (b.form.submit = g))
			}
		},
		b.style.display = "none";
		var i = a(function (a) {
				b.parentNode.insertBefore(a, b.nextSibling)
			}, c);
		return i
	};
	var ig = a.StringStream = function (a, b) {
		this.pos = this.start = 0,
		this.string = a,
		this.tabSize = b || 8,
		this.lastColumnPos = this.lastColumnValue = 0,
		this.lineStart = 0
	};
	ig.prototype = {
		eol: function () {
			return this.pos >= this.string.length
		},
		sol: function () {
			return this.pos == this.lineStart
		},
		peek: function () {
			return this.string.charAt(this.pos) || void 0
		},
		next: function () {
			if (this.pos < this.string.length)
				return this.string.charAt(this.pos++)
		},
		eat: function (a) {
			var b = this.string.charAt(this.pos);
			if ("string" == typeof a)
				var c = b == a;
			else
				var c = b && (a.test ? a.test(b) : a(b));
			if (c)
				return ++this.pos, b
		},
		eatWhile: function (a) {
			for (var b = this.pos; this.eat(a); );
			return this.pos > b
		},
		eatSpace: function () {
			for (var a = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); )
				++this.pos;
			return this.pos > a
		},
		skipToEnd: function () {
			this.pos = this.string.length
		},
		skipTo: function (a) {
			var b = this.string.indexOf(a, this.pos);
			if (b > -1)
				return this.pos = b, !0
		},
		backUp: function (a) {
			this.pos -= a
		},
		column: function () {
			return this.lastColumnPos < this.start && (this.lastColumnValue = Gg(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start),
			this.lastColumnValue - (this.lineStart ? Gg(this.string, this.lineStart, this.tabSize) : 0)
		},
		indentation: function () {
			return Gg(this.string, null, this.tabSize) - (this.lineStart ? Gg(this.string, this.lineStart, this.tabSize) : 0)
		},
		match: function (a, b, c) {
			if ("string" != typeof a) {
				var d = this.string.slice(this.pos).match(a);
				return d && d.index > 0 ? null : (d && b !== !1 && (this.pos += d[0].length), d)
			}
			var e = function (a) {
				return c ? a.toLowerCase() : a
			},
			f = this.string.substr(this.pos, a.length);
			if (e(f) == e(a))
				return b !== !1 && (this.pos += a.length), !0
		},
		current: function () {
			return this.string.slice(this.start, this.pos)
		},
		hideFirstChars: function (a, b) {
			this.lineStart += a;
			try {
				return b()
			}
			finally {
				this.lineStart -= a
			}
		}
	};
	var jg = 0, kg = a.TextMarker = function (a, b) {
		this.lines = [],
		this.type = b,
		this.doc = a,
		this.id = ++jg
	};
	ye(kg), kg.prototype.clear = function () {
		if (!this.explicitlyCleared) {
			var a = this.doc.cm,
			b = a && !a.curOp;
			if (b && tb(a), xe(this, "clear")) {
				var c = this.find();
				c && te(this, "clear", c.from, c.to)
			}
			for (var d = null, e = null, f = 0; f < this.lines.length; ++f) {
				var g = this.lines[f],
				h = Yc(g.markedSpans, this);
				a && !this.collapsed ? Jb(a, Zd(g), "text") : a && (null != h.to && (e = Zd(g)), null != h.from && (d = Zd(g))),
				g.markedSpans = Zc(g.markedSpans, h),
				null == h.from && this.collapsed && !sd(this.doc, g) && a && Yd(g, rb(a.display))
			}
			if (a && this.collapsed && !a.options.lineWrapping)
				for (var f = 0; f < this.lines.length; ++f) {
					var i = od(this.lines[f]),
					j = l(i);
					j > a.display.maxLineLength && (a.display.maxLine = i, a.display.maxLineLength = j, a.display.maxLineChanged = !0)
				}
			null != d && a && this.collapsed && Ib(a, d, e + 1),
			this.lines.length = 0,
			this.explicitlyCleared = !0,
			this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, a && Ea(a.doc)),
			a && te(a, "markerCleared", a, this),
			b && vb(a),
			this.parent && this.parent.clear()
		}
	}, kg.prototype.find = function (a, b) {
		null == a && "bookmark" == this.type && (a = 1);
		for (var c, d, e = 0; e < this.lines.length; ++e) {
			var f = this.lines[e],
			g = Yc(f.markedSpans, this);
			if (null != g.from && (c = Ff(b ? f : Zd(f), g.from), a == -1))
				return c;
			if (null != g.to && (d = Ff(b ? f : Zd(f), g.to), 1 == a))
				return d
		}
		return c && {
			from: c,
			to: d
		}
	}, kg.prototype.changed = function () {
		var a = this.find(-1, !0),
		b = this,
		c = this.doc.cm;
		a && c && Cb(c, function () {
			var d = a.line,
			e = Zd(a.line),
			f = $a(c, e);
			if (f && (eb(f), c.curOp.selectionChanged = c.curOp.forceUpdate = !0), c.curOp.updateMaxLine = !0, !sd(b.doc, d) && null != b.height) {
				var g = b.height;
				b.height = null;
				var h = vd(b) - g;
				h && Yd(d, d.height + h)
			}
		})
	}, kg.prototype.attachLine = function (a) {
		if (!this.lines.length && this.doc.cm) {
			var b = this.doc.cm.curOp;
			b.maybeHiddenMarkers && De(b.maybeHiddenMarkers, this) != -1 || (b.maybeUnhiddenMarkers || (b.maybeUnhiddenMarkers = [])).push(this)
		}
		this.lines.push(a)
	}, kg.prototype.detachLine = function (a) {
		if (this.lines.splice(De(this.lines, a), 1), !this.lines.length && this.doc.cm) {
			var b = this.doc.cm.curOp;
			(b.maybeHiddenMarkers || (b.maybeHiddenMarkers = [])).push(this)
		}
	};
	var jg = 0, lg = a.SharedTextMarker = function (a, b) {
		this.markers = a,
		this.primary = b;
		for (var c = 0; c < a.length; ++c)
			a[c].parent = this
	};
	ye(lg), lg.prototype.clear = function () {
		if (!this.explicitlyCleared) {
			this.explicitlyCleared = !0;
			for (var a = 0; a < this.markers.length; ++a)
				this.markers[a].clear();
			te(this, "clear")
		}
	}, lg.prototype.find = function (a, b) {
		return this.primary.find(a, b)
	};
	var mg = a.LineWidget = function (a, b, c) {
		if (c)
			for (var d in c)
				c.hasOwnProperty(d) && (this[d] = c[d]);
		this.doc = a,
		this.node = b
	};
	ye(mg), mg.prototype.clear = function () {
		var a = this.doc.cm,
		b = this.line.widgets,
		c = this.line,
		d = Zd(c);
		if (null != d && b) {
			for (var e = 0; e < b.length; ++e)
				b[e] == this && b.splice(e--, 1);
			b.length || (c.widgets = null);
			var f = vd(this);
			Yd(c, Math.max(0, c.height - f)),
			a && Cb(a, function () {
				ud(a, c, -f),
				Jb(a, d, "widget")
			})
		}
	}, mg.prototype.changed = function () {
		var a = this.height,
		b = this.doc.cm,
		c = this.line;
		this.height = null;
		var d = vd(this) - a;
		d && (Yd(c, c.height + d), b && Cb(b, function () {
				b.curOp.forceUpdate = !0,
				ud(b, c, d)
			}))
	};
	var ng = a.Line = function (a, b, c) {
		this.text = a,
		gd(this, b),
		this.height = c ? c(this) : 1
	};
	ye(ng), ng.prototype.lineNo = function () {
		return Zd(this)
	};
	var og = {}, pg = {};
	Rd.prototype = {
		chunkSize: function () {
			return this.lines.length
		},
		removeInner: function (a, b) {
			for (var c = a, d = a + b; c < d; ++c) {
				var e = this.lines[c];
				this.height -= e.height,
				yd(e),
				te(e, "delete")
			}
			this.lines.splice(a, b)
		},
		collapse: function (a) {
			a.push.apply(a, this.lines)
		},
		insertInner: function (a, b, c) {
			this.height += c,
			this.lines = this.lines.slice(0, a).concat(b).concat(this.lines.slice(a));
			for (var d = 0; d < b.length; ++d)
				b[d].parent = this
		},
		iterN: function (a, b, c) {
			for (var d = a + b; a < d; ++a)
				if (c(this.lines[a]))
					return !0
		}
	}, Sd.prototype = {
		chunkSize: function () {
			return this.size
		},
		removeInner: function (a, b) {
			this.size -= b;
			for (var c = 0; c < this.children.length; ++c) {
				var d = this.children[c],
				e = d.chunkSize();
				if (a < e) {
					var f = Math.min(b, e - a),
					g = d.height;
					if (d.removeInner(a, f), this.height -= g - d.height, e == f && (this.children.splice(c--, 1), d.parent = null), 0 == (b -= f))
						break;
					a = 0
				} else
					a -= e
			}
			if (this.size - b < 25 && (this.children.length > 1 || !(this.children[0]instanceof Rd))) {
				var h = [];
				this.collapse(h),
				this.children = [new Rd(h)],
				this.children[0].parent = this
			}
		},
		collapse: function (a) {
			for (var b = 0; b < this.children.length; ++b)
				this.children[b].collapse(a)
		},
		insertInner: function (a, b, c) {
			this.size += b.length,
			this.height += c;
			for (var d = 0; d < this.children.length; ++d) {
				var e = this.children[d],
				f = e.chunkSize();
				if (a <= f) {
					if (e.insertInner(a, b, c), e.lines && e.lines.length > 50) {
						for (; e.lines.length > 50; ) {
							var g = e.lines.splice(e.lines.length - 25, 25),
							h = new Rd(g);
							e.height -= h.height,
							this.children.splice(d + 1, 0, h),
							h.parent = this
						}
						this.maybeSpill()
					}
					break
				}
				a -= f
			}
		},
		maybeSpill: function () {
			if (!(this.children.length <= 10)) {
				var a = this;
				do {
					var b = a.children.splice(a.children.length - 5, 5),
					c = new Sd(b);
					if (a.parent) {
						a.size -= c.size,
						a.height -= c.height;
						var d = De(a.parent.children, a);
						a.parent.children.splice(d + 1, 0, c)
					} else {
						var e = new Sd(a.children);
						e.parent = a,
						a.children = [e, c],
						a = e
					}
					c.parent = a.parent
				} while (a.children.length > 10);
				a.parent.maybeSpill()
			}
		},
		iterN: function (a, b, c) {
			for (var d = 0; d < this.children.length; ++d) {
				var e = this.children[d],
				f = e.chunkSize();
				if (a < f) {
					var g = Math.min(b, f - a);
					if (e.iterN(a, g, c))
						return !0;
					if (0 == (b -= g))
						break;
					a = 0
				} else
					a -= f
			}
		}
	};
	var qg = 0, rg = a.Doc = function (a, b, c) {
		if (!(this instanceof rg))
			return new rg(a, b, c);
		null == c && (c = 0),
		Sd.call(this, [new Rd([new ng("", null)])]),
		this.first = c,
		this.scrollTop = this.scrollLeft = 0,
		this.cantEdit = !1,
		this.cleanGeneration = 1,
		this.frontier = c;
		var d = Ff(c, 0);
		this.sel = oa(d),
		this.history = new be(null),
		this.id = ++qg,
		this.modeOption = b,
		"string" == typeof a && (a = Ug(a)),
		Qd(this, {
			from: d,
			to: d,
			text: a
		}),
		Ba(this, oa(d), Dg)
	};
	rg.prototype = Ge(Sd.prototype, {
			constructor: rg,
			iter: function (a, b, c) {
				c ? this.iterN(a - this.first, b - a, c) : this.iterN(this.first, this.first + this.size, a)
			},
			insert: function (a, b) {
				for (var c = 0, d = 0; d < b.length; ++d)
					c += b[d].height;
				this.insertInner(a - this.first, b, c)
			},
			remove: function (a, b) {
				this.removeInner(a - this.first, b)
			},
			getValue: function (a) {
				var b = Xd(this, this.first, this.first + this.size);
				return a === !1 ? b : b.join(a || "\n")
			},
			setValue: Fb(function (a) {
				var b = Ff(this.first, 0),
				c = this.first + this.size - 1;
				wc(this, {
					from: b,
					to: Ff(c, Vd(this, c).text.length),
					text: Ug(a),
					origin: "setValue",
					full: !0
				}, !0),
				Ba(this, oa(b))
			}),
			replaceRange: function (a, b, c, d) {
				b = qa(this, b),
				c = c ? qa(this, c) : b,
				Cc(this, a, b, c, d)
			},
			getRange: function (a, b, c) {
				var d = Wd(this, qa(this, a), qa(this, b));
				return c === !1 ? d : d.join(c || "\n")
			},
			getLine: function (a) {
				var b = this.getLineHandle(a);
				return b && b.text
			},
			getLineHandle: function (a) {
				if (sa(this, a))
					return Vd(this, a)
			},
			getLineNumber: function (a) {
				return Zd(a)
			},
			getLineHandleVisualStart: function (a) {
				return "number" == typeof a && (a = Vd(this, a)),
				od(a)
			},
			lineCount: function () {
				return this.size
			},
			firstLine: function () {
				return this.first
			},
			lastLine: function () {
				return this.first + this.size - 1
			},
			clipPos: function (a) {
				return qa(this, a)
			},
			getCursor: function (a) {
				var b,
				c = this.sel.primary();
				return b = null == a || "head" == a ? c.head : "anchor" == a ? c.anchor : "end" == a || "to" == a || a === !1 ? c.to() : c.from()
			},
			listSelections: function () {
				return this.sel.ranges
			},
			somethingSelected: function () {
				return this.sel.somethingSelected()
			},
			setCursor: Fb(function (a, b, c) {
				ya(this, qa(this, "number" == typeof a ? Ff(a, b || 0) : a), null, c)
			}),
			setSelection: Fb(function (a, b, c) {
				ya(this, qa(this, a), qa(this, b || a), c)
			}),
			extendSelection: Fb(function (a, b, c) {
				va(this, qa(this, a), b && qa(this, b), c)
			}),
			extendSelections: Fb(function (a, b) {
				wa(this, ta(this, a, b))
			}),
			extendSelectionsBy: Fb(function (a, b) {
				wa(this, Ee(this.sel.ranges, a), b)
			}),
			setSelections: Fb(function (a, b, c) {
				if (a.length) {
					for (var d = 0, e = []; d < a.length; d++)
						e[d] = new ma(qa(this, a[d].anchor), qa(this, a[d].head));
					null == b && (b = Math.min(a.length - 1, this.sel.primIndex)),
					Ba(this, na(e, b), c)
				}
			}),
			addSelection: Fb(function (a, b, c) {
				var d = this.sel.ranges.slice(0);
				d.push(new ma(qa(this, a), qa(this, b || a))),
				Ba(this, na(d, d.length - 1), c)
			}),
			getSelection: function (a) {
				for (var b, c = this.sel.ranges, d = 0; d < c.length; d++) {
					var e = Wd(this, c[d].from(), c[d].to());
					b = b ? b.concat(e) : e
				}
				return a === !1 ? b : b.join(a || "\n")
			},
			getSelections: function (a) {
				for (var b = [], c = this.sel.ranges, d = 0; d < c.length; d++) {
					var e = Wd(this, c[d].from(), c[d].to());
					a !== !1 && (e = e.join(a || "\n")),
					b[d] = e
				}
				return b
			},
			replaceSelection: function (a, b, c) {
				for (var d = [], e = 0; e < this.sel.ranges.length; e++)
					d[e] = a;
				this.replaceSelections(d, b, c || "+input")
			},
			replaceSelections: Fb(function (a, b, c) {
				for (var d = [], e = this.sel, f = 0; f < e.ranges.length; f++) {
					var g = e.ranges[f];
					d[f] = {
						from: g.from(),
						to: g.to(),
						text: Ug(a[f]),
						origin: c
					}
				}
				for (var h = b && "end" != b && uc(this, d, b), f = d.length - 1; f >= 0; f--)
					wc(this, d[f]);
				h ? Aa(this, h) : this.cm && Ic(this.cm)
			}),
			undo: Fb(function () {
				yc(this, "undo")
			}),
			redo: Fb(function () {
				yc(this, "redo")
			}),
			undoSelection: Fb(function () {
				yc(this, "undo", !0)
			}),
			redoSelection: Fb(function () {
				yc(this, "redo", !0)
			}),
			setExtending: function (a) {
				this.extend = a
			},
			getExtending: function () {
				return this.extend
			},
			historySize: function () {
				for (var a = this.history, b = 0, c = 0, d = 0; d < a.done.length; d++)
					a.done[d].ranges || ++b;
				for (var d = 0; d < a.undone.length; d++)
					a.undone[d].ranges || ++c;
				return {
					undo: b,
					redo: c
				}
			},
			clearHistory: function () {
				this.history = new be(this.history.maxGeneration)
			},
			markClean: function () {
				this.cleanGeneration = this.changeGeneration(!0)
			},
			changeGeneration: function (a) {
				return a && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null),
				this.history.generation
			},
			isClean: function (a) {
				return this.history.generation == (a || this.cleanGeneration)
			},
			getHistory: function () {
				return {
					done: me(this.history.done),
					undone: me(this.history.undone)
				}
			},
			setHistory: function (a) {
				var b = this.history = new be(this.history.maxGeneration);
				b.done = me(a.done.slice(0), null, !0),
				b.undone = me(a.undone.slice(0), null, !0)
			},
			addLineClass: Fb(function (a, b, c) {
				return Lc(this, a, "gutter" == b ? "gutter" : "class", function (a) {
					var d = "text" == b ? "textClass" : "background" == b ? "bgClass" : "gutter" == b ? "gutterClass" : "wrapClass";
					if (a[d]) {
						if (Qe(c).test(a[d]))
							return !1;
						a[d] += " " + c
					} else
						a[d] = c;
					return !0
				})
			}),
			removeLineClass: Fb(function (a, b, c) {
				return Lc(this, a, "gutter" == b ? "gutter" : "class", function (a) {
					var d = "text" == b ? "textClass" : "background" == b ? "bgClass" : "gutter" == b ? "gutterClass" : "wrapClass",
					e = a[d];
					if (!e)
						return !1;
					if (null == c)
						a[d] = null;
					else {
						var f = e.match(Qe(c));
						if (!f)
							return !1;
						var g = f.index + f[0].length;
						a[d] = e.slice(0, f.index) + (f.index && g != e.length ? " " : "") + e.slice(g) || null
					}
					return !0
				})
			}),
			addLineWidget: Fb(function (a, b, c) {
				return wd(this, a, b, c)
			}),
			removeLineWidget: function (a) {
				a.clear()
			},
			markText: function (a, b, c) {
				return Sc(this, qa(this, a), qa(this, b), c, "range")
			},
			setBookmark: function (a, b) {
				var c = {
					replacedWith: b && (null == b.nodeType ? b.widget : b),
					insertLeft: b && b.insertLeft,
					clearWhenEmpty: !1,
					shared: b && b.shared,
					handleMouseEvents: b && b.handleMouseEvents
				};
				return a = qa(this, a),
				Sc(this, a, a, c, "bookmark")
			},
			findMarksAt: function (a) {
				a = qa(this, a);
				var b = [],
				c = Vd(this, a.line).markedSpans;
				if (c)
					for (var d = 0; d < c.length; ++d) {
						var e = c[d];
						(null == e.from || e.from <= a.ch) && (null == e.to || e.to >= a.ch) && b.push(e.marker.parent || e.marker)
					}
				return b
			},
			findMarks: function (a, b, c) {
				a = qa(this, a),
				b = qa(this, b);
				var d = [],
				e = a.line;
				return this.iter(a.line, b.line + 1, function (f) {
					var g = f.markedSpans;
					if (g)
						for (var h = 0; h < g.length; h++) {
							var i = g[h];
							e == a.line && a.ch > i.to || null == i.from && e != a.line || e == b.line && i.from > b.ch || c && !c(i.marker) || d.push(i.marker.parent || i.marker)
						}
					++e
				}),
				d
			},
			getAllMarks: function () {
				var a = [];
				return this.iter(function (b) {
					var c = b.markedSpans;
					if (c)
						for (var d = 0; d < c.length; ++d)
							null != c[d].from && a.push(c[d].marker)
				}),
				a
			},
			posFromIndex: function (a) {
				var b,
				c = this.first;
				return this.iter(function (d) {
					var e = d.text.length + 1;
					return e > a ? (b = a, !0) : (a -= e, void++c)
				}),
				qa(this, Ff(c, b))
			},
			indexFromPos: function (a) {
				a = qa(this, a);
				var b = a.ch;
				return a.line < this.first || a.ch < 0 ? 0 : (this.iter(this.first, a.line, function (a) {
						b += a.text.length + 1
					}), b)
			},
			copy: function (a) {
				var b = new rg(Xd(this, this.first, this.first + this.size), this.modeOption, this.first);
				return b.scrollTop = this.scrollTop,
				b.scrollLeft = this.scrollLeft,
				b.sel = this.sel,
				b.extend = !1,
				a && (b.history.undoDepth = this.history.undoDepth, b.setHistory(this.getHistory())),
				b
			},
			linkedDoc: function (a) {
				a || (a = {});
				var b = this.first,
				c = this.first + this.size;
				null != a.from && a.from > b && (b = a.from),
				null != a.to && a.to < c && (c = a.to);
				var d = new rg(Xd(this, b, c), a.mode || this.modeOption, b);
				return a.sharedHist && (d.history = this.history),
				(this.linked || (this.linked = [])).push({
					doc: d,
					sharedHist: a.sharedHist
				}),
				d.linked = [{
						doc: this,
						isParent: !0,
						sharedHist: a.sharedHist
					}
				],
				Vc(d, Uc(this)),
				d
			},
			unlinkDoc: function (b) {
				if (b instanceof a && (b = b.doc), this.linked)
					for (var c = 0; c < this.linked.length; ++c) {
						var d = this.linked[c];
						if (d.doc == b) {
							this.linked.splice(c, 1),
							b.unlinkDoc(this),
							Wc(Uc(this));
							break
						}
					}
				if (b.history == this.history) {
					var e = [b.id];
					Td(b, function (a) {
						e.push(a.id)
					}, !0),
					b.history = new be(null),
					b.history.done = me(this.history.done, e),
					b.history.undone = me(this.history.undone, e)
				}
			},
			iterLinkedDocs: function (a) {
				Td(this, a)
			},
			getMode: function () {
				return this.mode
			},
			getEditor: function () {
				return this.cm
			}
		}), rg.prototype.eachLine = rg.prototype.iter;
	var sg = "iter insert remove copy getEditor constructor".split(" ");
	for (var tg in rg.prototype)
		rg.prototype.hasOwnProperty(tg) && De(sg, tg) < 0 && (a.prototype[tg] = function (a) {
			return function () {
				return a.apply(this.doc, arguments)
			}
		}
			(rg.prototype[tg]));
	ye(rg);
	var ug = a.e_preventDefault = function (a) {
		a.preventDefault ? a.preventDefault() : a.returnValue = !1
	}, vg = a.e_stopPropagation = function (a) {
		a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0
	}, wg = a.e_stop = function (a) {
		ug(a),
		vg(a)
	}, xg = a.on = function (a, b, c) {
		if (a.addEventListener)
			a.addEventListener(b, c, !1);
		else if (a.attachEvent)
			a.attachEvent("on" + b, c);
		else {
			var d = a._handlers || (a._handlers = {}),
			e = d[b] || (d[b] = []);
			e.push(c)
		}
	}, yg = a.off = function (a, b, c) {
		if (a.removeEventListener)
			a.removeEventListener(b, c, !1);
		else if (a.detachEvent)
			a.detachEvent("on" + b, c);
		else {
			var d = a._handlers && a._handlers[b];
			if (!d)
				return;
			for (var e = 0; e < d.length; ++e)
				if (d[e] == c) {
					d.splice(e, 1);
					break
				}
		}
	}, zg = a.signal = function (a, b) {
		var c = a._handlers && a._handlers[b];
		if (c)
			for (var d = Array.prototype.slice.call(arguments, 2), e = 0; e < c.length; ++e)
				c[e].apply(null, d)
	}, Ag = null, Bg = 30, Cg = a.Pass = {
		toString: function () {
			return "CodeMirror.Pass"
		}
	}, Dg = {
		scroll: !1
	}, Eg = {
		origin: "*mouse"
	}, Fg = {
		origin: "+move"
	};
	ze.prototype.set = function (a, b) {
		clearTimeout(this.id),
		this.id = setTimeout(b, a)
	};
	var Gg = a.countColumn = function (a, b, c, d, e) {
		null == b && (b = a.search(/[^\s\u00a0]/), b == -1 && (b = a.length));
		for (var f = d || 0, g = e || 0; ; ) {
			var h = a.indexOf("\t", f);
			if (h < 0 || h >= b)
				return g + (b - f);
			g += h - f,
			g += c - g % c,
			f = h + 1
		}
	}, Hg = [""], Ig = function (a) {
		a.select()
	};
	wf ? Ig = function (a) {
		a.selectionStart = 0,
		a.selectionEnd = a.value.length
	}
	:
	nf && (Ig = function (a) {
		try {
			a.select()
		} catch (a) {}
	});
	var Jg,
	Kg = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
	Lg = a.isWordChar = function (a) {
		return /\w/.test(a) || a > "" && (a.toUpperCase() != a.toLowerCase() || Kg.test(a))
	},
	Mg = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
	Jg = document.createRange ? function (a, b, c, d) {
		var e = document.createRange();
		return e.setEnd(d || a, c),
		e.setStart(a, b),
		e
	}
	 : function (a, b, c) {
		var d = document.body.createTextRange();
		try {
			d.moveToElementText(a.parentNode)
		} catch (a) {
			return d
		}
		return d.collapse(!0),
		d.moveEnd("character", c),
		d.moveStart("character", b),
		d
	};
	var Ng = a.contains = function (a, b) {
		if (3 == b.nodeType && (b = b.parentNode), a.contains)
			return a.contains(b);
		do
			if (11 == b.nodeType && (b = b.host), b == a)
				return !0;
		while (b = b.parentNode)
	};
	nf && of < 11 && (Pe = function () {
		try {
			return document.activeElement
		} catch (a) {
			return document.body
		}
	});
	var Og,
	Pg,
	Qg = a.rmClass = function (a, b) {
		var c = a.className,
		d = Qe(b).exec(c);
		if (d) {
			var e = c.slice(d.index + d[0].length);
			a.className = c.slice(0, d.index) + (e ? d[1] + e : "")
		}
	},
	Rg = a.addClass = function (a, b) {
		var c = a.className;
		Qe(b).test(c) || (a.className += (c ? " " : "") + b)
	},
	Sg = !1,
	Tg = function () {
		if (nf && of < 9)
			return !1;
		var a = Me("div");
		return "draggable" in a || "dragDrop" in a
	}
	(),
	Ug = a.splitLines = 3 != "\n\nb".split(/\n/).length ? function (a) {
		for (var b = 0, c = [], d = a.length; b <= d; ) {
			var e = a.indexOf("\n", b);
			e == -1 && (e = a.length);
			var f = a.slice(b, "\r" == a.charAt(e - 1) ? e - 1 : e),
			g = f.indexOf("\r");
			g != -1 ? (c.push(f.slice(0, g)), b += g + 1) : (c.push(f), b = e + 1)
		}
		return c
	}
	 : function (a) {
		return a.split(/\r\n?|\n/)
	},
	Vg = window.getSelection ? function (a) {
		try {
			return a.selectionStart != a.selectionEnd
		} catch (a) {
			return !1
		}
	}
	 : function (a) {
		try {
			var b = a.ownerDocument.selection.createRange()
		} catch (a) {}
		return !(!b || b.parentElement() != a) && 0 != b.compareEndPoints("StartToEnd", b)
	},
	Wg = function () {
		var a = Me("div");
		return "oncopy" in a || (a.setAttribute("oncopy", "return;"), "function" == typeof a.oncopy)
	}
	(),
	Xg = null,
	Yg = {
		3: "Enter",
		8: "Backspace",
		9: "Tab",
		13: "Enter",
		16: "Shift",
		17: "Ctrl",
		18: "Alt",
		19: "Pause",
		20: "CapsLock",
		27: "Esc",
		32: "Space",
		33: "PageUp",
		34: "PageDown",
		35: "End",
		36: "Home",
		37: "Left",
		38: "Up",
		39: "Right",
		40: "Down",
		44: "PrintScrn",
		45: "Insert",
		46: "Delete",
		59: ";",
		61: "=",
		91: "Mod",
		92: "Mod",
		93: "Mod",
		107: "=",
		109: "-",
		127: "Delete",
		173: "-",
		186: ";",
		187: "=",
		188: ",",
		189: "-",
		190: ".",
		191: "/",
		192: "`",
		219: "[",
		220: "\\",
		221: "]",
		222: "'",
		63232: "Up",
		63233: "Down",
		63234: "Left",
		63235: "Right",
		63272: "Delete",
		63273: "Home",
		63275: "End",
		63276: "PageUp",
		63277: "PageDown",
		63302: "Insert"
	};
	a.keyNames = Yg,
	function () {
		for (var a = 0; a < 10; a++)
			Yg[a + 48] = Yg[a + 96] = String(a);
		for (var a = 65; a <= 90; a++)
			Yg[a] = String.fromCharCode(a);
		for (var a = 1; a <= 12; a++)
			Yg[a + 111] = Yg[a + 63235] = "F" + a
	}
	();
	var Zg,
	$g = function () {
		function a(a) {
			return a <= 247 ? c.charAt(a) : 1424 <= a && a <= 1524 ? "R" : 1536 <= a && a <= 1773 ? d.charAt(a - 1536) : 1774 <= a && a <= 2220 ? "r" : 8192 <= a && a <= 8203 ? "w" : 8204 == a ? "b" : "L"
		}
		function b(a, b, c) {
			this.level = a,
			this.from = b,
			this.to = c
		}
		var c = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",
		d = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",
		e = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,
		f = /[stwN]/,
		g = /[LRr]/,
		h = /[Lb1n]/,
		i = /[1n]/,
		j = "L";
		return function (c) {
			if (!e.test(c))
				return !1;
			for (var d, k = c.length, l = [], m = 0; m < k; ++m)
				l.push(d = a(c.charCodeAt(m)));
			for (var m = 0, n = j; m < k; ++m) {
				var d = l[m];
				"m" == d ? l[m] = n : n = d
			}
			for (var m = 0, o = j; m < k; ++m) {
				var d = l[m];
				"1" == d && "r" == o ? l[m] = "n" : g.test(d) && (o = d, "r" == d && (l[m] = "R"))
			}
			for (var m = 1, n = l[0]; m < k - 1; ++m) {
				var d = l[m];
				"+" == d && "1" == n && "1" == l[m + 1] ? l[m] = "1" : "," != d || n != l[m + 1] || "1" != n && "n" != n || (l[m] = n),
				n = d
			}
			for (var m = 0; m < k; ++m) {
				var d = l[m];
				if ("," == d)
					l[m] = "N";
				else if ("%" == d) {
					for (var p = m + 1; p < k && "%" == l[p]; ++p);
					for (var q = m && "!" == l[m - 1] || p < k && "1" == l[p] ? "1" : "N", r = m; r < p; ++r)
						l[r] = q;
					m = p - 1
				}
			}
			for (var m = 0, o = j; m < k; ++m) {
				var d = l[m];
				"L" == o && "1" == d ? l[m] = "L" : g.test(d) && (o = d)
			}
			for (var m = 0; m < k; ++m)
				if (f.test(l[m])) {
					for (var p = m + 1; p < k && f.test(l[p]); ++p);
					for (var s = "L" == (m ? l[m - 1] : j), t = "L" == (p < k ? l[p] : j), q = s || t ? "L" : "R", r = m; r < p; ++r)
						l[r] = q;
					m = p - 1
				}
			for (var u, v = [], m = 0; m < k; )
				if (h.test(l[m])) {
					var w = m;
					for (++m; m < k && h.test(l[m]); ++m);
					v.push(new b(0, w, m))
				} else {
					var x = m,
					y = v.length;
					for (++m; m < k && "L" != l[m]; ++m);
					for (var r = x; r < m; )
						if (i.test(l[r])) {
							x < r && v.splice(y, 0, new b(1, x, r));
							var z = r;
							for (++r; r < m && i.test(l[r]); ++r);
							v.splice(y, 0, new b(2, z, r)),
							x = r
						} else ++r;
					x < m && v.splice(y, 0, new b(1, x, m))
				}
			return 1 == v[0].level && (u = c.match(/^\s+/)) && (v[0].from = u[0].length, v.unshift(new b(0, 0, u[0].length))),
			1 == Ce(v).level && (u = c.match(/\s+$/)) && (Ce(v).to -= u[0].length, v.push(new b(0, k - u[0].length, k))),
			2 == v[0].level && v.unshift(new b(1, v[0].to, v[0].to)),
			v[0].level != Ce(v).level && v.push(new b(v[0].level, k, k)),
			v
		}
	}
	();
	return a.version = "5.4.1",
	a
}), function (a) {
	FX.FormulaEditor = FX.extend(FX.Widget, {
			CONST: {
				NAME_FILED_CLS: "cm-field-name",
				VALUE_FIELD_CLS: "cm-field-value",
				INVALID_FIELD_CLS: "cm-field-invalid",
				DEPRECATE_FIELD_CLS: "cm-deprecate"
			},
			_defaultConfig: function () {
				return a.extend(FX.FormulaEditor.superclass._defaultConfig.apply(), {
					baseCls: "x-formula-editor",
					keywords: [],
					text: "",
					hasFunction: !0,
					labelMap: null
				})
			},
			_init: function () {
				FX.FormulaEditor.superclass._init.apply(this, arguments);
				var b = this.options,
				c = "<li></li>";
				b.hasFunction && (c += '<li><span class="x-c-red"></span><a target="jdy_doc" href="' + FX.CONFIG.HOST.HELP_DOC_HOST + '/192272" class="x-c-key"></a></li><li> :<span class="formula-key">SUM</span>(<span class="formula-field"></span>,<span class="formula-field"> </span>)</li>', this.element.addClass("has-func")),
				this.element.append(a('<div class="formula-head"/>').append(a('<span class="formula-name"/>').text(b.text)).append(a('<span class="formula-equal"/>').text("="))).append(a('<div class="formula-foot"><ul>' + c + "</ul></div>")),
				this.editor = CodeMirror(this.element[0], {
						keywords: b.keywords,
						textWrapping: !0,
						lineWrapping: !0,
						lineNumbers: !1,
						specialChars: /[\u0000-\u001f\u007f\u00ad\u200c-\u200f\u2028\u2029\ufeff]/,
						mode: "formula"
					}),
				this.editor.on("change", function (a, b) {
					CodeMirror.showHint(a, CodeMirror.formulaHint, {
						completeSingle: !1
					})
				}),
				this.editor.addKeyMap({
					Backspace: function (a) {
						var b = a.getTokenAt(a.getCursor());
						if ("field" == b.type) {
							var c = a.getCursor().line;
							a.setSelection(new CodeMirror.Pos(c, b.start), new CodeMirror.Pos(c, b.end)),
							a.replaceSelection("", null, "+delete")
						} else
							a.execCommand("delCharBefore")
					}
				})
			},
			_markField: function (a) {
				var b = "",
				c = {
					"data-field": a.field
				};
				a.invalid ? b = this.CONST.INVALID_FIELD_CLS : a.entry ? (b = this.CONST.NAME_FILED_CLS, c["data-entry"] = a.entry) : b = this.CONST.VALUE_FIELD_CLS,
				this.editor.markText(a.from, a.to, {
					className: b,
					attr: c
				})
			},
			insertField: function (a, b) {
				var c = this.editor.getCursor();
				this.editor.replaceSelection("" + a.text + "");
				var d = this.editor.getCursor(),
				e = {
					from: c,
					to: d,
					field: a.name,
					entry: b ? a.id : null
				};
				this._markField(e),
				this.editor.focus()
			},
			checkValidate: function () {
				var b = a(this.editor.display.lineDiv);
				return b.find("span." + this.CONST.DEPRECATE_FIELD_CLS).length > 0 ? (this.setInvalidateType("deprecated field"), !1) : b.find("span." + this.CONST.INVALID_FIELD_CLS).length > 0 ? (this.setInvalidateType("invalid field"), !1) : (this.setInvalidateType(null), !0)
			},
			getValue: function () {
				var b = [],
				c = this.CONST,
				d = [],
				e = a(this.editor.display.lineDiv).find(".CodeMirror-line-content");
				return FX.Utils.forEach(e, function (e, f) {
					var g = [];
					FX.Utils.forEach(a(f).children("span"), function (b, e) {
						var f = a(e).attr("data-field"),
						h = a(e).attr("data-entry");
						if (a(e).hasClass(c.NAME_FILED_CLS))
							g.push("$" + f + "#" + h);
						else if (a(e).hasClass(c.VALUE_FIELD_CLS))
							g.push("$" + f + "#"), d.indexOf(f) === -1 && d.push(f);
						else {
							if (a(e).hasClass(c.DEPRECATE_FIELD_CLS) || a(e).hasClass(c.INVALID_FIELD_CLS))
								return;
							g.push(a(e).text())
						}
					});
					var h = g.join("").replace(/\u200b/g, "").replace(/\u00a0/g, " ");
					b.push(h)
				}), {
					formula: b.join("\n"),
					relyWidgets: d
				}
			},
			setValue: function (a) {
				var b = this,
				c = this.options,
				d = [],
				e = [];
				if (a) {
					var f = a.split("\n");
					FX.Utils.forEach(f, function (a, b) {
						var f = "",
						g = b.split(/(\$[0-9a-zA-Z\._#@]+)/g);
						FX.Utils.forEach(g, function (b, d) {
							if (/^\$(_widget_|_formula_|ext)/.test(d)) {
								var g;
								FX.Utils.startWith(d, "$ext") ? g = "" : c.labelMap && (g = c.labelMap[d]);
								var h = !1;
								FX.Utils.isNull(g) && (g = " ", h = !0);
								var i = d.replace("$", "").split("#"),
								j = i[0],
								k = i[1],
								l = CodeMirror.Pos(a, f.length);
								f += "" + g + "";
								var m = CodeMirror.Pos(a, f.length);
								e.push({
									from: l,
									to: m,
									field: j,
									entry: k,
									invalid: h
								})
							} else
								f += d
						}),
						d.push(f)
					})
				}
				this.editor.setValue(d.join("\n")),
				FX.Utils.forEach(e, function (a, c) {
					b._markField(c)
				})
			}
		}),
	a.shortcut("formulaeditor", FX.FormulaEditor)
}
(jQuery), function (a) {
	a(CodeMirror)
}
(function (a) {
	"use strict";
	function b(a, b) {
		this.cm = a,
		this.options = this.buildOptions(b),
		this.widget = null,
		this.debounce = 0,
		this.tick = 0,
		this.startPos = this.cm.getCursor(),
		this.startLen = this.cm.getLine(this.startPos.line).length;
		var c = this;
		a.on("cursorActivity", this.activityFunc = function () {
			c.cursorActivity()
		})
	}
	function c(a) {
		return "string" == typeof a ? a : a.text
	}
	function d(a, b) {
		function c(a, c) {
			var e;
			e = "string" != typeof c ? function (a) {
				return c(a, b)
			}
			 : d.hasOwnProperty(c) ? d[c] : c,
			f[a] = e
		}
		var d = {
			Up: function () {
				b.moveFocus(-1)
			},
			Down: function () {
				b.moveFocus(1)
			},
			PageUp: function () {
				b.moveFocus(-b.menuSize() + 1, !0)
			},
			PageDown: function () {
				b.moveFocus(b.menuSize() - 1, !0)
			},
			Home: function () {
				b.setFocus(0)
			},
			End: function () {
				b.setFocus(b.length - 1)
			},
			Enter: b.pick,
			Tab: b.pick,
			Esc: b.close
		},
		e = a.options.customKeys,
		f = e ? {}
		 : d;
		if (e)
			for (var g in e)
				e.hasOwnProperty(g) && c(g, e[g]);
		var h = a.options.extraKeys;
		if (h)
			for (var g in h)
				h.hasOwnProperty(g) && c(g, h[g]);
		return f
	}
	function e(a, b) {
		for (; b && b != a; ) {
			if ("LI" === b.nodeName.toUpperCase() && b.parentNode == a)
				return b;
			b = b.parentNode
		}
	}
	function f(b, f) {
		this.completion = b,
		this.data = f,
		this.picked = !1;
		var i = this,
		j = b.cm,
		k = this.hints = document.createElement("ul");
		k.className = "CodeMirror-hints",
		this.selectedHint = f.selectedHint || 0;
		for (var l = f.list, m = 0; m < l.length; ++m) {
			var n = k.appendChild(document.createElement("li")),
			o = l[m],
			p = g + (m != this.selectedHint ? "" : " " + h);
			null != o.className && (p = o.className + " " + p),
			n.className = p,
			o.render ? o.render(n, f, o) : n.appendChild(document.createTextNode(o.displayText || c(o))),
			n.hintId = m
		}
		var q = j.cursorCoords(b.options.alignWithWord ? f.from : null),
		r = q.left,
		s = q.bottom,
		t = !0;
		k.style.left = r + "px",
		k.style.top = s + "px";
		var u = window.innerWidth || Math.max(document.body.offsetWidth, document.documentElement.offsetWidth),
		v = window.innerHeight || Math.max(document.body.offsetHeight, document.documentElement.offsetHeight);
		(b.options.container || document.body).appendChild(k);
		var w = k.getBoundingClientRect(),
		x = w.bottom - v;
		if (x > 0) {
			var y = w.bottom - w.top,
			z = q.top - (q.bottom - w.top);
			if (z - y > 0)
				k.style.top = (s = q.top - y) + "px", t = !1;
			else if (y > v) {
				k.style.height = v - 5 + "px",
				k.style.top = (s = q.bottom - w.top) + "px";
				var A = j.getCursor();
				f.from.ch != A.ch && (q = j.cursorCoords(A), k.style.left = (r = q.left) + "px", w = k.getBoundingClientRect())
			}
		}
		var B = w.right - u;
		if (B > 0 && (w.right - w.left > u && (k.style.width = u - 5 + "px", B -= w.right - w.left - u), k.style.left = (r = q.left - B) + "px"), j.addKeyMap(this.keyMap = d(b, {
						moveFocus: function (a, b) {
							i.changeActive(i.selectedHint + a, b)
						},
						setFocus: function (a) {
							i.changeActive(a)
						},
						menuSize: function () {
							return i.screenAmount()
						},
						length: l.length,
						close: function () {
							b.close()
						},
						pick: function () {
							i.pick()
						},
						data: f
					})), b.options.closeOnUnfocus) {
			var C;
			j.on("blur", this.onBlur = function () {
				C = setTimeout(function () {
						b.close()
					}, 100)
			}),
			j.on("focus", this.onFocus = function () {
				clearTimeout(C)
			})
		}
		var D = j.getScrollInfo();
		return j.on("scroll", this.onScroll = function () {
			var a = j.getScrollInfo(),
			c = j.getWrapperElement().getBoundingClientRect(),
			d = s + D.top - a.top,
			e = d - (window.pageYOffset || (document.documentElement || document.body).scrollTop);
			return t || (e += k.offsetHeight),
			e <= c.top || e >= c.bottom ? b.close() : (k.style.top = d + "px", void(k.style.left = r + D.left - a.left + "px"))
		}),
		a.on(k, "dblclick", function (a) {
			var b = e(k, a.target || a.srcElement);
			b && null != b.hintId && (i.changeActive(b.hintId), i.pick())
		}),
		a.on(k, "click", function (a) {
			var c = e(k, a.target || a.srcElement);
			c && null != c.hintId && (i.changeActive(c.hintId), b.options.completeOnSingleClick && i.pick())
		}),
		a.on(k, "mousedown", function () {
			setTimeout(function () {
				j.focus()
			}, 20)
		}),
		a.signal(f, "select", l[0], k.firstChild),
		!0
	}
	var g = "CodeMirror-hint",
	h = "CodeMirror-hint-active";
	a.showHint = function (a, b, c) {
		if (!b)
			return a.showHint(c);
		c && c.async && (b.async = !0);
		var d = {
			hint: b
		};
		if (c)
			for (var e in c)
				d[e] = c[e];
		return a.showHint(d)
	},
	a.defineExtension("showHint", function (c) {
		if (!(this.listSelections().length > 1 || this.somethingSelected())) {
			this.state.completionActive && this.state.completionActive.close();
			var d = this.state.completionActive = new b(this, c);
			d.options.hint && (a.signal(this, "startCompletion", this), d.update(!0))
		}
	});
	var i = window.requestAnimationFrame || function (a) {
		return setTimeout(a, 1e3 / 60)
	},
	j = window.cancelAnimationFrame || clearTimeout;
	b.prototype = {
		close: function () {
			this.active() && (this.cm.state.completionActive = null, this.tick = null, this.cm.off("cursorActivity", this.activityFunc), this.widget && this.data && a.signal(this.data, "close"), this.widget && this.widget.close(), a.signal(this.cm, "endCompletion", this.cm))
		},
		active: function () {
			return this.cm.state.completionActive == this
		},
		pick: function (b, d) {
			var e = b.list[d];
			e.hint ? e.hint(this.cm, b, e) : this.cm.replaceRange(c(e), e.from || b.from, e.to || b.to, "complete"),
			a.signal(b, "pick", e),
			this.close()
		},
		cursorActivity: function () {
			this.debounce && (j(this.debounce), this.debounce = 0);
			var a = this.cm.getCursor(),
			b = this.cm.getLine(a.line);
			if (a.line != this.startPos.line || b.length - a.ch != this.startLen - this.startPos.ch || a.ch < this.startPos.ch || this.cm.somethingSelected() || a.ch && this.options.closeCharacters.test(b.charAt(a.ch - 1)))
				this.close();
			else {
				var c = this;
				this.debounce = i(function () {
						c.update()
					}),
				this.widget && this.widget.disable()
			}
		},
		update: function (b) {
			if (null != this.tick)
				if (this.data && a.signal(this.data, "update"), this.options.hint.async) {
					var c = ++this.tick,
					d = this;
					this.options.hint(this.cm, function (a) {
						d.tick == c && d.finishUpdate(a, b)
					}, this.options)
				} else
					this.finishUpdate(this.options.hint(this.cm, this.options), b)
		},
		finishUpdate: function (b, c) {
			this.data = b;
			var d = this.widget && this.widget.picked || c && this.options.completeSingle;
			this.widget && this.widget.close(),
			b && b.list.length && (d && 1 == b.list.length ? this.pick(b, 0) : (this.widget = new f(this, b), a.signal(b, "shown")))
		},
		buildOptions: function (a) {
			var b = this.cm.options.hintOptions,
			c = {};
			for (var d in k)
				c[d] = k[d];
			if (b)
				for (var d in b)
					void 0 !== b[d] && (c[d] = b[d]);
			if (a)
				for (var d in a)
					void 0 !== a[d] && (c[d] = a[d]);
			return c
		}
	},
	f.prototype = {
		close: function () {
			if (this.completion.widget == this) {
				this.completion.widget = null,
				this.hints.parentNode.removeChild(this.hints),
				this.completion.cm.removeKeyMap(this.keyMap);
				var a = this.completion.cm;
				this.completion.options.closeOnUnfocus && (a.off("blur", this.onBlur), a.off("focus", this.onFocus)),
				a.off("scroll", this.onScroll)
			}
		},
		disable: function () {
			this.completion.cm.removeKeyMap(this.keyMap);
			var a = this;
			this.keyMap = {
				Enter: function () {
					a.picked = !0
				}
			},
			this.completion.cm.addKeyMap(this.keyMap)
		},
		pick: function () {
			this.completion.pick(this.data, this.selectedHint)
		},
		changeActive: function (b, c) {
			if (b >= this.data.list.length ? b = c ? this.data.list.length - 1 : 0 : b < 0 && (b = c ? 0 : this.data.list.length - 1), this.selectedHint != b) {
				var d = this.hints.childNodes[this.selectedHint];
				d.className = d.className.replace(" " + h, ""),
				d = this.hints.childNodes[this.selectedHint = b],
				d.className += " " + h,
				d.offsetTop < this.hints.scrollTop ? this.hints.scrollTop = d.offsetTop - 3 : d.offsetTop + d.offsetHeight > this.hints.scrollTop + this.hints.clientHeight && (this.hints.scrollTop = d.offsetTop + d.offsetHeight - this.hints.clientHeight + 3),
				a.signal(this.data, "select", this.data.list[this.selectedHint], d)
			}
		},
		screenAmount: function () {
			return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1
		}
	},
	a.registerHelper("hint", "auto", function (b, c) {
		var d,
		e = b.getHelpers(b.getCursor(), "hint");
		if (e.length)
			for (var f = 0; f < e.length; f++) {
				var g = e[f](b, c);
				if (g && g.list.length)
					return g
			}
		else if (d = b.getHelper(b.getCursor(), "hintWords")) {
			if (d)
				return a.hint.fromList(b, {
					words: d
				})
		} else if (a.hint.anyword)
			return a.hint.anyword(b, c)
	}),
	a.registerHelper("hint", "fromList", function (b, c) {
		for (var d = b.getCursor(), e = b.getTokenAt(d), f = [], g = 0; g < c.words.length; g++) {
			var h = c.words[g];
			h.slice(0, e.string.length) == e.string && f.push(h)
		}
		if (f.length)
			return {
				list: f,
				from: a.Pos(d.line, e.start),
				to: a.Pos(d.line, e.end)
			}
	}),
	a.commands.autocomplete = a.showHint;
	var k = {
		hint: a.hint.auto,
		completeSingle: !0,
		alignWithWord: !0,
		closeCharacters: /[\s()\[\]{};:>,]/,
		closeOnUnfocus: !0,
		completeOnSingleClick: !1,
		container: null,
		customKeys: null,
		extraKeys: null
	};
	a.defineOption("hintOptions", null)
}), function (a) {
	a(CodeMirror)
}
(function (a) {
	function b(a, b) {
		for (var c = 0, d = a.length; c < d; ++c)
			b(a[c])
	}
	function c(a, b) {
		if (!Array.prototype.indexOf) {
			for (var c = a.length; c--; )
				if (a[c] === b)
					return !0;
			return !1
		}
		return a.indexOf(b) != -1
	}
	function d(b, c, d, e) {
		var h = b.getCursor(),
		i = d(b, h);
		if (!/\b(?:string)\b/.test(i.type)) {
			i.state = a.innerMode(b.getMode(), i.state).state,
			/^[\w$_]*$/.test(i.string) ? i.end > h.ch && (i.end = h.ch, i.string = i.string.slice(0, h.ch - i.start)) : i = {
				start: h.ch,
				end: h.ch,
				string: "",
				state: i.state,
				type: "." == i.string ? "property" : null
			};
			for (var j = i; "property" == j.type; ) {
				if (j = d(b, g(h.line, j.start)), "." != j.string)
					return;
				if (j = d(b, g(h.line, j.start)), !k)
					var k = [];
				k.push(j)
			}
			return {
				list: f(i, k, c, e),
				from: g(h.line, i.start),
				to: g(h.line, i.end)
			}
		}
	}
	function e(b, c) {
		return d(b, a.keywords, function (a, b) {
			return a.getTokenAt(b)
		}, c)
	}
	function f(a, d, e, f) {
		function g(a) {
			0 != a.lastIndexOf(i, 0) || c(h, a) || h.push(a)
		}
		var h = [],
		i = a.string.toUpperCase();
		return i ? (d && d.length ? d.pop() : b(e, g), h) : h
	}
	var g = a.Pos;
	a.registerHelper("hint", "formula", e)
}), function (a) {
	a(CodeMirror)
}
(function (a) {
	"use strict";
	a.defineMode("formula", function () {
		function b(a) {
			for (var b = {}, c = 0, d = a.length; c < d; ++c)
				b[a[c]] = !0;
			return b
		}
		function c(a, b) {
			if (a.eatSpace())
				return null;
			var c = a.next();
			if ('"' === c || "'" === c)
				return d(a, c), "string";
			if ("" === c)
				return d(a, c), "field";
			if (/[\[\],\(\)]/.test(c))
				return "bracket";
			if (/[+\-*\/=<>!&|]/.test(c))
				return "operator";
			if (/\d/.test(c))
				return a.eatWhile(/[\d\.]/), "number";
			a.eatWhile(/[\w]/);
			var e = a.current();
			return f.hasOwnProperty(e) ? "atom" : g.hasOwnProperty(e) ? "keyword" : h.hasOwnProperty(e) ? "deprecate" : null
		}
		function d(a, b) {
			for (var c, d = !1; null != (c = a.next()); ) {
				if (c === b && !d)
					return !1;
				d = !d && "\\" === c
			}
			return d
		}
		function e(a, b) {
			return (b.tokens[0] || c)(a, b)
		}
		var f = b(["false", "true"]),
		g = b(a.keywords),
		h = b(["MAP"]);
		return {
			startState: function () {
				return {
					tokens: []
				}
			},
			token: function (a, b) {
				return e(a, b)
			},
			fold: "brace"
		}
	}),
	a.defineMIME("text/fx-formula", "formula")
}), function (a) {
	FX.ConfigPane = FX.extend(FX.Container, {
			_defaultConfig: function () {
				return a.extend(FX.ConfigPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_config_pane",
					items: []
				})
			},
			_init: function () {
				FX.ConfigPane.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this.element,
				d = this;
				b.items && a.each(b.items, function (b, e) {
					if (!e.disabled) {
						if (e.label) {
							var f = a('<div class="cfg_title"/>').append(a("<span/>").text(e.label)).appendTo(c);
							if (e.tooltip) {
								var g = e.tooltip_type || "info",
								h = "";
								"info" === g ? h = "icon-help" : "warning" === g && (h = "icon-tip-warning");
								var i = a('<i class="cfg_tooltip ' + h + '"/>').hover(function () {
										FX.UI.showPopover({
											position: "topRight",
											anchor: i,
											content: e.tooltip,
											type: e.tooltip_type,
											maxWidth: 250
										})
									}, function () {
										FX.UI.closePopover()
									}).appendTo(f)
							}
							e.widgetType && e.widgetType.appendTo(f)
						}
						e.widget && (e.widget.renderEl = a('<div class="cfg_content"/>').appendTo(c), d._addWidget(e.widget)),
						e.contentEl && c.append(e.contentEl),
						e.splitLine && a('<div class="cfg_split"/>').appendTo(c)
					}
				})
			}
		}),
	a.shortcut("configpane", FX.ConfigPane)
}
(jQuery), function (a) {
	FX.AuthGroupPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.AuthGroupPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_auth_group",
					name: "",
					printId: null,
					groupId: 0,
					desc: "",
					tip: " ",
					members: [],
					type: "custom",
					onEditAuth: null,
					onAfterEditMember: null
				})
			},
			_init: function () {
				FX.AuthGroupPane.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.$titlePane = a('<div class="pane-title"/>').addClass(c.type).appendTo(this.element);
				var d = a('<div class="pane-content"/>').appendTo(this.element),
				e = c.members || [];
				this.members = new FX.MemberSelectPane({
						renderEl: d,
						value: e,
						msg: c.tip,
						onStopEdit: function (a) {
							c.members = a,
							FX.Utils.applyFunc(b, c.onAfterEditMember, [a, c.groupId], !1)
						}
					});
				var f = this.$titlePane;
				a('<span class="pane-name"/>').text(c.name).appendTo(f),
				a('<span class="pane-desc" />').text(c.desc).appendTo(f),
				c.groupId !== FX.CONST.AUTH_GROUP.SUBMIT && a('<div class="print-set" />').text("").prepend('<i class="icon-setting" />').appendTo(f),
				"default" !== c.type && (a('<div class="delete" />').text(" ").prepend('<i class="icon-trasho"/>').appendTo(f), a('<div class="edit" />').text("").prepend('<i class="icon-edit" />').appendTo(f)),
				this._bindTitleEvent(f)
			},
			_bindTitleEvent: function (a) {
				var b = this,
				c = this.options;
				a.find(".delete").bind("click", function () {
					FX.Msg.alert({
						title: " ",
						msg: "   ",
						type: "warning",
						onOk: function () {
							FX.Utils.ajax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/auth_group/remove",
								data: {
									groupId: c.groupId
								}
							}, function () {
								b.destroy()
							}, function () {
								FX.Msg.toast({
									type: "error",
									msg: " "
								})
							})
						}
					})
				}),
				a.find(".edit").bind("click", function () {
					FX.Utils.applyFunc(b, c.onEditAuth, [], !1)
				}),
				a.find(".print-set").bind("click", function () {
					var a = new FX.ConfirmDialog({
							title: "",
							height: 570,
							width: 600,
							onOk: function () {
								var b = a.getWidgetByName("ptselect");
								return FX.Utils.ajax({
									url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/auth_group/pt_update",
									data: {
										printId: b.getValue(),
										groupId: c.groupId
									}
								}, function () {
									FX.Msg.toast({
										type: "success",
										msg: ""
									}),
									c.printId = b.getValue()
								}),
								!1
							},
							contentWidget: {
								rowSize: [450],
								colSize: [570],
								padding: 15,
								items: [[{
											widgetName: "ptselect",
											type: "printtemplateselectpane",
											appId: FX.STATIC.APPID,
											value: c.printId,
											formId: FX.STATIC.ENTRYID,
											editable: !0
										}
									]]
							}
						});
					a.show()
				})
			},
			rebuild: function () {
				var a = this.options;
				this.$titlePane.find(".pane-name").text(a.name),
				this.$titlePane.find(".pane-desc").text(a.desc),
				this.members.rebuild(a.members)
			}
		}),
	a.shortcut("authgrouppane", FX.AuthGroupPane)
}
(jQuery), function (a) {
	FX.AuthGroupListPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.AuthGroupListPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_authgroup_list",
					entryId: "",
					entryItems: []
				})
			},
			_init: function () {
				FX.AuthGroupListPane.superclass._init.apply(this, arguments),
				this.groupId = 0,
				this._createAuthPane(),
				this._createGroupList(),
				this._createAuthAdd()
			},
			_createAuthPane: function () {
				var b = this;
				this.$body = a('<div class="group-body"/>').appendTo(this.element),
				new FX.Slider({
					content: this.element,
					title: "",
					onClose: function () {
						b.destroy()
					}
				}).show()
			},
			_createAuthAdd: function () {
				var b = this;
				a('<div class="group-add"><span><i class="icon-add"/> </span></div>').click(function () {
					FX.Utils.dt(FX.CONST.TRACKER.AUTH_GROUP_CREATE),
					b._createConfigDialog()
				}).appendTo(this.element)
			},
			_createAuthGroup: function (b) {
				var c = this;
				return this.groupId = Math.max(this.groupId, b.groupId),
				new FX.AuthGroupPane(a.extend(b, {
						renderEl: a("<li/>").appendTo(this.$groupList),
						onEditAuth: function () {
							c._createConfigDialog(this)
						},
						onAfterEditMember: function (a, b) {
							c._saveAuthGroup({
								groupId: b,
								members: a
							}, this)
						}
					}))
			},
			_createGroupList: function () {
				var b = this,
				c = this.options,
				d = FX.CONST.AUTH_GROUP_CONTENT;
				this.$groupList = a('<ul class="group-list"/>').appendTo(this.$body),
				this.groupList = {},
				FX.Utils.forEach(d, function (a, c) {
					b.groupList[c.groupId] = b._createAuthGroup(c)
				}),
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + c.entryId + "/auth_group/list"
				}, function (c) {
					FX.Utils.forEach(c.authGroups, function (c, d) {
						if (d.groupId < 0) {
							var e = b.groupList[d.groupId];
							e && (a.extend(e.options, d), e.rebuild())
						} else
							b._createAuthGroup(d)
					})
				})
			},
			_getAttrFields: function () {
				var a = this.options;
				if (this.attrFields)
					return this.attrFields;
				var b = ["creator", "createTime", "updateTime"];
				a.hasExtParams && b.push("ext");
				var c = [];
				return FX.Utils.forEach(b, function (b, d) {
					var e = FX.Utils.createEntryAttributeField(d, {
							entryId: a.entryId
						});
					e && c.push({
						label: e.text,
						widget: {
							widgetName: e.name
						}
					})
				}),
				this.attrFields = c,
				c
			},
			_createConfigDialog: function (a) {
				var b = this,
				c = this.options,
				d = {};
				a && (d = a.options, d.dataAuthFields = {}, d.dataAuthFields[c.entryId] = d.dataAuth);
				var e = new FX.ConfirmDialog({
						title: a ? "" : " ",
						text4Ok: "",
						height: 536,
						width: 473,
						contentWidget: {
							rowSize: [30, 60, 60, 110, 105],
							colSize: [85, 350],
							padding: 18,
							vgap: 10,
							items: [[{
										type: "label",
										text: ""
									}, {
										type: "text",
										waterMark: "",
										value: d.name,
										widgetName: "name",
										allowBlank: !1,
										onValidateFail: function () {
											return this.showErrorMsg(""),
											!1
										}
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "textarea",
										waterMark: "",
										value: d.desc,
										widgetName: "desc"
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "operationauthpane",
										widgetName: "dataPerms",
										value: d.dataPerms,
										onAfterClick: function (a) {
											var b = a.hasClass("select"),
											c = e.getWidgetByName("optAuth");
											!b && a.hasClass("read") && c.setValueByType("visible", !1),
											!b && a.hasClass("update") && c.setValueByType("editable", !1)
										}
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "fieldauthpane",
										widgetName: "optAuth",
										items: c.entryItems.concat(this._getAttrFields()),
										value: d.optAuth,
										onAfterClick: function (a) {
											var b = e.getWidgetByName("dataPerms"),
											c = a.hasClass("select");
											c && a.hasClass("visible") ? b.setSelected("read") : c && a.hasClass("editable") && b.setSelected("update")
										}
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "filterpane",
										customCls: "filter-pane",
										widgetName: "dataAuth",
										forms: [c.entryId],
										fields: d.dataAuthFields
									}
								]]
						},
						onOk: function () {
							var c = e.getWidgetByName("optAuth"),
							f = e.getWidgetByName("dataPerms"),
							g = e.getWidgetByName("name"),
							h = e.getWidgetByName("desc");
							if (!g.checkValidate() || !c.checkValidate() || !f.checkValidate())
								return !0;
							var i = {};
							i.groupId = FX.Utils.isNull(d.groupId) ? ++b.groupId : d.groupId;
							var j = e.getWidgetByName("dataAuth").getValue();
							return j[FX.STATIC.ENTRYID] ? i.dataAuth = j[FX.STATIC.ENTRYID] : i.dataAuth = {},
							i.name = g.getValue(),
							i.desc = h.getValue(),
							i.dataPerms = f.getValue(),
							i.optAuth = c.getValue(),
							b._saveAuthGroup(i, a),
							!1
						}
					});
				e.show()
			},
			_saveAuthGroup: function (b, c) {
				var d = this,
				e = this.options;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + e.entryId + "/auth_group/update",
					data: b
				}, function (e, f) {
					FX.Msg.toast({
						type: "success",
						msg: ""
					}),
					c ? (a.extend(c.options, b), c.rebuild()) : d._createAuthGroup(b)
				}, function () {
					FX.Msg.toast({
						type: "error",
						msg: ""
					})
				})
			}
		})
}
(jQuery), function (a) {
	FX.Tooltip = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.Tooltip.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_tooltip_pane",
					text: "",
					tipWidth: 200,
					animation: !0
				})
			},
			_init: function () {
				FX.Tooltip.superclass._init.apply(this, arguments);
				var b = this.options,
				c = a('<i class="tip-icon icon-help"/>').hover(function () {
						FX.UI.showPopover({
							position: b.position,
							anchor: c,
							maxWidth: b.tipWidth,
							animation: b.animation,
							content: a("<span/>").text(b.text)
						})
					}, function () {
						FX.UI.closePopover()
					}).appendTo(this.element)
			}
		}),
	a.shortcut("tooltippane", FX.Tooltip)
}
(jQuery), function (a) {
	FX.BaseFieldSelectPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.BaseFieldSelectPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_field_select_pane",
					mode: "pop-right",
					forms: [],
					fields: [],
					excludeFields: [],
					onFieldSelect: null,
					onFieldFilter: null
				})
			},
			_init: function () {
				FX.BaseFieldSelectPane.superclass._init.apply(this, arguments);
				var a = this.options;
				switch (a.mode) {
				case "dialog":
					this.element.addClass("dialog-menu");
					break;
				case "pop-left":
					this.element.addClass("pop-menu pop-left x-dropdown");
					break;
				case "pop-right":
				default:
					this.element.addClass("pop-menu pop-right x-dropdown")
				}
				this._createMenuList(),
				this._bindMenuEvents()
			},
			_createMenuList: function () {
				this.$menuList = a('<ul class="menu-list"/>').appendTo(this.element)
			},
			_bindMenuEvents: function () {
				var b = this,
				c = (this.options, function (c) {
					if (b.isEnabled()) {
						var d = c.target,
						e = c.type,
						f = a(d).closest("li");
						f && f.length && !f.hasClass("disabled") && "click" === e && b._onMenuItemClick(f)
					}
				});
				this.$menuList.unbind(".field-select"),
				this.$menuList.bind({
					"click.field-select": c
				})
			},
			_createFieldItem: function (b) {
				return a('<li class="field"/>').attr("name", b.name).data("field", b).appendTo(this.$menuList)
			},
			_onMenuItemClick: function (a) {},
			_isFieldTypeAllowed: function (a) {
				var b = this.options;
				return !b.availableFields || b.availableFields.indexOf(a.type) > -1
			},
			_isFieldExcluded: function (a) {
				var b = this.options;
				return b.excludeFields && b.excludeFields.indexOf(a.name) > -1 || FX.Utils.applyFunc(this, b.onFieldFilter, [a], !1)
			},
			_findSelectedFieldIndex: function (a) {
				var b = this.options,
				c = -1;
				return FX.Utils.forEach(b.fields, function (b, d) {
					if (a.name === d.name && a.id === d.id)
						return c = b, !1
				}),
				c
			},
			show: function () {
				var a = this.options;
				"dialog" !== a.mode && this.element.addClass("active")
			},
			selectField: function (a) {},
			deselectField: function (a) {},
			setForms: function (a) {
				this.options.forms = a,
				this._refreshList()
			},
			setFields: function (a) {
				this.options.fields = a,
				this._refreshList()
			},
			_refreshList: function () {}
		}),
	a.shortcut("field_select", FX.BaseFieldSelectPane)
}
(jQuery), function (a) {
	FX.EntryFieldSelectPane = FX.extend(FX.BaseFieldSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.EntryFieldSelectPane.superclass._defaultConfig.apply(this, arguments), {
					entryList: null,
					forms: [],
					subform: null,
					fields: [],
					joinedFields: [],
					excludeFields: [],
					attributeFields: [],
					hasCount: !1,
					hasCalcFormula: !1,
					isAggregate: !1,
					allowMultiTable: !1,
					allowSameField: !1,
					allowMultiSubform: !0,
					onFieldSelect: null
				})
			},
			_init: function () {
				FX.EntryFieldSelectPane.superclass._init.apply(this, arguments);
				var a = this.options;
				this._initCalcFormulas(),
				a.entryList && 1 === a.entryList.length && this.$menuList.children().eq(0).click()
			},
			_initCalcFormulas: function () {
				var a = this,
				b = this.options;
				this.entryCalcFormulaMap = {},
				b.hasCalcFormula && FX.Utils.forEach(b.fields, function (b, c) {
					if ("formula" === c.type && "calc" === c.category) {
						var d = c.forms[0];
						a.entryCalcFormulaMap[d] = a.entryCalcFormulaMap[d] || [],
						a.entryCalcFormulaMap[d].push(c)
					}
				})
			},
			_createMenuList: function () {
				FX.EntryFieldSelectPane.superclass._createMenuList.apply(this, arguments);
				var a = this,
				b = this.options;
				this._hasJoinedFields() && (b.allowMultiTable = !0, a._createJoinedEntryItem()),
				FX.Utils.forEach(b.entryList, function (b, c) {
					a._createEntryItem(c)
				});
				var c = null;
				FX.Utils.forEach(b.fields, function (a, b) {
					if (b.subform)
						return c = b.subform, !1
				}),
				b.subform = c
			},
			_hasJoinedFields: function () {
				var a = this.options;
				return a.joinedFields.length > 0
			},
			_createJoinedEntryItem: function () {
				var b = this,
				c = this.options,
				d = a('<li class="entry"/>').data("entry", {
						isJoined: !0
					});
				a('<a class="menu-item"/>').append(a('<i class="icon-field-form"/>')).append(a("<span/>").text("")).appendTo(d);
				var e = a('<ul class="field-list"/>').hide();
				FX.Utils.forEach(c.joinedFields, function (c, d) {
					var f = a('<li class="field"/>').attr("name", d.name).data("field", d).appendTo(e);
					a('<a class="menu-item"/>').append(a("<span/>").text(d.text)).appendTo(f),
					b._filterJoinedFieldEnabled(d) === !1 && f.addClass("disabled")
				}),
				e.appendTo(d),
				e.children().length && d.appendTo(this.$menuList)
			},
			_filterJoinedFieldEnabled: function (a) {
				var b = this.options,
				c = !0;
				return FX.Utils.forEach(b.fields, function (b, d) {
					if (a.name === d.name)
						return c = !1, !1
				}),
				c
			},
			_createEntryItem: function (b) {
				var c = a('<li class="entry"/>').data("entry", b).appendTo(this.$menuList),
				d = "icon-form";
				"aggregate_table" === b.type && (d = "icon-aggregate"),
				a('<a class="menu-item"/>').append(a("<i class=" + d + "/>")).append(a("<span/>").text(b.name)).appendTo(c)
			},
			_createEntryFieldList: function (b) {
				var c = this,
				d = this.options,
				e = a('<ul class="field-list"/>').hide(),
				f = [].concat(d.attributeFields);
				if (d.attributeFields.length > 0 && b.hasExtParams && f.push("ext"), "form" === b.type && FX.Utils.forEach(f, function (a, d) {
						var f = FX.Utils.createEntryAttributeField(d, b);
						f && c._createEntryFieldItem(b, f, e)
					}), FX.Utils.forEach(b.fields, function (f, g) {
						var h = a.extend({}, g, {
								id: b.entryId
							});
						h && c._isFieldTypeAllowed(h) && !c._isFieldExcluded(h) && ("subform" === h.type ? (d.subform || (d.subform = h.subform), FX.Utils.forEach(h.items, function (d, f) {
									if (c._isFieldTypeAllowed(f) && !c._isFieldExcluded(f)) {
										var g = a.extend({}, f, {
												id: b.entryId,
												name: h.name + "." + f.name,
												text: h.text + "." + f.text,
												subformText: h.text,
												subform: h.name
											});
										c._createEntryFieldItem(b, g, e)
									}
								})) : c._createEntryFieldItem(b, h, e))
					}), d.hasCalcFormula) {
					var g = b.entryId;
					b.appId && FX.STATIC.APPID !== b.appId && (g = [b.entryId, b.appId].join(FX.CONST.FIELD.DELIMITER)),
					FX.Utils.forEach(this.entryCalcFormulaMap[g], function (a, d) {
						c._createEntryFieldItem(b, d, e)
					})
				}
				if (d.hasCount) {
					var h = {
						name: "_count_" + b.entryId,
						text: "",
						type: "count",
						formula: "1",
						id: b.entryId
					};
					c._createEntryFieldItem(b, h, e)
				}
				return e
			},
			_createEntryFieldItem: function (b, c, d) {
				b.appId !== FX.STATIC.APPID && (c.appId = b.appId);
				var e = a('<li class="field"/>').attr("name", c.name).data("field", c).appendTo(d);
				return a('<a class="menu-item"/>').append(a("<span/>").text(c.text)).appendTo(e),
				this._filterFieldEnabled(b, c) === !1 && e.addClass("disabled"),
				e
			},
			_filterFieldEnabled: function (a, b) {
				var c = this.options,
				d = !0;
				return !c.allowSameField && c.fields.length > 0 && FX.Utils.forEach(c.fields, function (e, f) {
					if (!b.appId || f.appId == b.appId)
						return "subform" === f.type ? (FX.Utils.forEach(f.items, function (c, e) {
								var f = e.subform + "." + e.name;
								if (a.entryId === e.id && b.name === f)
									return d = !1, !1
							}), d) : a.entryId === f.id && b.name === f.name ? (d = !1, !1) : c.subform && !c.allowMultiSubform && b.subform && c.subform !== b.subform ? (d = !1, !1) : "formula" === b.type && b.name === f.name ? (d = !f.enable, !1) : void 0
				}),
				d
			},
			_onMenuItemClick: function (b) {
				var c = this,
				d = this.options;
				if (b.hasClass("entry")) {
					b.siblings().children(".field-list").slideUp("fast");
					var e = b.children(".field-list");
					if (!e || !e.length) {
						var f = b.data("entry");
						e = this._createEntryFieldList(f).appendTo(b)
					}
					e.slideToggle("fast")
				} else if (b.hasClass("field")) {
					var g = b.data("field");
					d.isAggregate === !0 && (g.op = "sum"),
					FX.Utils.applyFunc(this, d.onFieldSelect, [a.extend({}, g)], !1) === !1 && (g.subform && !d.subform && (d.allowMultiTable = !1, d.subform = g.subform), c.selectField(g))
				}
			},
			selectField: function (a) {
				var b = this.options;
				"formula" !== a.type && b.fields.push(a),
				this._refreshList()
			},
			deselectField: function (a) {
				var b = this.options;
				if ("formula" !== a.type) {
					var c = this._findSelectedFieldIndex(a);
					c > -1 && b.fields.splice(c, 1),
					0 === b.fields.length && (b.subform = null)
				}
				this._refreshList()
			},
			_refreshList: function () {
				var b = this;
				this.$menuList.children().each(function () {
					var c = a(this),
					d = c.data("entry"),
					e = c.children(".field-list");
					e && e.length && e.children().each(function () {
						var c = a(this),
						e = c.data("field");
						b._filterFieldEnabled(d, e) ? c.removeClass("disabled") : c.addClass("disabled")
					})
				})
			}
		}),
	a.shortcut("entry_field_select", FX.EntryFieldSelectPane)
}
(jQuery), function (a) {
	FX.FilterFieldSelectPane = FX.extend(FX.BaseFieldSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.FilterFieldSelectPane.superclass._defaultConfig.apply(this, arguments), {
					entryList: null,
					forms: [],
					fields: [],
					excludeFields: [],
					attributeFields: ["creator", "updateTime", "createTime"],
					allowMultiTable: !1,
					allowSameField: !1,
					onFieldSelect: null
				})
			},
			_init: function () {
				FX.FilterFieldSelectPane.superclass._init.apply(this, arguments),
				this.$menuList.children().length <= 1 && this.$menuList.children().eq(0).click()
			},
			_createMenuList: function () {
				FX.FilterFieldSelectPane.superclass._createMenuList.apply(this, arguments);
				var a = this,
				b = this.options;
				FX.Utils.forEach(b.entryList, function (b, c) {
					c.id = b,
					a._createEntryItem(c)
				})
			},
			_createEntryItem: function (b) {
				var c = a('<li class="entry"/>').data("entry", b).appendTo(this.$menuList),
				d = "icon-form";
				a('<a class="menu-item"/>').append(a("<i class=" + d + "/>")).append(a("<span/>").text(b.name)).appendTo(c)
			},
			_createEntryFieldList: function (b) {
				var c = this,
				d = (this.options, a('<ul class="field-list"/>').hide());
				return FX.Utils.forEach(b.fields, function (a, e) {
					e && !c._isFieldExcluded(e) && c._isFieldTypeAllowed(e) && (e.id = b.id, c._createEntryFieldItem(b, e, d))
				}),
				d
			},
			_isFieldTypeAllowed: function (a) {
				var b = this.options;
				return b.attributeFields.indexOf(a.name) > -1 || (!b.availableFields || b.availableFields.indexOf(a.type) > -1)
			},
			_createEntryFieldItem: function (b, c, d) {
				var e = a('<li class="field"/>').attr("name", c.name).data("field", c).appendTo(d);
				return a('<a class="menu-item"/>').append(a("<span/>").text(c.text)).appendTo(e),
				this._filterFieldEnabled(b, c) === !1 && e.addClass("disabled"),
				e
			},
			_filterFieldEnabled: function (a, b) {
				var c = this.options,
				d = !0;
				return !c.allowSameField && c.fields.length > 0 && FX.Utils.forEach(c.fields, function (c, e) {
					if (a.id === e.id && b.name === e.name)
						return d = !1, !1
				}),
				d
			},
			_onMenuItemClick: function (b) {
				var c = this,
				d = this.options;
				if (b.hasClass("entry")) {
					b.siblings().children(".field-list").slideUp("fast");
					var e = b.children(".field-list");
					if (!e || !e.length) {
						var f = b.data("entry");
						e = this._createEntryFieldList(f).appendTo(b)
					}
					e.slideToggle("fast")
				} else if (b.hasClass("field")) {
					var g = b.data("field");
					d.isAggregate === !0 && (g.op = "sum"),
					FX.Utils.applyFunc(this, d.onFieldSelect, [a.extend({}, g)], !1) === !1 && (g.subform && !d.subform && (d.allowMultiTable = !1, d.subform = g.subform), c.selectField(g))
				}
			},
			selectField: function (a) {
				var b = this.options;
				b.fields.push(a),
				this._refreshList()
			},
			deselectField: function (a) {
				var b = this.options,
				c = this._findSelectedFieldIndex(a);
				c > -1 && b.fields.splice(c, 1),
				0 === b.fields.length && (b.subform = null),
				this._refreshList()
			},
			_refreshList: function () {
				var b = this;
				this.$menuList.children().each(function () {
					var c = a(this),
					d = c.data("entry"),
					e = c.children(".field-list");
					e && e.length && e.children().each(function () {
						var c = a(this),
						e = c.data("field");
						b._filterFieldEnabled(d, e) ? c.removeClass("disabled") : c.addClass("disabled")
					})
				})
			}
		}),
	a.shortcut("filter_field_select", FX.FilterFieldSelectPane)
}
(jQuery), function (a) {
	FX.JoinedFieldSelectPane = FX.extend(FX.BaseFieldSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.JoinedFieldSelectPane.superclass._defaultConfig.apply(this, arguments), {
					forms: [],
					fields: [],
					joinedFields: [],
					onFieldSelect: null
				})
			},
			_createMenuList: function () {
				FX.JoinedFieldSelectPane.superclass._createMenuList.apply(this, arguments);
				var a = this,
				b = this.options;
				FX.Utils.forEach(b.joinedFields, function (b, c) {
					a._isFieldTypeAllowed(c) && a._createFieldItem(c)
				})
			},
			_createFieldItem: function (b) {
				var c = a('<li class="field"/>').attr("name", b.name).data("field", b).appendTo(this.$menuList);
				return a('<a class="menu-item"/>').append(a("<span/>").text(b.text)).appendTo(c),
				this._filterJoinedFieldEnabled(b) === !1 && c.addClass("disabled"),
				c
			},
			_onMenuItemClick: function (b) {
				var c = this,
				d = this.options;
				if (b.hasClass("field")) {
					var e = b.data("field");
					FX.Utils.applyFunc(c, d.onFieldSelect, [a.extend({}, e)], !1) === !1 && this.selectField(e)
				}
			},
			_filterJoinedFieldEnabled: function (a) {
				var b = this.options,
				c = !0;
				return FX.Utils.forEach(b.fields, function (b, d) {
					if (a.name === d.name)
						return c = !1, !1
				}),
				c
			},
			selectField: function (a) {
				var b = this.options;
				"formula" !== a.type && b.fields.push(a),
				this._refreshList()
			},
			deselectField: function (a) {
				var b = this.options;
				if ("formula" !== a.type) {
					var c = this._findSelectedFieldIndex(a);
					c > -1 && b.fields.splice(c, 1)
				}
				this._refreshList()
			},
			_refreshList: function () {
				var b = this;
				this.$menuList.children().each(function () {
					var c = a(this),
					d = c.data("field");
					b._filterJoinedFieldEnabled(d) ? c.removeClass("disabled") : c.addClass("disabled")
				})
			}
		}),
	a.shortcut("joined_field_select", FX.JoinedFieldSelectPane)
}
(jQuery), function (a) {
	FX.LinkFieldSelectPane = FX.extend(FX.BaseFieldSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.LinkFieldSelectPane.superclass._defaultConfig.apply(this, arguments), {
					items: [],
					fields: [],
					onFieldSelect: null
				})
			},
			_createMenuList: function () {
				FX.LinkFieldSelectPane.superclass._createMenuList.apply(this, arguments);
				var a = this,
				b = this.options;
				FX.Utils.forEach(b.items, function (b, c) {
					a._isFieldTypeAllowed(c) && a._createFieldItem(c)
				})
			},
			_createFieldItem: function (b) {
				var c = a('<li class="field"/>').attr("name", b.name).data("field", b).appendTo(this.$menuList);
				return a('<a class="menu-item"/>').append(a("<span/>").text(b.text)).appendTo(c),
				this._filterFieldEnabled(b) === !1 && c.addClass("disabled"),
				c
			},
			_onMenuItemClick: function (b) {
				var c = this,
				d = this.options;
				if (b.hasClass("field")) {
					var e = b.data("field");
					FX.Utils.applyFunc(c, d.onFieldSelect, [a.extend({}, e)], !1) === !1 && this.selectField(e)
				}
			},
			selectField: function (a) {
				this._refreshList()
			},
			deselectField: function (a) {
				var b = this.options,
				c = this._findSelectedFieldIndex(a);
				c > -1 && b.fields.splice(c, 1),
				this._refreshList()
			},
			_filterFieldEnabled: function (a) {
				var b = this.options,
				c = !0;
				return FX.Utils.forEach(b.fields, function (b, d) {
					if (a.name === d.name)
						return c = !1, !1
				}),
				c
			},
			_refreshList: function () {
				var b = this;
				this.$menuList.children().each(function () {
					var c = a(this),
					d = c.data("field");
					b._filterFieldEnabled(d) ? c.removeClass("disabled") : c.addClass("disabled")
				})
			}
		}),
	a.shortcut("link_field_select", FX.LinkFieldSelectPane)
}
(jQuery), function (a) {
	FX.BaseFieldConfigPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.BaseFieldConfigPane.superclass._defaultConfig.apply(this, arguments), {
					$field: a('<li class="field-item"/>'),
					$anchor: null,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.BaseFieldConfigPane.superclass._init.apply(this, arguments),
				this._initField(),
				this._initConfigContainer()
			},
			_initField: function () {
				var a = this.options;
				this.field = a.$field.data("field"),
				this.$fieldLabel = a.$field.children(".field-label").addClass("selected")
			},
			_initConfigContainer: function () {
				this.container = new FX.TableContainer({
						rowSize: this._getConfigItemsRowSize(),
						colSize: this._getConfigItemsColSize(),
						hgap: 10,
						vgap: 8,
						items: this._getConfigItems()
					})
			},
			show: function () {
				var b = this,
				c = this.options,
				d = a.extend({}, this.field);
				FX.Msg.bubble({
					anchor: c.$anchor,
					dockPosition: "right",
					contentHTML: this.container.element,
					edge: 350,
					onShow: function () {
						b._onConfigShow()
					},
					onClose: function () {
						return b._onConfigClose()
					},
					onOk: function () {
						return !!b._onConfigOk() && (FX.Utils.applyFunc(this, c.onAfterFieldUpdate, [b.field, c.$field.index()], !1), !0)
					},
					onCancel: function () {
						a.extend(b.field, d)
					}
				})
			},
			_getConfigItems: function () {
				return [[{
							type: "label",
							text: ""
						}, {
							widgetName: "fieldTextEditor",
							type: "text",
							value: this.field.text,
							allowBlank: !1,
							waterMark: ""
						}
					]]
			},
			_changeNumberStyleConfigItems: function (a) {},
			_saveNumberStyleConfig: function () {
				var a = this.container.getWidgetByName("format-type");
				if (a && 1 === a.getValue()) {
					var b = this.container.getWidgetByName("format-preset").getValue(),
					c = "",
					d = 0;
					c += b[0] ? "#,##" : "",
					c += b[2] === !1 ? "0." : d.toFixed(Math.min(Math.max(b[2], 0), 5)),
					c += b[1] ? "%" : "",
					this.field.cellFmt = {
						type: "preset",
						data: c
					}
				} else
					this.field.cellFmt = {
						type: "custom",
						data: this.container.getWidgetByName("format-custom").getValue()
					}
			},
			_getNumberStyleConfigItems: function () {
				var a = this,
				b = this.field.cellFmt,
				c = b && "custom" === b.type;
				b || (b = {});
				var d = !1,
				e = 0;
				if (b.data) {
					d = !(/0\./.test(b.data) && !/0\.0/.test(b.data));
					var f = b.data.replace(/0\.0+/, "0.");
					e = Math.min(Math.max(b.data.length - f.length, 0), 5)
				}
				return [[{
							type: "label",
							text: " "
						}, {
							type: "combo",
							searchable: !1,
							allowBlank: !1,
							widgetName: "format-type",
							value: c ? 2 : 1,
							items: [{
									value: 1,
									text: " "
								}, {
									value: 2,
									text: " "
								}
							],
							onAfterItemSelect: function (b, c) {
								var d = 1 === c.value;
								a._changeNumberStyleConfigItems(d)
							}
						}
					], [{}, {
							widgetName: "format-preset",
							type: "formatcheckpane",
							items: [{
									text: "",
									selected: /,/.test(b.data)
								}, {
									text: "",
									selected: /%/.test(b.data)
								}, {
									text: "",
									custom: !0,
									value: e,
									selected: d
								}
							]
						}
					], [{}, {
							widgetName: "format-custom",
							type: "text",
							value: b.data,
							allowBlank: !1
						}
					]]
			},
			_getConfigItemsColSize: function () {
				return [70, 160]
			},
			_getConfigItemsRowSize: function () {
				return [30]
			},
			_onConfigShow: function () {},
			_onConfigClose: function () {
				return this.$fieldLabel.removeClass("selected"),
				!1
			},
			_onConfigOk: function () {
				var a = this.container.getWidgetByName("fieldTextEditor");
				if (!a.checkValidate())
					return !1;
				var b = a.getValue();
				return this.$fieldLabel.children(".field-name").text(b),
				this.field.text = b,
				!0
			}
		}),
	a.shortcut("field_config", FX.BaseFieldConfigPane)
}
(jQuery), function (a) {
	FX.GroupFieldConfigPane = FX.extend(FX.BaseFieldConfigPane, {
			_defaultConfig: function () {
				return a.extend(FX.GroupFieldConfigPane.superclass._defaultConfig.apply(this, arguments), {
					$field: a('<li class="field-item"/>'),
					$anchor: null,
					hasDetail: !1,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.GroupFieldConfigPane.superclass._init.apply(this, arguments)
			},
			_initField: function () {
				FX.GroupFieldConfigPane.superclass._initField.apply(this, arguments),
				this._initFieldDetailConfig()
			},
			_initFieldDetailConfig: function () {
				var a = this,
				b = this.options;
				if (this.detailFields = [], this.detailChoice = [], this.detailSelection = [], b.hasDetail &= "combo" === this.field.type, b.hasDetail &= !(!this.field.async || !this.field.async.data), b.hasDetail = !!b.hasDetail, b.hasDetail) {
					var c = this.field.async.data.formId,
					d = this.field.async.data.field;
					FX.Utils.forEach(FX.EditReport.entryList, function (b, d) {
						if (d.entryId === c)
							return a.detailFields = d.fields, !1
					});
					var e = ["text", "number", "textarea", "radiogroup", "combo"];
					FX.Utils.forEach(this.detailFields, function (b, c) {
						c.name !== d && e.indexOf(c.type) !== -1 && a.detailChoice.push({
							text: c.text,
							value: c.name
						})
					}),
					FX.Utils.isObjectEmpty(this.field.detail) || FX.Utils.forEach(this.field.detail.fields, function (b, c) {
						a.detailSelection.push(c.name)
					})
				}
			},
			_getConfigItems: function () {
				var a = this;
				return [[{
							type: "label",
							text: ""
						}, {
							widgetName: "fieldTextEditor",
							type: "text",
							value: this.field.text,
							allowBlank: !1,
							waterMark: ""
						}
					], [{
							type: "label",
							text: ""
						}, {
							widgetName: "dateTypeSelect",
							type: "combo",
							items: [{
									value: "year",
									text: ""
								}, {
									value: "year&month",
									text: ""
								}, {
									value: "year&month&day",
									text: ""
								}
							],
							value: a.field.dateType ? a.field.dateType : "year"
						}
					], [{
							type: "label",
							text: ""
						}, {
							widgetName: "addressTypeSelect",
							type: "combo",
							items: [{
									value: "province",
									text: ""
								}, {
									value: "province&city",
									text: ""
								}
							],
							value: a.field.addressType ? a.field.addressType : "province"
						}
					], [{
							type: "label",
							text: ""
						}, {
							widgetName: "fieldDetailCombo",
							type: "combocheck",
							items: this.detailChoice,
							value: this.detailSelection
						}
					]]
			},
			_getConfigItemsRowSize: function () {
				return [30, 30, 30, 30]
			},
			_onConfigShow: function () {
				var a = this.options;
				"datetime" !== this.field.type && this.container.$rows[1].hide(),
				["address", "location"].indexOf(this.field.type) < 0 && this.container.$rows[2].hide(),
				a.hasDetail || this.container.$rows[3].hide()
			},
			_onConfigOk: function () {
				var a = FX.GroupFieldConfigPane.superclass._onConfigOk.apply(this, arguments);
				if (!a)
					return !1;
				var b = this.options;
				if ("datetime" === this.field.type ? this.field.dateType = this.container.getWidgetByName("dateTypeSelect").getValue() : "address" !== this.field.type && "location" !== this.field.type || (this.field.addressType = this.container.getWidgetByName("addressTypeSelect").getValue()), b.hasDetail) {
					var c = [],
					d = this.container.getWidgetByName("fieldDetailCombo"),
					e = d.getValue();
					FX.Utils.forEach(this.detailFields, function (a, b) {
						e.indexOf(b.name) !== -1 && c.push({
							name: b.name,
							text: b.text
						})
					}),
					this.field.detail = {
						entry: this.field.async.data.formId,
						key: this.field.async.data.field,
						fields: c
					}
				} else
					this.field.detail = null;
				return FX.Utils.applyFunc(this, b.onAfterEdit, [this.field], !1),
				!0
			}
		}),
	a.shortcut("group_field_config", FX.GroupFieldConfigPane)
}
(jQuery), function (a) {
	FX.ListFieldConfigPane = FX.extend(FX.BaseFieldConfigPane, {
			_defaultConfig: function () {
				return a.extend(FX.ListFieldConfigPane.superclass._defaultConfig.apply(this, arguments), {
					$field: a('<li class="field-item"/>'),
					$anchor: null,
					editor: null,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.ListFieldConfigPane.superclass._init.apply(this, arguments)
			},
			_getConfigItems: function () {
				var a = this.options,
				b = this,
				c = [[{
							type: "label",
							text: ""
						}, {
							widgetName: "fieldTextEditor",
							type: "text",
							value: this.field.text,
							allowBlank: !1,
							waterMark: "",
							onAfterEdit: function () {
								b.field.text = this.getText()
							}
						}
					], [{
							type: "label",
							text: ""
						}, {
							type: "button",
							style: "white",
							text: "...",
							iconCls: "icon-function",
							onClick: function () {
								a.editor.createFormulaEditDialog(a.$field, {
									onOk: function (a) {
										return b.container.getWidgetByName("fieldTextEditor").setText(a.text),
										!1
									}
								})
							}
						}
					], [{
							type: "label",
							text: ""
						}, {
							widgetName: "detailOnlySwitch",
							type: "switch",
							width: 44,
							height: 22,
							value: !!b.field.detailOnly,
							onSwitch: function (a) {
								b.field.detailOnly = a
							}
						}
					]],
				d = this.field.cellFmt,
				e = d && "custom" === d.type;
				switch (d || (d = {}), this.field.type) {
				case "datetime":
					d.data || (d.data = this.field.format),
					c.push([{
								type: "label",
								text: " "
							}, {
								widgetName: "format-type",
								type: "combo",
								value: e ? "custom" : d.data,
								allowBlank: !1,
								searchable: !1,
								items: [{
										value: "yyyy-MM-dd",
										text: "2015-01-01"
									}, {
										value: "yyyy-MM-dd HH:mm:ss",
										text: "2015-01-01 01:01:01"
									}, {
										value: "yyyy/MM/dd",
										text: "2015/1/1"
									}, {
										value: "yyyy/MM/dd HH:mm:ss",
										text: "2015/1/1 01:01:01"
									}, {
										value: "yyyyMMdd",
										text: "201511"
									}, {
										value: "yyyyMMdd HHmmss",
										text: "201511 010101"
									}, {
										value: "yyyyMMdd EEE",
										text: "201511 "
									}, {
										value: "yyyyMM",
										text: "20151"
									}, {
										value: "MMdd",
										text: "11"
									}, {
										value: "EEE",
										text: ""
									}, {
										value: "custom",
										text: " "
									}
								],
								onAfterItemSelect: function (a, c) {
									b.container.setRowVisible([4], "custom" === c.value)
								}
							}
						], [{}, {
								widgetName: "format-custom",
								type: "text",
								value: d.data,
								waterMark: "yyyy-mm-dd",
								allowBlank: !1
							}
						]);
					break;
				case "number":
				case "formula":
					c = c.concat(this._getNumberStyleConfigItems());
					break;
				case "address":
				case "location":
					FX.Utils.isNull(d.data) && (d.data = "pcda"),
					c.push([{
								type: "label",
								text: " "
							}, {
								widgetName: "format-check",
								type: "checkboxgroup",
								customCls: "address-format-check",
								layout: "horizontal",
								items: [{
										selected: /p/.test(d.data),
										text: "",
										value: "p"
									}, {
										selected: /c/.test(d.data),
										text: "",
										value: "c"
									}, {
										selected: /d/.test(d.data),
										text: "",
										value: "d"
									}, {
										selected: /a/.test(d.data),
										text: "",
										value: "a"
									}
								]
							}
						])
				}
				return c
			},
			_changeNumberStyleConfigItems: function (a) {
				this.container.setRowVisible([5], !a),
				this.container.setRowVisible([4], a)
			},
			_getConfigItemsColSize: function () {
				return [75, 160]
			},
			_getConfigItemsRowSize: function () {
				switch (this.field.type) {
				case "number":
				case "formula":
					return [30, 30, 30, 30, 90, 30];
				case "datetime":
					return [30, 30, 30, 30, 30];
				case "address":
				case "location":
					return [30, 30, 30, 60];
				default:
					return [30, 30, 30]
				}
			},
			_onConfigShow: function () {
				var a = this.field.cellFmt && "custom" === this.field.cellFmt.type;
				switch (this.field.formula || this.container.setRowVisible([1], !1), this.field.subform && this.container.setRowVisible([2], !1), this.field.type) {
				case "number":
				case "formula":
					this.container.setRowVisible([5], !!a),
					this.container.setRowVisible([4], !a);
					break;
				case "datetime":
					this.container.setRowVisible([4], !!a)
				}
			},
			_onConfigClose: function () {
				var a = this.options;
				return !(!a.editor.formulaEdit || !a.editor.formulaEdit.isEditing) || (this.$fieldLabel.removeClass("selected"), !1)
			},
			_onConfigOk: function () {
				var a = this.options;
				switch (this.field.type) {
				case "datetime":
					var b = this.container.getWidgetByName("format-type"),
					c = "preset";
					b && "custom" === b.getValue() && (b = this.container.getWidgetByName("format-custom"), c = "custom"),
					this.field.cellFmt = {
						data: b.getValue(),
						type: c
					};
					break;
				case "number":
				case "formula":
					this._saveNumberStyleConfig();
					break;
				case "address":
				case "location":
					var d = this.container.getWidgetByName("format-check").getValue();
					this.field.cellFmt = {
						type: "preset",
						data: d.join("")
					}
				}
				var e = FX.ListFieldConfigPane.superclass._onConfigOk.apply(this, arguments);
				return e && FX.Utils.applyFunc(this, a.onAfterEdit, [this.field], !1),
				e
			}
		}),
	a.shortcut("list_field_config", FX.ListFieldConfigPane)
}
(jQuery), function (a) {
	FX.ValueFieldConfigPane = FX.extend(FX.BaseFieldConfigPane, {
			_defaultConfig: function () {
				return a.extend(FX.ValueFieldConfigPane.superclass._defaultConfig.apply(this, arguments), {
					$field: a('<li class="field-item"/>'),
					$anchor: null,
					editor: null,
					onAfterEdit: null,
					showFormat: !0,
					showPercent: !0
				})
			},
			_init: function () {
				FX.ValueFieldConfigPane.superclass._init.apply(this, arguments)
			},
			_getConfigItems: function () {
				var a = this,
				b = this.options,
				c = [[{
							type: "label",
							text: ""
						}, {
							widgetName: "fieldTextEditor",
							type: "text",
							value: this.field.text,
							allowBlank: !1,
							waterMark: "",
							onAfterEdit: function () {
								a.field.text = this.getText()
							}
						}
					], [{
							type: "label",
							text: ""
						}, {
							type: "button",
							style: "white",
							text: "...",
							iconCls: "icon-function",
							onClick: function () {
								b.editor.createFormulaEditDialog(b.$field, {
									hasCalcFormula: "formula" === a.field.type && "combine" === a.field.category,
									onOk: function (b) {
										return a.container.getWidgetByName("fieldTextEditor").setText(b.text),
										!1
									}
								})
							}
						}
					], [{
							type: "label",
							text: ""
						}, {
							widgetName: "aggregateMethodCombo",
							type: "combo",
							allowBlank: !1,
							items: [{
									value: "sum",
									text: ""
								}, {
									value: "avg",
									text: ""
								}, {
									value: "max",
									text: ""
								}, {
									value: "min",
									text: ""
								}, {
									value: "none",
									text: " "
								}
							],
							value: this.field.op ? this.field.op : "sum",
							onItemCreate: function (b) {
								return !("formula" !== a.field.type || "avg" !== b.value)
							},
							onAfterItemSelect: function (c, d) {
								b.showPercent && "sum" === d.value ? a.container.$rows[3].show() : a.container.$rows[3].hide()
							}
						}
					], [{
							type: "label",
							text: " "
						}, {
							widgetName: "percentageSwitch",
							type: "switch",
							width: 44,
							height: 22,
							value: !!a.field.percent
						}
					]];
				return c.concat(this._getNumberStyleConfigItems())
			},
			_changeNumberStyleConfigItems: function (a) {
				this.container.setRowVisible([6], !a),
				this.container.setRowVisible([5], a)
			},
			_getConfigItemsRowSize: function () {
				return [30, 30, 30, 30, 30, 90, 30]
			},
			_onConfigShow: function () {
				var a = this.options;
				this.field.formula || this.container.$rows[1].hide(),
				(!a.showPercent || this.field.op && "sum" !== this.field.op) && this.container.$rows[3].hide(),
				"count" === this.field.type && (this.container.$rows[1].hide(), this.container.$rows[2].hide()),
				a.showFormat ? this.field.cellFmt && "custom" === this.field.cellFmt.type ? this.container.setRowVisible([5], !1) : this.container.setRowVisible([6], !1) : this.container.setRowVisible([4, 5, 6], !1),
				a.isAggregate && this.container.setRowVisible([2, 3], !1)
			},
			_onConfigClose: function () {
				var a = this.options;
				return !(!a.editor.formulaEdit || !a.editor.formulaEdit.isEditing) || (this.$fieldLabel.removeClass("selected"), !1)
			},
			_onConfigOk: function () {
				var a = this.options,
				b = FX.GroupFieldConfigPane.superclass._onConfigOk.apply(this, arguments);
				if (!b)
					return !1;
				var c = this.container.getWidgetByName("aggregateMethodCombo");
				return this.field.op = c.getValue(),
				a.showPercent && "sum" === this.field.op ? this.field.percent = this.container.getWidgetByName("percentageSwitch").getValue() : this.field.percent = !1,
				a.showFormat && this._saveNumberStyleConfig(),
				FX.Utils.applyFunc(this, a.onAfterEdit, [this.field], !1),
				!0
			}
		}),
	a.shortcut("value_field_config", FX.ValueFieldConfigPane)
}
(jQuery), function (a) {
	FX.FilterFieldConfigPane = FX.extend(FX.BaseFieldConfigPane, {
			_defaultConfig: function () {
				return a.extend(FX.FilterFieldConfigPane.superclass._defaultConfig.apply(this, arguments), {
					$field: a('<li class="field-item"/>'),
					$anchor: null,
					editor: null,
					onBeforeEdit: null,
					onAfterEdit: null
				})
			},
			_getConfigItemsRowSize: function () {
				return "datetime" === this.field.type ? [30, "auto"] : [30, 30]
			},
			_getConfigItems: function () {
				var b = this.options,
				c = this,
				d = b.$field.data("field"),
				e = {
					width: 160,
					widgetName: "defaultValue",
					value: d.defaultValue
				},
				f = FX.Utils.applyFunc(c, b.onBeforeEdit, [d], !1);
				if (f !== !1 && (d = f), d) {
					var g = FX.Utils.getFieldInfoById(d.id);
					switch (d.type) {
					case "text":
					case "radiogroup":
					case "combo":
						e.type = "xcombocheck",
						"ext" === d.name ? (e.items = [], FX.Utils.forEach(d.items, function (a, b) {
								e.items.push({
									text: b,
									value: b
								})
							})) : d.async ? (e.async = {
								url: d.async.url,
								data: a.extend({
									refAppId: g.appId,
									entryId: g.entryId
								}, d.async.data)
							}, e.hasLimit = !0) : FX.Utils.isObjectEmpty(d.items) ? (e.async = {
								url: "/data/distinct",
								data: {
									refAppId: g.appId,
									formId: g.entryId,
									field: d.name,
									type: d.type
								}
							}, e.hasLimit = !0) : e.items = d.items;
						break;
					case "number":
						e.type = "numberlimit",
						e.width4number = 70;
						break;
					case "datetime":
						e.type = "dateconfigpane",
						e.width4date = 160;
						break;
					case "address":
						e.type = "address",
						e.customCls = "default-fix",
						e.needDetail = !1,
						e.height = 70;
						break;
					case "user":
						e.type = "usercheck",
						a.extend(e, this._getUserConfig());
						break;
					case "dept":
						e.type = "deptselect",
						e.dynamicType = "set";
						break;
					default:
						"creator" === d.name && (e.type = "usercheck", a.extend(e, this._getUserConfig()))
					}
				}
				return [[{
							type: "label",
							text: ""
						}, {
							widgetName: "fieldTextEditor",
							type: "text",
							value: this.field.text,
							allowBlank: !1,
							waterMark: "",
							onAfterEdit: function () {
								c.field.text = this.getText()
							}
						}
					], [{
							type: "label",
							text: ""
						}, e]]
			},
			_getUserConfig: function () {
				return {
					textField: "nickname",
					valueField: "_id",
					asyncResultKey: "members",
					async: {
						url: "/manager/team/list",
						data: {
							hasCurrentUser: !0,
							hasAdmin: !0,
							hasCount: !1
						}
					},
					hasLimit: !0,
					searchKey: "filter"
				}
			},
			_onConfigOk: function () {
				var a = this.options,
				b = FX.FilterFieldConfigPane.superclass._onConfigOk.apply(this, arguments),
				c = this.container.getWidgetByName("defaultValue"),
				d = c.checkValidate();
				return b && d && (this.field.defaultValue = c.getValue(), FX.Utils.applyFunc(this, a.onAfterEdit, [this.field], !1)),
				b && d
			}
		}),
	a.shortcut("filter_field_config", FX.FilterFieldConfigPane)
}
(jQuery), function (a) {
	FX.LinkFieldConfigPane = FX.extend(FX.BaseFieldConfigPane, {
			_defaultConfig: function () {
				return a.extend(FX.LinkFieldConfigPane.superclass._defaultConfig.apply(this, arguments), {
					onAfterEdit: null
				})
			},
			_onConfigOk: function () {
				var a = this.options,
				b = FX.LinkFieldConfigPane.superclass._onConfigOk.apply(this, arguments);
				return b && FX.Utils.applyFunc(this, a.onAfterEdit, [this.field], !1),
				b
			}
		}),
	a.shortcut("link_field_config", FX.LinkFieldConfigPane)
}
(jQuery), function (a) {
	FX.BaseFieldEditPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.BaseFieldEditPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_field_edit_pane",
					title: "FieldEditPane",
					entryList: [],
					fields: [],
					selectedFields: [],
					supportFormula: !1,
					supportGroupFormula: !1,
					allowMultiTable: !1,
					onAfterFieldAdd: null,
					onAfterFieldUpdate: null,
					onAfterFieldRemove: null,
					onAfterFieldSorted: null,
					onFinishAdd: null
				})
			},
			_init: function () {
				FX.BaseFieldEditPane.superclass._init.apply(this, arguments),
				this._createHeader(),
				this._createFieldList(),
				this._setFieldListSortable(),
				this._bindFieldListEvents()
			},
			_createHeader: function () {
				var b = this,
				c = this.options;
				this.$title = a('<div class="cfg_title"/>'),
				a('<div class="title-text"/>').text(c.title).appendTo(this.$title),
				this.$navi = a('<div class="edit-group"/>').appendTo(this.$title),
				c.isAggregate || this.$navi.append(a('<i class="icon-add"/>').click(function () {
						var d = b._createFieldSelect();
						return d.addClass("active"),
						a(document).bind("mousedown.field-menu", function (e) {
							var f = e.target,
							g = a(f).closest(".fx_field_select_pane");
							(!g || g.length <= 0) && (FX.Utils.applyFunc(b, c.onFinishAdd, [], !1), d.remove(), a(document).unbind("mousedown.field-menu"))
						}),
						!1
					})),
				c.supportFormula && this.$navi.append(a('<i class="icon-function"/>').click(function () {
						b._onCalcFormulaBtnClick()
					})),
				c.supportGroupFormula && this.$navi.append(a('<i class="x-iconfont icon-sigma">').click(function () {
						b._onCombineFormulaBtnClick()
					})),
				this.$title.appendTo(this.element)
			},
			_onCalcFormulaBtnClick: function () {
				this.createFormulaListDialog()
			},
			_onCombineFormulaBtnClick: function () {
				this.createFormulaEditDialog(null, {
					formulaCategory: "combine",
					hasCalcFormula: !0
				})
			},
			createFormulaEditDialog: function (b, c) {
				var d = this,
				e = this.options,
				f = b ? b.data("field") : {};
				this.formulaEdit = new FX.FormulaEditPane(a.extend({
							field: f,
							forms: e.forms,
							entryList: e.entryList,
							joinedSubform: e.joinedSubform,
							selectedFields: e.fields.slice(),
							operators: e.isAggregate ? FX.Operators.aggregate : FX.Operators.group,
							allowNumber: !e.isAggregate,
							allowMultiTable: e.allowMultiTable,
							onAfterFormulaAdd: function (a) {
								d._appendFieldItem(a),
								FX.Utils.applyFunc(d, e.onFinishAdd, [], !1)
							},
							onAfterFieldUpdate: function (a) {
								b.data("field", a)
							}
						}, c)),
				this.formulaEdit.show()
			},
			createFormulaListDialog: function (b) {
				var c = this,
				d = this.options;
				this.formulaList = new FX.FormulaListDialog(a.extend({
							forms: d.forms,
							fields: d.fields,
							entryList: d.entryList,
							formulaCategory: "calc",
							formulaBaseName: " ",
							allowMultiTable: !1,
							onFormulaRemove: function (b) {
								var d = c.$fieldList.children();
								FX.Utils.forEach(d, function (c) {
									a(d[c]).data("field").name === b.name && a(d[c]).remove()
								})
							},
							onFormulaAdd: function (a) {
								var b = c._addFieldItem(a);
								c._isFieldVisible(a) || b.hide()
							},
							onFormulaUpdate: function (b) {
								FX.Utils.forEach(c.$fieldList.children(), function (d, e) {
									var f = a(e),
									g = f.data("field");
									c._isFieldVisible(g) ? f.show() : f.hide(),
									g.name === b.name && f.children(".field-label").children(".field-name").text(g.text)
								})
							},
							onOk: function () {
								return FX.Utils.applyFunc(this, d.onAfterFieldUpdate, [], !1),
								!1
							}
						}, b)),
				this.formulaList.show()
			},
			_createFieldList: function () {
				var b = this,
				c = this.options,
				d = a('<div class="cfg_content"/>');
				this.$fieldList = a('<ul class="field-list"/>').appendTo(d),
				FX.Utils.forEach(c.fields, function (a, c) {
					var d = b._addFieldItem(c);
					b._isFieldVisible(c) || d.hide()
				}),
				d.appendTo(this.element)
			},
			_isFieldVisible: function (a) {
				return !("formula" === a.type && a.enable === !1)
			},
			_setFieldListSortable: function () {
				var a,
				b,
				c,
				d = this.options;
				this.$fieldList.sortable({
					handle: ".field-name",
					nested: !1,
					itemSelector: "li.field-item.main-field",
					onDragStart: function (c, d, e) {
						var f = c.offset(),
						g = d.rootGroup.pointer;
						a = g.top - f.top,
						b = c.index(),
						e(c)
					},
					onDrag: function (b, c, d) {
						c.left = 0,
						c.top -= a,
						d(b, c)
					},
					onDrop: function (a, e, f) {
						f(a),
						c = a.index(),
						b > -1 && c > -1 && b !== c && (d.fields.splice(c, 0, d.fields.splice(b, 1)[0]), FX.Utils.applyFunc(this, d.onAfterFieldUpdate, [a.data("field"), c], !1), FX.Utils.applyFunc(this, d.onAfterFieldSorted, [a.data("field")], !1))
					}
				})
			},
			_addFieldItem: function (b) {
				var c = a('<div class="field-label"/>').append(a('<div class="field-name"/>').text(b.text)).append(a('<div class="edit-group"/>').append(a('<i class="nav nav-edit icon-setting x-c-key hv"/>')).append(a('<i class="nav nav-remove icon-field-remove"/>')));
				return a('<li class="field-item main-field"/>').append(c).data("field", b).appendTo(this.$fieldList)
			},
			_appendFieldItem: function (a) {
				var b = this.options,
				c = this._getFieldAttr(a);
				b.fields.push(c),
				this._addFieldItem(c),
				FX.Utils.applyFunc(this, b.onAfterFieldAdd, [c], !1)
			},
			_getFieldAttr: function (b) {
				var c = {
					tag: this._getTag(b),
					id: b.id,
					appId: b.appId,
					name: b.name,
					text: b.text,
					type: b.type,
					subform: b.subform,
					isJoined: b.isJoined
				};
				switch (b.type) {
				case "combo":
					a.extend(c, {
						async: b.async
					});
					break;
				case "linkdata":
					a.extend(c, {
						linkForm: b.linkForm,
						linkFields: b.linkFields,
						refAppId: b.refAppId
					});
					break;
				case "datetime":
					a.extend(c, {
						format: b.format
					});
					break;
				case "address":
					a.extend(c, {
						needDetail: b.needDetail
					});
					break;
				case "formula":
					a.extend(c, b)
				}
				return c
			},
			_getTag: function (a) {
				var b = this.options;
				return b.isAggregate && a && /_formula_/.test(a.name) ? a.name.replace("_formula_", "f_") : ["f", FX.STATIC.IDBase++].join("_")
			},
			_createFieldSelect: function () {
				return a('<div class="field-select"/>').appendTo(this.$title)
			},
			_bindFieldListEvents: function () {
				var b = this,
				c = function (c) {
					var d = c.target,
					e = c.type,
					f = a(d).closest(".nav"),
					g = a(d).closest("li.field-item");
					f && f.length && "click" === e && (f.hasClass("nav-edit") ? b._showFieldConfig(g, f) : f.hasClass("nav-remove") && b._removeField(g))
				};
				this.$fieldList.unbind(".field-list"),
				this.$fieldList.bind({
					"click.field-list": c
				})
			},
			_removeField: function (a) {
				var b = this.options,
				c = a.data("field"),
				d = this._findFieldIndex(c);
				d > -1 && b.fields.splice(d, 1),
				b.selectedFields && b.selectedFields.length > 0 && (d = this._findSelectedFieldIndex(c), d > -1 && b.selectedFields.splice(d, 1)),
				FX.Utils.applyFunc(this, b.onAfterFieldRemove, [c, d], !1),
				a.remove()
			},
			_findFieldIndex: function (a) {
				var b = this.options,
				c = -1;
				return FX.Utils.forEach(b.fields, function (b, d) {
					if (d.name === a.name && d.id === a.id)
						return c = b, !1
				}),
				c
			},
			_findSelectedFieldIndex: function (a) {
				var b = this.options,
				c = -1;
				return FX.Utils.forEach(b.selectedFields, function (b, d) {
					if (a.name === d.name && a.id === d.id)
						return c = b, !1
				}),
				c
			},
			_showFieldConfig: function (a, b) {}
		}),
	a.shortcut("field_edit", FX.BaseFieldEditPane)
}
(jQuery), function (a) {
	FX.ListFieldEditPane = FX.extend(FX.BaseFieldEditPane, {
			_defaultConfig: function () {
				return a.extend(FX.ListFieldEditPane.superclass._defaultConfig.apply(this, arguments), {
					forms: [],
					fields: [],
					selectedFields: [],
					relations: {},
					joinedFields: [],
					availableFields: FX.LimitFields.list,
					supportFormula: !0
				})
			},
			_init: function () {
				this.subFieldMap = {},
				FX.ListFieldEditPane.superclass._init.apply(this, arguments)
			},
			_onCalcFormulaBtnClick: function () {
				var a = this.options,
				b = [];
				FX.Utils.forEach(a.entryList, function (a, c) {
					"form" === c.type && b.push(c)
				}),
				this.createFormulaListDialog({
					allowMultiTable: a.forms.length > 0,
					entryList: b,
					availableFields: ["number"]
				})
			},
			_createFieldList: function () {
				var b = this,
				c = this.options,
				d = a('<div class="cfg_content"/>');
				this.$fieldList = a('<ul class="field-list"/>').appendTo(d),
				FX.Utils.forEach(c.fields, function (c, d) {
					var e = b._addFieldItem(d);
					if ("subform" === d.type) {
						var f = a('<ul class="subform-fields"/>').appendTo(e);
						FX.Utils.forEach(d.items, function (a, c) {
							b._createSubFieldItem(c).appendTo(f)
						}),
						b.subFieldMap[d.name] = e
					}
					b._isFieldVisible(d) || e.hide()
				}),
				d.appendTo(this.element)
			},
			_createFieldSelect: function () {
				var a = FX.ListFieldEditPane.superclass._createFieldSelect.apply(this, arguments),
				b = this,
				c = this.options,
				d = [];
				return FX.Utils.forEach(c.relations, function (a, b) {
					FX.Utils.forEach(b, function (a, b) {
						d.push(b)
					})
				}),
				new FX.EntryFieldSelectPane({
					renderEl: a,
					entryList: c.entryList,
					forms: c.forms,
					fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
					joinedFields: c.joinedFields,
					excludeFields: d,
					availableFields: c.availableFields,
					attributeFields: ["creator", "createTime", "updateTime"],
					onFieldSelect: function (a) {
						return b._appendFieldItem(a),
						!1
					}
				}),
				a
			},
			_appendFieldItem: function (a) {
				a.subform ? this._appendSubFieldItem(a) : FX.ListFieldEditPane.superclass._appendFieldItem.apply(this, arguments)
			},
			_appendSubFieldItem: function (b) {
				var c,
				d,
				e = this.options,
				f = this.subFieldMap[b.subform],
				g = !1;
				f ? (d = f.children(".subform-fields"), c = f.data("field")) : (c = {
						tag: this._getTag(),
						appId: b.appId,
						id: b.id,
						name: b.subform,
						text: b.subformText || b.text,
						type: "subform",
						items: []
					}, f = this._addFieldItem(c), d = a('<ul class="subform-fields"/>').appendTo(f), this.subFieldMap[b.subform] = f, g = !0);
				var h = b.text.substr(b.subformText.length + 1),
				i = a.extend({}, b, {
						name: b.name.split(".")[1] || b.name,
						text: h || b.text,
						subform: b.subform
					});
				c.items.push(i),
				this._createSubFieldItem(i).appendTo(d),
				f.data("field", c),
				g && e.fields.push(c),
				FX.Utils.applyFunc(this, e.onAfterFieldAdd, [b], !1)
			},
			_createSubFieldItem: function (b) {
				var c = a('<div class="field-label"/>').append(a('<div class="field-name"/>').text(b.text)).append(a('<div class="edit-group"/>').append(a('<i class="nav nav-edit icon-edit x-c-key hv"/>')).append(a('<i class="nav nav-remove icon-field-remove"/>')));
				return a('<li class="field-item subform-field"/>').append(c).data("field", b)
			},
			_removeField: function (a) {
				var b = this.options;
				if (a.hasClass("subform-field")) {
					var c = a.data("field"),
					d = a.closest("li.field-item.main-field"),
					e = d.data("field"),
					f = this._findSubformFieldIndex(c, e);
					f > -1 && e.items.splice(f, 1),
					0 === e.items.length ? (this._removeField(d), this.subFieldMap[e.name] = void 0) : (a.remove(), FX.Utils.applyFunc(this, b.onAfterFieldRemove, [c], !1))
				} else {
					var g = a.data("field");
					"subform" === g.type && (this.subFieldMap[g.name] = void 0),
					FX.ListFieldEditPane.superclass._removeField.apply(this, arguments)
				}
			},
			_findSubformFieldIndex: function (a, b) {
				var c = -1;
				return FX.Utils.forEach(b.items, function (b, d) {
					if (a.name === d.name)
						return c = b, !1
				}),
				c
			},
			_showFieldConfig: function (a, b) {
				var c = this,
				d = this.options,
				e = new FX.ListFieldConfigPane({
						$field: a,
						$anchor: b,
						editor: this,
						onAfterEdit: function (a) {
							FX.Utils.applyFunc(c, d.onAfterFieldUpdate, [a], !1)
						}
					});
				e.show()
			}
		}),
	a.shortcut("list_field_edit", FX.ListFieldEditPane)
}
(jQuery), function (a) {
	FX.GroupFieldEditPane = FX.extend(FX.BaseFieldEditPane, {
			_defaultConfig: function () {
				return a.extend(FX.GroupFieldEditPane.superclass._defaultConfig.apply(this, arguments), {
					forms: [],
					entryList: [],
					fields: [],
					selectedFields: [],
					joinedFields: [],
					attributeFields: ["creator", "createTime", "updateTime"],
					availableFields: FX.LimitFields.group,
					supportFormula: !1,
					hasDetail: !1
				})
			},
			_createFieldSelect: function () {
				var a = FX.GroupFieldEditPane.superclass._createFieldSelect.apply(this, arguments),
				b = this,
				c = this.options;
				return c.joinedFields.length > 0 ? new FX.JoinedFieldSelectPane({
					renderEl: a,
					entryList: c.entryList,
					forms: c.forms,
					fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
					joinedFields: c.joinedFields,
					onFieldSelect: function (a) {
						return b._appendFieldItem(a),
						!1
					}
				}) : new FX.EntryFieldSelectPane({
					renderEl: a,
					entryList: c.entryList,
					forms: c.forms,
					fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
					availableFields: c.availableFields,
					attributeFields: c.attributeFields,
					allowMultiSubform: !1,
					onFieldSelect: function (a) {
						return b._appendFieldItem(a),
						!1
					}
				}),
				a
			},
			_showFieldConfig: function (a, b) {
				var c = this,
				d = this.options,
				e = new FX.GroupFieldConfigPane({
						$field: a,
						$anchor: b,
						hasDetail: d.hasDetail,
						onAfterEdit: function (a) {
							FX.Utils.applyFunc(c, d.onAfterFieldUpdate, [a], !1)
						}
					});
				e.show()
			}
		}),
	a.shortcut("group_field_edit", FX.GroupFieldEditPane)
}
(jQuery), function (a) {
	FX.ValueFieldEditPane = FX.extend(FX.BaseFieldEditPane, {
			_defaultConfig: function () {
				return a.extend(FX.ValueFieldEditPane.superclass._defaultConfig.apply(this, arguments), {
					forms: [],
					entryList: [],
					fields: [],
					selectedFields: [],
					availableFields: ["number", "subform"],
					supportFormula: !0,
					supportGroupFormula: !0,
					allowMultiTable: !0,
					showFormat: !0,
					showPercent: !0
				})
			},
			_createFieldSelect: function () {
				var a = FX.ValueFieldEditPane.superclass._createFieldSelect.apply(this, arguments),
				b = this,
				c = this.options;
				return new FX.EntryFieldSelectPane({
					renderEl: a,
					entryList: c.entryList,
					forms: c.forms,
					fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
					availableFields: c.availableFields,
					hasCount: !0,
					allowMultiTable: !0,
					onFieldSelect: function (a) {
						return b._appendFieldItem(a),
						!1
					}
				}),
				a
			},
			_showFieldConfig: function (a, b) {
				var c = this,
				d = this.options,
				e = new FX.ValueFieldConfigPane({
						$field: a,
						$anchor: b,
						editor: this,
						isAggregate: d.isAggregate,
						showPercent: d.showPercent,
						onAfterEdit: function (a) {
							FX.Utils.applyFunc(c, d.onAfterFieldUpdate, [a], !1)
						}
					});
				e.show()
			}
		}),
	a.shortcut("value_field_edit", FX.ValueFieldEditPane)
}
(jQuery), function (a) {
	FX.FilterFieldEditPane = FX.extend(FX.BaseFieldEditPane, {
			_defaultConfig: function () {
				return a.extend(FX.FilterFieldEditPane.superclass._defaultConfig.apply(this, arguments), {
					forms: [],
					fields: [],
					selectedFields: [],
					supportFormula: !1,
					entryFilter: null
				})
			},
			_createFieldSelect: function () {
				var a = FX.FilterFieldEditPane.superclass._createFieldSelect.apply(this, arguments),
				b = this,
				c = this.options;
				return this._getFormList(function () {
					new FX.FilterFieldSelectPane({
						renderEl: a,
						entryList: b.formList,
						forms: c.forms,
						fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
						availableFields: c.availableFields,
						allowMultiTable: !0,
						onFieldSelect: function (a) {
							return b._appendFieldItem(a),
							!1
						}
					})
				}),
				a
			},
			_getFieldByEntryList: function (a) {
				if (!this.ffMap) {
					this.ffMap = {};
					var b = this;
					FX.Utils.forEach(b.formList, function (a, c) {
						b.ffMap[a] || (b.ffMap[a] = {}),
						FX.Utils.forEach(c.fields, function (c, d) {
							d.id = a,
							b.ffMap[a][d.name] = d
						})
					})
				}
				return this.ffMap[a.id] ? this.ffMap[a.id][a.name] : null
			},
			_getFormList: function (a) {
				var b = this,
				c = this.options;
				this.formList ? a && a(this.formList) : FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/fields/get",
					data: {
						hasAggregateTable: !0,
						forms: c.forms
					}
				}, function (c) {
					b.formList = c,
					a && a(b.formList)
				})
			},
			_showFieldConfig: function (a, b) {
				var c = this,
				d = this.options;
				c._getFormList(function () {
					var e = new FX.FilterFieldConfigPane({
							$field: a,
							$anchor: b,
							onBeforeEdit: function (a) {
								return c._getFieldByEntryList(a)
							},
							onAfterEdit: function (b) {
								FX.Utils.applyFunc(c, d.onAfterFieldUpdate, [b, a.index()], !1)
							}
						});
					e.show()
				})
			}
		}),
	a.shortcut("filter_field_edit", FX.FilterFieldEditPane)
}
(jQuery), function (a) {
	FX.ChartFieldEditPane = FX.extend(FX.GroupFieldEditPane, {
			_createHeader: function () {
				var b = this,
				c = this.options;
				this.$title = a('<div class="cfg_title"/>'),
				a('<div class="title-text"/>').text(c.title).appendTo(this.$title),
				this.$navi = a('<div class="edit-group"/>').appendTo(this.$title),
				this.$navi.append(a('<i class="icon-add"/>').click(function () {
						if (!(c.fields.length > 0)) {
							var d = b._createFieldSelect();
							return d.addClass("active"),
							a(document).bind("mousedown.field-menu", function (e) {
								var f = e.target,
								g = a(f).closest(".fx_field_select_pane");
								(!g || g.length <= 0) && (FX.Utils.applyFunc(b, c.onFinishAdd, [], !1), d.remove(), a(document).unbind("mousedown.field-menu"))
							}),
							!1
						}
					})),
				this.$title.appendTo(this.element)
			},
			_createFieldSelect: function () {
				var a = FX.GroupFieldEditPane.superclass._createFieldSelect.apply(this, arguments),
				b = this,
				c = this.options;
				return c.joinedFields.length > 0 ? new FX.JoinedFieldSelectPane({
					renderEl: a,
					entryList: c.entryList,
					forms: c.forms,
					fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
					joinedFields: c.joinedFields,
					onFieldSelect: function (a) {
						if (!(c.fields.length > 0))
							return b._appendFieldItem(a), !1
					}
				}) : new FX.EntryFieldSelectPane({
					renderEl: a,
					entryList: c.entryList,
					forms: c.forms,
					fields: c.selectedFields.length > 0 ? c.selectedFields : c.fields.slice(),
					availableFields: c.availableFields,
					attributeFields: c.attributeFields,
					allowMultiSubform: !1,
					onFieldSelect: function (a) {
						if (!(c.fields.length > 0))
							return b._appendFieldItem(a), !1
					}
				}),
				a
			}
		}),
	a.shortcut("chart_field_edit", FX.ChartFieldEditPane)
}
(jQuery), function (a) {
	FX.linkFieldEditPane = FX.extend(FX.BaseFieldEditPane, {
			_defaultConfig: function () {
				return a.extend(FX.linkFieldEditPane.superclass._defaultConfig.apply(this, arguments), {
					fields: [],
					availableFields: [],
					subform: null
				})
			},
			_createFieldSelect: function () {
				var a = FX.linkFieldEditPane.superclass._createFieldSelect.apply(this, arguments),
				b = this,
				c = this.options;
				return new FX.LinkFieldSelectPane({
					renderEl: a,
					items: c.availableFields,
					fields: c.fields,
					availableFields: c.subform ? FX.LimitFields.subLinkData : FX.LimitFields.linkData,
					onFieldSelect: function (a) {
						return b._appendFieldItem(a),
						!1
					}
				}),
				a
			},
			_getFieldAttr: function (b) {
				var c = {
					name: b.name,
					text: b.text,
					type: b.type
				};
				switch (b.type) {
				case "datetime":
					a.extend(c, {
						format: b.format
					});
					break;
				case "address":
					a.extend(c, {
						needDetail: b.needDetail
					});
					break;
				case "subform":
					a.extend(c, {
						items: b.items
					})
				}
				return c
			},
			_createFieldList: function () {
				var b = this,
				c = this.options,
				d = a("<div/>").appendTo(this.element);
				this.$fieldList = a('<ul class="field-list"/>').appendTo(d),
				FX.Utils.forEach(c.fields, function (a, c) {
					var d = b._addFieldItem(c);
					b._isFieldVisible(c) || d.hide()
				})
			},
			_addFieldItem: function (b) {
				var c = a('<div class="field-label"/>').append(a('<div class="field-name" style="width: 215px"/>').text(b.text)).append(a('<div class="edit-group"/>').append(a('<i class="nav nav-edit icon-edit x-c-key hv"/>')).append(a('<i class="nav nav-remove icon-field-remove"/>')));
				return a('<li class="field-item main-field"/>').append(c).data("field", b).appendTo(this.$fieldList)
			},
			_showFieldConfig: function (a, b) {
				var c = this,
				d = this.options,
				e = new FX.LinkFieldConfigPane({
						$field: a,
						$anchor: b,
						editor: this,
						onAfterEdit: function (b) {
							FX.Utils.applyFunc(c, d.onAfterFieldUpdate, [b, a.index()], !1)
						}
					});
				e.show()
			}
		}),
	a.shortcut("link_field_edit", FX.linkFieldEditPane)
}
(jQuery), function (a) {
	FX.FormulaEditPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormulaEditPane.superclass._defaultConfig.apply(this, arguments), {
					field: {},
					forms: [],
					formulaCategory: "calc",
					joinedSubform: null,
					entryList: FX.EditReport && FX.EditReport.entryList,
					selectedFields: [],
					operators: ["+", "-", "*", "/", "."],
					allowMultiTable: !1,
					hasCalcFormula: !1,
					onAfterFormulaAdd: null,
					onAfterFormulaUpdate: null,
					onOk: null,
					onCancel: null
				})
			},
			_init: function () {
				FX.FormulaEditPane.superclass._init.apply(this, arguments),
				this._createFieldSelect(),
				this._createFieldEditor(),
				this._createEditDialog()
			},
			_createFieldSelect: function () {
				var b = this,
				c = this.options;
				this.$fieldSelect = a('<div class="field-select"/>'),
				this.fieldSelect = new FX.EntryFieldSelectPane({
						renderEl: this.$fieldSelect,
						mode: "dialog",
						forms: c.forms,
						subform: c.joinedSubform,
						fields: c.selectedFields,
						availableFields: ["number", "subform"],
						hasCalcFormula: c.hasCalcFormula,
						allowMultiTable: c.allowMultiTable,
						allowSameField: !0,
						allowMultiSubform: !1,
						entryList: c.entryList,
						onFieldSelect: function (a) {
							return b.formulaEditor.addField(a),
							!1
						}
					})
			},
			_createFieldEditor: function () {
				var b = this,
				c = this.options;
				this.$formulaEditor = a('<div class="formula-editor"/>'),
				this.formulaEditor = new FX.FormulaPane({
						renderEl: this.$formulaEditor,
						width: 286,
						height: 390,
						text: c.field.text,
						formula: c.field.formula,
						subform: c.field.subform,
						joinedSubform: c.joinedSubform,
						entryList: c.entryList,
						selectedFields: c.selectedFields,
						operators: c.operators,
						allowNumber: c.allowNumber,
						onAfterFieldAdd: function (a) {
							return b.fieldSelect.selectField(a),
							!1
						},
						onAfterFieldRemove: function (a) {
							return b.fieldSelect.deselectField(a),
							!1
						}
					})
			},
			_createEditDialog: function () {
				var b = this,
				c = this.options;
				this.dialog = new FX.ConfirmDialog({
						title: "",
						width: 620,
						height: 510,
						contentWidget: {
							rowSize: [390],
							colSize: [286, 16, 286],
							hgap: 0,
							vgap: 16,
							padding: 15,
							items: [[this.$fieldSelect, {}, this.$formulaEditor]]
						},
						onOk: function () {
							var d = b.formulaEditor.checkValidate();
							if (!d)
								return !0;
							var e = b.formulaEditor.getFormula();
							return FX.Utils.isObjectEmpty(c.field) ? (c.field = a.extend({
										name: c.field.name ? c.field.name : "_formula_" + FX.STATIC.IDBase++,
										category: c.formulaCategory,
										type: "formula"
									}, e), FX.Utils.applyFunc(this, c.onAfterFormulaAdd, [c.field], !1)) : (a.extend(c.field, e), FX.Utils.applyFunc(this, c.onAfterFormulaUpdate, [c.field], !1)),
							FX.Utils.applyFunc(this, c.onOk, [c.field], !1)
						},
						onCancel: function () {
							return FX.Utils.applyFunc(this, c.onCancel, [], !1)
						},
						onClose: function () {
							return b.isEditing = !1,
							!1
						}
					})
			},
			show: function () {
				this.isEditing = !0,
				this.dialog.show(),
				this.formulaEditor.focusEditor()
			}
		})
}
(jQuery), function (a) {
	FX.FormulaListDialog = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormulaListDialog.superclass._defaultConfig.apply(this, arguments), {
					field: {},
					forms: [],
					fields: [],
					availableFields: ["number", "subform"],
					formulaCategory: "calc",
					formulaBaseName: "",
					entryList: FX.EditReport && FX.EditReport.entryList,
					joinedFields: [],
					joinedSubform: null,
					allowMultiTable: !1,
					onFormulaAdd: null,
					onFormulaUpdate: null,
					onFormulaRemove: null,
					onOk: null,
					onCancel: null
				})
			},
			_init: function () {
				FX.FormulaListDialog.superclass._init.apply(this, arguments),
				this.fieldCountBase = 1,
				this.currentField = null,
				this._createFieldSelect(),
				this._createFormulaEditor(),
				this._createListDialog()
			},
			_createFieldSelect: function () {
				var b = this,
				c = this.options;
				this.$fieldSelect = a('<div class="field-select"/>'),
				this.fieldSelect = new FX.EntryFieldSelectPane({
						renderEl: this.$fieldSelect,
						mode: "dialog",
						forms: c.forms,
						subform: c.joinedSubform,
						fields: [],
						joinedFields: c.joinedFields,
						availableFields: c.availableFields,
						allowMultiTable: c.allowMultiTable,
						allowSameField: !0,
						allowMultiSubform: !1,
						entryList: c.entryList,
						onFieldSelect: function (a) {
							return b.formulaEditor.addField(a),
							!1
						}
					})
			},
			_createFormulaEditor: function () {
				var b = this,
				c = this.options;
				this.$formulaEditor = a('<div class="formula-editor"/>'),
				this.formulaEditor = new FX.FormulaPane({
						renderEl: this.$formulaEditor,
						width: 245,
						height: 370,
						fieldText: c.field.text,
						formula: c.field.formula,
						subform: c.field.subform,
						joinedSubform: c.joinedSubform,
						entryList: c.entryList,
						onAfterNameEdit: function (a) {
							b.dialog.setSelectItemText(a)
						},
						onAfterFieldAdd: function (d) {
							return b.fieldSelect.selectField(d),
							c.allowMultiTable || b.fieldSelect.setForms(this.forms),
							c.forms.length || a.merge(c.forms, this.forms),
							!1
						},
						onAfterFieldRemove: function (a, d) {
							return 0 === d.length ? (b.fieldSelect.setForms(c.forms || []), b.fieldSelect.setFields([]), b.dialog.getItems().length < 2 && (c.forms.length = 0)) : b.fieldSelect.deselectField(a),
							!1
						}
					})
			},
			_createListDialog: function () {
				var a = this,
				b = this.options;
				this._filterFields(),
				this.dialog = new FX.ListDialog({
						title: b.formulaBaseName + "",
						width: 675,
						height: 510,
						items: this.listFields,
						contentWidget: {
							rowSize: [370, 30],
							colSize: [200, 10, 245],
							hgap: 0,
							vgap: 10,
							padding: 10,
							items: [[this.$fieldSelect, {}, this.$formulaEditor], [{}, {}, {
										widgetName: "useFieldCheck",
										type: "checkbox",
										text: "  ",
										onStateChange: function (b) {
											a.currentField && (a.currentField.enable = b)
										}
									}
								]]
						},
						text4ItemAdd: " " + b.formulaBaseName,
						onBeforeItemAdd: function (b) {
							return !a._changeSelectCheck(b)
						},
						onBeforeItemSelect: function (b) {
							return !a._changeSelectCheck(b)
						},
						onItemAdd: function () {
							return {
								name: "_formula_" + FX.STATIC.IDBase++,
								text: b.formulaBaseName + a.fieldCountBase++,
								category: b.formulaCategory,
								enable: !0,
								forms: [],
								formula: "",
								subform: null,
								type: "formula"
							}
						},
						onItemSelect: function (c) {
							a.currentField = c;
							var d = c.forms;
							FX.Utils.isObjectEmpty(d) && (d = b.forms),
							a.fieldSelect.setForms(d),
							a.fieldSelect.setFields([]),
							a.formulaEditor.setText(c.text),
							a.formulaEditor.setFormula(c.formula),
							this.getWidgetByName("useFieldCheck").setSelected(c.enable)
						},
						onItemRemove: function () {
							return a.currentField = null,
							!1
						},
						onItemAvailable: function () {
							a.fieldSelect.setEnable(!0),
							a.formulaEditor.setEnable(!0),
							this.getWidgetByName("useFieldCheck").setEnable(!0)
						},
						onNoItemAvailable: function () {
							a.fieldSelect.setEnable(!1),
							a.formulaEditor.setEnable(!1),
							a.formulaEditor.setText(""),
							a.formulaEditor.setFormula(""),
							this.getWidgetByName("useFieldCheck").setEnable(!1)
						},
						onOk: function () {
							var c = a._changeSelectCheck(this.getItems());
							return !c || (a._updateFields(), FX.Utils.applyFunc(a, b.onOk, [], !1))
						},
						onCancel: function () {
							return FX.Utils.applyFunc(a, b.onCancel, [], !1)
						}
					})
			},
			_changeSelectCheck: function (b) {
				var c = this.options;
				if (FX.Utils.isObjectEmpty(b) || !this.currentField)
					return !0;
				if (!this.formulaEditor.checkValidate())
					return !1;
				if (this.currentField) {
					var d = this.formulaEditor.getFormula();
					a.extend(this.currentField, d),
					this.currentField.enable = this.dialog.getWidgetByName("useFieldCheck").getValue(),
					this.dialog.setSelectItemText(d.text),
					0 === c.forms.length && a.merge(c.forms, d.forms)
				}
				return !0
			},
			_filterFields: function () {
				var b = this,
				c = this.options;
				this.listFields = [];
				var d = new RegExp(c.formulaBaseName + "(\\d+)$");
				FX.Utils.forEach(c.fields, function (e, f) {
					if (f.category === c.formulaCategory && (b.listFields.push(a.extend({}, f)), f.text)) {
						var g = f.text.match(d);
						g && g[1] > b.fieldCountBase && (b.fieldCountBase = g[1] + 1)
					}
				})
			},
			_updateFields: function () {
				var b = this.options,
				c = this.dialog.getItems(),
				d = {};
				FX.Utils.forEach(c, function (a, b) {
					d[b.name] = b
				});
				var e = [],
				f = {};
				FX.Utils.forEach(b.fields, function (c, g) {
					if ("formula" === g.type && g.category === b.formulaCategory) {
						f[g.name] = g;
						var h = d[g.name];
						h ? (a.extend(g, h), FX.Utils.applyFunc(this, b.onFormulaUpdate, [g], !1)) : e.push(c)
					}
				}),
				FX.Utils.forEach(e.reverse(), function (a, c) {
					var d = b.fields.splice(c, 1);
					FX.Utils.applyFunc(this, b.onFormulaRemove, [d[0], !1])
				}),
				FX.Utils.forEach(c, function (a, c) {
					f[c.name] || (b.fields.push(c), FX.Utils.applyFunc(this, b.onFormulaAdd, [c], !1))
				})
			},
			show: function () {
				this.isEditing = !0,
				this.dialog.show()
			}
		})
}
(jQuery), function (a) {
	FX.FormulaPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormulaPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_formula_pane",
					text: "",
					formula: null,
					subform: null,
					entryList: null,
					selectedFields: [],
					operators: FX.Operators.group,
					allowNumber: !0,
					onAfterNameEdit: null,
					onAfterFieldAdd: null,
					onAfterFieldRemove: null
				})
			},
			_init: function () {
				var b = this,
				c = this.options;
				FX.FormulaPane.superclass._init.apply(this, arguments),
				this.$title = a('<div class="formula-title"/>').appendTo(this.element);
				var d = a('<div class="formula-name"/>').appendTo(this.$title),
				e = 210;
				FX.Utils.isNumber(c.width) && (e = c.width - 30),
				this.nameInput = new FX.TextEditor({
						renderEl: d,
						value: c.text,
						width: e,
						height: 30,
						allowBlank: !1,
						onAfterEdit: function () {
							FX.Utils.applyFunc(b, c.onAfterNameEdit, [this.getValue()], !1)
						}
					}),
				d.css({
					display: "inline-block"
				}),
				a('<span class="equal-sign"/>').css({
					"margin-left": "15px"
				}).text("=").appendTo(this.$title),
				this.$editor = a('<div class="formula-editor"/>').appendTo(this.element),
				this.$fakeInput = a('<input class="fake-input"/>').appendTo(this.element),
				a('<div class="formula-foot"><ul><li></li><li> <span class="formula-field"></span> + 20</li></ul></div>').appendTo(this.element),
				this.fields = [],
				this._initFormulaMap(),
				this._createCursor(),
				this._bindEditorKeyEvents(),
				this._bindEditorMouseEvents(),
				this._setFormula(),
				this.focusEditor()
			},
			_initFormulaMap: function () {
				var a = this,
				b = this.options;
				this.formulaMap = {},
				FX.Utils.forEach(b.selectedFields, function (b, c) {
					"formula" === c.type && (a.formulaMap[c.name] = c)
				})
			},
			_createCursor: function () {
				var b = this;
				this.$cursor = a('<div class="cursor">').html("&nbsp;").appendTo(this.$editor);
				var c = function () {
					b.$cursor.animate({
						opacity: 0
					}, "fast", "swing").animate({
						opacity: 1
					}, "fast", "swing")
				};
				setInterval(c, 800)
			},
			_bindEditorKeyEvents: function () {
				var a = this,
				b = (this.options, function () {
					var b = a.$fakeInput.val();
					b.length > 0 && (b.replace(" ", "").split("").forEach(function (b) {
							a._insertItem({
								text: b
							})
						}), a.$fakeInput.val(""))
				});
				this.$fakeInput.keydown(function (c) {
					if (a.isEnabled()) {
						a.$editor.removeClass("error");
						var d = c.which || c.keyCode;
						switch (d) {
						case FX.Keys.BACKSPACE:
							a._removeFormulaItem(a.$cursor.prev());
							break;
						case FX.Keys.DELETE:
							a._removeFormulaItem(a.$cursor.next());
							break;
						case FX.Keys.LEFT:
							a.$cursor.insertBefore(a.$cursor.prev());
							break;
						case FX.Keys.RIGHT:
							a.$cursor.insertAfter(a.$cursor.next());
							break;
						default:
							b()
						}
					}
				}).keyup(function (a) {
					b()
				})
			},
			focusEditor: function () {
				var a = this;
				this.$fakeInput.focus(),
				this.$editor.addClass("focus"),
				this.$cursor.css({
					display: "inline-block"
				}),
				this.$fakeInput.focusout(function () {
					a.$editor.removeClass("focus"),
					a.$cursor.hide()
				})
			},
			_bindEditorMouseEvents: function () {
				var b = this,
				c = (this.options, function (c) {
					if (b.isEnabled()) {
						var d = c.target,
						e = c.type,
						f = a(d).closest("span.fi");
						"mousedown" === e && (f && f.length ? (b.focusEditor(), b.$cursor.insertBefore(f), c.stopEvent()) : (b.$editor.removeClass("error"), b.focusEditor(), b.$cursor.insertAfter(b.$editor.children(".fi").last()), c.stopEvent()))
					}
				});
				this.$editor.unbind(".formula-editor"),
				this.$editor.bind({
					"mousedown.formula-editor": c
				})
			},
			_findField: function (b, c) {
				var d = this.options,
				e = null,
				f = null;
				if (/_formula_/.test(c))
					return this.formulaMap[c];
				if (c.indexOf(".") > -1) {
					var g = c.split(".");
					c = g[0],
					f = g[1]
				}
				return FX.Utils.forEach(d.entryList, function (d, g) {
					if (g.appId !== FX.STATIC.APPID) {
						if (b !== [g.entryId, g.appId].join(FX.CONST.FIELD.DELIMITER))
							return
					} else if (b !== g.entryId)
						return;
					return FX.Utils.forEach(g.fields, function (b, d) {
						if (c === d.name)
							return FX.Utils.isEmpty(f) ? e = d : FX.Utils.forEach(d.items, function (b, g) {
									if (f === g.name)
										return e = a.extend({}, g), e.text = [d.text, e.text].join("."), e.name = [d.name, e.name].join("."), e.subform = c, !1
								}), !1
					}),
					!1
				}),
				e
			},
			setText: function (a) {
				FX.FormulaPane.superclass.setText.apply(this, arguments),
				this.nameInput.setText(a),
				this.nameInput.setState(FX.States.NORMAL)
			},
			setFormula: function (a) {
				var b = this.options;
				b.formula = a,
				b.subform = null,
				this.$editor.empty(),
				this.$cursor.appendTo(this.$editor),
				this.fields = [],
				this._setFormula()
			},
			_setFormula: function () {
				var a = this,
				b = this.options;
				if (b.formula && b.formula.length > 0) {
					var c = b.formula.split(/(\$[0-9a-zA-Z\._#@]+)/g);
					FX.Utils.forEach(c, function (b, c) {
						if (a._isItemField(c)) {
							var d = c.replace("$", "").split("#"),
							e = d[0],
							f = d[1],
							g = a._findField(f, e);
							if (g) {
								var h = e;
								g && (h = g.label || g.text);
								var i = {
									text: h,
									name: e,
									id: f
								};
								a.addField(i)
							}
						} else
							c.split("").forEach(function (b) {
								a._insertItem({
									text: b
								})
							})
					})
				}
			},
			_insertItem: function (b) {
				var c = b.text;
				return a('<span class="fi"/>').text(c).insertBefore(this.$cursor)
			},
			_removeFormulaItem: function (a) {
				var b = this.options;
				if (a.hasClass("field")) {
					var c = a.data("field"),
					d = this.fields.indexOf(c);
					d > -1 && this.fields.splice(d, 1),
					FX.Utils.applyFunc(this, b.onAfterFieldRemove, [c, this.fields], !1)
				}
				a.remove()
			},
			addField: function (a) {
				var b = this.options,
				c = this._insertItem(a),
				d = a.id;
				"formula" === a.type && (d = a.forms[0]);
				var e = "$" + a.name + "#" + d;
				return a.appId && "formula" !== a.type && (e += FX.CONST.FIELD.DELIMITER + a.appId),
				c.addClass("field").data("fieldname", e).data("field", a).insertBefore(this.$cursor),
				a.subform && !b.subform && (b.subform = a.subform),
				this.fields.push(a),
				this.focusEditor(),
				FX.Utils.applyFunc(this, b.onAfterFieldAdd, [a, this.fields], !1),
				c
			},
			checkValidate: function () {
				var a = this.options;
				if (!this.nameInput.getText())
					return this.nameInput.showErrorMsg(""), !1;
				var b = this._getFormulaItems();
				return !!this._isFormulaValid(b) || (this.$editor.addClass("error"), FX.Msg.toast({
						type: "warning",
						msg: ""
					}), a.formula = null, !1)
			},
			getFormula: function () {
				var a = this.options,
				b = this._getFormulaItems(),
				c = this.nameInput.getText();
				if (a.formula = b.join(""), !a.formula.match(/\.\d*\./g))
					return {
						formula: a.formula,
						forms: this.forms,
						subform: a.subform,
						text: c
					}
			},
			_getFormulaItems: function () {
				var b = [];
				return this.$editor.children(".fi").each(function (c, d) {
					var e = a(d);
					e.hasClass("field") ? b.push(e.data("fieldname")) : b.push(e.text().replace(/\s/, ""))
				}),
				b
			},
			_isFormulaValid: function (a) {
				var b = this,
				c = this.options,
				d = !0,
				e = [],
				f = [];
				return b.forms = [],
				FX.Utils.forEach(a, function (a, g) {
					if ("(" === g)
						e.push(g), f = [];
					else if (")" === g)
						d &= !!e.pop(), d &= f.length > 0;
					else if (g && 0 !== g.length) {
						if (FX.Utils.isNumber(g))
							d &= !!c.allowNumber;
						else if (b._isItemField(g)) {
							var h = g.split("#");
							if (h.length > 1) {
								var i = h[1];
								b.forms.indexOf(i) === -1 && b.forms.push(i)
							}
							var j = f.slice(-1)[0];
							d &= !j || !b._isItemField(j)
						} else
							c.operators.indexOf(g) !== -1 ? (d &= ["+", "-"].indexOf(g) > -1 || f.length > 0, d &= c.operators.indexOf(f.slice(-1)[0]) === -1) : d &= !1;
						f.push(g)
					} else
						d &= !0;
					if (!d)
						return !1
				}),
				d &= c.operators.indexOf(f.slice(-1)[0]) === -1,
				d &= 0 === e.length,
				!!d
			},
			_isItemField: function (a) {
				return /^\$_(widget|formula)_/.test(a)
			},
			setEnable: function (a) {
				FX.FormulaPane.superclass.setEnable.apply(this, arguments),
				this.nameInput.setEnable(a),
				a ? (this.$fakeInput.removeAttr("disabled"), this.$fakeInput.focus()) : (this.$fakeInput.attr("disabled", "disabled"), this.$fakeInput.focusout())
			}
		}),
	a.shortcut("formulapane", FX.FormulaPane)
}
(jQuery), function (a) {
	FX.FilterPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FilterPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_filter_pane",
					fields: {},
					entryList: {},
					forms: [],
					hasAggregateTable: !1,
					availableFields: FX.LimitFields.filter,
					needFormName: !1,
					supportCurrentUser: !0,
					supportCurrentDept: !0,
					supportSelectEmpty: !0,
					text4add: " ",
					tip: "",
					width4content: {
						text: 240,
						number: 110,
						date: 170,
						province: 240,
						city: 115,
						district: 115
					},
					edge: {
						width: 240,
						height: 300
					}
				})
			},
			_init: function () {
				FX.FilterPane.superclass._init.apply(this, arguments);
				var a = this;
				this._getFormList(function () {
					a._initContent()
				})
			},
			_getFormList: function (a) {
				var b = this.options;
				!FX.Utils.isObjectEmpty(b.forms) && FX.Utils.isObjectEmpty(b.entryList) ? FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/fields/get",
					data: {
						hasAggregateTable: b.hasAggregateTable,
						forms: b.forms
					}
				}, function (c) {
					b.entryList = c,
					a && a()
				}) : a && a()
			},
			_getFieldSelectPos: function () {
				var a = {
					"z-Index": FX.STATIC.zIndex++
				},
				b = this.element.offset(),
				c = this.options.edge,
				d = document.body.clientWidth - b.left;
				d < c.width ? (a.right = d - this.element.outerWidth(), a.left = "auto") : (a.right = "auto", a.left = b.left);
				var e = document.body.clientHeight + document.body.scrollTop - b.top;
				return e < c.height ? (a.top = "auto", a.bottom = document.body.clientHeight - b.top) : (a.top = b.top + 30, a.bottom = "auto"),
				a
			},
			_initContent: function () {
				var b = this.options,
				c = this;
				this.selectedFields = [];
				var d = new FX.Button({
						renderEl: a("<a/>").appendTo(this.element),
						style: "none",
						text: b.text4add,
						iconCls: "icon-add",
						customCls: "field-add-btn",
						onClick: function () {
							var e = new FX.FilterFieldSelectPane({
									renderEl: a('<div class="field-select-pane"/>').appendTo("body").css(c._getFieldSelectPos()),
									mode: "pop-left",
									fields: c.selectedFields,
									availableFields: b.availableFields,
									allowMultiTable: !0,
									entryList: b.entryList,
									onFieldSelect: function (a) {
										return c._addFieldItem(a, d.element, !0),
										!1
									}
								});
							e.show(),
							a(document).bind("mousedown.fieldselect", function (b) {
								var c = b.target,
								d = a(c).closest(".field-select-pane");
								(!d || d.length <= 0) && (e.element.remove(), a(document).unbind("mousedown.fieldselect"))
							})
						}
					});
				b.tip && a('<div class="field-add-tip"/>').text(b.tip).appendTo(d.element);
				var e = !1;
				FX.Utils.forEach(b.fields, function (b, f) {
					FX.Utils.forEach(f, function (f, g) {
						var h = c.getFieldByEntryList(b, f),
						i = {
							id: b,
							name: f,
							value: g.widgetValue
						};
						h ? (c.selectedFields.push(i), c._addFieldItem(a.extend(i, h), d.element)) : (e = !0, c._addDummyFieldItem(d.element))
					})
				}),
				e && FX.Utils.applyFunc(c, b.onStopEdit, [], !1)
			},
			getFieldByEntryList: function (a, b) {
				if (!this.ffMap) {
					this.ffMap = {};
					var c = this,
					d = this.options;
					FX.Utils.forEach(d.entryList, function (a, b) {
						c.ffMap[a] || (c.ffMap[a] = {}),
						b.id = a,
						FX.Utils.forEach(b.fields, function (b, d) {
							d.id = a,
							c.ffMap[a][d.name] = d
						})
					})
				}
				var e = this.ffMap[a];
				return e ? e[b] : null
			},
			_addFieldItem: function (b, c, d) {
				var e = this.options,
				f = this,
				g = f.getConfigFromItem(b),
				h = a('<div class="fx_filter_cell filter"/>').data("item", b).hide().insertAfter(c),
				i = a('<div class="cfg_title"/>').appendTo(h);
				if (a("<span/>").text(g.title).appendTo(i), g) {
					g.renderEl = a("<div/>").appendTo(h);
					var j = function () {
						FX.Utils.applyFunc(f, e.onStopEdit, [], !1)
					};
					g.onStopEdit = j,
					g.onAfterItemSelect = j;
					var k = FX.createWidget(g);
					h.data("widget", k)
				}
				a('<i class="icon-condition-remove"/>').click(function () {
					h.slideUp(200, function () {
						h.remove(),
						FX.Utils.applyFunc(f, e.onStopEdit, [], !1)
					}),
					FX.Utils.forEach(f.selectedFields, function (a, b) {
						if (b.name === h.data("item").name)
							return f.selectedFields.splice(a, 1), !1
					})
				}).appendTo(h),
				a('<div class="cfg_split"/>').appendTo(h),
				d ? h.slideDown() : h.show()
			},
			_addDummyFieldItem: function (b) {
				var c = this,
				d = this.options,
				e = a('<div class="fx_filter_cell dummy_filter"/>').append(a('<div class="cfg_title"/>').text(" ")).append(a('<i class="icon-condition-remove"/>').click(function () {
							e.slideUp(200, function () {
								e.remove(),
								FX.Utils.applyFunc(c, d.onStopEdit, [], !1)
							})
						})).append(a('<div class="cfg_split"/>')).insertAfter(b)
			},
			_getCreatorConfig: function () {
				var a = this.options;
				return {
					textField: "nickname",
					valueField: "_id",
					asyncResultKey: "members",
					hasSelectEmpty: a.supportSelectEmpty,
					async: {
						url: "/manager/team/list",
						data: {
							hasCurrentUser: a.supportCurrentUser,
							hasAdmin: !0,
							hasCount: !1
						}
					},
					hasLimit: !0,
					searchKey: "filter"
				}
			},
			getConfigFromItem: function (b) {
				var c = this.options,
				d = c.width4content;
				c.needFormName && FX.Utils.forEach(c.entryList, function (a, c) {
					if (c.id === b.id)
						return b.text = c.name + "-" + b.text, !1
				});
				var e = {
					title: b.text,
					value: b.value
				},
				f = FX.Utils.getFieldInfoById(b.id);
				switch (b.type) {
				case "text":
				case "radiogroup":
				case "combo":
					e.type = "xcombocheck",
					e.hasSelectEmpty = !1,
					"ext" === b.name ? (e.items = [], FX.Utils.forEach(b.items, function (a, b) {
							e.items.push({
								text: b,
								value: b
							})
						})) : b.async ? (e.async = {
							url: b.async.url,
							data: a.extend({
								refAppId: f.appId,
								entryId: f.entryId
							}, b.async.data)
						}, e.hasLimit = !0) : FX.Utils.isObjectEmpty(b.items) ? (e.async = {
							url: "/data/distinct",
							data: {
								refAppId: f.appId,
								formId: f.entryId,
								entryId: f.entryId,
								field: b.name,
								type: b.type
							}
						}, e.hasLimit = !0) : e.items = b.items,
					e.width = d.text;
					break;
				case "number":
					e.type = "numberlimit",
					e.width4number = d.number;
					break;
				case "datetime":
					e.type = "datelimit",
					e.wrap = !0,
					e.width4date = d.date;
					break;
				case "address":
				case "location":
					e.type = "address",
					e.needDetail = !1,
					e.width4province = d.province,
					e.width4city = d.city,
					e.width4district = d.district;
					break;
				case "user":
					e.type = "usercheck",
					a.extend(e, this._getCreatorConfig());
					break;
				case "dept":
					e.type = "deptselect",
					e.hasSelectEmpty = c.supportSelectEmpty,
					c.supportCurrentDept && (e.dynamicType = "set");
					break;
				default:
					"creator" === b.name && (a.extend(e, this._getCreatorConfig()), e.type = "usercheck")
				}
				return FX.Utils.isNull(e.type) ? null : e
			},
			_checkWidgetValue: function (a, b) {
				switch (a) {
				case "xcombocheck":
				case "usercheck":
					return b.hasEmpty || !FX.Utils.isObjectEmpty(b.items);
				case "deptselect":
					return b.hasEmpty || b.hasCurrentDept || !FX.Utils.isObjectEmpty(b.items);
				default:
					return !FX.Utils.isObjectEmpty(b)
				}
			},
			_getWidgetType: function (a) {
				return "xcombocheck" === a ? "combocheck" : a
			},
			getValue: function () {
				var b = this,
				c = a(".fx_filter_cell.filter", this.element),
				d = {};
				return FX.Utils.forEach(c, function (c, e) {
					var f = a(e).data("widget");
					if (f) {
						var g = f.getValue();
						if (b._checkWidgetValue(f.options.type, g)) {
							var h = a(e).data("item");
							d.hasOwnProperty(h.id) || (d[h.id] = {}),
							d[h.id][h.name] = {
								widgetType: b._getWidgetType(f.options.type),
								widgetValue: g
							}
						}
					}
				}),
				d
			}
		}),
	a.shortcut("filterpane", FX.FilterPane)
}
(jQuery), function (a) {
	FX.ValidatorPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ValidatorPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_validator_pane",
					validator: [],
					entryList: [],
					entryId: "",
					onBeforeEdit: null,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.ValidatorPane.superclass._init.apply(this, arguments),
				this._createValidatorList(),
				this._createValidatorBtn()
			},
			_createValidatorBtn: function () {
				var b = this;
				new FX.Button({
					renderEl: a("<div/>").appendTo(this.element),
					type: "button",
					text: "  ",
					style: "white",
					height: 30,
					onClick: function () {
						b._setValidator()
					}
				})
			},
			_setValidator: function (a, b) {
				var c = this,
				d = this.options;
				FX.Utils.applyFunc(c, d.onBeforeEdit, [], !1),
				new FX.FieldFormulaPane({
					formula: a,
					supportMultiForm: !1,
					formulaKeywords: Object.keys(FX.Formula).remove("MAP").remove("MAPX"),
					availableFieldValue: FX.LimitFields.validate,
					entryList: d.entryList,
					currentForm: d.entryId,
					labelMap: this.labelMap,
					onAfterFormulaEdit: function (a, e) {
						b ? FX.Utils.isEmpty(a.formula) ? b.remove() : (b.data("formula", a.formula).data("remind", e), b.children("span").text(c._getTextFormFormula(a.formula))) : FX.Utils.isEmpty(a.formula) || c._createValidatorItem(a.formula, e),
						FX.Utils.applyFunc(c, d.onAfterEdit, [], !1)
					}
				})
			},
			_createValidatorList: function () {
				var b = this,
				c = this.options;
				this.$list = a('<ul class="validator-list">').appendTo(this.element),
				FX.Utils.forEach(c.validator, function (a, c) {
					b._createValidatorItem(c.formula, c.remind)
				})
			},
			_getTextFormFormula: function (a) {
				var b = [],
				c = this,
				d = a.split(/(\$[0-9a-zA-Z\._]+#[0-9A-Fa-f]*)/g);
				return FX.Utils.forEach(d, function (a, d) {
					if (FX.Utils.startWith(d, "$_widget_")) {
						var e = c._findFieldLabel(d);
						b.push(e)
					} else
						b.push(d)
				}),
				b.join("")
			},
			_findFieldLabel: function (b) {
				var c = this,
				d = this.options;
				return this.labelMap ? this.labelMap[b] : (this.labelMap = {}, FX.Utils.forEach(d.entryList, function (b, d) {
						FX.Utils.forEach(d.fields, function (b, d) {
							a.extend(c.labelMap, c._getLabelMap(d))
						})
					}), this.labelMap[b])
			},
			_getLabelMap: function (a) {
				var b = {};
				if ("subform" === a.type)
					FX.Utils.forEach(a.items, function (c, d) {
						var e = ["$", a.name, ".", d.name, "#"].join("");
						b[e] = [a.text, d.text].join(".")
					});
				else {
					var c = ["$", a.name, "#"].join("");
					b[c] = a.text
				}
				return b
			},
			_createValidatorItem: function (b, c) {
				var d = this,
				e = this.options,
				f = this._getTextFormFormula(b),
				g = a("<li/>").data("formula", b).data("remind", c).appendTo(this.$list);
				a("<span/>").text(f).appendTo(g),
				a('<i class="item-icon x-c-key icon-edit"/>').appendTo(g).click(function () {
					d._setValidator({
						formula: g.data("formula"),
						remind: g.data("remind")
					}, g)
				}),
				a('<i class="item-icon icon-trasho"/>').appendTo(g).click(function () {
					g.remove(),
					FX.Utils.applyFunc(d, e.onAfterEdit, [], !1)
				})
			},
			getValue: function () {
				var b = [];
				return FX.Utils.forEach(this.$list.children("li"), function (c, d) {
					var e = a(d).data("formula");
					FX.Utils.isEmpty(e) || b.push({
						formula: e,
						remind: a(d).data("remind")
					})
				}),
				b
			}
		}),
	a.shortcut("validatorpane", FX.ValidatorPane)
}
(jQuery), function (a) {
	FX.ItemLinkPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ItemLinkPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_item_link",
					linkWidgets: [],
					items: [],
					onBeforeEdit: null,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.ItemLinkPane.superclass._init.apply(this, arguments),
				this.idx = 0,
				this.valueMap = {},
				this._initLinkWidgetsMap(),
				this._createItemPane(),
				this._createWidgetPane(),
				this._bindEvent()
			},
			_initLinkWidgetsMap: function () {
				var a = this,
				b = this.options;
				this.linkWidgetsMap = {},
				FX.Utils.forEach(b.linkWidgets, function (b, c) {
					a.linkWidgetsMap[c.value] = !0
				})
			},
			_createItemPane: function () {
				var b = a('<div class="item-pane"><span class="title"></span></div>').appendTo(this.element);
				this._createItemList(b)
			},
			_createItemList: function (b) {
				var c = this,
				d = this.options;
				this.$itemList = a('<ul class="item-list"/>').appendTo(b),
				FX.Utils.forEach(d.items, function (a, b) {
					var d = [];
					FX.Utils.forEach(b.widgetsMap, function (a, b) {
						c.linkWidgetsMap[b] && d.push(b)
					}),
					c.valueMap[a] = d,
					c._createItem(a, b)
				})
			},
			_createItem: function (b, c) {
				var d = a('<li class="item"/>').append(a("<span/>").text(c.text)).data("idx", b).appendTo(this.$itemList);
				b === this.idx && d.addClass("current-select")
			},
			_createWidgetPane: function () {
				var b = a('<div class="widget-pane"><span class="title"></span></div>').appendTo(this.element);
				this._createWidgetList(b)
			},
			_createWidgetList: function (b) {
				var c = this,
				d = this.options;
				this.$widgetList ? this.$widgetList.empty() : this.$widgetList = a('<ul class="widget-list"/>').appendTo(b),
				FX.Utils.forEach(d.linkWidgets, function (a, b) {
					c._createWidget(b)
				})
			},
			_createWidget: function (b) {
				var c = a('<li class="widget"/>').append(a("<span/>").text(b.text)).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).appendTo(this.$widgetList).data("name", b.value);
				this.valueMap[this.idx] && this.valueMap[this.idx].indexOf(b.value) > -1 && c.children(".select-btn").addClass("select")
			},
			_bindEvent: function () {
				var b = this;
				this.$itemList.on("click", "li.item", function (c) {
					var d = a(c.currentTarget);
					d.addClass("current-select").siblings().removeClass("current-select"),
					b.idx = d.data("idx"),
					b._createWidgetList()
				}),
				this.$widgetList.on("click", "li.widget", function (c) {
					var d = a(c.currentTarget),
					e = d.children(".select-btn");
					if (d.length > 0 && e.length > 0) {
						d.data("name");
						e.hasClass("select") ? (e.removeClass("select"), b.updateValue()) : (e.addClass("select"), b.updateValue())
					}
				})
			},
			updateValue: function (b) {
				var c = [];
				a("li.widget", this.$widgetList).each(function (b, d) {
					var e = a(d).data("name");
					e && a(d).children(".select-btn").hasClass("select") && c.push(e)
				}),
				this.valueMap[this.idx] = c
			},
			getValue: function () {
				return this.valueMap
			}
		}),
	a.shortcut("itemlinkpane", FX.ItemLinkPane)
}
(jQuery), function (a) {
	FX.AppListPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.AppListPane.superclass._defaultConfig.apply(), {
					baseCls: "fx_app_list",
					audit: !1,
					onAppLoaded: null,
					autoInstallApp: null,
					templateUrl: "/dashboard#/template"
				})
			},
			_init: function () {
				FX.AppListPane.superclass._init.apply(this, arguments),
				this.$content = a('<div class="content"/>').appendTo(this.element),
				this._loadApps(),
				this._bindAppItemEvents()
			},
			_loadApps: function () {
				var a = this,
				b = this.options;
				FX.Utils.ajax({
					url: "/dashboard/apps"
				}, function (c) {
					a.ownApps = c.apps,
					a._initApp(),
					FX.Utils.applyFunc(a, b.onAppLoaded, [], !1)
				})
			},
			_createCustomPane: function (b) {
				var c = this,
				d = 1,
				e = '<div class="app-custom-pane"><div class="custom-list color-list">';
				for (d = 1; d <= 6; d++)
					e += '<span class="custom-picker color-picker color-cover-' + d + '"/>';
				for (e += "</div>", e += '<div class="app_delete_hr"/>', e += '<div class="custom-list icon-list">', d = 1; d <= 10; d++)
					e += '<i class="custom-picker icon-picker icon-cover-' + d + '"/>';
				e += "</div></div>";
				var f = a(e);
				FX.Msg.bubble({
					anchor: b,
					dockPosition: "right",
					text4Cancel: null,
					text4Ok: null,
					contentPadding: 0,
					hAdjust: 25,
					contentHTML: f,
					onClose: function () {
						return c._saveAppCustom({
							color: c.selectedApp.color,
							icon: c.selectedApp.icon
						}),
						c._clearSelectState(),
						!1
					}
				}),
				this._setCustomColor(this.selectedApp.color, f),
				this._setCustomIcon(this.selectedApp.icon, f),
				this._bindCustomPaneEvents(f)
			},
			_initApp: function () {
				var b = this,
				c = this.options,
				d = this.$content.empty(),
				e = a('<ul class="app-list app-list-own"/>').appendTo(d);
				FX.STATIC.user.corpId === FX.STATIC.corpId ? (e.append(a('<li class="app-item-add"><a class="app-blank-add" href="' + c.templateUrl + '"><i class="icon-plus" /><span></span></a></li>')), FX.Utils.forEach(b.ownApps, function (a, c) {
						e.append(b._createAppItem(c))
					})) : (FX.Utils.isObjectEmpty(this.ownApps) && d.append(a('<div class="app-empty"><span></span><span class="empty-info">/</span></div>')), FX.Utils.forEach(b.ownApps, function (a, c) {
						e.append(b._createAppItem(c, "share"))
					})),
				this._autoInstallApp()
			},
			_autoInstallApp: function () {
				var b = this,
				c = this.options;
				if (c.autoInstallApp) {
					var d = this._createLoadingItem().appendTo(a(".app-list-own"));
					FX.Utils.ajax({
						url: "/dashboard/template/install_public",
						data: {
							appId: c.autoInstallApp
						}
					}, function (a) {
						FX.Msg.toast({
							type: "success",
							msg: ""
						}),
						b._createAppItem(a.app).insertBefore(d)
					}, function (a) {
						var b = a.responseJSON || {};
						FX.Vip.showUpgradeTip(b, "!")
					}, function () {
						d.remove()
					})
				}
			},
			_saveAppCustom: function (a, b, c) {
				var d = this,
				e = this.selectedApp;
				FX.Utils.ajax({
					url: "/dashboard/app/" + e._id + "/update",
					data: a
				}, function () {
					d.selectedApp = null,
					FX.Utils.applyFunc(d, b, [], !1)
				}, function () {
					FX.Utils.applyFunc(d, c, [], !1)
				})
			},
			_setCustomColor: function (b, c) {
				a(".color-selected", c).removeClass("color-selected"),
				a(".color-cover-" + b, c).addClass("color-selected"),
				a(".icon-picker", c).removeClass(function (a, b) {
					return (b.match(/(^|\s)color-cover-\S+/g) || []).join(" ")
				}).addClass("color-cover-" + b)
			},
			_setCustomIcon: function (b, c) {
				a(".icon-selected", c).removeClass("icon-selected"),
				a(".icon-cover-" + b, c).addClass("icon-selected")
			},
			_setItemColor: function (b) {
				a(".icon-app", this.$selectedItem).removeClass(function (a, b) {
					return (b.match(/(^|\s)color-cover-icon-\S+/g) || []).join(" ")
				}).addClass("color-cover-icon-" + b),
				a(".app-nav", this.$selectedItem).removeClass(function (a, b) {
					return (b.match(/(^|\s)color-cover-\S+/g) || []).join(" ")
				}).addClass("color-cover-" + b),
				this.selectedApp.color = b
			},
			_setItemIcon: function (b) {
				a(".icon-app", this.$selectedItem).removeClass(function (a, b) {
					return (b.match(/(^|\s)icon-cover-\S+/g) || []).join(" ")
				}).addClass("icon-cover-" + b),
				this.selectedApp.icon = b
			},
			_bindAppItemEvents: function () {
				var b = this,
				c = function (c) {
					var d = c.target,
					e = a(d).closest(".app-info");
					if (e && e.length > 0) {
						var f = e.closest(".app-item");
						return b.$selectedItem = f.addClass("item-selected chosen"),
						b.selectedApp = f.data("app"),
						b._setCustomColor(b.selectedApp.color),
						b._setCustomIcon(b.selectedApp.icon),
						b._createMenuPane(b.selectedApp, e),
						!1
					}
				};
				this.$content.unbind(".app-menu"),
				this.$content.bind({
					"click.app-menu": c
				})
			},
			_createAppItem: function (b, c) {
				var d = "/dashboard/app/" + b._id,
				e = a("<a/>").append('<div class="app-nav color-cover-' + b.color + '"/>').append('<i class="icon-app icon-cover-' + b.icon + " color-cover-icon-" + b.color + '"/>').append('<div class="app-title">' + b.name + "</div>").append('<i class="icon-info app-info"/>'),
				f = a('<li class="app-item"/>').append(e);
				return "share" === c ? e.addClass("app-theirs").attr({
					href: d
				}) : (a('<div class="app-design"/>').append(a("<a/>").attr({
							href: d
						}).append(a('<div class="icon">').append('<i class="icon-enterin"/>')).append(a("<span/>").text(""))).append(a('<a onclick="FX.Utils.dt(FX.CONST.TRACKER.APP_EDIT)"/>').attr("href", d + "/edit").append(a('<div class="icon">').append('<i class="icon-design"/>')).append(a("<span/>").text(""))).appendTo(e), e.addClass("app-mine")),
				f.data("app", b),
				b.state === FX.CONST.APP_STATE.onSale && f.addClass("app-onsale"),
				f
			},
			_createLoadingItem: function (b) {
				var c = b ? b.color : "5",
				d = a('<li class="app-item"/>'),
				e = a('<a class="app-loading"><div class="app-nav color-cover-' + c + '"/></a>').appendTo(d);
				return FX.Utils.createMask(a('<div class="loading-mask"/>').appendTo(e), {
					hasLoader: !0
				}),
				d.append('<div class="app-title">...</div>'),
				d
			},
			_bindCustomPaneEvents: function (b) {
				var c = this,
				d = function (d) {
					var e = d.target,
					f = d.type,
					g = a(e).closest(".custom-picker");
					if (g && g.length > 0 && "click" === f) {
						var h = g.index() + 1;
						g.hasClass("color-picker") ? (c._setCustomColor(h, b), c._setItemColor(h, b)) : g.hasClass("icon-picker") && (c._setCustomIcon(h, b), c._setItemIcon(h, b))
					}
				};
				b.unbind(".custom-pane"),
				b.bind({
					"click.custom-pane": d
				})
			},
			_bindAppMenuEvents: function (b) {
				var c = this;
				b.unbind("click"),
				b.bind("click", function (d) {
					var e = a(d.target).closest(".menu-item"),
					f = c.selectedApp;
					if (e.length > 0 && f)
						switch (c._removeMenuPane(b), e.attr("role")) {
						case "app-style-change":
							c._createCustomPane(c.$selectedItem.find(".app-info"));
							break;
						case "app-name-change":
							c.$selectedItem && FX.Msg.bubble({
								anchor: c.$selectedItem.find(".app-info"),
								dockPosition: "right",
								hAdjust: 25,
								contentWidget: {
									widgetName: "appName",
									type: "text",
									text: f.name
								},
								onShow: function (a) {
									a.select()
								},
								onOk: function (a) {
									c.$selectedItem.removeClass("item-selected chosen");
									var b = a.getValue();
									b && c._saveAppCustom({
										name: b
									}, function () {
										c.$selectedItem.data("app").name = b,
										c.$selectedItem.find(".app-title").text(b)
									}, function () {
										FX.Msg.toast({
											type: "error",
											msg: "!"
										})
									})
								},
								onCancel: function () {
									c.$selectedItem.removeClass("item-selected chosen")
								}
							});
							break;
						case "app-copy":
							FX.Msg.alert({
								title: "",
								msg: "",
								type: "query",
								onOk: function () {
									c.copyApp(f)
								}
							});
							break;
						case "app-auditing":
							c._clearSelectState();
							break;
						case "app-remove":
							c.$selectedItem.removeClass("item-selected chosen"),
							c.removeApp();
							break;
						case "app-upload":
							var g = a(d.target).closest(".icon-help");
							g.length > 0 ? c._createUploadHelpDialog() : c._publishApp(f)
						}
				})
			},
			copyApp: function (b) {
				var c = this,
				d = this._createLoadingItem(b).appendTo(a(".app-list-own"));
				FX.Utils.ajax({
					url: "/dashboard/app/" + b._id + "/copy"
				}, function (a) {
					var b = a.app;
					c._createAppItem(b).insertBefore(d),
					FX.Msg.toast({
						type: "success",
						msg: "!"
					})
				}, function () {
					FX.Msg.toast({
						type: "error",
						msg: "!"
					})
				}, function () {
					c.$selectedItem = null,
					c.selectedApp = null,
					d.remove()
				})
			},
			removeApp: function () {
				var b = this,
				c = this.selectedApp,
				d = function (a) {
					g && g.okBtn && (a === c.name ? g.okBtn.setEnable(!0) : g.okBtn.setEnable(!1))
				},
				e = a('<div class="app-remove-confirm"/>').append(a("<div/>").text("   " + c.name + " ")).append(a('<div class="title-hl"/>').text("  ")),
				f = a('<div class="app-input-name"/>').appendTo(e).append(a("<span/>").text(" "));
				new FX.TextEditor({
					renderEl: a('<div class="input-widget"/>').appendTo(f),
					onAfterEdit: function () {
						d(this.getValue())
					},
					onStopEdit: function () {
						d(this.getValue())
					}
				});
				var g = FX.Msg.alert({
						title: " ",
						content: e,
						type: "warning",
						enable4Ok: !1,
						onOk: function () {
							FX.Utils.ajax({
								url: "/dashboard/app/" + c._id + "/remove"
							}, function (a, c) {
								b.$selectedItem.remove(),
								b.$selectedItem = null,
								b.selectedApp = null,
								FX.Msg.toast({
									type: "success",
									msg: " !"
								})
							})
						}
					})
			},
			_createCategoryDialog: function (b) {
				var c = this,
				d = b.category || [];
				FX.Utils.isArray(d) || (d = d.split(","));
				var e = [];
				FX.Utils.forEach(FX.CONST.APP_CATE, function (a, b) {
					e.push({
						value: b,
						text: FX.CONST.APP_CATE_NAME[b]
					})
				});
				var f = new FX.ConfirmDialog({
						title: "",
						height: 300,
						width: 430,
						contentWidget: {
							hgap: 20,
							vgap: 10,
							padding: 20,
							rowSize: [80, 30],
							colSize: [100, 270],
							items: [[{
										type: "label",
										text: ""
									}, {
										type: "textarea",
										widgetName: "categoryName"
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "combocheck",
										widgetName: "category",
										items: e,
										value: d,
										onStopEdit: function () {
											var a = this.getText();
											f.getWidgetByName("categoryName").setValue(a.join(","))
										}
									}
								]]
						},
						onOk: function () {
							var d = this.getWidgetByName("category"),
							e = {
								category: d.getValue()
							};
							c._saveAppCustom(e, function () {
								a.extend(b, e),
								f.close()
							})
						}
					});
				f.getWidgetByName("categoryName").setValue(f.getWidgetByName("category").getText()),
				f.show()
			},
			_createAuditDialog: function (b) {
				var c = this,
				d = new FX.ConfirmDialog({
						title: " ",
						text4Ok: "",
						text4Cancel: "",
						height: 430,
						width: 430,
						contentWidget: {
							hgap: 20,
							vgap: 10,
							padding: 20,
							rowSize: [30, 30, 30, 180],
							colSize: [50, 320],
							items: [[{
										type: "label",
										text: ""
									}, {
										type: "label",
										text: b.name
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "label",
										text: c._parseVersionCode(b.version)
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "button",
										text: "",
										width: 120,
										style: "white",
										onClick: function () {
											var c = this;
											return b.publisher ? (c.setEnable(!1), void FX.Utils.ajax({
													url: "/dashboard/app/" + b._id + "/publisher",
													data: {
														publisher: b.publisher
													}
												}, function (b) {
													FX.Msg.bubble({
														anchor: c.element,
														contentHTML: a("<li>" + b.username + "<li/><li>" + b.nickname + "<li/><li>" + (b.email || " ") + "<li/><li> " + (b.phone || " ") + "<li/><li>" + FX.Utils.date2Str(new Date(b.regTime), "yyyy-MM-dd") + "<li/><li>corpId" + (b.corpId || " ") + "<li/>"),
														text4Cancel: null,
														text4Ok: null
													})
												}, function () {
													FX.Msg.toast({
														type: "warning",
														msg: ""
													})
												}, function () {
													c.setEnable(!0)
												})) : void FX.Msg.toast({
												type: "warning",
												msg: ""
											})
										}
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "textarea",
										text: b.description,
										enable: !1
									}
								]]
						},
						onOk: function () {
							d.rebuildContent({
								text4Ok: "",
								text4Cancel: "",
								height: 400,
								width: 430,
								contentWidget: {
									padding: 20,
									rowSize: [200],
									colSize: [350],
									items: [[{
												type: "label",
												text: "  "
											}
										]]
								},
								onOk: function () {
									FX.Utils.ajax({
										url: "/dashboard/app/" + b._id + "/accept"
									}, function (a) {
										FX.Utils.redirectTo("/dashboard")
									}, function () {
										FX.Msg.toast({
											type: "error",
											msg: " !"
										})
									})
								},
								onCancel: function () {
									return !1
								}
							})
						},
						onCancel: function () {
							d.rebuildContent({
								text4Ok: "",
								text4Cancel: "",
								height: 400,
								width: 430,
								contentWidget: {
									padding: 20,
									rowSize: [270],
									colSize: [390],
									items: [[{
												widgetName: "refuseReason",
												type: "textarea",
												waterMark: "  ",
												allowBlank: !1
											}
										]]
								},
								onOk: function () {
									var a = d.getWidgetByName("refuseReason");
									a.checkValidate() && FX.Utils.ajax({
										url: "/dashboard/app/" + b._id + "/refuse",
										data: {
											reason: a.getValue()
										}
									}, function (a) {
										FX.Utils.redirectTo("/dashboard")
									}, function () {
										FX.Msg.toast({
											type: "error",
											msg: " !"
										})
									})
								},
								onCancel: function () {
									return !1
								}
							})
						}
					});
				d.show()
			},
			_createUploadHelpDialog: function () {
				var a = new FX.Dialog({
						title: " ",
						width: 655,
						height: 305,
						onContentCreate: function (b) {
							b.append('<ul class="help-list"><li class="help-item">  </li><li class="help-item"></li><li class="help-item">  </li></ul><a class="x-btn style-green btn-close"></a>').addClass("help-dialog"),
							b.find(".btn-close").click(function () {
								a.close()
							})
						}
					});
				a.show()
			},
			_createMenuPane: function (b, c) {
				var d = this,
				e = this.options,
				f = a('<ul class="menu-pane"/>').append(a('<li class="menu-item" role="app-style-change"/>').append(a("<span/>").text(" "))).append(a('<li class="menu-item" role="app-name-change"/>').append(a("<span/>").text(""))).append(a('<li class="menu-item" role="app-copy"/>').append(a("<span/>").text("")));
				b.state === FX.CONST.APP_STATE.review ? f.append(a('<li class="menu-item app-audit" role="app-auditing"/>').append(a("<span/>").text(" "))) : (f.append(a('<li class="menu-item app-remove" role="app-remove"/>').append(a("<span/>").text(" ")).append('<div class="split-line"/>')), f.append(a('<li class="menu-item app-upload" role="app-upload" />').append(a("<span />").text(" ")).append(a('<i class="icon-help" />')))),
				e.audit && (f.append(a('<li class="menu-item"/>').append(a("<span/>").text(" ")).click(function () {
							d._createAuditDialog(b)
						})), f.append(a('<li class="menu-item"/>').append(a("<span/>").text("")).click(function () {
							d._createCategoryDialog(b)
						})));
				var g = a('<div class="app-menu-pane"/>').append(f);
				FX.Msg.bubble({
					anchor: c,
					contentHTML: g,
					text4Cancel: null,
					text4Ok: null,
					minWidth: 130,
					contentPadding: 0,
					dockPosition: "right",
					hAdjust: 25,
					edge: 200,
					scrollObj: "#body",
					onClose: function () {
						return d._clearSelectState(),
						!1
					}
				}),
				this._bindAppMenuEvents(g)
			},
			_clearSelectState: function () {
				this.$selectedItem.removeClass("item-selected chosen")
			},
			_removeMenuPane: function (a) {
				a.closest(".x-msg-bubble").remove()
			},
			_parseVersionCode: function (a) {
				return a + 1 + ".0"
			},
			_isPublishedApp: function (a) {
				return a.state !== FX.CONST.APP_STATE.private
			},
			getPublishedApps: function () {
				var a = this;
				return a.publishedApps || (a.publishedApps = [], FX.Utils.forEach(a.ownApps, function (b, c) {
						a._isPublishedApp(c) && a.publishedApps.push(c)
					})),
				a.publishedApps
			},
			_publishApp: function (b) {
				var c = this,
				d = new FX.ConfirmDialog({
						title: "",
						width: 430,
						height: 410,
						text4Ok: "",
						onContentCreate: null,
						contentWidget: {
							rowSize: [30, 30, 210],
							colSize: [60, 325],
							hgap: 15,
							vgap: 10,
							padding: 15,
							items: [[{
										type: "label",
										text: ""
									}, {
										type: "text",
										widgetName: "appName",
										allowBlank: !1,
										value: b.name
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "label",
										text: c._parseVersionCode(b.version)
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "textarea",
										widgetName: "appDescription",
										allowBlank: !1,
										value: b.description
									}
								]]
						},
						onOk: function () {
							var c = this.getWidgetByName("appName"),
							d = this.getWidgetByName("appDescription");
							if (c.checkValidate() && d.checkValidate()) {
								var e = c.getValue(),
								f = d.getValue();
								this.rebuildContent({
									text4Ok: "",
									text4Cancel: "",
									contentWidget: {
										rowSize: [280],
										colSize: ["auto"],
										padding: 15,
										items: [[{
													type: "label",
													customCls: "app-audit-tip",
													text: ", , !"
												}
											]]
									},
									onOk: function () {
										this.getOkBtn().setEnable(!1);
										var c = this;
										FX.Utils.ajax({
											url: "/dashboard/app/" + b._id + "/publish",
											data: {
												name: e,
												description: f
											}
										}, function () {
											c.rebuildContent({
												contentWidget: {
													rowSize: [280],
													colSize: ["100%"],
													padding: 15,
													items: [[a('<div class="app-audit-pane"/>').text(" ...")]]
												},
												text4Ok: "",
												text4Cancel: null,
												onOk: function () {
													c.close()
												}
											})
										}, function (a) {
											c.getOkBtn().setEnable(!0);
											var b = a.responseJSON;
											b && FX.Msg.toast({
												type: "error",
												msg: b.msg || "!"
											})
										})
									}
								})
							}
						}
					});
				d.show()
			}
		})
}
(jQuery), function (a) {
	FX.AppTemplatePane = FX.extend(FX.Widget, {
			MENU: {
				common: {
					text: "",
					categories: [FX.CONST.APP_CATE.OFFICE, FX.CONST.APP_CATE.HR, FX.CONST.APP_CATE.CRM, FX.CONST.APP_CATE.INVENTORY, FX.CONST.APP_CATE.STORE, FX.CONST.APP_CATE.PRODUCTION, FX.CONST.APP_CATE.UNIVERSAL_OTHER],
					apps: []
				},
				vertical: {
					text: "",
					categories: [FX.CONST.APP_CATE.LOGISTICS, FX.CONST.APP_CATE.RESTAURANT, FX.CONST.APP_CATE.IT, FX.CONST.APP_CATE.HOUSING, FX.CONST.APP_CATE.EDUCATION, FX.CONST.APP_CATE.MEDICINE, FX.CONST.APP_CATE.GOVERNMENT, FX.CONST.APP_CATE.VERTICAL_OTHER],
					apps: []
				},
				rank: {
					text: "",
					categories: [],
					apps: []
				},
				latest: {
					text: "",
					categories: [],
					apps: []
				}
			},
			_defaultConfig: function () {
				return a.extend(FX.AppTemplatePane.superclass._defaultConfig.apply(), {
					baseCls: "fx_app_template"
				})
			},
			_init: function () {
				FX.AppTemplatePane.superclass._init.apply(this, arguments),
				this.type = "common",
				this.keywords = "",
				this.category = this.MENU[this.type].categories[0],
				this.perPage = 20,
				this.currentPage = 1,
				this.pageCount = 1,
				this._renderMenu(),
				this._fetchData()
			},
			_fetchData: function () {
				var a = this,
				b = this.type,
				c = {};
				"query" === b ? c.keywords = this.keywords : "common" === b || "vertical" === b ? c.category = this.category : c.type = b,
				FX.Utils.ajax({
					url: "/dashboard/template/list",
					data: c
				}, function (c) {
					a.MENU[b].apps = c.apps.slice(0),
					a._initPage(),
					a._renderApps()
				})
			},
			_initPage: function () {
				var a = this.type;
				if (this.MENU[a].apps.length > this.perPage) {
					this.currentPage = 1;
					var b = this.MENU[a].apps.length % this.perPage;
					this.pageCount = parseInt(this.MENU[a].apps.length / this.perPage, 10),
					b > 0 && this.pageCount++
				}
			},
			_renderMenu: function () {
				var b = this,
				c = a('<div class="app-template-menu"/>').appendTo(this.element);
				this.$body = a('<div class="app-template-body"/>').appendTo(this.element),
				a('<div class="body-wrapper"/>').appendTo(this.$body);
				var d = a('<div class="menu-wrapper"/>').on("click", function (c) {
						var d = a(c.target).closest(".menu-item");
						if (d.length > 0) {
							var e = d.data("key");
							b.type = e,
							b.keywords = "",
							b.category = b.MENU[e].categories.length > 0 ? b.MENU[e].categories[0] : "",
							b.currentPage = 1,
							b.pageCount = 1,
							0 === b.MENU[e].apps.length ? b._fetchData() : (b._initPage(), b._renderApps())
						}
					}).appendTo(c);
				FX.Utils.forEach(this.MENU, function (c, e) {
					if ("query" !== c) {
						var f = c === b.type ? "active" : "";
						a('<li class="menu-item  ' + f + '">' + e.text + "</li>").data("key", c).appendTo(d)
					}
				});
				var e = a('<div class="menu-search"/>').appendTo(d);
				a('<input placeholder=""/>').keydown(function (a) {
					13 === a.keyCode && (FX.Utils.dt(FX.CONST.TRACKER.TEMP_SEARCH, this.value), b._doSearch(this.value))
				}).focus(function () {
					a(".search-icon").addClass("active")
				}).blur(function () {
					a(".search-icon").removeClass("active")
				}).appendTo(e),
				e.append('<i class="search-icon icon-search"></i>').click(function () {
					b._doSearch(e.children("input").val())
				})
			},
			_doSearch: function (a) {
				FX.Utils.isEmpty(a) || (this.MENU.query || (this.MENU.query = {
							categories: [],
							apps: []
						}), this.type = "query", this.keywords = a, this.currentPage = 1, this.pageCount = 1, this._fetchData())
			},
			_renderApps: function () {
				var b = this,
				c = this.type,
				d = a(".menu-item", ".app-template-menu");
				d.removeClass("active"),
				FX.Utils.forEach(d, function (b, d) {
					a(d).data("key") === c && a(d).addClass("active")
				});
				var e = a(".wrapper-app", this.$body);
				if (0 === e.length ? e = a('<div class="wrapper-app"/>').appendTo(this.$body.children(".body-wrapper")) : e.empty(), this.MENU[c].categories.length > 0) {
					var f = a('<div class="app-menu"/>').on("click", function (c) {
							var d = a(c.target).closest(".menu-category");
							d.length > 0 && (d.hasClass("active") || (a(".menu-category").removeClass("active"), d.addClass("active"), b.category = d.data("category"), b.currentPage = 1, b.pageCount = 1, b._fetchData()))
						}).appendTo(e);
					this.MENU[c].categories.map(function (c) {
						var d = b.category === c ? "active" : "";
						a('<div class="menu-category  ' + d + '">' + FX.CONST.APP_CATE_NAME[c] + "</div>").data("category", c).appendTo(f)
					})
				}
				"query" === c && a('<div class="app-menu"/>').text("" + this.keywords + "").appendTo(e);
				var g = a("<div/>").on("click", function (b) {
						var c = a(b.target).closest(".app-item");
						if (c.length > 0) {
							FX.Utils.dt(FX.CONST.TRACKER.APP_VIEW);
							var d = c.data("app"),
							e = a("<div/>");
							new FX.Platform({
								appId: d._id,
								renderEl: e
							});
							var f = new FX.Slider({
									title: d.name,
									content: e,
									btn4Left: {
										text: "",
										onClick: function () {
											FX.STATIC.APPID = d._id,
											FX.Utils.ajax({
												url: "/dashboard/template/fork",
												data: {
													forkId: FX.STATIC.APPID
												}
											}, function (a) {
												FX.Utils.dt(FX.CONST.TRACKER.APP_FORK),
												FX.Utils.redirectTo("/dashboard/app/" + a.appId + "/edit")
											}, function (a) {
												var b = a.responseJSON || {};
												FX.Vip.showUpgradeTip(b, "!")
											})
										}
									}
								});
							f.show()
						}
					}).appendTo(e);
				this._renderAppList(g),
				this.pageCount > 1 && this._renderPages(e, g)
			},
			_renderAppList: function (a) {
				var b = this.type,
				c = this;
				a.empty(),
				this.MENU[b].apps.length > 0 ? this.MENU[b].apps.map(function (b, d) {
					var e = (c.currentPage - 1) * c.perPage,
					f = e + c.perPage;
					d >= e && d < f && c._createAppItem(b).appendTo(a)
				}) : this._renderEmpty(a)
			},
			_renderPages: function (b, c) {
				for (var d = this, e = a('<ul class="app-page"/>').on("click", function (b) {
							var e = a(b.target).closest(".page-item");
							e.length > 0 && (a(".page-item").removeClass("active"), e.addClass("active"), d.currentPage = e.data("page"), d._renderAppList(c))
						}).appendTo(b), f = 1; f <= this.pageCount; f++) {
					var g = this.pageCount + 1 - f,
					h = g === this.currentPage ? "active" : "";
					a('<li class="page-item  ' + h + '">' + g + "</li>").data("page", g).appendTo(e)
				}
			},
			_createAppItem: function (b) {
				var c = a('<div class="app-item"/>').data("app", b),
				d = a('<a class="item-list"/>').appendTo(c);
				d.append('<div class="list-wrapper"><i class="icon-cover-' + b.icon + " color-" + b.color + '  wrapper-icon"></i></div>');
				var e = a('<div class="list-content"/>').appendTo(d),
				f = FX.Utils.isEmpty(b.name) ? "" : b.name,
				g = FX.Utils.isEmpty(b.publisher) ? "" : b.publisher,
				h = FX.Utils.isEmpty(b.description) ? "" : b.description;
				return h.length > 70 && (h = h.substring(0, 70) + "..."),
				e.append('<div class="content-name">' + f + "</div>"),
				e.append('<div class="content-publisher">' + g + "</div>"),
				e.append('<div class="content-description">' + h + "</div>"),
				c
			},
			_renderEmpty: function (b) {
				a('<div class="app-empty"></div>').appendTo(b)
			}
		})
}
(jQuery), function (a) {
	FX.AppSetPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.AppSetPane.superclass._defaultConfig.apply(), {
					baseCls: "fx_app_set"
				})
			},
			_init: function (a) {
				FX.AppSetPane.superclass._init.apply(this, arguments);
				var b = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/get_config"
				}, function (a) {
					b.app = a.app,
					b.entrys = a.entryList,
					b._initMenu(),
					b._initContent(),
					b._createSharePane()
				})
			},
			_initMenu: function () {
				var b = this,
				c = a('<div class="app-set-menu"><div class="menu-item active" role="app-share"><i class="icon-share"/><span></span></div><div class="menu-item" role="app-data"><i class="icon-password"/><span></span></div><div class="menu-item" role="app-ref"><i class="icon-app-ref"/><span></span></div><div class="menu-item" role="app-summary"><i class="icon-file"/><span></span></div><div/>').appendTo(this.element);
				FX.Utils.isWpsWebView() && c.children("[role=app-ref]").remove(),
				c.click(function (c) {
					var d = a(c.target).closest(".menu-item");
					if (d.length > 0 && !d.hasClass("active"))
						switch (d.addClass("active").siblings().removeClass("active"), b.$content.empty(), b.$btnPane.empty(), d.attr("role")) {
						case "app-summary":
							b._createSummaryPane();
							break;
						case "app-share":
							b._createSharePane();
							break;
						case "app-data":
							b._createDataAuthPane();
							break;
						case "app-ref":
							FX.Utils.dt(FX.CONST.TRACKER.APP_REF),
							b._createRefPane()
						}
				})
			},
			_initContent: function () {
				var b = a('<div class="app-set-content"/>').appendTo(this.element);
				this.$content = a('<div class="content-detail"/>').appendTo(b),
				this.$btnPane = a('<div class="content-btn"/>').appendTo(b)
			},
			_createSummaryPane: function () {
				var b = this,
				c = this.app;
				a('<div class="label"/>').text("").appendTo(this.$content);
				var d = new FX.TextEditor({
						renderEl: a("<div/>").appendTo(b.$content),
						width: 530,
						allowBlank: !1,
						value: c.name
					});
				b.$content.append('<div class="label"><span>URL</span><i class="icon-help"></i></div>');
				var e = b.$content.find(".icon-help").hover(function () {
						FX.UI.showPopover({
							position: "topLeft",
							anchor: e,
							content: a("<span>URL, URL</span>")
						})
					}, function () {
						FX.UI.closePopover()
					}),
				f = "";
				FX.Utils.isEmpty(c.urlTag) || (f = c.urlTag.split("/")[1]);
				var g = new FX.InputGroup({
						renderEl: a("<div />").appendTo(b.$content),
						prevEl: {
							type: "label",
							text: FX.CONFIG.HOST.SITE_HOST + "/u/" + FX.STATIC.user.username + "/"
						},
						inputEl: {
							type: "text",
							waterMark: "url",
							value: f,
							regex: /^[A-Za-z0-9_]+$/
						}
					});
				new FX.Button({
					renderEl: a('<div class="as-submit-btn"/>').appendTo(this.$btnPane),
					style: "green",
					text: "",
					width: 120,
					onClick: function () {
						if (!d.checkValidate())
							return void FX.Msg.toast({
								type: "warning",
								msg: ""
							});
						if (!g.checkValidate())
							return void FX.Msg.toast({
								type: "warning",
								msg: "URL"
							});
						var e = {
							name: d.getValue()
						},
						f = g.getValue();
						c.urlTag ? c.urlTag.split("/")[1] != f && (e.urlTag = f) : f && (e.urlTag = f),
						b.doSaveApp(e, function (b) {
							c.name = b.name,
							a("#app-name").text(b.name),
							c.urlTag = b.urlTag
						})
					}
				})
			},
			_createRefPane: function () {
				var b = new FX.EntrySelectPane({
						renderEl: a('<div class="as-entry-select"/>').appendTo(this.$content)
					}),
				c = new FX.Button({
						renderEl: a('<div class="as-submit-btn"/>').appendTo(this.$btnPane),
						style: "green",
						text: "",
						width: 120,
						onClick: function () {
							var a = FX.Utils.createMask(b.element, {
									isLight: !0
								});
							c.setEnable(!1),
							FX.Utils.ajax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/set_ref",
								data: {
									refFormList: b.getItems()
								}
							}, function () {
								FX.Msg.toast({
									type: "success",
									msg: "!"
								})
							}, function (a) {
								FX.Vip.showUpgradeTip(a.responseJSON, "")
							}, function () {
								a.remove(),
								c.setEnable(!0)
							})
						}
					})
			},
			_createSharePane: function () {
				var b = this;
				this.diffEntryAuth = {};
				var c = [];
				FX.Utils.forEach(this.entrys, function (a, b) {
					c.push({
						id: b.entryId,
						pId: b.parent,
						name: b.name,
						type: b.type
					})
				});
				var d = a("<div/>").appendTo(this.$content),
				e = null,
				f = new FX.Tree({
						renderEl: d,
						customCls: "entry-list x-entry-tree",
						Nodes: c,
						setting: {
							data: {
								simpleData: {
									enable: !0
								}
							},
							callback: {
								onNodeCreated: function (a, b) {
									var c = this.getDOMBySelector(b, "_switch");
									e || (e = this.getDOMBySelector(b, "_a")),
									c.removeClass("noline_docu"),
									"form" === b.type ? c.addClass("icon-form") : "report" === b.type ? c.addClass("icon-report") : c.removeClass("noline_close").addClass("icon-folder-close")
								},
								beforeExpand: function (a) {
									var b = this.getDOMBySelector(a, "_switch");
									b.addClass("icon-folder-open")
								},
								onExpand: function (a, b) {
									var c = this.getDOMBySelector(b, "_switch");
									c.addClass("icon-folder-open")
								},
								beforeCollapse: function (a) {
									var b = this.getDOMBySelector(a, "_switch");
									b.addClass("icon-folder-close")
								},
								onCollapse: function (a, b) {
									var c = this.getDOMBySelector(b, "_switch");
									c.addClass("icon-folder-close")
								},
								onClick: function (c, d) {
									this.expandNode(d, !d.open, !1, !1, !0);
									var e = a(".as-department-tree");
									if (b.oriEntryAuth)
										b.currentEntry = d.id, b.departTree.rebuild();
									else {
										var f = [];
										FX.Utils.forEach(b.entrys, function (a, b) {
											f.push(b.entryId)
										});
										var g = a('<div class="mask"/>').appendTo(e);
										FX.Utils.ajax({
											url: "/dashboard/app/" + FX.STATIC.APPID + "/entry_auth/get",
											data: {
												ids: f
											}
										}, function (a) {
											b.oriEntryAuth = a.entryUserMap || {},
											b.currentEntry = d.id,
											b.departTree.rebuild()
										}, function () {
											FX.Msg.toast({
												type: "error",
												msg: ""
											})
										}, function () {
											g.remove()
										})
									}
								}
							}
						}
					}),
				g = a('<div class="entry-list as-department-tree right-tree"/>').appendTo(this.$content);
				this._createEntryAuthDepartmentTree(g, f);
				var h = new FX.Button({
						renderEl: a('<div class="as-submit-btn"/>').appendTo(this.$btnPane),
						style: "green",
						text: "",
						width: 120,
						onClick: function () {
							var a = FX.Utils.createMask(g, {
									isLight: !0
								});
							h.setEnable(!1),
							FX.Utils.ajax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/entry_auth/set",
								data: {
									entryAuth: b.diffEntryAuth
								}
							}, function () {
								FX.Msg.toast({
									type: "success",
									msg: "!"
								}),
								FX.Utils.forEach(b.diffEntryAuth, function (a, c) {
									b.oriEntryAuth[a] = c
								}),
								b.diffEntryAuth = {}
							}, function () {
								FX.Msg.toast({
									type: "error",
									msg: "!"
								})
							}, function () {
								a.remove(),
								h.setEnable(!0)
							})
						}
					});
				e && e.click()
			},
			_getFormList: function (a) {
				var b = this;
				this.formList ? a && a(this.formList) : FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/fields/get",
					data: {
						ignoreRefApp: !0
					}
				}, function (c) {
					b.formList = c,
					a && a(b.formList)
				})
			},
			_createDataAuthPane: function () {
				var b = this;
				this.dataAuth = {};
				var c = a('<div class="entry-list as-department-tree"/>').appendTo(this.$content),
				d = a('<div class="entry-list as-data-auth"/>').append(a('<div class="hint" />').append(a('<div class="hint-icon" />')).append(a('<div class="hint-content" />').text(" "))).appendTo(this.$content);
				this._createDataAuthDepartmentTree(c, d);
				var e = new FX.Button({
						renderEl: a('<div class="as-submit-btn"/>').appendTo(this.$btnPane),
						style: "green",
						text: "",
						width: 120,
						onClick: function () {
							var a = FX.Utils.createMask(d, {
									isLight: !0
								});
							e.setEnable(!1),
							FX.Utils.ajax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/data_auth/set",
								data: {
									dataAuth: b.dataAuth
								}
							}, function () {
								FX.Msg.toast({
									type: "success",
									msg: "!"
								}),
								b.dataAuth = {}
							}, function () {
								FX.Msg.toast({
									type: "error",
									msg: "!"
								})
							}, function () {
								a.remove(),
								e.setEnable(!0)
							})
						}
					})
			},
			doSaveApp: function (a, b) {
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/update",
					data: a
				}, function (a) {
					FX.Msg.toast({
						type: "success",
						msg: "!"
					}),
					b && b(a.app)
				}, function (a) {
					var b = a.responseJSON || {};
					FX.Msg.toast({
						type: "error",
						msg: b.msg || "!"
					})
				})
			},
			_createDataAuthList: function (a, b, c) {
				var d = this;
				this._getFormList(function (e) {
					b.empty(),
					new FX.ConfigPane({
						renderEl: b,
						items: [{
								widget: {
									type: "filterpane",
									fields: c,
									entryList: e,
									needFormName: !0,
									onStopEdit: function () {
										var b = this.getValue();
										FX.Utils.forEach(d.dataAuth[a], function (a) {
											b[a] || (b[a] = null)
										}),
										d.dataAuth[a] = b
									}
								}
							}
						]
					})
				})
			},
			_createEntryAuthDepartmentTree: function (b, c) {
				var d = this;
				this.departTree = new FX.MemberSelectPane({
						renderEl: a("<div/>").appendTo(b),
						editable: !0,
						departmentEnable: !0,
						memberEnable: !0,
						tip: "",
						beforeRebuild: function () {
							d.diffEntryAuth && d.oriEntryAuth && (this.value = d.diffEntryAuth[d.currentEntry] || d.oriEntryAuth[d.currentEntry] || [])
						},
						onCheck: function () {
							var a = c.getSelectedNodes()[0];
							return a ? void(d.diffEntryAuth[a.id] = this.getValue()) : void FX.Msg.toast({
								type: "warning",
								msg: ""
							})
						}
					})
			},
			_createDataAuthDepartmentTree: function (a, b) {
				var c = this;
				new FX.MemberSelectPane({
					renderEl: a,
					editable: !0,
					tip: "",
					listEnable: !1,
					checkEnable: !1,
					departmentEnable: !0,
					memberEnable: !0,
					onClick: function (a, d) {
						var e = d._id,
						f = c.dataAuth[e];
						f ? c._createDataAuthList(e, b, f) : FX.Utils.ajax({
							url: "/dashboard/app/" + FX.STATIC.APPID + "/member/" + e + "/data_auth/get"
						}, function (a) {
							var d = {};
							FX.Utils.forEach(a.memberAuth, function (a, b) {
								d[b.entryId] = b.dataAuth
							}),
							c.dataAuth[e] = d,
							c._createDataAuthList(e, b, d)
						})
					}
				})
			}
		}),
	a.shortcut("appsetpane", FX.AppSetPane)
}
(jQuery), function (a) {
	FX.FlowListPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowListPane.superclass._defaultConfig.call(), {
					baseCls: "fx_flow_list",
					itemsPerPage: 20,
					mode: "modal",
					items: [],
					url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/query_data",
					listType: "todo",
					onItemClick: null,
					onAsyncSuccess: null
				})
			},
			_init: function () {
				FX.FlowListPane.superclass._init.apply(this, arguments),
				this.page = 0,
				this.refresh()
			},
			refresh: function () {
				var a = this,
				b = this.options,
				c = {
					type: b.listType,
					skip: this.page * b.itemsPerPage,
					limit: b.itemsPerPage
				};
				this.element.empty();
				var d = FX.Utils.createMask(this.element, {
						hasLoader: !0
					});
				FX.Utils.dataAjax({
					url: b.url,
					data: c
				}, function (c, d) {
					return FX.Utils.applyFunc(a, b.onAsyncSuccess, [c], !1),
					b.items = c.data,
					a.nameMap = c.nameMap,
					a.count = c.count,
					c.count > 0 && a.page > 0 && b.items.length <= 0 ? (a.page--, void a.refresh()) : (a.element.empty(), b.items.length <= 0 ? void a._createEmptyTip() : (a._createFlowList(), void a._createPagination()))
				}, null, function () {
					d.remove()
				})
			},
			_createEmptyTip: function () {
				var b = this.options,
				c = a('<div class="flow-empty"/>').appendTo(this.element);
				switch (b.listType) {
				case "todo":
					c.addClass("todo"),
					c.append(a("<span/>").text(""));
					break;
				case "part":
					c.addClass("participated"),
					c.append(a("<span/>").text(""));
					break;
				case "create":
					c.addClass("created"),
					c.append(a("<span/>").text(""))
				}
			},
			_createFlowList: function () {
				var b = this.options,
				c = this;
				this.$flowList = a('<ul class="flow-list ' + b.mode + '"/>').appendTo(this.element),
				FX.Utils.forEach(b.items, function (a, b) {
					c._formatItem(b),
					c._createFlowItem(b)
				});
				var d = function (d) {
					var e = a(d.target).closest(".flow-item");
					if (e && e.length > 0) {
						var f = e.data("data");
						FX.Utils.applyFunc(c, b.onItemClick, [f], !1),
						c._editData(f)
					}
				};
				this.$flowList.unbind("click", d),
				this.$flowList.bind("click", d)
			},
			_createFlowItem: function (b) {
				var c = this.options,
				d = this,
				e = FX.Utils.getColorNumber(b.entryId),
				f = a('<li class="flow-item color-border-' + e + '"/>').appendTo(this.$flowList).data("data", b),
				g = a('<div class="item-title"/>').appendTo(f),
				h = a('<ul class="item-content"/>').appendTo(f),
				i = a('<div class="data-icon"/>').append('<i class="icon-widget-user"/>').appendTo(h),
				j = "",
				k = "";
				"todo" === c.listType ? (j = b.entryName, j += b.hasMultiNodes ? "-" : "-" + b.flowName, k = b.updateTime, a('<li class="item-data"/>').append(a('<span class="data-label"/>').text("")).append(a('<span class="data-value"/>').text(b.creator)).appendTo(h)) : (j = b.entryName, k = FX.Utils.isArray(b.states) && b.states.length > 1 ? "" : b.states.join(","), a('<li class="item-data"/>').append(a('<span class="data-label"/>').text("")).append(a('<span class="data-value"/>').text(b.chargers)).appendTo(h)),
				g.append(a('<span class="title-left"/>').text(j)).append(a('<span class="title-right"/>').text(k));
				var l = d3.select(i[0]).append("svg").attr("width", 20).attr("height", 100),
				m = 15,
				n = 10,
				o = "#88b7ea";
				FX.Utils.forEach(b.data, function (b, c) {
					l.append("line").attr("x1", n).attr("y1", (b > 0 ? m : m + 6) + 25 * b).attr("x2", n).attr("y2", m + 25 * (b + 1)).attr("stroke", o),
					l.append("circle").attr("cx", n).attr("cy", 36 + 25 * b).attr("r", 4).attr("fill", o),
					a('<li class="item-data"/>').append(a('<span class="data-label"/>').text(c.label)).append(a('<span class="data-value"/>').text(d._formatData(c))).appendTo(h)
				})
			},
			_formatItem: function (a) {
				var b = this,
				c = this.options;
				if ("todo" === c.listType)
					a.creator = this.nameMap[a.creator], a.updateTime = FX.Utils.date2Str(new Date(a.updateTime), "yyyy-MM-dd HH:mm:ss");
				else {
					var d = [];
					FX.Utils.forEach(a.chargers, function (a, c) {
						d.push(b.nameMap[c])
					}),
					a.chargers = d.join(",")
				}
			},
			_formatData: function (a) {
				var b = this;
				if (FX.Utils.isEmpty(a.value))
					return "";
				switch (a.type) {
				case "address":
				case "location":
					return FX.Utils.address2Str(a.value, "", "pcda");
				case "datetime":
					return FX.Utils.date2Str(new Date(a.value), a.format);
				case "user":
				case "dept":
					return this.nameMap[a.value];
				case "usergroup":
				case "deptgroup":
					var c = [];
					return FX.Utils.forEach(a.value, function (a, d) {
						c.push(b.nameMap[d])
					}),
					c.join(",");
				default:
					return a.value
				}
			},
			hasMore: function () {
				var a = this.options;
				return (this.page + 1) * a.itemsPerPage < this.count
			},
			_createPagination: function () {
				this.footer = a('<div class="flow-footer"/>').appendTo(this.element);
				var b = this,
				c = this.options;
				new FX.Pagination({
					renderEl: a("<div />").appendTo(this.footer),
					limit: c.itemsPerPage,
					count: this.count,
					curPage: this.page + 1,
					onChangePage: function (a, c) {
						b.page = a - 1,
						b.refresh()
					}
				})
			},
			_editData: function (b) {
				var c = this,
				d = this.options;
				this.$mask || (this.$mask = FX.Utils.createMask(a("body"), {
							isLight: !0,
							isModal: !0
						})),
				this.form = new FX.FormEditPane({
						renderEl: a('<div class="x-shadow-content"/>').appendTo(this.$mask),
						width: 920,
						height: "100%",
						dataId: b._id,
						entryId: b.entryId,
						flowType: d.listType,
						flowId: b.flowId,
						onSuccess: function () {
							c._close(),
							c.refresh()
						},
						onFail: function () {
							c._close()
						},
						onCancel: function () {
							c._close()
						}
					})
			},
			_close: function () {
				this.$mask.remove(),
				this.$mask = null,
				this.form = null
			}
		}),
	a.shortcut("flowlistpane", FX.FlowListPane)
}
(jQuery), function (a) {
	FX.FlowConfigPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowConfigPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_config",
					entryId: "",
					entryName: "",
					entryItems: [],
					flow: null,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.FlowConfigPane.superclass._init.apply(this, arguments),
				this._createConfigList()
			},
			_getWidgets: function () {
				var a = [],
				b = [];
				return FX.Utils.forEach(this.options.entryItems, function (c, d) {
					if (d.widget)
						switch (d.widget.type) {
						case "user":
						case "usergroup":
							a.push({
								id: d.widget.widgetName,
								name: d.label,
								type: "user"
							});
							break;
						case "dept":
						case "deptgroup":
							b.push({
								id: d.widget.widgetName,
								name: d.label,
								type: "dept"
							})
						}
				}), {
					user: a,
					dept: b
				}
			},
			_createConfigList: function () {
				var b = this,
				c = this.options,
				d = c.flow,
				e = [],
				f = [];
				if (FX.Utils.forEach(c.entryItems, function (a, b) {
						var c = FX.Utils.getFieldAttr(b);
						c && f.push(c)
					}), d.flowId === FX.CONST.WORKFLOW.START_FLOW_ID) {
					var g = !0;
					FX.Utils.isEmpty(d.printId) && (g = !1),
					e = [{
							label: "",
							widget: {
								type: "text",
								widgetName: "flowNameText",
								allowBlank: !1,
								value: d.name,
								onStopEdit: function (a) {
									a && (d.name = this.getValue(), FX.Utils.applyFunc(b, c.onAfterEdit, [d, d.name], !1))
								}
							},
							splitLine: !0
						}, {
							label: " ",
							widget: {
								type: "combo",
								items: [{
										text: "",
										value: "any"
									}, {
										text: "",
										value: "validate"
									}
								],
								searchable: !1,
								allowBlank: !1,
								width: 288,
								value: FX.Utils.isObjectEmpty(d.validator) ? "any" : "validate",
								onAfterItemSelect: function () {
									var a = this.getValue();
									switch (a) {
									case "any":
										d.validator = [],
										j.getWidgetByName("flowValidatorpane").setVisible(!1),
										FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1);
										break;
									case "validate":
										j.getWidgetByName("flowValidatorpane").setVisible(!0)
									}
								}
							}
						}, {
							widget: {
								visible: !FX.Utils.isObjectEmpty(d.validator),
								type: "validatorpane",
								validator: d.validator,
								entryId: c.entryId,
								widgetName: "flowValidatorpane",
								entryList: [{
										entryId: c.entryId,
										name: c.entryName,
										fields: f
									}
								],
								onAfterEdit: function () {
									d.validator = this.getValue(),
									FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
								}
							}
						}, {
							label: "",
							widget: {
								type: "checkbox",
								text: "",
								value: g,
								onStateChange: function (a) {
									var e = j.getWidgetByName("flowNodePrint");
									e.setVisible(a),
									a ? d.printId = "system" : d.printId = null,
									FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
								}
							}
						}, {
							widget: {
								type: "button",
								style: "white",
								text: "",
								height: 30,
								visible: g,
								widgetName: "flowNodePrint",
								onClick: function () {
									new FX.ConfirmDialog({
										width: 600,
										height: 570,
										contentWidget: {
											rowSize: [450],
											colSize: [570],
											padding: 15,
											items: [[{
														widgetName: "ptrange",
														type: "printtemplateselectpane",
														appId: d.appId,
														formId: d.entryId,
														editable: !0,
														value: d.printId
													}
												]]
										},
										onOk: function () {
											var a = this.getWidgetByName("ptrange");
											d.printId = a.getValue(),
											FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1),
											this.close()
										}
									}).show()
								}
							}
						}, {
							label: "",
							widget: {
								type: "widgetlistpane",
								widgetName: "authListPane",
								items: c.entryItems,
								value: d.optAuth,
								onAfterEdit: function () {
									d.optAuth = this.getValue(),
									FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
								}
							}
						}
					]
				} else if (d.type === FX.CONST.WORKFLOW.FLOWTYPE.CC) {
					var g = !0;
					FX.Utils.isEmpty(d.printId) && (g = !1),
					e = [{
							label: "",
							widget: {
								type: "text",
								widgetName: "flowNameText",
								allowBlank: !1,
								value: d.name,
								onStopEdit: function (a) {
									a && (d.name = this.getValue(), FX.Utils.applyFunc(b, c.onAfterEdit, [d, d.name], !1))
								}
							},
							splitLine: !0
						}, {
							label: "",
							widget: {
								type: "memberselectpane",
								msg: "",
								widgetName: "ccUserComboCheck",
								dynamicEnable: !0,
								dynamicWidgets: this._getWidgets(),
								dynamicName: "",
								jsonValue: d.ccUsers || {},
								allowBlank: !1,
								hasAdmin: !0,
								onStopEdit: function (a) {
									d.ccUsers = a,
									FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
								}
							}
						}, {
							label: "",
							widget: {
								type: "checkbox",
								text: "",
								value: g,
								onStateChange: function (a) {
									var e = j.getWidgetByName("flowNodePrint");
									e.setVisible(a),
									a ? d.printId = "system" : d.printId = null,
									FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
								}
							}
						}, {
							widget: {
								type: "button",
								style: "white",
								text: "",
								height: 30,
								visible: g,
								widgetName: "flowNodePrint",
								onClick: function () {
									new FX.ConfirmDialog({
										width: 600,
										height: 570,
										contentWidget: {
											rowSize: [450],
											colSize: [570],
											padding: 15,
											items: [[{
														widgetName: "ptrange",
														type: "printtemplateselectpane",
														appId: d.appId,
														formId: d.entryId,
														editable: !0,
														value: d.printId
													}
												]]
										},
										onOk: function () {
											var a = this.getWidgetByName("ptrange");
											d.printId = a.getValue(),
											FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1),
											this.close()
										}
									}).show()
								}
							}
						}, {
							label: "",
							widget: {
								type: "widgetlistpane",
								widgetName: "authListPane",
								items: c.entryItems,
								value: d.optAuth,
								editable: !1,
								onAfterEdit: function () {
									d.optAuth = this.getValue(),
									FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
								}
							}
						}
					]
				} else {
					var h;
					h = d.comment && d.comment.required ? "required" : d.comment && d.comment.enable ? "enable" : "disable";
					var i = !1;
					FX.Utils.forEach(d.ccUsers, function (a, b) {
						return FX.Utils.isArray(b) && b.length > 0 ? (i = !0, !1) : FX.Utils.isNumber(b) && 0 !== b ? (i = !0, !1) : void 0
					});
					var g = !0;
					FX.Utils.isEmpty(d.printId) && (g = !1),
					e = [{
							label: "",
							widget: {
								type: "text",
								widgetName: "flowNameText",
								allowBlank: !1,
								value: d.name,
								onStopEdit: function (a) {
									a && (d.name = this.getValue(), FX.Utils.applyFunc(b, c.onAfterEdit, [d, d.name], !1))
								}
							},
							splitLine: !0
						}, {
							widget: {
								type: "segment",
								customCls: "cfg_segment",
								items: [{
										text: "",
										value: "base"
									}, {
										text: "",
										value: "more"
									}
								],
								value: "base",
								onAfterItemSelect: function () {
									var a = this.getValue();
									switch (a) {
									case "base":
										j.getWidgetByName("gradeFlowAttrConf").setVisible(!1),
										j.getWidgetByName("baseFlowAttrConf").setVisible(!0);
										break;
									case "more":
										j.getWidgetByName("gradeFlowAttrConf").setVisible(!0),
										j.getWidgetByName("baseFlowAttrConf").setVisible(!1)
									}
								}
							}
						}, {
							widget: {
								type: "configpane",
								widgetName: "baseFlowAttrConf",
								items: [{
										label: "",
										widget: {
											type: "memberselectpane",
											msg: "",
											widgetName: "chargerComboCheck",
											dynamicEnable: !0,
											dynamicWidgets: this._getWidgets(),
											dynamicName: "",
											jsonValue: d.chargers || {},
											allowBlank: !1,
											hasAdmin: !0,
											onStopEdit: function (a) {
												d.chargers = a,
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}, {
										widget: {
											type: "checkbox",
											text: "",
											value: i,
											onStateChange: function (a) {
												var e = j.getWidgetByName("ccUserComboCheck");
												e.setVisible(a),
												a || (d.ccUsers = null, FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1))
											}
										}
									}, {
										widget: {
											type: "memberselectpane",
											msg: "",
											widgetName: "ccUserComboCheck",
											dynamicEnable: !0,
											dynamicWidgets: this._getWidgets(),
											dynamicName: "",
											jsonValue: d.ccUsers || {},
											allowBlank: !1,
											hasAdmin: !0,
											visible: i,
											onStopEdit: function (a) {
												d.ccUsers = a,
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}, {
										label: "",
										widget: {
											type: "widgetlistpane",
											widgetName: "authListPane",
											items: c.entryItems,
											value: d.optAuth,
											onAfterEdit: function () {
												d.optAuth = this.getValue(),
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}
								]
							}
						}, {
							widget: {
								type: "configpane",
								widgetName: "gradeFlowAttrConf",
								visible: !1,
								items: [{
										tooltip: a("<span/>").text(""),
										label: "",
										widget: {
											type: "segment",
											items: [{
													text: "",
													value: "disable"
												}, {
													text: "",
													value: "enable"
												}, {
													text: "",
													value: "required"
												}
											],
											value: h,
											onAfterItemSelect: function () {
												switch (this.getValue()) {
												case "required":
													d.comment = a.extend(d.comment, {
															required: !0
														}),
													d.comment = a.extend(d.comment, {
															enable: !0
														});
													break;
												case "enable":
													d.comment = a.extend(d.comment, {
															enable: !0
														}),
													d.comment = a.extend(d.comment, {
															required: !1
														});
													break;
												case "disable":
													d.comment = a.extend(d.comment, {
															enable: !1
														}),
													d.comment = a.extend(d.comment, {
															required: !1
														})
												}
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}, {
										label: "",
										widget: {
											rowSize: [20],
											colSize: ["auto", 20],
											type: "tablecontainer",
											items: [[{
														type: "checkbox",
														text: "",
														value: d.allowClose,
														widgetName: "allowClose",
														onStateChange: function (a) {
															d.allowClose = a,
															FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
														}
													}, {
														type: "tooltippane",
														text: ""
													}
												]]
										}
									}, {
										widget: {
											rowSize: [30],
											colSize: ["auto", 120],
											vgap: 0,
											type: "tablecontainer",
											items: [[{
														type: "checkbox",
														text: "",
														customCls: "allow-back",
														value: d.backRule !== FX.CONST.WORKFLOW.BACKRULE.DISALLOW,
														widgetName: "allowBack",
														onStateChange: function (a) {
															var e = j.getWidgetByName("backNode");
															a ? (e.setEnable(!0), d.backRule = e.getValue()) : (d.backRule = FX.CONST.WORKFLOW.BACKRULE.DISALLOW, e.setEnable(!1)),
															FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
														}
													}, {
														type: "combo",
														widgetName: "backNode",
														searchable: !1,
														allowBlank: !1,
														enable: d.backRule !== FX.CONST.WORKFLOW.BACKRULE.DISALLOW,
														items: [{
																value: FX.CONST.WORKFLOW.BACKRULE.PARENT_NODE,
																text: ""
															}, {
																value: FX.CONST.WORKFLOW.BACKRULE.START_NODE,
																text: ""
															}
														],
														value: d.backRule || FX.CONST.WORKFLOW.BACKRULE.PARENT_NODE,
														onStopEdit: function () {
															d.backRule = this.getValue(),
															FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
														}
													}
												]]
										}
									}, {
										label: "",
										widget: {
											type: "checkbox",
											text: "",
											value: g,
											onStateChange: function (a) {
												var e = j.getWidgetByName("flowNodePrint");
												e.setVisible(a),
												a ? d.printId = "system" : d.printId = null,
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}, {
										widget: {
											type: "button",
											style: "white",
											text: "",
											width: 240,
											height: 30,
											visible: g,
											widgetName: "flowNodePrint",
											onClick: function () {
												new FX.ConfirmDialog({
													width: 600,
													height: 570,
													contentWidget: {
														rowSize: [450],
														colSize: [570],
														padding: 15,
														items: [[{
																	widgetName: "ptrange",
																	type: "printtemplateselectpane",
																	appId: d.appId,
																	formId: d.entryId,
																	editable: !0,
																	value: d.printId
																}
															]]
													},
													onOk: function () {
														var a = this.getWidgetByName("ptrange");
														d.printId = a.getValue(),
														FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1),
														this.close()
													}
												}).show()
											}
										}
									}, {
										label: " ",
										widget: {
											type: "combo",
											items: [{
													text: "",
													value: "any"
												}, {
													text: "",
													value: "validate"
												}
											],
											searchable: !1,
											allowBlank: !1,
											value: FX.Utils.isObjectEmpty(d.validator) ? "any" : "validate",
											onAfterItemSelect: function () {
												var a = this.getValue();
												switch (a) {
												case "any":
													d.validator = [],
													j.getWidgetByName("flowValidatorpane").setVisible(!1),
													FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1);
													break;
												case "validate":
													j.getWidgetByName("flowValidatorpane").setVisible(!0)
												}
											}
										}
									}, {
										widget: {
											visible: !FX.Utils.isObjectEmpty(d.validator),
											width: 240,
											type: "validatorpane",
											validator: d.validator,
											entryId: c.entryId,
											widgetName: "flowValidatorpane",
											entryList: [{
													entryId: c.entryId,
													name: c.entryName,
													fields: f
												}
											],
											onAfterEdit: function () {
												d.validator = this.getValue(),
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}, {
										label: "",
										widget: {
											type: "combo",
											allowBlank: !1,
											searchable: !1,
											items: [{
													value: 1,
													text: ""
												}, {
													value: 0,
													text: ""
												}
											],
											value: 0 === d.approval ? 0 : 1,
											onAfterItemSelect: function () {
												d.approval = this.getValue(),
												FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1)
											}
										}
									}
								]
							}
						}
					]
				}
				var j = new FX.ConfigPane({
						renderEl: a("<div/>").appendTo(this.element),
						items: e
					});
				if (c.isNew && !d.optAuth) {
					var k = j.getWidgetByName("authListPane");
					k && (d.optAuth = k.getValue(), FX.Utils.applyFunc(b, c.onAfterEdit, [d], !1))
				}
			}
		}),
	a.shortcut("flowconfigpane", FX.FlowConfigPane)
}
(jQuery), function (a) {
	FX.FlowVersionPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowVersionPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_version",
					entryId: "",
					entryName: "",
					versions: [],
					designVer: [],
					flowVer: "",
					currentVersion: "",
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.FlowVersionPane.superclass._init.apply(this, arguments),
				this.selectVersion = this.options.currentVersion,
				this._createManageBtn(),
				this._createVersionList(),
				this._bindVersionListEvent()
			},
			_createManageBtn: function () {
				var b = this,
				c = a('<div class="manage-pane"/>').appendTo(this.element);
				new FX.Button({
					renderEl: a('<div class="manage-btn"/>').appendTo(c),
					iconCls: "icon-add",
					text: " ",
					width: 120,
					height: 30,
					onClick: function () {
						b._createVersion()
					}
				}),
				new FX.Button({
					renderEl: a('<div class="manage-btn"/>').appendTo(c),
					iconCls: "icon-release",
					style: "green",
					text: "",
					width: 80,
					height: 30,
					onClick: function () {
						b._releaseVersion()
					}
				}),
				new FX.Button({
					renderEl: a('<div class="manage-btn"/>').appendTo(c),
					iconCls: "icon-trasho",
					style: "red",
					text: " ",
					width: 80,
					height: 30,
					onClick: function () {
						b._removeVersion()
					}
				})
			},
			_releaseVersion: function () {
				if (!this.selectVersion)
					return void FX.Msg.toast({
						type: "warning",
						msg: ""
					});
				var a = this,
				b = this.options,
				c = FX.Utils.createMask(this.element, {
						hasLoader: !0,
						isLight: !0
					});
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + b.entryId + "/workflow/update",
					data: {
						version: this.selectVersion,
						inuse: !0
					}
				}, function (c) {
					b.flowVer = a.selectVersion,
					a.designMap[a.selectVersion] > -1 && b.designVer.splice(a.designMap[a.selectVersion], 1),
					a._createVersionList(),
					FX.Utils.applyFunc(a, b.onAfterEdit, [{
								flowVer: b.flowVer,
								designVer: b.designVer
							}, !0], !1)
				}, function () {
					FX.Msg.toast({
						type: "error",
						msg: ""
					})
				}, function () {
					c.remove()
				})
			},
			_createVersion: function () {
				var a = this,
				b = this.options,
				c = FX.Utils.createMask(this.element, {
						hasLoader: !0,
						isLight: !0
					});
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + b.entryId + "/workflow/create",
					data: {
						version: this.selectVersion
					}
				}, function (c) {
					var d = c.newVersion.toString();
					b.versions.push(d),
					b.designVer.push(d),
					a.selectVersion = d,
					a._createVersionList(),
					FX.Utils.applyFunc(a, b.onAfterEdit, [{
								versions: b.versions,
								designVer: b.designVer
							}, !0], !1)
				}, function () {
					FX.Msg.toast({
						type: "error",
						msg: " "
					})
				}, function () {
					c.remove()
				})
			},
			_removeVersion: function () {
				var a = this,
				b = this.options;
				if (!this.selectVersion)
					return void FX.Msg.toast({
						type: "warning",
						msg: " "
					});
				if (b.flowVer === this.selectVersion)
					return void FX.Msg.toast({
						type: "warning",
						msg: "  "
					});
				var c = FX.Utils.createMask(this.element, {
						hasLoader: !0,
						isLight: !0
					});
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + b.entryId + "/workflow/remove",
					data: {
						version: this.selectVersion
					}
				}, function (c) {
					a.designMap[a.selectVersion] > -1 && b.designVer.splice(a.designMap[a.selectVersion], 1);
					var d = a.versionMap[a.selectVersion];
					d > -1 && (b.versions.splice(d, 1), a.selectVersion = b.versions[Math.min(d, b.versions.length - 1)]),
					a._createVersionList(),
					FX.Utils.applyFunc(a, b.onAfterEdit, [{
								versions: b.versions,
								designVer: b.designVer
							}, !1], !1)
				}, function (a) {
					var b = a.responseJSON || {},
					c = b.msg || " ";
					FX.Msg.toast({
						type: "error",
						msg: c
					})
				}, function () {
					c.remove()
				})
			},
			_bindVersionListEvent: function () {
				var b = this,
				c = this.options;
				this.$versionList.bind("click", function (d) {
					var e = a(d.target).closest(".version-item");
					if (e && e.length > 0) {
						e.addClass("select").siblings().removeClass("select"),
						b.selectVersion = e.data("version");
						var f = a(d.target).closest(".version-name");
						f.length > 0 && FX.Utils.applyFunc(b, c.onAfterEdit, [{}, !0], !1)
					}
				})
			},
			_createVersionList: function () {
				var b = this,
				c = this.options;
				this.$versionList ? this.$versionList.empty() : this.$versionList = a('<ul class="version-list"/>').appendTo(this.element),
				this.designMap = {},
				this.versionMap = {},
				c.designVer && FX.Utils.forEach(c.designVer, function (a, c) {
					b.designMap[c] = a
				}),
				FX.Utils.forEach(c.versions, function (d, e) {
					var f = a('<li class="version-item x-radio"/>').append(a('<i class="icon-blank"/>')).append(a('<span class="version-name"/>').text(c.entryName + " (V" + e + ".0)")).prependTo(b.$versionList).data("version", e);
					b.versionMap[e] = d,
					c.flowVer === e ? f.append(a('<span class="version-type version-current"/>').text("")) : b.designMap[e] > -1 ? f.append(a('<span class="version-type version-design"/>').text("")) : f.append(a('<span class="version-type version-history"/>').text("")),
					b.selectVersion === e && f.addClass("select")
				})
			},
			getSelectVersion: function () {
				return this.selectVersion
			}
		}),
	a.shortcut("flowversionpane", FX.FlowVersionPane)
}
(jQuery), function (a) {
	FX.FlowLaunchPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowLaunchPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_launch",
					url: "/dashboard/flow_start",
					colorSize: 6,
					onAfterClose: null
				})
			},
			_init: function () {
				FX.FlowLaunchPane.superclass._init.apply(this, arguments),
				this._createAppList(),
				this._bindEvent()
			},
			_createAppList: function () {
				var b = this.options,
				c = this,
				d = FX.Utils.createMask(this.element, {
						hasLoader: !0
					});
				FX.Utils.ajax({
					url: b.url
				}, function (b) {
					var d = a('<ul class="flow-app-list"/>').appendTo(c.element);
					FX.Utils.isObjectEmpty(b.appEntryMap) && c._createEmptyPane(),
					FX.Utils.forEach(b.appEntryMap, function (e, f) {
						var g = b.appMap[e];
						if (f && !(f.length <= 0) && g) {
							var h = a('<li class="app-item"/>').append(a('<div class="app-title"/>').text(g.name)).appendTo(d);
							c._createEntryList(h, f)
						}
					})
				}, null, function () {
					d.remove()
				})
			},
			_createEmptyPane: function () {
				this.element.append(a('<div class="list-empty"><span></span></div>'))
			},
			_createEntryList: function (b, c) {
				var d = this,
				e = a('<ul class="flow-entry-list"/>').appendTo(b);
				FX.Utils.forEach(c, function (a, b) {
					e.append(d._createEntryItem(b).data("data", {
							appId: b.appId,
							entryId: b.entryId
						}))
				})
			},
			_createEntryItem: function (b) {
				var c = FX.Utils.getColorNumber(b._id);
				return a('<li class="entry-item color-border-' + c + '"><div class="entry-name">' + b.name + '</div><div class="entry-bottom"><a class="entry-launch"><span></span><i class="icon-angleright"/></a></div></li>')
			},
			_loadEntry: function (b) {
				var c = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + b.appId + "/entry/" + b.entryId
				}, function (b, d) {
					FX.Vip.showUpgradeTip(b.bufferState);
					var e = FX.Utils.createMask(a("body"), {
							isLight: !0,
							isModal: !0
						}),
					f = b.entry;
					f && (FX.STATIC.APPID = f.appId, FX.STATIC.ENTRYID = f.entryId, new FX.Form(a.extend(f.content, {
								renderEl: a('<div class="flow-form x-shadow-content"/>').appendTo(e),
								appId: f.appId,
								entryId: f.entryId,
								title: f.name,
								width: 780,
								height: "100%",
								submitText: "",
								cancelText: f.hasFlowPrint ? null : "",
								printText: f.hasFlowPrint ? "" : null,
								buttonPosition: "middle",
								version: b.version,
								onSuccess: function (a, b, d) {
									d && c._showFormPrint(a.data),
									FX.Msg.toast({
										type: "success",
										msg: ""
									}),
									e.remove()
								},
								onAfterCancel: function () {
									e.remove()
								}
							})))
				})
			},
			_showFormPrint: function (b) {
				var c = FX.Utils.createMask(a("body"), {
						isLight: !0,
						isModal: !0
					});
				new FX.FormEditPane({
					renderEl: a('<div class="x-shadow-content"/>').appendTo(c),
					width: 920,
					height: "100%",
					dataId: b._id,
					entryId: b.entryId,
					flowType: "print",
					flowId: 0,
					hasFlowBtn: !1,
					onCancel: function () {
						c.remove()
					}
				})
			},
			_bindEvent: function () {
				var b = this;
				this.element.click(function (c) {
					var d = a(c.target).closest(".entry-item");
					d.length > 0 && b._loadEntry(d.data("data"))
				})
			}
		}),
	a.shortcut("flowlaunchpane", FX.FlowLaunchPane)
}
(jQuery), function (a) {
	FX.FlowLogPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowLogPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_log",
					flowId: null,
					flowName: "",
					logs: [],
					fields: [{
							key: "operator",
							text: ""
						}, {
							key: "flowName",
							text: ""
						}, {
							key: "flowAction",
							text: ""
						}, {
							key: "startTime",
							text: ""
						}, {
							key: "dealTime",
							text: ""
						}
					],
					onAfterClose: null
				})
			},
			_init: function () {
				FX.FlowLogPane.superclass._init.apply(this, arguments);
				var a = this.options;
				this._initLogContent(),
				FX.Utils.isObjectEmpty(a.logs) ? this._createEmptyTip() : (this._createLogHead(), this._createLogList()),
				this._bindEvent()
			},
			_initLogContent: function () {
				var b = this.options;
				FX.Utils.isEmpty(b.flowName) && (b.flowName = "");
				var c = a('<div class="log-content"/>').appendTo(this.element);
				a('<div class="log-title"/>').appendTo(c).append(a("<span/>").text("  " + b.flowName)).append(a('<i class="icon-close-normal"/>')),
				this.$table = a("<table/>").appendTo(c)
			},
			_bindEvent: function () {
				var b = this,
				c = this.options;
				this.element.bind("click", function (d) {
					var e = a(d.target).closest(".log-content"),
					f = a(d.target).closest(".icon-close-normal");
					(f.length > 0 || e.length <= 0) && (b.element.addClass("close"), setTimeout(function () {
							b.element.remove()
						}, 300), FX.Utils.applyFunc(b, c.onAfterClose, [], !1))
				})
			},
			_createLogHead: function () {
				var b = this.options,
				c = a("<tr/>").appendTo(a('<thead class="log-head"/>').appendTo(this.$table));
				FX.Utils.forEach(b.fields, function (b, d) {
					c.append(a("<td/>").append(a("<span/>").text(d.text)))
				})
			},
			_createLogList: function () {
				var b = this,
				c = this.options,
				d = a("<tbody/>").appendTo(this.$table);
				FX.Utils.forEach(c.logs, function (a, c) {
					b._createLogItem(c, d)
				})
			},
			_createLogItem: function (b, c) {
				var d = this,
				e = this.options;
				if (this._isActionValid(b)) {
					var f = a('<tr class="log-list"/>').appendTo(c);
					FX.Utils.forEach(e.fields, function (a, c) {
						f.append(d._formatData(c.key, b))
					})
				}
			},
			_isActionValid: function (a) {
				return !FX.Utils.isEmpty(this._getActionName(a.flowAction));
			},
			_getActionName: function (a) {
				switch (a) {
				case "forward":
					return "";
				case "back":
					return "";
				case "save":
					return "";
				case "close":
					return "";
				case "revoke":
					return "";
				case "todo":
					return "";
				default:
					return ""
				}
			},
			_formatData: function (b, c) {
				var d = a("<td/>");
				if (FX.Utils.isEmpty(c[b]))
					return d;
				switch (b) {
				case "startTime":
				case "dealTime":
					return d.addClass("log-time"),
					d.append(a('<span class="log-time"/>').text(FX.Utils.date2Str(new Date(c[b]), "yyyy-MM-dd HH:mm:ss")));
				case "flowAction":
					return d.append(a('<span class="flow-action action-' + c[b] + '"/>').text(this._getActionName(c[b])));
				default:
					return d.append(a("<span/>").text(c[b]))
				}
			},
			_createEmptyTip: function () {
				this.$table.append(a('<div class="log-empty-tip"/>').text(""))
			}
		}),
	a.shortcut("flowlogpane", FX.FlowLogPane)
}
(jQuery), function (a) {
	FX.FlowStatePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowStatePane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_state",
					cBlue: "#2D8CE6",
					cBlueWhite: "#DCEEF6",
					cRed: "#EE5C42",
					cGrey: "#CCC",
					cGreen: "#41c48d",
					cWhite: "#FFFFFF",
					cBlack: "#444",
					iconsize: 32,
					labelWidth: 110,
					labelHeight: 30,
					wGap: 20,
					hGap: 20,
					textPaddingTop: 20,
					strokeWidth: 1,
					fontSize: 13,
					appId: null,
					entryId: null,
					dataId: null,
					flow: {},
					hasTransfer: !1,
					legend: {
						visible: !0,
						items: [{
								name: "",
								type: "done"
							}, {
								name: "",
								type: "doing"
							}, {
								name: "",
								type: "undone"
							}
						]
					},
					nodeType: ["done", "doing", "undone"],
					onChangeState: null,
					isAnimate: !0,
					hasTitle: !0
				})
			},
			_init: function () {
				FX.FlowStatePane.superclass._init.apply(this, arguments);
				var b = this.options;
				this.$content = a('<div class="state-content"/>').appendTo(this.element),
				b.isAnimate && this.$content.addClass("content-animate"),
				b.hasTitle && this._createTitle(),
				this._createLegend(),
				b.flow ? this._createContent() : this._getFlow(function () {
					this._createContent()
				})
			},
			_getFlow: function (a) {
				var b = this.options,
				c = this,
				d = FX.Utils.createMask(this.$content, {
						isLight: !0,
						hasLoader: !0
					});
				FX.Utils.dataAjax({
					url: "/data/read",
					data: {
						formId: b.entryId,
						dataId: b.dataId
					}
				}, function (d) {
					b.flow = FX.Utils.getFlowOption(d, "part"),
					FX.Utils.applyFunc(c, a, [], !1)
				}, function () {}, function () {
					d.remove()
				})
			},
			_createContent: function () {
				this._createLogBtn();
				var b = this.options;
				b.flow.version && this.$content.append(a('<div class="flow-version"/>').text("V" + b.flow.version + ".0")),
				this.$flowState = a('<div class="flow-state"/>').appendTo(a('<div class="state-body"/>').appendTo(this.$content)),
				this.svg = d3.select(this.$flowState[0]).append("svg"),
				this._initFlowStatePane()
			},
			_createTitle: function () {
				var b = this,
				c = a('<div class="state-title"/>').appendTo(this.$content).click(function (c) {
						var d = a(c.target).closest(".icon-close-normal");
						d && d.length > 0 && b.element.remove()
					});
				c.append(a("<span/>").text("")).append(a('<i class="icon-close-normal"/>'))
			},
			_createLegend: function () {
				var b = this.options,
				c = a('<ul class="state-legend"/>').appendTo(this.$content);
				FX.Utils.forEach(b.legend.items, function (b, d) {
					c.append(a("<li/>").append(a('<div class=" legend-type legend-' + d.type + '"/>')).append(a('<span class="legend-name"/>').text(d.name)))
				})
			},
			_createLogBtn: function () {
				var b = this;
				new FX.Button({
					renderEl: a('<div class="show-log"/>').appendTo(this.$content),
					text: "",
					width: 110,
					height: 30,
					style: "white",
					onClick: function () {
						b._initLog()
					}
				})
			},
			_createTransferBtn: function () {
				var b = this,
				c = this.options;
				c.hasTransfer && new FX.Button({
					renderEl: a('<div class="show-transfer"/>').appendTo(this.$content),
					text: c.flow.flowState === FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE ? "" : "",
					width: 110,
					height: 30,
					style: "white",
					onClick: function () {
						b._showTransferPane()
					}
				})
			},
			_showTransferPane: function () {
				var b = this.options,
				c = this;
				new FX.FlowTransferPane({
					renderEl: a("<div/>").appendTo(this.$content),
					chargersMap: this.chargersMap,
					transactNodes: this.transactNodes,
					chargeNodes: this.chargeNodes,
					flowState: b.flow.flowState,
					dataId: b.flow.dataId,
					onAfterClose: function () {
						FX.Utils.applyFunc(c, b.onChangeState, [], !1),
						c._getFlow(function () {
							c.svg.empty(),
							c._initFlowChart(c.flows)
						})
					}
				})
			},
			_initLog: function (a) {
				var b = this,
				c = this.options;
				this.logs && this.logs.length > 0 ? this._showLog(a) : FX.Utils.ajax({
					url: "/data/log_flow",
					data: {
						appId: c.appId,
						entryId: c.entryId,
						dataId: c.flow.dataId
					}
				}, function (c) {
					if (c.logs && !(c.logs.length <= 0)) {
						b.logs = [];
						for (var d = {}; c.logs.length > 0; )
							b.logs.push(b._formatLog(c.logs.pop(), d));
						b._showLog(a)
					}
				})
			},
			_formatLog: function (a, b) {
				var c = b[a.flowId] || a.createTime;
				return FX.Utils.forEach(a.flowTarget, function (c, d) {
					b[d] = a.createTime
				}), {
					operator: a.operator,
					flowAction: a.flowAction,
					startTime: c,
					dealTime: a.createTime,
					flowId: a.flowId,
					flowName: a.flowName
				}
			},
			_showLog: function (b) {
				var c = this.logs;
				if (b) {
					if ("undone" === b.nodeType || b.type === FX.CONST.WORKFLOW.FLOWTYPE.CC)
						return;
					c = [],
					FX.Utils.forEach(this.logs, function (a, d) {
						d.flowId === b.flowId && c.push(d)
					})
				}
				new FX.FlowLogPane({
					renderEl: a("<div/>").appendTo(this.$content),
					flowId: b && b.flowId,
					flowName: b && b.name,
					logs: c
				})
			},
			_rect: function (a, b, c, d, e, f, g, h, i) {
				var j = this,
				k = a.data([i]).append("rect").attr("x", b).attr("y", c).attr("width", d).attr("height", e).attr("stroke", f).attr("stroke-width", g).attr("fill", h).attr("class", "state-" + i.nodeType).on("click", function (a) {
						j._initLog(a)
					});
				i && k.attr("id", "flow_" + i.flowId)
			},
			_text: function (a, b, c, d, e, f) {
				var g = this.options;
				d.length > 8 && (d = d.substring(0, 5) + ".."),
				a.data([f]).append("text").attr("x", b).attr("y", c).attr("fill", e).attr("font-size", g.fontSize).attr("text-anchor", "middle").text(d)
			},
			_icon: function (a, b, c, d, e, f, g) {
				var h = a.append("svg").attr("x", b).attr("y", c).attr("width", f).attr("height", g),
				i = h.append("g").attr("transform", "scale(0.01825, 0.01825)"),
				j = d === FX.CONST.WORKFLOW.FLOWTYPE.CC ? "M825.6 851.2c-6.4 0-6.4 0-12.8 0l-204.8-70.4c-19.2-6.4-25.6-25.6-19.2-38.4 6.4-19.2 25.6-25.6 38.4-19.2l172.8 57.6 89.6-595.2-704 384 166.4 44.8c19.2 6.4 25.6 25.6 19.2 38.4-6.4 19.2-25.6 25.6-38.4 19.2L89.6 608C76.8 608 64 595.2 64 582.4s6.4-25.6 19.2-32l832-448c12.8-6.4 25.6-6.4 32 0C953.6 108.8 960 121.6 960 134.4l-102.4 691.2c0 6.4-6.4 19.2-12.8 25.6C838.4 851.2 832 851.2 825.6 851.2zM480 928C460.8 928 448 915.2 448 896l0-211.2c0-6.4 6.4-12.8 12.8-19.2l441.6-556.8c12.8-12.8 32-19.2 44.8-6.4 12.8 12.8 12.8 32 0 44.8L512 691.2 512 896C512 915.2 499.2 928 480 928z" : "M747.442424 920.824242 187.345455 920.824242c-16.032323 0-28.961616-13.058586-28.961616-29.220202 0-16.161616 12.929293-29.220202 28.961616-29.220202l560.09697 0c16.032323 0 28.961616 13.058586 28.961616 29.220202C776.40404 907.765657 763.345455 920.824242 747.442424 920.824242L747.442424 920.824242zM755.458586 302.416162 633.276768 179.717172l91.668687-92.056566c16.937374-16.937374 44.218182-16.937374 61.155556 0l61.155556 61.414141c16.808081 16.937374 16.808081 44.347475 0 61.414141L755.458586 302.416162 755.458586 302.416162zM358.4 701.284848 236.218182 578.585859 602.763636 210.359596 724.945455 333.058586 358.4 701.284848ZM164.848485 772.783838 205.446465 609.228283 327.628283 731.927273 164.848485 772.783838ZM164.848485 772.783838";
				i.append("path").attr("d", j).attr("fill", e)
			},
			_line: function (a, b, c, d) {
				var e = b.split(" "),
				f = e[e.length - 1],
				g = f.split(",");
				e.map(function (b, f) {
					if (f !== e.length - 1) {
						var g = b.split(","),
						h = e[f + 1].split(",");
						a.append("line").attr("x1", g[0]).attr("y1", g[1]).attr("x2", h[0]).attr("y2", h[1]).attr("stroke", c).attr("stroke-width", d)
					}
				}),
				a.append("line").attr("x1", g[0]).attr("y1", g[1]).attr("x2", parseInt(g[0], 10) - 5).attr("y2", parseInt(g[1], 10) - 5).attr("stroke", c).attr("stroke-width", d),
				a.append("line").attr("x1", g[0]).attr("y1", g[1]).attr("x2", parseInt(g[0], 10) + 5).attr("y2", parseInt(g[1], 10) - 5).attr("stroke", c).attr("stroke-width", d)
			},
			_dNode: function (a, b, c, d) {
				var e,
				f,
				g,
				h,
				i = this.options;
				switch (b.nodeType) {
				case i.nodeType[0]:
					e = i.cBlue,
					f = i.cWhite,
					g = i.cWhite,
					h = i.cWhite;
					break;
				case i.nodeType[1]:
					e = i.cBlueWhite,
					f = i.cBlue,
					g = i.cBlack,
					h = b.type === FX.CONST.WORKFLOW.FLOWTYPE.CC ? i.cBlue : i.cGreen;
					break;
				case i.nodeType[2]:
					e = i.cWhite,
					f = i.cGrey,
					g = i.cBlack,
					h = b.type === FX.CONST.WORKFLOW.FLOWTYPE.CC ? i.cBlue : i.cGreen
				}
				var j = a.append("g").attr("class", "fx-flowchart-label").attr("id", "label_" + b.flowId);
				this._rect(j, c, d, i.labelWidth, i.labelHeight, f, i.strokeWidth, e, b),
				this._text(j, c + i.labelWidth / 2 + 10, d + i.textPaddingTop, b.name, g, b),
				this._icon(j, c + 4, d + 5, b.type, h, i.iconsize, i.iconsize)
			},
			_dLine: function (a) {
				var b = this,
				c = this.options;
				FX.Utils.forEach(this.flowMap, function (d, e) {
					e && !FX.Utils.isNull(e.flowId) && FX.Utils.forEach(e.parents, function (e, f) {
						var g = b.flowMap[f];
						if (g && !FX.Utils.isNull(g.flowId)) {
							var h = a.select("#flow_" + d);
							if (h[0] && h[0][0]) {
								var i = a.select("#flow_" + f);
								if (i[0] && i[0][0]) {
									var j,
									k = parseInt(h.attr("x"), 10),
									l = parseInt(h.attr("y"), 10),
									m = parseInt(i.attr("x"), 10),
									n = parseInt(i.attr("y"), 10),
									o = m + c.labelWidth / 2,
									p = n + c.labelHeight,
									q = k + c.labelWidth / 2,
									r = l;
									if (n > l) {
										var s = o + "," + p,
										t = o + "," + (p + c.hGap / 2),
										u = (o > q ? (o - q) / 2 + q : (q - o) / 2 + o) + "," + (p + c.hGap / 2),
										v = (o > q ? (o - q) / 2 + q : (q - o) / 2 + o) + "," + (r - c.hGap / 2),
										w = q + "," + (r - c.hGap / 2),
										x = q + "," + r;
										j = s + " " + t + " " + u + " " + v + " " + w + " " + x
									} else {
										var s = o + "," + p,
										t = o + "," + (p + c.hGap),
										u = q + "," + (p + c.hGap),
										v = q + "," + r;
										j = s + " " + t + " " + u + " " + v
									}
									var y = a.append("g").attr("class", "fx-flowchart-path").attr("id", "path_" + g + "_" + d);
									b._line(y, j, c.cGrey, c.strokeWidth)
								}
							}
						}
					})
				})
			},
			_resize: function (a, b) {
				this.svg.attr("width", a).attr("height", b),
				this.$flowState.css({
					width: a,
					height: b
				})
			},
			_initFlowStatePane: function () {
				var a = this,
				b = this.options;
				this.flows && a._initFlowChart(this.flows),
				FX.Utils.dataAjax({
					url: "/data/workflows",
					data: {
						appId: b.appId,
						entryId: b.entryId,
						dataId: b.flow.dataId
					}
				}, function (b) {
					var c = b.flows;
					!c || c.length <= 0 || (a.flows = c, a._initFlowChart(c))
				})
			},
			_setNodeAreaWidth: function (a) {
				var b = this,
				c = this.options,
				d = 0;
				FX.Utils.forEach(a.children, function (a, c) {
					var e = b.flowMap[c];
					b._setNodeAreaWidth(e),
					d += e.areaWidth
				}),
				d || (d = c.labelWidth + 2 * c.wGap),
				a.areaWidth = d
			},
			_createFlowNode: function (a, b, c) {
				var d = this,
				e = this.options;
				if (!this.createdMap[a.flowId]) {
					this.createdMap[a.flowId] = !0;
					var f = b + a.areaWidth / 2 - e.labelWidth / 2,
					g = c * (2 * e.hGap + e.labelHeight) + e.hGap;
					this.flowLevel = Math.max(this.flowLevel, c),
					this._dNode(this.svg, a, f, g);
					var h = 0;
					FX.Utils.forEach(a.children, function (a, e) {
						var f = d.flowMap[e];
						d._createFlowNode(f, b + h, c + 1),
						h += f.areaWidth
					})
				}
			},
			_initFlowChart: function (b) {
				var c = this,
				d = this.options;
				this.flowMap = {},
				this.orphanFlows = [],
				this.createdMap = {};
				var e = {};
				FX.Utils.forEach(d.flow.transactors, function (a, b) {
					e[b.split(FX.CONST.WORKFLOW.NODE_DELIMITER)[1]] = d.nodeType[0]
				}),
				FX.Utils.forEach(d.flow.ccUsers, function (a, b) {
					e[b.split(FX.CONST.WORKFLOW.NODE_DELIMITER)[1]] = d.nodeType[0]
				}),
				this.chargersMap = {},
				FX.Utils.forEach(d.flow.chargers, function (a, b) {
					var f = b.split(FX.CONST.WORKFLOW.NODE_DELIMITER);
					e[f[1]] = d.nodeType[1],
					c.chargersMap[f[1]] ? c.chargersMap[f[1]].push(f[0]) : c.chargersMap[f[1]] = [f[0]]
				}),
				this.chargeNodes = [],
				this.transactNodes = [],
				FX.Utils.forEach(b, function (b, f) {
					f.flowId === FX.CONST.WORKFLOW.START_FLOW_ID ? f.nodeType = e[f.flowId] || d.nodeType[0] : (f.nodeType = e[f.flowId] || d.nodeType[2], f.nodeType === d.nodeType[0] && f.type !== FX.CONST.WORKFLOW.FLOWTYPE.CC && c.transactNodes.push({
								value: f.flowId,
								text: f.name
							})),
					f.nodeType === d.nodeType[1] && c.chargeNodes.push({
						value: f.flowId,
						text: f.name
					});
					var g = f.flowId,
					h = f.parents[0];
					return c.flowMap[g] = a.extend(c.flowMap[g], f),
					FX.Utils.isNull(h) || h === g ? void c.orphanFlows.push(g) : (c.flowMap[h] = c.flowMap[h] || {}, c.flowMap[h].children || (c.flowMap[h].children = []), void c.flowMap[h].children.push(g))
				}),
				this.flowLevel = 0,
				this._setNodeAreaWidth(c.flowMap[0]),
				this.chartOffsetX = 0,
				this.chartWidth = d.width,
				c.flowMap[0].areaWidth < d.width ? this.chartOffsetX = (d.width - c.flowMap[0].areaWidth) / 2 : this.chartWidth = c.flowMap[0].areaWidth,
				this._createFlowNode(c.flowMap[0], this.chartOffsetX, 0),
				this._resize(this.chartWidth, (this.flowLevel + 1) * (2 * d.hGap + d.labelHeight)),
				this._dLine(this.svg),
				this._createTransferBtn()
			}
		}),
	a.shortcut("flowstatepane", FX.FlowStatePane)
}
(jQuery), function (a) {
	FX.FlowCommentPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowCommentPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_comment",
					appId: null,
					entryId: null,
					comments: [],
					isPrint: !1,
					onAfterClose: null
				})
			},
			_init: function () {
				FX.FlowCommentPane.superclass._init.apply(this, arguments);
				var a = this.options;
				this._initCommentContent(),
				this._createCommentList(),
				a.isPrint || this._bindEvent()
			},
			_initCommentContent: function () {
				var b = this.options,
				c = a('<div class="comment-content"/>').appendTo(this.element),
				d = a('<div class="comment-title"/>').appendTo(c).append(a("<span/>").text(""));
				b.isPrint ? this.element.addClass("print") : d.append(a('<i class="icon-close-normal"/>')),
				this.$list = a('<ul class="comment-list"/>').appendTo(c)
			},
			_createCommentList: function () {
				var a = this,
				b = this.options;
				FX.Utils.forEach(b.comments, function (b, c) {
					c = a._formatComment(c),
					c && a.$list.append(a._createCommentItem(c))
				}),
				this.$list.children("li.comment-item").length <= 0 && this._createEmptyTip()
			},
			_formatComment: function (a) {
				return FX.Utils.isEmpty(a.comment) || "save" === a.flowAction ? null : {
					flowName: a.flowName,
					operator: a.operator,
					createTime: this._formatDate(a.createTime),
					comment: a.comment
				}
			},
			_formatDate: function (a) {
				var b = new Date(a),
				c = new Date,
				d = (c - b) / 6e4,
				e = d / 60,
				f = parseInt(e / 24);
				return e = parseInt(e),
				d = parseInt(d),
				f > 3 ? FX.Utils.date2Str(b, "yyyy-MM-dd HH:mm:ss") : f > 0 ? f + "" : e > 0 ? e + "" : d > 0 ? d + "" : ""
			},
			_createCommentItem: function (b) {
				return a('<li class="comment-item"><div class="comment-menu"><div class="menu-creator">' + b.operator + '</div><div class="menu-time">' + b.createTime + '</div><div class="menu-state">' + b.flowName + '</div></div><div class="content">' + b.comment + "</div></li>")
			},
			_bindEvent: function () {
				var b = this,
				c = this.options;
				this.element.bind("click", function (d) {
					var e = a(d.target).closest(".comment-content"),
					f = a(d.target).closest(".icon-close-normal");
					(f.length > 0 || e.length <= 0) && (b.element.addClass("close"), setTimeout(function () {
							b.element.remove()
						}, 300), FX.Utils.applyFunc(b, c.onAfterClose, [], !1))
				})
			},
			_createEmptyTip: function () {
				this.$list.append(a('<div class="comment-empty-tip"/>').text(""))
			}
		}),
	a.shortcut("flowcommentpane", FX.FlowCommentPane)
}
(jQuery), function (a) {
	FX.FlowQueryPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowQueryPane.superclass._defaultConfig.call(), {
					baseCls: "fx-flow-query",
					itemsPerPage: 20,
					url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/query_data",
					listType: "todo",
					onAsyncSuccess: null,
					onRowClick: null
				})
			},
			_init: function () {
				FX.FlowQueryPane.superclass._init.apply(this, arguments);
				var b = (this.options, this);
				this._createParamPane(),
				this._createFlowList(),
				a(window).resize(function () {
					b.doResize()
				})
			},
			_createParamPane: function () {
				var b = this,
				c = this.options;
				this.$paramPane = a('<div class="flow-param"/>').appendTo(this.element);
				var d = a('<div class="param-menu"/>').append(a('<i class="icon-flow-query"/>')).append(a("<span/>").text("")).appendTo(this.$paramPane);
				new FX.Button({
					renderEl: a('<div class="param-query"/>').appendTo(d),
					iconCls: "icon-search",
					width: 90,
					height: 30,
					text: "",
					onClick: function () {
						b._createFlowList()
					}
				}),
				d.append(a('<a class="param-clear"/>').append(a('<i class="icon-flow-clear"/>')).append(a("<span/>").text(""))),
				this._createParamList(a('<ul class="param-list"/>').appendTo(this.$paramPane)),
				d.click(function (d) {
					var e = a(d.target).closest(".param-clear");
					e.length > 0 && (c.listType = "todo", b.filter = {}, b._createParamList(b.$paramPane.children(".param-list").empty()))
				})
			},
			_formatData: function (a) {
				var b = this;
				if (FX.Utils.isEmpty(a.value))
					return "";
				switch (a.type) {
				case "address":
				case "location":
					return FX.Utils.address2Str(a.value, "", "pcda");
				case "datetime":
					return FX.Utils.date2Str(new Date(a.value), a.format);
				case "user":
				case "dept":
					return this.nameMap[a.value];
				case "usergroup":
				case "deptgroup":
					var c = [];
					return FX.Utils.forEach(a.value, function (a, d) {
						c.push(b.nameMap[d])
					}),
					c.join(",");
				default:
					return a.value
				}
			},
			_createFlowList: function () {
				var b = this,
				c = this.options;
				return this.$flowList ? (FX.Utils.createMask(this.$flowList, {
						hasLoader: !0,
						isLight: !0
					}), void(this.flowList ? (this.flowList.options.async.data = a.extend(this.flowList.options.async.data, {
									type: c.listType,
									filter: this.filter
								}), this.flowList.page = 0, this.flowList.refresh()) : (this.$flowList.empty(), this.flowList = new FX.Grid({
									renderEl: a("<div/>").appendTo(this.$flowList),
									hasPagination: !0,
									intervalColor: !0,
									async: {
										url: c.url,
										data: {
											type: c.listType,
											filter: this.filter,
											sort: {
												createTime: -1
											}
										}
									},
									columnsConfig: [{
											value: "",
											key: "entryName",
											width: 160
										}, {
											value: "",
											width: 160,
											onCellCreate: function (b, c, d) {
												return FX.Utils.isArray(d.states) && d.states.length > 1 ? a('<span class="cell"></span>') : a('<span class="cell"/>').text(d.states[0])
											}
										}, {
											value: "",
											width: 130,
											onCellCreate: function (c, d, e) {
												return a('<span class="cell"/>').text(b.nameMap[e.creator])
											}
										}, {
											width: 110,
											value: "",
											onCellCreate: function (b, c, d) {
												var e = FX.Utils.date2Str(new Date(d.createTime), "yyyy-MM-dd HH:mm:ss").split(" ");
												return a('<div class="cell"/>').append(a('<div class="item-date"/>').text(e[0])).append(a('<div class="item-time"/>').text(e[1]))
											}
										}, {
											width: 100,
											value: "",
											onCellCreate: function (b, c, d) {
												return d.flowState === FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE ? a('<span class="flow-state state-complete"/>').text("") : a('<span class="flow-state state-inprocess"/>').text("")
											}
										}, {
											value: "",
											onCellCreate: function (c, d, e) {
												var f = '<div class="cell">';
												return FX.Utils.forEach(e.data, function (a, c) {
													f += '<div class="item-data"><div class="data-label">' + c.label + '</div><div class="data-value">' + b._formatData(c) + "</div></div>"
												}),
												a(f)
											}
										}
									],
									onAsyncSuccess: function (c) {
										this.options.items = c.data,
										b.nameMap = c.nameMap,
										b.$flowList.children(".x-window-mask").remove(),
										b.$flowList.children(".empty-tip").remove(),
										FX.Utils.isObjectEmpty(c.data) ? (b.flowList.setVisible(!1), b.$flowList.append(a('<div class="empty-tip"/>').text(" "))) : b.flowList.setVisible(!0)
									},
									onAsyncError: function () {
										b.$flowList.children(".x-window-mask").remove()
									},
									onAfterRowCreate: function (a, c, d) {
										a.click(function (a) {
											b._editData(d)
										})
									}
								})))) : (this.$flowList = a('<div class="flow-list"/>').appendTo(this.element), void this.$flowList.append(a('<div class="empty-tip"/>').text("")))
			},
			_createParamList: function (b) {
				var c = this,
				d = this.options;
				this.filter || (this.filter = {});
				var e = a('<li class="param-item"/>').append(a('<span class="item-title"/>').text("")).appendTo(b);
				this.paramList = [],
				new FX.ComboBox({
					renderEl: a('<div class="item-content"/>').appendTo(e),
					items: [{
							value: "todo",
							text: ""
						}, {
							value: "create",
							text: ""
						}, {
							value: "part",
							text: ""
						}
					],
					value: d.listType,
					allowBlank: !1,
					searchable: !1,
					width: 200,
					onAfterItemSelect: function () {
						d.listType = this.getValue(),
						f.items = null,
						f.options.async.data.type = d.listType,
						f.rebuild(),
						g.options.async.data.formId = null,
						g.items = null,
						g.rebuild(),
						a.extend(c.filter, {
							form: null,
							node: null
						})
					}
				}),
				e = a('<div class="param-item"/>').append(a('<span class="item-title"/>').text("")).appendTo(b);
				var f = new FX.ComboBox({
						renderEl: a('<div class="item-content"/>').appendTo(e),
						async: {
							url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/query_menu",
							data: {
								type: d.listType
							}
						},
						asyncResultKey: "data",
						textField: "name",
						valueField: "entryId",
						width: 200,
						onBeforeAsync: function () {
							FX.STATIC.ENTRYID = null
						},
						onStopEdit: function () {
							var b = this.getValue();
							a.extend(c.filter, {
								form: b,
								node: null
							}),
							g.options.async.data.formId = b,
							g.items = null,
							g.rebuild()
						}
					});
				this.paramList.push(f),
				e = a('<div class="param-item"/>').append(a('<span class="item-title"/>').text("")).appendTo(b);
				var g = new FX.ComboBox({
						renderEl: a('<div class="item-content"/>').appendTo(e),
						async: {
							url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/query_node",
							data: {}
						},
						emptyTip: "",
						textField: "_id",
						asyncResultKey: "data",
						width: 200,
						onBeforeAsync: function () {
							FX.STATIC.ENTRYID = null
						},
						onStopEdit: function () {
							a.extend(c.filter, {
								node: this.getValue()
							})
						}
					});
				this.paramList.push(g),
				e = a('<div class="param-item"/>').append(a('<span class="item-title"/>').text("")).appendTo(b);
				var h = new FX.ComboCheckBox({
						renderEl: a('<div class="item-content"/>').appendTo(e),
						async: {
							url: "/data/flow_creators"
						},
						asyncResultKey: "creators",
						textField: "nickname",
						valueField: "_id",
						width: 200,
						onStopEdit: function () {
							a.extend(c.filter, {
								creators: this.getValue()
							})
						}
					});
				this.paramList.push(h),
				e = a('<div class="param-item"/>').append(a('<span class="item-title"/>').text("")).appendTo(b),
				this.paramList.push(new FX.DateLimit({
						renderEl: a('<div class="item-content"/>').appendTo(e),
						onStopEdit: function () {
							a.extend(c.filter, {
								date: this.getValue()
							})
						}
					})),
				e = a('<div class="param-item"/>').append(a('<span class="item-title"/>').text("")).appendTo(b),
				this.paramList.push(new FX.ComboCheckBox({
						renderEl: a('<div class="item-content"/>').appendTo(e),
						items: [{
								value: FX.CONST.WORKFLOW.FLOWSTATE.INPROCESS,
								text: ""
							}, {
								value: FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE,
								text: ""
							}
						],
						searchable: !1,
						width: 200,
						onStopEdit: function () {
							a.extend(c.filter, {
								states: this.getValue()
							})
						}
					}))
			},
			_editData: function (b) {
				var c = this.options,
				d = this,
				e = this.flowList;
				this.$mask || (this.$mask = FX.Utils.createMask(a("body"), {
							isLight: !0,
							isModal: !0
						})),
				this.form = new FX.FormEditPane({
						renderEl: a('<div class="x-shadow-content"/>').appendTo(this.$mask),
						width: 920,
						height: "100%",
						dataId: b._id,
						entryId: b.entryId,
						flowType: c.listType,
						flowId: b.flowId,
						onSuccess: function () {
							d._close(),
							e.refresh()
						},
						onFail: function () {
							d._close()
						},
						onCancel: function () {
							d._close()
						}
					})
			},
			_close: function () {
				this.$mask.remove(),
				this.$mask = null,
				this.form = null
			},
			doResize: function () {
				this.$flowList.height(this.element.height() - this.$paramPane.height())
			}
		}),
	a.shortcut("flowquerypane", FX.FlowQueryPane)
}
(jQuery), function (a) {
	FX.FlowTransferPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FlowTransferPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_flow_transfer",
					dataId: null,
					chargersMap: {},
					transactNodes: [],
					chargeNodes: [],
					flowState: "",
					onAfterClose: null
				})
			},
			_init: function () {
				FX.FlowTransferPane.superclass._init.apply(this, arguments);
				var b = this.options;
				this.$content = a('<div class="transfer-content"/>').appendTo(this.element),
				b.flowState === FX.CONST.WORKFLOW.FLOWSTATE.COMPLETE ? (this._createTitle(""), this.transferType = "activate") : (this._createTitle(""), this.transferType = "transfer"),
				this._createSelectPane(),
				this._bindEvent()
			},
			_createTitle: function (b) {
				this.$title = a('<div class="transfer-title"/>').append(a("<span/>").text(b)).append(a('<i class="icon-close-normal"/>')).appendTo(this.$content)
			},
			_createSelectPane: function () {
				var b = this.options;
				switch (this.$selectPane = a('<div class="transfer-pane"/>').appendTo(this.$content), this.transferType) {
				case "activate":
					this._createNodeSelector(b.transactNodes, "");
					break;
				case "transfer":
					this._createTip(),
					this._createNodeSelector(b.chargeNodes, ""),
					this._createMemberSelector(),
					FX.Utils.isObjectEmpty(b.chargeNodes) || (this.nodeSelector.setValue(b.chargeNodes[0].value), this.currentNode = this.nodeSelector.getValue(), this.memberSelector.rebuild(b.chargersMap[this.currentNode]))
				}
				this._createConfirmButton()
			},
			_createTip: function () {
				a('<div class="transfer-tip"/>').text("").appendTo(this.$selectPane)
			},
			_createNodeSelector: function (b, c) {
				var d = this,
				e = this.options;
				a('<div class="transfer-item"/>').text(c).appendTo(this.$selectPane),
				this.nodeSelector = new FX.ComboBox({
						renderEl: a('<div class="transfer-item"/>').appendTo(this.$selectPane),
						items: b,
						width: 280,
						allowBlank: !1,
						onStopEdit: function () {
							d.currentNode = this.getValue(),
							"transfer" === d.transferType && (d.transferMap = {}, d.memberSelector.rebuild(e.chargersMap[d.currentNode]))
						}
					})
			},
			_createMemberSelector: function () {
				var b = this.options,
				c = this;
				this.transferMap = {},
				a('<div class="transfer-item"/>').text("").appendTo(this.$selectPane),
				this.memberSelector = new FX.MemberSelectPane({
						renderEl: a('<div class="transfer-item"/>').appendTo(this.$selectPane),
						departmentEnable: !1,
						value: b.chargersMap[this.currentNode],
						onStopEdit: function () {
							c.transferMap[c.currentNode] = this.getJsonValue()
						}
					})
			},
			_createConfirmButton: function () {
				var b = this,
				c = this.options;
				this.hasChanged = !1,
				new FX.Button({
					renderEl: a('<div class="transfer-btn"/>').appendTo(this.$selectPane),
					width: 120,
					text: "",
					style: "green",
					onClick: function () {
						switch (b.transferType) {
						case "activate":
							if (FX.Utils.isEmpty(b.currentNode))
								return void FX.Msg.toast({
									msg: "",
									type: "warning"
								});
							break;
						case "transfer":
							var a = b.transferMap[b.currentNode];
							if (FX.Utils.isEmpty(b.currentNode))
								return void FX.Msg.toast({
									msg: "",
									type: "warning"
								});
							if (FX.Utils.isObjectEmpty(a))
								return void FX.Msg.toast({
									msg: "",
									type: "warning"
								});
							if (FX.Utils.isObjectEmpty(a.users))
								return void FX.Msg.toast({
									msg: "",
									type: "warning"
								})
						}
						var d = FX.Utils.createMask(b.$selectPane, {
								isLight: !0,
								hasLoader: !0
							});
						switch (b.transferType) {
						case "activate":
							FX.Utils.dataAjax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/activate",
								data: {
									flowId: b.currentNode,
									dataId: c.dataId
								}
							}, function () {
								FX.Msg.toast({
									msg: "",
									type: "success"
								}),
								b.hasChanged = !0,
								b.close()
							}, function (a) {
								var b = a.responseJSON || {};
								FX.Msg.toast({
									type: "error",
									msg: b.msg || ""
								})
							}, function () {
								d.remove()
							});
							break;
						case "transfer":
							FX.Utils.dataAjax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/workflow/transfer",
								data: {
									flowId: b.currentNode,
									chargers: b.transferMap[b.currentNode],
									dataId: c.dataId
								}
							}, function () {
								FX.Msg.toast({
									msg: "",
									type: "success"
								}),
								b.hasChanged = !0,
								c.chargersMap[b.currentNode] = b.transferMap[b.currentNode],
								b.close()
							}, function (a) {
								var b = a.responseJSON || {};
								FX.Msg.toast({
									type: "error",
									msg: b.msg || ""
								})
							}, function () {
								d.remove()
							})
						}
					}
				})
			},
			_bindEvent: function () {
				var b = this;
				this.element.bind("click", function (c) {
					var d = a(c.target).closest(".transfer-content"),
					e = a(c.target).closest(".icon-close-normal");
					(e.length > 0 || d.length <= 0) && b.close()
				})
			},
			close: function () {
				var a = this.options,
				b = this;
				this.element.addClass("close"),
				setTimeout(function () {
					b.element.remove()
				}, 300),
				this.hasChanged && FX.Utils.applyFunc(this, a.onAfterClose, [], !1)
			}
		}),
	a.shortcut("flowtransferpane", FX.FlowTransferPane)
}
(jQuery), function (a) {
	FX.SelectionPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.SelectionPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_selection_pane",
					multi: !1,
					multiEdit: !0,
					contactOption: !1,
					onAfterDrop: null,
					onAfterItemSelect: null,
					onAfterItemRemove: null,
					onAfterItemAdd: null,
					onAfterItemEdit: null,
					onAfterWidgetsMapEdit: null,
					items: [],
					widgetView: null
				})
			},
			_init: function () {
				FX.SelectionPane.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this,
				d = a("<ul/>").appendTo(this.element);
				b.items && a.each(b.items, function (a, b) {
					var e = c._createItem(b);
					e && e.appendTo(d)
				});
				var e;
				d.sortable({
					handle: "i.icon-drag",
					itemSelector: "li.sel_item:not(.item-other)",
					onDragStart: function (a, b, c, d) {
						var f = a.offset(),
						g = b.rootGroup.pointer;
						e = g.top - f.top,
						c(a)
					},
					onDrag: function (a, b, c, d) {
						b.left = 0,
						b.top -= e,
						c(a, b)
					},
					onDrop: function (a, d, e, f) {
						e(a),
						FX.Utils.applyFunc(c, b.onAfterDrop, [], !1)
					}
				});
				var f = a('<div class="add_btn_group"/>').appendTo(this.element);
				a('<div class="add_item"/>').text(" ").click(function () {
					var e = c._createItem({
							text: ""
						}).hide();
					c.hasOtherItem ? e.insertBefore(a("li:last-child", d)).slideDown(200) : e.appendTo(d).slideDown(200),
					e.data("widget") && e.data("widget").select(),
					FX.Utils.applyFunc(c, b.onAfterItemAdd, [], !1)
				}).appendTo(f),
				b.multi || (this.$addOtherBtn = a('<div class="add_item add_other"/>').text(" ").click(function () {
							a(this).hasClass("disabled") || (c._createItem({
									text: "",
									isOther: !0
								}).hide().appendTo(d).slideDown(200), c._onOtherItemAdd(), FX.Utils.applyFunc(c, b.onAfterItemAdd, [], !1))
						}).appendTo(f), this.hasOtherItem && this.$addOtherBtn.addClass("disabled")),
				b.multiEdit && a('<div class="add_item multi-edit"/>').text("").click(function () {
					c._showMultiEditDialog()
				}).appendTo(f),
				b.contactOption && (a('<div class="contact_option_hr"/>').appendTo(this.element), new FX.Button({
						renderEl: a('<div class="contact_option"/>').appendTo(this.element),
						text: "",
						height: 30,
						style: "white",
						onClick: function () {
							c._showDialog()
						}
					}))
			},
			_showDialog: function () {
				var a = this,
				b = this.options,
				c = a.getResults().items,
				d = [],
				e = FX.EditForm.getNextItems(b.widgetView);
				FX.Utils.forEach(e, function (a, b) {
					b.widget && d.push({
						value: b.widget.widgetName,
						text: b.label
					})
				}),
				new FX.ConfirmDialog({
					title: "",
					width: 570,
					height: 510,
					contentWidget: {
						width: 570,
						height: 400,
						type: "itemlinkpane",
						linkWidgets: d,
						items: c
					},
					onOk: function () {
						return a.setWidgetsMap(this.container.getValue()),
						!1
					}
				}).show()
			},
			_showMultiEditDialog: function () {
				var b = this,
				c = this.options,
				d = [];
				c.items = this.getResults().items,
				FX.Utils.forEach(c.items, function (a, b) {
					b.isOther || d.push(b.text)
				});
				var e = new FX.ConfirmDialog({
						title: "",
						width: 530,
						height: 450,
						contentWidget: {
							rowSize: [30, 300],
							colSize: [500],
							hgap: 0,
							vgap: 0,
							padding: 15,
							items: [[a("<span />").text("")], [{
										widgetName: "itemMultiEdit",
										type: "textarea",
										waterMark: ["1", "2", "3"].join("\n"),
										value: d.join("\n")
									}
								]]
						},
						onOk: function () {
							var a = [],
							d = {},
							e = null;
							FX.Utils.forEach(c.items, function (a, b) {
								d[b.value] = b.widgetsMap,
								b.isOther && (e = b)
							});
							var f = this.getWidgetByName("itemMultiEdit").getValue();
							return FX.Utils.forEach(f.split("\n"), function (b, c) {
								var e = c.trim();
								if (e) {
									var f = {
										text: e,
										value: e
									};
									d[e] && (f.widgetsMap = d[e]),
									a.push(f)
								}
							}),
							e && a.push(e),
							c.items = a,
							b.rebuild(),
							FX.Utils.applyFunc(b, c.onAfterItemAdd, [], !1),
							!1
						}
					});
				e.show()
			},
			_createItem: function (b) {
				var c = this,
				d = this.options,
				e = a('<li class="sel_item"/>');
				b.isOther && (e.addClass("item-other"), this.hasOtherItem = !0);
				var f = a('<i class="select_icon"/>').appendTo(e);
				b.selected && f.addClass("select"),
				d.multi ? (f.addClass("icon-sel-multi"), f.click(function () {
						a(this).toggleClass("select"),
						FX.Utils.applyFunc(c, d.onAfterItemSelect, [], !1)
					})) : (f.addClass("icon-sel-single"), f.click(function () {
						a(this).hasClass("select") ? a(this).removeClass("select") : (a(".icon-sel-single", c.element).removeClass("select"), a(this).addClass("select")),
						FX.Utils.applyFunc(c, d.onAfterItemSelect, [], !1)
					}));
				var g = FX.createWidget({
						renderEl: a("<a/>").appendTo(e),
						width: 180,
						type: "text",
						enable: !b.isOther,
						value: b.text,
						onAfterEdit: function () {
							FX.Utils.applyFunc(c, d.onAfterItemEdit, [], !1)
						}
					});
				return e.data("widget", g),
				b.widgetsMap && b.widgetsMap.length > 0 && e.data("widgetsMap", b.widgetsMap),
				a('<i class="icon-remove"/>').click(function () {
					e.slideUp(200, function () {
						a(this).remove(),
						b.isOther && c._onOtherItemRemove(),
						FX.Utils.applyFunc(c, d.onAfterItemRemove, [], !1)
					})
				}).appendTo(e),
				b.isOther || a('<i class="icon-drag"/>').appendTo(e),
				e
			},
			_onOtherItemAdd: function () {
				this.$addOtherBtn.addClass("disabled"),
				this.hasOtherItem = !0
			},
			_onOtherItemRemove: function () {
				this.$addOtherBtn.removeClass("disabled"),
				this.hasOtherItem = !1
			},
			setWidgetsMap: function (b) {
				for (var c = a("li.sel_item", this.element), d = this.options, e = 0, f = c.length; e < f; e++) {
					var g = c.eq(e);
					b[e] && (g.data("widgetsMap", b[e]), d.items && d.items[e] && (d.items[e].widgetsMap = b[e]))
				}
				FX.Utils.applyFunc(this, d.onAfterWidgetsMapEdit, [], !1)
			},
			getResults: function () {
				for (var b = [], c = [], d = [], e = a("li.sel_item", this.element), f = 0, g = e.length; f < g; f++) {
					var h = e.eq(f),
					i = h.data("widget"),
					j = i.getValue(),
					k = {
						text: j,
						value: j
					};
					h.data("widgetsMap") && (k.widgetsMap = h.data("widgetsMap")),
					h.hasClass("item-other") && (k.isOther = !0),
					h.find(".select_icon").hasClass("select") && (k.selected = !0, c.push(f), d.push(k.text)),
					b.push(k)
				}
				return this.options.multi || (c = c.join("")), {
					items: b,
					value: c,
					text: d.join(",")
				}
			}
		}),
	a.shortcut("selectionpane", FX.SelectionPane)
}
(jQuery), function (a) {
	FX.SubformPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.SubformPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_subform_pane",
					multi: !1,
					availableAddons: {
						text: "",
						number: "",
						datetime: "",
						combo: "",
						combocheck: "",
						linkquery: "",
						linkdata: ""
					},
					items: []
				})
			},
			_init: function () {
				FX.SubformPane.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.$widgets = a('<ul class="fx_selection_pane"/>').appendTo(this.element);
				var d;
				this.$widgets.sortable({
					handle: "i.icon-drag",
					onDragStart: function (a, b, c, e) {
						var f = a.offset(),
						g = b.rootGroup.pointer;
						d = g.top - f.top,
						c(a)
					},
					onDrag: function (a, b, c, e) {
						b.left = 0,
						b.top -= d,
						c(a, b)
					},
					onDrop: function (a, d, e, f) {
						e(a),
						FX.Utils.applyFunc(c, b.onAfterDrop, [], !1)
					}
				}),
				new FX.Button({
					renderEl: a("<div/>").appendTo(this.element),
					customCls: "item-subwidget-add",
					style: "none",
					iconCls: "icon-add",
					text: " ",
					onClick: function () {
						e.show(),
						a(document).bind("mousedown.dropdown", function (b) {
							var c = a(b.target);
							0 === c.closest(e).length && (e.hide(), a(document).unbind("mousedown.dropdown"))
						})
					}
				});
				var e = a('<ul class="x-dropdown x-dropdown-list"/>').css({
						top: "100%",
						left: 0
					}).click(function (b) {
						var d = a(b.target).closest("li.x-dropdown-item");
						if (d.length > 0) {
							var f = d.attr("xtype");
							c._addSubWidget({
								label: d.text(),
								widget: {
									widgetName: "_widget_" + FX.STATIC.IDBase++,
									type: f
								}
							}, !0)
						}
						e.hide(),
						a(document).unbind("mousedown.dropdown")
					}).appendTo(this.element);
				for (var f in b.availableAddons)
					a('<li class="x-dropdown-item"/>').attr("xtype", f).text(b.availableAddons[f]).appendTo(e);
				FX.Utils.forEach(b.items, function (a, b) {
					c._addSubWidget(b, !1)
				}),
				this.$widgets.click(function (d) {
					var e = a(d.target),
					f = e.closest("li");
					if (f.length > 0) {
						var g = f.index();
						e.closest(".item-subwidget").length > 0 ? FX.Utils.applyFunc(c, b.onAfterItemSelect, [g], !1) : e.hasClass("icon-remove") && f.slideUp(200, function () {
							FX.Utils.applyFunc(c, b.onAfterItemRemove, [g], !1),
							a(this).remove()
						})
					}
				})
			},
			_addSubWidget: function (b, c) {
				var d = this.options,
				e = b.label,
				f = b.widget.type,
				g = a("<li/>").hide().data("item", b).appendTo(this.$widgets),
				h = a('<a class="x-btn style-white item-subwidget"/>').appendTo(g);
				a("<i/>").addClass("icon-widget-" + f).appendTo(h),
				a("<span/>").text(e).appendTo(h),
				a('<i class="icon-remove"/><i class="icon-drag"/>').appendTo(g),
				c ? (g.slideDown(200), FX.Utils.applyFunc(this, d.onAfterItemAdd, [b], !1)) : g.show()
			},
			collectAllItems: function () {
				var b = [];
				return FX.Utils.forEach(this.$widgets.children("li"), function (c, d) {
					var e = a(d).data("item");
					b.push(e)
				}),
				b
			}
		}),
	a.shortcut("subformpane", FX.SubformPane)
}
(jQuery), function (a) {
	FX.WidgetListPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.WidgetListPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_widgetlist_pane",
					items: [],
					editable: !0,
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.WidgetListPane.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this,
				d = a('<div class="head"/>').appendTo(this.element);
				this._initTip(d),
				a('<a class="opt"/>').text("").appendTo(d),
				a('<a class="opt"/>').text("").appendTo(d),
				b.editable && a('<a class="opt"/>').text("").appendTo(d),
				this.$list = a("<ul/>").appendTo(this.element),
				this._initSelectAll(),
				FX.Utils.forEach(b.items, function (a, b) {
					var d = c._createItem(b);
					d.appendTo(c.$list)
				}),
				b.editable && this._checkSelectAll("edit", !0),
				this._checkSelectAll("view", !0)
			},
			_initTip: function (b) {
				var c = a('<i class="icon-help"/>').hover(function () {
						FX.UI.showPopover({
							position: "topLeft",
							anchor: c,
							content: a("<span/>").text("")
						})
					}, function () {
						FX.UI.closePopover()
					}).appendTo(b)
			},
			_initSelectAll: function () {
				var b = this,
				c = this.options,
				d = a('<li class="select-all"/>').append(a("<span/>").text("")).appendTo(this.$list);
				c.editable && (this.editCheck = new FX.CheckBox({
							width: 13,
							height: 13,
							renderEl: a('<a class="edit"/>').appendTo(d),
							onStateChange: function (a) {
								a ? b.$list.find(".edit").addClass("select") : b.$list.find(".edit").removeClass("select"),
								FX.Utils.applyFunc(b, c.onAfterEdit, [], !1)
							}
						})),
				this.viewCheck = new FX.CheckBox({
						width: 13,
						height: 13,
						renderEl: a('<a class="view"/>').appendTo(d),
						onStateChange: function (a) {
							a ? b.$list.find(".view").addClass("select") : b.$list.find(".view").removeClass("select"),
							FX.Utils.applyFunc(b, c.onAfterEdit, [], !1)
						}
					})
			},
			_checkSelectAll: function (a, b) {
				var c = null;
				switch (a) {
				case "edit":
					c = this.editCheck;
					break;
				case "view":
					c = this.viewCheck
				}
				if (c)
					if (b) {
						var d = this.$list.find("." + a).length,
						e = this.$list.find("." + a + ".select").length;
						c.isSelected() || e !== d - 1 || c.setSelected(b)
					} else
						c.setSelected(b)
			},
			_createItem: function (b) {
				var c = this,
				d = this.options,
				e = a("<li/>").data("value", b.widget.widgetName);
				a("<span/>").text(b.label).appendTo(e);
				var f;
				d.editable && (f = a('<a class="x-check"/>').addClass("edit").append('<i class="x-iconfont">').click(function () {
							a(this).hasClass("x-ui-disable") || (a(this).toggleClass("select"), c._checkSelectAll("edit", a(this).hasClass("select")), FX.Utils.applyFunc(c, d.onAfterEdit, [], !1))
						}).appendTo(e));
				var g = a('<a class="x-check"/>').addClass("view").append('<i class="x-iconfont">').click(function () {
						a(this).hasClass("x-ui-disable") || (a(this).toggleClass("select"), c._checkSelectAll("view", a(this).hasClass("select")), FX.Utils.applyFunc(c, d.onAfterEdit, [], !1))
					}).appendTo(e),
				h = a('<a class="x-check"/>').addClass("brief").append('<i class="x-iconfont">').click(function () {
						if (!a(this).hasClass("x-ui-disable")) {
							if (!a(this).hasClass("select") && !c._checkBriefSize())
								return void FX.Msg.toast({
									msg: "3",
									type: "warning"
								});
							a(this).toggleClass("select"),
							FX.Utils.applyFunc(c, d.onAfterEdit, [], !1)
						}
					}).appendTo(e);
				return this._checkBriefValidate(b) || h.addClass("disable x-ui-disable"),
				this._setOptValue(b, g, "visible"),
				this._setOptValue(b, f, "enable"),
				this._setBriefValue(b, h),
				e
			},
			_checkBriefValidate: function (a) {
				return a.widget && FX.LimitFields.brief.indexOf(a.widget.type) > -1
			},
			_checkBriefSize: function () {
				return a(".x-check.brief.select", this.$list).length < 3
			},
			_setBriefValue: function (a, b) {
				if (this._checkBriefValidate(a) && this._checkBriefSize()) {
					var c = this.options.value;
					c && c[a.widget.widgetName] && c[a.widget.widgetName].brief && b.addClass("select")
				}
			},
			_setOptValue: function (a, b, c) {
				var d = this.options.value;
				d && d[a.widget.widgetName] && d[a.widget.widgetName][c] !== !1 && b.addClass("select")
			},
			getValue: function () {
				var b = {};
				return FX.Utils.forEach(this.$list.children("li"), function (c, d) {
					var e = a(d).data("value");
					if (e) {
						var f = a(d).find(".view").hasClass("select"),
						g = a(d).find(".edit").hasClass("select"),
						h = a(d).find(".brief").hasClass("select");
						(f || g || h) && (b[e] = {
								visible: f,
								enable: g,
								brief: h
							})
					}
				}),
				b
			}
		}),
	a.shortcut("widgetlistpane", FX.WidgetListPane)
}
(jQuery), function (a) {
	FX.FieldFormulaPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FieldFormulaPane.superclass._defaultConfig.apply(this, arguments), {
					formula: {},
					text: "",
					hasRemind: !0,
					hasFunction: !0,
					supportMultiForm: !0,
					availableFieldValue: ["number", "text", "datetime", "radiogroup", "checkboxgroup", "combo", "combocheck", "subform", "linkdata"],
					availableFieldName: ["number", "text", "datetime", "radiogroup", "checkboxgroup", "combo", "combocheck"],
					formulaKeywords: Object.keys(FX.Formula).remove("MAP"),
					currentForm: null,
					currentWidget: null,
					currentSubform: null,
					entryList: null,
					onAfterFormulaEdit: null,
					labelMap: null
				})
			},
			_init: function () {
				FX.FieldFormulaPane.superclass._init.apply(this, arguments),
				this._createFieldSelect(),
				this._createEditDialog(),
				this.dialog.show()
			},
			_createFieldSelect: function () {
				var b = this,
				c = this.options;
				this.$fieldSelect = a('<div class="fx_formula_field_tab"/>');
				var d = a('<div class="head"/>').appendTo(this.$fieldSelect),
				e = a('<div class="tab active"/>').text("").click(function () {
						j && j.removeClass("active"),
						e && e.addClass("active"),
						i && i.setVisible(!0),
						k && k.setVisible(!1)
					}).appendTo(d),
				f = [];
				FX.Utils.forEach(c.entryList, function (a, b) {
					if (!b.appId)
						return c.currentForm === b.entryId ? (f = [b], !1) : void 0
				});
				var g = c.hasRemind ? 320 : 350,
				h = [];
				c.currentWidget && h.push(c.currentWidget);
				var i = new FX.EntryFieldSelectPane({
						renderEl: a("<div/>").appendTo(this.$fieldSelect),
						mode: "dialog",
						height: g,
						fields: [],
						excludeFields: h,
						availableFields: c.availableFieldValue,
						allowMultiTable: !0,
						allowSameField: !0,
						allowMultiSubform: !0,
						entryList: f,
						onFieldSelect: function (a) {
							b.dialog.getWidgetByName("formulaEditor").insertField(a, !1)
						},
						onFieldFilter: function (a) {
							return !(!c.currentSubform || !a.subform) && a.subform !== c.currentSubform
						}
					});
				if (c.supportMultiForm)
					var j = a('<div class="tab"/>').text("").click(function () {
							e && e.removeClass("active"),
							j && j.addClass("active"),
							i && i.setVisible(!1),
							k && k.setVisible(!0)
						}).appendTo(d), k = new FX.EntryFieldSelectPane({
							renderEl: a("<div/>").appendTo(this.$fieldSelect),
							mode: "dialog",
							height: g,
							visible: !1,
							fields: [],
							availableFields: c.availableFieldName,
							allowMultiTable: !0,
							allowSameField: !0,
							allowMultiSubform: !0,
							entryList: c.entryList,
							onFieldSelect: function (a) {
								a.appId && (a.id = [a.id, a.appId].join(FX.CONST.FIELD.DELIMITER)),
								b.dialog.getWidgetByName("formulaEditor").insertField(a, !0)
							}
						})
			},
			_createEditDialog: function () {
				var a = this.options,
				b = [380];
				a.hasRemind && (b = [350, 30]),
				this.dialog = new FX.ConfirmDialog({
						title: "",
						width: 620,
						height: 510,
						contentWidget: {
							rowSize: b,
							colSize: [220, 350],
							hgap: 15,
							vgap: 10,
							padding: 15,
							items: [[this.$fieldSelect, {
										type: "formulaeditor",
										widgetName: "formulaEditor",
										value: a.formula.formula,
										keywords: a.formulaKeywords,
										text: a.text,
										hasFunction: a.hasFunction,
										labelMap: a.labelMap
									}
								], [{
										type: "label",
										text: " ",
										width: 130
									}, {
										type: "text",
										widgetName: "remindInfo",
										value: a.formula.remind,
										width: 440
									}
								]]
						},
						onOk: function () {
							var b = this.getWidgetByName("formulaEditor");
							if (!b.checkValidate()) {
								var c = b.getInvalidateType(),
								d = "";
								switch (c) {
								case "invalid field":
									d = " , ";
									break;
								case "deprecated field":
									d = "MAP,MAPX";
									break;
								default:
									d = ""
								}
								return FX.Msg.toast({
									type: "warning",
									msg: d
								}),
								!0
							}
							var e = this.getWidgetByName("formulaEditor").getValue(),
							f = this.getWidgetByName("remindInfo"),
							g = null;
							return f && (g = f.getValue()),
							FX.Utils.applyFunc(this, a.onAfterFormulaEdit, [e, g], !1),
							!1
						},
						onClose: function () {
							return !1
						}
					})
			}
		})
}
(jQuery), function (a) {
	FX.SharePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.SharePane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_share_pane",
					url: null,
					title: null,
					shareWays: ["sina", "qzone", "renren", "douban", "mingdao", "qrcode"]
				})
			},
			_init: function () {
				FX.SharePane.superclass._init.apply(this, arguments);
				var a = this.options,
				b = this.element,
				c = this;
				a.url && a.title && FX.Utils.forEach(a.shareWays, function (a, d) {
					b.append(c._getShareItem(d))
				})
			},
			_getShareItem: function (b) {
				var c = this,
				d = this.options,
				e = null,
				f = d.title && encodeURIComponent(d.title),
				g = d.url && encodeURIComponent(d.url);
				switch (b) {
				case "qzone":
					e = a('<a title="QQ" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + g + "&title=" + f + '" target="_blank" class="share-qzone"/>').append(a('<i class="icon-qzone"/>'));
					break;
				case "renren":
					e = a('<a title="" href="http://share.renren.com/share/buttonshare.do?link=' + g + "&title=" + f + '" target="_blank" class="share-renren"/>').append(a('<i class="icon-renren"/>'));
					break;
				case "sina":
					e = a('<a title="" href="http://v.t.sina.com.cn/share/share.php?appkey=2684493555&url=' + g + "&title=" + f + '" target="_blank" class="share-weibo"/>').append(a('<i class="icon-weibo"/>'));
					break;
				case "douban":
					e = a('<a title="" href="http://www.douban.com/recommend/?url=' + g + "&title=" + f + '" target="_blank" class="share-douban"/>').append(a('<i class="icon-douban"/>'));
					break;
				case "mingdao":
					e = a('<a title="" href="http://www.mingdao.com/share?url=' + g + "&title=" + f + '&appkey=A82BC3FB4A67" target="_blank" class="share-mingdao"/>').append(a('<i class="icon-mingdao"/>'));
					break;
				case "qrcode":
					e = a('<a title=" " class="share-qrcode"/>').append(a('<i class="icon-qrcode"/>')).click(function () {
							c._dropQrcode(e, d.url)
						});
					break;
				case "wechat":
					e = a('<a title="" class="share-wechat" />').append(a('<i class="icon-wechat"/>')).click(function () {
							c._dropQrcode(e, d.url)
						})
				}
				return e
			},
			_dropQrcode: function (b, c) {
				var d = a('<div class="qrcode-dropdown"/>');
				a("<img/>").attr("src", "/qrcode?u=" + encodeURIComponent(c)).appendTo(d),
				a("<div/>").text('""').appendTo(d),
				FX.Msg.bubble({
					anchor: b,
					text4Ok: null,
					minWidth: 150,
					text4Cancel: null,
					contentHTML: d,
					edge: 200
				})
			}
		}),
	a.shortcut("sharepane", FX.SharePane)
}
(jQuery), function (a) {
	FX.CheckPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.CheckPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_check_pane",
					items: [{
							value: 1,
							text: "1",
							custom: !0
						}
					]
				})
			},
			_init: function () {
				FX.CheckPane.superclass._init.apply(this, arguments);
				var a = this.options,
				b = this;
				this.checkItems = [],
				a.items && FX.Utils.forEach(a.items, function (a, c) {
					b._createItem(c)
				})
			},
			_createItem: function (b) {
				var c,
				d = a('<div class="check_item"/>').appendTo(this.element),
				e = {
					renderEl: a("<div/>").appendTo(d),
					text: b.text,
					width: 80
				};
				b.custom && (e.onStateChange = function (a) {
					c && c.setVisible(a)
				});
				var f = new FX.CheckBox(e);
				f.setSelected(b.selected),
				b.custom && (c = new FX.Number({
							renderEl: a('<div class="check_input"/>').appendTo(d),
							width: 75,
							value: b.value,
							allowBlank: !1,
							waterMark: "0 ~ 5",
							visible: b.selected
						})),
				this.checkItems.push({
					checkBox: f,
					custom: c
				})
			},
			getValue: function () {
				var a = this.options,
				b = this,
				c = [];
				return FX.Utils.forEach(a.items, function (a, d) {
					var e = b.checkItems[a].checkBox.getValue();
					e && d.custom && (e = b.checkItems[a].custom.getValue()),
					c.push(e)
				}),
				c
			}
		}),
	a.shortcut("formatcheckpane", FX.CheckPane)
}
(jQuery), function (a) {
	FX.ExcelGridPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ExcelGridPane.superclass._defaultConfig.call(), {
					baseCls: "fui_excel_grid",
					skip: 0,
					limit: 30,
					maxCol: 100,
					items: [],
					heads: [],
					match: [],
					showHead: !1,
					matchWidgets: [],
					widgetsMap: {},
					allowWidgets: [{
							value: "text",
							text: ""
						}, {
							value: "number",
							text: ""
						}, {
							value: "textarea",
							text: ""
						}, {
							value: "datetime",
							text: ""
						}, {
							value: "radiogroup",
							text: ""
						}, {
							value: "checkboxgroup",
							text: ""
						}, {
							value: "combo",
							text: ""
						}, {
							value: "combocheck",
							text: ""
						}
					],
					formId: null,
					async: null,
					onAsyncSuccess: null,
					onAsyncFail: null,
					onRowClick: null
				})
			},
			_init: function () {
				FX.ExcelGridPane.superclass._init.apply(this, arguments),
				this.refresh()
			},
			refresh: function (b) {
				var c = this,
				d = this.options;
				if (d.async) {
					var e = d.async.data;
					e = a.extend(e, b, {
							skip: d.skip,
							count: d.limit
						});
					var f = FX.Utils.createMask(this.element, {
							isLight: !0,
							hasLoader: !0
						});
					FX.Utils.ajax({
						url: d.async.url,
						data: e
					}, function (a, b) {
						FX.Utils.applyFunc(c, d.onAsyncSuccess, [a, b], !1),
						c.hasSubform = a.hasSubform,
						c.items = a.sample,
						c.heads = a.columns,
						c._createTable(),
						f.remove()
					}, function (a, b) {
						return FX.Utils.applyFunc(c, d.onAsyncFail, [a, b], !1),
						f.remove(),
						!1
					})
				} else
					this._createTable();
				this._bindEvents()
			},
			_createTable: function () {
				var b = this.options;
				this.element.empty(),
				this.$table = a('<table cellPadding="0" cellSpacing="0"/>').appendTo(this.element),
				this.$tbody = a("<tbody/>").appendTo(this.$table),
				this._onCreateHead(),
				this._onCreateTable(),
				b.showHead || this.setHeadRow(this.$tbody.children("tr").first())
			},
			_checkWidgetCombo: function (a) {
				var b = this.options;
				if (!(b.matchWidgets.length < 1)) {
					var c = a.getValue();
					if ("0" != c)
						return b.widgetsMap[c] ? void FX.Utils.forEach(this.headList, function (b, d) {
							var e = d.match;
							e && e.getValue() === c && e.getWidgetName() !== a.getWidgetName() && e.setValue("0")
						}) : void a.setValue("0")
				}
			},
			_onCreateHead: function () {
				var b = this.options,
				c = this;
				if (b.showHead) {
					this.$head = a("<thead/>");
					var d = a("<tr/>").appendTo(this.$head),
					e = a("<td/>").append(a('<div class="row-label"/>')).appendTo(d);
					if (this.hasSubform) {
						e.attr({
							rowspan: 2
						});
						var f = a("<tr/>").appendTo(this.$head)
					}
					var g = a("<tr/>").appendTo(this.$head),
					h = {};
					this.headList = [],
					this.colMap = {},
					this.subCols = {};
					var i,
					j = [{
							value: "0",
							text: ""
						}
					];
					b.formId ? (i = function (a) {
						if (!a.match)
							return "0";
						var c;
						switch (a.match.type) {
						case "address":
						case "location":
							c = [a.match.field, a.match.part].join("-");
							break;
						default:
							c = a.match.field
						}
						return b.widgetsMap[c] ? c : "0"
					}, a("<td/>").text("").appendTo(g), j = j.concat(b.matchWidgets), h = {
							onAfterItemSelect: function (a, d) {
								c._checkWidgetCombo(this);
								var e = this.element.closest("td"),
								f = c.colMap[e.data("col")],
								g = b.widgetsMap[d.value];
								if (f && g)
									if (f.subColumns) {
										var h = e.data("subCol");
										FX.Utils.forEach(f.subColumns, function (a, b) {
											if (b.col === h)
												return b.match = {
													type: g.type,
													text: d.text,
													field: d.value
												},
											!1
										})
									} else
										f.match = {
											type: g.type,
											text: d.text,
											field: d.value
										};
								c._onCreateTable()
							}
						}) : (a("<td/>").text("").appendTo(g), j = j.concat(b.allowWidgets), i = function (a) {
						return a.match ? a.match.type : "0"
					}, h = {
							onAfterItemSelect: function (a, b) {
								var d = this.element.closest("td"),
								e = c.colMap[d.data("col")];
								"0" != b.value && e && (e.match = {
										type: b.value
									}),
								c._onCreateTable()
							}
						}),
					FX.Utils.forEach(c.heads, function (e, k) {
						var l = {};
						if (b.matchWidgets.length > 0) {
							var m = a("<td/>").append(a("<span/>").text(k.text)).appendTo(d);
							c.hasSubform && m.attr({
								rowspan: k.rowspan,
								colspan: k.colspan
							})
						} else
							l.text = new FX.TextEditor({
									renderEl: a("<div/>").appendTo(a("<td/>").appendTo(d)),
									customCls: "widget-cell",
									allowBlank: !1,
									text: k.text,
									width: 160
								});
						k.subColumns ? FX.Utils.forEach(k.subColumns, function (b, d) {
							var e = {};
							c.subCols[d.col] = d.col,
							a("<td/>").append(a("<span/>").text(d.text)).appendTo(f),
							e.match = new FX.ComboBox(a.extend({
										renderEl: a("<div/>").appendTo(a("<td/>").data({
												col: k.col,
												subCol: d.col
											}).appendTo(g)),
										customCls: "widget-cell",
										items: j,
										searchable: !1,
										allowBlank: !1,
										value: i(d),
										width: 160
									}, h)),
							c.headList.push(e),
							c._checkWidgetCombo(e.match)
						}) : (l.match = new FX.ComboBox(a.extend({
										renderEl: a("<div/>").appendTo(a("<td/>").data({
												col: k.col
											}).appendTo(g)),
										customCls: "widget-cell",
										items: j,
										searchable: !1,
										allowBlank: !1,
										value: i(k),
										width: 160
									}, h)), c.headList.push(l), c._checkWidgetCombo(l.match)),
						c.colMap[k.col] = k
					}),
					this.$table.append(this.$head)
				}
			},
			_onCreateTable: function () {
				this.$tbody ? this.$tbody.empty() : this.$tbody = a("<tbody/>").appendTo(this.$table);
				var b = this,
				c = this.options;
				this.rowIdx = 0,
				c.showHead ? FX.Utils.forEach(this.items, function (a, c) {
					b.onCreateMatchRow(a, c)
				}) : FX.Utils.forEach(this.items, function (a, c) {
					var d = b.onCreateRow(a, c);
					b.$tbody.append(d)
				})
			},
			onCreateMatchRow: function (b, c) {
				var d = this,
				e = (this.options, a("<tr/>").data("rowIdx", this.rowIdx).appendTo(this.$tbody)),
				f = 1,
				g = [];
				for (FX.Utils.forEach(this.subCols, function (a, b) {
						c[a] && c[a].length > f && g.push(c[a].length)
					}); g.length >= 2; )
					g.push(FX.Utils.LCM(g.pop(), g.pop()));
				f = g[0] > f ? g[0] : f;
				var h = [e];
				if (f > 1)
					for (var i = 1; i < f; i++)
						h[i] = a("<tr/>").data("rowIdx", this.rowIdx).appendTo(this.$tbody);
				FX.Utils.forEach(d.colMap, function (b, g) {
					var i = c[b];
					if (FX.Utils.isArray(i) && i.length > 0) {
						var j = f / i.length,
						k = g.subColumns;
						FX.Utils.forEach(i, function (b, c) {
							var e = b * f / i.length;
							FX.Utils.forEach(k, function (b, f) {
								var g = c[f.col];
								g = d._formatData(f.match, g),
								a("<td/>").append(a("<span/>").text(g)).appendTo(h[e]).attr({
									rowspan: j
								})
							})
						})
					} else
						g.subColumns ? FX.Utils.forEach(g.subColumns, function (b, c) {
							a("<td/>").append(a("<span/>")).appendTo(h[0]).attr({
								rowspan: f
							})
						}) : a("<td/>").append(a("<span/>").text(d._formatData(g.match, i))).appendTo(e).attr({
							rowspan: f
						})
				}),
				a("<td/>").append(a("<span/>").text(b + 1)).prependTo(e).attr({
					rowspan: f
				})
			},
			_formatData: function (a, b) {
				var c = b;
				if (a)
					switch (a.type) {
					case "datetime":
						if (!FX.Utils.isNumber(b)) {
							c = b;
							break
						}
						c = FX.Utils.date2Str(new Date(Math.round((b - FX.Time.excelDayOffset) * FX.Time.millisecondsOfDay - FX.TimeZone.defaultOffset)), "yyyy-MM-dd HH:mm:ss");
						break;
					default:
						c = b
					}
				return c
			},
			onCreateRow: function (b, c) {
				var d = this,
				e = this.options,
				f = a("<tr/>").data("rowIdx", this.rowIdx),
				g = 1,
				h = 1,
				i = !0;
				return d.rowSpan || (d.rowSpan = {}),
				FX.Utils.forEach(c, function (b, c) {
					if (b > e.maxCol)
						return !1;
					if (FX.Utils.isObjectEmpty(c)) {
						if (h > 1)
							return void h--;
						if (d.rowSpan[b] > 1)
							return i = !1, void d.rowSpan[b]--
					}
					a("<td/>").append(a("<span/>").text(c.value)).appendTo(f).attr({
						rowspan: c.rowspan,
						colspan: c.colspan
					}),
					c.rowspan > g && (g = c.rowspan),
					c.rowspan > 1 && (d.rowSpan[b] = c.rowspan),
					c.colspan > h && (h = c.colspan)
				}),
				i && (e.showHead ? a("<td/>").append(a("<span/>").text(this.rowIdx + 1)).prependTo(f) : a('<td class="row-idx"/>').append(a('<span class="row-num"/>').text(this.rowIdx + 1)).append(a('<span class="row-label"/>').text(" ")).prependTo(f).attr({
						rowspan: g
					}), this.rowIdx++),
				f
			},
			_bindEvents: function () {
				var b = this,
				c = this.options;
				if (!c.showHead) {
					var d = function (c) {
						var d = c.target,
						e = c.type,
						f = a(d).closest("tr");
						f && "click" === e && b.setHeadRow(f)
					};
					this.element.unbind("click.tr", d),
					this.element.bind("click.tr", d)
				}
			},
			setHeadRow: function (b) {
				a("tr", this.element).removeClass("row-disable row-head"),
				b.prevAll("tr").addClass("row-disable"),
				b.addClass("row-head"),
				this.headIdx = b.data("rowIdx")
			},
			getHeadRow: function () {
				return this.headIdx ? this.headIdx : 0
			},
			getCreateHeadData: function () {
				var a = [];
				return FX.Utils.forEach(this.headList, function (b, c) {
					if ("0" != c.match.getValue()) {
						var d = c.match.element.closest("td"),
						e = d.data("col"),
						f = {
							col: e,
							match: {
								text: c.text.getValue(),
								type: c.match.getValue()
							}
						};
						a.push(f)
					}
				}),
				a
			},
			getHeadData: function () {
				var a = this.options,
				b = [],
				c = {};
				return FX.Utils.forEach(this.headList, function (d, e) {
					var f = {},
					g = e.match.getValue();
					if (g && "0" !== g) {
						var h = e.match.element.closest("td"),
						i = h.data("col"),
						j = h.data("subCol"),
						k = a.widgetsMap[g],
						l = g.split("-");
						l.length > 1 && (f.match = {
								field: l[0],
								part: l[1],
								type: k.type
							}),
						f.match || (f.match = {
								field: g,
								type: k.type
							}),
						f.col = i,
						k && k.subform ? (f.subform = k.subform, f.col = j, FX.Utils.isNull(c[k.subform]) ? (c[k.subform] = b.length, b.push({
									match: {
										type: "subform",
										field: k.subform
									},
									col: i,
									subColumns: [f]
								})) : b[c[k.subform]].subColumns.push(f)) : b.push(f)
					}
				}),
				b
			}
		}),
	a.shortcut("excelgridpane", FX.ExcelGridPane)
}
(jQuery), function (a) {
	FX.ExcelImportPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ExcelImportPane.superclass._defaultConfig.apply(this, arguments), {
					formId: null,
					formName: "",
					formItems: [],
					version: 0,
					hasCoop: !1,
					authGroupId: null,
					dialog: null,
					groupItems: [],
					onFinish: null
				})
			},
			_init: function () {
				this.$previewGridRow = a('<div class="excel-import-table"/>'),
				this.$previewBtnRow = a('<div class="excel-import-foot"/>'),
				this.$fieldGridRow = a('<div class="excel-import-table"/>'),
				this.$navBtnRow = a('<div class="excel-import-foot"/>'),
				this._createUploadBtnRow(),
				this._createFinishInfoRow(),
				this._createDialog(),
				this._initFormItems()
			},
			_initFormItems: function () {
				var a = this.options,
				b = this;
				this.formItems = [],
				this.widgetsMap = {},
				FX.Utils.forEach(a.formItems, function (a, c) {
					if (!(FX.LimitFields.import.indexOf(c.widget.type) < 0))
						if ("subform" === c.widget.type && FX.Utils.forEach(c.widget.items, function (a, d) {
								FX.LimitFields.import.indexOf(d.widget.type) < 0 || (b.widgetsMap[d.widget.widgetName] = {
										type: d.widget.type,
										field: d.widget.widgetName,
										subform: c.widget.widgetName
									}, b.formItems.push({
										value: d.widget.widgetName,
										text: [c.label, d.label].join(".")
									}))
							}), "address" === c.widget.type) {
							var d = [{
									v: "province",
									t: "(//)"
								}, {
									v: "city",
									t: "()"
								}, {
									v: "district",
									t: "(/)"
								}
							];
							c.widget.needDetail && d.push({
								v: "detail",
								t: "()"
							}),
							FX.Utils.forEach(d, function (a, d) {
								var e = [c.widget.widgetName, d.v].join("-");
								b.formItems.push({
									value: e,
									text: c.label + d.t
								}),
								b.widgetsMap[e] = {
									field: c.widget.widgetName,
									type: c.widget.type
								}
							})
						} else
							"subform" !== c.widget.type && (b.formItems.push({
									value: c.widget.widgetName,
									text: c.label
								}), b.widgetsMap[c.widget.widgetName] = {
									field: c.widget.widgetName,
									type: c.widget.type
								})
				})
			},
			_createDialog: function () {
				var a = this.options,
				b = {
					type: "dialog",
					title: " Excel ",
					autoClose: !1,
					width: 650,
					height: 550,
					contentWidget: {
						rowSize: [60, 170, 30, 230, 50, 400, 50, 400, 50, 400, 50],
						colSize: [650],
						hgap: 0,
						vgap: 0,
						padding: 0,
						items: [[{
									type: "progresssteppane",
									widgetName: "importStep",
									steps: ["Excel", "", "", ""]
								}
							], [this._createTipRow()], [{
									type: "progress",
									customCls: "import-progress",
									widgetName: "importProgress"
								}
							], [{}
							], [this.$uploadRow], [this.$previewGridRow], [this.$previewBtnRow], [this.$fieldGridRow], [this.$navBtnRow], [this.$importInfo], [this.$finishBtnRow]]
					},
					onClose: function () {}
				};
				a.dialog ? (a.dialog.rebuildContent(b), this.dialog = a.dialog) : this.dialog = new FX.Dialog(b),
				this.element = this.dialog.element,
				this.container = this.dialog.container,
				this.container.setRowVisible([2, 5, 6, 7, 8, 9, 10], !1),
				this.dialog.show()
			},
			_createTipRow: function () {
				var b = this.options,
				c = '<ul class="import-tip"><span>  Excel </span>';
				return c += b.formId ? '<li><div class="tip"></div><span></span><span class="x-c-key"> </span><span></span></li>' : '<li><div class="tip"></div><span> </span></li>',
				c += '<li><div class="tip"></div><span> ' + this._getUploadSize() + 'MB</span></li><li><div class="tip"></div><span> (*.xls  *.xlsx) </span></li></ul>',
				a(c)
			},
			_getUploadSize: function () {
				return FX.Vip.getExcelMFS() / 1024 / 1024
			},
			_createUploadBtnRow: function () {
				var b = this,
				c = this.options;
				return this.$uploadRow = a('<div class="excel-import-foot"/>'),
				this.upload = new FX.FileUpload({
						renderEl: a('<div class="excel-import-btn"/>').appendTo(this.$uploadRow),
						widgetName: "excelUpload",
						maxFileSize: FX.Vip.getExcelMFS(),
						size: "small",
						style: "green",
						fileType: ["xlsx", "xls"],
						uploadURL: "/dashboard/app/" + FX.STATIC.APPID + "/excel/upload",
						uploadSite: "local",
						uploadToForm: !1,
						hasProgress: !1,
						onUpload: function (a, c) {
							var d = parseInt(a / c * 100);
							b.container.getWidgetByName("importProgress").setMessage("  ..."),
							b.container.setRowVisible([2], !0),
							b.container.setRowVisible([3], !1),
							b.container.getWidgetByName("importProgress").setProgress(d)
						},
						onUploadSuccess: function (a) {
							var c = a.pop();
							if (c)
								return b.container.getWidgetByName("importProgress").setProgress(100), b.container.getWidgetByName("importProgress").setMessage(" "), b._previewExcelData(c), !1
						},
						onUploadFail: function () {
							return b.container.getWidgetByName("importProgress").setProgress(0),
							b.container.getWidgetByName("importProgress").setMessage(" "),
							b.container.setRowVisible([3], !0),
							b.container.setRowVisible([2], !1),
							!1
						}
					}),
				c.formId ? void new FX.Button({
					renderEl: a("<div class='excel-import-btn'/>").appendTo(this.$uploadRow),
					style: "white",
					text: " ",
					width: 90,
					height: 36,
					onClick: function () {
						FX.Utils.dataAjax({
							url: "/data/list/excel_template",
							data: {
								formId: c.formId,
								authGroupId: c.authGroupId
							}
						}, function (a) {
							FX.Utils.fileDownload(a.url, a.name)
						}, function () {
							FX.Msg.toast({
								msg: "",
								type: "error"
							})
						})
					}
				}) : void this.$uploadRow.addClass("import-foot-single")
			},
			_previewExcelData: function (a) {
				this.cacheKey = a.cacheKey,
				this.sheetName = a.sheetList[0];
				var b = this.upload.getUpFiles();
				this.formName = "",
				b && b.length > 0 && (this.formName = b[0].name.replace(".xlsx", "").replace(".xls", "")),
				this._createPreviewGridRow(a),
				this.container.setRowVisible([5, 6], !0),
				this.container.setRowVisible([1, 2, 3, 4], !1),
				this.container.getWidgetByName("importStep").goNextStep()
			},
			_createPreviewGridRow: function (b) {
				var c = this,
				d = this.options;
				this.$previewGridRow.empty();
				var e = a('<div class="excel-import-tool"/>').append(a("<span/>").text("")).appendTo(this.$previewGridRow),
				f = [];
				FX.Utils.forEach(b.sheetList, function (a, b) {
					0 === a && (c.sheetName = b),
					f.push({
						value: b,
						text: b
					})
				}),
				new FX.ComboBox({
					renderEl: a("<div/>").appendTo(a('<div class="excel-import-name"/>').appendTo(e)),
					width: 190,
					searchable: !1,
					allowBlank: !1,
					items: f,
					value: c.sheetName,
					onAfterItemSelect: function (a, b) {
						c.sheetName !== this.getValue() && (c.sheetName = this.getValue(), c.previewGrid.refresh({
								sheetName: c.sheetName,
								cacheKey: c.cacheKey
							}))
					}
				}),
				this.previewGrid = new FX.ExcelGridPane({
						renderEl: a('<div class="excel-import-grid"/>').appendTo(this.$previewGridRow),
						async: {
							url: "/dashboard/app/" + FX.STATIC.APPID + "/excel/get_sample",
							data: {
								cacheKey: this.cacheKey,
								sheetName: b.sheetList[0],
								entryId: d.formId
							}
						}
					}),
				this.$previewBtnRow.empty(),
				this.prevBtn = new FX.Button({
						renderEl: a('<div class="excel-import-btn"/>').appendTo(this.$previewBtnRow),
						text: "",
						width: 90,
						height: 36,
						style: "white",
						onClick: function () {
							c.container.setRowVisible([2, 5, 6], !1),
							c.container.setRowVisible([1, 3, 4], !0),
							c.container.getWidgetByName("importStep").goPrevStep(),
							c.upload.doClear()
						}
					}),
				this.nextBtn = new FX.Button({
						renderEl: a('<div class="excel-import-btn"/>').appendTo(this.$previewBtnRow),
						type: "button",
						text: "",
						width: 90,
						height: 36,
						style: "green",
						onClick: function () {
							c._matchExcelData()
						}
					})
			},
			_matchExcelData: function () {
				this._createFieldGridRow(),
				this.container.setRowVisible([5, 6], !1),
				this.container.setRowVisible([7, 8], !0),
				this.container.getWidgetByName("importStep").goNextStep()
			},
			_createFieldGridRow: function () {
				var b = this,
				c = this.options;
				this.$fieldGridRow.empty();
				var d = a('<div class="excel-import-tool"/>').appendTo(this.$fieldGridRow),
				e = !1;
				c.formName && (this.formName = c.formName, e = !0),
				d.append(a("<span/>").text(""));
				var f = new FX.TextEditor({
						renderEl: a("<div/>").appendTo(a('<div class="excel-import-name"/>').appendTo(d)),
						width: 190,
						text: this.formName,
						allowBlank: !1
					});
				if (e && f.setEnable(!1), !e) {
					d.append(a("<span/>").text(""));
					var g = new FX.ComboBox({
							renderEl: a("<div/>").appendTo(a('<div class="excel-import-name"/>').appendTo(d)),
							width: 190,
							searchable: !1,
							allowBlank: !1,
							value: "1",
							items: c.groupItems
						})
				}
				this.fieldGrid = new FX.ExcelGridPane({
						renderEl: a('<div class="excel-import-grid"/>').appendTo(this.$fieldGridRow),
						async: {
							url: "/dashboard/app/" + FX.STATIC.APPID + "/excel/match_head",
							data: {
								cacheKey: b.cacheKey,
								baseRow: b.previewGrid.getHeadRow(),
								sheetName: b.sheetName,
								entryId: c.formId
							}
						},
						showHead: !0,
						matchWidgets: this.formItems,
						widgetsMap: this.widgetsMap,
						formId: c.formId
					}),
				this.$navBtnRow.empty(),
				this.prevBtn = new FX.Button({
						renderEl: a('<div class="excel-import-btn"/>').appendTo(this.$navBtnRow),
						text: "",
						width: 90,
						height: 36,
						style: "white",
						onClick: function () {
							b.container.setRowVisible([7, 8], !1),
							b.container.setRowVisible([5, 6], !0),
							b.container.getWidgetByName("importStep").goPrevStep()
						}
					}),
				this.nextBtn = new FX.Button({
						renderEl: a('<div class="excel-import-btn"/>').appendTo(this.$navBtnRow),
						type: "button",
						text: "",
						width: 90,
						height: 36,
						style: "green",
						onClick: function () {
							b.prevBtn.setEnable(!1),
							b.nextBtn.setEnable(!1),
							b._checkExcelData(f) ? b._importExcelData(f, g) : (b.prevBtn.setEnable(!0), b.nextBtn.setEnable(!0))
						}
					})
			},
			_checkExcelData: function (a) {
				var b = this.options;
				if (!b.formId) {
					if (FX.Utils.isEmpty(a.getValue()))
						return FX.Msg.alert({
							title: "",
							msg: ""
						}), !1;
					var c = this.fieldGrid.getCreateHeadData(),
					d = -1;
					if (FX.Utils.forEach(c, function (a, b) {
							if (FX.Utils.isEmpty(b.match.text))
								return d = b.col, !1
						}), d !== -1)
						return FX.Msg.alert({
							title: "",
							msg: ""
						}), !1
				}
				return !0
			},
			_importExcelData: function (b, c) {
				var d = this,
				e = this.options;
				this.container.setRowVisible([7, 8], !1),
				this.container.setRowVisible([9, 10], !0),
				this.container.getWidgetByName("importStep").goNextStep(),
				this.$importInfo.children(".info").text("..."),
				e.formId ? FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/excel/import",
					data: {
						cacheKey: d.cacheKey,
						baseRow: d.previewGrid.getHeadRow(),
						columnMatch: d.fieldGrid.getHeadData(),
						sheetName: d.sheetName,
						entryId: e.formId
					}
				}, function (b) {
					d.$importInfo.empty().append(a('<div class="success"><i class="icon-right-circle"/></div>')).append(a('<div class="info"/>').text("" + b.dataCount + "[" + d.formName + "]")),
					new FX.Button({
						renderEl: a('<div class="excel-import-button"/>').appendTo(d.$finishBtnRow),
						type: "button",
						text: "",
						width: 100,
						height: 36,
						style: "green",
						onClick: function () {
							FX.Utils.applyFunc(d, e.onFinish, [], !1),
							d.dialog.close()
						}
					})
				}, function (b) {
					var c = b.responseJSON || {};
					d.$importInfo.empty().append(a('<div class="error"><i class="icon-error-circle"/></div>')).append(a('<div class="info"/>').text(c.msg || ""))
				}) : FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/excel/create_entry",
					data: {
						cacheKey: d.cacheKey,
						baseRow: d.previewGrid.getHeadRow(),
						columnMatch: d.fieldGrid.getCreateHeadData(),
						sheetName: d.sheetName,
						name: b.getValue(),
						parent: c.getValue(),
						hasCoop: e.hasCoop
					}
				}, function (b) {
					d.$importInfo.empty().append(a('<div class="success"><i class="icon-right-circle"/></div>')).append(a('<div class="info"/>').text("" + b.dataCount + "[" + d.formName + "]")),
					new FX.Button({
						renderEl: a('<div class="excel-import-button"/>').appendTo(d.$finishBtnRow),
						type: "button",
						text: "",
						width: 100,
						height: 36,
						style: "green",
						onClick: function () {
							FX.Utils.applyFunc(d, e.onFinish, [b.entry], !1),
							d.dialog.close()
						}
					})
				}, function (b) {
					var c = b.responseJSON || {};
					d.$importInfo.empty().append(a('<div class="error"><i class="icon-error-circle"/></div>')).append(a('<div class="info"/>').text(c.msg || ""))
				})
			},
			_createFinishInfoRow: function () {
				this.$importInfo = a('<div class="excel-import-info"/>'),
				this.$finishBtnRow = a("<div class='excel-import-foot import-foot-single'/>")
			}
		}),
	a.shortcut("excelimportpane", FX.ExcelImportPane)
}
(jQuery), function (a) {
	FX.FieldAuthPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FieldAuthPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_fieldauth_pane",
					onAfterClick: null
				})
			},
			_init: function () {
				FX.FieldAuthPane.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.$list = a("<ul />").appendTo(this.element);
				var d = a('<span class="editable"/>').text("");
				a("<li />").append(a('<span class="field"/>').text("")).append(a('<span class="visible" />').text("")).append(d).appendTo(this.$list);
				var e = a('<i class="icon-help"/>').hover(function () {
						FX.UI.showPopover({
							position: "topLeft",
							anchor: e,
							content: a("<span/>").text("")
						})
					}, function () {
						FX.UI.closePopover()
					}).appendTo(d),
				f = a('<li class="select-all"/>').append(a('<span class="field"/>').text("")).append(a('<a class="x-check" />').addClass("visible").append(a('<i class="x-iconfont"/>'))).append(a('<a class="x-check"/>').addClass("editable").append(a('<i class="x-iconfont"/>'))).appendTo(this.$list);
				this._bindSelectAllEvent(f),
				FX.Utils.forEach(c.items, function (a, c) {
					var d = b._createItem(c);
					d.appendTo(b.$list)
				})
			},
			_bindSelectAllEvent: function (b) {
				var c = this,
				d = this.options;
				b.find("a").bind("click", function (b) {
					var e = a(b.currentTarget);
					if (!e.hasClass("x-ui-disable")) {
						var f = e.hasClass("select"),
						g = e.hasClass("visible") ? "visible" : "editable";
						f ? (e.removeClass("select"), c.$list.find("." + g + ":not(.x-ui-disable)").removeClass("select")) : (e.addClass("select"), c.$list.find("." + g + ":not(.x-ui-disable)").addClass("select")),
						FX.Utils.applyFunc(c, d.onAfterClick, [e], !1)
					}
				});
			},
			_createItem: function (b) {
				var c = this,
				d = (this.options, a("<li/>").data("field", b.widget.widgetName).append(a('<span class="field"/>').text(b.label))),
				e = a('<a class="x-check" />').addClass("visible").append(a('<i class="x-iconfont"/>')).appendTo(d),
				f = a('<a class="x-check"/>').addClass("editable").append(a('<i class="x-iconfont"/>')).appendTo(d);
				return ["ext", "creator", "createTime", "updateTime"].indexOf(b.widget.widgetName) >= 0 && f.addClass("x-ui-disable"),
				c._bindEvent(e, "visible"),
				c._bindEvent(f, "editable"),
				d
			},
			_bindEvent: function (a, b) {
				var c = this,
				d = this.options;
				a.bind("click", function (e) {
					a.hasClass("select");
					a.hasClass("x-ui-disable") || (a.toggleClass("select"), c._checkSelectAll(b), FX.Utils.applyFunc(c, d.onAfterClick, [a], !1))
				})
			},
			setValue: function (b) {
				var c = this.$list.children("li");
				FX.Utils.forEach(c, function (c, d) {
					var e = a(d).data("field");
					if (e && !a(d).hasClass("x-ui-disable")) {
						var f = b[e];
						f && f.visible && a(d).find(".visible").addClass("select"),
						f && f.enable && a(d).find(".editable").addClass("select")
					}
				}),
				this._checkSelectAll("visible"),
				this._checkSelectAll("editable")
			},
			setValueByType: function (a, b) {
				var c = this.$list.find("." + a);
				b ? c.addClass("select") : c.removeClass("select")
			},
			_checkSelectAll: function (a) {
				var b = this.$list.find("li.select-all a." + a),
				c = this.$list.find("li:not(.select-all) a." + a).length,
				d = this.$list.find("li:not(.select-all) a.select." + a).length;
				d === c ? b.addClass("select") : b.removeClass("select")
			},
			checkValidate: function () {
				var a,
				b = this.getValue();
				for (a in b)
					if (b[a].visible)
						return this.element.removeClass("error"), !0;
				return this.element.addClass("error"),
				FX.Msg.toast({
					type: "warning",
					msg: ""
				}),
				!1
			},
			getValue: function () {
				var b = {},
				c = this.$list.children("li");
				return FX.Utils.forEach(c, function (c, d) {
					var e = a(d).data("field");
					if (e && !a(d).hasClass("x-ui-disable")) {
						var f = a(d).find(".visible").hasClass("select"),
						g = a(d).find(".editable").hasClass("select");
						(f || g) && (b[e] = {
								visible: f,
								enable: g
							})
					}
				}),
				b
			}
		}),
	a.shortcut("fieldauthpane", FX.FieldAuthPane)
}
(jQuery), function (a) {
	FX.ExcelExportPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ExcelExportPane.superclass._defaultConfig.apply(this, arguments), {
					fields: [],
					selectedFields: [],
					forms: [],
					relations: {},
					filter: {},
					sort: [],
					name: "",
					authGroupId: null
				})
			},
			_init: function () {
				FX.ExcelExportPane.superclass._init.apply(this, arguments),
				this._createDialog()
			},
			_createDialog: function () {
				var a = (this.options, this);
				this.dialog = new FX.ConfirmDialog({
						title: "Excel",
						text4Ok: "",
						text4Cancel: "",
						width: 460,
						height: 450,
						contentWidget: {
							rowSize: [30, 30, 250],
							colSize: [430],
							hgap: 10,
							vgap: 10,
							padding: 15,
							items: [[{
										type: "radiogroup",
										widgetName: "filter",
										items: [{
												value: "all",
												text: ""
											}, {
												value: "filtered",
												text: ""
											}
										],
										layout: "horizontal",
										allowBlank: !1,
										value: "filtered"
									}
								], [{
										type: "label",
										text: ""
									}
								], [{
										type: "grid",
										widgetName: "fieldGrid",
										multiSelect: !0,
										width: 430,
										customCls: "excel-export-grid",
										items: a.getGridItems(),
										columnsConfig: [{
												key: "text",
												value: ""
											}
										]
									}
								]]
						},
						onOk: function () {
							var b = FX.Utils.createMask(this.element, {
									isLight: !0,
									hasLoader: !0
								});
							FX.Utils.dataAjax({
								url: "/data/list/excel_export",
								data: a.getPostParam()
							}, function (b) {
								a.close(),
								FX.Utils.fileDownload(b.url, b.name)
							}, function (b) {
								a.close();
								var c = b.responseJSON || {};
								FX.Msg.toast({
									type: "error",
									msg: c.msg || ""
								})
							}, function () {
								b.remove()
							})
						}
					})
			},
			getPostParam: function () {
				var a = this.options;
				return {
					fields: this.dialog.getWidgetByName("fieldGrid").getSelectedData(),
					forms: a.forms,
					relations: a.relations,
					filter: "all" == this.dialog.getWidgetByName("filter").getValue() ? {}
					 : a.filter,
					sort: a.sort,
					name: a.name,
					authGroupId: a.authGroupId
				}
			},
			getGridItems: function () {
				var b = this.options,
				c = {},
				d = [];
				return FX.Utils.forEach(b.selectedFields, function (a, b) {
					c[b.name] = !0
				}),
				FX.Utils.forEach(b.fields, function (b, e) {
					var f = {};
					c[e.name] && (f.selected = !0),
					d.push(a.extend({}, e, f))
				}),
				d
			},
			show: function () {
				this.dialog.show()
			},
			close: function () {
				this.dialog.close()
			}
		}),
	a.shortcut("excelexportpane", FX.ExcelExportPane)
}
(jQuery), function (a) {
	FX.ProgressStepPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ProgressStepPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_step_pane",
					steps: [],
					currentStep: 0
				})
			},
			_init: function () {
				FX.ProgressStepPane.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				this.currentStep = b.currentStep,
				FX.Utils.forEach(b.steps, function (b, d) {
					var e = a('<div class="progress-step">').append(a('<div class="step-message"/>').text(d)).append(a('<span class="step-point"/>')).appendTo(c.element);
					e.addClass("step-" + b),
					0 !== b && e.append(a('<div class="step-line"/>')),
					b <= c.currentStep && (e.addClass("select"), b === c.currentStep && e.addClass("current"))
				})
			},
			goNextStep: function () {
				a(".progress-step.current", this.element).removeClass("current"),
				this.currentStep++,
				a(".progress-step.step-" + this.currentStep, this.element).addClass("select current")
			},
			goPrevStep: function () {
				a(".progress-step.current", this.element).removeClass("current select"),
				this.currentStep--,
				a(".progress-step.step-" + this.currentStep, this.element).addClass("select current")
			}
		}),
	a.shortcut("progresssteppane", FX.ProgressStepPane)
}
(jQuery), function (a) {
	FX.ListDialog = FX.extend(FX.ConfirmDialog, {
			_defaultConfig: function () {
				return a.extend(FX.ListDialog.superclass._defaultConfig.apply(), {
					items: [],
					customCls: "x-list-dialog",
					text4ItemAdd: " ",
					text4Ok: "",
					text4Cancel: "",
					btnPosition: "right",
					autoClose: !1,
					onBeforeItemAdd: null,
					onBeforeItemSelect: null,
					onItemAdd: null,
					onItemCreate: null,
					onItemSelect: null,
					onItemRemove: null,
					onItemAvailable: null,
					onNoItemAvailable: null,
					onOk: null,
					onCancel: null
				})
			},
			_init: function () {
				FX.ListDialog.superclass._init.apply(this, arguments),
				this._createItemList(),
				this._bindItemEvents()
			},
			_createItemList: function () {
				var b = this,
				c = this.options;
				this.$listPane = a('<div class="list-panel"/>').appendTo(this.$content),
				this.$itemlist = a('<ul class="item-list"/>').appendTo(this.$listPane),
				FX.Utils.forEach(c.items, function (a, c) {
					b._createItem(c)
				}),
				this.$selected = null,
				b._selectDefaultItem(),
				a('<div class="add-btn"/>').append(a('<i class="x-iconfont icon-add"/>')).append(a("<span/>").text(c.text4ItemAdd)).click(function () {
					if (FX.Utils.applyFunc(b, c.onBeforeItemAdd, [c.items], !1) === !1) {
						var a = FX.Utils.applyFunc(b, c.onItemAdd, [], !1);
						if (a) {
							c.items.push(a);
							var d = b._createItem(a);
							b._selectItem(d)
						}
					}
				}).appendTo(this.$listPane)
			},
			_createItem: function (b) {
				var c = this.options,
				d = a('<li class="dialog-item"/>').data("item", b).appendTo(this.$itemlist);
				return FX.Utils.applyFunc(this, c.onItemCreate, [b, d], !1) === !1 && d.append(a('<span class="item-text"/>').text(b.text)),
				d.append(a('<i class="x-iconfont item-remove icon-trasho"/>'))
			},
			_removeItem: function (a) {
				var b = this.options,
				c = a.data("item");
				if (FX.Utils.applyFunc(this, b.onItemRemove, [c, a], !1) === !1) {
					var d = a.index();
					b.items.splice(d, 1),
					a.remove(),
					this._selectDefaultItem(d)
				}
			},
			_selectItem: function (a) {
				var b = this.options;
				if (FX.Utils.applyFunc(this, b.onBeforeItemSelect, [b.items], !1) === !1) {
					a.siblings(".selected").removeClass("selected"),
					a.addClass("selected"),
					this.$selected = a;
					var c = a.data("item");
					FX.Utils.applyFunc(this, b.onItemAvailable, [], !1),
					FX.Utils.applyFunc(this, b.onItemSelect, [c, a], !1)
				}
			},
			_selectDefaultItem: function (a) {
				var b = this.options;
				a && b.items[a] || (a > 0 && b.items[a - 1] ? a -= 1 : a = 0);
				var c = this.$itemlist.children().eq(a);
				FX.Utils.isObjectEmpty(c) ? FX.Utils.applyFunc(this, b.onNoItemAvailable, [], !1) : this._selectItem(c)
			},
			_bindItemEvents: function () {
				var b = this,
				c = function (c) {
					var d = c.target,
					e = c.type;
					if ("click" === e) {
						var f = a(d).closest(".dialog-item"),
						g = a(d).closest(".item-remove");
						if (!f || 0 === f.length)
							return;
						g && g.length > 0 ? b._removeItem(f) : b._selectItem(f)
					}
				};
				this.$itemlist.unbind(".item-list"),
				this.$itemlist.bind({
					"click.item-list": c
				})
			},
			setSelectItemText: function (a) {
				FX.Utils.isObjectEmpty(this.$selected) || this.$selected.children(".item-text").text(a)
			},
			getItems: function () {
				return this.options.items
			}
		}),
	a.shortcut("listdialog", FX.ListDialog)
}
(jQuery), function (a) {
	FX.TitleEditor = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.TitleEditor.superclass._defaultConfig.apply(), {
					baseCls: "fx_title_editor",
					name: "",
					defaultName: "",
					editable: !0,
					onStopEdit: null
				})
			},
			_init: function () {
				FX.TitleEditor.superclass._init.apply(this, arguments);
				var b = this.options;
				b.editable ? this.element.append('<input value="' + b.name + '"/><span class="name-pre">' + b.name + "</span>") : this.element.append(a("<span>" + b.name + "<span/>")),
				this._bindEvent()
			},
			_bindEvent: function () {
				var b = this.options,
				c = this;
				if (b.editable) {
					this.needTip = !0;
					var d = this.element.children("input");
					b.name === b.defaultName && d.focus().select();
					var e = this.element.children(".name-pre");
					d.width(e.outerWidth()),
					d.on("input", function () {
						e.text(d.val()),
						d.width(e.outerWidth())
					}),
					d.on("keydown", function (b) {
						13 === b.keyCode && a(this).blur()
					}),
					d.on("focus", function () {
						c.needTip = !1,
						FX.UI.closePopover()
					}),
					d.blur(function () {
						c.needTip = !0;
						var f = a(this).val();
						f || (f = b.defaultName, e.text(f), a(this).val(f), d.width(e.outerWidth())),
						f !== b.name && FX.Utils.applyFunc(c, b.onStopEdit, [{
									name: f
								}
							], !1)
					}),
					d.hover(function () {
						c.needTip && FX.UI.showPopover({
							position: "bottomLeft",
							anchor: d,
							content: a("<span/>").text(""),
							type: "dark"
						})
					}, function () {
						c.needTip && FX.UI.closePopover()
					})
				}
			}
		})
}
(jQuery), function (a) {
	FX.AppTitle = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.AppTitle.superclass._defaultConfig.apply(), {
					baseCls: "fx_app_title",
					name: "",
					icon: "",
					defaultName: "",
					editable: !0,
					hasMenu: !1,
					hasPreview: !1,
					onStopEdit: null
				})
			},
			_init: function () {
				FX.AppTitle.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this;
				if (b.hasMenu) {
					var d = "icon-app-menu";
					FX.Utils.isEmpty(b.icon) || (d = "icon-cover-" + b.icon),
					this.element.append(a('<div class="nav-home"><i class=' + d + "/></div>"))
				} else
					this.element.append(a('<a class="nav-home" href="/dashboard"><i class="icon-angleleft"/></a>'));
				b.editable && this.element.addClass("editable"),
				new FX.TitleEditor({
					renderEl: a("<div/>").appendTo(this.element),
					customCls: "nav-title",
					defaultName: b.defaultName,
					name: b.name,
					editable: b.editable,
					onStopEdit: function (a) {
						c.saveAttr(a)
					}
				}),
				b.hasPreview && this.element.append(a('<div class="nav-preview"><div class="btn"></div></div>')),
				b.hasMenu && this.element.append(a('<div class="nav-group"><i class="icon-caret-down"/></div><div class="anchor"/>')),
				this._bindEvent()
			},
			_bindEvent: function () {
				var b = this.options,
				c = this;
				b.hasPreview && a(".nav-preview", this.element).click(function () {
					var c = a("<div/>"),
					d = new FX.Slider({
							title: b.name,
							content: c
						});
					new FX.Platform({
						appId: FX.STATIC.APPID,
						renderEl: c
					}),
					d.show()
				}),
				b.hasMenu && this.element.click(function () {
					var b = a(this);
					FX.Utils.ajax({
						url: "/dashboard/apps"
					}, function (d) {
						var e = a('<ul class="app-view-list"><li class="app-item"><a href="/dashboard"><i class="icon-home"/></a><div class="app-title"></span></li></ul>');
						FX.Utils.forEach(d.apps, function (b, c) {
							e.append(a('<li class="app-item"><a href="/dashboard/app/' + c._id + '"><i class="icon-app icon-cover-' + c.icon + " color-cover-icon-" + c.color + '"/></a><div class="app-title">' + c.name + "</span></li>"))
						}),
						FX.Msg.bubble({
							anchor: b.children(".anchor"),
							contentHTML: e,
							text4Cancel: null,
							text4Ok: null,
							contentPadding: 0,
							hAdjust: c._getOffset(b.outerWidth(), d.apps.length + 1)
						})
					})
				})
			},
			_getOffset: function (a, b) {
				return Math.min(a / 2, 60 * Math.min(5, b))
			},
			saveAttr: function (b) {
				var c = this.options,
				d = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/update",
					data: b
				}, function () {
					a.extend(c, b),
					FX.Utils.applyFunc(d, c.onStopEdit, [b], !1)
				})
			}
		}),
	a.shortcut("apptitle", FX.AppTitle)
}
(jQuery), function (a) {
	FX.EntryTitle = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.EntryTitle.superclass._defaultConfig.apply(), {
					baseCls: "fx_entry_title",
					appId: "",
					entryId: "",
					name: "",
					defaultName: "",
					parent: "",
					onStopEdit: null,
					onNavHome: null
				})
			},
			_init: function () {
				FX.EntryTitle.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this,
				d = a('<a class="nav-home"><i class="icon-angleleft"/></a>').appendTo(this.element);
				b.onNavHome ? d.click(function () {
					FX.Utils.applyFunc(c, b.onNavHome, [], !1)
				}) : d.attr("href", "/dashboard/app/" + b.appId + "/edit"),
				new FX.TitleEditor({
					renderEl: a("<div/>").appendTo(this.element),
					customCls: "nav-title",
					defaultName: b.defaultName,
					name: b.name,
					editable: !0,
					onStopEdit: function (a) {
						c.saveAttr(a)
					}
				})
			},
			saveAttr: function (b) {
				var c = this.options,
				d = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + c.appId + "/entry/" + c.entryId + "/update",
					data: b
				}, function () {
					a.extend(c, b),
					FX.Utils.applyFunc(d, c.onStopEdit, [b], !1)
				})
			}
		}),
	a.shortcut("entrytitle", FX.EntryTitle)
}
(jQuery), function (a) {
	FX.EntryShare = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.EntryShare.superclass._defaultConfig.apply(), {
					baseCls: "fx_share",
					entryId: "",
					btnStyle: "blue",
					btnText: ""
				})
			},
			_init: function () {
				FX.EntryShare.superclass._init.apply(this, arguments);
				var a = this,
				b = this.options;
				FX.Utils.isEmpty(b.entryId) || new FX.Button({
					renderEl: a.element,
					style: b.btnStyle,
					iconCls: "icon-share",
					text: b.btnText,
					width: 80,
					height: 30,
					onClick: function () {
						FX.Utils.dt(FX.CONST.TRACKER.FORM_SHARE),
						FX.Utils.ajax({
							url: "/dashboard/app/" + FX.STATIC.APPID + "/entry_auth/get",
							data: {
								ids: [b.entryId]
							}
						}, function (c) {
							a._showShareDialog(c.entryUserMap[b.entryId] || [])
						}, function () {
							FX.Msg.toast({
								type: "error",
								msg: " "
							})
						})
					}
				})
			},
			_showShareDialog: function (a) {
				var b = this.options,
				c = new FX.ConfirmDialog({
						title: "",
						height: 570,
						width: 600,
						contentWidget: {
							rowSize: [450],
							colSize: [570],
							padding: 15,
							items: [[{
										widgetName: "memberSelect",
										type: "memberselectpane",
										editable: !0,
										value: a
									}
								]]
						},
						onOk: function () {
							var a = c.getWidgetByName("memberSelect"),
							d = {};
							return d[b.entryId] = a.getValue(),
							FX.Utils.ajax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/entry_auth/set",
								data: {
									entryAuth: d
								}
							}, function () {
								FX.Msg.toast({
									type: "success",
									msg: ""
								})
							}, function () {
								FX.Msg.toast({
									type: "error",
									msg: ""
								})
							}),
							!1
						}
					});
				c.show()
			}
		}),
	a.shortcut("entryshare", FX.EntryShare)
}
(jQuery), function (a) {
	FX.ImageDialog = FX.extend(FX.ConfirmDialog, {
			_defaultConfig: function () {
				return a.extend(FX.ImageDialog.superclass._defaultConfig.apply(), {
					title: " ",
					width: 630,
					height: 330,
					contentWidget: {
						padding: 16
					},
					onOk: null
				})
			},
			_init: function () {
				FX.ImageDialog.superclass._init.apply(this, arguments),
				this.url = "",
				this.element.addClass("x-image-dialog"),
				this._bindTypeSelectEvents()
			},
			_createContent: function (b) {
				var c = this,
				d = this.options;
				FX.Utils.applyFunc(this, d.onContentCreate, [b], !1) === !1 && (this.$typeSelect = a('<div class="type-select"/>').appendTo(b), this.$typeUpload = a('<div class="type-item type-upload"/>').append(a('<i class="icon-type icon-image"/>')).append(a('<span class="type-label"/>').text(" ")).appendTo(this.$typeSelect), this.$typeURL = a('<div class="type-item type-url"/>').append(a('<i class="icon-type icon-link"/>')).append(a('<span class="type-label"/>').text(" URL")).appendTo(this.$typeSelect), this.widgetContainer = new FX.TableContainer({
							renderEl: a('<div class="widget-container"/>').appendTo(b),
							rowSize: [30, 155, 30, 20, 30, 30],
							colSize: [430, 180],
							vgap: 8,
							items: [[{
										type: "label",
										customCls: "widget-title",
										text: " ",
										width: 100
									}, {
										type: "label",
										customCls: "widget-subtitle",
										text: " 1 MB"
									}
								], [{
										type: "upload",
										fileType: ["jpg", "png", "gif"],
										maxFileSize: 1048576,
										uploadToMedia: !0,
										hasPreview: !1,
										onUploadSuccess: function (a) {
											var b = a[0];
											b && (c.url = FX.CONFIG.HOST.IMAGE_HOST + "/" + b.qnKey)
										}
									}, null], [{
										type: "label",
										customCls: "widget-title",
										text: " URL"
									}, null], [{}, null], [{
										type: "text",
										waterMark: "https://",
										regex: "^http",
										onStopEdit: function (a) {
											a ? c.url = this.getValue() : this.showErrorMsg(" URL")
										}
									}, null], [{
										type: "label",
										customCls: "widget-text",
										text: "..."
									}, null]]
						}), this.$typeUpload.addClass("selected"), this.widgetContainer.setRowVisible([2, 3, 4, 5], !1))
			},
			_bindTypeSelectEvents: function () {
				var b = this,
				c = function (c) {
					var d = c.target,
					e = c.type,
					f = a(d).closest(".type-item");
					f && f.length > 0 && "click" === e && (f.hasClass("type-upload") ? (b.$typeUpload.addClass("selected"), b.$typeURL.removeClass("selected"), b.widgetContainer.setRowVisible([0, 1], !0), b.widgetContainer.setRowVisible([2, 3, 4, 5], !1)) : f.hasClass("type-url") && (b.$typeUpload.removeClass("selected"), b.$typeURL.addClass("selected"), b.widgetContainer.setRowVisible([0, 1], !1), b.widgetContainer.setRowVisible([2, 3, 4, 5], !0)))
				};
				this.$typeSelect.unbind(".type-select"),
				this.$typeSelect.bind({
					"click.type-select": c
				})
			},
			getWidgetByName: function () {}
		})
}
(jQuery), function (a) {
	FX.VipTrailDialog = FX.extend(FX.Dialog, {
			_defaultConfig: function () {
				return a.extend(FX.VipTrailDialog.superclass._defaultConfig.apply(this, arguments), {
					title: "",
					height: 300
				})
			},
			_createContent: function (b) {
				var c = this,
				d = a('<div class="fx_vip_center_dialog_wrapper"/>');
				d.append('<div class="description"> 15</div>');
				var e = new FX.TableContainer({
						renderEl: a("<div/>").appendTo(d),
						customCls: "wrapper-content",
						rowSize: [36, 36, 36],
						colSize: [70, 350],
						hgap: 0,
						vgap: 10,
						items: [[{
									type: "label",
									text: "",
									customCls: "x-content-label"
								}, {
									type: "text",
									widgetName: "phone",
									regex: FX.CONST.TEXT_TYPE_REGEXP.mobile,
									width: 350,
									height: 36,
									onValidateFail: function () {
										return this.showErrorMsg(" "),
										!1
									}
								}
							], [{
									type: "label",
									text: " ",
									customCls: "x-content-label"
								}, {
									type: "validcodepane",
									widgetName: "code",
									inputWidth: 130,
									btnWidth: 110,
									height: 36,
									btnText: " ",
									waterMark: " ",
									onClick: function () {
										var a = this,
										b = e.getWidgetByName("phone");
										return b.getValue() && b.checkValidate() ? (this.setEnable(!1), void FX.Utils.ajax({
												url: "/auth/phone/get",
												data: {
													phone: b.getValue()
												}
											}, function () {
												a.setReloadState()
											}, function () {
												return a.setEnable(!0),
												!1
											})) : void FX.Msg.toast({
											type: "warning",
											msg: " "
										})
									}
								}
							], [{
									type: "button",
									width: 120,
									height: 36,
									customCls: "wrapper-btn",
									text: "",
									style: "white",
									onClick: function () {
										c.close()
									}
								}, {
									type: "button",
									customCls: "wrapper-btn",
									width: 120,
									height: 36,
									text: "",
									style: "green",
									onClick: function () {
										var a = e.getWidgetByName("phone"),
										b = e.getWidgetByName("code");
										a.checkValidate() && b.checkValidate() && FX.Utils.ajax({
											url: "/profile/update",
											data: {
												type: "phone",
												phone: a.getValue(),
												phoneCode: b.getValue()
											}
										}, function () {
											FX.STATIC.user.phone = a.getValue(),
											c.close(),
											FX.Utils.getVipTrail()
										})
									}
								}
							]]
					});
				b.append(d)
			}
		})
}
(jQuery), function (a) {
	FX.PhoneBindDialog = FX.extend(FX.ConfirmDialog, {
			_defaultConfig: function () {
				var b = this;
				return a.extend(FX.PhoneBindDialog.superclass._defaultConfig.apply(this, arguments), {
					title: "",
					width: 380,
					height: 290,
					customCls: "fui_phone_bind_dialog",
					text4Cancel: "",
					bindTip: "",
					onOk: function () {
						var a = this.getWidgetByName("phone"),
						c = this.getWidgetByName("code");
						a.checkValidate() && c.checkValidate() && FX.Utils.ajax({
							url: "/profile/update",
							data: {
								type: "phone",
								phone: a.getValue(),
								phoneCode: c.getValue()
							}
						}, function () {
							b.close(),
							FX.Msg.toast({
								type: "success",
								msg: ""
							})
						})
					}
				})
			},
			_init: function () {
				FX.PhoneBindDialog.superclass._init.apply(this, arguments)
			},
			_createContent: function (b) {
				var c = this.options,
				d = this;
				this.container = FX.createWidget({
						type: "tablecontainer",
						renderEl: a("<div/>").appendTo(b),
						rowSize: [50, 36, 36],
						colSize: [80, 260],
						padding: 20,
						hgap: 0,
						vgap: 15,
						items: [[a('<div class="bind-tip"/>').text(c.bindTip)], [{
									type: "label",
									text: "",
									customCls: "bind-label"
								}, {
									type: "text",
									widgetName: "phone",
									regex: FX.CONST.TEXT_TYPE_REGEXP.mobile,
									width: 260,
									height: 36,
									onValidateFail: function () {
										return this.showErrorMsg(" "),
										!1
									}
								}
							], [{
									type: "label",
									text: " ",
									customCls: "bind-label"
								}, {
									type: "validcodepane",
									widgetName: "code",
									inputWidth: 140,
									btnWidth: 120,
									height: 36,
									btnText: " ",
									waterMark: " ",
									onClick: function () {
										var a = this,
										b = d.container.getWidgetByName("phone");
										return b.getValue() && b.checkValidate() ? (this.setEnable(!1), void FX.Utils.ajax({
												url: "/auth/phone/get",
												data: {
													phone: b.getValue()
												}
											}, function () {
												a.setReloadState()
											}, function () {
												return a.setEnable(!0),
												!1
											})) : void FX.Msg.toast({
											type: "warning",
											msg: " "
										})
									}
								}
							]]
					})
			}
		}),
	a.shortcut("phonebinddialog", FX.PhoneBindDialog)
}
(jQuery), function (a) {
	FX.PrintViewDialog = FX.extend(FX.Dialog, {
			_defaultConfig: function () {
				return a.extend(FX.PrintViewDialog.superclass._defaultConfig.apply(this, arguments), {
					customCls: "fui_print_view_dialog",
					title: "",
					width: 656,
					height: 426,
					authItems: [],
					view: "default"
				})
			},
			_createContent: function (a) {
				var b = this.options;
				switch (this._createTitle().appendTo(a), b.view) {
				case "default":
					this._createEmptyTip().appendTo(a);
					break;
				case "data":
					this._createDataManager().appendTo(a);
					break;
				case "flow":
					this._createFlowView().appendTo(a);
					break;
				case "auth":
					this._createAuthGroup().appendTo(a)
				}
			},
			_createTitle: function () {
				var b = this.options,
				c = b.printName || "";
				return a('<div class="body-line-title"/>').append(a("<span/>").text(c)).append('<span class="info"></span>')
			},
			_createDataManager: function () {
				this.doResize({
					height: 231
				});
				var b = a('<div class="body-wrapper"/>');
				return b.append('<div class="wrapper-content size-small"><div class="line "></div></div>'),
				b
			},
			_createFlowView: function () {
				var b = this.options,
				c = this,
				d = a('<div class="body-wrapper"/>'),
				e = a('<div class="wrapper-head"></div>').appendTo(d),
				f = a('<div class="wrapper-content"/>').appendTo(d),
				g = [];
				FX.Utils.forEach(b.versions, function (a, c) {
					var d = b.currentVersion === c ? "" : "";
					g.push({
						text: "V" + c + ".0" + d,
						value: c
					})
				});
				var h = b.currentVersion || g[0].value;
				return new FX.ComboBox({
					renderEl: a('<div class="head-widget-wrapper"/>').appendTo(e),
					allowBlank: !1,
					searchable: !1,
					width: 140,
					height: 30,
					items: g,
					value: h,
					onAfterItemSelect: function () {
						c._fetch(f, this.getValue(), "flows")
					}
				}),
				this._fetch(f, h, "flows"),
				d
			},
			_fetch: function (b, c, d) {
				var e = this.options,
				f = this;
				b.empty(),
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/pt/" + e.printId + "/get_apply_node",
					data: {
						version: c
					}
				}, function (c) {
					0 === c[d].length ? f._createEmptyTip("size-small").appendTo(b) : FX.Utils.forEach(c[d], function (c, d) {
						a('<div class="line"/>').text(d.name).appendTo(b)
					})
				})
			},
			_createAuthGroup: function () {
				var b = (this.options, a('<div class="body-wrapper"/>'));
				b.append('<div class="wrapper-head"></div>');
				var c = a('<div class="wrapper-content"/>').appendTo(b);
				return this._fetch(c, null, "authGroups"),
				b
			},
			_createEmptyTip: function (b) {
				return a('<div class="body-empty ' + b + '"><div class="empty-bg"></div><div class="empty-msg"></div></div>')
			}
		})
}
(jQuery), function (a) {
	FX.BatchEditDialog = FX.extend(FX.Dialog, {
			_defaultConfig: function () {
				return a.extend(FX.BatchEditDialog.superclass._defaultConfig.apply(this, arguments), {
					customCls: "x-batch-edit-dialog",
					autoClose: !1,
					title: "",
					height: 470,
					perPage: 10,
					limit: 500,
					appId: null,
					entryId: null,
					formId: null,
					fields: [],
					idList: [],
					isUpdateAll: !1,
					onAfterUpdate: null,
					filter: {}
				})
			},
			_createContent: function (b) {
				this.$wrapper = a('<div class="content-wrapper"/>').appendTo(b);
				var c = a('<div class="content-main"/>').appendTo(this.$wrapper),
				d = a('<div class="content-result"/>').appendTo(this.$wrapper);
				this._createContentMain(c, d)
			},
			_createContentMain: function (a, b) {
				var c = this,
				d = this.options;
				this.widgets = {},
				FX.Utils.forEach(d.fields, function (a, b) {
					switch (b.widget.type) {
					case "subform":
						FX.Utils.forEach(b.widget.items, function (a, d) {
							c.widgets[b.widget.widgetName + "." + d.widget.widgetName] = d
						});
						break;
					case "separator":
						break;
					default:
						c.widgets[b.widget.widgetName] = b
					}
				}),
				a.append('<div class="edit-info-item"><p> </p><p></p><p></p></div>'),
				this._createKeySelect(a),
				this._createValWidget(a),
				this._createBtn(a, b)
			},
			_createKeySelect: function (b) {
				var c = this;
				a('<div class="edit-label"/>').text("").appendTo(b);
				var d = a('<div class="widget-wrapper"/>').appendTo(b);
				this.key = null,
				this.select = new FX.ComboBox({
						renderEl: a("<div />").appendTo(d),
						items: this._createSelectItems(),
						onAfterItemSelect: function () {
							var a = this.getValue();
							if (a) {
								var d = c.widgets[a].widget;
								d.noRepeat ? (c.key = null, e.text("")) : FX.LimitFields.batchEdit.indexOf(d.type) > -1 ? (c.key = a, e.text("")) : (c.key = null, e.text(""))
							} else
								c.key = null, e.text("");
							c._setValWidget(b)
						}
					});
				var e = a('<div class="widget-error-info"></div>').appendTo(b)
			},
			_createSelectItems: function () {
				var a = [];
				return FX.Utils.forEach(this.widgets, function (b, c) {
					a.push({
						text: c.label,
						value: b
					})
				}),
				a
			},
			_createValWidget: function (b) {
				var c = a('<div class="edit-label"/>').text("").appendTo(b),
				d = a('<i class="icon-help-slim"></i>').hover(function () {
						FX.UI.showPopover({
							anchor: d,
							content: a("<span></span>")
						})
					}, function () {
						FX.UI.closePopover()
					}).appendTo(c);
				a('<div class="widget-wrapper"><div class="not-allowed"></div><div class="widget-content"></div></div>').appendTo(b)
			},
			_setValWidget: function (b) {
				if (a(".widget-wrapper", b).children(".widget-content").empty(), this.key) {
					a(".widget-wrapper", b).children(".not-allowed").hide();
					var c = a.extend({}, this.widgets[this.key].widget);
					switch (c.type) {
					case "text":
					case "number":
					case "textarea":
					case "datetime":
					case "user":
					case "dept":
						c.value = null;
						break;
					case "address":
						c.value = {};
						break;
					case "radiogroup":
					case "combo":
						c.type = "combo",
						c.value = null;
						break;
					case "checkboxgroup":
					case "combocheck":
						c.type = "combocheck",
						c.value = [];
						break;
					case "usergroup":
					case "deptgroup":
						c.value = []
					}
					this.widget = FX.createWidget(a.extend({
								renderEl: a("<div/>").appendTo(a(".widget-wrapper", b).children(".widget-content"))
							}, c, {
								enable: !0,
								visible: !0,
								allowBlank: !0
							}))
				} else
					this.widget = null, a(".widget-wrapper", b).children(".not-allowed").show()
			},
			_createBtn: function (b, c) {
				var d = this,
				e = this.options,
				f = a('<div class="edit-footer"/>').appendTo(b);
				a('<div class="edit-btn-left"></div>').on("click", function () {
					d._showResult(c, !1)
				}).appendTo(f),
				new FX.Button({
					renderEl: a("<div/>").appendTo(f),
					customCls: "edit-btn",
					text: "",
					width: 80,
					height: 30,
					style: "white",
					onClick: function () {
						d.close()
					}
				}),
				new FX.Button({
					renderEl: a("<div/>").appendTo(f),
					customCls: "edit-btn",
					text: "",
					width: 80,
					height: 30,
					style: "green",
					onClick: function () {
						if (d.key) {
							var a = d.widget.getValue();
							d._showResult(c, !0),
							FX.Utils.ajax({
								url: "/data/batch_update",
								data: {
									appId: e.appId,
									entryId: e.entryId,
									formId: e.formId,
									idList: e.idList,
									isUpdateAll: e.isUpdateAll,
									field: d.key,
									value: a,
									filter: e.filter
								}
							}, function (b) {
								FX.Msg.toast({
									type: "success",
									msg: ""
								});
								var f;
								switch (d.widget.getWidgetType()) {
								case "user":
								case "dept":
								case "deptgroup":
								case "usergroup":
									var g = d.widget.getItems();
									g.length > 0 ? (f = [], FX.Utils.forEach(g, function (a, b) {
											f.push(b.name)
										})) : f = "";
									break;
								default:
									f = a
								}
								var h = {
									startTime: new Date,
									task: {
										field: d.key,
										value: f
									},
									count: {
										total: b.total,
										success: b.success,
										fail: b.fail
									},
									taskId: b.taskId
								};
								FX.Utils.isArray(d.tasks) || (d.tasks = []);
								var i = !1;
								FX.Utils.forEach(d.tasks, function (a, b) {
									if (b.taskId === h.taskId)
										return i = !0, !1
								}),
								!i && d.tasks.unshift(h),
								d._afterUpdate(c, h),
								FX.Utils.applyFunc(d, e.onAfterUpdate, [h], !1)
							}, function () {
								return d._afterUpdate(c, {}),
								!1
							})
						} else
							FX.Msg.toast({
								msg: "",
								type: "warning"
							})
					}
				})
			},
			_showResult: function (b, c) {
				var d = this,
				e = this.options;
				if (this.taskEl = {}, this.$wrapper.addClass("show-result"), b.empty(), c) {
					var f = a('<div class="edit-list-item has-loader edit-progress"><div class="line-info"></div><div class="line-info"></div></div>').appendTo(b);
					FX.Utils.createLoadIcon(a('<div class="line-loader"/>').appendTo(f), !0)
				}
				var g = a('<div class="edit-field x-btn style-green"></div>').on("click", function () {
						d.$wrapper.removeClass("show-result")
					}).appendTo(b);
				c && g.hide(),
				a('<div class="edit-label"></div>').appendTo(b),
				this.pageNow = 1,
				this.tasks ? this._createRecordItems(b, this.tasks) : FX.Utils.ajax({
					url: "/data/batch_update_tasks",
					data: {
						appId: e.appId,
						entryId: e.entryId,
						formId: e.formId,
						skip: 0,
						limit: e.limit
					}
				}, function (a) {
					d.tasks = a.tasks,
					d._createRecordItems(b, d.tasks)
				})
			},
			_afterUpdate: function (b, c) {
				a(".edit-progress", b).remove(),
				a(".edit-field", b).show();
				var d = a(".record-wrapper", b);
				if (!FX.Utils.isObjectEmpty(c)) {
					0 === d.length && (d = a('<div class="record-wrapper"/>').appendTo(b)),
					this._removeEmptyTip(b);
					var e = this._createRecordItem(c);
					e && e.prependTo(d)
				}
			},
			_createRecordItems: function (b, c) {
				var d = this.options,
				e = this,
				f = !1;
				if (0 === c.length)
					return void this._showEmptyTip(b);
				c.length > d.perPage * this.pageNow ? f = !0 : this._removeMore(b),
				this._removeEmptyTip(b);
				var g = c.slice((this.pageNow - 1) * d.perPage, (this.pageNow - 1) * d.perPage + d.perPage),
				h = a(".record-wrapper", b);
				0 === h.length && (h = a('<div class="record-wrapper"/>').appendTo(b)),
				FX.Utils.forEach(g, function (a, b) {
					var c = e._createRecordItem(b);
					c && c.appendTo(h)
				}),
				f && this._showMore(b, c)
			},
			_createRecordItem: function (b) {
				if (this.taskEl[b.taskId])
					return null;
				var c = a('<div class="line-info"></div>'),
				d = a('<div class="line-info"></div>'),
				e = this.widgets[b.task.field];
				if (e) {
					d.append(a("<span/>").text(e.label));
					var f = "";
					if (!FX.Utils.isEmpty(b.task.value))
						switch (e.widget.type) {
						case "datetime":
							f = FX.Utils.date2Str(new Date(b.task.value), e.widget.format);
							break;
						case "address":
							f = FX.Utils.address2Str(b.task.value, "", "pcda");
							break;
						default:
							f = FX.Utils.isArray(b.task.value) ? b.task.value.join(",") : b.task.value
						}
					c.append(a("<span/>").text(f))
				} else
					d.append('<span class="field-invalid"> </span>');
				var g = a('<div class="edit-list-item"/>');
				return g.append('<div class="line-info">' + FX.Utils.date2Str(new Date(b.startTime), "yyyy-MM-dd HH:mm:ss") + "</div>"),
				g.append(d).append(c).append('<div class="line-info"><div class="col-4">' + b.count.total + '</div><div class="col-4">' + b.count.success + '</div><div class="col-4">' + b.count.fail + "</div></div>"),
				this.taskEl[b.taskId] = !0,
				g
			},
			_showMore: function (b, c) {
				var d = this;
				0 === a(".btn-more", b).length && a('<div class="btn-more"> </div>').on("click", function () {
					d.pageNow++,
					d._createRecordItems(b, c)
				}).appendTo(b)
			},
			_removeMore: function (b) {
				a(".btn-more", b).remove()
			},
			_showEmptyTip: function (b) {
				a('<div class="empty-tip"> </div>').appendTo(b)
			},
			_removeEmptyTip: function (b) {
				a(".empty-tip", b).remove()
			}
		})
}
(jQuery), function (a) {
	FX.FileExportDialog = FX.extend(FX.Dialog, {
			_defaultConfig: function () {
				return a.extend(FX.BatchEditDialog.superclass._defaultConfig.apply(this, arguments), {
					customCls: "fx_file_export",
					title: "",
					fields: [],
					filter: {},
					height: 535,
					onClose: this._clearInternal,
					width: 655
				})
			},
			_createContent: function (b) {
				this.$wrapper = a('<div class="content-wrapper" />').appendTo(b),
				this.$mainContent = a('<div class="content-main"/>').appendTo(this.$wrapper),
				this.$records = a('<div class="content-records"/>').appendTo(this.$wrapper),
				this._createMainContent()
			},
			_createMainContent: function () {
				var b = this,
				c = this.options,
				d = a("<div />").appendTo(this.$mainContent);
				new FX.RadioGroup({
					renderEl: d,
					layout: "horizontal",
					items: [{
							value: "all",
							text: ""
						}, {
							value: "filtered",
							text: ""
						}
					],
					value: "filtered",
					onAfterItemSelect: function (a, d) {
						d && "all" === d.value ? b.filter = {}
						 : b.filter = c.filter
					}
				}),
				this._createConfBody();
				var e = a('<div class="dialog-footer"/>').appendTo(this.$mainContent);
				new FX.Button({
					renderEl: a('<div class="btn-left"/>').appendTo(e),
					text: "",
					style: "white",
					width: 90,
					onClick: function () {
						b._showRecords()
					}
				}),
				new FX.Button({
					renderEl: a('<div class="btn-right"/>').appendTo(e),
					text: "",
					style: "white",
					width: 120,
					height: 36,
					onClick: function () {
						b.close()
					}
				}),
				new FX.Button({
					renderEl: a('<div class="btn-right"/>').appendTo(e),
					text: "",
					style: "green",
					width: 120,
					height: 36,
					onClick: function () {
						b._createDownloadLink()
					}
				})
			},
			_createConfBody: function () {
				var b = this,
				c = this.options,
				d = [],
				e = 0;
				a('<div class="config-title"/>').text("").appendTo(this.$mainContent);
				var f = a('<div class="pane-config"/>').append(a('<div class="config-head"/>').append(a('<div class="col-4" />').text("")).append(a('<div class="col-4" />').text(""))).appendTo(this.$mainContent),
				g = a('<div class="config-body"/>').appendTo(f);
				if (FX.Utils.forEach(c.fields, function (a, b) {
						["text", "number", "radiogroup", "combo"].indexOf(b.type) > -1 && "creator" !== b.name && d.push(b)
					}), this.config = [], FX.Utils.forEach(c.fields, function (c, f) {
						if (f && !(FX.LimitFields.fileExport.indexOf(f.type) < 0)) {
							var h = {
								field: f.name
							};
							e++;
							var i = a('<div class="config-field"/>').appendTo(g),
							j = a('<div class="col-4"/>').appendTo(i);
							h.check = new FX.CheckBox({
									renderEl: a("<div />").appendTo(j),
									customCls: "field-file",
									width: 180,
									height: 30,
									text: f.text,
									onStateChange: function (a) {
										a ? h.nameType.setEnable(!0) : h.nameType.setEnable(!1)
									}
								}),
							j = a('<div class="col-4"/>').appendTo(i),
							h.nameType = new FX.ComboBox({
									renderEl: a("<div />").appendTo(j),
									width: 180,
									height: 30,
									allowBlank: !1,
									searchable: !1,
									enable: !1,
									items: [{
											value: "origin",
											text: ""
										}, {
											value: "field",
											text: ""
										}
									],
									value: "origin",
									onAfterItemSelect: function (a, b) {
										b && ("field" === b.value ? k.setVisible(!0) : k.setVisible(!1))
									}
								}),
							j = a('<div class="col-4"/>').appendTo(i);
							var k = new FX.ComboBox({
									renderEl: a("<div />").appendTo(j),
									width: 180,
									height: 30,
									allowBlank: !1,
									searchable: !1,
									valueField: "name",
									items: d
								});
							k.setVisible(!1),
							h.nameField = k,
							b.config.push(h)
						}
					}), 0 === e)
					a('<div class="empty-tip"/>').text("").appendTo(g);
				else if (1 === e) {
					var h = this.config[0];
					h && h.check.setSelected(!0),
					h && h.nameType.setEnable(!0)
				}
			},
			_showRecords: function (b) {
				var c = this;
				this.options;
				if (this.$wrapper.addClass("show-records"), this.$records.empty(), b) {
					var d = a('<div class="pack-progress"/>');
					a('<div class="pane-pack"/>').append(a("<div />").text("()")).append(d).appendTo(this.$records),
					FX.Utils.createLoadIcon(d, !0)
				} else
					a('<div class="btn-export"/>').append(a('<i class="icon-angleup"/>')).append(a("<span />").text("")).click(function () {
						c.$wrapper.removeClass("show-records")
					}).appendTo(this.$records), a('<div class="separator"/>').appendTo(this.$records);
				a('<div class="records-title"/>').text("").appendTo(this.$records),
				c.records ? c._createRecords() : FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/filetask/list",
					data: {
						taskStatus: []
					}
				}, function (a) {
					c.records = a,
					c._createRecords()
				})
			},
			_createRecords: function () {
				if (this.records && 0 === this.records.length)
					return void a('<div class="empty-tip"/>').text(" ").appendTo(this.$records);
				var b = a('<div class="record-list"/>').appendTo(this.$records);
				FX.Utils.forEach(this.records, function (c, d) {
					var e = "",
					f = !0;
					switch (d.status) {
					case "expired":
						e = "",
						f = !1;
						break;
					case "failed":
						e = "";
						break;
					case "finished":
						e = "" + FX.Utils.date2Str(new Date(d.expireTime), "yyyy-MM-dd HH:mm") + "";
						break;
					default:
						return
					}
					var g = a('<div class="pane-record"/>').data("id", d.taskId).append(a('<div class="record-header"/>').text(e).append(a('<div class="btn-del"><i class="icon-trasho"/> </div>'))).appendTo(b),
					h = a('<div class="record-body"/>').appendTo(g);
					FX.Utils.forEach(d.files, function (b, c) {
						var d = a('<div class="file-item"/>').append(a('<i class="icon-zipfile" />')).append(a('<span class="file-name">').text(c.name)).append(a('<span class="file-size">').text(c.size || "")).appendTo(h),
						e = a('<a class="file-url" target="_blank"><i class="icon-vip-center-excel-import"/></a>').appendTo(d);
						f ? e.attr("href", c.url) : e.on("click", function () {
							FX.Msg.toast({
								type: "warning",
								msg: ""
							})
						})
					})
				}),
				this._bindEvents()
			},
			_createDownloadLink: function () {
				var a = this,
				b = this.options,
				c = a._getFields();
				c !== !1 && (c.length > 0 ? FX.Utils.ajax({
						url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/filetask/mkzip",
						data: {
							fields: c,
							filter: a.filter || b.filter
						}
					}, function (b) {
						a._showRecords(!0),
						a.curTask = b.taskId,
						a._addCheckInternal()
					}) : FX.Msg.toast({
						type: "warning",
						msg: ""
					}))
			},
			_addCheckInternal: function () {
				var a = this;
				a.checkTaskinterval = setTimeout(function () {
						FX.Utils.ajax({
							url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/filetask/list",
							data: {
								taskIdList: [a.curTask]
							}
						}, function (b) {
							b[0] && "finished" === b[0].status && (a._clearInternal(), a.records = b.concat(a.records), a._showRecords())
						})
					}, 5e3)
			},
			_clearInternal: function () {
				clearTimeout(this.checkTaskinterval)
			},
			_getFields: function () {
				var a = [];
				return FX.Utils.forEach(this.config, function (b, c) {
					if (c.check && c.check.getValue()) {
						var d = c.field,
						e = c.nameType,
						f = c.nameField,
						g = {
							file: d
						};
						if ("field" === e.getValue()) {
							if (FX.Utils.isEmpty(f.getValue()))
								return a = !1, FX.Msg.toast({
									type: "warning",
									msg: ""
								}), !1;
							g.name = f.getValue()
						}
						a.push(g)
					}
				}),
				a
			},
			_bindEvents: function () {
				var b = this;
				this.$records.click(function (c) {
					var d = a(c.target),
					e = d.closest(".btn-del"),
					f = d.closest(".pane-record");
					e.length > 0 && f.length > 0 && FX.Msg.alert({
						title: "",
						msg: "  ",
						type: "warning",
						onOk: function () {
							var a = f.data("id");
							FX.Utils.ajax({
								url: "/dashboard/app/" + FX.STATIC.APPID + "/filetask/" + a + "/delete"
							}, function () {
								f.remove(),
								FX.Utils.forEach(b.records, function (c, d) {
									if (d.taskId === a)
										return b.records.splice(c, 1), !1
								}),
								FX.Msg.toast({
									type: "success",
									msg: " "
								})
							})
						}
					})
				})
			}
		})
}
(jQuery), function (a) {
	FX.DataSourcePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DataSourcePane.superclass._defaultConfig.apply(), {
					entryList: [],
					forms: [],
					relations: [],
					joinedFields: [],
					joinFieldsFilter: null,
					joinFieldsLimit: 0,
					attributeFields: [],
					isSubformSupported: !0,
					onOk: null
				})
			},
			_init: function () {
				FX.DataSourcePane.superclass._init.apply(this, arguments);
				var a = this.options,
				b = this;
				this.entryMap = {},
				this.entrys = [],
				FX.Utils.forEach(a.entryList, function (a, c) {
					var d = c.entryId;
					c.appId !== FX.STATIC.APPID && (d = [c.entryId, c.appId].join(FX.CONST.FIELD.DELIMITER)),
					b.entryMap[d] = c,
					b.entrys.push({
						text: c.name,
						value: d
					})
				}),
				this.isMulti = a.forms && a.forms.length > 1,
				this.isMulti ? (this.singleForm = null, this.multiForms = a.forms) : (this.singleForm = a.forms && a.forms[0], this.multiForms = []),
				this._initJoinTable(),
				this._initDialog()
			},
			_initDialog: function () {
				var a = this,
				b = this.options;
				this.dialog = new FX.ConfirmDialog({
						title: "",
						width: 452,
						height: 435,
						contentWidget: {
							rowSize: [40, 30, 30, 30, 200],
							colSize: [100, 320],
							hgap: 0,
							vgap: 4,
							padding: 15,
							items: [[{
										type: "label",
										text: ""
									}, {
										type: "segment",
										value: this.isMulti,
										items: [{
												text: "",
												value: !1
											}, {
												text: "",
												value: !0
											}
										],
										onAfterItemSelect: function () {
											a.isMulti = this.getValue(),
											a._setRowsVisible(a.isMulti)
										}
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "combo",
										items: this.entrys,
										value: this.singleForm,
										allowBlank: !1,
										onStopEdit: function () {
											a.singleForm = this.getValue()
										}
									}
								], [{
										type: "label",
										text: ""
									}, {
										type: "combocheck",
										items: this.entrys,
										value: this.multiForms,
										allowBlank: !1,
										hasSelectAll: !1,
										onStopEdit: function () {
											var b = this.getValue();
											a.multiForms.join("") !== b.join("") && (a.multiForms = b, a._initJoinTable())
										}
									}
								], [{
										type: "label",
										text: "",
										width: 420
									}, null], [this.joinTable.element, null]]
						},
						onOk: function () {
							if (a.isMulti)
								return a._onConfirm();
							var c = {
								relations: {},
								joinedFields: [],
								forms: a.singleForm ? [a.singleForm] : []
							};
							return FX.Utils.applyFunc(this, b.onOk, [c], !1)
						}
					}),
				this._setRowsVisible(this.isMulti),
				this.dialog.show()
			},
			_setRowsVisible: function (a) {
				this.dialog.container.setRowVisible([1], !a),
				this.dialog.container.setRowVisible([2, 3, 4], a)
			},
			_initJoinTable: function () {
				var a = this,
				b = this.options,
				c = [];
				FX.Utils.forEach(b.joinedFields, function (a, d) {
					c.push(b.relations[d.name])
				}),
				this.joinTable ? (this.joinTable.options.items = a._createJoinFieldCombos(this.multiForms), this.joinTable.options.value = c, this.joinTable.rebuild()) : (this.joinTable = new FX.SubForm({
							widgetName: "fieldJoinTable",
							newItemText: "",
							noFieldText: "",
							items: a._createJoinFieldCombos(this.multiForms),
							value: c,
							maxItemCount: b.joinFieldsLimit
						}), this.joinTable.element.css({
						width: 420,
						height: "100%",
						overflow: "auto"
					}))
			},
			_validateFieldType: function (a, b, c) {
				var d = this.entryMap[a].fieldMap,
				e = d[b].type,
				f = FX.ValueTypeMap[e];
				if ("linkdata" === e) {
					if (!d[b].linkType)
						return !1;
					f = "linkdata-" + FX.ValueTypeMap[d[b].linkType]
				}
				if (!f)
					return !1;
				if (this.joinedFieldTypeMap[c]) {
					if (f !== this.joinedFieldTypeMap[c])
						return !1
				} else
					this.joinedFieldTypeMap[c] = f;
				return !0
			},
			_onConfirm: function () {
				var a = this,
				b = this.options,
				c = this.joinTable.getValue();
				if (FX.Utils.isObjectEmpty(c))
					return void FX.Msg.toast({
						msg: "",
						type: "warning"
					});
				var d = {},
				e = !0,
				f = [],
				g = {};
				if (this.joinedFieldTypeMap = {}, FX.Utils.forEach(c, function (b, c) {
						var h,
						i = "_join_" + FX.STATIC.IDBase++,
						j = {},
						k = {},
						l = [],
						m = "";
						FX.Utils.forEach(a.multiForms, function (b, d) {
							if (!c[d])
								return e = !1, !1;
							var f = c[d].data;
							if (!f)
								return e = !1, !1;
							var n = a.entryMap[d].fieldMap;
							if (/\./.test(f)) {
								var o = f.split("."),
								p = o[0],
								q = o[1];
								if (m = m || g[p], m ? g[p] || (g[p] = m) : (m = i, g[p] = i, i = "_join_" + FX.STATIC.IDBase++, a.joinedFieldTypeMap[i] = a.joinedFieldTypeMap[m], a.joinedFieldTypeMap[m] = null), k[d] = p, e = a._validateFieldType(d, q, i), !e)
									return !1;
								j[d] = f,
								l.push(n[q].text)
							} else {
								if (e = a._validateFieldType(d, f, i), !e)
									return !1;
								if (FX.EntryAttributes[f]) {
									if (h && h !== f)
										return e = !1, !1;
									h = h || f
								}
								j[d] = f,
								l.push(n[f].text)
							}
						});
						var n = a.joinedFieldTypeMap[i];
						if (h && (i = h), m && (i = m + "%" + i, d[m] = k), e) {
							var o = {
								name: i,
								type: n,
								text: l.join("-"),
								isJoined: !0
							};
							if (/linkdata-/.test(n)) {
								var p = n.split("-");
								2 === p.length && (o.type = p[0], o.linkType = p[1])
							}
							m && (o.subform = m),
							f.push(o),
							d[i] = j
						}
					}), e) {
					var h = {
						relations: d,
						joinedFields: f,
						forms: this.multiForms
					};
					return FX.Utils.applyFunc(this, b.onOk, [h], !1)
				}
				FX.Msg.toast({
					msg: "!",
					type: "warning"
				})
			},
			_filterComboField: function (a) {
				var b = this.options;
				return !!FX.Utils.isValueWidget(a.type) && (!(!b.isSubformSupported && "subform" === a.type) && FX.Utils.applyFunc(this, b.joinFieldsFilter, [a], !0))
			},
			_createJoinFieldCombos: function (a) {
				var b = this,
				c = this.options,
				d = [];
				return a && a.length <= 1 ? d : (FX.Utils.forEach(a, function (a, e) {
						var f = b.entryMap[e];
						if (f) {
							var g = [],
							h = {};
							if ("form" === f.type) {
								var i = [].concat(c.attributeFields || []);
								c.attributeFields && f.hasExtParams && i.push("ext"),
								FX.Utils.forEach(i, function (a, b) {
									var c = FX.Utils.createEntryAttributeField(b, f);
									c && (g.push({
											text: c.text,
											value: c.name
										}), h[c.name] = {
											text: c.text,
											type: c.type
										})
								})
							}
							FX.Utils.forEach(f.fields, function (a, c) {
								var d = c.type;
								b._filterComboField(c) && ("subform" === d ? (h[c.name] = {
											text: c.text,
											type: d
										}, FX.Utils.forEach(c.items, function (a, d) {
											if (b._filterComboField(d)) {
												var e = c.name + "." + d.name,
												f = c.text + "." + d.text;
												g.push({
													text: f,
													value: e
												}),
												h[d.name] = {
													text: f,
													type: d.type,
													subform: c.name,
													linkType: d.linkType
												}
											}
										})) : (g.push({
											text: c.text,
											value: c.name
										}), h[c.name] = {
											text: c.text,
											type: d,
											linkType: c.linkType
										}))
							}),
							b.entryMap[e].fieldMap = h,
							d.push({
								label: f.name,
								widget: {
									type: "combo",
									items: g,
									widgetName: e
								}
							})
						}
					}), d)
			},
			close: function () {
				this.dialog.close()
			}
		})
}
(jQuery), function (a) {
	FX.MemberInvitePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.MemberInvitePane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_member_invite",
					departments: []
				})
			},
			_init: function () {
				FX.MemberInvitePane.superclass._init.apply(this, arguments),
				this._createInviteList()
			},
			_createInviteList: function () {
				this.element.append(a('<span class="invite-label"/>').text("")).append(a('<span class="invite-label"/>').text("")),
				this.$inviteList = a('<ul class="invite-list"/>').appendTo(this.element),
				this._createInviteItem(!1),
				this._createAddBtn()
			},
			_createInviteItem: function (b) {
				var c = this.options,
				d = a("<li/>").appendTo(this.$inviteList);
				new FX.TextEditor({
					renderEl: a('<div class="invite-item"/>').appendTo(d),
					width: 180
				}),
				new FX.ComboTree({
					renderEl: a('<div class="invite-item"/>').appendTo(d),
					items: c.departments,
					width: 215
				}),
				b && a('<span class="remove-btn"/>').append(a('<i class="icon-trasho"/>')).click(function () {
					d.remove()
				}).appendTo(d)
			},
			_createAddBtn: function () {
				var b = this;
				a('<span class="add-btn"/>').append(a('<i class="icon-user"/>')).append(a("<span/>").text(" ")).click(function () {
					b._createInviteItem(!0)
				}).appendTo(this.element)
			},
			getValue: function () {}
		}),
	a.shortcut("memberinvitepane", FX.MemberInvitePane)
}
(jQuery), function (a) {
	FX.BaseSelectPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.BaseSelectPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_base_select",
					title: "",
					value: [],
					multi: !0,
					editable: !1
				})
			},
			_init: function () {
				FX.BaseSelectPane.superclass._init.apply(this, arguments)
			},
			_createSelectList: function () {
				var b = this,
				c = this.options;
				this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element),
				this.value && this.value.length > 0 ? FX.Utils.forEach(this.value, function (a, c) {
					var d = b.selectMap[c];
					b._createSelectItem(d)
				}) : c.editable || a('<div class="select-empty" />').append(a("<span />").text(c.msg)).appendTo(this.$selectList)
			},
			_createSelectItem: function (b) {
				if (!b)
					return null;
				var c = this,
				d = this.options,
				e = a('<li class="select-item"/>').append(a("<span/>").text(b.name)).appendTo(this.$selectList);
				return d.editable && d.multi && a('<span class="remove-btn" />').append(a('<i class="icon-close-large" />')).click(function () {
					c._removeSelectItem(b),
					c.refresh()
				}).appendTo(e),
				e
			},
			_removeSelectItem: function (a) {},
			_addSelectItem: function (a) {},
			_createSelectPane: function () {
				var b = this,
				c = a('<div class="select-menu"/>').appendTo(this.element);
				return a('<i class="icon-search"/>').appendTo(c).click(function () {
					return a(".search-info").hide(),
					a(".search-input").animate({
						width: "100%"
					}, function () {
						a("#searchInput").unbind("keydown"),
						a("#searchInput").keydown(function (c) {
							13 === c.keyCode && b._createSearchList(a(this).val())
						}).focus()
					}).show(),
					a(document).bind("click.search", function (b) {
						var c = b.target,
						d = a(c).closest(".search-input");
						0 === d.length && (a(".search-info").show(), a(".search-input").animate({
								width: 0
							}, function () {
								a(".search-input").hide()
							}), a(document).unbind("click.search"))
					}),
					!1
				}),
				c.append(a('<div class="search-input"/>').append(a('<input id="searchInput"/>')).append(a('<i class="icon-search"/>'))),
				c
			},
			_bindEditEvent: function () {
				var a = this,
				b = this.options;
				this.$selectList.unbind("click"),
				this.$selectList.bind("click", function () {
					var c = a._getEditConfig(),
					d = new FX.ConfirmDialog({
							title: b.title,
							height: 570,
							width: 600,
							contentWidget: {
								rowSize: [450],
								colSize: [570],
								padding: 15,
								items: [[c]]
							},
							onOk: function () {
								return FX.Utils.applyFunc(a, a._onStopEdit, [d], !1)
							}
						});
					d.show()
				})
			},
			_createSearchList: function () {},
			_getEditConfig: function () {
				return {}
			},
			_onStopEdit: function (a) {},
			refresh: function () {}
		})
}
(jQuery), function (a) {
	FX.MemberSelectPane = FX.extend(FX.BaseSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.MemberSelectPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_base_select fx_member_select",
					title: "",
					msg: "",
					tip: "",
					items: null,
					value: [],
					jsonValue: null,
					allowBlank: !0,
					async: null,
					msgType: "",
					hasAdmin: !1,
					editable: !1,
					listEnable: !0,
					departmentEnable: !0,
					memberEnable: !0,
					dynamicEnable: !1,
					checkEnable: !0,
					beforeRebuild: null,
					onStopEdit: null,
					onClick: null,
					onCheck: null,
					dynamicFields: [{
							id: "100000000000000000000000",
							name: "",
							type: "member"
						}
					],
					dynamicWidgets: [],
					dynamicName: "",
					limit: 100
				})
			},
			_init: function () {
				FX.MemberSelectPane.superclass._init.apply(this, arguments);
				var a = this.options;
				this.selectMap = {},
				this._initWidgetsMap(),
				a.jsonValue ? this._initJsonData(a.jsonValue) : (this.value = a.value, this._initData())
			},
			_initWidgetsMap: function () {
				var a = this,
				b = this.options;
				!this.widgetsMap && b.dynamicWidgets && (this.widgetsMap = {}, FX.Utils.forEach(b.dynamicWidgets.user, function (b, c) {
						a.widgetsMap[c.id] = c
					}), FX.Utils.forEach(b.dynamicWidgets.dept, function (b, c) {
						a.widgetsMap[c.id] = c
					}))
			},
			_initData: function () {
				var a = this.options,
				b = this;
				if (a.items)
					this.items = a.items, this._initSelectPane();
				else {
					if (!this.value || this.value.length <= 0)
						return this.items = this._getDynamicFields(), void this._initSelectPane();
					var c = FX.Utils.createMask(this.element, {
							isLight: !0,
							hasLoader: !0
						});
					FX.Utils.ajax({
						url: "/corp/list_member_name",
						data: {
							members: this.value
						}
					}, function (d, e) {
						var f = [];
						FX.Utils.forEach(d.users, function (a, b) {
							f.push({
								id: b._id,
								name: b.nickname,
								type: "member"
							})
						}),
						FX.Utils.forEach(d.departments, function (a, b) {
							f.push({
								id: b._id,
								name: b.name,
								type: "department"
							})
						}),
						b.items = f.concat(b._getDynamicFields()),
						FX.Utils.applyFunc(b, a.onAsyncSuccess, [b.items], !1),
						b._initSelectPane(),
						c.remove()
					})
				}
			},
			_initJsonData: function (a) {
				var b = this,
				c = this.options;
				if (FX.Utils.isObjectEmpty(a))
					return this.items = [], void this._initSelectPane();
				var d = [];
				this.value = [],
				a.creator && (d = d.concat(c.dynamicFields), this.value.push(d[0].id)),
				FX.Utils.isObjectEmpty(a.widgets) || (this.value = this.value.concat(a.widgets), FX.Utils.forEach(a.widgets, function (a, c) {
						b.widgetsMap[c] && d.push(b.widgetsMap[c])
					})),
				FX.Utils.isObjectEmpty(a.deptWidgets) || (this.value = this.value.concat(a.deptWidgets), FX.Utils.forEach(a.deptWidgets, function (a, c) {
						b.widgetsMap[c] && d.push(b.widgetsMap[c])
					}));
				var e = a.users.concat(a.departs) || [];
				if (this.value = this.value.concat(e), e.length > 0) {
					var f = FX.Utils.createMask(this.element, {
							isLight: !0,
							hasLoader: !0
						});
					FX.Utils.ajax({
						url: "/corp/list_member_name",
						data: {
							members: e
						}
					}, function (a, c) {
						FX.Utils.forEach(a.users, function (a, b) {
							d.push({
								id: b._id,
								name: b.nickname,
								type: "member"
							})
						}),
						FX.Utils.forEach(a.departments, function (a, b) {
							d.push({
								id: b._id,
								name: b.name,
								type: "department"
							})
						}),
						b.items = d,
						b._initSelectPane(),
						f.remove()
					})
				} else
					this.items = d, this._initSelectPane()
			},
			_initSelectPane: function () {
				var a = this,
				b = this.options;
				FX.Utils.forEach(this.items, function (b, c) {
					a.selectMap[c.id] = c
				}),
				b.listEnable && this._createSelectList(),
				b.editable ? this._createSelectPane() : this._bindEditEvent()
			},
			_getEditConfig: function () {
				var a = this.options;
				return {
					widgetName: "memberSelect",
					type: "memberselectpane",
					editable: !0,
					value: this.getValue(),
					jsonValue: this.getJsonValue(),
					hasAdmin: a.hasAdmin,
					items: this.items,
					memberEnable: a.memberEnable,
					dynamicEnable: a.dynamicEnable,
					departmentEnable: a.departmentEnable,
					msgType: a.msgType,
					dynamicWidgets: a.dynamicWidgets,
					dynamicName: a.dynamicName
				}
			},
			_onStopEdit: function (a) {
				var b = this,
				c = this.options,
				d = a.getWidgetByName("memberSelect");
				if (c.items = d.getItems(), c.jsonValue) {
					var e = d.getJsonValue();
					b.rebuild(e),
					FX.Utils.applyFunc(b, c.onStopEdit, [e], !1)
				} else {
					var f = d.getValue();
					b.rebuild(f),
					FX.Utils.applyFunc(b, c.onStopEdit, [f], !1)
				}
				return !1
			},
			_addSelectItem: function (a) {
				var b = this.options;
				this._createSelectItem(a),
				this.value = this.getValue(),
				this.selectMap[a.id] = a,
				FX.Utils.applyFunc(this, b.onCheck, [null, {
							_id: a.id,
							selected: !0
						}
					], !1)
			},
			_removeSelectItem: function (b) {
				var c = this.options;
				a("#" + b.id, this.$selectList).remove(),
				this.value = this.getValue(),
				FX.Utils.applyFunc(this, c.onCheck, [null, {
							_id: b.id,
							selected: !1
						}
					], !1)
			},
			_createSelectItem: function (b) {
				var c = FX.MemberSelectPane.superclass._createSelectItem.apply(this, arguments);
				if (c)
					switch (c.attr("id", b.id).data("item", b), b.type) {
					case "department":
					case "dept":
						c.prepend(a('<i class="select-icon icon-department"/>'));
						break;
					default:
						c.prepend(a('<i class="select-icon icon-member-normal"/>'))
					}
			},
			_createSelectPane: function () {
				if (!this.$selectPane) {
					var b,
					c,
					d = FX.MemberSelectPane.superclass._createSelectPane.apply(this, arguments),
					e = this.options,
					f = this;
					e.departmentEnable && (b = a('<div class="select-btn" id="menu-depart"/>').click(function () {
								a(".select-btn", d).removeClass("select"),
								a(this).addClass("select"),
								f._createDepartmentTree()
							}).text("").appendTo(d)),
					e.memberEnable && (c = a('<div class="select-btn" id="menu-member"/>').click(function () {
								a(".select-btn", d).removeClass("select"),
								a(this).addClass("select"),
								f._createMemberTree(),
								f._createMemberList()
							}).text("").appendTo(d)),
					e.dynamicEnable && a('<div class="select-btn"/>').click(function () {
						a(".select-btn", d).removeClass("select"),
						a(this).addClass("select"),
						f._createDynamicPane()
					}).text(e.dynamicName).appendTo(d),
					this.$selectPane = a('<div class="select-pane"/>').appendTo(this.element),
					e.listEnable || this.$selectPane.addClass("select-top"),
					e.departmentEnable ? (b.addClass("select"), this._createDepartmentTree()) : (c.addClass("select"), this._createMemberTree(), this._createMemberList()),
					FX.Utils.isEmpty(e.tip) || (this.$selectPane.addClass("member-tip"), this.element.append(a('<div class="member-sync-tip"/>').text(e.tip).click(function () {
								var a = new FX.TeamManagePane({
										teamId: FX.STATIC.user.corpId,
										isCorpSuiteAdmin: FX.Utils.isCorpSuiteAdmin(FX.Utils.getCorpType(FX.STATIC.user.corpId))
									});
								new FX.Slider({
									title: "",
									content: a.element
								}).show()
							})))
				}
			},
			_createDepartmentTree: function () {
				var b = this,
				c = this.options;
				return this._hideSelectPaneEl(),
				this.departmentTree ? void this.departmentTree.setVisible(!0) : void FX.Utils.ajax({
					url: "/corp/department/list"
				}, function (d) {
					b.departments = a.extend(!0, [], d.departments),
					b.departments[0] && !b.departments[0]._id && b.departments.shift(),
					b.departmentTree = new FX.Tree({
							renderEl: a("<div/>").appendTo(b.$selectPane),
							customCls: "x-department-tree  select-department",
							Nodes: b.departments,
							setting: {
								view: {
									expandSpeed: 100
								},
								data: {
									simpleData: {
										enable: !0,
										idKey: "departmentId",
										pIdKey: "parentId"
									}
								},
								callback: {
									beforeNodeCreate: function (a) {
										a.checked = b.value.indexOf(a._id + "") > -1
									},
									onNodeCreated: function (a, c) {
										c.isParent && !c.open && c.level < 1 && this.expandNode(c, !0),
										c.departmentId == b.currentDepartment && this.selectNode(c)
									},
									onCheck: function (a, c) {
										var d = {
											id: c._id,
											type: "department",
											name: c.name,
											_id: c._id,
											selected: c.checked
										};
										c.checked ? b._addSelectItem(d) : b._removeSelectItem(d)
									},
									onClick: c.onClick
								},
								check: {
									enable: c.checkEnable,
									chkboxType: {
										Y: "",
										N: ""
									}
								}
							}
						}),
					a("#menu-depart").hasClass("select") || b.departmentTree.setVisible(!1)
				})
			},
			_createMemberTree: function () {
				var b = this;
				this.options;
				return this._hideSelectPaneEl(),
				this.memberTree ? void this.memberTree.setVisible(!0) : void FX.Utils.ajax({
					url: "/corp/department/list"
				}, function (c) {
					b.memberTree = new FX.Tree({
							renderEl: a("<div/>").appendTo(b.$selectPane),
							customCls: "x-department-tree select-department half",
							Nodes: c.departments,
							setting: {
								view: {
									expandSpeed: 100
								},
								data: {
									simpleData: {
										enable: !0,
										idKey: "departmentId",
										pIdKey: "parentId"
									}
								},
								callback: {
									onNodeCreated: function (a, b) {
										b.isParent && !b.open && b.level < 1 && this.expandNode(b, !0)
									},
									onClick: function (a, c) {
										b.currentDepartment = c.departmentId,
										b._createMemberList()
									}
								}
							}
						}),
					a("#menu-member").hasClass("select") || b.memberTree.setVisible(!1)
				})
			},
			_createMemberList: function (b) {
				var c = this,
				d = this.options;
				this.$memberList ? this.$memberList.show() : (this.$memberList = a('<ul class="select-member"/>').appendTo(this.$selectPane), this._bindMemberEvent()),
				c.memberList = [],
				b ? (c.$memberList.empty(), this._createMemberItem(b)) : FX.Utils.ajax({
					url: this._getDepartmentOpBaseURL() + "/list_member",
					data: {
						msgType: d.msgType,
						hasAdmin: d.hasAdmin,
						limit: d.limit
					}
				}, function (b) {
					c.$memberList.empty(),
					FX.Utils.forEach(b.users, function (a, b) {
						c._createMemberItem(b)
					}),
					b.users.length >= d.limit && c._bindLoadMore(0),
					a("#menu-member").hasClass("select") || c.$memberList.hide()
				})
			},
			_hideSelectPaneEl: function () {
				this.departmentTree && this.departmentTree.setVisible(!1),
				this.memberTree && this.memberTree.setVisible(!1),
				this.$memberList && this.$memberList.hide(),
				this.$dynamicPane && this.$dynamicPane.hide(),
				this.$searchList && this.$searchList.hide()
			},
			_bindLoadMore: function (a) {
				var b = this,
				c = this.options;
				this.$memberList.bind("scroll.loadMore", function () {
					if (b.$memberList.scrollTop() + b.$memberList.height() >= 30 * (a + c.limit)) {
						if (b.loading)
							return;
						b.$memberList.unbind("scroll.loadMore"),
						b._loadMoreUser(a)
					}
				})
			},
			_loadMoreUser: function (a) {
				var b = this,
				c = this.options;
				a += c.limit,
				b.loading = !0,
				FX.Utils.dataAjax({
					url: this._getDepartmentOpBaseURL() + "/list_member",
					data: {
						msgType: c.msgType,
						skip: a,
						limit: c.limit
					}
				}, function (d) {
					FX.Utils.forEach(d.users, function (a, c) {
						b._createMemberItem(c)
					}),
					d.users.length >= c.limit && b._bindLoadMore(a)
				}, null, function () {
					b.loading = !1
				})
			},
			_createMemberItem: function (b) {
				var c = this.options,
				d = this,
				e = a("<li/>").append(a("<span/>").text(b.nickname)).appendTo(this.$memberList).data("user", b);
				if (c.checkEnable) {
					var f = new FX.CheckBox({
							renderEl: a('<div class="select-check"/>').appendTo(e),
							onStateChange: function (a) {
								var c = {
									id: b._id,
									type: "member",
									name: b.nickname,
									_id: b._id,
									selected: a
								};
								a ? d._addSelectItem(c) : d._removeSelectItem(c)
							}
						});
					f.setSelected(this.value.indexOf(b._id) > -1),
					this.memberList.push({
						checkBox: f,
						id: b._id
					})
				}
			},
			_bindMemberEvent: function () {
				var b = this,
				c = this.options;
				this.$memberList.unbind("click"),
				this.$memberList.bind("click", function (d) {
					var e = a(d.target).closest("li");
					if (e.length > 0) {
						a("li", b.$memberList).removeClass("current-select"),
						e.addClass("current-select");
						var f = e.data("user");
						FX.Utils.applyFunc(b, c.onClick, [d, f], !1)
					}
				})
			},
			_getDynamicFields: function (a) {
				var b = this.options;
				if (!b.dynamicEnable)
					return [];
				switch (a) {
				case "user":
					return b.dynamicWidgets.user;
				case "dept":
					return b.dynamicWidgets.dept;
				default:
					return b.dynamicFields
				}
			},
			_createDynamicPane: function () {
				var b = this.options;
				this._hideSelectPaneEl(),
				this.$dynamicPane ? this.$dynamicPane.empty().show() : this.$dynamicPane = a('<div class="dynamic-pane"/>').appendTo(this.$selectPane),
				FX.Utils.isObjectEmpty(b.dynamicWidgets) || (this.$dynamicPane.addClass("has-menu"), this._createDynamicMenu()),
				this._createDynamicList()
			},
			_createDynamicMenu: function () {
				var b = this,
				c = this.options,
				d = a('<ul class="dynamic-menu"/>').append(a('<li id="creator" class="current-select"/>').text("")).appendTo(this.$dynamicPane);
				FX.Utils.isObjectEmpty(c.dynamicWidgets.user) || d.append(a('<li id="user"/>').text("")),
				FX.Utils.isObjectEmpty(c.dynamicWidgets.dept) || d.append(a('<li id="dept"/>').text("")),
				d.bind("click", function (c) {
					var d = a(c.target).closest("li");
					d.length > 0 && (d.addClass("current-select").siblings().removeClass("current-select"), b._createDynamicList(d.attr("id")))
				})
			},
			_createDynamicList: function (b) {
				var c = this;
				this.dynamicList = [],
				this.$dynamicPane.children(".select-dynamic").remove();
				var d = a('<ul class="select-dynamic"/>').appendTo(this.$dynamicPane);
				FX.Utils.forEach(this._getDynamicFields(b), function (e, f) {
					var g = a("<li/>").append(a("<span/>").text(f.name)).appendTo(d),
					h = new FX.CheckBox({
							renderEl: a('<div class="select-check"/>').appendTo(g),
							onStateChange: function (a) {
								var d = {
									_id: f.id,
									id: f.id,
									type: b || "member",
									name: f.name,
									selected: a
								};
								a ? c._addSelectItem(d) : c._removeSelectItem(d)
							}
						});
					h.setSelected(c.value.indexOf(f.id) > -1),
					c.dynamicList.push({
						checkBox: h,
						id: f.id
					})
				})
			},
			_createSearchList: function (b) {
				var c = this.options,
				d = this;
				this._hideSelectPaneEl();
				var e = [];
				this.$searchList ? this.$searchList.empty().show() : this.$searchList = a('<div class="select-search"/>').appendTo(this.$selectPane);
				var f = this.$searchList,
				g = new RegExp(b);
				if (c.departmentEnable)
					if (FX.Utils.forEach(this.departments, function (a, b) {
							g.test(b.name) && e.push(b)
						}), f.append(a('<div class="search-title"/>').text("")), e.length <= 0)
						f.append(a('<span class="search-empty"/>').text(" "));
					else {
						var h = a('<ul class="search-list"/>').appendTo(f);
						FX.Utils.forEach(e, function (b, c) {
							a("<li/>").appendTo(h).text(c.name).data("data", c)
						})
					}
				c.memberEnable && (f.append(a('<div class="search-title"/>').text("")), FX.Utils.ajax({
						url: "/corp/department/1/list_member",
						data: {
							msgType: c.msgType,
							filter: b,
							limit: c.limit
						}
					}, function (b) {
						var c = b.users || [];
						if (c.length <= 0)
							f.append(a('<span class="search-empty"/>').text(" "));
						else {
							var d = a('<ul class="search-list"/>').appendTo(f);
							FX.Utils.forEach(c, function (b, c) {
								a("<li/>").appendTo(d).text(c.nickname).data("data", c)
							})
						}
					})),
				f.bind("click", function (b) {
					var c = b.target,
					e = a(c).closest("li"),
					f = e.data("data");
					e.length > 0 && f && (f.departmentId ? (d._createDepartmentTree(), d.currentDepartment = f.departmentId, d.departmentTree.refresh(), d.element.find("#menu-depart").addClass("select").siblings().removeClass("select")) : (d._createMemberTree(), d._createMemberList(f), d.element.find("#menu-member").addClass("select").siblings().removeClass("select")))
				})
			},
			_getDepartmentOpBaseURL: function () {
				return FX.Utils.isEmpty(this.currentDepartment) && (this.currentDepartment = "1"),
				"/corp/department/" + this.currentDepartment
			},
			getItems: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).data("item"))
				}),
				b
			},
			getValue: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					b.push(a(d).attr("id"))
				}),
				b
			},
			getJsonValue: function () {
				var b = this.options,
				c = [],
				d = [],
				e = [],
				f = [],
				g = 0,
				h = b.dynamicFields && b.dynamicFields[0].id;
				return a(".select-item", this.$selectList).each(function (b, i) {
					var j = a(i).data("item");
					switch (j.type) {
					case "member":
						h === j.id ? g = 1 : d.push(j.id);
						break;
					case "department":
						c.push(j.id);
						break;
					case "user":
						e.push(j.id);
						break;
					case "dept":
						f.push(j.id)
					}
				}), {
					users: d,
					departs: c,
					widgets: e,
					creator: g,
					deptWidgets: f
				}
			},
			checkValidate: function () {
				var a = this.options;
				return !(!a.allowBlank && 0 === this.getValue().length)
			},
			refresh: function () {
				var a = this;
				this.departmentTree && this.departmentTree.refresh(),
				this.memberList && FX.Utils.forEach(this.memberList, function (b, c) {
					c.checkBox.setSelected(a.value.indexOf(c.id) > -1)
				}),
				this.dynamicList && FX.Utils.forEach(this.dynamicList, function (b, c) {
					c.checkBox.setSelected(a.value.indexOf(c.id) > -1)
				})
			},
			rebuild: function (a) {
				var b = this.options;
				this.value = a,
				FX.Utils.applyFunc(this, b.beforeRebuild, [], !1),
				FX.Utils.isArray(this.value) ? this._initData() : this._initJsonData(this.value),
				this.refresh()
			}
		}),
	a.shortcut("memberselectpane", FX.MemberSelectPane)
}
(jQuery), function (a) {
	FX.AuthGroupSelectPane = FX.extend(FX.BaseSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.AuthGroupSelectPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_base_select fx_authgroup_select",
					title: "",
					msg: " ",
					appId: "",
					formId: "",
					value: [],
					items: null,
					editable: !1,
					onAsyncSuccess: null,
					onStopEdit: null
				})
			},
			_init: function () {
				FX.AuthGroupSelectPane.superclass._init.apply(this, arguments);
				var a = this,
				b = this.options;
				if (this.value = b.value, b.items)
					this.items = b.items, this._createContent();
				else {
					var c = FX.Utils.createMask(this.element, {
							isLight: !0,
							hasLoader: !0
						});
					FX.Utils.ajax({
						url: "/dashboard/app/" + b.appId + "/form/" + b.formId + "/auth_group/list_name"
					}, function (d) {
						a.items = d.groups,
						FX.Utils.applyFunc(a, b.onAsyncSuccess, [a.items], !1),
						c.remove(),
						a._createContent()
					})
				}
			},
			_createContent: function () {
				var a = this.options;
				this._initSelectMap(),
				this._createSelectList(),
				a.editable ? this._createSelectPane() : this._bindEditEvent()
			},
			_initSelectMap: function () {
				var a = this;
				this.selectMap = this.selectMap || {},
				FX.Utils.forEach(this.items, function (b, c) {
					a.selectMap[c.groupId] = c
				})
			},
			_createSelectItem: function (b) {
				var c = FX.AuthGroupSelectPane.superclass._createSelectItem.apply(this, arguments);
				c && c.attr("data-id", b.groupId).prepend(a('<i class="select-icon icon-auth-group"/>'))
			},
			_addSelectItem: function (a) {
				var b = this.value,
				c = b.indexOf(a.groupId);
				c < 0 && (b.push(a.groupId), this._createSelectItem(a))
			},
			_removeSelectItem: function (a) {
				var b = this.value,
				c = b.indexOf(a.groupId);
				c > -1 && (b.splice(c, 1), this.$selectList.find("[data-id=" + a.groupId + "]").remove())
			},
			_createSelectPane: function () {
				var b = FX.AuthGroupSelectPane.superclass._createSelectPane.apply(this, arguments),
				c = this;
				a('<div class="select-btn select"/>').click(function () {
					c._createAuthGroupList()
				}).text("").appendTo(b),
				this.$selectPane = a('<div class="select-pane"/>').appendTo(this.element),
				this._createAuthGroupList(),
				this._bindAuthListEvent()
			},
			_createSearchList: function (b) {
				var c = this;
				this.$selectPane.children().hide(),
				this.$searchList ? this.$searchList.empty().show() : this.$searchList = a('<div class="select-search"/>').appendTo(this.$selectPane);
				var d = this.$searchList,
				e = [],
				f = new RegExp(b);
				if (FX.Utils.forEach(this.items, function (a, b) {
						f.test(b.name) && e.push(b)
					}), 0 === e.length)
					d.append(a('<span class="search-empty"/>').text(" "));
				else {
					var g = a('<ul class="search-list"/>').appendTo(d);
					FX.Utils.forEach(e, function (b, c) {
						a("<li />").text(c.name).data("data", c).appendTo(g)
					})
				}
				d.click(function (b) {
					var e = a(b.target),
					f = e.closest("li"),
					g = f.data("data");
					f.length > 0 && g && (d.hide(), c.$authGroupList.show(), c._createAuthGroupList([g]))
				})
			},
			_createAuthGroupList: function (b) {
				var c = this;
				b = b || this.items,
				this.$authGroupList ? this.$authGroupList.empty() : this.$authGroupList = a('<ul class="select-authgroup"/>').appendTo(this.$selectPane),
				FX.Utils.forEach(b, function (b, d) {
					var e = a("<li/>").data("authgroup", d).append(a("<span />").text(d.name)).append(a('<div class="select-check x-check"/>').append(a('<i class="icon-blank"/>'))).appendTo(c.$authGroupList);
					c.value.indexOf(d.groupId) > -1 && e.find(".select-check").addClass("select")
				})
			},
			_bindAuthListEvent: function () {
				var b = this;
				this.$authGroupList.click(function (c) {
					var d = a(c.target),
					e = d.closest("li"),
					f = e.children(".select-check");
					if (e.length > 0 && f.length > 0) {
						var g = e.data("authgroup"),
						h = f.hasClass("select");
						h ? (f.removeClass("select"), b._removeSelectItem(g)) : (f.addClass("select"), b._addSelectItem(g))
					}
				})
			},
			_getEditConfig: function () {
				return {
					widgetName: "authgroupSelect",
					type: "authgroupselectpane",
					value: this.getValue(),
					items: this.items,
					editable: !0
				}
			},
			_onStopEdit: function (a) {
				var b = this,
				c = this.options,
				d = a.getWidgetByName("authgroupSelect"),
				e = d.getValue();
				return FX.Utils.applyFunc(b, c.onStopEdit, [e], !1),
				b.rebuild(e),
				!1
			},
			getValue: function () {
				var b = [];
				return a(".select-item", this.$selectList).each(function (c, d) {
					var e = a(d).attr("data-id");
					b.push(parseInt(e))
				}),
				b
			},
			refresh: function () {
				this._createAuthGroupList()
			},
			rebuild: function (a) {
				this.value = a,
				this._createContent()
			}
		}),
	a.shortcut("authgroupselectpane", FX.AuthGroupSelectPane)
}
(jQuery), function (a) {
	FX.PrintTemplateSelectPane = FX.extend(FX.BaseSelectPane, {
			_defaultConfig: function () {
				return a.extend(FX.PrintTemplateSelectPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_base_select fx_print_template_select",
					title: "",
					msg: "",
					appId: "",
					formId: "",
					value: null,
					editable: !1,
					items: null,
					multi: !1,
					onStopEdit: null,
					systemTemplate: {
						printId: "system",
						name: ""
					}
				})
			},
			_init: function () {
				FX.PrintTemplateSelectPane.superclass._init.apply(this, arguments);
				var a = this,
				b = this.options;
				if (this.value = b.value, this.value || (this.value = b.systemTemplate.printId), b.items)
					this.items = b.items, this._createContent();
				else {
					var c = FX.Utils.createMask(this.element, {
							isLight: !0,
							hasLoader: !0
						});
					FX.Utils.ajax({
						url: "/dashboard/app/" + b.appId + "/form/" + b.formId + "/pt/list"
					}, function (b) {
						a.items = b.templates,
						c.remove(),
						a._createContent()
					})
				}
			},
			_createContent: function () {
				var b = this.options;
				this._initSelectMap(),
				this._createSelectList(),
				b.editable ? (this._createSelectPane(), a('<a class="link-tip" target="help-doc"></a>').attr("href", FX.CONFIG.HOST.HELP_DOC_HOST + "/259128").appendTo(this.element)) : this._bindEditEvent()
			},
			_createSelectList: function () {
				var b = this;
				this.options;
				if (this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element), this.value) {
					var c = b.selectMap[this.value];
					b._createSelectItem(c)
				}
			},
			_initSelectMap: function () {
				var a = this;
				this.selectMap = this.selectMap || {},
				FX.Utils.forEach(this.items, function (b, c) {
					a.selectMap[c.printId] = c
				})
			},
			_createSelectItem: function (b) {
				var c = FX.PrintTemplateSelectPane.superclass._createSelectItem.apply(this, arguments);
				c && c.attr("data-id", b.groupId).prepend(a('<i class="select-icon icon-vip-center-print"/>'))
			},
			_addSelectItem: function (a) {
				this.value = a.printId,
				this.$selectList.empty(),
				this._createSelectItem(a)
			},
			_createSelectPane: function () {
				var b = FX.PrintTemplateSelectPane.superclass._createSelectPane.apply(this, arguments);
				a('<div class="select-btn select"/>').data("type", "system").text("").appendTo(b),
				a('<div class="select-btn"/>').data("type", "custom").text("").appendTo(b),
				this.$selectPane = a('<div class="select-pane"/>').appendTo(this.element),
				this._createSystemTemplate(),
				this._bindEvent()
			},
			_createSystemTemplate: function () {
				var b = this,
				c = this.options;
				this.$selectPane.children().hide(),
				this.$systemList ? this.$systemList.show() : (this.$systemList = a('<ul class="list-template"/>').appendTo(this.$selectPane), b._createTemplateItem(c.systemTemplate, this.$systemList))
			},
			_createCustomsTemplates: function (b) {
				b = b || this.items;
				var c = this,
				d = this.options;
				this.$selectPane.children().hide(),
				this.$customList ? this.$customList.empty().show() : this.$customList = a('<ul class="list-template"/>').appendTo(this.$selectPane),
				0 === FX.Vip.getPTSize() ? a('<div class="empty-tip"/>').append(a('<div class="empty-title"/>').text(" ")).append(a('<a class="empty-link" href="/profile/packs" target="pack" />').text("")).appendTo(c.$customList) : (FX.Utils.forEach(b, function (a, b) {
						c._createTemplateItem(b, c.$customList)
					}), 0 === b.length && a('<div class="empty-tip"/>').append(a('<div class="empty-img"/>')).append(a('<div class="empty-title"/>').text("")).append(a('<a class="empty-link" />').attr("target", "form-set").attr("href", "/dashboard/app/" + d.appId + "/form/" + d.formId + "/edit?action=print#/set").text("")).appendTo(c.$customList))
			},
			_createTemplateItem: function (b, c) {
				var d = a('<div class="select-radio x-radio"/>').append(a('<i class="icon-blank"/>'));
				a("<li/>").data("template", b).append(a("<span />").text(b.name)).append(d).appendTo(c),
				this.value === b.printId && (d.addClass("select"), this._addSelectItem(b))
			},
			_createSearchList: function (b) {
				var c = this;
				this.$selectPane.children().hide(),
				this.$searchPane ? this.$searchPane.empty().show() : this.$searchPane = a('<div class="search-pane" />').appendTo(this.$selectPane);
				var d = this.$searchPane,
				e = [],
				f = new RegExp(b);
				if (FX.Utils.forEach(this.items, function (a, b) {
						f.test(b.name) && e.push(b)
					}), 0 === e.length)
					d.append(a('<span class="search-empty"/>').text(" "));
				else {
					var g = a('<ul class="list-template"/>').appendTo(d);
					FX.Utils.forEach(e, function (b, e) {
						a("<li />").text(e.name).data("data", e).on("click", function () {
							d.hide(),
							c._createCustomsTemplates([e])
						}).appendTo(g)
					})
				}
			},
			_bindEvent: function () {
				var b = this;
				a(".select-menu", this.element).on("click", function (c) {
					var d = a(c.target).closest(".select-btn"),
					e = d.data("type");
					d.length > 0 && (d.addClass("select").siblings().removeClass("select"), "system" === e ? b._createSystemTemplate() : b._createCustomsTemplates())
				}),
				a(".select-pane", this.element).on("click", function (c) {
					var d = a(c.target),
					e = d.closest("li"),
					f = e.children(".select-radio");
					if (e.length > 0 && f.length > 0) {
						var g = e.data("template"),
						h = f.hasClass("select");
						h || (a(".select-radio", b.element).removeClass("select"), f.addClass("select"), b._addSelectItem(g))
					}
				})
			},
			_getEditConfig: function () {
				return {
					widgetName: "printTemplateSelect",
					type: "printtemplateselectpane",
					value: this.getValue(),
					items: this.items,
					editable: !0
				}
			},
			getValue: function () {
				return this.value
			}
		}),
	a.shortcut("printtemplateselectpane", FX.PrintTemplateSelectPane)
}
(jQuery), function (a) {
	FX.EntrySelectPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.EntrySelectPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_entry_select",
					items: null,
					value: [],
					async: null,
					onAsyncSuccess: null,
					beforeRebuild: null,
					onStopEdit: null,
					onClick: null,
					onCheck: null
				})
			},
			_initData: function () {
				var a = this;
				this.selectMap = {},
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/get_ref"
				}, function (b) {
					a.items = b.refFormList,
					a._initSelectPane()
				}, function (a) {
					FX.Vip.showUpgradeTip(a.responseJSON)
				})
			},
			_initSelectPane: function () {
				var a = this;
				this.options;
				this.selectMap = {},
				FX.Utils.forEach(this.items, function (b, c) {
					a.selectMap[c._id] = c
				}),
				this._createSelectList(),
				this._createSelectPane()
			},
			_createSelectPane: function () {
				this.$selectPane || (this.$selectPane = a('<div class="select-pane"/>').appendTo(this.element), this._createEntryMenu(), this._createEntryList(), this._bindEntryEvent())
			},
			_createSelectList: function () {
				var b = this;
				this.$selectList ? this.$selectList.empty() : this.$selectList = a('<ul class="select-list"/>').appendTo(this.element),
				FX.Utils.forEach(this.items, function (a, c) {
					b._createSelectItem(c)
				}),
				this.value = this.getValue()
			},
			_addSelectItem: function (a) {
				this._createSelectItem(a),
				this.value = this.getValue(),
				this.selectMap[a._id] = a
			},
			_removeSelectItem: function (b) {
				a("#" + b._id, this.$selectList).remove(),
				this.value = this.getValue()
			},
			_createSelectItem: function (b) {
				var c = this;
				if (b) {
					var d = a('<li class="select-item"/>').append(a("<span/>").text(b.name)).appendTo(this.$selectList).attr("id", b._id).data("item", b);
					d.prepend(a('<i class="select-icon icon-form"/>')),
					a('<span class="remove-btn"/>').append(a('<i class="icon-close-large"/>')).click(function () {
						c._removeSelectItem(b),
						c.refresh()
					}).appendTo(d)
				}
			},
			_createEntryMenu: function () {
				var b = this;
				this.$entryMenu ? this.$entryMenu.show() : this.$entryMenu = a('<ul class="select-app"/>').appendTo(this.$selectPane),
				FX.Utils.dataAjax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/ref_apps"
				}, function (c) {
					b.$entryMenu.empty(),
					FX.Utils.forEach(c.apps, function (c, d) {
						a("<li/>").append(a('<i class="app-icon icon-cover-' + d.icon + '"/><span>' + d.name + "</span>")).appendTo(b.$entryMenu).data("app", d)
					})
				})
			},
			_createEntryList: function (b) {
				var c = this;
				this.$entryList ? this.$entryList.show() : this.$entryList = a('<ul class="select-entry"/>').appendTo(this.$selectPane),
				b ? this._createEntryItem(b) : this.appId && FX.Utils.dataAjax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/ref_app_forms",
					data: {
						targetAppId: this.appId
					}
				}, function (a) {
					c.$entryList.empty(),
					FX.Utils.forEach(a.forms, function (a, b) {
						c._createEntryItem(b)
					})
				})
			},
			_createEntryItem: function (b) {
				var c = a("<li/>").append(a('<i class="entry-icon icon-form"/><span>' + b.name + "</span>")).append(a('<div class="select-btn x-check"/>').append(a('<i class="icon-blank"/>'))).appendTo(this.$entryList).data("entry", b);
				this.value.indexOf(b._id) > -1 && c.children(".select-btn").addClass("select")
			},
			_bindEntryEvent: function () {
				var b = this;
				this.$entryMenu.bind("click", function (c) {
					var d = a(c.target).closest("li"),
					e = d.data("app");
					d.length > 0 && e && (d.addClass("current-select").siblings().removeClass("current-select"), b.appId !== e._id && (b.appId = e._id, b._createEntryList()))
				}),
				this.$entryList.bind("click", function (c) {
					var d = a(c.target).closest("li"),
					e = d.children(".select-btn");
					if (d.length > 0 && e.length > 0) {
						var f = d.data("entry");
						e.hasClass("select") ? (e.removeClass("select"), b._removeSelectItem(f)) : (e.addClass("select"), b._addSelectItem(f))
					}
				})
			},
			setValue: function (a) {
				this.value = a ? [].concat(a) : [],
				this._initData()
			},
			getValue: function () {
				var b = this.value;
				return this.$selectList && (b = [], a(".select-item", this.$selectList).each(function (c, d) {
						b.push(a(d).attr("id"))
					})),
				b
			},
			getItems: function () {
				var b = this.items;
				return this.$selectList && (b = [], a(".select-item", this.$selectList).each(function (c, d) {
						b.push(a(d).data("item"))
					})),
				b
			},
			getNullValue: function () {
				return []
			},
			refresh: function () {
				this.$entryList && this._refreshEntryList(this.$entryList)
			},
			_refreshEntryList: function (b) {
				var c = this;
				a("li", b).each(function (b, d) {
					var e = a(d).data("entry");
					e && (c.value.indexOf(e._id) > -1 ? a(d).children(".select-btn").addClass("select") : a(d).children(".select-btn").removeClass("select"))
				})
			}
		}),
	a.shortcut("entryselectpane", FX.EntrySelectPane)
}
(jQuery), function (a) {
	FX.OperationAuth = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.OperationAuth.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_opauth_pane",
					onAfterClick: null
				})
			},
			_init: function () {
				FX.OperationAuth.superclass._init.apply(this, arguments),
				this.kv = {
					create: {
						text: " ",
						parents: ["import"],
						children: ["read"]
					},
					read: {
						text: "",
						parents: ["import", "create", "update", "delete", "import", "export"],
						children: []
					},
					update: {
						text: "",
						parents: [],
						children: ["read"]
					},
					delete : {
						text: " ",
						parents: [],
						children: ["read"]
					},
					import: {
						text: "",
						parents: [],
						children: ["read", "create"]
					},
					export: {
						text: "",
						parents: [],
						children: ["read"]
					}
				},
				this._createItems()
			},
			_createItems: function () {
				var b = this,
				c = this.options,
				d = this.kv;
				FX.Utils.forEach(d, function (d, e) {
					var f = a('<a class="x-check"/>').addClass(d).append(a('<i class="x-iconfont" />')).append(a("<span />").text(e.text)).appendTo(b.element);
					if ("import" === d)
						var g = a(f).hover(function () {
								FX.UI.showPopover({
									position: "topLeft",
									anchor: g,
									content: a("<span/>").text(" ")
								})
							}, function () {
								FX.UI.closePopover()
							});
					f.bind("click", function (a) {
						var d = f.hasClass("select");
						d ? (f.removeClass("select"), FX.Utils.forEach(e.parents, function (a, d) {
								var e = b.element.find("." + d);
								e.removeClass("select"),
								FX.Utils.applyFunc(b, c.onAfterClick, [e], !1)
							})) : (f.addClass("select"), FX.Utils.forEach(e.children, function (a, d) {
								var e = b.element.find("." + d);
								e.addClass("select"),
								FX.Utils.applyFunc(b, c.onAfterClick, [e], !1)
							})),
						FX.Utils.applyFunc(b, c.onAfterClick, [f], !1)
					})
				})
			},
			setValue: function (a) {
				if (!FX.Utils.isEmpty(a))
					for (var b in a)
						a[b] && this.kv[b] && this.element.find("." + b).addClass("select")
			},
			isSelected: function (a) {
				var b = this.element.find("." + a);
				return b.hasClass("select")
			},
			setSelected: function (a) {
				var b = this.element.find("." + a);
				b.hasClass("select") || b.click()
			},
			getValue: function () {
				var a,
				b = {},
				c = this.kv;
				for (a in c)
					b[a] = this.isSelected(a);
				return b
			},
			checkValidate: function () {
				var a,
				b = this.getValue();
				for (a in b)
					if (b[a])
						return this.element.removeClass("error"), !0;
				return this.element.addClass("error"),
				FX.Msg.toast({
					type: "warning",
					msg: ""
				}),
				!1
			}
		}),
	a.shortcut("operationauthpane", FX.OperationAuth)
}
(jQuery), function (a) {
	FX.LocationLimit = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.LocationLimit.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_location_limit"
				})
			},
			_init: function () {
				FX.LocationLimit.superclass._init.apply(this, arguments),
				this._createMap(),
				this._createRadius()
			},
			_createMap: function () {
				var b = this;
				a('<div id="location-map" class="location-map"/>').appendTo(this.element),
				this.map = new AMap.Map("location-map", {
						resizeEnable: !0,
						zooms: [14, 18]
					});
				var c = new AMap.Autocomplete({}),
				d = a('<ul class="location-tip"/>').appendTo(this.element).click(function (c) {
						var d = a(c.target).closest(".tip-item");
						if (d && d.length > 0) {
							var e = d.data("tip");
							if (!e || !e.location)
								return;
							b.marker ? b.marker.setPosition([e.location.lng, e.location.lat]) : b.marker = new AMap.Marker({
									position: [e.location.lng, e.location.lat],
									map: b.map
								}),
							b.position = [e.location.lng, e.location.lat],
							b.name.setValue(e.name),
							b.map.setFitView()
						}
					});
				this.element.click(function () {
					d.hide()
				}),
				this.name = new FX.TextEditor({
						renderEl: a('<div class="location-search" id="location-search"/>').appendTo(this.element),
						waterMark: "",
						allowBlank: !1,
						onAfterEdit: function () {
							var b = this.getValue();
							c.search(b, function (b, c) {
								d.empty().show(),
								(!c.tips || c.tips.length <= 0) && d.append(a('<div class="tip-empty"/>').text(" ")),
								FX.Utils.forEach(c.tips, function (b, c) {
									c.location && d.append(a('<li class="tip-item"/>').append(a('<span class="tip-name"/>').text(c.name)).append(a('<span class="tip-address"/>').text(c.district)).data("tip", c))
								})
							})
						}
					})
			},
			_createRadius: function () {
				var b = (this.options, a('<div class="location-radius"/>').appendTo(this.element));
				b.append(a("<span/>").text("")),
				this.radius = new FX.Number({
						renderEl: a('<div class="radius-input"/>').appendTo(b),
						allowBlank: !1,
						allowNegative: !1
					}),
				b.append(a("<span/>").text("")).append(a('<div class="radius-tip"/>').text("500-1000"))
			},
			checkValidate: function () {
				return this.position || FX.Msg.toast({
					type: "warning",
					msg: ""
				}),
				this.radius.checkValidate() && this.position && this.name.checkValidate()
			},
			getValue: function () {
				return {
					name: this.name.getValue(),
					position: this.position,
					radius: this.radius.getValue()
				}
			},
			setValue: function (a) {
				a && (this.name.setValue(a.name), this.radius.setValue(a.radius), this.position = a.position, this.marker ? this.marker.setPosition(a.position) : this.marker = new AMap.Marker({
							position: a.position,
							map: this.map
						}), this.map.setFitView())
			}
		}),
	a.shortcut("locationlimit", FX.LocationLimit)
}
(jQuery), function (a) {
	FX.LocationList = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.LocationList.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_location_list",
					value: [],
					onAfterEdit: null
				})
			},
			_init: function () {
				FX.LocationList.superclass._init.apply(this, arguments),
				this._createBtn(),
				this._createList()
			},
			_createBtn: function () {
				var b = this;
				new FX.Button({
					renderEl: a("<div/>").appendTo(this.element),
					text: "",
					width: 240,
					height: 30,
					style: "white",
					onClick: function () {
						b._createDialog()
					}
				})
			},
			_createList: function () {
				var b = this.options,
				c = this;
				this.positionList = a('<ul class="location-list"/>').appendTo(this.element),
				FX.Utils.forEach(b.value, function (a, b) {
					c._createPosition(b)
				}),
				this.positionList.click(function (d) {
					var e = a(d.target),
					f = e.closest("li.location-item");
					if (f && !(f.length <= 0)) {
						var g = e.closest("i.icon-edit");
						g.length > 0 && c._createDialog(f);
						var h = e.closest("i.icon-trasho");
						h.length > 0 && (f.remove(), FX.Utils.applyFunc(c, b.onAfterEdit, [], !1))
					}
				})
			},
			_createPosition: function (b) {
				a('<li class="location-item"/>').append(a('<span class="location-name"/>').text(b.name)).append(a('<i class="icon-trasho"/>')).append(a('<i class="icon-edit"/>')).data("position", b).appendTo(this.positionList)
			},
			_createDialog: function (a) {
				var b = this,
				c = this.options,
				d = new FX.ConfirmDialog({
						title: "",
						width: 570,
						height: 510,
						contentWidget: {
							rowSize: [450],
							colSize: [540],
							hgap: 0,
							vgap: 15,
							padding: 15,
							items: [[{
										widgetName: "locationLimit",
										type: "locationlimit"
									}
								]]
						},
						onOk: function () {
							var e = d.getWidgetByName("locationLimit");
							if (e.checkValidate()) {
								if (a) {
									var f = e.getValue();
									a.children(".location-name").text(f.name),
									a.data("position", f)
								} else
									b._createPosition(e.getValue());
								return FX.Utils.applyFunc(b, c.onAfterEdit, [], !1),
								!1
							}
						}
					});
				if (d.show(), a) {
					var e = d.getWidgetByName("locationLimit");
					e.setValue(a.data("position"))
				}
			},
			getValue: function () {
				var b = [];
				return this.positionList.children(".location-item").each(function (c, d) {
					b.push(a(d).data("position"))
				}),
				b
			}
		}),
	a.shortcut("locationlist", FX.LocationList)
}
(jQuery), function (a) {
	FX.LinkFilterPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.LinkFilterPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_link_filter",
					items: [],
					relyWidgets: [],
					linkWidgets: []
				})
			},
			_init: function () {
				FX.LinkFilterPane.superclass._init.apply(this, arguments),
				this._createFilterList()
			},
			_createFilterList: function () {
				var b = this.options,
				c = this;
				this.element.append(a('<span class="filter-label"/>').text("")),
				this._createAddBtn(),
				this.$filterList = a('<ul class="filter-list"/>').appendTo(this.element),
				this.items = [],
				this.widgetsMap = {},
				FX.Utils.forEach(b.relyWidgets, function (a, b) {
					c.widgetsMap[b.name] = b
				}),
				FX.Utils.forEach(b.items, function (a, b) {
					c._createFilterItem(b)
				})
			},
			_createFilterItem: function (b) {
				var c = this.options,
				d = this,
				e = a('<li class="filter-item"/>').appendTo(this.$filterList),
				f = new FX.ComboBox({
						renderEl: a('<div class="filter-combo"/>').appendTo(e),
						waterMark: "",
						width: 180,
						valueField: "name",
						value: b && b.rely,
						allowBlank: !1,
						searchable: !1,
						items: c.relyWidgets,
						onAfterItemSelect: function (a, b) {
							g.options.items = d._getLinkWidgets(b),
							g.rebuild()
						}
					});
				e.append("<span></span>");
				var g = new FX.ComboBox({
						renderEl: a('<div class="filter-combo"/>').appendTo(e),
						waterMark: "",
						width: 180,
						valueField: "name",
						value: b && b.link,
						allowBlank: !1,
						searchable: !1,
						items: b ? this._getLinkWidgets(this.widgetsMap[b.rely]) : []
					});
				a('<span class="remove-btn"/>').append(a('<i class="icon-trasho"/>')).click(function () {
					e.remove()
				}).appendTo(e),
				e.data({
					rely: f,
					link: g
				})
			},
			_getLinkWidgets: function (a) {
				if (!a)
					return [];
				var b = this.options,
				c = [];
				return FX.Utils.forEach(b.linkWidgets, function (b, d) {
					FX.ValueTypeMap[a.type] === FX.ValueTypeMap[d.type] && c.push(d)
				}),
				c
			},
			_createAddBtn: function () {
				var b = this;
				a('<span class="add-btn"/>').append(a('<i class="icon-add"/>')).append(a("<span/>").text(" ")).click(function () {
					b._createFilterItem()
				}).appendTo(this.element)
			},
			getValue: function () {
				var b = [];
				return a(".filter-item", this.element).each(function (c, d) {
					var e = a(d).data("rely").getValue(),
					f = a(d).data("link").getValue();
					e && f && b.push({
						rely: e,
						link: f
					})
				}),
				b
			}
		}),
	a.shortcut("linkfilterpane", FX.LinkFilterPane)
}
(jQuery), function (a) {
	FX.CaptchaPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.CaptchaPane.superclass._defaultConfig.apply(), {
					baseCls: "fx_captcha_pane",
					waterMark: "",
					regex: "",
					height: 40,
					src: "/auth/captcha/get"
				})
			},
			_init: function () {
				FX.CaptchaPane.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.input = new FX.TextEditor({
						renderEl: a('<div class="captcha-input"/>').appendTo(this.element),
						waterMark: c.waterMark,
						width: null,
						height: c.height,
						regex: c.regex,
						value: c.value
					}),
				this.$btn = a('<div class="captcha-btn"/>').appendTo(this.element).css({
						height: c.height,
						"line-height": c.height - 2 + "px"
					}),
				c.btnText && this.$btn.text(c.btnText);
				var d = (new Date).getTime();
				this.$btn.append(a('<img class="captcha-img" src="' + c.src + "?_=" + d + '"/>')),
				this.$btn.click(function (a) {
					b.isEnabled() && b.refresh()
				})
			},
			refresh: function () {
				var a = this.options,
				b = (new Date).getTime();
				this.$btn.children(".captcha-img").attr("src", a.src + "?_=" + b)
			},
			getValue: function () {
				return this.input.getValue()
			},
			setValue: function (a) {
				this.input.setValue(a)
			},
			checkValidate: function () {
				return this.input.checkValidate()
			},
			showErrorMsg: function (a) {
				this.input.showErrorMsg(a)
			}
		}),
	a.shortcut("captchapane", FX.CaptchaPane)
}
(jQuery), function (a) {
	FX.ValidCodePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ValidCodePane.superclass._defaultConfig.apply(), {
					baseCls: "fx_valid_code",
					reloadTime: 60,
					waterMark: "",
					regex: "",
					height: 40,
					btnText: "",
					onClick: null
				})
			},
			_init: function () {
				FX.ValidCodePane.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.input = new FX.TextEditor({
						renderEl: a('<div class="code-input"/>').appendTo(this.element),
						waterMark: c.waterMark,
						width: null,
						height: c.height,
						regex: c.regex,
						value: c.value
					}),
				this.$btn = a('<div class="code-btn"/>').appendTo(this.element).css({
						height: c.height,
						"line-height": c.height - 2 + "px"
					}),
				c.btnText && this.$btn.text(c.btnText),
				this.$btn.click(function (a) {
					b.isEnabled() && FX.Utils.applyFunc(b, c.onClick, [a], !1)
				})
			},
			setReloadState: function () {
				var a = this,
				b = this.options,
				c = b.reloadTime;
				this.setEnable(!1);
				var d = setInterval(function () {
						a.setBtnText("(" + c + ")"),
						c--,
						c <= 0 && (a.setBtnText(b.btnText), a.setEnable(!0), clearInterval(d))
					}, 1e3)
			},
			setBtnText: function (a) {
				this.$btn.text(a)
			},
			getValue: function () {
				return this.input.getValue()
			},
			setValue: function (a) {
				this.input.setValue(a)
			},
			checkValidate: function () {
				return this.input.checkValidate()
			},
			showErrorMsg: function (a) {
				this.input.showErrorMsg(a)
			}
		}),
	a.shortcut("validcodepane", FX.ValidCodePane)
}
(jQuery), function (a) {
	FX.DataManagePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DataManagePane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_data_manage",
					appId: "",
					entryId: "",
					formName: "",
					formItems: [],
					formAttr: {},
					showFields: [],
					showFieldsFilter: null,
					showFieldsMeta: [],
					hasExtParams: !1,
					hasFlow: !1,
					dataPerms: {},
					optAuth: null,
					ignoreAuth: !1,
					authGroupId: null,
					onDataFieldSelect: null,
					onParamFieldSelect: null,
					onDataFieldMetaChange: null,
					onSetAuth: null,
					hasDataRecycle: !1
				})
			},
			_init: function () {
				FX.DataManagePane.superclass._init.apply(this, arguments);
				var b = a('<div class="manage-header"/>').appendTo(this.element);
				FX.STATIC.ENTRYID = this.options.entryId,
				this._createMenuHead(b),
				this.showDataManagerView()
			},
			_createMenuHead: function (b) {
				var c = this.options,
				d = this;
				b.empty(),
				c.hasDataRecycle && !FX.Utils.isWpsWebView() && new FX.Button({
					renderEl: a('<div class="manage-btn"/>').appendTo(b),
					iconCls: "icon-data-recycle",
					width: 110,
					height: 30,
					style: "white",
					text: "",
					onClick: function () {
						FX.Vip.hasDataBackup() ? new FX.DataRecyclePane({
							appId: c.appId,
							entryId: c.entryId,
							formItems: c.formItems,
							formAttr: c.formAttr,
							showFields: c.showFields,
							showFieldsFilter: c.showFieldsFilter,
							hasExtParams: c.hasExtParams,
							hasFlow: c.hasFlow,
							onClose: function (a) {
								a && d.datatable.reload()
							}
						}) : FX.Msg.alert({
							title: "",
							msg: " ",
							type: "warning",
							text4Ok: "",
							text4Cancel: "",
							onOk: function () {
								FX.Utils.redirectTo("/profile#/vip")
							}
						})
					}
				}),
				c.onSetAuth && new FX.Button({
					renderEl: a('<div class="manage-btn"/>').appendTo(b),
					iconCls: "icon-data-auth",
					width: 110,
					height: 30,
					style: "white",
					text: "",
					onClick: function () {
						FX.Utils.applyFunc(d, c.onSetAuth, [], !1)
					}
				})
			},
			_createDeleteHead: function () {
				var b = this,
				c = this.$manageHead.empty(),
				d = 30;
				new FX.Button({
					renderEl: a('<div class="manage-btn style-shadow"/>').appendTo(c),
					width: 72,
					height: d,
					style: "white",
					text: " ",
					onClick: function () {
						var a = b.datatable.getCheckResult().length;
						b.datatable.deleteCheckResult(!1, "" + a + "   ", function () {
							b._reloadDataTable(c)
						})
					}
				}),
				new FX.Button({
					renderEl: a('<div class="manage-btn style-shadow warning"/>').appendTo(c),
					width: 72,
					height: d,
					style: "white",
					text: "",
					onClick: function () {
						b.datatable.deleteCheckResult(!0, " ", function () {
							b._reloadDataTable(c)
						})
					}
				}),
				new FX.Button({
					renderEl: a('<div class="manage-btn style-shadow"/>').appendTo(c),
					width: 72,
					height: d,
					style: "white",
					text: "",
					onClick: function () {
						b.datatable.setHasCheck(!1),
						b.datatable.refresh(),
						b._createManageHead(c)
					}
				})
			},
			_createBatchEditHead: function () {
				var b = this,
				c = this.options,
				d = this.$manageHead.empty(),
				e = 30;
				new FX.Button({
					renderEl: a('<div class="manage-btn style-shadow"/>').appendTo(d),
					width: 72,
					height: e,
					style: "white",
					text: "",
					onClick: function () {
						var a = b.datatable.getCheckResult();
						return a.length ? void new FX.BatchEditDialog({
							appId: c.appId,
							entryId: c.entryId,
							formId: c.entryId,
							fields: c.formItems,
							idList: a,
							isUpdateAll: !1,
							onAfterUpdate: function () {
								b._reloadDataTable(d)
							}
						}).show() : void FX.Msg.toast({
							type: "warning",
							msg: ""
						})
					}
				}),
				new FX.Button({
					renderEl: a('<div class="manage-btn style-shadow warning"/>').appendTo(d),
					width: 72,
					height: e,
					style: "white",
					text: "",
					onClick: function () {
						new FX.BatchEditDialog({
							appId: c.appId,
							entryId: c.entryId,
							formId: c.entryId,
							fields: c.formItems,
							isUpdateAll: !0,
							filter: b.datatable.getFilterData(),
							onAfterUpdate: function () {
								b._reloadDataTable(d)
							}
						}).show()
					}
				}),
				new FX.Button({
					renderEl: a('<div class="manage-btn style-shadow"/>').appendTo(d),
					width: 72,
					height: e,
					style: "white",
					text: "",
					onClick: function () {
						b.datatable.setHasCheck(!1),
						b.datatable.refresh(),
						b._createManageHead(d)
					}
				})
			},
			_reloadDataTable: function (a) {
				this.datatable.setHasCheck(!1),
				this.datatable.reload(),
				this._createManageHead(a)
			},
			_createManageHead: function (b) {
				var c = this,
				d = this.options,
				e = 30;
				if (this.$manageHead ? this.$manageHead.empty() : this.$manageHead = a('<div class="manage-head"/>').appendTo(b), d.dataPerms.create !== !1 && new FX.Button({
						renderEl: a('<div class="manage-btn"/>').appendTo(this.$manageHead),
						iconCls: "icon-add",
						width: 80,
						height: e,
						style: "green",
						text: "",
						onClick: function () {
							var b = a('<div class="x-window-mask modal light"/>').css({
									"z-index": FX.STATIC.zIndex++
								}).appendTo("body");
							new FX.Form(a.extend(d.formAttr, {
									renderEl: a("<div class='x-shadow-content'/>").appendTo(b),
									appId: d.appId,
									entryId: d.entryId,
									ignoreOptAuth: !!d.ignoreAuth,
									ignoreValidate: !!d.ignoreAuth,
									submitData: {
										skipFlow: !0
									},
									title: d.formName,
									buttonPosition: "middle",
									height: "100%",
									submitText: "",
									cancelText: "",
									items: d.formItems,
									onSuccess: function () {
										FX.Msg.toast({
											msg: "!",
											type: "success"
										}),
										b.remove(),
										c.datatable.reload()
									},
									onAfterCancel: function () {
										b.remove()
									}
								}))
						}
					}), d.dataPerms.import !== !1 && new FX.Button({
						renderEl: a('<div class="manage-btn"/>').appendTo(this.$manageHead),
						iconCls: "icon-vip-center-excel-import",
						width: 60,
						height: e,
						style: "simple",
						text: "",
						onClick: function () {
							var a = [];
							d.ignoreAuth ? a = d.formItems : FX.Utils.forEach(d.formItems, function (b, c) {
									c.widget && c.widget.visible && c.widget.enable && a.push(c)
								}),
							new FX.ExcelImportPane({
								formId: d.entryId,
								formName: d.formName,
								formItems: a,
								authGroupId: d.authGroupId,
								onFinish: function () {
									c.datatable.reload()
								}
							})
						}
					}), d.dataPerms.export !== !1 && new FX.Button({
						renderEl: a('<div class="manage-btn"/>').appendTo(this.$manageHead),
						iconCls: "icon-export",
						width: 60,
						height: e,
						style: "simple",
						text: "",
						onClick: function () {
							var a = {},
							b = c.parameter.getValue();
							b && b[d.entryId] && (a[d.entryId] = [b[d.entryId]]),
							new FX.ExcelExportPane({
								fields: c._getFields(FX.LimitFields.excelExport),
								selectedFields: c.fields,
								filter: a,
								forms: [d.entryId],
								name: d.formName,
								authGroupId: d.authGroupId
							}).show()
						}
					}), d.ignoreAuth) {
					var f = a('<div class="manage-btn"/>').appendTo(this.$manageHead);
					new FX.Button({
						renderEl: f,
						iconCls: "icon-batch-edit",
						customCls: "btn-batch",
						width: 90,
						height: e,
						style: "simple",
						text: "",
						onClick: function () {
							var b = a('<div class="data-manage-batch-menu"/>'),
							e = FX.Msg.bubble({
									anchor: f,
									text4Cancel: null,
									text4Ok: null,
									minWidth: 130,
									animation: !1,
									contentHTML: b,
									dockPosition: "right",
									contentPadding: 0,
									hAdjust: 50
								});
							new FX.Button({
								renderEl: a('<div class="action-item"/>').appendTo(b),
								iconCls: "icon-edit",
								text: "",
								style: "simple",
								onClick: function () {
									e.close(),
									c.datatable.setHasCheck(!0),
									c.datatable.refresh(),
									c._createBatchEditHead()
								}
							}),
							new FX.Button({
								renderEl: a('<div class="action-item"/>').appendTo(b),
								iconCls: "icon-vip-center-single-file",
								text: "",
								style: "simple",
								onClick: function () {
									e.close(),
									FX.Vip.hasFileExport() ? new FX.FileExportDialog({
										fields: c._getFields(),
										filter: c.datatable.getFilterData(),
										appId: d.appId,
										entryId: d.entryId,
										formId: d.formId
									}).show() : FX.Msg.alert({
										title: "",
										msg: " ",
										type: "warning",
										text4Ok: "",
										text4Cancel: "",
										onOk: function () {
											FX.Utils.redirectTo("/profile#/vip")
										}
									})
								}
							})
						}
					})
				}
				d.dataPerms.delete  !== !1 && new FX.Button({
					renderEl: a('<div class="manage-btn"/>').appendTo(this.$manageHead),
					iconCls: "icon-trasho",
					width: 60,
					height: e,
					style: "simple",
					text: " ",
					onClick: function () {
						c.datatable.setHasCheck(!0),
						c.datatable.refresh(),
						c._createDeleteHead()
					}
				})
			},
			_isFieldSelectable: function (a) {
				var b = this.options;
				return !!a && (b.authGroupId < 0 || (!b.optAuth || !(!b.optAuth[a.name] || !b.optAuth[a.name].visible)))
			},
			_getFields: function (b) {
				var c = this,
				d = this.options,
				e = [],
				f = ["creator", "createTime", "updateTime"];
				d.hasExtParams && f.push("ext"),
				d.hasFlow && f.push("flowState", "chargers");
				var g = [];
				return FX.Utils.forEach(f, function (a, b) {
					var e = FX.Utils.createEntryAttributeField(b, {
							entryId: d.entryId
						});
					c._isFieldSelectable(e) && g.push(e)
				}),
				FX.Utils.forEach(d.formItems, function (f, g) {
					var h = a.extend(!0, {}, g);
					h.formId = d.entryId;
					var i = FX.Utils.getFieldAttr(h, b || FX.LimitFields.list);
					c._isFieldSelectable(i) && e.push(i)
				}),
				e.concat(g)
			},
			_getShowFields: function (a, b) {
				if (b && b.length > 0) {
					var c = [];
					return FX.Utils.forEach(a, function (a, d) {
						b.indexOf(d.name) > -1 && c.push(d)
					}),
					c
				}
				return a
			},
			showDataManagerView: function () {
				var b = this,
				c = this.options,
				d = a('<div class="manage-body"/>').appendTo(this.element),
				e = c.showFields,
				f = c.showFieldsFilter,
				g = this._getFields(),
				h = this._getShowFields(g, e),
				i = FX.LimitFields.filter,
				j = [];
				FX.Utils.forEach(g, function (a, b) {
					i.indexOf(b.type) > -1 && j.push(b)
				}),
				c.hasFlow && (j.push({
						id: c.entryId,
						name: "flowstate",
						type: "flowstate",
						text: ""
					}), j.push({
						id: c.entryId,
						name: "flownode",
						type: "flownode",
						text: ""
					}));
				var k = [];
				f && (k = this._getShowFields(j, f)),
				this.parameter = new FX.Parameter({
						renderEl: a("<div/>").appendTo(d),
						title: "",
						fields: k,
						showFields: j,
						authGroupId: c.authGroupId,
						onStopEdit: function () {
							b.datatable.reload()
						},
						onAfterHeadCreate: function () {
							this.addShowFields()
						},
						onAfterShowFieldsSelected: function () {
							FX.Utils.applyFunc(b, c.onParamFieldSelect, [this.getValue()], !1),
							b.datatable.reload()
						}
					}),
				this.showFields = g,
				this.fields = h;
				var l = null;
				c.formAttr && "grid-2" === c.formAttr.layout && (l = {}, FX.Utils.forEach(c.formItems, function (a, b) {
						l[b.widget.widgetName] = b.lineWidth
					}));
				var m = {};
				FX.Utils.forEach(c.showFieldsMeta, function (a, b) {
					var c = a;
					b.subform && (c = [b.subform, a].join(".")),
					m[c] = b
				}),
				this.datatable = new FX.DataTable({
						renderEl: a('<div class="manage-table"/>').appendTo(d),
						ignoreOptAuth: !!c.ignoreAuth || c.authGroupId < 0,
						ignoreValidate: !!c.ignoreAuth,
						optAuth: c.optAuth,
						itemEditable: c.dataPerms.update !== !1,
						itemRemovable: c.dataPerms.delete  !== !1,
						resizable: !0,
						showFieldsMeta: m,
						tableClass: "x-resize-table",
						exportable: !1,
						formLayout: l,
						hasFlow: c.hasFlow,
						height4Head: 40,
						width: "100%",
						height: null,
						title: c.formName,
						visible4Title: !1,
						fields: h,
						showFields: this.showFields,
						forms: [c.entryId],
						authGroupId: c.authGroupId,
						onAfterHeadCreate: function (a) {
							var c = this.options,
							d = c.itemRemovable;
							c.itemRemovable = !1,
							this.createHeadTools(),
							b._createManageHead(a),
							c.itemRemovable = d
						},
						onDataFilter: function () {
							return b.parameter.getValue()
						},
						onAfterShowFieldsSelected: function (a) {
							b.fields = b._getShowFields(b._getFields(), a),
							FX.Utils.applyFunc(b, c.onDataFieldSelect, [a], !1)
						},
						onAfterShowFieldsMetaChange: function (a) {
							var d = {};
							FX.Utils.forEach(a, function (a, b) {
								var c,
								e = a;
								if (/\./.test(a)) {
									var f = a.split(/\./);
									e = f[1],
									c = f[0]
								}
								d[e] = {
									subform: c,
									width: b
								}
							}),
							FX.Utils.applyFunc(b, c.onDataFieldMetaChange, [d], !1)
						}
					})
			},
			doResize: function () {
				this.datatable && this.datatable.doResize()
			}
		})
}
(jQuery), function (a) {
	FX.DataRecyclePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DataRecyclePane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_data_recycle",
					appId: "",
					entryId: "",
					formItems: [],
					formAttr: {},
					showFields: [],
					showFieldsFilter: null,
					hasExtParams: !1,
					hasFlow: !1,
					onClose: null
				})
			},
			_init: function () {
				FX.DataRecyclePane.superclass._init.apply(this, arguments),
				FX.STATIC.ENTRYID = this.options.entryId,
				this.changed = !1,
				FX.STATIC.BACKUP = !0,
				this.showDataRecycleView()
			},
			_recycleCheckResult: function (b, c, d, e) {
				var f = this,
				g = this.options,
				h = b ? "" : " ",
				i = c ? h + "" : "" + d.length + "" + h + "";
				FX.Msg.alert({
					title: b ? "" : " ",
					msg: i,
					type: "warning",
					onOk: function () {
						var h = {
							formId: g.entryId
						},
						i = !0;
						c ? h.filter = f.datatable.getFilterData(g.filterParam) : d && d.length > 0 ? h.idList = d : i = !1,
						i && (b ? FX.Utils.dataAjax({
								url: "/data/recover",
								data: a.extend(h, {
									recoverAll: c
								})
							}, function () {
								f._onRecycleSuccess(e)
							}) : FX.Utils.dataAjax({
								url: "/data/hard_remove",
								data: a.extend(h, {
									clearAll: c
								})
							}, function () {
								f._onRecycleSuccess(e)
							}))
					}
				})
			},
			_onRecycleSuccess: function (a) {
				this.changed = !0,
				a ? FX.Utils.applyFunc(this, a, [], !1) : (this.datatable.setHasCheck(!1), this.datatable.reload(), this._createManageHead())
			},
			_createRecycleHead: function (b) {
				var c = this,
				d = this.$recycleHead.empty();
				b ? (new FX.Button({
						renderEl: a('<div class="recycle-btn style-shadow"/>').appendTo(d),
						width: 72,
						height: 25,
						style: "white",
						text: "",
						onClick: function () {
							c._recycleCheckResult(b, !1, c.datatable.getCheckResult())
						}
					}), new FX.Button({
						renderEl: a('<div class="recycle-btn  style-shadow"/>').appendTo(d),
						width: 72,
						height: 25,
						style: "white",
						text: "",
						onClick: function () {
							c._recycleCheckResult(b, !0)
						}
					})) : (new FX.Button({
						renderEl: a('<div class="recycle-btn  style-shadow"/>').appendTo(d),
						width: 72,
						height: 25,
						style: "white",
						text: " ",
						onClick: function () {
							c._recycleCheckResult(b, !1, c.datatable.getCheckResult())
						}
					}), new FX.Button({
						renderEl: a('<div class="recycle-btn  style-shadow warning"/>').appendTo(d),
						width: 72,
						height: 25,
						style: "white",
						text: " ",
						onClick: function () {
							c._recycleCheckResult(b, !0)
						}
					})),
				new FX.Button({
					renderEl: a('<div class="recycle-btn  style-shadow"/>').appendTo(d),
					width: 72,
					height: 25,
					style: "white",
					text: "",
					onClick: function () {
						c.datatable.setHasCheck(!1),
						c.datatable.refresh(),
						c._createManageHead(d)
					}
				})
			},
			_createManageHead: function (b) {
				var c = this;
				this.$recycleHead ? this.$recycleHead.empty() : this.$recycleHead = a('<div class="recycle-head"/>').appendTo(b),
				new FX.Button({
					renderEl: a('<div class="recycle-btn"/>').appendTo(this.$recycleHead),
					width: 72,
					height: 25,
					style: "green",
					text: "",
					onClick: function () {
						c.datatable.setHasCheck(!0),
						c.datatable.refresh(),
						c._createRecycleHead(!0)
					}
				}),
				new FX.Button({
					renderEl: a('<div class="recycle-btn style-shadow warning"/>').appendTo(this.$recycleHead),
					width: 72,
					height: 25,
					style: "white",
					text: " ",
					onClick: function () {
						c.datatable.setHasCheck(!0),
						c.datatable.refresh(),
						c._createRecycleHead(!1)
					}
				})
			},
			_getFields: function () {
				var b = this.options,
				c = [],
				d = ["creator", "createTime", "updateTime", "deleter", "deleteTime"];
				b.hasExtParams && d.push("ext");
				var e = [];
				return FX.Utils.forEach(d, function (a, c) {
					var d = FX.Utils.createEntryAttributeField(c, {
							entryId: b.entryId
						});
					d && e.push(d)
				}),
				FX.Utils.forEach(b.formItems, function (d, e) {
					var f = a.extend(!0, {}, e);
					f.formId = b.entryId;
					var g = FX.Utils.getFieldAttr(f, FX.LimitFields.list);
					g && c.push(g)
				}),
				c.concat(e)
			},
			_getShowFields: function (a, b) {
				if (b && b.length > 0) {
					var c = [];
					return FX.Utils.forEach(a, function (a, d) {
						b.indexOf(d.name) > -1 && c.push(d)
					}),
					c
				}
				return a
			},
			showDataRecycleView: function () {
				var b = this,
				c = this.options,
				d = a('<div class="recycle-body"/>').appendTo(this.element),
				e = ["deleter", "deleteTime"].concat(c.showFields),
				f = ["deleter", "deleteTime"].concat(c.showFieldsFilter),
				g = this._getFields(),
				h = this._getShowFields(g, e),
				i = FX.LimitFields.filter,
				j = [];
				FX.Utils.forEach(g, function (a, b) {
					i.indexOf(b.type) > -1 && j.push(b)
				});
				var k = [];
				f && (k = this._getShowFields(j, f)),
				this.parameter = new FX.Parameter({
						renderEl: a("<div/>").appendTo(d),
						title: "",
						fields: k,
						showFields: j,
						onStopEdit: function () {
							b.datatable.reload()
						},
						onAfterShowFieldsSelected: function () {
							b.datatable.reload()
						},
						onAfterHeadCreate: function () {
							this.addShowFields()
						}
					}),
				this.showFields = g,
				this.fields = h,
				this.datatable = new FX.DataTable({
						renderEl: a('<div class="recycle-table"/>').appendTo(d),
						optAuth: c.optAuth,
						exportable: !1,
						hasFlow: c.hasFlow,
						width: "100%",
						height: null,
						title: c.formName,
						visible4Title: !1,
						fields: h,
						showFields: this.showFields,
						forms: [c.entryId],
						hasRecoverBtn: !0,
						itemPrintable: !1,
						onAfterHeadCreate: function (a) {
							this.createHeadTools(),
							b._createManageHead(a)
						},
						onDataFilter: function () {
							return b.parameter.getValue()
						},
						onRecoverData: function (a, c, d) {
							b._recycleCheckResult(c, !1, [a], function () {
								b.datatable.reload(),
								d.remove()
							})
						}
					}),
				new FX.Slider({
					title: "",
					content: this.element,
					onClose: function () {
						FX.STATIC.BACKUP = !1,
						FX.Utils.applyFunc(b, c.onClose, [b.changed], !1)
					}
				}).show()
			}
		})
}
(jQuery), function (a) {
	FX.DeptLimit = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DeptLimit.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_dept_limit",
					items: [],
					limit: [],
					rely: null,
					limitWidget: null,
					title: "",
					onAfterLimitSet: null,
					onAfterTypeChange: null,
					onAfterWidgetSelect: null,
					onRelySet: null,
					onSetDefaultValue: null,
					onBeforeWidgetsCreate: null
				})
			},
			_init: function () {
				FX.DeptLimit.superclass._init.apply(this, arguments);
				var b = this.options,
				c = this,
				d = "custom";
				FX.Utils.isObjectEmpty(b.rely) ? FX.Utils.isObjectEmpty(b.limitWidget) || (d = "widgets") : d = "rely",
				new FX.ComboBox({
					renderEl: a("<div/>").appendTo(this.element),
					items: b.items,
					searchable: !1,
					allowBlank: !1,
					value: d,
					onAfterItemSelect: function () {
						var a = this.getValue();
						c._setBtnVisible(a),
						FX.Utils.applyFunc(c, b.onAfterTypeChange, [a], !1)
					}
				}),
				this.$limitPane = a("<div/>").appendTo(this.element),
				this._setBtnVisible(d)
			},
			_setBtnVisible: function (a) {
				switch (this.$limitPane.empty(), a) {
				case "custom":
					this._createCustomBtn(),
					this._createDefaultValuePane();
					break;
				case "rely":
					this._createRelyBtn();
					break;
				case "widgets":
					this._createRelyWidgets()
				}
			},
			_createRelyBtn: function () {
				var b = this.options,
				c = this;
				new FX.Button({
					renderEl: a('<div class="set-btn"/>').appendTo(this.$limitPane),
					text: "",
					height: 30,
					width: 240,
					style: "white",
					onClick: function () {
						FX.Utils.applyFunc(c, b.onRelySet, [], !1)
					}
				})
			},
			_createRelyWidgets: function () {
				var b = this.options,
				c = this;
				return FX.Utils.applyFunc(c, b.onBeforeWidgetsCreate, [], !1),
				FX.Utils.isObjectEmpty(this.deptWidgets) ? void this.$limitPane.append(a('<div class="empty-tip"/>').text("")) : void new FX.RadioGroup({
					renderEl: a('<div class="set-btn"/>').appendTo(this.$limitPane),
					items: this.deptWidgets,
					value: b.limitWidget,
					onAfterItemSelect: function () {
						FX.Utils.applyFunc(c, b.onAfterWidgetSelect, [this.getValue()], !1)
					}
				})
			},
			_createCustomBtn: function () {
				var b = this.options,
				c = this;
				new FX.Button({
					renderEl: a('<div class="set-btn"/>').appendTo(this.$limitPane),
					text: "",
					height: 30,
					width: 240,
					style: "white",
					onClick: function () {
						var a = new FX.ConfirmDialog({
								title: b.title,
								height: 570,
								width: 600,
								contentWidget: {
									rowSize: [450],
									colSize: [570],
									padding: 15,
									items: [[{
												widgetName: "memberSelect",
												type: "memberselectpane",
												editable: !0,
												value: b.limit,
												memberEnable: !1,
												dynamicEnable: !0,
												dynamicFields: b.dynamicFields
											}
										]]
								},
								onOk: function () {
									var d = a.getWidgetByName("memberSelect");
									return b.limit = d.getValue(),
									FX.Utils.applyFunc(c, b.onAfterLimitSet, [b.limit], !1),
									!1
								}
							});
						a.show()
					}
				})
			},
			_createDefaultValuePane: function () {
				var b = this,
				c = this.options,
				d = a('<div class="default-pane"/>').append(a('<div class="default-title"/>').text("")).appendTo(this.$limitPane);
				new FX.Button({
					renderEl: a('<div class="set-btn"/>').appendTo(d),
					type: "button",
					text: "",
					height: 30,
					width: 240,
					style: "white",
					onClick: function () {
						FX.Utils.applyFunc(b, c.onSetDefaultValue, [], !1)
					}
				})
			},
			setDeptWidgets: function (a) {
				this.deptWidgets = a
			}
		}),
	a.shortcut("deptlimitpane", FX.DeptLimit)
}
(jQuery), function (a) {
	FX.DateConfigPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.DateConfigPane.superclass._defaultConfig.apply(), {
					baseCls: "fx_date_config",
					format: "yyyy-MM-dd",
					width4date: 160
				})
			},
			_init: function () {
				FX.DateConfigPane.superclass._init.apply(this, arguments);
				var b = this,
				c = this.options;
				this.cfgType = new FX.ComboBox({
						renderEl: a('<div class="cfg-type"/>').appendTo(this.element),
						width: c.width4date,
						items: [{
								text: "",
								value: "today"
							}, {
								text: "",
								value: "yesterday"
							}, {
								text: "7",
								value: "lastWeek"
							}, {
								text: "",
								value: "thisWeek"
							}, {
								text: "",
								value: "thisMonth"
							}, {
								text: "",
								value: "formula"
							}, {
								text: "",
								value: "custom"
							}
						],
						onAfterEdit: function (a, c) {
							c ? b.switchType(c.value) : b.switchType()
						}
					}),
				this.$cfgPane = a('<div class="cfg-pane"/>').appendTo(this.element)
			},
			switchType: function (b) {
				var c = this.options;
				switch (this.cfgType.setValue(b), this.$cfgPane.empty(), b) {
				case "custom":
					this.dataLimit = new FX.DateLimit({
							renderEl: this.$cfgPane,
							format: c.format,
							width4date: c.width4date
						});
					break;
				case "formula":
					this.container = new FX.TableContainer({
							renderEl: this.$cfgPane,
							rowSize: [30, 15, 30],
							colSize: [95, 60],
							hgap: 5,
							vgap: 8,
							items: [[{
										type: "combo",
										widgetName: "from",
										searchable: !1,
										allowBlank: !1,
										value: "before",
										items: [{
												text: "",
												value: "before"
											}, {
												text: "",
												value: "after"
											}
										]
									}, {
										type: "inputgroup",
										widgetName: "numFrom",
										inputEl: {
											width: 32,
											type: "number"
										},
										nextEl: {
											type: "label",
											text: ""
										}
									}
								], [a("<span>~</span>")], [{
										type: "combo",
										widgetName: "to",
										searchable: !1,
										allowBlank: !1,
										value: "after",
										items: [{
												text: "",
												value: "before"
											}, {
												text: "",
												value: "after"
											}
										]
									}, {
										type: "inputgroup",
										widgetName: "numTo",
										inputEl: {
											width: 32,
											type: "number"
										},
										nextEl: {
											type: "label",
											text: ""
										}
									}
								]]
						})
				}
			},
			checkValidate: function () {
				var a = this.cfgType.getValue();
				if ("formula" === a) {
					var b = this.container.getWidgetByName("numFrom"),
					c = this.container.getWidgetByName("numTo");
					return b.checkValidate() && c.checkValidate()
				}
				return !0
			},
			getValue: function () {
				function b(a, b) {
					var c;
					return a = a || "before",
					b = b || 0,
					c = "before" === a ? -1 * b * 24 * 60 * 60 * 1e3 : 24 * b * 60 * 60 * 1e3
				}
				var c = this.cfgType.getValue(),
				d = {
					type: c
				};
				switch (c) {
				case "custom":
					a.extend(d, this.dataLimit.getValue());
					break;
				case "formula":
					var e,
					f,
					g = this.container.getWidgetByName("from").getValue(),
					h = this.container.getWidgetByName("numFrom").getValue(),
					i = this.container.getWidgetByName("to").getValue(),
					j = this.container.getWidgetByName("numTo").getValue();
					if (e = b(g, h), f = b(i, j), e > f) {
						var k = e;
						e = f,
						f = k
					}
					a.extend(d, {
						min: {
							type: e < 0 ? "before" : "after",
							value: Math.abs(e)
						},
						max: {
							type: f < 0 ? "before" : "after",
							value: Math.abs(f)
						}
					})
				}
				return d
			},
			setValue: function (a) {
				switch (this.switchType(a.type), a.type) {
				case "custom":
					this.dataLimit.setValue({
						min: a.min,
						max: a.max
					});
					break;
				case "formula":
					var b = 864e5;
					this.container.getWidgetByName("from").setValue(a.min.type),
					this.container.getWidgetByName("numFrom").setValue(a.min.value / b),
					this.container.getWidgetByName("to").setValue(a.max.type),
					this.container.getWidgetByName("numTo").setValue(a.max.value / b)
				}
			}
		}),
	a.shortcut("dateconfigpane", FX.DateConfigPane)
}
(jQuery), function (a) {
	FX.OrderPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.OrderPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_order",
					limit: 10,
					minReceiptPrice: 500
				})
			},
			_init: function () {
				FX.OrderPane.superclass._init.apply(this, arguments),
				this.filter = {},
				this._initHeader(),
				this._loadOrders(),
				this._bindEvent()
			},
			_initHeader: function () {
				var b = this,
				c = a("<div />"),
				d = a("<div />");
				this.$mergeInvoice = a('<div class="merge-invoice" />'),
				this.$dealStatus = new FX.ComboBox({
						renderEl: c,
						searchable: !1,
						width: 110,
						customCls: "inline",
						items: [{
								value: "paid",
								text: ""
							}, {
								value: "unpaid",
								text: ""
							}, {
								value: "canceled",
								text: ""
							}
						],
						onAfterItemSelect: function () {
							b.page = 1,
							b.filter.orderState = b.$dealStatus.getValue(),
							b._loadOrders()
						}
					}),
				this.$invoiceStatus = new FX.ComboBox({
						renderEl: d,
						searchable: !1,
						width: 110,
						customCls: "inline",
						items: [{
								value: "unreceipted",
								text: ""
							}, {
								value: "receipting",
								text: ""
							}, {
								value: "receipted",
								text: ""
							}, {
								value: "expired",
								text: ""
							}
						],
						onAfterItemSelect: function () {
							b.page = 1,
							b.filter.receiptState = b.$invoiceStatus.getValue(),
							b._loadOrders()
						}
					}),
				new FX.Button({
					renderEl: a("<div />").addClass("btn-merge-invoice").appendTo(this.$mergeInvoice),
					style: "green",
					text: "",
					width: 90,
					height: 30,
					onClick: function () {
						b._mergeInvoice()
					}
				}),
				this.invoiceMap = {};
				var e = a('<div class="my-receipt"/>');
				new FX.Button({
					renderEl: e,
					style: "none",
					text: "",
					width: 90,
					height: 30,
					onClick: function () {
						b._createReceiptGrid()
					}
				}),
				a('<div class="status-filter" />').append(a('<div class="status-item" />').append(a("<label />").text("")).append(c)).append(a('<div class="status-item" />').append(a("<label />").text("")).append(d)).append(e).append(this.$mergeInvoice).appendTo(this.element);
				var f = a('<div class="order-head" />').appendTo(this.element),
				g = ["", "", "", "", "", ""];
				FX.Utils.forEach(g, function (b, c) {
					var d = a('<div class="head-tab" />').text(c).appendTo(f);
					0 === b && d.addClass("with-date")
				}),
				this.mergeAllInvoice = new FX.CheckBox({
						renderEl: a("<div />").addClass("merge-all-invoice").attr("title", "").appendTo(f),
						text: "",
						visible: !1,
						onStateChange: function (a) {
							var c;
							for (c in b.invoiceMap)
								b.invoiceMap[c].setSelected(a)
						}
					})
			},
			_loadOrders: function (b) {
				var c,
				d = this,
				e = this.options;
				b || (b = {
						limit: e.limit,
						skip: 0
					}),
				d.$orderContainer ? c = d.$orderContainer.empty() : (c = a('<div class="order-container" />').appendTo(this.element), d.$orderContainer = c);
				var f = d._createLoadingMask(c);
				d.page = d.page || 1,
				FX.Utils.ajax({
					url: "/profile/order/list",
					data: a.extend({}, d.filter, b)
				}, function (a) {
					d.orders = a.orders,
					FX.Utils.forEach(a.orders, function (a, b) {
						d._createOrderItem(b).appendTo(c)
					}),
					a.count > e.limit && d._createPagination(a.count)
				}, function () {}, function () {
					f.remove()
				})
			},
			getDaysText: function (a) {
				var b = Math.floor(a / 365),
				c = a % 365;
				return (b ? b + "" : "") + (c ? c + "" : "")
			},
			date2str: function (a, b) {
				return FX.Utils.date2Str(new Date(a), b)
			},
			getOrder: function (a) {
				var b = null;
				return FX.Utils.forEach(this.orders, function (c, d) {
					if (d._id === a)
						return b = d, !1
				}),
				b
			},
			_createOrderItem: function (b) {
				var c = FX.CONST.ORDER_STATE,
				d = this,
				e = (this.options, a('<div class="order-item" />').data("orderId", b._id)),
				f = a('<div class="order-header" />').append(a("<span />").text("" + d.date2str(b.create_time, "yyyy-MM-dd HH:mm"))).append(a("<span />").text("" + b.order_no)).appendTo(e),
				g = a('<div class="order-body" />').appendTo(e),
				h = a('<div class="product-col" />').appendTo(g);
				FX.Utils.forEach(b.products, function (e, f) {
					var g = a('<div class="product-item" />').appendTo(h),
					i = a('<div class="product-item-col with-date" />').appendTo(g);
					switch (f.type) {
					case "level":
						i.append(a("<div />").text(FX.CONST.VIP_ORDER.PACK[f.value].name));
						break;
					case "service":
						i.append(a("<div />").text(FX.CONST.VIP_ORDER.SERVICE[f.value].name));
						break;
					case "user":
						i.append(a("<div />").text(" *" + f.value + ""));
						break;
					case "data_addon":
						i.append(a("<div />").text(" *" + f.value / 1e4 + ""));
						break;
					case "upload_addon":
						i.append(a("<div />").text("  *" + f.value / 1073741824 + "GB"));
						break;
					case "aggregate_addon":
						i.append(a("<div />").text(" *" + f.value + "/"))
					}
					b.state >= c.PAID && f.start_date ? i.append(a("<div />").text("" + d.date2str(f.start_date, "yyyy-MM-dd") + " - " + d.date2str(f.expire_date, "yyyy-MM-dd"))) : i.append(a("<div />").text("" + d.getDaysText(f.expire_days)));
					var j = f.discount || 1;
					i = a('<div class="product-item-col" />').appendTo(g),
					j < 1 ? (i.append(a("<div />").text("" + FX.Utils.num2Str(f.adjusted_price, "#.00"))), i.prepend(a('<div class="original-price"/>').text("" + FX.Utils.num2Str(f.price, "#.00")))) : i.append(a("<div />").text("" + FX.Utils.num2Str(f.price, "#.00")))
				}),
				a('<div class="total-price" />').append(a('<div class="total-price-col"/>').text("" + FX.Utils.num2Str(b.price, "#.00"))).appendTo(h);
				var i = b.pay_time ? d.date2str(b.pay_time, "yyyy-MM-dd HH:mm") : "";
				switch (a('<div class="order-col" />').append(a("<span />").text(i)).appendTo(g), b.state) {
				case c.CANCELED:
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					b.is_removable ? a('<div class="order-col" />').append(a('<div class="order-op order-remove" />').data("data-op", "remove").text(" ")).appendTo(g) : a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g);
					break;
				case c.UNPAID:
					var j = !1;
					if (b.is_pay_proofed)
						if (b.pay_meta.is_denied) {
							var k = a('<div class="order-col" />').appendTo(g);
							new FX.Tooltip({
								renderEl: a('<span class="red"/>').text(" ").appendTo(k),
								text: b.pay_meta.deny_reason + " 025-66921190"
							})
						} else
							j = !0, a('<div class="order-col" />').append(a('<span class="red"/>').text(" ")).appendTo(g);
					else
						a('<div class="order-col" />').append(a('<span class="red"/>').text("")).appendTo(g);
					a('<div class="order-col" />').append(a('<span "/>').text("")).appendTo(g),
					j ? a('<div class="order-col" />').append(a('<span "/>').text("")).appendTo(g) : a('<div class="order-col" />').append(a('<div class="order-op-wrapper" />').append(a('<a class="order-pay" />').attr("href", "/profile/order/" + b._id + "/pay").text("")).append(a('<div class="order-op order-pay-proof" />').data("data-op", "payProof").text("")).append(a('<div class="order-op order-cancel" />').data("data-op", "cancel").text(""))).appendTo(g);
					break;
				case c.PAID:
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a('<div class="order-op order-invoice" />').data("data-op", "receipt").text("")).appendTo(g);
					var l = new FX.CheckBox({
							renderEl: a('<div class="check-invoice inline" />').appendTo(f),
							text: ""
						});
					l.setVisible(!1),
					d.invoiceMap[b._id] = l;
					break;
				case c.RECEIPTING:
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g);
					break;
				case c.RECEIPTED:
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g),
					a('<div class="order-col" />').append(a("<span />").text("")).appendTo(g)
				}
				return e
			},
			_mergeInvoice: function () {
				var b,
				c = this,
				d = this.options,
				e = a(".btn-merge-invoice", this.$mergeInvoice),
				f = a(".cfg-merge-invoice", this.$mergeInvoice),
				g = function (a) {
					switch (a) {
					case "normal":
						f.hide(),
						e.show();
						for (b in c.invoiceMap)
							c.invoiceMap[b].setVisible(!1);
						c.mergeAllInvoice.setVisible(!1);
						break;
					case "check":
						e.hide(),
						f.show();
						for (b in c.invoiceMap)
							c.invoiceMap[b].setVisible(!0);
						c.mergeAllInvoice.setVisible(!0)
					}
				};
				f.length || (f = a('<div class="cfg-merge-invoice" />').appendTo(this.$mergeInvoice), new FX.Button({
						renderEl: a("<div />").addClass("btn-cancel").appendTo(f),
						style: "white",
						text: "",
						width: 90,
						height: 30,
						onClick: function () {
							g("normal")
						}
					}), new FX.Button({
						renderEl: a("<div />").addClass("inline").appendTo(f),
						style: "green",
						text: "",
						width: 90,
						height: 30,
						onClick: function () {
							var a,
							b = [],
							e = 0;
							for (a in c.invoiceMap)
								c.invoiceMap[a].getValue() && (b.push(a), e += c.getOrder(a).price);
							if (!b.length)
								return void FX.Msg.toast({
									type: "warning",
									msg: ""
								});
							if (e < d.minReceiptPrice)
								return void FX.Msg.toast({
									type: "warning",
									msg: "500 "
								});
							var f = new FX.ReceiptDialog({
									orderIds: b,
									title: "",
									onAfterPost: function () {
										c._loadOrders()
									}
								});
							f.show(),
							g("normal")
						}
					})),
				g("check")
			},
			_createLoadingMask: function (a) {
				return FX.Utils.createMask(a, {
					hasLoader: !0,
					isLight: !0
				})
			},
			_createReceiptGrid: function () {
				var b = a('<div class="receipt-grid" />');
				new FX.Grid({
					renderEl: b,
					intervalColor: !0,
					async: {
						url: "/profile/order/receipt/list",
						data: {
							hasCount: !0
						}
					},
					hasPagination: !0,
					onAsyncSuccess: function (a) {
						this.options.items = a.receipts
					},
					columnsConfig: [{
							width: 120,
							value: "",
							key: "price"
						}, {
							width: 250,
							value: "",
							onCellCreate: function (b, c, d) {
								return a('<div class="cell"/>').text(FX.Utils.date2Str(new Date(d.create_time), "yyyy-MM-dd HH:mm"))
							}
						}, {
							width: 200,
							value: "",
							key: "company_name"
						}, {
							value: "",
							width: 200,
							onCellCreate: function (b, c, d) {
								var e = a('<div class="cell"/>');
								return d.track_type && d.track_type.length ? e.append(a("<div />").text("--" + d.track_type + ": " + d.track_no)) : e.append(a("<div />").text("")),
								e
							}
						}
					]
				}),
				new FX.Slider({
					title: "",
					content: b
				}).show()
			},
			_bindEvent: function () {
				var b = this,
				c = this.options,
				d = function (d) {
					var e = a(d.target),
					f = e.closest(".order-op");
					if (f && f.length) {
						var g = f.data("data-op"),
						h = f.closest(".order-item").data("orderId");
						switch (g) {
						case "cancel":
							FX.Msg.alert({
								type: "warning",
								title: "",
								msg: " ",
								onOk: function () {
									FX.Utils.ajax({
										url: "/profile/order/" + h + "/cancel"
									}, function () {
										FX.Msg.toast({
											type: "success",
											msg: ""
										}),
										b._loadOrders()
									}, function (a) {
										var b = a.responseJSON || {};
										FX.Msg.toast({
											type: "error",
											msg: b.msg || ""
										})
									})
								}
							});
							break;
						case "remove":
							FX.Msg.alert({
								type: "warning",
								title: " ",
								msg: "   ",
								onOk: function () {
									FX.Utils.ajax({
										url: "/profile/order/" + h + "/remove"
									}, function () {
										FX.Msg.toast({
											type: "success",
											msg: " "
										}),
										b._loadOrders()
									}, function (a) {
										var b = a.responseJSON || {};
										FX.Msg.toast({
											type: "error",
											msg: b.msg || " "
										})
									})
								}
							});
							break;
						case "receipt":
							b.getOrder(h).price >= c.minReceiptPrice ? new FX.ReceiptDialog({
								orderIds: [h],
								title: "",
								onAfterPost: function () {
									b._loadOrders()
								}
							}).show() : FX.Msg.toast({
								type: "warning",
								msg: "500 "
							});
							break;
						case "payProof":
							new FX.PayProofDialog({
								title: "",
								orderNo: b.getOrder(h).order_no,
								orderId: h,
								payMeta: b.getOrder(h).pay_meta,
								onAfterPost: function () {
									b._loadOrders()
								}
							}).show()
						}
					}
				};
				a(this.$orderContainer).unbind(".order-op"),
				a(this.$orderContainer).bind({
					"click.order-op": d
				})
			},
			_createPagination: function (b) {
				var c = this,
				d = this.options;
				new FX.Pagination({
					limit: d.limit,
					curPage: c.page,
					count: b,
					renderEl: a("<div />").appendTo(this.$orderContainer),
					onChangePage: function (a, b) {
						c.page = a,
						c._loadOrders({
							limit: b,
							skip: b * (a - 1)
						})
					}
				})
			}
		})
}
(jQuery), function (a) {
	FX.PayProofDialog = FX.extend(FX.ConfirmDialog, {
			_defaultConfig: function () {
				return a.extend(FX.PayProofDialog.superclass._defaultConfig.apply(this, arguments), {
					customCls: "fx_pay_proof",
					title: "",
					orderNo: "",
					orderId: "",
					width: 655,
					height: 545,
					onOk: this._onOk,
					onAfterPost: null
				})
			},
			_createContent: function (b) {
				FX.ReceiptDialog.superclass._createContent.apply(this, arguments);
				var c = this,
				d = this.options;
				c.widgets = ["order_no", "proof_img", "contact_name", "contact_phone", "account_name", "account_no"],
				FX.Utils.isObjectEmpty(d.contentWidget) && (this.container = new FX.TableContainer(a.extend({
								renderEl: a("<div />").appendTo(b)
							}, this._getContent())), d.payMeta && FX.Utils.forEach(c.widgets, function (a, b) {
						var e = d.payMeta[b];
						e && c.getWidgetByName(b).setValue(e)
					}))
			},
			checkValidate: function () {
				var a = this,
				b = !0;
				return FX.Utils.forEach(a.widgets, function (c, d) {
					if (!a.getWidgetByName(d).checkValidate())
						return b = !1, !1
				}),
				b
			},
			_onOk: function () {
				var a = this;
				this.checkValidate() && (a.data = {}, FX.Utils.forEach(a.widgets, function (b, c) {
						a.data[c] = a.getWidgetByName(c).getValue()
					}), this._createConfirmDialog())
			},
			_getContent: function () {
				return {
					colSize: [100, 440],
					rowSize: [30, "auto", 30, 30, 30, 30],
					vgap: 10,
					hgap: 20,
					padding: 30,
					items: [[{
								type: "label",
								text: ""
							}, {
								type: "label",
								widgetName: "order_no",
								value: this.options.orderNo
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "upload",
								fileType: ["jpg", "png", "gif"],
								uploadToMedia: !0,
								hasPreview: !0,
								widgetName: "proof_img",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "contact_name",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "contact_phone",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "account_name",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: " "
							}, {
								type: "text",
								widgetName: "account_no",
								allowBlank: !1
							}
						]]
				}
			},
			_createConfirmDialog: function () {
				var b = this;
				this.options;
				this.rebuildContent({
					text4Ok: "",
					text4Cancel: "",
					onOk: function () {
						return b._postData(),
						!1
					},
					onCancel: function () {
						b.rebuildContent({
							text4Ok: "",
							text4Cancel: "",
							onOk: b._onOk,
							onCancel: null,
							onContentCreate: null,
							contentWidget: b._getContent()
						}),
						b.setValue(b.data)
					},
					onContentCreate: function (b) {
						return a('<div class="warn-info" />').text("").appendTo(b),
						!1
					},
					contentWidget: {
						colSize: [100, 440],
						rowSize: [30, "auto", 30, 30, 30, 30],
						vgap: 10,
						hgap: 20,
						padding: 30,
						items: [[{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "order_no"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "upload",
									mode: "preview",
									widgetName: "proof_img",
									uploadToMedia: !0
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "contact_name"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "contact_phone"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "account_name"
								}
							], [{
									type: "label",
									text: " "
								}, {
									type: "label",
									widgetName: "account_no"
								}
							]]
					}
				}),
				this.setValue(b.data)
			},
			_postData: function (b) {
				var c = this,
				d = this.options;
				b || (b = this.data),
				FX.Utils.ajax({
					url: "/profile/order/" + d.orderId + "/pay_proof/submit",
					data: {
						proof: b
					}
				}, function () {
					var b = new FX.Dialog({
							onContentCreate: function (b) {
								b.addClass("pay-proof-hint").append(a('<div class="msg" />').text("")).append(a('<div class="sub-msg" />').text(""))
							}
						});
					b.show(),
					FX.Utils.applyFunc(c, d.onAfterPost, [], !1)
				})
			},
			setValue: function (a) {
				var b = this;
				FX.Utils.forEach(this.widgets, function (c, d) {
					b.getWidgetByName(d).setValue(a[d])
				})
			}
		})
}
(jQuery), function (a) {
	FX.OrderDetailPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.OrderDetailPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_order_detail",
					details: {},
					showTip: !0,
					expireDays: 365
				})
			},
			_init: function () {
				FX.OrderDetailPane.superclass._init.apply(this, arguments),
				this._createDetail()
			},
			_getName: function (a, b) {
				if (FX.Utils.isEmpty(b.value))
					return "";
				var c;
				switch (a) {
				case "level":
					c = FX.CONST.VIP_ORDER.PACK[b.value].name;
					break;
				case "service":
					c = FX.CONST.VIP_ORDER.SERVICE[b.value].name;
					break;
				case "data_addon":
					c = "10 x " + b.value / FX.CONST.VIP_ORDER.DATA_ADD_UNIT;
					break;
				case "upload_addon":
					c = " x " + b.value;
					break;
				case "aggregate_addon":
					c = " x " + b.value;
					break;
				case "user":
					c = " x " + b.value + ""
				}
				return c
			},
			_getExpireDay: function (a) {
				var b = this.options;
				if (a.start_date && a.expire_date) {
					var c = "yyyy.MM.dd";
					return "<span>" + FX.Utils.date2Str(new Date(a.start_date), c) + " - " + FX.Utils.date2Str(new Date(a.expire_date), c) + "</span>"
				}
				var d = a.expire_days || b.expireDays,
				e = Math.floor(d / 365),
				f = d % 365;
				return "<span>" + (e ? e + "" : "") + (f ? f + "" : "") + "</span>"
			},
			_createDetail: function () {
				var b = this,
				c = this.options,
				d = a('<table><thead><tr><th class="left"></th><th class="middle">' + (c.showTip ? "" : "") + '</th><th class="right"></th></tr></thead></table>').appendTo(this.element),
				e = a("<tbody/>").appendTo(d);
				FX.Utils.forEach(c.details, function (d, f) {
					if (!FX.Utils.isObjectEmpty(f)) {
						var g = FX.Utils.isEmpty(f.discount) ? 1 : f.discount,
						h = a('<tr><td class="left">' + b._getName(f.type || d, f) + '</td><td class="middle">' + b._getExpireDay(f) + '</td><td class="right"><div class="price"><span class="icon"></span><span>' + FX.Utils.num2Str(f.adjusted_price, "#.00") + "</span></div></td></tr>").appendTo(e);
						c.showTip && f.expire_days < c.expireDays && new FX.Tooltip({
							renderEl: a("<div/>").appendTo(a(".middle", h)),
							customCls: "tool-tip",
							text: " "
						}),
						g < 1 && a(".price", h).prepend(a('<div class="cost"><span></span><span class="icon"></span><span>' + FX.Utils.num2Str(f.price, "#.00") + "</span></div>"))
					}
				})
			}
		})
}
(jQuery), function (a) {
	FX.ReceiptDialog = FX.extend(FX.ConfirmDialog, {
			_defaultConfig: function () {
				return a.extend(FX.ReceiptDialog.superclass._defaultConfig.apply(this, arguments), {
					customCls: "fx_receipt",
					orderIds: [],
					title: "",
					onAfterPost: null,
					width: 655,
					height: 725,
					onOk: this._onOk
				})
			},
			_init: function () {
				FX.ReceiptDialog.superclass._init.apply(this, arguments);
				var a = this;
				this.options;
				a.type = a.type || "plain",
				a.widgets = {
					plain: ["type", "company_name", "receiver_name", "receiver_phone", "receiver_address"],
					special: ["type", "company_name", "tax_number", "reg_address", "reg_phone", "bank", "account", "receiver_name", "receiver_phone", "receiver_address"]
				},
				this._setDefaultValue()
			},
			_createContent: function (b) {
				FX.ReceiptDialog.superclass._createContent.apply(this, arguments);
				var c = this.options;
				FX.Utils.isObjectEmpty(c.contentWidget) && (this.container = new FX.TableContainer(a.extend({
								renderEl: a("<div />").appendTo(b)
							}, this._getContent())))
			},
			_onOk: function () {
				var a = this;
				this.checkValidate() && (a.data = {}, FX.Utils.forEach(this.widgets[this.type], function (b, c) {
						a.data[c] = a.getWidgetByName(c).getValue()
					}), this._createConfirmDialog())
			},
			_getContent: function () {
				var a = this;
				this.options;
				return {
					colSize: [100, 440],
					rowSize: [35, 30, 30, 30, 30, 30, 30, 30, 35, 30, 30, "auto"],
					vgap: 10,
					hgap: 20,
					padding: 30,
					items: [[{
								type: "label",
								customCls: "msg-title",
								text: ""
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "radiogroup",
								customCls: "receipt-type",
								widgetName: "type",
								layout: "horizontal",
								items: [{
										value: "plain",
										text: ""
									}, {
										value: "special",
										text: ""
									}
								],
								onAfterItemSelect: function (b, c) {
									c && a._switchType(c.value)
								}
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "company_name",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "tax_number",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "reg_address",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "reg_phone",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "bank",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "account",
								allowBlank: !1
							}
						], [{
								type: "label",
								customCls: "msg-title",
								text: ""
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "receiver_name",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "text",
								widgetName: "receiver_phone",
								allowBlank: !1
							}
						], [{
								type: "label",
								text: ""
							}, {
								type: "address",
								widgetName: "receiver_address",
								allowBlank: !1
							}
						]]
				}
			},
			_postData: function () {
				var b = this,
				c = this.options;
				FX.Utils.ajax({
					url: "/profile/order/receipt",
					data: {
						orderIds: this.options.orderIds,
						receipt: b.data
					}
				}, function () {
					var d = new FX.Dialog({
							title: "",
							width: 655,
							height: 305,
							onContentCreate: function (b) {
								b.addClass("receipt-apply").append(a('<div class="msg" />').text("")).append(a('<div class="sub-msg" />').text("1-2"))
							}
						});
					d.show(),
					FX.Utils.applyFunc(b, c.onAfterPost, [], !1)
				}, function (a) {
					var b = a.responseJSON || {};
					FX.Msg.toast({
						type: "error",
						msg: b.msg || ""
					})
				})
			},
			checkValidate: function () {
				var a = this,
				b = !0;
				return FX.Utils.forEach(this.widgets[this.type], function (c, d) {
					if (!a.getWidgetByName(d).checkValidate())
						return b = !1, !1
				}),
				b
			},
			_switchType: function (a) {
				var b = this;
				"plain" === a ? (this.doResize({
						height: 545
					}), this.container.setRowVisible([3, 4, 5, 6, 7], !1), b.type = "plain", this.getWidgetByName("type").setValue(b.type)) : "special" === a && (this.doResize({
						height: 725
					}), this.container.setRowVisible([3, 4, 5, 6, 7], !0), this.type = "special", this.getWidgetByName("type").setValue(b.type))
			},
			_setDefaultValue: function () {
				var a = this;
				FX.Utils.ajax({
					url: "/profile/order/default_receipt"
				}, function (b) {
					var c = b.receipt;
					a.data = c,
					FX.Utils.isObjectEmpty(c) ? a._switchType(a.type) : (a._switchType(c.type), a.setValue(c))
				})
			},
			setValue: function (a) {
				var b = this;
				FX.Utils.forEach(this.widgets[this.type], function (c, d) {
					a[d] && b.getWidgetByName(d).setValue(a[d])
				})
			},
			_createConfirmDialog: function () {
				var b = this;
				this.options;
				this.rebuildContent({
					text4Ok: "",
					text4Cancel: "",
					onOk: function () {
						return b._postData(),
						!1
					},
					onCancel: function () {
						b.rebuildContent({
							text4Ok: "",
							text4Cancel: "",
							onOk: b._onOk,
							onCancel: null,
							onContentCreate: null,
							contentWidget: b._getContent()
						}),
						b._switchType(b.type),
						b.setValue(b.data)
					},
					onContentCreate: function (b) {
						return a('<div class="warn-info" />').text("").appendTo(b),
						!1
					},
					contentWidget: {
						colSize: [100, 440],
						rowSize: [35, 30, 30, 30, 30, 30, 30, 30, 35, 30, 30, "auto"],
						vgap: 10,
						hgap: 20,
						padding: 30,
						items: [[{
									type: "label",
									customCls: "msg-title",
									text: ""
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "type",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "company_name",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "tax_number",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "reg_address",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "reg_phone",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "bank",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "account",
									customCls: "label-right"
								}
							], [{
									type: "label",
									customCls: "msg-title",
									text: ""
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "receiver_name",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "receiver_phone",
									customCls: "label-right"
								}
							], [{
									type: "label",
									text: ""
								}, {
									type: "label",
									widgetName: "receiver_address",
									customCls: "label-right"
								}
							]]
					}
				}),
				b._switchType(b.type),
				b.setValue(b.data),
				this.getWidgetByName("type").setValue("special" === b.data.type ? "" : ""),
				this.getWidgetByName("receiver_address").setValue(FX.Utils.address2Str(b.data.receiver_address, "", "pcda"))
			}
		})
}
(jQuery), function (a) {
	FX.ProfilePane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.ProfilePane.superclass._defaultConfig.apply(), {
					baseCls: "fx_profile_pane"
				})
			},
			_init: function () {
				FX.ProfilePane.superclass._init.apply(this, arguments);
				var a = this;
				FX.Utils.ajax({
					url: "/profile/me"
				}, function (b) {
					var c = b.profile;
					a.profile = c,
					a._loadProfile(c)
				})
			},
			_loadUsername: function (b) {
				a('<div class="row"><div class="label"></div><div class="content"><div class="content-row">' + b + "</div></div></div>").appendTo(this.element)
			},
			_loadNickname: function (b, c) {
				var d = this,
				e = a('<div class="row"><div class="label"></div><div class="content"><div class="content-row nickname">' + b + "</div></div></div>").appendTo(this.element),
				f = e.children(".content");
				if (c) {
					this.nickname = b,
					this.$nickname = f.find(".nickname"),
					f.append(a('<div class="content-row"><span class="link change-nick"></span><i class="link icon-angleright"></i></div>'));
					var g = a('<div class="content-edit"/>').appendTo(f);
					a(".change-nick", e).click(function () {
						d._loadNicknameEdit(f.children(".content-row"), g)
					})
				}
			},
			_loadNicknameEdit: function (b, c) {
				var d = this;
				b.hide(),
				c.empty().show();
				var e = new FX.TableContainer({
						renderEl: a("<div/>").prependTo(c),
						rowSize: [36, 36],
						colSize: [240, 70],
						hgap: 0,
						vgap: 10,
						items: [[{
									type: "text",
									widgetName: "nickname",
									value: this.nickname,
									allowBlank: !1
								}
							], [{
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "green",
									onClick: function () {
										var a = e.getWidgetByName("nickname");
										if (!a.checkValidate())
											return void a.showErrorMsg("");
										var f = {
											type: "nickname",
											nickname: a.getValue()
										};
										d._saveInfo(f, function () {
											d.nickname = f.nickname,
											d.$nickname.text(f.nickname),
											b.show(),
											c.hide(),
											FX.Msg.toast({
												type: "success",
												msg: ""
											})
										})
									}
								}, {
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "white",
									onClick: function () {
										b.show(),
										c.hide()
									}
								}
							]]
					});
				e.getWidgetByName("nickname").select()
			},
			_loadEmail: function (b, c) {
				var d = this,
				e = b ? "" : "";
				b = b || "";
				var f = a('<div class="row"><div class="label"></div><div class="content"><div class="content-row email">' + b + "</div></div></div>").appendTo(this.element),
				g = f.children(".content");
				if (c) {
					d.hasPass ? g.append(a('<div class="content-row"><span class="link change-email">' + e + '</span><i class="link icon-angleright"></i></div>')) : g.append(a('<div class="content-row"><span class="grey"> </span></div>'));
					var h = a('<div class="content-edit"/>').appendTo(g);
					a(".change-email", f).click(function () {
						d._loadEmailEdit(g.children(".content-row"), h, !FX.Utils.isEmpty(b))
					})
				}
			},
			_loadEmailEdit: function (b, c, d) {
				var e = this;
				c.empty().show(),
				b.hide();
				var f = new FX.TableContainer({
						renderEl: a("<div/>").prependTo(c),
						rowSize: [36, 20, 36, 36, 36],
						colSize: [70, 240],
						hgap: 0,
						vgap: 10,
						items: [[{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "password",
									regex: /^.{6,}$/,
									onValidateFail: function () {
										return this.showErrorMsg("6"),
										!1
									}
								}
							], [{}, a('<a class="link" href="/password/forget"> </a>')], [{
									type: "label",
									text: "",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "email",
									regex: FX.CONST.TEXT_TYPE_REGEXP.email,
									width: 240,
									height: 36,
									allowBlank: !1,
									onValidateFail: function () {
										return this.showErrorMsg(" "),
										!1
									}
								}
							], [{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "validcodepane",
									widgetName: "code",
									inputWidth: 130,
									btnWidth: 110,
									height: 36,
									btnText: " ",
									waterMark: " ",
									onClick: function () {
										var a = this,
										b = f.getWidgetByName("email");
										return b.checkValidate() ? (this.setEnable(!1), void FX.Utils.ajax({
												url: "/auth/email/get",
												data: {
													email: b.getValue()
												}
											}, function () {
												a.setReloadState()
											}, function () {
												return a.setEnable(!0),
												!1
											})) : void FX.Msg.toast({
											type: "warning",
											msg: ""
										})
									}
								}
							], [{
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "green",
									onClick: function () {
										var a = f.getWidgetByName("password"),
										b = f.getWidgetByName("email"),
										c = f.getWidgetByName("code");
										if (b.checkValidate() && c.checkValidate() && (!d || a.checkValidate())) {
											var g = {
												type: "email",
												confirmPassword: a.getValue(),
												email: b.getValue(),
												emailCode: c.getValue()
											};
											e._saveInfo(g, function (a) {
												e._loadProfile(a.profile),
												FX.Msg.toast({
													type: "success",
													msg: ""
												})
											})
										}
									}
								}, {
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "white",
									onClick: function () {
										c.hide(),
										b.show()
									}
								}
							]]
					});
				d || f.setRowVisible([0, 1], !1),
				f.getWidgetByName("password").editComp.attr("type", "password")
			},
			_loadPhone: function (b) {
				var c = this,
				d = a('<div class="row"><div class="label"></div><div class="content"><div class="content-row phone">' + b + "</div></div></div>").appendTo(this.element),
				e = d.children(".content"),
				f = !FX.Utils.isEmpty(b);
				f || e.empty(),
				this.hasPass ? e.append(a('<div class="content-row"><span class="link change-phone">' + (f ? "" : "") + '</span><i class="link icon-angleright"></i></div>')) : e.append(a('<div class="content-row"><span class="grey"> </span></div>'));
				var g = a('<div class="content-edit"/>').appendTo(e);
				a(".change-phone", d).click(function () {
					c._loadPhoneEdit(e.children(".content-row"), g, f)
				})
			},
			_loadPhoneEdit: function (b, c, d) {
				var e = this;
				c.empty().show(),
				b.hide();
				var f = new FX.TableContainer({
						renderEl: a("<div/>").prependTo(c.empty()),
						rowSize: [36, 20, 36, 36, 36],
						colSize: [70, 240],
						hgap: 0,
						vgap: 10,
						items: [[{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "password",
									regex: /^.{6,}$/,
									allowBlank: !1,
									onValidateFail: function () {
										return this.showErrorMsg("6"),
										!1
									}
								}
							], [{}, a('<a class="link" href="/password/forget"> </a>')], [{
									type: "label",
									text: d ? "" : "",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "phone",
									regex: FX.CONST.TEXT_TYPE_REGEXP.mobile,
									width: 240,
									height: 36,
									allowBlank: !1,
									onValidateFail: function () {
										return this.showErrorMsg(" "),
										!1
									}
								}
							], [{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "validcodepane",
									widgetName: "code",
									inputWidth: 130,
									btnWidth: 110,
									height: 36,
									btnText: " ",
									waterMark: " ",
									onClick: function () {
										var a = this,
										b = f.getWidgetByName("phone");
										return b.checkValidate() ? (this.setEnable(!1), void FX.Utils.ajax({
												url: "/auth/phone/get",
												data: {
													phone: b.getValue()
												}
											}, function () {
												a.setReloadState()
											}, function () {
												return a.setEnable(!0),
												!1
											})) : void FX.Msg.toast({
											type: "warning",
											msg: " "
										})
									}
								}
							], [{
									type: "button",
									width: 90,
									height: 36,
									text: d ? "" : "",
									style: "green",
									onClick: function () {
										var a = f.getWidgetByName("password"),
										b = f.getWidgetByName("phone"),
										c = f.getWidgetByName("code");
										if (b.checkValidate() && c.checkValidate() && (!d || a.checkValidate())) {
											var g = {
												type: "phone",
												confirmPassword: a.getValue(),
												phone: b.getValue(),
												phoneCode: c.getValue()
											};
											e._saveInfo(g, function (a) {
												e._loadProfile(a.profile),
												FX.Msg.toast({
													type: "success",
													msg: d ? "" : ""
												})
											})
										}
									}
								}, {
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "white",
									onClick: function () {
										c.hide(),
										b.show()
									}
								}
							]]
					});
				d || f.setRowVisible([0, 1], !1),
				f.getWidgetByName("password").editComp.attr("type", "password")
			},
			_loadPass: function () {
				var b = a('<div class="row"><div class="label"> </div><div class="content"/></div>').appendTo(this.element);
				this._loadPassContent(b.children(".content"))
			},
			_loadPassContent: function (b) {
				var c = this;
				b.empty();
				var d = this.hasPass ? " " : " ";
				a('<div class="content-row"><span class="link change-pwd">' + d + '</span><i class="link icon-angleright"></i></div>').appendTo(b),
				a(".change-pwd", b).click(function () {
					c._loadPassEdit(b)
				})
			},
			_loadPassEdit: function (b) {
				var c = this;
				b.empty();
				var d = new FX.TableContainer({
						renderEl: a('<div class="content-edit"/>').prependTo(b),
						rowSize: [36, 16, 36, 36, 36],
						colSize: [70, 240],
						hgap: 0,
						vgap: 10,
						items: [[{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "oldPass",
									width: 240,
									height: 36,
									allowBlank: !1,
									regex: /^.{6,}$/,
									onValidateFail: function () {
										return this.showErrorMsg("6"),
										!1
									}
								}
							], [{}, a('<a class="link" href="/password/forget"> </a>')], [{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "newPass",
									waterMark: "6",
									width: 240,
									height: 36,
									allowBlank: !1,
									regex: /^.{6,}$/,
									onValidateFail: function () {
										return this.showErrorMsg("6"),
										!1
									}
								}
							], [{
									type: "label",
									text: " ",
									customCls: "content-label"
								}, {
									type: "text",
									widgetName: "confirmPass",
									waterMark: " ",
									width: 240,
									height: 36,
									allowBlank: !1,
									regex: /^.{6,}$/,
									onValidateFail: function () {
										return this.showErrorMsg("6"),
										!1
									}
								}
							], [{
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "green",
									onClick: function () {
										var a = d.getWidgetByName("oldPass"),
										b = d.getWidgetByName("newPass"),
										e = d.getWidgetByName("confirmPass"),
										f = !0;
										if (c.hasPass && (f = a.checkValidate() && f), f = f && e.checkValidate() && b.checkValidate()) {
											if (b.getValue() !== e.getValue())
												return e.setState(FX.States.ERROR), void e.showErrorMsg(" ");
											var g = {
												type: "password",
												changePass: c.hasPass,
												setPass: !c.hasPass,
												password: b.getValue()
											};
											c.hasPass && (g.oldPassword = a.getValue()),
											c._saveInfo(g, function (a) {
												c._loadProfile(a.profile),
												FX.Msg.toast({
													type: "success",
													msg: " "
												})
											})
										}
									}
								}, {
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "white",
									onClick: function () {
										c._loadPassContent(b)
									}
								}
							]]
					});
				d.getWidgetByName("oldPass").editComp.attr("type", "password"),
				d.getWidgetByName("newPass").editComp.attr("type", "password"),
				d.getWidgetByName("confirmPass").editComp.attr("type", "password"),
				this.hasPass || d.setRowVisible([0, 1], !1)
			},
			_loadAccountBind: function (b) {
				b = b || {};
				var c = a('<div class="row"><div class="label"></div><div class="content"/>').appendTo(this.element),
				d = c.children(".content"),
				e = this,
				f = [{
						value: "qq",
						id: "qq",
						text: "QQ"
					}, {
						value: "weibo",
						id: "weibo",
						text: ""
					}, {
						value: "mingdao",
						id: "mingdaoId",
						text: ""
					}, {
						value: "wps",
						id: "wpsId",
						text: "WPS"
					}
				];
				FX.Utils.forEach(f, function (a, c) {
					e._createAccountItem(c, b[c.id]).appendTo(d)
				})
			},
			_createAccountItem: function (b, c) {
				var d = a('<div class="social-icon"><i class="icon-' + b.value + '"/><span>' + b.text + "</span></div>");
				return c ? (d.addClass("unbind"), a('<a class="nav-btn"></a>').appendTo(d).click(function () {
						FX.Msg.alert({
							type: "query",
							title: "",
							msg: "" + b.text + "?",
							onOk: function () {
								FX.Utils.ajax({
									url: "/auth/" + b.value + "/unbind"
								}, function () {
									d.removeClass("unbind"),
									d.children(".nav-btn").text("").attr("href", "/auth/" + b.value + "/login")
								})
							}
						})
					})) : a('<a class="nav-btn" href="/auth/' + b.value + '/login"></a>').appendTo(d),
				d
			},
			_loadAccountMode: function (b) {
				var c = a('<div class="row"><div class="label"></div><div class="content"><div class="content-row"></div></div></div>').appendTo(this.element),
				d = c.children(".content").children(".content-row");
				switch (b) {
				case "wechat":
					d.append('<span class="mode-tag mode-corp"></span>');
					break;
				case "dingtalk":
					d.append('<span class="mode-tag mode-corp"></span>');
					break;
				default:
					d.append('<span class="mode-tag mode-public"></span>')
				}
			},
			_loadCorpUrl: function (b) {
				var c = a('<div class="row corp-url"><div class="label"><span>URL</span><span class="desc">URL </span></div><div class="content"></div></div>').appendTo(this.element);
				this.corpUrl = b,
				this._loadCorpUrlContent(c.children(".content"))
			},
			_loadCorpUrlContent: function (b) {
				var c = this;
				b.empty();
				var d = a('<div class="content-row"/>').appendTo(b),
				e = "";
				if (!FX.Utils.isEmpty(this.corpUrl)) {
					e = "";
					var f = [FX.CONFIG.HOST.SITE_HOST, this.corpUrl].join("/");
					d.append('<span class="corp-url">' + f + '</span><a class="share-open" title="" target="_blank" href="' + f + '"><i class="icon-share-open"/></a>')
				}
				new FX.Button({
					renderEl: a('<div class="content-row"/>').appendTo(b),
					text: e,
					style: "green",
					onClick: function () {
						c._loadCorpUrlEdit(b)
					}
				})
			},
			_loadCorpUrlEdit: function (b) {
				var c = this;
				b.empty();
				var d = new FX.TableContainer({
						renderEl: a('<div class="content-edit"/>').prependTo(b),
						rowSize: [32, 36],
						colSize: [400, 40],
						hgap: 0,
						vgap: 10,
						items: [[{
									type: "inputgroup",
									widgetName: "corpUrl",
									prevEl: {
										type: "label",
										text: FX.CONFIG.HOST.SITE_HOST + "/",
										width: 200
									},
									inputEl: {
										type: "text",
										waterMark: "5",
										value: this.corpUrl,
										regex: /^[A-Za-z]+\w{4,}$/,
										width: 200
									}
								}
							], [{
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "green",
									onClick: function () {
										var a = d.getWidgetByName("corpUrl"),
										e = {
											type: "corpURL",
											corpURL: a.getValue()
										};
										return e.corpURL === c.corpUrl ? void c._loadCorpUrlContent(b) : void c._saveInfo(e, function () {
											c.corpUrl = e.corpURL,
											c._loadCorpUrlContent(b),
											FX.Msg.toast({
												type: "success",
												msg: "URL"
											})
										})
									}
								}, {
									type: "button",
									width: 90,
									height: 36,
									text: "",
									style: "white",
									onClick: function () {
										c._loadCorpUrlContent(b)
									}
								}
							]]
					})
			},
			_saveInfo: function (a, b) {
				FX.Utils.ajax({
					url: "/profile/update",
					data: a
				}, b, function (a) {
					var b = a.responseJSON || {};
					FX.Msg.toast({
						type: "warning",
						msg: b.msg || ""
					})
				})
			},
			_loadProfile: function (a) {
				var b = this;
				b.element.empty(),
				/-/.test(a.username) || b._loadUsername(a.username),
				b.hasPass = a.hasPwd,
				b._loadNickname(a.nickname, !a.isCorpUser),
				b._loadEmail(a.email, !a.isCorpUser),
				a.isCorpUser || (b._loadPhone(a.phone), b._loadPass(), b._loadAccountBind(a), b._loadAccountMode(a.corpType), "internal" !== a.corpType && b._loadCorpUrl(a.corpURL))
			}
		})
}
(jQuery), function (a) {
	FX.NotifyConfigPane = FX.extend(FX.Widget, {
			HELP_LINK: {
				AUTH_GROUP: "http://doc.jiandaoyun.com/271694",
				NOTIFY: "http://doc.jiandaoyun.com/277515"
			},
			_defaultConfig: function () {
				return a.extend(FX.NotifyConfigPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_notify_config",
					notify: {},
					formItems: [],
					onSave: null,
					isDingtalkAdmin: !1,
					isWechatAdmin: !1,
					defaultMessage: "",
					defaultDayTime: "09:00",
					defaultOffset: 1
				})
			},
			_init: function () {
				FX.NotifyConfigPane.superclass._init.apply(this, arguments);
				var b = this.options;
				this.notify = a.extend(!0, {}, b.notify);
				var c = [];
				FX.Utils.forEach(b.formItems, function (a, b) {
					b.widget && "datetime" === b.widget.type && c.push({
						value: b.widget.widgetName,
						text: b.label,
						format: b.widget.format
					})
				}),
				this.dateWidgets = c,
				this._createContent()
			},
			_createContent: function () {
				this.$content = a('<div class="config-content"/>').appendTo(this.element),
				this._renderConfigPane(),
				this._renderNotifyBtn()
			},
			_renderConfigPane: function (b) {
				this.$config ? this.$config.empty() : this.$config = a('<div class="config-pane"/>').appendTo(this.$content),
				this._renderNotifyTarget(b),
				this._renderNotifyTime(null, b),
				this._renderNotifyFilter(!FX.Utils.isObjectEmpty(this.notify.data_filter)),
				this._renderNotifyMessage(),
				this._renderNotifyChanel(),
				this._renderNotifyTip()
			},
			_renderNotifyBtn: function () {
				var b = this,
				c = this.options;
				new FX.Button({
					renderEl: a('<div class="btn"/>').appendTo(a('<div class="btn-pane"/>').appendTo(this.$content)),
					style: "green",
					text: "",
					width: 120,
					onClick: function () {
						b.checkValidate() ? (b._renderConfigPane(), FX.Utils.applyFunc(b, c.onSave, [], !1)) : b._renderConfigPane(!0)
					}
				})
			},
			_renderNotifyTarget: function (b) {
				var c = this,
				d = this.notify.target,
				e = a("<div/>").appendTo(this.$config);
				d || (d = {
						type: "member"
					}, this.notify.target = d),
				a('<div class="label"></div>').appendTo(e),
				new FX.ComboBox({
					renderEl: a('<div class="widget"/>').appendTo(e),
					items: [{
							value: "member",
							text: ""
						}, {
							value: "auth_group",
							text: ""
						}
					],
					value: d.type,
					allowBlank: !1,
					searchable: !1,
					enable: !1,
					visible: !1,
					onStopEdit: function () {
						var b = this.getValue();
						a.extend(d, {
							type: b
						}),
						c._renderConfigPane()
					}
				});
				var f = [];
				FX.Utils.forEach(d.users, function (a, b) {
					f.push(b._id || b)
				}),
				d.users = f;
				var g = [];
				FX.Utils.forEach(d.departs, function (a, b) {
					g.push(b._id || b)
				}),
				d.departs = g,
				b && FX.Utils.isObjectEmpty(f.concat(g)) && e.children(".label").append(a('<span class="invalid-tip"></span>'));
				new FX.MemberSelectPane({
					renderEl: a('<div class="widget"/>').appendTo(e),
					value: f.concat(g),
					items: c.memberItems,
					visible: "member" === d.type,
					hasAdmin: !0,
					msg: " ",
					width: 450,
					onAsyncSuccess: function (a) {
						c.memberItems = a
					},
					onStopEdit: function () {
						var b = this.getJsonValue();
						a.extend(d, {
							users: b.users,
							departs: b.departs
						}),
						c.memberItems = this.getItems()
					}
				});
				if ("member" !== d.type) {
					var h = [];
					FX.Utils.forEach(d.groups, function (a, b) {
						h.push(b.groupId || b)
					}),
					d.groups = h,
					b && FX.Utils.isObjectEmpty(h) && e.children(".label").append(a('<span class="invalid-tip"></span>')),
					new FX.AuthGroupSelectPane({
						renderEl: a('<div class="widget"/>').appendTo(e),
						value: h,
						items: c.authItems,
						appId: FX.STATIC.APPID,
						formId: FX.STATIC.ENTRYID,
						width: 450,
						onAsyncSuccess: function (a) {
							c.authItems = a
						},
						onStopEdit: function (b) {
							a.extend(d, {
								groups: b
							}),
							c.authItems = this.items
						}
					});
					var i = "",
					j = {
						text: "",
						url: this.HELP_LINK.AUTH_GROUP
					};
					e.append(a('<span class="tip">' + i + '</span><a href="' + j.url + '" class="link" target="_blank">' + j.text + "</a>"))
				}
			},
			_renderNotifyTime: function (b, c) {
				var d = this,
				e = this.$config;
				b || (b = a("<div/>").appendTo(e));
				var f = this.notify,
				g = f.time;
				if (FX.Utils.isObjectEmpty(g) && (g = {
							repeat: "never"
						}, this.notify.time = g), FX.Utils.isNull(f.mode) && (f.mode = "create"), a('<div class="label"></div>').appendTo(b), new FX.ComboBox({
						renderEl: a('<div class="widget"/>').appendTo(b),
						items: [{
								value: "create",
								text: ""
							}, {
								value: "custom",
								text: ""
							}, {
								value: "widget",
								text: " "
							}
						],
						value: f.mode,
						allowBlank: !1,
						searchable: !1,
						onStopEdit: function () {
							var b = this.getValue();
							b !== f.mode && (a.extend(f, {
									mode: b
								}), d._renderConfigPane())
						}
					}), "create" !== f.mode)
					switch (f.mode) {
					case "custom":
						this._renderCustomTime(b, g, c);
						break;
					case "widget":
						this._renderWidgetTime(a("<div/>").appendTo(b), g)
					}
			},
			_renderCustomTime: function (b, c, d) {
				var e = this,
				f = " ";
				b.append(a('<span class="tip">' + f + "</span>"));
				var g = a('<div class="sub-item half">').append('<div class="sub-label"></div>').appendTo(b);
				d && FX.Utils.isEmpty(c.custom) && g.children(".sub-label").append(a('<span class="invalid-tip"></span>')),
				new FX.DateTime({
					renderEl: a('<div class="sub-widget"/>').appendTo(g),
					value: c.custom,
					format: "yyyy-MM-dd HH:mm:ss",
					onStopEdit: function () {
						var b = this.getValue();
						b !== c.custom && a.extend(c, {
							custom: b
						})
					}
				});
				var h = a('<div class="sub-item half">').append('<div class="sub-label"></div>').appendTo(b);
				if (new FX.ComboBox({
						renderEl: a('<div class="sub-widget"/>').appendTo(h),
						items: [{
								value: "never",
								text: ""
							}, {
								value: "1d",
								text: ""
							}, {
								value: "1w",
								text: ""
							}, {
								value: "2w",
								text: ""
							}, {
								value: "1M",
								text: ""
							}, {
								value: "1y",
								text: ""
							}
						],
						width: 120,
						allowBlank: !1,
						searchable: !1,
						value: c.repeat,
						onStopEdit: function () {
							var d = this.getValue();
							d !== c.repeat && (a.extend(c, {
									repeat: d
								}), e._renderNotifyTime(b.empty()))
						}
					}), "never" !== c.repeat) {
					var i = a('<div class="sub-item">').append('<div class="sub-label"></div>').appendTo(b);
					new FX.DateTime({
						renderEl: a('<div class="sub-widget"/>').appendTo(i),
						value: c.finish,
						format: "yyyy-MM-dd HH:mm:ss",
						onStopEdit: function () {
							var b = this.getValue();
							b !== c.finish && a.extend(c, {
								finish: b
							})
						}
					}),
					d && FX.Utils.isEmpty(c.finish) && i.children(".sub-label").append(a('<span class="invalid-tip"></span>'))
				}
			},
			_renderWidgetTime: function (b, c) {
				var d = this,
				e = this.options;
				b.empty(),
				a('<div class="tip"/>').text(" ").appendTo(b);
				var f = a('<div class="sub-item half">').append('<div class="sub-label"></div>').appendTo(b);
				if (new FX.ComboBox({
						renderEl: a('<div class="sub-widget"/>').appendTo(f),
						items: this.dateWidgets,
						width: 200,
						allowBlank: !1,
						searchable: !1,
						value: c.widget,
						onAfterItemSelect: function (a, e) {
							c.widget = e.value,
							c.widget_type = "date",
							/[Hhms]/.test(e.format) && (c.widget_type = "datetime"),
							d._renderWidgetTime(b, c)
						}
					}), c.widget) {
					c.widget_type || (c.widget_type = "date"),
					c.offset || (c.offset = "");
					var g = "current";
					/\+/.test(c.offset) ? g = "after" : /-/.test(c.offset) && (g = "before");
					var h = "";
					"date" === c.widget_type && (h = "");
					var i = a('<div class="sub-item half">').append('<div class="sub-label"></div>').appendTo(b);
					if (new FX.ComboBox({
							renderEl: a('<div class="sub-widget"/>').appendTo(i),
							items: [{
									value: "current",
									text: h
								}, {
									value: "before",
									text: ""
								}, {
									value: "after",
									text: ""
								}
							],
							width: 100,
							allowBlank: !1,
							value: g,
							onStopEdit: function () {
								var a = this.getValue();
								switch (a) {
								case "current":
									c.offset = "";
									break;
								case "before":
									c.offset = "-" + c.offset.replace(/[+-]/, "");
									break;
								case "after":
									c.offset = "+" + c.offset.replace(/[+-]/, "")
								}
								d._renderWidgetTime(b, c)
							}
						}), "current" !== g) {
						var j = c.offset.match(/[0-9]+/);
						j || (j = e.defaultOffset, c.offset += j),
						new FX.Number({
							renderEl: a('<div class="sub-widget"/>').appendTo(i),
							width: 40,
							allowBlank: !1,
							value: j,
							onStopEdit: function () {
								var a = this.getValue();
								(!a || a < 0) && (a = e.defaultOffset),
								a = Math.round(a),
								this.setValue(a),
								c.offset = c.offset.replace(/[\d]+([.]{1}[\d]+){0,}/, a)
							}
						});
						var k = c.offset.match(/[hmd]+/);
						"date" === c.widget_type ? (k && "d" === k || (c.offset = c.offset.replace(/[hmd]+/, "") + "d"), a('<div class="sub-widget"></div>').appendTo(i)) : (k || (k = "m", c.offset += k), new FX.ComboBox({
								renderEl: a('<div class="sub-widget"/>').appendTo(i),
								items: [{
										value: "m",
										text: ""
									}, {
										value: "h",
										text: ""
									}, {
										value: "d",
										text: ""
									}
								],
								width: 100,
								allowBlank: !1,
								searchable: !1,
								value: k,
								onStopEdit: function () {
									var a = this.getValue();
									c.offset = c.offset.replace(/[mhd]/, a)
								}
							}))
					}
					if ("date" === c.widget_type) {
						c.daytime || (c.daytime = e.defaultDayTime);
						var l = new Date;
						l.setHours(c.daytime.split(":")[0]),
						l.setMinutes(c.daytime.split(":")[1]),
						new FX.DateTime({
							renderEl: a('<div class="sub-widget"/>').appendTo(i),
							format: "HH:mm",
							triggerIcon: "icon-widget-time",
							width: 100,
							allowBlank: !1,
							value: l,
							onStopEdit: function () {
								c.daytime = this.getText()
							}
						})
					}
				}
			},
			_renderNotifyFilter: function (b, c) {
				var d = this,
				e = this.$config,
				f = this.notify;
				if ("auth_group" === f.target.type || "custom" === f.mode)
					return void(f.data_filter = {});
				if (c || (c = a("<div/>").appendTo(e)), a('<div class="label"></div>').appendTo(c), new FX.ComboBox({
						renderEl: a('<div class="widget"/>').appendTo(c),
						items: [{
								value: !1,
								text: ""
							}, {
								value: !0,
								text: ""
							}
						],
						value: b,
						allowBlank: !1,
						searchable: !1,
						onStopEdit: function () {
							var a = this.getValue();
							b !== a && (b = a, d._renderNotifyFilter(b, c.empty()))
						}
					}), !b)
					return void(f.data_filter = {});
				var g = {};
				g[FX.STATIC.ENTRYID] = f.data_filter,
				new FX.ConfigPane({
					renderEl: a('<div class="widget validator"/>').appendTo(c),
					items: [{
							widget: {
								type: "filterpane",
								text4add: " ",
								tip: " ",
								fields: g,
								forms: [FX.STATIC.ENTRYID],
								supportCurrentDept: !1,
								supportCurrentUser: !1,
								onStopEdit: function () {
									var b = this.getValue(),
									c = {};
									FX.Utils.isObjectEmpty(b) || (c = b[FX.STATIC.ENTRYID]),
									a.extend(f, {
										data_filter: c
									})
								}
							}
						}
					]
				})
			},
			_renderNotifyMessage: function () {
				var b = this.options,
				c = this.notify,
				d = this.$config;
				a('<div class="label"></div>').appendTo(d),
				new FX.TextEditor({
					renderEl: a("<div/>").appendTo(d),
					value: c.message || b.defaultMessage,
					allowBlank: !1,
					onStopEdit: function () {
						var b = this.getValue();
						b !== c.message && a.extend(c, {
							message: b
						})
					}
				})
			},
			_renderNotifyChanel: function () {
				var b = this.options,
				c = this.notify,
				d = this.$config,
				e = a('<div class="widget"/>').appendTo(d),
				f = !0,
				g = [],
				h = "",
				i = [];
				b.isDingtalkAdmin ? (f = !1, i = ["dingtalk"], g = [{
							value: "dingtalk",
							text: ""
						}
					], h = "") : b.isWechatAdmin ? (i = ["wechat"], g = [{
							value: "wechat",
							text: ""
						}, {
							value: "mail",
							text: ""
						}
					]) : (i = ["mail"], g = [{
							value: "mail",
							text: ""
						}, {
							value: "wechat",
							text: ""
						}
					]),
				FX.Utils.isObjectEmpty(c.channels) && (c.channels = i),
				new FX.CheckBoxGroup({
					renderEl: e,
					items: g,
					layout: "horizontal",
					value: c.channels,
					allowBlank: !1,
					enable: f,
					onStopEdit: function () {
						var b = this.getValue();
						FX.Utils.isObjectEmpty(b) && (b = i, this.setValue(b)),
						a.extend(c, {
							channels: b
						})
					}
				}),
				h && a('<span class="tip"/>').text(h).appendTo(e)
			},
			_renderNotifyTip: function () {
				var b = this.options;
				if (!b.isDingtalkAdmin) {
					var c = a('<div class="tip-pane"/>').appendTo(this.$config),
					d = "",
					e = {};
					b.isWechatAdmin ? (d += "", e = {
							text: "",
							url: this.HELP_LINK.NOTIFY
						}) : (d += "", e = {
							text: "",
							url: this.HELP_LINK.NOTIFY
						}),
					c.append(a('<span class="tip">' + d + '</span><a href="' + e.url + '" class="link" target="_blank">' + e.text + "</a>"))
				}
			},
			checkValidate: function () {
				var a = this.options,
				b = this.notify,
				c = !0,
				d = b.target;
				if (c = "member" === d.type ? c && !(FX.Utils.isObjectEmpty(d.users) && FX.Utils.isObjectEmpty(d.departs)) : c && !FX.Utils.isObjectEmpty(d.groups), !c)
					return FX.Msg.toast({
						msg: "",
						type: "warning"
					}), c;
				var e = b.time;
				if ("custom" === b.mode) {
					if (c = c && !FX.Utils.isEmpty(e.custom), !c)
						return FX.Msg.toast({
							msg: "",
							type: "warning"
						}), c;
					if ("never" !== e.repeat && (c = c && !FX.Utils.isEmpty(e.finish)), !c)
						return FX.Msg.toast({
							msg: "",
							type: "warning"
						}), c
				}
				var f = b.message;
				return FX.Utils.isEmpty(f) && (b.message = a.defaultMessage),
				c
			},
			getValue: function () {
				return this.notify
			}
		}),
	a.shortcut("notifyconfigpane", FX.NotifyConfigPane)
}
(jQuery), function (a) {
	FX.FormSetPane = FX.extend(FX.Widget, {
			_defaultConfig: function () {
				return a.extend(FX.FormSetPane.superclass._defaultConfig.apply(this, arguments), {
					baseCls: "fx_form_set_pane",
					perPage: 20
				})
			},
			_init: function () {
				FX.FormSetPane.superclass._init.apply(this, arguments),
				this.pageNow = 1,
				this._fetchData()
			},
			_fetchData: function () {},
			_renderMain: function (b) {
				var c = this,
				d = this.options,
				e = a(".pane-main", this.element);
				b.header && this._createHeader(b.header),
				0 === e.length && (e = a('<div class="pane-main"/>').appendTo(this.element));
				var f = a(".main-wrapper", e);
				if (0 === f.length && (f = a('<div class="main-wrapper"/>').appendTo(e)), FX.Utils.forEach(b.items, function (b, d) {
						var e = a('<div class="main-item"/>').appendTo(f);
						e.append(c._createTitleLine(d.title)),
						FX.Utils.forEach(d.lines, function (a, b) {
							e.append(c._createPaneLine(b))
						})
					}), b.items.length === d.perPage) {
					var g = a(".btn-more", e);
					0 === g.length && a('<div class="btn-more"> </div>').on("click", function () {
						c._loadMore()
					}).appendTo(e)
				} else
					a(".btn-more", e).remove()
			},
			_createTitleLine: function (b) {
				var c = this,
				d = !FX.Utils.isObjectEmpty(b.btns),
				e = a('<div class="item-title-line"/>'),
				f = a('<div class="title"/>').text(b.name).appendTo(e);
				if (b.sub) {
					f.addClass("has-sub");
					var g = a('<div class="sub-title"/>').appendTo(e);
					FX.Utils.applyFunc(this, b.sub.onCreate, [g, b.sub], !1) === !1 && g.append("<span>" + b.sub.info + "</span>")
				}
				return d && FX.Utils.forEach(b.btns, function (d, f) {
					f.href ? e.append('<a class="title-btn style-' + f.style + '" href="' + f.href + '" target="fx_form_set">' + f.name + "</a>") : a('<div class="title-btn style-' + f.style + '">' + f.name + "</div>").on("click", function (a) {
						FX.Utils.applyFunc(c, f.onClick, [b, a], !1)
					}).appendTo(e)
				}),
				e
			},
			_createPaneLine: function (b) {
				var c = a('<div class="pane-line"/>');
				return FX.Utils.applyFunc(this, b.onCreate, [c, b], !1) === !1 && c.text(b.info),
				c
			},
			_createHeader: function (b) {
				var c = this,
				d = a(".pane-header", this.element);
				if (!(d.length > 0)) {
					var e = b.hasBorder ? "has-border" : "";
					return d = a('<div class="pane-header ' + e + '"/>').appendTo(this.element),
					a('<div class="header-btn x-btn style-green"><i class="icon-plus"></i>' + b.text + "</div>").on("click", function () {
						FX.Utils.applyFunc(c, b.onClick, [], !1)
					}).appendTo(d),
					d
				}
			},
			_rebuild: function () {
				this.element.empty(),
				this.pageNow = 1,
				this._fetchData()
			},
			_showTip: function (b) {
				a(".pane-main", this.element).append(a('<div class="message-tip"/>').append(b))
			},
			_loadMore: function () {
				this.pageNow++,
				this._fetchData()
			}
		})
}
(jQuery);
!function (a) {
	FX.FormSetPrintPane = FX.extend(FX.FormSetPane, {
			_fetchData: function () {
				var b = this,
				c = this.options,
				d = (this.pageNow - 1) * c.perPage;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/pt/list",
					data: {
						skip: d,
						limit: c.perPage
					}
				}, function (c) {
					var d = {
						btns: {
							remove: {
								name: " ",
								style: "red",
								onClick: function (a) {
									b._removeTemplate(a.printId)
								}
							}
						}
					},
					e = [];
					FX.Utils.forEach(c.templates, function (c, f) {
						var g = [];
						g.push(d.btns.remove),
						g.push({
							name: "",
							style: "green ",
							href: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/pt/" + f.printId + "/edit"
						}),
						e.push({
							title: {
								name: f.name,
								printId: f.printId,
								btns: g
							},
							lines: [{
									temp: f,
									onCreate: function (c, d) {
										var e = d.temp,
										f = !0;
										e.active && (f = !1, a('<span class="line-btn btn-warning"></span>').on("click", function () {
												b._showPrintView(e.printId, e.name, "data")
											}).appendTo(c)),
										e.flow_usage && e.flow_usage > 0 && (f = !1, a('<span class="line-btn btn-success"><span class="badge">' + e.flow_usage + "</span></span>").on("click", function () {
												b._showPrintView(e.printId, e.name, "flow")
											}).appendTo(c)),
										e.group_usage && e.group_usage > 0 && (f = !1, a('<span class="line-btn btn-info"><span class="badge">' + e.group_usage + "</span></span>").on("click", function () {
												b._showPrintView(e.printId, e.name, "auth")
											}).appendTo(c)),
										f && a('<span class="line-btn btn-default"></span>').appendTo(c)
									}
								}
							]
						})
					}),
					b._renderMain({
						header: {
							text: "",
							onClick: function () {
								FX.Utils.dt(FX.CONST.TRACKER.PRINT_CREATE),
								b._createTemplate()
							},
							hasBorder: 0 !== c.templates.length
						},
						items: e
					})
				})
			},
			_showPrintView: function (a, b, c) {
				var d = this.options;
				new FX.PrintViewDialog({
					view: c,
					printName: b,
					currentVersion: d.currentVersion,
					versions: d.flowVersion,
					printId: a
				}).show()
			},
			_createTemplate: function () {
				var a = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/pt/create"
				}, function (b) {
					a._rebuild()
				}, function (a) {
					var b = a.responseJSON || {};
					FX.Vip.showUpgradeTip(b)
				})
			},
			_removeTemplate: function (a) {
				var b = this;
				FX.Msg.alert({
					msg: "   ",
					title: " ",
					onOk: function () {
						FX.Utils.ajax({
							url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/pt/" + a + "/remove"
						}, function (a) {
							b._rebuild()
						})
					}
				})
			}
		})
}
(jQuery);
!function (a) {
	FX.FormSetNotifyPane = FX.extend(FX.FormSetPane, {
			_fetchData: function () {
				var a = this,
				b = this.options,
				c = (this.pageNow - 1) * b.perPage;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/notify/list",
					data: {
						skip: c,
						limit: b.perPage
					}
				}, function (b) {
					var c = [],
					d = {
						header: {
							text: "",
							onClick: function () {
								a._showConfig()
							}
						}
					};
					FX.Utils.forEach(b.notify_list, function (b, d) {
						c.push(a._createItem(d))
					}),
					d.items = c,
					d.header.hasBorder = !FX.Utils.isObjectEmpty(c),
					a._renderMain(d)
				})
			},
			_createItem: function (a) {
				if (!FX.Utils.isObjectEmpty(a)) {
					var b = this;
					return {
						title: {
							name: a.message,
							btns: [{
									style: "red",
									name: " ",
									onClick: function (c, d) {
										FX.Msg.alert({
											title: " ",
											msg: "  ",
											onOk: function () {
												b._remove(a, d)
											}
										})
									}
								}, {
									style: "green",
									name: "",
									onClick: function (c, d) {
										b._showConfig(a, d)
									}
								}, {
									style: "green",
									name: a.enabled ? "" : "",
									onClick: function (c, d) {
										b._active(a, d)
									}
								}
							]
						},
						lines: b._createLines(a)
					}
				}
			},
			_createLines: function (b) {
				var c = this,
				d = [{
						info: "",
						onCreate: function (c, d) {
							var e = d.info;
							if (b.target)
								switch (b.target.type) {
								case "member":
									var f = b.target.departs.concat(b.target.users),
									g = [];
									FX.Utils.forEach(f, function (a, b) {
										g.push(b.name)
									}),
									e += g.join("");
									break;
								case "auth_group":
									var h = [];
									FX.Utils.forEach(b.target.groups, function (a, b) {
										h.push(b.name)
									}),
									e += h.join("")
								}
							c.append(a("<span/>").text(e))
						}
					}, {
						info: "",
						onCreate: function (d, e) {
							var f,
							g = e.info;
							switch (b.mode) {
							case "create":
								g += "";
								break;
							case "custom":
								b.time && (g += "" + FX.Utils.date2Str(new Date(b.time.custom), "yyyy-MM-dd HH:mm:ss") + "", f = c._formatRepeatTime(b.time.repeat), FX.Utils.isEmpty(f) || (g += "" + f + "", g += "" + FX.Utils.date2Str(new Date(b.time.finish), "yyyy-MM-dd HH:mm:ss") + ""));
								break;
							case "widget":
								switch (g += "" + c._getWidgetLabel(b.time.widget), b.time.widget_type) {
								case "date":
									g += FX.Utils.isEmpty(b.time.offset) ? "" : c._formatOffsetTime(b.time.offset) + "",
									g += "" + b.time.daytime + "";
									break;
								case "datetime":
									g += FX.Utils.isEmpty(b.time.offset) ? "" : c._formatOffsetTime(b.time.offset) + ""
								}
								f = c._formatRepeatTime(b.time.repeat),
								FX.Utils.isEmpty(f) || (g += "never" === b.time.repeat ? "" : "" + FX.Utils.date2Str(new Date(b.time.finish), "yyyy-MM-dd HH:mm:ss") + "")
							}
							d.append(a("<span/>").text(g))
						}
					}
				];
				return "custom" !== b.mode && "auth_group" !== b.target.type && d.push({
					info: "",
					onCreate: function (d, e) {
						var f = e.info;
						f += FX.Utils.isObjectEmpty(b.data_filter) ? "" : c._formatDataFilter(b.data_filter, d),
						d.append(a("<span/>").text(f))
					}
				}),
				d.push({
					info: "",
					onCreate: function (c, d) {
						c.append("<span>" + d.info + "</span>"),
						FX.Utils.forEach(b.channels, function (b, d) {
							var e = a("<i/>"),
							f = "";
							switch (d) {
							case "wechat":
								e = a('<i class="icon-wechat style-green"></i>'),
								f = "";
								break;
							case "dingtalk":
								e = a('<i class="icon-dingtalk style-blue-dark"></i>'),
								f = "";
								break;
							case "mail":
								e = a('<i class="icon-register-mail style-blue"></i>'),
								f = ""
							}
							e.hover(function (b) {
								FX.UI.showPopover({
									anchor: a(b.currentTarget),
									content: a("<span/>").text(f),
									type: "dark"
								})
							}, function () {
								FX.UI.closePopover()
							}).appendTo(c)
						})
					}
				}),
				d
			},
			_getWidgetLabel: function (a) {
				var b = this.options,
				c = "";
				return FX.Utils.forEach(b.formItems, function (b, d) {
					if (d.widget.widgetName === a)
						return c = d.label, !1
				}),
				c
			},
			_formatRepeatTime: function (a) {
				switch (a) {
				case "1d":
					return "";
				case "1w":
					return "";
				case "2w":
					return "";
				case "1M":
					return "";
				case "1y":
					return ""
				}
			},
			_formatOffsetTime: function (a) {
				if (FX.Utils.isEmpty(a))
					return "";
				var b,
				c,
				d = a.charAt(0),
				e = a.charAt(a.length - 1),
				f = a.slice(1, a.length - 1);
				switch (d) {
				case "+":
					b = "";
					break;
				case "-":
					b = ""
				}
				switch (e) {
				case "d":
					c = "";
					break;
				case "m":
					c = "";
					break;
				case "h":
					c = ""
				}
				return b + f + c
			},
			_formatDataFilter: function (a, b) {
				var c = this,
				d = this.options,
				e = d.formItems,
				f = "",
				g = {};
				return g = {},
				g.createTime = "",
				g.creator = "",
				g.updateTime = "",
				g.ext = "",
				FX.Utils.forEach(e, function (a, b) {
					g[b.widget.widgetName] = b.label
				}),
				FX.Utils.forEach(a, function (a, d) {
					switch (d.widgetType) {
					case "combocheck":
						f += g[a] + "" + d.widgetValue.items.join("") + "";
						break;
					case "numberlimit":
						f += g[a] + "" + d.widgetValue.min + "" + d.widgetValue.max + "";
						break;
					case "datelimit":
						f += g[a] + "" + FX.Utils.date2Str(new Date(d.widgetValue.min), "yyyy-MM-dd HH:mm:ss") + "" + FX.Utils.date2Str(new Date(d.widgetValue.max), "yyyy-MM-dd HH:mm:ss") + "";
						break;
					case "address":
						f += g[a] + "" + FX.Utils.address2Str(d.widgetValue, "", "pcda") + "";
						break;
					case "usercheck":
						c._getUserName(d.widgetValue.items, function (c) {
							var d = [];
							FX.Utils.forEach(c.users, function (a, b) {
								d.push(b.nickname)
							}),
							b.append("<span>" + g[a] + "" + d.join("") + "</span>")
						});
						break;
					case "deptselect":
						c._getMemberName(d.widgetValue.items, function (c) {
							var d = [];
							FX.Utils.forEach(c.departments, function (a, b) {
								d.push(b.name)
							}),
							b.append("<span>" + g[a] + "" + d.join("") + "</span>")
						})
					}
				}),
				f
			},
			_getUserName: function (a, b) {
				FX.Utils.ajax({
					url: "/corp/list_member_name",
					data: {
						isUserOnly: !0,
						members: a
					}
				}, function (a) {
					FX.Utils.applyFunc(this, b, [a], !1)
				})
			},
			_getMemberName: function (a, b) {
				FX.Utils.ajax({
					url: "/corp/list_member_name",
					data: {
						isDepartmentOnly: !0,
						members: a
					}
				}, function (a) {
					FX.Utils.applyFunc(this, b, [a], !1)
				})
			},
			_remove: function (b, c) {
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/notify/" + b._id + "/remove"
				}, function (b) {
					var d = a(c.target).closest(".main-item");
					d.length > 0 && (d.addClass("fade-out"), setTimeout(function () {
							d.remove()
						}, 218))
				})
			},
			_active: function (b, c) {
				if (b.target)
					switch (b.target.type) {
					case "auth_group":
						b.target.groups = this._format2IdArray(b.target.groups, "groupId");
						break;
					case "member":
						b.target.users = this._format2IdArray(b.target.users, "_id"),
						b.target.departs = this._format2IdArray(b.target.departs, "_id")
					}
				this._update({
					notifyId: b._id,
					notify: a.extend(b, {
						enabled: !b.enabled
					})
				}, c, !1)
			},
			_format2IdArray: function (a, b) {
				var c = [];
				return FX.Utils.forEach(a, function (a, d) {
					FX.Utils.isEmpty(d[b]) ? c.push(d) : c.push(d[b])
				}),
				c
			},
			_update: function (b, c, d) {
				var e = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/notify/" + b.notifyId + "/update",
					data: b
				}, function (b) {
					if (d)
						return void e._rebuild();
					var f,
					g = e._createItem(b.notify);
					c ? (f = a(c.target).closest(".main-item"), f.empty()) : f = a('<div class="main-item"/>').appendTo(a(".pane-main > .main-wrapper", e.element)),
					f.append(e._createTitleLine(g.title)),
					FX.Utils.forEach(g.lines, function (a, b) {
						f.append(e._createPaneLine(b))
					})
				})
			},
			_createNotify: function (a) {
				var b = this;
				FX.Utils.ajax({
					url: "/dashboard/app/" + FX.STATIC.APPID + "/form/" + FX.STATIC.ENTRYID + "/notify/create",
					data: {
						notify: a
					}
				}, function (a) {
					b._rebuild()
				})
			},
			_showConfig: function (b, c) {
				var d = this,
				e = this.options,
				f = new FX.Slider({
						title: "",
						contentWidget: {
							notify: a.extend(!0, {}, b),
							isDingtalkAdmin: e.isDingtalkAdmin,
							isWechatAdmin: e.isWechatAdmin,
							formItems: e.formItems,
							onSave: function () {
								var a = f.getContentWidget().getValue();
								FX.Utils.isObjectEmpty(b) ? d._createNotify(a) : d._update({
									notifyId: b._id,
									notify: a
								}, c, !0),
								FX.Msg.toast({
									msg: "",
									type: "success"
								}),
								f && f.close()
							},
							type: "notifyconfigpane"
						},
						shouldCloseConfirm: !0,
						confirmMsg: ""
					});
				f.show()
			}
		})
}
(jQuery);
